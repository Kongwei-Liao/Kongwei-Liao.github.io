

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=&#34;auto&#34;>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" type="image/png" href="/img/favicon.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="liaogangwei的个人主页">
  <meta name="author" content="Kongwei_Liao">
  <meta name="keywords" content="black, foolish, positive">
  <title>Kongwei_Liao</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.4.0/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  



<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.8.7","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"onlypost":false},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null}}};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.3.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>Fluid</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" href="javascript:">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/img/default.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2019-11-16 23:25" pubdate>
        2019年11月16日 晚上
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      11.9k 字
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      141
       分钟
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none"></h1>
            
            <div class="markdown-body">
              <table>
<thead>
<tr>
<th align="left"><strong>JDBC 类型</strong></th>
<th align="left"><strong>Java 类型</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>CHAR</code></td>
<td align="left"><code>String</code></td>
</tr>
<tr>
<td align="left"><code>VARCHAR</code></td>
<td align="left"><code>String</code></td>
</tr>
<tr>
<td align="left"><code>LONGVARCHAR</code></td>
<td align="left"><code>String</code></td>
</tr>
<tr>
<td align="left"><code>NUMERIC</code></td>
<td align="left"><code>java.math.BigDecimal</code></td>
</tr>
<tr>
<td align="left"><code>DECIMAL</code></td>
<td align="left"><code>java.math.BigDecimal</code></td>
</tr>
<tr>
<td align="left"><code>BIT</code></td>
<td align="left"><code>boolean</code></td>
</tr>
<tr>
<td align="left"><code>TINYINT</code></td>
<td align="left"><code>byte</code></td>
</tr>
<tr>
<td align="left"><code>SMALLINT</code></td>
<td align="left"><code>short</code></td>
</tr>
<tr>
<td align="left"><code>INTEGER</code></td>
<td align="left"><code>int</code></td>
</tr>
<tr>
<td align="left"><code>BIGINT</code></td>
<td align="left"><code>long</code></td>
</tr>
<tr>
<td align="left"><code>REAL</code></td>
<td align="left"><code>float</code></td>
</tr>
<tr>
<td align="left"><code>FLOAT</code></td>
<td align="left"><code>double</code></td>
</tr>
<tr>
<td align="left"><code>DOUBLE</code></td>
<td align="left"><code>double</code></td>
</tr>
<tr>
<td align="left"><code>BINARY</code></td>
<td align="left"><code>byte[]</code></td>
</tr>
<tr>
<td align="left"><code>VARBINARY</code></td>
<td align="left"><code>byte[]</code></td>
</tr>
<tr>
<td align="left"><code>LONGVARBINARY</code></td>
<td align="left"><code>byte[]</code></td>
</tr>
<tr>
<td align="left"><code>DATE</code></td>
<td align="left"><code>java.sql.Date</code></td>
</tr>
<tr>
<td align="left"><code>TIME</code></td>
<td align="left"><code>java.sql.Time</code></td>
</tr>
<tr>
<td align="left"><code>TIMESTAMP</code></td>
<td align="left"><code>java.sql.Timestamp</code></td>
</tr>
</tbody></table>
<h3 id="1、安装MySQL"><a href="#1、安装MySQL" class="headerlink" title="1、安装MySQL"></a>1、安装MySQL</h3><p><img src="MySQL/MySQL.png" srcset="/img/loading.gif" alt="1"></p>
<h3 id="2、数据库引擎"><a href="#2、数据库引擎" class="headerlink" title="2、数据库引擎"></a>2、数据库引擎</h3><h4 id="2-1、数据库引擎有两种："><a href="#2-1、数据库引擎有两种：" class="headerlink" title="2.1、数据库引擎有两种："></a>2.1、数据库引擎有两种：</h4><p>InnoDB:        支持事务的引擎(安全)</p>
<p>MyISAM：    不支持事务的引擎(速度更快)</p>
<h4 id="2-2、数据库引擎的选择"><a href="#2-2、数据库引擎的选择" class="headerlink" title="2.2、数据库引擎的选择"></a>2.2、数据库引擎的选择</h4><p>MySQL中的数据用各种不同的技术存储在文件（或者内存）中。这些技术中的都使用不同的<code>存储机制</code>、<code>索引技巧</code>、<code>锁定水平</code>并且最终提供不同的功能和能力。</p>
<p>通过选择不同的技术，你能够获得额外的速度或者功能，从而改善你的应用的整体功能。</p>
<ul>
<li><p>MyISAM：拥有较高的插入，查询速度，但不支持事务，不支持外键。</p>
</li>
<li><p>InnoDB：支持事务，支持外键，支持行级锁定，性能较低。</p>
</li>
</ul>
<p><strong>InnoDB 存储引擎提供了具有提交、回滚和崩溃恢复能力的事务安全。但对比MyISAM，处理效率差，且会占用更多的磁盘空间以保留数据和索引。</strong></p>
<h3 id="3、数据库的操作"><a href="#3、数据库的操作" class="headerlink" title="3、数据库的操作"></a>3、数据库的操作</h3><p><strong>SQL</strong> (<strong>S</strong>tructured <strong>Q</strong>uery <strong>L</strong>anguage) 结构化查询语言是关系型数据库<strong>标准语言</strong>，直白的讲SQL语句：具备灵活、简单、易用的特点。</p>
<h4 id="3-1、SQL又分为"><a href="#3-1、SQL又分为" class="headerlink" title="3.1、SQL又分为"></a>3.1、SQL又分为</h4><h5 id="3-1-1、数据查询语言（DQL）"><a href="#3-1-1、数据查询语言（DQL）" class="headerlink" title="*3.1.1、数据查询语言（DQL）"></a>*3.1.1、数据查询语言（DQL）</h5><p>也称为“数据检索语句”，用以从表中获得数据，确定数据怎样在应用程序给出。保留字<code>SELECT</code>是DQL（也是所有SQL）用得最多的动词，其他DQL常用的保留字有<code>WHERE</code>，<code>ORDER BY</code>，<code>GROUP BY</code>和<code>HAVING</code>。这些DQL保留字常与其他类型的SQL语句一起使用。</p>
<h5 id="3-1-2、数据操纵语言（DML）"><a href="#3-1-2、数据操纵语言（DML）" class="headerlink" title="*3.1.2、数据操纵语言（DML）"></a>*3.1.2、数据操纵语言（DML）</h5><p>其语句包括动词<code>INSERT</code>，<code>UPDATE</code>和<code>DELETE</code>。它们分别用于添加，修改和删除表中的行。也称为动作查询语言。</p>
<h5 id="3-1-3、DBA的事务处理语言（TPL）"><a href="#3-1-3、DBA的事务处理语言（TPL）" class="headerlink" title="3.1.3、DBA的事务处理语言（TPL）"></a>3.1.3、DBA的事务处理语言（TPL）</h5><p>它的语句能确保被DML语句影响的表的所有行及时得以更新。TPL语句包括<code>BEGIN TRANSACTION</code>，<code>COMMIT</code>和<code>ROLLBACK</code>。</p>
<h5 id="3-1-4、数据控制语言（DCL）"><a href="#3-1-4、数据控制语言（DCL）" class="headerlink" title="3.1.4、数据控制语言（DCL）"></a>3.1.4、数据控制语言（DCL）</h5><p>它的语句通过<code>GRANT</code>或<code>REVOKE</code>获得许可，确定单个用户和用户组对数据库对象的访问。某些RDBMS可用GRANT或REVOKE控制对表单个列的访问。</p>
<h5 id="3-1-5-、数据定义语言（DDL）"><a href="#3-1-5-、数据定义语言（DDL）" class="headerlink" title="3.1.5*、数据定义语言（DDL）"></a>3.1.5*、数据定义语言（DDL）</h5><p>其语句包括动词<code>CREATE</code>和<code>DROP</code>。在数据库中创建新表或删除表（CREAT TABLE 或 DROP TABLE）；为表加入索引等。DDL包括许多与人数据库目录中获得数据有关的保留字。它也是动作查询的一部分。</p>
<h5 id="3-1-6、指针控制语言（CCL）"><a href="#3-1-6、指针控制语言（CCL）" class="headerlink" title="3.1.6、指针控制语言（CCL）"></a>3.1.6、指针控制语言（CCL）</h5><p>它的语句，像<code>DECLARE CURSOR</code>，<code>FETCH INTO</code>和<code>UPDATE WHERE CURRENT</code>用于对一个或多个表单独行的操作。</p>
<h4 id="3-2、SQL书写的注意事项"><a href="#3-2、SQL书写的注意事项" class="headerlink" title="3.2、SQL书写的注意事项"></a>3.2、SQL书写的注意事项</h4><ol>
<li><p>在MySQL数据库中，SQL语句大小写不敏感SQL语句可单行或多行书写</p>
<p>​        a)    Select   SELECT</p>
</li>
<li><p>在SQL语句中，关键字不能跨多行或缩写</p>
</li>
<li><p>为了提高可读性一般关键字大写，其他小写,优化sql目的</p>
</li>
<li><p>空格和缩进使程序易读</p>
</li>
</ol>
<h3 id="4、启动-amp-连接数据库"><a href="#4、启动-amp-连接数据库" class="headerlink" title="4、启动&amp;连接数据库"></a>4、启动&amp;连接数据库</h3><h4 id="4-1、检查MYSQL服务"><a href="#4-1、检查MYSQL服务" class="headerlink" title="4.1、检查MYSQL服务"></a>4.1、检查MYSQL服务</h4><p>打开数据库连接之前：一定要保证MySQL服务已经开启。若没开启，就需要去操作系统中检查服务是否开启</p>
<p>检查MySQL的服务是否已经打开：</p>
<ol>
<li>WIN + R 打开运行：services.msc</li>
<li>控制面板-管理工具-服务</li>
<li>使用命令行命令开启和启动MYSQL服务</li>
</ol>
<ul>
<li>net start 服务名称：开启一个服务，如:<code>net start MySQL</code><ul>
<li>net stop 服务名称：关闭一个服务器，如:<code>net stop MySQL</code></li>
</ul>
</li>
</ul>
<h4 id="4-2、连接数据库"><a href="#4-2、连接数据库" class="headerlink" title="4.2、连接数据库"></a>4.2、连接数据库</h4><h5 id="4-2-1、命令行连接"><a href="#4-2-1、命令行连接" class="headerlink" title="4.2.1、命令行连接"></a>4.2.1、命令行连接</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs css">mysql –u【用户名】 -<span class="hljs-selector-tag">p</span>【密码】 –h【IP】 -<span class="hljs-selector-tag">P</span>【端口，默认一般为<span class="hljs-number">3306</span>】<br>本机上有两种写法：<br>mysql –u用户名 –<span class="hljs-selector-tag">p</span>密码 –hlocalhost –P3306<br>mysql –u用户名 –<span class="hljs-selector-tag">p</span>密码 –h127.<span class="hljs-number">0.0</span>.<span class="hljs-number">1</span> –P3306<br><br>若是在本机登录&amp;端口没有改变，可省略IP和端口的写法：<br>mysql –u用户名 –<span class="hljs-selector-tag">p</span>密码<br><br>也可使用安装好的mysql的命令行窗口：<br>mysql –uroot –<span class="hljs-selector-tag">p</span><br></code></pre></td></tr></table></figure>
<p>如果cmd或terminal中使用上述命令提示MYSQL命令不存在的情况，检查安装MYSQL的时候的环境变量配置是否有误。注：terminal指类UNIX系统的命令行。</p>
<h5 id="4-2-2、可视化界面启动和连接数据库"><a href="#4-2-2、可视化界面启动和连接数据库" class="headerlink" title="4.2.2、可视化界面启动和连接数据库"></a>4.2.2、可视化界面启动和连接数据库</h5><p><img src="MySQL/workbench.png" srcset="/img/loading.gif" alt="1"></p>
<h3 id="5、数据库创建、删除、使用及查看"><a href="#5、数据库创建、删除、使用及查看" class="headerlink" title="5、数据库创建、删除、使用及查看"></a>5、数据库创建、删除、使用及查看</h3><h4 id="5-1、系统数据库"><a href="#5-1、系统数据库" class="headerlink" title="5.1、系统数据库"></a>5.1、系统数据库</h4><p>系统自带的数据库：不能修改，不能删除，具体的内容到别处查去</p>
<blockquote>
<ol>
<li>information_schema：存储数据库对象信息，如：用户表信息，列信息，权限，字符，分区等信息；</li>
<li>performance_schema：存储数据库服务器性能参数信息；</li>
<li>mysql：存储数据库用户权限信息；</li>
<li>test：任何用户都可以使用的测试数据库；</li>
<li>sys：sys库所有的数据源自：performance_schema（创建在performance_schema的视图）。</li>
</ol>
</blockquote>
<h4 id="5-2、用户数据库"><a href="#5-2、用户数据库" class="headerlink" title="5.2、用户数据库"></a>5.2、用户数据库</h4><p>用户自定义的数据库：一般的，一个项目一个用户数据库。  </p>
<h4 id="5-3、查看-amp-使用数据库"><a href="#5-3、查看-amp-使用数据库" class="headerlink" title="5.3、查看&amp;使用数据库"></a>5.3、查看&amp;使用数据库</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">show databases;   <span class="hljs-regexp">//</span>查看数据库<br>use 数据库名;   <span class="hljs-regexp">//</span>使用数据库<br></code></pre></td></tr></table></figure>
<h4 id="5-4、创建数据库"><a href="#5-4、创建数据库" class="headerlink" title="5.4、创建数据库"></a>5.4、创建数据库</h4><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">database</span> 数据库名;<br></code></pre></td></tr></table></figure>
<h4 id="5-6、删除数据库"><a href="#5-6、删除数据库" class="headerlink" title="5.6、删除数据库"></a>5.6、删除数据库</h4><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">drop</span> <span class="hljs-keyword">database</span> 数据库名;<br></code></pre></td></tr></table></figure>
<p>如果没有完备的数据库备份和恢复机制，请慎重考虑使用数据库删除命令，否则误删库的话请节哀：</p>
<p><img src="MySQL/shanku.png" srcset="/img/loading.gif" alt="1"></p>
<h4 id="5-7、可视化操作"><a href="#5-7、可视化操作" class="headerlink" title="5.7、可视化操作"></a>5.7、可视化操作</h4><p>除命令行界面，我们还可以利用第三方工具可视化的数据库查看、使用、创建、删除 。 </p>
<p><img src="MySQL/navicat.png" srcset="/img/loading.gif" alt="1"></p>
<h3 id="6、数据库中表的创建、查询、修改及删除"><a href="#6、数据库中表的创建、查询、修改及删除" class="headerlink" title="6、数据库中表的创建、查询、修改及删除"></a>6、数据库中表的创建、查询、修改及删除</h3><h4 id="6-1、表字段类型"><a href="#6-1、表字段类型" class="headerlink" title="6.1、表字段类型"></a>6.1、表字段类型</h4><p>MySQL支持多种列类型：数值类型、日期/时间类型和字符（串）类型。</p>
<p>高级语言基本数据类型 与 数据库表字段类型 对照表</p>
<table>
<thead>
<tr>
<th>JAVA</th>
<th align="left">Java备注</th>
<th>MYSQL</th>
<th>MYSQL备注</th>
</tr>
</thead>
<tbody><tr>
<td>Int/Integer</td>
<td align="left">短整型</td>
<td>int</td>
<td>短整型</td>
</tr>
<tr>
<td>long</td>
<td align="left">长整型</td>
<td>bigint</td>
<td>长整型</td>
</tr>
<tr>
<td>float</td>
<td align="left">单精度</td>
<td>float</td>
<td>单精度</td>
</tr>
<tr>
<td>double</td>
<td align="left">双精度</td>
<td>double</td>
<td>双精度</td>
</tr>
<tr>
<td>bigdecimal</td>
<td align="left">金融数据</td>
<td>decimal</td>
<td>金融数据</td>
</tr>
<tr>
<td>String</td>
<td align="left">字符串</td>
<td>char</td>
<td>不可变字符串</td>
</tr>
<tr>
<td></td>
<td align="left"></td>
<td>varchar</td>
<td>可变字符串</td>
</tr>
<tr>
<td>Boolean</td>
<td align="left">布尔值</td>
<td>Bit</td>
<td>取值0和1</td>
</tr>
</tbody></table>
<p><code>float(5,2)</code>表示一个有效位最多5位的浮点数，小数占两位，最大表示范围 ± 999.99。</p>
<p>在开发的过程中<code>float和double</code>都是用的比较少的，因为他们精确度不够高，所以在今后用到小数都推荐使用<code>decimal(m,n)</code>。</p>
<h5 id="6-1-1、日期类型"><a href="#6-1-1、日期类型" class="headerlink" title="6.1.1、日期类型"></a>6.1.1、日期类型</h5><blockquote>
<p>1、DATETIME，年月日时分秒<br>2、DATE，年月日<br>3、TIMESTAMP，（时间戳[19700101080001,20381191111407]，基本不会用到它，只作了解）<br>4、TIME，时分秒<br>5、YEAR，年</p>
</blockquote>
<p>注意：在MySQL中，日期时间值使用单引号引起来。相当于Java中的Date（主要），Calender。</p>
<h5 id="6-1-2、二进制类型"><a href="#6-1-2、二进制类型" class="headerlink" title="6.1.2、二进制类型"></a>6.1.2、二进制类型</h5><p><strong>为什么要存放二进制类型？</strong></p>
<p>项目中可能会保存图片，电影和音乐等二进制内容，因为数据库中没有图片类型和电影类型，存的时候使用数据流存储，读取也是通过数据流读取。</p>
<p><strong>开发中，我们一般存储二进制文件保存路径</strong></p>
<p>BIT、我们一般存储0或1，存储Java中Boolean类型的值。MySQL没有Boolean型，有BIT型；</p>
<p>BLOB、保存的时候根据自己的大小，选择使用的类型，一般使用BLOB就够；</p>
<p>不建议把大的数据文件存放到数据库中，如果文件太大，会影响查询和修改速度，而且在备份数据库的时候速度慢。</p>
<p>如果有保存图片和电影等大文件的需求，应该将文件放到磁盘上，将文件的路径存放的数据库中。</p>
<p>BINARY、VARBINARY、TINYBLOB、BLOB、MEDIUMBLOB、LONGBLOB：存放图片、声音和影响等二进制对象，0-4GB。</p>
<p>大量文本的存储还可以使用TEXT文本。</p>
<h4 id="6-2、创建表"><a href="#6-2、创建表" class="headerlink" title="6.2、创建表"></a>6.2、创建表</h4><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs scss">create <span class="hljs-selector-tag">table</span> 表名(<br>	列名<span class="hljs-number">1</span> 类型(长度) <span class="hljs-selector-attr">[约束]</span>,<br>	列名2 类型(长度) <span class="hljs-selector-attr">[约束]</span>,<br>	……<br>);<br></code></pre></td></tr></table></figure>
<p>使用SQL语句创建表，需要指定表名，表中字段名和各字段的类型，约束选项是可选的，多个字段中间用逗号’,’分开。</p>
<p>创建表时，表名字段名尽量使用英文，最忌讳英汉合拼。</p>
<h5 id="6-2-1、数据库字段类型的长度区别"><a href="#6-2-1、数据库字段类型的长度区别" class="headerlink" title="6.2.1、数据库字段类型的长度区别"></a>6.2.1、数据库字段类型的长度区别</h5><p>int类型带长度，如int(5)：不影响存取值，即使设定的值超出了长度的范畴，也能存，如果没有达到设定的长度，则使用空格自动填充到设定的长度；</p>
<p>char类型，如char(5)：不可变字符，设定的长度就是规定当前字段能存的数据的最大长度，若超出长度，则会报错，若没有达到长度，使用空格填充到设定的长度；</p>
<p>varchar，如varchar(10)：可变字符，设定的长度同样是规定当前字段能存的数据的最大长度，若超出长度，则会报错，若没有达到长度，不会使用空格填充，实际多长就是多长。</p>
<h5 id="6-2-2、约束"><a href="#6-2-2、约束" class="headerlink" title="6.2.2、约束"></a>6.2.2、约束</h5><p>约束就是给表中的数据规定取值的规定，比如能否为空，能否重复取值等</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql">字段名  类型(长度) <span class="hljs-keyword">Not</span> <span class="hljs-keyword">Null</span>,<br>字段名  类型(长度) <span class="hljs-keyword">unique</span>,<br></code></pre></td></tr></table></figure>
<p>Null值在被unique约束的字段中是否可以存在多个，是因数据库类型而异的。Null值是可以插入多次的</p>
<h5 id="6-2-3、默认值"><a href="#6-2-3、默认值" class="headerlink" title="6.2.3、默认值"></a>6.2.3、默认值</h5><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs scss">字段名  类型(长度) default 默认值,<br></code></pre></td></tr></table></figure>
<h5 id="6-2-4、主键约束"><a href="#6-2-4、主键约束" class="headerlink" title="6.2.4、主键约束"></a>6.2.4、主键约束</h5><figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sas">字段名  类型(长度) <span class="hljs-meta">primary</span> <span class="hljs-meta">key</span>,<br></code></pre></td></tr></table></figure>
<p>主键约束就是唯一并且非空，关键字primary key</p>
<p><strong>主键约束的分类：</strong></p>
<ol>
<li>主键的设计一般来说是选取某一列作为主键（推荐做法）</li>
<li>选取多列作为主键称之为复合主键（不推荐的做法）</li>
<li>自然主键：你的主键是有业务意义的，比如：身份证号等</li>
<li>代理主键：它没有任何意义(推荐都使用代理主键)</li>
</ol>
<p>为什么推荐使用与业务无关的数据作为主键？</p>
<blockquote>
<p>在实际项目当中，推荐使用代理主键，因为如果和业务相关了，那么当有一天要求数据可以重复了，那么这个字段就不能再作为主键了</p>
</blockquote>
<h5 id="6-2-5、主键递增"><a href="#6-2-5、主键递增" class="headerlink" title="6.2.5、主键递增"></a>6.2.5、主键递增</h5><h5 id="6-2-6、外键约束"><a href="#6-2-6、外键约束" class="headerlink" title="6.2.6、外键约束"></a>6.2.6、外键约束</h5><p>外键本质上就是通过一个表的字段与其他表建立联系，保证数据完整性，假设有表A和表B，若表A的某字段x取值限定使用表B的某字段y的值，那么B表y字段是A表的外键。</p>
<p>我们可以在需要的时候，在DBMS上建立起这么一条约束来防止数据关联出错，但在真实项目中也可能不会去创建，而仅仅是在口头上约定，只是在代码实现的时候注意。</p>
<p>创建外键约束要求两张表的引擎为InnoDB，否则无法成功，因为在MySQL中，InnoDB支持事务和外键，而MyISAM 不支持事务和外键。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> 表名 ENGINE<span class="hljs-operator">=</span><span class="hljs-string">&#x27;InnoDB&#x27;</span>;   <span class="hljs-operator">/</span><span class="hljs-operator">/</span>修改引擎<br><br><span class="hljs-operator">/</span><span class="hljs-operator">/</span>已有表基础上<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> 表名<br><span class="hljs-keyword">ADD</span> CONSTRAIN 外键名 <span class="hljs-keyword">FOREIGN</span> KEY (主表字段) <span class="hljs-keyword">REFERENCES</span> 从表(从表主键);<br><br><span class="hljs-operator">/</span><span class="hljs-operator">/</span>新建表时给出<br><span class="hljs-keyword">FOREIGN</span> KEY 主表(主表字段) <span class="hljs-keyword">REFERENCES</span> 从表(从表主键);<br></code></pre></td></tr></table></figure>


<h4 id="6-3、查看表"><a href="#6-3、查看表" class="headerlink" title="6.3、查看表"></a>6.3、查看表</h4><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">desc 表名<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure>
<p><img src="MySQL/desc.png" srcset="/img/loading.gif"></p>
<h4 id="6-4、修改表结构"><a href="#6-4、修改表结构" class="headerlink" title="6.4、修改表结构"></a>6.4、修改表结构</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> 表名;#更改原有表结构<br><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> 表名 change 列名 新列名 类型;<br><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> 表名 change 列名 列名 新类型;<br><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> 表名 modify 列名 新类型;#和第三条作用一致<br></code></pre></td></tr></table></figure>
<p>修改操作在正式的开发过程中极少的使用，因为开发之前相关表的创建就应当已经确定。若开发中途出现针对表字段等的修改，可能会影响到整个研发的流程。</p>
<h4 id="6-5、删除表"><a href="#6-5、删除表" class="headerlink" title="6.5、删除表"></a>6.5、删除表</h4><p>回顾5.6内容</p>
<figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pf"><span class="hljs-keyword">drop</span> <span class="hljs-built_in">table</span> 表名;<br></code></pre></td></tr></table></figure>


<h4 id="6-6、数据查询-单表查询"><a href="#6-6、数据查询-单表查询" class="headerlink" title="6.6、数据查询-单表查询"></a>6.6、数据查询-单表查询</h4><p><a href="MySQL/product.sql">product表下载</a></p>
<p>product表，如下：</p>
<table>
<thead>
<tr>
<th>列名</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>id</td>
<td>主键</td>
</tr>
<tr>
<td>product_name</td>
<td>产品名称</td>
</tr>
<tr>
<td>category_id</td>
<td>分类编码</td>
</tr>
<tr>
<td>sale_price</td>
<td>零售价</td>
</tr>
<tr>
<td>supplier</td>
<td>供应商</td>
</tr>
<tr>
<td>brand</td>
<td>品牌</td>
</tr>
<tr>
<td>cutoff</td>
<td>折扣</td>
</tr>
<tr>
<td>cost_price</td>
<td>成本价</td>
</tr>
</tbody></table>
<h5 id="6-6-1、SELECT-…-FROM-…"><a href="#6-6-1、SELECT-…-FROM-…" class="headerlink" title="6.6.1、SELECT … FROM …"></a>6.6.1、SELECT … FROM …</h5><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> 表名;          <span class="hljs-comment">//代表查询表中全部信息</span><br><span class="hljs-keyword">select</span> 字段<span class="hljs-number">1</span>,字段<span class="hljs-number">2</span> <span class="hljs-keyword">from</span> 表名;   <span class="hljs-comment">//代表查询表中指定列的信息</span><br></code></pre></td></tr></table></figure>
<p>SQL语句中使用select关键字表示选择查询列表，而from后紧跟要查询的数据源，<code>*</code> 查询出列显示的数据和建表时的列的数据一致。<code>MYSQL语句的执行顺序是：先from表，在select。</code></p>
<blockquote>
<p>查询所有货品信息：<code>Select * from product</code></p>
<p>查询货品id，名称：<code>Select id from product</code></p>
<p>查询供应商信息：<code>Select supplier from product</code></p>
</blockquote>
<h5 id="6-6-2、DISTINCT-数据去重"><a href="#6-6-2、DISTINCT-数据去重" class="headerlink" title="6.6.2、DISTINCT-数据去重"></a>6.6.2、DISTINCT-数据去重</h5><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">select</span> <span class="hljs-keyword">distinct</span> 列,... <span class="hljs-keyword">from</span> 表名;<br></code></pre></td></tr></table></figure>
<blockquote>
<p>查询供应商信息，去掉重复数据：<code>Select distinct supplier from product</code></p>
</blockquote>
<h5 id="6-6-3、CONCAT-函数-拼接结果"><a href="#6-6-3、CONCAT-函数-拼接结果" class="headerlink" title="6.6.3、CONCAT()函数-拼接结果"></a>6.6.3、CONCAT()函数-拼接结果</h5><p>将不同的列拼成一列显示</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">select</span> <span class="hljs-title">concat</span>(<span class="hljs-params">列<span class="hljs-number">1</span>,列<span class="hljs-number">2</span>,.....</span>) <span class="hljs-keyword">from</span> 表名</span>;<br></code></pre></td></tr></table></figure>
<blockquote>
<p>查询结果为：xxx商品的零售价为：xxx</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">select</span> <span class="hljs-title">concat</span>(<span class="hljs-params">product_name,<span class="hljs-string">&quot;商品的零售价为：&quot;</span>,sale_price</span>) <span class="hljs-keyword">from</span> product</span>;<br></code></pre></td></tr></table></figure>
<p><img src="MySQL/concat&as.png" srcset="/img/loading.gif" alt="1"></p>
</blockquote>
<h5 id="6-6-4、数据查询的数学运算"><a href="#6-6-4、数据查询的数学运算" class="headerlink" title="6.6.4、数据查询的数学运算"></a>6.6.4、数据查询的数学运算</h5><ul>
<li><p>对NUMBER类型数据可以使用算数操作符创建表达式（+-*/）</p>
</li>
<li><p>对DATE数据类型使用部分算数操作符创建表达式（+ -）</p>
</li>
</ul>
<ul>
<li>运算优先级：同四则运算</li>
</ul>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">select</span> 列<span class="hljs-number">1</span>[+-*/]列<span class="hljs-number">2</span> from 表名;<br></code></pre></td></tr></table></figure>
<blockquote>
<p>查询所有货品的id，名称和批发价(批发价=卖价*折扣)</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript">select <span class="hljs-built_in">id</span>,product_name,sale_price*cutoff <span class="hljs-keyword">from</span> product;<br></code></pre></td></tr></table></figure>

<p>查询所有货品的id，名称，和各进50个的成本价(成本=costPirce)</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript">select <span class="hljs-built_in">id</span>,product_name,<span class="hljs-number">50</span>*cost_price <span class="hljs-keyword">from</span> product;<br></code></pre></td></tr></table></figure>

<p>查询所有货品的id，名称，各进50个，并且每个运费1元的成本</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">select</span> id,product_name,<span class="hljs-number">50</span>*cost_price+<span class="hljs-number">1</span> from product;<br></code></pre></td></tr></table></figure>
</blockquote>
<h5 id="6-6-5、定义字段别名"><a href="#6-6-5、定义字段别名" class="headerlink" title="6.6.5、定义字段别名"></a>6.6.5、定义字段别名</h5><p>别名是用于改变最终查询显示的列名，可以给任意列设定</p>
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> 列 <span class="hljs-keyword">as</span> 别名 <span class="hljs-keyword">from</span> 表名;  <span class="hljs-comment">//使用as关键字</span><br><span class="hljs-keyword">select</span> 列 别名 <span class="hljs-keyword">from</span> 表名;    <span class="hljs-comment">//省略AS关键字</span><br></code></pre></td></tr></table></figure>
<p>别名的定义很简单，有两种方式，一种是使用AS关键字，一种是省略AS关键字</p>
<p>刚刚进行的数学运算的需求中加上别名</p>
<h5 id=""><a href="#" class="headerlink" title=""></a><img src="MySQL/concat&as.png" srcset="/img/loading.gif"></h5><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs clean">#select concat(<span class="hljs-string">&quot;姓名：&quot;</span>,first_name,last_name) <span class="hljs-string">&quot;信息&quot;</span> <span class="hljs-keyword">from</span> actor;				<br>#OK，查询结果表头是：信息<br><br>#select concat(<span class="hljs-string">&quot;姓名：&quot;</span>,first_name,last_name) 信息 <span class="hljs-keyword">from</span> actor;				<br>#OK，查询结果表头是：信息<br><br>#select concat(<span class="hljs-string">&quot;姓名：&quot;</span>,first_name,last_name) information <span class="hljs-keyword">from</span> actor;		<br>#OK，查询结果表头是：information<br><br>#select concat(information,first_name,last_name) <span class="hljs-string">&quot;信息&quot;</span> <span class="hljs-keyword">from</span> actor;			<br>#ERROR:&gt; <span class="hljs-number">1054</span> - Unknown column <span class="hljs-string">&#x27;information&#x27;</span> <span class="hljs-keyword">in</span> <span class="hljs-string">&#x27;field list&#x27;</span><br><br>#select concat(<span class="hljs-string">&quot;姓名：&quot;</span>,<span class="hljs-string">&#x27;first_name&#x27;</span>,last_name) information <span class="hljs-keyword">from</span> actor;	<br>#OK，查询结果表头是：information 数据内容是：姓名：first_nameAKROYD<br></code></pre></td></tr></table></figure>


<h5 id="6-6-6、带条件的查询"><a href="#6-6-6、带条件的查询" class="headerlink" title="6.6.6、带条件的查询"></a>6.6.6、带条件的查询</h5><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> 列… <span class="hljs-keyword">from</span> 表名 <span class="hljs-keyword">where</span> 条件;  <span class="hljs-comment">//使用where关键字</span><br></code></pre></td></tr></table></figure>
<p>SQL语句中条件分类有许多种，不同的条件写法也可能达到相同的效果。</p>
<h6 id="比较运算"><a href="#比较运算" class="headerlink" title="比较运算"></a>比较运算</h6><table>
<thead>
<tr>
<th>比较运算符</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>=</td>
<td>等于</td>
</tr>
<tr>
<td>&gt;</td>
<td>大于</td>
</tr>
<tr>
<td>&gt;=</td>
<td>大于等于</td>
</tr>
<tr>
<td>&lt;</td>
<td>小于</td>
</tr>
<tr>
<td>&lt;=</td>
<td>小于等于</td>
</tr>
<tr>
<td>!=(&lt;&gt;)</td>
<td>不等于</td>
</tr>
</tbody></table>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">Where 列  比较运算符  值<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure>
<p>字符串、日期需使用<code>单引号括起来</code></p>
<p><code>执行顺序：from—&gt;where—&gt;select</code></p>
<p><strong>别名是否可用于where条件？</strong></p>
<blockquote>
<p>查询货品零售价为119的所有货品信息</p>
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> product <span class="hljs-keyword">where</span> sale_price=<span class="hljs-number">119</span>;<br></code></pre></td></tr></table></figure>

<p>查询货品名为罗技G9X的所有货品信息</p>
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> product <span class="hljs-keyword">where</span> product_name=<span class="hljs-string">&#x27;罗技G9X&#x27;</span>;<br></code></pre></td></tr></table></figure>

<p>查询货品名不为罗技G9X的所有货品信息</p>
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> product <span class="hljs-keyword">where</span> product_name!=<span class="hljs-string">&#x27;罗技G9X&#x27;</span>;<br></code></pre></td></tr></table></figure>

<p>查询分类编号不等于2的货品信息</p>
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> product <span class="hljs-keyword">where</span> category_id!=<span class="hljs-number">2</span>;<br></code></pre></td></tr></table></figure>

<p>查询货品名称,零售价小于等于200的货品</p>
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> product_name <span class="hljs-keyword">from</span> product <span class="hljs-keyword">where</span> sale_price&lt;=<span class="hljs-number">200</span>;<br></code></pre></td></tr></table></figure>

<p>查询id，货品名称，批发价（salePrice*cutoff）大于350的货品</p>
<figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sas"><span class="hljs-meta">select</span> id,product_name <span class="hljs-meta">from</span> product <span class="hljs-meta">where</span> sale_price<span class="hljs-comment">*cutoff&gt;=350;</span><br></code></pre></td></tr></table></figure>
</blockquote>
<h6 id="逻辑运算"><a href="#逻辑运算" class="headerlink" title="逻辑运算"></a>逻辑运算</h6><p>比较运算符的时候，我们基本上只带了一个条件进行查询，那么当遇到多个条件的时候，我们应当怎么办呢？</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">Where 条件<span class="hljs-number">1</span>  逻辑运算符  条件<span class="hljs-number">2</span>;   <span class="hljs-regexp">//</span>and  or<br>Where not 条件;  <span class="hljs-regexp">//</span>not的使用<br></code></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>逻辑运算符</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>AND(&amp;, &amp;&amp;)</td>
<td>如果组合的条件都是true，返回true</td>
</tr>
<tr>
<td>OR(|, ||)</td>
<td>如果组合的条件之一是true，返回true</td>
</tr>
<tr>
<td>NOT(!)</td>
<td>如果条件false，返回true</td>
</tr>
</tbody></table>
<blockquote>
<p>选择id，货品名称，批发价(saleprice*cutoff)在300-400之间的货品</p>
<figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sas"><span class="hljs-meta">select</span> id,product_name <span class="hljs-meta">from</span> product <span class="hljs-meta">where</span> sale_price<span class="hljs-comment">*cutoff&gt;=300 and sale_price*cutoff&lt;=400;</span><br></code></pre></td></tr></table></figure>

<p>选择id，货品名称，分类编号为2,4的所有货品</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript">select <span class="hljs-built_in">id</span>,product_name <span class="hljs-keyword">from</span> product <span class="hljs-keyword">where</span> category_id = <span class="hljs-number">2</span> <span class="hljs-keyword">or</span> category_id=<span class="hljs-number">4</span>;<br></code></pre></td></tr></table></figure>

<p>选择id，货品名称，分类编号的货品，零售价(saleprice)大于等于250或者是成本(costprice)大于等于200</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript">select <span class="hljs-built_in">id</span>,product_name,category_id <span class="hljs-keyword">from</span> product <span class="hljs-keyword">where</span> sale_price &gt;= <span class="hljs-number">250</span> <span class="hljs-keyword">or</span> cost_price &gt;= <span class="hljs-number">200</span>;<br></code></pre></td></tr></table></figure>
</blockquote>
<h6 id="范围查询"><a href="#范围查询" class="headerlink" title="范围查询"></a>范围查询</h6><p><strong>1、BETWEEN…AND…</strong></p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">Where 列 <span class="hljs-keyword">between </span>条件<span class="hljs-number">1</span>  <span class="hljs-keyword">and </span>条件<span class="hljs-number">2</span><span class="hljs-comment">;     //列在这个区间的值，即[m, n]</span><br>Where 列 not <span class="hljs-keyword">between </span>条件<span class="hljs-number">1</span> <span class="hljs-keyword">and </span>条件<span class="hljs-number">2</span><span class="hljs-comment">;  //不在这个区间，即(-∞, m)U(n, +∞)</span><br>Where !( 列 <span class="hljs-keyword">between </span>条件<span class="hljs-number">1</span> <span class="hljs-keyword">and </span>条件<span class="hljs-number">2</span> )<span class="hljs-comment">; //同样表示不在这个区间</span><br></code></pre></td></tr></table></figure>
<blockquote>
<p>选择id，货品名称，批发价在300-400之间的货品</p>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">select</span> product_name <span class="hljs-keyword">from</span> product <span class="hljs-keyword">where</span> cost_price <span class="hljs-keyword">between</span> <span class="hljs-number">300</span> <span class="hljs-keyword">and</span> <span class="hljs-number">400</span>;<br></code></pre></td></tr></table></figure>

<p>选择id，货品名称，批发价不在300-400之间的货品</p>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">select</span> product_name <span class="hljs-keyword">from</span> product <span class="hljs-keyword">where</span> !(cost_price <span class="hljs-keyword">between</span> <span class="hljs-number">300</span> <span class="hljs-keyword">and</span> <span class="hljs-number">400</span>);<br><span class="hljs-keyword">select</span> product_name <span class="hljs-keyword">from</span> product <span class="hljs-keyword">where</span> cost_price <span class="hljs-keyword">not</span> <span class="hljs-keyword">between</span> <span class="hljs-number">300</span> <span class="hljs-keyword">and</span> <span class="hljs-number">400</span>;<br></code></pre></td></tr></table></figure>
<p><strong>2、IN-集合查询</strong></p>
</blockquote>
<p>使用IN运算符，判断列的值是否在指定的集合中</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Where</span> 列 in(值<span class="hljs-number">1</span>,值<span class="hljs-number">2</span>);       //列中的数据是in后的值里面的<br><span class="hljs-attribute">Where</span> 列 not in(值<span class="hljs-number">1</span>,值<span class="hljs-number">2</span>);  //不是in中指定值的数据<br></code></pre></td></tr></table></figure>
<blockquote>
<p>选择id，货品名称和分类编号，分类编号为2,4的所有货品</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">select</span> id,product_name,<span class="hljs-function">category_id <span class="hljs-keyword">from</span> product <span class="hljs-keyword">where</span> category_id <span class="hljs-title">in</span> (<span class="hljs-params"><span class="hljs-number">2</span>,<span class="hljs-number">4</span></span>)</span>;<br></code></pre></td></tr></table></figure>

<p>选择id，货品名称，分类编号不为2,4的所有货品</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">select</span> id,product_name,<span class="hljs-function">category_id <span class="hljs-keyword">from</span> product <span class="hljs-keyword">where</span> category_id <span class="hljs-keyword">not</span> <span class="hljs-title">in</span> (<span class="hljs-params"><span class="hljs-number">2</span>,<span class="hljs-number">4</span></span>)</span>;<br></code></pre></td></tr></table></figure>
<p>事实上要实现范围查询，我们还可以将比较运算符和逻辑运算符结合起来使用</p>
</blockquote>
<h6 id="NULL值的查询"><a href="#NULL值的查询" class="headerlink" title="NULL值的查询"></a>NULL值的查询</h6><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">where</span> 列 <span class="hljs-keyword">is</span> <span class="hljs-literal">null</span>;	<span class="hljs-comment">//查询列中值为null的数据</span><br><span class="hljs-keyword">where</span> 列 <span class="hljs-keyword">is</span> not <span class="hljs-literal">null</span>;<br></code></pre></td></tr></table></figure>
<p>注意：<strong>列中值为null不能使用=去查询</strong></p>
<blockquote>
<p>查询商品名为null的所有商品信息</p>
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> product <span class="hljs-keyword">where</span> product_name <span class="hljs-keyword">is</span> <span class="hljs-literal">null</span>;<br></code></pre></td></tr></table></figure>
</blockquote>
<h6 id="模糊匹配查询"><a href="#模糊匹配查询" class="headerlink" title="模糊匹配查询"></a>模糊匹配查询</h6><p>当需要查询的数据不太确定的时候，可以使用模糊查询，例如：查询姓张的学员，并没有明确指定某一个学员</p>
<p>模糊查询使用like关键字，搭配通配符%和_使用</p>
<p>**%**：表示0到多个字符，示例：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">Where 列 like <span class="hljs-string">&#x27;%0&#x27;</span>;  <span class="hljs-regexp">//</span>表示以<span class="hljs-number">0</span>结尾<br>Where 列 like <span class="hljs-string">&#x27;0%&#x27;</span>;  <span class="hljs-regexp">//</span>表示以<span class="hljs-number">0</span>开头<br>Where 列 like <span class="hljs-string">&#x27;%0%&#x27;</span>;  <span class="hljs-regexp">//</span>表示数据中包含<span class="hljs-number">0</span><br></code></pre></td></tr></table></figure>
<p><strong>_</strong>：表示一个字符，可多次使用，示例：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">Where 列 like <span class="hljs-string">&#x27;%0_&#x27;</span>;  <span class="hljs-regexp">//</span>数据结尾第二位是<span class="hljs-number">0</span><br></code></pre></td></tr></table></figure>
<blockquote>
<p>查询id，货品名称，货品名称匹配’%罗技M9_’</p>
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> id,product_name <span class="hljs-keyword">from</span> product <span class="hljs-keyword">where</span> product_name <span class="hljs-keyword">like</span> <span class="hljs-string">&#x27;%罗技M9_&#x27;</span>;<br></code></pre></td></tr></table></figure>

<p>查询id，货品名称，分类编号,零售价大于等于200并且货品名称匹配’%罗技M1__’</p>
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> id,product_name,category_id <span class="hljs-keyword">from</span> product <span class="hljs-keyword">where</span> sale_price&gt;=<span class="hljs-number">80</span> and product_name <span class="hljs-keyword">like</span> <span class="hljs-string">&#x27;%罗技M1__&#x27;</span>;<br></code></pre></td></tr></table></figure>
</blockquote>
<h5 id="6-6-7、结果排列"><a href="#6-6-7、结果排列" class="headerlink" title="6.6.7、结果排列"></a>6.6.7、结果排列</h5><p>排序就是对查询出的结果按照一列或多列进行升序还是降序排列，使用关键字<strong>order by</strong>，</p>
<p>默认是<strong>升序ASC</strong>，<strong>降序DESC</strong></p>
<figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs oxygene"><span class="hljs-keyword">Where</span> 条件 <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> 列 [<span class="hljs-keyword">asc</span>/<span class="hljs-keyword">desc</span>]<br></code></pre></td></tr></table></figure>
<p>注意：<strong>不能使用中文的别名排序</strong></p>
<p>执行顺序：from—&gt;where—&gt;select—&gt;order by 别名</p>
<blockquote>
<p>查询M系列并按照批发价排序(加上别名)</p>
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> product <span class="hljs-keyword">where</span> product_name <span class="hljs-keyword">like</span> <span class="hljs-string">&#x27;%罗技M%&#x27;</span> <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> cost_price <span class="hljs-keyword">asc</span>;<br></code></pre></td></tr></table></figure>

<p>查询分类为2并按照批发价排序(加上别名)</p>
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> product <span class="hljs-keyword">where</span> category_id=<span class="hljs-number">2</span> <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> cost_price <span class="hljs-keyword">asc</span>;<br></code></pre></td></tr></table></figure>
<p>为什么排序可以使用别名？</p>
</blockquote>
<p>order by是作用到select的结果上，在生成排序结果的</p>
<h5 id="6-6-8、分页查询"><a href="#6-6-8、分页查询" class="headerlink" title="6.6.8、分页查询"></a>6.6.8、分页查询</h5><p>每次查询数据都是将所有数据显示出来，若数据量过大，那么看起来就很不方便，怎么解决？</p>
<p>可以对数据进行分页显示，SQL中分页是一个常见功能，需要认真对待。MYSQL中进行数据的分页查询使用的关键字是：<strong>limit</strong>，分页查询比较特殊，各个数据库不太一样。</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">Where</span> [条件] <span class="hljs-keyword">limit</span> beginIndex,pageSize;<br></code></pre></td></tr></table></figure>
<p>Limit关键字后跟两个参数<strong>beginIndex</strong>和<strong>pageSize</strong>。</p>
<p><strong>beginIndex</strong>：表示从第多少条数据开始</p>
<p><strong>pageSize</strong>：表示每页显示的数据条数</p>
<p>每页显示3条数据</p>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs n1ql">第一页: <span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> product <span class="hljs-keyword">LIMIT</span> <span class="hljs-number">0</span>, <span class="hljs-number">3</span> -<span class="hljs-number">-0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span><br>第二页: <span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> product <span class="hljs-keyword">LIMIT</span> <span class="hljs-number">3</span>, <span class="hljs-number">3</span> -<span class="hljs-number">-3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span><br>第三页: <span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> product <span class="hljs-keyword">LIMIT</span> <span class="hljs-number">6</span>, <span class="hljs-number">3</span> -<span class="hljs-number">-6</span>,<span class="hljs-number">7</span>,<span class="hljs-number">8</span><br>第四页: <span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> product <span class="hljs-keyword">LIMIT</span> <span class="hljs-number">9</span>, <span class="hljs-number">3</span> -<span class="hljs-number">-9</span>,<span class="hljs-number">10</span>,<span class="hljs-number">11</span><br>...<br>第七页: <span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> product <span class="hljs-keyword">LIMIT</span> <span class="hljs-number">18</span>,<span class="hljs-number">3</span> -<span class="hljs-number">-18</span>,<span class="hljs-number">19</span>,<span class="hljs-number">20</span><br></code></pre></td></tr></table></figure>
<p>根据上面的SQL语句，我们可以发现实际上beginIndex可以被公式推算出：*<em>（当前页数-1）</em>pageSize**</p>
<h5 id="6-6-9、聚合函数"><a href="#6-6-9、聚合函数" class="headerlink" title="6.6.9、聚合函数"></a>6.6.9、聚合函数</h5><p>2，4，6，7，8 一组数据中，最大数8，最小数2，一共多少数 5个，它们的总和27，平均数27/5，若要在MYSQL中对以上数据筛选最大值、最小值、平均值等操作，应当怎么办？</p>
<p><strong>聚集函数：</strong>作用于一组数据，并对一组数据返回一个值。  </p>
<ul>
<li>COUNT：统计结果记录数，若统计的是列，列中为Null，那么count将不会计算值</li>
<li>MAX： 统计计算最大值</li>
<li>MIN： 统计计算最小值</li>
<li>SUM： 统计计算求和</li>
<li>AVG： 统计计算平均值</li>
</ul>
<blockquote>
<p>查询所有商品平均零售价</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-built_in">avg</span>(salePrice) <span class="hljs-keyword">from</span> product;<br></code></pre></td></tr></table></figure>

<p>查询商品总记录数(注意在Java中必须使用long接收)</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-built_in">count</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">from</span> product;<br></code></pre></td></tr></table></figure>

<p>查询分类为2的商品总数</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-built_in">count</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">from</span> product <span class="hljs-keyword">where</span> dir_id<span class="hljs-operator">=</span><span class="hljs-number">2</span>;<br></code></pre></td></tr></table></figure>

<p>查询商品的最小零售价，最高零售价，以及所有商品零售价总和</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-built_in">min</span>(sale_price),<span class="hljs-built_in">max</span>(sale_price),<span class="hljs-built_in">sum</span>(sale_price) <span class="hljs-keyword">from</span> product;<br></code></pre></td></tr></table></figure>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/liyingxiao/p/10754671.html"><strong>深入理解COUNT()</strong></a></p>
<p>1、count(*)、count(主键ID)和count(1)表示返回满足条件的结果集的总行数</p>
<p>2、count(主键ID)、count(字段)、count(1)、count(*)的区别和性能差异（分析性能差别的原则）</p>
<blockquote>
<p> 1、server层要什么就给什么 </p>
<p> 2、InnoDB只给必要的值</p>
<p> 3、现在的优化器对count(*)的取行数做了优化，其他没有做优化</p>
</blockquote>
<p>3、count(主键ID)比count(1)慢的原因:</p>
<blockquote>
<p>1、对于 count(主键 ID) 来说，InnoDB 引擎会遍历主键索引树，把每一行的ID值取出来，返回给server层，server层拿到ID后，判断是不可能为空的，按行累加加1，最后返回累计值。</p>
<p>2、对于count(1)，InnoDB引擎会扫描主键索引树，但不取值，server层对于返回的每一行，按行累计加1，判断不可能为NULL，返回累计值。</p>
<p>3、从InnoDB引擎层返回ID会涉及到解析数据行、拷贝字段值的操作，因此count(主键 ID)执行要比count(1)执行慢。</p>
</blockquote>
<p>4、count()用于统计某列数据总量，若列中数据为NULL，count会统计吗？</p>
<blockquote>
<p>count(）聚合函数统计非NULL与NULL值的区别：</p>
<p> 1、count(字段)不统计NULL记录，即表示满足条件的数据行里参数字段不为NULL的行</p>
<p> 2、count(1)和count(*)会记录NULL值</p>
</blockquote>
<p>5、count(字段)：</p>
<blockquote>
<p> 1、如果这个字段定义为not null的话，一行行地从记录里面读出这个字段，判断不能为null，按行累计加 </p>
<p> 2、如果这个字段定义允许为null，一行行地从记录里面读出这个字段，执行的时候还要判断是否为null，不为null的按行累计加1，返回累加值</p>
</blockquote>
<p>6、count(主键id)走主键索引的时候效率较count(*)差的原因？</p>
<blockquote>
<p>1、平时我们检索一列的时候，基本上等值或范围查询，那么索引基数大的索引必然效率很高(符合走主键索引查找速度最快的原则)。</p>
<p>2、但是在做count(*)的时候并没有检索具体的一行或者一个范围，那么选择基数小的索引对count操作效率会更高。在做count操作的时候，mysql会遍历每个叶子节点，所以基数越小，效率越高。mysql非聚簇索引叶子节点保存指向主键ID的指针，所以需要检索两遍索引。但是这里相对于遍历主键索引,即使检索两遍索引效率也比单纯的检索主键索引快。</p>
<p>3、Innodb是索引组织表，主键索引树的叶子节点是数据，而普通索引树的叶子节点是主键值，索引普通索引树小很多，索引长度越小树的大小就越小。</p>
</blockquote>
<p>7、MyISAM与InnoDB，正如在不同的存储引擎中，count(*)函数的执行是不同的</p>
<blockquote>
<p>1、在MyISAM存储引擎中，count()函数是直接读取数据表保存的行记录数并返回,效率很高，但是如果添加了where条件的话，MyISAM表也不能返回得很快。 </p>
<p>2、在InnoDB存储引擎中，count(*)函数是先从内存中读取表中的数据到内存缓冲区，然后扫描全表获得行记录数。在使用count函数中加上where条件时，在两个存储引擎中的效果是一样的，都会扫描全表计算某字段有值项的次数。</p>
</blockquote>
<h5 id="6-6-10、分组函数"><a href="#6-6-10、分组函数" class="headerlink" title="6.6.10、分组函数"></a>6.6.10、分组函数</h5><p><strong>Group by</strong> ：group表示组，by 依靠什么分组；</p>
<p>可以使用GROUP BY 子句将表中的数据分成若干组，再对分组之后的数据做统计计算，一般使用聚集函数才使用GROUP BY。</p>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">Select</span> 聚集函数 <span class="hljs-keyword">from</span> 表名 <span class="hljs-keyword">where</span> [条件] <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> 列 <span class="hljs-keyword">having</span> 分组后的条件<br></code></pre></td></tr></table></figure>
<p>如果说要对分组后的数据进行筛选，那么必须使用having关键字，条件写在having后</p>
<p>Group by 一般搭配聚集函数使用，而having则是必须在数据分组后才能使用</p>
<p>执行顺序：FROM—&gt; WHERE—&gt;group by—-&gt;Having—&gt;SELECT–&gt;ORDER BY</p>
<p>注意： 使用having的时候，它也是可以使用别名的</p>
<p><strong>Where和having的区别：</strong></p>
<ul>
<li><p>Where针对的是元组，挑选满足条件的元组。</p>
</li>
<li><p>Having 先分组,在对每组进行计算,根据得到结果在过滤(分组把数据算出之后，在过滤)</p>
</li>
</ul>
<blockquote>
<p>查询每个商品分类编号和每个商品分类各自的平均零售价（求2，3，4每类商品的平均零售价）</p>
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> category_id,<span class="hljs-keyword">avg</span>(sale_price) <span class="hljs-keyword">from</span> product <span class="hljs-keyword">where</span> category_id <span class="hljs-keyword">in</span> (<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>) <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> category_id;<br></code></pre></td></tr></table></figure>

<p>查询每个商品分类编号和每个商品分类各自的商品总数。（求2，3，4每类商品的总数）</p>
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> category_id,<span class="hljs-keyword">count</span>(<span class="hljs-number">1</span>) <span class="hljs-keyword">from</span> product <span class="hljs-keyword">where</span> category_id <span class="hljs-keyword">in</span> (<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>) <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> category_id;<br></code></pre></td></tr></table></figure>

<p>查询每个商品分类编号和每个商品分类中零售价大于100的商品总数（疑问：是要列出所有商品分类吗？）</p>
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> category_id,<span class="hljs-keyword">count</span>(id) <span class="hljs-keyword">from</span> product <span class="hljs-keyword">where</span> sale_price &gt;<span class="hljs-number">100</span> <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> category_id;<br><span class="hljs-meta">#过滤掉了没有商品零售价大于100的商品分类</span><br></code></pre></td></tr></table></figure>

<p>查询零售价总和大于1500的商品分类编号以及总零售价和;（根据分类编号查零售价的总和，然后零售价总和大于1500）</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> category_id, <span class="hljs-built_in">sum</span>(sale_price) <span class="hljs-keyword">from</span> product <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> category_id <span class="hljs-keyword">having</span>(<span class="hljs-built_in">sum</span>(sale_price)<span class="hljs-operator">&gt;=</span><span class="hljs-number">1500</span>);<br></code></pre></td></tr></table></figure>
</blockquote>
<h4 id="6-7、数据查询-多表查询"><a href="#6-7、数据查询-多表查询" class="headerlink" title="6.7、数据查询-多表查询"></a>6.7、数据查询-多表查询</h4><p><a href="MySQL/product_stock.sql">product_stock.sql文件下载</a></p>
<p><a href="MySQL/product_category.sql">product_category.sql文件下载</a></p>
<p>多个表相互连接看作新的查询表，这个连接是<strong>横向连接</strong>区别于UNION的<strong>纵向拼接</strong></p>
<p><img src="MySQL/joins.png" srcset="/img/loading.gif"></p>
<h5 id="6-7-1、交叉连接"><a href="#6-7-1、交叉连接" class="headerlink" title="6.7.1、交叉连接"></a>6.7.1、交叉连接</h5><p>交叉连接：是没有连接条件的表关系，返回的结果是个笛卡尔积；</p>
<p>笛卡尔积是一个数学概念，用于多表查询得到的数据总量结果将会是两张表各自记录数目的乘积</p>
<p>使用交叉连接可能会产生大量错误表记录组合，这些错误组合可以用条件子句排除掉得到正确查询结果。</p>
<p>假设集合A={a, b}，集合B={0, 1, 2}，则两个集合的笛卡尔积为</p>
<p>{(a, 0), (a, 1), (a, 2),</p>
<p> (b, 0), (b, 1), (b, 2)}。</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-comment">#交叉连接，不带条件子句的查询</span><br><span class="hljs-attribute">Select</span> * from 表<span class="hljs-number">1</span>,表<span class="hljs-number">2</span>;<br></code></pre></td></tr></table></figure>
<p><img src="MySQL/duobiao.png" srcset="/img/loading.gif"></p>
<h5 id="6-7-2、内连接"><a href="#6-7-2、内连接" class="headerlink" title="6.7.2、内连接"></a>6.7.2、内连接</h5><p>内连接又称等值连接，查询结果实际上是两张表数据的<code>交集部分</code>，这个交集部分使用条件筛选出来的，内连接分为<strong>显示内连接</strong>和<strong>隐式内连接</strong>。</p>
<figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs oxygene"><span class="hljs-keyword">Select</span> * <span class="hljs-keyword">from</span> 表<span class="hljs-number">1</span>,表<span class="hljs-number">2</span>  <span class="hljs-keyword">where</span> 表<span class="hljs-number">1</span>.字段=表<span class="hljs-number">2</span>.字段;  <span class="hljs-comment">//隐式内连接</span><br><span class="hljs-keyword">Select</span> * <span class="hljs-keyword">from</span> 表<span class="hljs-number">1</span> [inner] <span class="hljs-keyword">join</span> 表<span class="hljs-number">2</span> <span class="hljs-keyword">on</span> 表<span class="hljs-number">1</span>.字段=表<span class="hljs-number">2</span>.字段;  <span class="hljs-comment">//显式内连接，推荐写法</span><br></code></pre></td></tr></table></figure>
<p>二者只有语法写法的差别，隐式内连接使用where条件消除笛卡尔积。</p>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs n1ql">#在做等值连接的时候,若A表中和B表中的列名相对。则可以简写:<br><span class="hljs-keyword">SELECT</span>	&lt;selectList&gt;<br><span class="hljs-keyword">FROM</span>	A [<span class="hljs-keyword">INNER</span>] <span class="hljs-keyword">JOIN</span> B <span class="hljs-keyword">USING</span>(同名的列)<br><br>#前提:在emp和dept表中都有deptno列. 并且是外键关系。<br>#如: <span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> emp <span class="hljs-keyword">JOIN</span> dept <span class="hljs-keyword">USING</span> (deptno)<br></code></pre></td></tr></table></figure>
<p>在显示内连接中，中括号INNER可以被省略，也就是可以只使用join…on关键字即可，on相当于隐式内连接中的where，后跟多表的关联关系</p>
<p>如果是多张表，则一直在join..on…后，依次添加join..on…即可</p>
<blockquote>
<p>查询所有商品的名称和分类名称【两种语法】</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs fortran"><span class="hljs-keyword">SELECT</span><br>	product_name,<br>	category_name <br>FROM<br>	<span class="hljs-built_in">product</span>,<br>	product_category <br><span class="hljs-keyword">WHERE</span><br>	<span class="hljs-built_in">product</span>.category_id = product_category.id;<br>	<br>	<br><span class="hljs-keyword">SELECT</span><br>	product_name,<br>	category_name <br>FROM<br>	<span class="hljs-built_in">product</span><br>	JOIN product_category ON <span class="hljs-built_in">product</span>.category_id = product_category.id;<br></code></pre></td></tr></table></figure>

<p>查询货品id，货品名称，货品所属分类名称</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs fortran"><span class="hljs-keyword">SELECT</span><br>	<span class="hljs-built_in">product</span>.id,<br>	product_name,<br>	category_name <br>FROM<br>	<span class="hljs-built_in">product</span><br>	JOIN product_category ON <span class="hljs-built_in">product</span>.category_id = product_category.id;<br></code></pre></td></tr></table></figure>

<p>查询零售价大于200的无线鼠标【使用别名】</p>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">SELECT</span><br>	a.id,<br>	product_name,<br>	category_name <br><span class="hljs-keyword">FROM</span><br>	product a<br>	<span class="hljs-keyword">JOIN</span> product_category b <span class="hljs-keyword">ON</span> a.category_id = b.id <br><span class="hljs-keyword">WHERE</span><br>	category_name = <span class="hljs-string">&#x27;无线鼠标&#x27;</span> <br>	<span class="hljs-keyword">AND</span> sale_price &gt; <span class="hljs-number">200</span>;<br></code></pre></td></tr></table></figure>

<p>查询每个货品对应的分类以及对应的库存（连接三张表）</p>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">SELECT</span><br>	product_name,<br>	store_num <br><span class="hljs-keyword">FROM</span><br>	product<br>	<span class="hljs-keyword">JOIN</span> product_category<br>	<span class="hljs-keyword">JOIN</span> product_stock <span class="hljs-keyword">ON</span> product.category_id = product_category.id <br>	<span class="hljs-keyword">AND</span> product.id = product_stock.id;<br></code></pre></td></tr></table></figure>

<p>如果库存货品都销售完成（库存里面的东西卖完）,按照利润((零售价-成本价)*数量)从高到低查询货品名称,零售价,货品分类（三张表）。</p>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">SELECT</span><br>	product_name,<br>	sale_price,<br>	category_name,<br>	( sale_price - cost_price ) * store_num 净利润 <br><span class="hljs-keyword">FROM</span><br>	product<br>	<span class="hljs-keyword">JOIN</span> product_category<br>	<span class="hljs-keyword">JOIN</span> product_stock <span class="hljs-keyword">ON</span> product.category_id = product_category.id <br>	<span class="hljs-keyword">AND</span> product.id = product_stock.id <br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span><br>	( sale_price - cost_price ) * store_num <span class="hljs-keyword">DESC</span>;<br></code></pre></td></tr></table></figure>
</blockquote>
<h5 id="6-7-3、外连接"><a href="#6-7-3、外连接" class="headerlink" title="6.7.3、外连接"></a>6.7.3、外连接</h5><p>外连接分为：<code>左外连接</code>、<code>右外连接</code>、<code>全外连接</code></p>
<p><strong>左外连接</strong>：以左边表为主，返回左边表中所有数据，若右表<code>无法完全满足</code>与主表间连接条件，则无法满足的部分用NULL填充，请参考实际查询结果来理解</p>
<p><img src="MySQL/leftjoin.png" srcset="/img/loading.gif"></p>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">Select</span> * <span class="hljs-keyword">from</span> 表<span class="hljs-number">1</span> <span class="hljs-keyword">left</span> [<span class="hljs-keyword">outer</span>] <span class="hljs-keyword">join</span> 表<span class="hljs-number">2</span> <span class="hljs-keyword">on</span> 表<span class="hljs-number">1.</span>字段=表<span class="hljs-number">2.</span>字段;<br></code></pre></td></tr></table></figure>
<p><strong>右外连接</strong>：与左连接相反，以右边表为主，返回右表中所有数据，若左表中无数据，则显示为NULL</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">Select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> 表<span class="hljs-number">1</span> <span class="hljs-keyword">right</span> [<span class="hljs-keyword">outer</span>] <span class="hljs-keyword">join</span> 表<span class="hljs-number">2</span> <span class="hljs-keyword">on</span> 表<span class="hljs-number">1.</span>字段<span class="hljs-operator">=</span>表<span class="hljs-number">2.</span>字段;<br></code></pre></td></tr></table></figure>
<blockquote>
<p>案例：查询每种商品名称，分类的名称和包含的具体商品总数（store_num）ifnull</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs applescript">Select product_name,category_name,IFNULL(store_num,<span class="hljs-number">0</span>) <span class="hljs-keyword">from</span> product p;<br>Left join product_category dir <span class="hljs-keyword">on</span> p.category_id = dir.<span class="hljs-built_in">id</span>;<br>Left join product_stock stock <span class="hljs-keyword">on</span> stock.<span class="hljs-built_in">id</span> = p.<span class="hljs-built_in">id</span>;<br></code></pre></td></tr></table></figure>
<p><strong>全外连接</strong>：返回涉及的多表中的所有数据，MYSQL中不支持该查询，仅限了解</p>
</blockquote>
<h5 id="6-7-4、自连接"><a href="#6-7-4、自连接" class="headerlink" title="6.7.4、自连接"></a>6.7.4、自连接</h5><p>仅用一张表作多表查询，直白的讲就是一张表中数据含有多种关系，使用多表查询的语法，来查询一张表，查询过程中必须使用别名；</p>
<p>多用在分类数据、省市县分类数据、权限…</p>
<p>举例如下：</p>
<p>内连接：</p>
<p><img src="MySQL/inner.png" srcset="/img/loading.gif"></p>
<p><img src="MySQL/inner2.png" srcset="/img/loading.gif"></p>
<p>外连接：</p>
<p><img src="MySQL/inner1.png" srcset="/img/loading.gif"></p>
<p><img src="MySQL/leftinner.png" srcset="/img/loading.gif"></p>
<h5 id="6-7-5、子查询"><a href="#6-7-5、子查询" class="headerlink" title="6.7.5、子查询"></a>6.7.5、子查询</h5><p>子查询：将一个查询结果作为另一个查询的对象，直白的讲就是SQL语句嵌套</p>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">Select</span> * <span class="hljs-keyword">from</span> (<span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> 表)			#真的有意义吗？看本小节后面的例子<br><span class="hljs-keyword">Select</span> * <span class="hljs-keyword">from</span> 表 <span class="hljs-keyword">where</span> 条件-&gt;条件中包含查询语句<br></code></pre></td></tr></table></figure>
<blockquote>
<p>查询零售价比罗技MX1100更高的所有商品信息。</p>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> product <span class="hljs-keyword">WHERE</span> sale_price&gt;(<span class="hljs-keyword">SELECT</span> sale_price <span class="hljs-keyword">FROM</span> product <span class="hljs-keyword">WHERE</span> product_name=<span class="hljs-string">&#x27;罗技MX1100&#x27;</span>);<br></code></pre></td></tr></table></figure>

<p>查询分类编号和折扣与罗技M100相同的所有商品信息。</p>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> product <span class="hljs-keyword">WHERE</span> (dir_id,cutoff)=<br>(<span class="hljs-keyword">SELECT</span> dir_id,cutoff <span class="hljs-keyword">FROM</span> product <span class="hljs-keyword">WHERE</span> productName = <span class="hljs-string">&#x27;罗技M100&#x27;</span>)<br></code></pre></td></tr></table></figure>
<p>Select * from (select * from 表)；这样查询有意思吗？好像没有</p>
</blockquote>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> (<span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> product a) b;		#Every derived <span class="hljs-keyword">table</span> must have its own <span class="hljs-keyword">alias</span><br></code></pre></td></tr></table></figure>
<p><img src="MySQL/zichasample.png" srcset="/img/loading.gif"></p>
<h5 id="6-7-6、UNION联合查询"><a href="#6-7-6、UNION联合查询" class="headerlink" title="6.7.6、UNION联合查询"></a>6.7.6、UNION联合查询</h5><p>作用：UNION可以<strong>把多组结构相同的SELECT查询结果纵向合并</strong>。</p>
<p>1、合并的数据结构必须结构相等；</p>
<p>2、需要查询结果的结构相同即可，与查询的字段、字段别名及类型的设置无关；</p>
<p>3、UNOIN联合查询返回的列名是由第一个SELECT查询的字段名确定。  </p>
<p>4、<code>UNION</code>（不允许重复值） 和<code>UNION ALL</code>（允许重复值，性能高）。</p>
<p>5、有排序需求时，每个SELECT语句需要使用<code>()</code>和<code>LIMIT子句</code>。</p>
<p><strong>为什么需要使用UNOIN：</strong></p>
<p>有的系统，它表里面的数据量是非常大的，我们这时候就可能为了优化数据库提高查询速度，将比如说将表通过年/季度/类型把一张表分成多张表，如：</p>
<p> {order2014、 order2015 、order2016 }、{shop_sc 、 shop_bj 、shop_sh }</p>
<p><img src="MySQL/union.png" srcset="/img/loading.gif"></p>
<p>案例，如下：</p>
<p>（1）准备两张表：order2014与order2015</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> order2014(id <span class="hljs-type">int</span>,`<span class="hljs-type">name</span>` <span class="hljs-type">varchar</span>(<span class="hljs-number">50</span>));<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> order2014(id,<span class="hljs-type">name</span>) <span class="hljs-keyword">values</span> (<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;订单一&#x27;</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> order2014(id,<span class="hljs-type">name</span>) <span class="hljs-keyword">values</span> (<span class="hljs-number">2</span>,<span class="hljs-string">&#x27;订单二&#x27;</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> order2014(id,<span class="hljs-type">name</span>) <span class="hljs-keyword">values</span> (<span class="hljs-number">3</span>,<span class="hljs-string">&#x27;订单三&#x27;</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> order2014(id,<span class="hljs-type">name</span>) <span class="hljs-keyword">values</span> (<span class="hljs-number">4</span>,<span class="hljs-string">&#x27;订单四&#x27;</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> order2014(id,<span class="hljs-type">name</span>) <span class="hljs-keyword">values</span> (<span class="hljs-number">5</span>,<span class="hljs-string">&#x27;订单五&#x27;</span>);<br></code></pre></td></tr></table></figure>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> order2015(id <span class="hljs-type">int</span>,`<span class="hljs-type">name</span>` <span class="hljs-type">varchar</span>(<span class="hljs-number">50</span>));<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> order2015(id,<span class="hljs-type">name</span>) <span class="hljs-keyword">values</span> (<span class="hljs-number">6</span>,<span class="hljs-string">&#x27;订单六&#x27;</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> order2015(id,<span class="hljs-type">name</span>) <span class="hljs-keyword">values</span> (<span class="hljs-number">7</span>,<span class="hljs-string">&#x27;订单七&#x27;</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> order2015(id,<span class="hljs-type">name</span>) <span class="hljs-keyword">values</span> (<span class="hljs-number">8</span>,<span class="hljs-string">&#x27;订单八&#x27;</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> order2015(id,<span class="hljs-type">name</span>) <span class="hljs-keyword">values</span> (<span class="hljs-number">9</span>,<span class="hljs-string">&#x27;订单九&#x27;</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> order2015(id,<span class="hljs-type">name</span>) <span class="hljs-keyword">values</span> (<span class="hljs-number">4</span>,<span class="hljs-string">&#x27;订单四&#x27;</span>);<br></code></pre></td></tr></table></figure>
<p>（2）执行UNION的代码：</p>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> order2014 <span class="hljs-keyword">union</span> <span class="hljs-keyword">all</span> <span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> order2015;<br></code></pre></td></tr></table></figure>
<p><img src="MySQL/union1.png" srcset="/img/loading.gif"></p>
<p>（3）<code>失败：</code>将两个不同结构的查询结果UNION导致查询失败：</p>
<p><img src="MySQL/wrongunion.png" srcset="/img/loading.gif"></p>
<h3 id="7、数据操纵"><a href="#7、数据操纵" class="headerlink" title="7、数据操纵"></a>7、数据操纵</h3><h4 id="7-1、添加记录"><a href="#7-1、添加记录" class="headerlink" title="7.1、添加记录"></a>7.1、添加记录</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Insert</span> into 表(字段<span class="hljs-number">1</span>,字段<span class="hljs-number">2</span>..) values(值<span class="hljs-number">1</span>,值<span class="hljs-number">2</span>…)  //推荐写法<br></code></pre></td></tr></table></figure>
<p>如果插入的表中的主键是自增类型的，可以不用插入值</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">Insert</span> <span class="hljs-keyword">into</span> 表(字段<span class="hljs-number">1</span>,字段<span class="hljs-number">2</span>) <span class="hljs-keyword">values</span>(值<span class="hljs-number">1</span>,值<span class="hljs-number">2</span>),(值<span class="hljs-number">1</span>,值<span class="hljs-number">2</span>)<span class="hljs-operator">/</span><span class="hljs-operator">/</span>插入多条数据【MYSQL】<br><span class="hljs-keyword">Insert</span> <span class="hljs-keyword">into</span> 表 <span class="hljs-keyword">values</span>(值<span class="hljs-number">1</span>,值<span class="hljs-number">2</span>)  <span class="hljs-operator">/</span><span class="hljs-operator">/</span>针对表所有字段进行插入操作<br><span class="hljs-keyword">Insert</span> <span class="hljs-keyword">into</span> 表(字段) <span class="hljs-keyword">select</span> 字段 <span class="hljs-keyword">from</span> 表<span class="hljs-number">2</span>  <span class="hljs-operator">/</span><span class="hljs-operator">/</span>查询结果插入<br><span class="hljs-keyword">Insert</span> <span class="hljs-keyword">into</span> 表 <span class="hljs-keyword">select</span> 字段 <span class="hljs-keyword">from</span> 表<span class="hljs-number">2</span>  <span class="hljs-operator">/</span><span class="hljs-operator">/</span>查询结果，全表插入<br></code></pre></td></tr></table></figure>
<p>在进行数据添加的过程中，必须将插入的字段和值相对应，否则会报错。</p>
<h4 id="7-2、修改数据"><a href="#7-2、修改数据" class="headerlink" title="7.2、修改数据"></a>7.2、修改数据</h4><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs csharp">Update 表 <span class="hljs-keyword">set</span> 字段=值 <span class="hljs-keyword">where</span> 条件  <span class="hljs-comment">//修改数据仅能单字段修改；带条件修改，否则修改全表</span><br></code></pre></td></tr></table></figure>
<blockquote>
<p>将零售价大于300的货品零售价上调0.2倍</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">UPDATE</span>  product SET sale_price = sale_price * <span class="hljs-number">1</span>.<span class="hljs-number">2</span> WHERE sale_price &gt; <span class="hljs-number">300</span>;<br></code></pre></td></tr></table></figure>

<p>将零售价大于300的有线鼠标的货品零售价上调0.1倍</p>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">UPDATE</span> product p <span class="hljs-keyword">JOIN</span> product_category pd <span class="hljs-keyword">ON</span> p.category_id = pd.id<br><span class="hljs-keyword">SET</span> p.sale_price = p.sale_price * <span class="hljs-number">1.1</span><br><span class="hljs-keyword">WHERE</span> sale_price &gt; <span class="hljs-number">300</span> <span class="hljs-keyword">AND</span> pd.category_name =<span class="hljs-string">&quot;有线鼠标&quot;</span>;<br></code></pre></td></tr></table></figure>
</blockquote>
<h4 id="7-3、删除数据"><a href="#7-3、删除数据" class="headerlink" title="7.3、删除数据"></a>7.3、删除数据</h4><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> 表 <span class="hljs-keyword">WHERE</span> 条件  //删除数据带<span class="hljs-keyword">where</span>条件子句，否则删除全表数据<br></code></pre></td></tr></table></figure>
<h3 id="8、索引INDEX"><a href="#8、索引INDEX" class="headerlink" title="8、索引INDEX"></a>8、索引INDEX</h3><p>在关系数据库中，索引是一种单独的、物理的对数据库表中一列或多列的值进行排序的一种存储结构，它是某个表中一列或若干列值的集合和相应的指向表中物理标识这些值的数据页的逻辑指针清单。索引的作用相当于图书的目录，可以根据目录中的页码快速找到所需的内容。</p>
<h4 id="8-1、使用索引的注意点"><a href="#8-1、使用索引的注意点" class="headerlink" title="8.1、使用索引的注意点"></a>8.1、使用索引的注意点</h4><blockquote>
<p>1、索引也是数据库中的数据库对象；<br>2、在数据库中用来加速对表的查询；<br>3、通过使用快速路径访问方法快速定位数据,减少了磁盘的I/O；<br>4、与表独立存放（还会占用一定的存储空间），以空间换时间；<br>5、但是并不是所有字段都加上索引好，索引的维护(添删改)是比较耗费性能的；<br>7、常见索引失效的情况：</p>
<blockquote>
<ol>
<li>like的”nihao%”这种形式以外的其他形式都会导致索引失效(因此查询的速度是非常慢的)</li>
<li>Select * from sss where 1=1 ：索引失效</li>
<li>Sql注入 </li>
</ol>
</blockquote>
</blockquote>
<h4 id="8-2、什么列适合建索引"><a href="#8-2、什么列适合建索引" class="headerlink" title="8.2、什么列适合建索引"></a>8.2、什么列适合建索引</h4><p>索引的维护(添删改)是比较耗费性能的，根据查询与添删改的的频率来确定，一般经常查询，不经常修改的列，这个列中的重复数据比较多的情况，可以加索引。</p>
<blockquote>
<p>1、表的主键、外键必须有索引；<br>2、数据量超过30000的表应该有索引；<br>3、经常与其他表进行连接的表，在连接字段上应该建立索引；<br>4、经常出现在Where子句中的字段，特别是大表的字段，应该建立索引；<br>5、索引应该建在选择性高的字段上；<br>6、索引应该建在小字段上，对于大的文本字段甚至超长字段，不要建索引；</p>
</blockquote>
<h4 id="8-3、创建索引"><a href="#8-3、创建索引" class="headerlink" title="8.3、创建索引:"></a>8.3、创建索引:</h4><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">INDEX</span> 索引名称 <span class="hljs-keyword">ON</span> 表名 (列名)<br></code></pre></td></tr></table></figure>
<h4 id="8-4、删除索引"><a href="#8-4、删除索引" class="headerlink" title="8.4、删除索引:"></a>8.4、删除索引:</h4><p>方式一：</p>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">INDEX</span> 索引名 <span class="hljs-keyword">ON</span> 表名 <br></code></pre></td></tr></table></figure>
<p>方式二: </p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> 表名 <span class="hljs-keyword">DROP</span> <span class="hljs-keyword">INDEX</span> 索引名<br></code></pre></td></tr></table></figure>
<h3 id="9、视图VIEW"><a href="#9、视图VIEW" class="headerlink" title="9、视图VIEW"></a>9、视图VIEW</h3><p>视图是由<strong>SELECT语句</strong>组成的<code>虚拟表</code>。</p>
<p>1、视图的名字必须唯一，不能和其它表或视图重名；<br>2、视图可以嵌套使用，也就是在一个视图基础上继续定义新的视图；<br>3、视图创建和删除只影响视图本身，不影响所使用的基本表。</p>
<p><img src="MySQL/view.png" srcset="/img/loading.gif"></p>
<h4 id="9-1、为什么要使用视图"><a href="#9-1、为什么要使用视图" class="headerlink" title="9.1、为什么要使用视图"></a>9.1、为什么要使用视图</h4><ol>
<li><strong>简化复杂的查询</strong>，将常用的、比较复杂的SELECT语句，创建一个视图，就能方便以后多次调用。</li>
<li><strong>安全原因</strong>，比如，只想让权限低的用户看到一个表的部分字段，而隐藏机密的部分。</li>
</ol>
<h4 id="9-2、视图应用场景"><a href="#9-2、视图应用场景" class="headerlink" title="9.2、视图应用场景"></a>9.2、视图应用场景</h4><p>视图主要使用在<strong>查询的场景中</strong>。一般不使用视图进行增删改的操作</p>
<p><img src="MySQL/view1.png" srcset="/img/loading.gif"></p>
<h4 id="9-3、使用视图"><a href="#9-3、使用视图" class="headerlink" title="9.3、使用视图"></a>9.3、使用视图</h4><p><img src="MySQL/view3.png" srcset="/img/loading.gif"></p>
<h5 id="9-3-1、创建视图"><a href="#9-3-1、创建视图" class="headerlink" title="9.3.1、创建视图"></a>9.3.1、创建视图</h5><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">view</span> 视图名 <span class="hljs-keyword">as</span> <span class="hljs-keyword">select</span> 查询语句;<br></code></pre></td></tr></table></figure>
<h5 id="9-3-2、视图查询"><a href="#9-3-2、视图查询" class="headerlink" title="9.3.2、视图查询"></a>9.3.2、视图查询</h5><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lasso"><span class="hljs-keyword">Select</span> 字段名 from 视图名 <span class="hljs-keyword">where</span> 子句 <span class="hljs-params">...</span>;<br></code></pre></td></tr></table></figure>
<h5 id="9-3-3、修改视图"><a href="#9-3-3、修改视图" class="headerlink" title="9.3.3、修改视图"></a>9.3.3、修改视图</h5><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">alter</span> <span class="hljs-keyword">view</span> 视图名 <span class="hljs-keyword">as</span> <span class="hljs-keyword">select</span> 查询语句;<br></code></pre></td></tr></table></figure>
<h5 id="9-3-4、删除视图"><a href="#9-3-4、删除视图" class="headerlink" title="9.3.4、删除视图"></a>9.3.4、删除视图</h5><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gauss"><span class="hljs-built_in">drop</span> <span class="hljs-built_in">view</span> 视图名;<br></code></pre></td></tr></table></figure>
<h3 id="10、事务"><a href="#10、事务" class="headerlink" title="10、事务"></a>10、事务</h3><blockquote>
<p>在没有接触事务之前。。。</p>
<p>注意：MySQL默认是自动提交模式，也就是一条SQL语句完成后，系统就自动提交了。</p>
<p>查看当前的模式是否为自动提交模式：</p>
<figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gams">show <span class="hljs-keyword">variables</span> like <span class="hljs-comment">&#x27;%autocommit&#x27;</span>;<br></code></pre></td></tr></table></figure>

<p>开启自动提交模式：</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-builtin-name">set</span> <span class="hljs-attribute">autocommit</span>=1;<br></code></pre></td></tr></table></figure>

<p>关闭自动提交模式：</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-builtin-name">set</span> <span class="hljs-attribute">autocommit</span>=0;<br></code></pre></td></tr></table></figure>
</blockquote>
<p>MySQL的表类型必须是InnoDB，才能支持事务。</p>
<p>事务是数据库商用最基本最重要的特点。</p>
<p>事务是保证数据库数据完整性和安全性最重要的技术。</p>
<p>事务是要求一组连续的SQL语句要么全部成功执行，要么数据返回到开启事务前的状态。不允许部分SQL语句成功，部分不成功。</p>
<p>10.1、事务特性（ACID）：</p>
<blockquote>
<p>1、原子性(Atomicity):事务中的多个操作，不可分割，要么都成功，要么都失败。<br>2、一致性(Consistency): 事务操作之后, 数据库所处的状态和业务规则是一致的; 比如a,b账户相互转账之后，总金额不变。<br>3、隔离性(Isolation):事务必须与其他事务进行的数据更改相隔离。这意味着没有其他操作可以改变中间态(没有提交的)的数据。为了避免中间态数据被更改，事务必须要么等待来自其他事务的更改被提交，要么只能查看到处于上一个提交状态的数据。<br>4、持久性(Durability):在一个事务完成，这些更改的数据将永久存在。</p>
</blockquote>
<p>10.2、事务使用场景：</p>
<blockquote>
<ol>
<li>操作步骤需要回滚的。比如，银行转账、购物下单等。</li>
<li>遇到异常情况，数据需要回滚的。比如，断电、磁盘坏死等。</li>
</ol>
</blockquote>
<p>10.3、事务的使用：</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">start</span> <span class="hljs-keyword">transaction</span>;<br><span class="hljs-keyword">insert</span> 语句<br><span class="hljs-keyword">delete</span> 语句<br><span class="hljs-keyword">update</span> 语句<br><span class="hljs-keyword">select</span> 语句<br><span class="hljs-keyword">commit</span>;<br></code></pre></td></tr></table></figure>
<p>10.3.1、开始事务</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">start</span> <span class="hljs-keyword">transaction</span>;<br></code></pre></td></tr></table></figure>
<p>10.3.2、撤销事务</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">rollback<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure>
<p>10.3.3、提交事务</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">commit<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure>
<p>举例：</p>
<blockquote>
<p>刘备向曹操借2000元钱。</p>
<p>分析：</p>
<p>第一步，先开启事务。</p>
<p>第二步，先判断曹操的账户值是大于等于2000，如果判断为假，回滚事务。如果判断为真，继续。</p>
<p>第三步，更新曹操的账户值，减2000。如果执行失败，回滚事务。如果执行成功，继续。</p>
<p>第四步，更新刘备的账户值，加2000。如果执行失败，回滚事务。如果执行成功，继续。</p>
<p>第五步，提交事务。</p>
</blockquote>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">start</span> <span class="hljs-keyword">transaction</span>;<br><span class="hljs-keyword">select</span> <span class="hljs-type">money</span> <span class="hljs-keyword">from</span> student <span class="hljs-keyword">where</span> stu_id=<span class="hljs-number">14</span>;<br><span class="hljs-meta">#rollback;</span><br><span class="hljs-keyword">update</span> student <span class="hljs-keyword">set</span> <span class="hljs-type">money</span>=<span class="hljs-type">money</span><span class="hljs-number">-2000</span> <span class="hljs-keyword">where</span> stu_id=<span class="hljs-number">14</span>;<br><span class="hljs-meta">#rollback;</span><br><span class="hljs-keyword">update</span> student <span class="hljs-keyword">set</span> <span class="hljs-type">money</span>=<span class="hljs-type">money</span>+<span class="hljs-number">2000</span> <span class="hljs-keyword">where</span> stu_id=<span class="hljs-number">17</span>;<br><span class="hljs-meta">#rollback;</span><br><span class="hljs-keyword">commit</span>;<br></code></pre></td></tr></table></figure>
<h3 id="11、函数"><a href="#11、函数" class="headerlink" title="11、函数"></a>11、函数</h3><h4 id="2-1、聚集函数"><a href="#2-1、聚集函数" class="headerlink" title="2.1、聚集函数"></a>2.1、聚集函数</h4><p>1、Count:总记录数字</p>
<p>2、Sum：求和</p>
<p>3、Avg：平均值</p>
<p>4、Max：最大值</p>
<p>5、Min：最小值</p>
<h4 id="2-2、CAST-函数"><a href="#2-2、CAST-函数" class="headerlink" title="2.2、CAST()函数"></a>2.2、CAST()函数</h4><p>数据类型转换可以通过CAST()和CONVERT()函数来实现。大多数情况下，这两个函数是重叠的，它们反映了SQL语言的演化历史。这两个函数的功能相似，不过它们的语法不同。虽然并非所有类型的值都能转变为其他数据类型，但总的来说，任何可以转换的值都可以用简单的函数实现转换。</p>
<p>CAST()函数的参数是一个表达式，它包括用AS关键字分隔的源值和目标数据类型。语法如下：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">cast</span><span class="hljs-params">(值 as 类型)</span></span><br><span class="hljs-function"><span class="hljs-title">cast</span><span class="hljs-params">(<span class="hljs-string">&#x27;123&#x27;</span> as SIGNED)</span></span> 将<span class="hljs-number">123</span>转换为int类型，返回值为整型类型<br></code></pre></td></tr></table></figure>
<p><strong>思考：</strong>若如果试图将一个代表小数的字符串转换为整型值，又会出现什么情况呢？</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">cast</span><span class="hljs-params">(<span class="hljs-string">&#x27;123.4&#x27;</span> as SIGNED)</span></span><br></code></pre></td></tr></table></figure>
<p>CAST()函数和CONVERT()函数都不能执行四舍五入或截断操作。由于123.4不能用int数据类型来表示，所以对这个函数调用将产生一个错误。要返回一个合法的数值，就必须使用能处理这个值的数据类型。对于这个例子，存在多个可用的数据类型。如果通过CAST()函数将这个值转换为<strong>decimal类型</strong>，需要首先定义decimal值的精度与小数位数。</p>
<h4 id="2-3、DECIMAL类型"><a href="#2-3、DECIMAL类型" class="headerlink" title="2.3、DECIMAL类型"></a>2.3、DECIMAL类型</h4><p>MySQL DECIMAL数据类型用于在数据库中存储精确的数值。我们经常将DECIMAL数据类型用于保留准确精确度的列，例如会计系统中的货币数据。</p>
<p>要定义数据类型为DECIMAL的列，请使用以下语法：</p>
<figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs excel"><span class="hljs-built_in">column</span> <span class="hljs-built_in">decimal</span>(P,D)<br></code></pre></td></tr></table></figure>
<p>在上面的语法中：</p>
<ul>
<li>  P是表示有效数字数的精度。 P范围为<code>1〜65</code>。</li>
<li>  D是表示小数点后的位数。 D的范围是<code>0~30</code>。MySQL要求D&lt;=P。</li>
</ul>
<p>DECIMAL(P，D)表示列可以存储D位小数的P位数。十进制列的实际范围取决于精度和刻度。</p>
<p>综上，可以将上述小数转换为整数：</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">select</span> cast(<span class="hljs-string">&#x27;123.4&#x27;</span> <span class="hljs-keyword">as</span> <span class="hljs-type">decimal</span>(P,D))<br></code></pre></td></tr></table></figure>
<h4 id="2-4、convert-函数"><a href="#2-4、convert-函数" class="headerlink" title="2.4、convert()函数"></a>2.4、convert()函数</h4><p>对于简单类型转换，CONVERT()函数和CAST()函数的功能相同，只是语法不同。CAST()函数一般更容易使用，其功能也更简单。语法如下：</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">select</span> convert(expr, <span class="hljs-keyword">type</span>)<br><span class="hljs-keyword">select</span> convert(<span class="hljs-string">&#x27;123&#x27;</span>,signed)<br></code></pre></td></tr></table></figure>
<p>可以转换的类型是有限制的。这个类型可以是以下值其中的一个：</p>
<ul>
<li>  二进制，同带binary前缀的效果 : BINARY  </li>
<li>  字符型，可带参数 : CHAR()   </li>
<li>  日期 : DATE   </li>
<li>  时间: TIME   </li>
<li>  日期时间型 : DATETIME   </li>
<li>  浮点数 : DECIMAL   </li>
<li>  整数 : SIGNED   </li>
<li>  无符号整数 : UNSIGNED</li>
</ul>
<h4 id="2-5、IFNULL"><a href="#2-5、IFNULL" class="headerlink" title="2.5、IFNULL"></a>2.5、IFNULL</h4><p>IFNULL() 函数用于判断第一个表达式是否为 NULL，如果为 NULL 则返回第二个参数的值，如果不为 NULL 则返回第一个参数的值。</p>
<p>IFNULL() 函数语法格式为：</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-constructor">IFNULL(<span class="hljs-params">expression</span>, <span class="hljs-params">alt_value</span>)</span><br></code></pre></td></tr></table></figure>
<p>如果第一个参数的表达式 expression 为 NULL，则返回第二个参数的备用值。</p>
<h4 id="2-6、自定义函数"><a href="#2-6、自定义函数" class="headerlink" title="2.6、自定义函数"></a>2.6、自定义函数</h4><p>语法格式：</p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs actionscript">create <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(参数名 参数类型,<span class="hljs-rest_arg">...) </span></span></span><br><span class="hljs-function"><span class="hljs-params"><span class="hljs-rest_arg">returns</span> 返回值类型</span></span><br><span class="hljs-function"><span class="hljs-params">begin</span></span><br><span class="hljs-function"><span class="hljs-params">	sql<span class="hljs-rest_arg">...</span></span></span><br><span class="hljs-function"><span class="hljs-params"><span class="hljs-rest_arg">	return</span> 0;</span></span><br><span class="hljs-function"><span class="hljs-params">end;</span></span><br></code></pre></td></tr></table></figure>
<p>调用方式：</p>
<p>和使用MySQL自带的函数一样的方式</p>
<p>示例代码:</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">function</span> mysum(num1 <span class="hljs-type">int</span>,num2 <span class="hljs-type">int</span>) <br><span class="hljs-keyword">returns</span> <span class="hljs-type">int</span> <br><span class="hljs-keyword">begin</span><br>	<br>	<span class="hljs-keyword">return</span> num1+num2;<br><span class="hljs-keyword">end</span>;<br><span class="hljs-keyword">select</span> mysum(<span class="hljs-number">123</span>,<span class="hljs-number">234</span>);<br></code></pre></td></tr></table></figure>
<h3 id="12、存储过程"><a href="#12、存储过程" class="headerlink" title="12、存储过程"></a>12、存储过程</h3><h4 id="12-1、什么是存储过程"><a href="#12-1、什么是存储过程" class="headerlink" title="12.1、什么是存储过程"></a>12.1、什么是存储过程</h4><p>存储过程(Stored Procedure)：一组可编程的函数，是为了完成特定功能的SQL语句集，经编译创建并保存在数据库中，用户可通过指定存储过程的名字并给定参数(需要时)来调用执行。</p>
<h4 id="12-2、为什么存储过程"><a href="#12-2、为什么存储过程" class="headerlink" title="12.2、为什么存储过程"></a>12.2、为什么存储过程</h4><p>①将重复性很高的一些操作，封装到一个存储过程中，简化了对这些SQL的调用</p>
<p>②批量处理：SQL+循环，减少流量，也就是“跑批”</p>
<p>③统一接口，确保数据的安全</p>
<p>④性能比较高</p>
<p>相对于oracle数据库来说，MySQL的存储过程相对功能较弱，使用较少。</p>
<h4 id="12-3、如何使用存储过程"><a href="#12-3、如何使用存储过程" class="headerlink" title="12.3、如何使用存储过程"></a>12.3、如何使用存储过程</h4><h5 id="12-3-1、创建存储过程"><a href="#12-3-1、创建存储过程" class="headerlink" title="12.3.1、创建存储过程"></a>12.3.1、创建存储过程</h5><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs oxygene">DELIMITER <span class="hljs-comment">//</span><br><span class="hljs-keyword">create</span> <span class="hljs-function"><span class="hljs-keyword">procedure</span> 存储过程名<span class="hljs-params">([存储过程参数列表])</span></span><br><span class="hljs-function"><span class="hljs-title">begin</span></span><br><span class="hljs-function">	<span class="hljs-title">set</span> 参数名=参数;</span><br>	SQL语句<br><span class="hljs-keyword">end</span> <span class="hljs-comment">//</span><br><br></code></pre></td></tr></table></figure>
<h5 id="12-3-2、为什么使用delimiter？"><a href="#12-3-2、为什么使用delimiter？" class="headerlink" title="12.3.2、为什么使用delimiter？"></a>12.3.2、为什么使用delimiter？</h5><p>mysql默认以分号作为sql语句的结束来进行执行，当我们在创建存储过程时，为了不让完整的存储过程语句由于分号而提前执行，需要临时规定以//或者$$来作为结束符号。这样的话，创建存储过程时，中间的分号会被忽略，直到遇到//符号才执行语句。</p>
<h5 id="12-3-3、存储过程参数分类"><a href="#12-3-3、存储过程参数分类" class="headerlink" title="12.3.3、存储过程参数分类"></a>12.3.3、存储过程参数分类</h5><p>存储过程可以有0个或多个参数，用于存储过程的定义。</p>
<p>3种参数类型：</p>
<p><strong>IN输入参数</strong>：表示调用者向过程传入值（传入值可以是字面量或变量）</p>
<figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs oxygene">delimiter <span class="hljs-comment">//</span><br><span class="hljs-keyword">create</span> <span class="hljs-function"><span class="hljs-keyword">procedure</span> 存储过程<span class="hljs-params">(<span class="hljs-keyword">in</span> 变量名 类型)</span></span><br><span class="hljs-function"><span class="hljs-title">begin</span></span><br><span class="hljs-function">	<span class="hljs-title">set</span> 变量名=值;</span><br>	SQL语句<br><span class="hljs-keyword">end</span> <span class="hljs-comment">//</span><br><br>call 存储过程名(参数值)<br></code></pre></td></tr></table></figure>
<p><strong>OUT输出参数</strong>：表示过程向调用者传出值(可以返回多个值)（传出值只能是变量）</p>
<figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs oxygene">delimiter <span class="hljs-comment">//</span><br><span class="hljs-keyword">create</span> <span class="hljs-function"><span class="hljs-keyword">procedure</span> 存储过程<span class="hljs-params">(<span class="hljs-keyword">out</span> 变量名 类型)</span></span><br><span class="hljs-function"><span class="hljs-title">begin</span></span><br><span class="hljs-function">    <span class="hljs-title">set</span> 变量名=值;</span><br>    SQL语句<br><span class="hljs-keyword">end</span> <span class="hljs-comment">//</span><br>call 存储过程名(参数值)<br></code></pre></td></tr></table></figure>
<figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs oxygene"><span class="hljs-keyword">create</span> <span class="hljs-function"><span class="hljs-keyword">procedure</span> <span class="hljs-title">out_param</span><span class="hljs-params">(<span class="hljs-keyword">out</span> p_out int)</span></span><br><span class="hljs-function">      <span class="hljs-title">begin</span></span><br><span class="hljs-function">        <span class="hljs-title">select</span> <span class="hljs-title">p_out</span>;</span><br>        <span class="hljs-keyword">set</span> p_out=<span class="hljs-number">2</span>;<br>        <span class="hljs-keyword">select</span> p_out;<br>      <span class="hljs-keyword">end</span><br><br><span class="hljs-keyword">set</span> @p_out=<span class="hljs-number">1</span>;<br>call out_param(@p_out);<br><span class="hljs-keyword">select</span> @p_out;<br></code></pre></td></tr></table></figure>
<p><strong>INOUT输入输出参数</strong>：既表示调用者向过程传入值，又表示过程向调用者传出值（值只能是变量）</p>
<figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs oxygene"><span class="hljs-keyword">create</span> <span class="hljs-function"><span class="hljs-keyword">procedure</span> <span class="hljs-title">out_param</span><span class="hljs-params">(inout p_out int)</span></span><br><span class="hljs-function">  <span class="hljs-title">begin</span></span><br><span class="hljs-function">   <span class="hljs-title">select</span> <span class="hljs-title">p_out</span>;</span><br>   <span class="hljs-keyword">set</span> p_out=<span class="hljs-number">2</span>;<br>   <span class="hljs-keyword">select</span> p_out;<br>  <span class="hljs-keyword">end</span><br><span class="hljs-keyword">set</span> @p_out=<span class="hljs-number">1</span>;<br>call out_param(@p_out);<br><span class="hljs-keyword">select</span> @p_out;<br></code></pre></td></tr></table></figure>
<h5 id="12-3-4、调用存储过程"><a href="#12-3-4、调用存储过程" class="headerlink" title="12.3.4、调用存储过程"></a>12.3.4、调用存储过程</h5><p>调用存储过程语法</p>
<figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-keyword">set</span> @参数名<br><span class="hljs-keyword">call</span> 存储过程名字([参数])<br></code></pre></td></tr></table></figure>


<h3 id="13、正则表达式"><a href="#13、正则表达式" class="headerlink" title="13、正则表达式"></a>13、正则表达式</h3><p>在前面的章节我们已经了解到MySQL可以通过 LIKE …%来进行模糊匹配。 </p>
<p>MySQL 同样也支持其他正则表达式的匹配， MySQL中使用 REGEXP 操作符来进行正则表达式匹配</p>
<p><img src="MySQL/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F.png" srcset="/img/loading.gif"></p>
<p>需求：查找name字段中以’Y’为开头的所有数据：</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">SELECT</span> <span class="hljs-type">name</span> <span class="hljs-keyword">FROM</span> emp <span class="hljs-keyword">WHERE</span> <span class="hljs-type">name</span> REGEXP <span class="hljs-string">&#x27;^Y&#x27;</span>;<br></code></pre></td></tr></table></figure>


<h3 id="14、数据备份"><a href="#14、数据备份" class="headerlink" title="14、数据备份"></a>14、数据备份</h3><p>在命令行窗口进行，若操作系统版本高，则使用管理员模式</p>
<p>导出：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs css">mysqldump -u账户 -<span class="hljs-selector-tag">p</span>密码 数据库名称&gt;脚本文件存储地<br>mysqldump -uroot -padmin jdbcdemo&gt; C:/shop_bak.sql<br></code></pre></td></tr></table></figure>
<p>导入：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs css">mysql -u账户 -<span class="hljs-selector-tag">p</span>密码 数据库名称&lt; 脚本文件存储地址<br>mysql -uroot -padmin jdbcdemo&lt; C:/shop_bak.sql<br></code></pre></td></tr></table></figure>
<p>使用可视化导入导出，Navicat工具的导入和导出/Navicat工具的备份和还原</p>
<h3 id="15、从容面试"><a href="#15、从容面试" class="headerlink" title="15、从容面试"></a>15、从容面试</h3><p>1、说说自连接的应用场景；</p>
<p>2、你一般都使用什么方式进行数据备份，在你之前的项目中备份的周期都是多少？</p>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/MySQL/">MySQL</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a>
                    
                      <a class="hover-with-bg" href="/tags/MySQL/">MySQL</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！</p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2019/11/17/GitHub%E4%B8%8A%E4%BC%A0ssh-key/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">GitHub上传ssh-key</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2019/11/15/FTP%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA/">
                        <span class="hidden-mobile">FTP服务搭建</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  

  

  
</footer>

<!-- SCRIPTS -->

  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" ></script>
<script  src="/js/debouncer.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/lazyload.js" ></script>
  



  



  <script  src="https://cdn.jsdelivr.net/npm/tocbot@4.12.0/dist/tocbot.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.0/anchor.min.js" ></script>



  <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js" ></script>






  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    (function () {
      var path = "/local-search.xml";
      var inputArea = document.querySelector("#local-search-input");
      inputArea.onclick = function () {
        searchFunc(path, 'local-search-input', 'local-search-result');
        this.onclick = null
      }
    })()
  </script>















<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>



</body>
</html>
