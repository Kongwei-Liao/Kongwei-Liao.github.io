

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=&#34;auto&#34;>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" type="image/png" href="/img/favicon.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="liaogangwei的个人主页">
  <meta name="author" content="Kongwei_Liao">
  <meta name="keywords" content="black, foolish, positive">
  <title>Servlet交互与JSP - Kongwei_Liao</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.4.0/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  



<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.8.7","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"onlypost":false},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null}}};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.3.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>Fluid</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" href="javascript:">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/img/default.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="Servlet交互与JSP">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2019-11-21 16:11" pubdate>
        2019年11月21日 下午
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      25.2k 字
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      333
       分钟
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">Servlet交互与JSP</h1>
            
            <div class="markdown-body">
              <h3 id="1、Java-Servlet"><a href="#1、Java-Servlet" class="headerlink" title="1、Java Servlet"></a><a target="_blank" rel="noopener" href="https://www.runoob.com/servlet/servlet-tutorial.html">1、Java Servlet</a></h3><h4 id="1-1、Servlet介绍"><a href="#1-1、Servlet介绍" class="headerlink" title="1.1、Servlet介绍"></a>1.1、Servlet介绍</h4><p>Java Servlet 是运行在支持 Java Servlet 规范的解释器的Web 服务器上的程序，它是作为来自 Web 浏览器或其他 HTTP 客户端的请求和 HTTP 服务器上的数据库或应用程序之间的中间层。</p>
<p>Servlet 可以使用 <strong>javax.servlet</strong> 和 <strong>javax.servlet.http</strong> 包创建，它是 <strong>Java 企业版的标准组成部分</strong>，Java 企业版是支持<strong>大型开发项目的 Java 类库的扩展版本</strong>。这些类实现 Java Servlet 和 JSP 规范。</p>
<h5 id="1-1-1、Servlet-执行以下主要任务"><a href="#1-1-1、Servlet-执行以下主要任务" class="headerlink" title="1.1.1、Servlet 执行以下主要任务"></a>1.1.1、Servlet 执行以下主要任务</h5><ul>
<li>读取客户端（浏览器）发送的显式的数据。这包括网页上的 HTML 表单，或者也可以是来自 applet 或自定义的 HTTP 客户端程序的表单。</li>
<li>读取客户端（浏览器）发送的隐式的 HTTP 请求数据。这包括 cookies、媒体类型和浏览器能理解的压缩格式等等。</li>
<li>处理数据并生成结果。这个过程可能需要访问数据库，执行 RMI 或 CORBA 调用，调用 Web 服务，或者直接计算得出对应的响应。</li>
<li>发送显式的数据（即文档）到客户端（浏览器）。该文档的格式可以是多种多样的，包括文本文件（HTML 或 XML）、二进制文件（GIF 图像）、Excel 等。</li>
<li>发送隐式的 HTTP 响应到客户端（浏览器）。这包括告诉浏览器或其他客户端被返回的文档类型（例如 HTML），设置 cookies 和缓存参数，以及其他类似的任务。</li>
</ul>
<h5 id="1-1-2、Servlet和CGI"><a href="#1-1-2、Servlet和CGI" class="headerlink" title="1.1.2、Servlet和CGI"></a>1.1.2、Servlet和CGI</h5><p>Java Servlet 通常情况下与使用 CGI（Common Gateway Interface，公共网关接口）实现的程序可以达到异曲同工的效果。但是相比于 CGI，Servlet 有以下几点优势：</p>
<blockquote>
<ul>
<li>性能明显更好。</li>
<li>Servlet 在 Web 服务器的地址空间内执行。这样它就没有必要再创建一个单独的进程来处理每个客户端请求。</li>
<li>Servlet 是独立于平台的，因为它们是用 Java 编写的。</li>
<li>服务器上的 Java 安全管理器执行了一系列限制，以保护服务器计算机上的资源。因此，Servlet 是可信的。</li>
<li>Java 类库的全部功能对 Servlet 来说都是可用的。它可以通过 sockets 和 RMI 机制与 applets、数据库或其他软件进行交互。</li>
</ul>
</blockquote>
<h4 id="1-2、Servlet架构"><a href="#1-2、Servlet架构" class="headerlink" title="1.2、Servlet架构"></a>1.2、Servlet架构</h4><p>下图显示了 Servlet 在 Web 应用程序中的位置。</p>
<p><img src="/.com//servlet1.png" srcset="/img/loading.gif"></p>
<h4 id="1-3、Servlet生命周期"><a href="#1-3、Servlet生命周期" class="headerlink" title="1.3、Servlet生命周期:"></a><a target="_blank" rel="noopener" href="https://www.runoob.com/servlet/servlet-life-cycle.html">1.3、Servlet生命周期:</a></h4><p>Servlet 生命周期可被定义为从创建直到毁灭的整个过程。以下是 Servlet 遵循的过程：</p>
<ul>
<li>Servlet 通过调用 <strong>init ()</strong> 方法进行初始化。</li>
<li>Servlet 调用 <strong>service()</strong> 方法来处理客户端的请求。</li>
<li>Servlet 通过调用 <strong>destroy()</strong> 方法终止（结束）。</li>
<li>最后，Servlet 是由 JVM 的垃圾回收器进行垃圾回收的。</li>
</ul>
<p><img src="/.com//lificycle.png" srcset="/img/loading.gif"></p>
<h4 id="正式开始码Servlet前先1-20看Servlet如何配置部署"><a href="#正式开始码Servlet前先1-20看Servlet如何配置部署" class="headerlink" title="正式开始码Servlet前先1.20看Servlet如何配置部署"></a>正式开始码Servlet前先1.20看Servlet如何配置部署</h4><h4 id="1-4、Servlet处理表单数据"><a href="#1-4、Servlet处理表单数据" class="headerlink" title="1.4、Servlet处理表单数据"></a><a target="_blank" rel="noopener" href="https://www.runoob.com/servlet/servlet-form-data.html">1.4、Servlet处理表单数据</a></h4><h5 id="1-4-1、客户端向Web服务器发送数据"><a href="#1-4-1、客户端向Web服务器发送数据" class="headerlink" title="1.4.1、客户端向Web服务器发送数据"></a>1.4.1、客户端向Web服务器发送数据</h5><p>以表单形式传递。浏览器使用两种方法传递这些数据，分别是<code>GET</code>和<code>POST</code>方法。</p>
<p><strong>GET方法:</strong></p>
<p>GET 方法是默认的从浏览器向 Web 服务器传递数据的方法，它会产生一个很长的字符串，出现在浏览器的地址栏中。</p>
<p>如果您要向服务器传递的是密码或其他的敏感信数据，请不要使用 GET 方法。GET 方法还有大小限制：请求字符串中最多只能有 1024 个字符。</p>
<p>这些信息使用 <strong>QUERY_STRING  头传递</strong>，并可以通过 QUERY_STRING 环境变量访问，Servlet 使用 <strong>doGet() 方法处理这种类型的请求</strong>。</p>
<p>GET 方法向页面请求发送已编码的用户数据。页面和已编码的数据中间用 ? 字符分隔，如下所示：</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">http</span>://www.test.com/hello?key<span class="hljs-number">1</span>=value<span class="hljs-number">1</span>&amp;key<span class="hljs-number">2</span>=value<span class="hljs-number">2</span><br></code></pre></td></tr></table></figure>
<p><strong>POST方法:</strong></p>
<p>另一个向后台程序传递信息的比较可靠的方法。POST 方法打包信息的方式与 GET 方法基本相同，但是 POST 方法不是<code>把信息作为 URL</code> 中 ? 字符后的文本字符串进行发送，而是把这些信息作为一个<code>单独的消息</code>。消息以标准输出的形式传到后台程序，您可以解析和使用这些标准输出。Servlet 使用 <strong>doPost() 方法处理这种类型的请求</strong>。</p>
<h5 id="1-4-2、Servlet使用从浏览器传递来的数据"><a href="#1-4-2、Servlet使用从浏览器传递来的数据" class="headerlink" title="1.4.2、Servlet使用从浏览器传递来的数据"></a>1.4.2、Servlet使用从浏览器传递来的数据</h5><p>Servlet 处理表单数据，这些数据会根据不同的情况使用不同的方法自动解析：</p>
<ul>
<li><strong>getParameter()：</strong>您可以调用 request.getParameter() 方法来获取表单参数的值。</li>
<li><strong>getParameterValues()：</strong>如果参数出现一次以上，则调用该方法，并返回多个值，例如复选框。</li>
<li><strong>getParameterNames()：</strong>如果您想要得到当前请求中的所有参数的完整列表，则调用该方法。</li>
</ul>
<p><strong>(1)、get方式举例：</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs swift">package cn.ant_nest.www;<br><br><span class="hljs-keyword">import</span> javax.servlet.ServletException;<br><span class="hljs-keyword">import</span> javax.servlet.annotation.WebServlet;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServlet;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletResponse;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.PrintWriter;<br><br><span class="hljs-meta">@WebServlet</span>(<span class="hljs-string">&quot;/Index&quot;</span> )<br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Index</span> <span class="hljs-title">extends</span> <span class="hljs-title">HttpServlet</span> </span>&#123;<br>    protected void doPost(<span class="hljs-type">HttpServletRequest</span> request, <span class="hljs-type">HttpServletResponse</span> response) <span class="hljs-keyword">throws</span> <span class="hljs-type">ServletException</span>, <span class="hljs-type">IOException</span> &#123;<br>            doGet(request, response);<br>    &#125;<br><br>    protected void doGet(<span class="hljs-type">HttpServletRequest</span> request, <span class="hljs-type">HttpServletResponse</span> response) <span class="hljs-keyword">throws</span> <span class="hljs-type">ServletException</span>, <span class="hljs-type">IOException</span> &#123;<br><br>        <span class="hljs-comment">// 设置响应内容类型</span><br>        response.setContentType(<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span>);<br><br>        <span class="hljs-type">PrintWriter</span> out <span class="hljs-operator">=</span> response.getWriter();<br>        <span class="hljs-type">String</span> title <span class="hljs-operator">=</span> <span class="hljs-string">&quot;读取表单数据&quot;</span>;<br>        <span class="hljs-comment">// 处理中文</span><br>        <span class="hljs-type">String</span> name <span class="hljs-operator">=</span>new <span class="hljs-type">String</span>(request.getParameter(<span class="hljs-string">&quot;name&quot;</span>).getBytes(<span class="hljs-string">&quot;ISO-8859-1&quot;</span>),<span class="hljs-string">&quot;UTF-8&quot;</span>);<span class="hljs-comment">//处理表单传递中文信息乱码问题</span><br>        <span class="hljs-type">String</span> docType <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&lt;!DOCTYPE html&gt; <span class="hljs-subst">\n</span>&quot;</span>;<br>        out.println(docType <span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;&lt;html&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;&lt;head&gt;&lt;title&gt;&quot;</span> <span class="hljs-operator">+</span> title <span class="hljs-operator">+</span> <span class="hljs-string">&quot;&lt;/title&gt;&lt;/head&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;&lt;body bgcolor=<span class="hljs-subst">\&quot;</span>#f0f0f0<span class="hljs-subst">\&quot;</span>&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;&lt;h1 align=<span class="hljs-subst">\&quot;</span>center<span class="hljs-subst">\&quot;</span>&gt;&quot;</span> <span class="hljs-operator">+</span> title <span class="hljs-operator">+</span> <span class="hljs-string">&quot;&lt;/h1&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;&lt;ul&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;  &lt;li&gt;&lt;b&gt;站点名&lt;/b&gt;：&quot;</span><br>                <span class="hljs-operator">+</span> name <span class="hljs-operator">+</span> <span class="hljs-string">&quot;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;  &lt;li&gt;&lt;b&gt;网址&lt;/b&gt;：&quot;</span><br>                <span class="hljs-operator">+</span> request.getParameter(<span class="hljs-string">&quot;url&quot;</span>) <span class="hljs-operator">+</span> <span class="hljs-string">&quot;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;&lt;/ul&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;&lt;ul&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;  &lt;li&gt;&lt;b&gt;百度标识：&lt;/b&gt;: &quot;</span><br>                <span class="hljs-operator">+</span> request.getParameter(<span class="hljs-string">&quot;baidu&quot;</span>) <span class="hljs-operator">+</span> <span class="hljs-string">&quot;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;  &lt;li&gt;&lt;b&gt;Google 标识：&lt;/b&gt;: &quot;</span><br>                <span class="hljs-operator">+</span> request.getParameter(<span class="hljs-string">&quot;google&quot;</span>) <span class="hljs-operator">+</span> <span class="hljs-string">&quot;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;  &lt;li&gt;&lt;b&gt;淘宝标识：&lt;/b&gt;: &quot;</span><br>                <span class="hljs-operator">+</span> request.getParameter(<span class="hljs-string">&quot;taobao&quot;</span>) <span class="hljs-operator">+</span> <span class="hljs-string">&quot;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;&lt;/ul&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;&lt;/body&gt;&lt;/html&gt;&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; <span class="hljs-keyword">language</span>=&quot;java&quot; %&gt;<br>&lt;html&gt;<br>&lt;head&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br>    &lt;form action=&quot;Index&quot; <span class="hljs-keyword">method</span>=&quot;get&quot;&gt;<br>        网址名：&lt;<span class="hljs-keyword">input</span> <span class="hljs-keyword">type</span>=&quot;text&quot; <span class="hljs-type">name</span>=&quot;name&quot;&gt;<br>        &lt;br /&gt;<br>        网址：&lt;<span class="hljs-keyword">input</span> <span class="hljs-keyword">type</span>=&quot;text&quot; <span class="hljs-type">name</span>=&quot;url&quot; /&gt;&lt;br&gt;<br>        &lt;<span class="hljs-keyword">input</span> <span class="hljs-keyword">type</span>=&quot;checkbox&quot; <span class="hljs-type">name</span>=&quot;baidu&quot; checked=&quot;checked&quot; /&gt; 百度<br>		&lt;<span class="hljs-keyword">input</span> <span class="hljs-keyword">type</span>=&quot;checkbox&quot; <span class="hljs-type">name</span>=&quot;google&quot;  /&gt; Google<br>		&lt;<span class="hljs-keyword">input</span> <span class="hljs-keyword">type</span>=&quot;checkbox&quot; <span class="hljs-type">name</span>=&quot;taobao&quot; checked=&quot;checked&quot; /&gt; 淘宝<br>        &lt;<span class="hljs-keyword">input</span> <span class="hljs-keyword">type</span>=&quot;submit&quot; <span class="hljs-keyword">value</span>=&quot;提交&quot; /&gt;<br>    &lt;/form&gt;<br>&lt;/body&gt;<br>&lt;/html&gt;<br></code></pre></td></tr></table></figure>
<p><img src="/.com//get.png" srcset="/img/loading.gif"></p>
<p><strong>（2）、post方式举例：</strong></p>
<p><img src="/.com//post.png" srcset="/img/loading.gif"></p>
<p><img src="/.com//post1.png" srcset="/img/loading.gif"></p>
<p><strong>（3）、遍历表单元素：</strong></p>
<figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs sas">Enumeration paramNames = request.getParameterNames();//获取所有面单元素名<br><br><span class="hljs-meta">while</span>(paramNames.hasMoreElements()) &#123;<br>	String paramName = (String)paramNames.nextElement();<br>	<span class="hljs-meta">out</span>.p<span class="hljs-meta">rint(</span><span class="hljs-string">&quot;&lt;tr&gt;&lt;td&gt;&quot;</span> + paramName + <span class="hljs-string">&quot;&lt;/td&gt;\n&quot;</span>);<br>	String[] paramValues =<br>	request.getParameterValues(paramName);<br>	// 读取单个值的数据<br>	<span class="hljs-meta">if</span> (paramValues.<span class="hljs-meta">length</span> == 1) &#123;<br>		String paramValue = paramValues[0];<br>		<span class="hljs-meta">if</span> (paramValue<span class="hljs-meta">.length(</span>) == 0)<br>			<span class="hljs-meta">out</span>.print<span class="hljs-meta">ln(</span><span class="hljs-string">&quot;&lt;td&gt;&lt;i&gt;没有值&lt;/i&gt;&lt;/td&gt;&quot;</span>);<br>		<span class="hljs-meta">else</span><br>			<span class="hljs-meta">out</span>.print<span class="hljs-meta">ln(</span><span class="hljs-string">&quot;&lt;td&gt;&quot;</span> + paramValue + <span class="hljs-string">&quot;&lt;/td&gt;&quot;</span>);<br>	&#125; <span class="hljs-meta">else</span> &#123;<br>		// 读取多个值的数据<br>		<span class="hljs-meta">out</span>.print<span class="hljs-meta">ln(</span><span class="hljs-string">&quot;&lt;td&gt;&lt;ul&gt;&quot;</span>);<br>		for(int i=0; i &lt; paramValues.<span class="hljs-meta">length</span>; i++) &#123;<br>		<span class="hljs-meta">out</span>.print<span class="hljs-meta">ln(</span><span class="hljs-string">&quot;&lt;li&gt;&quot;</span> + paramValues[i]);<br>	&#125;<br>		<span class="hljs-meta">out</span>.print<span class="hljs-meta">ln(</span><span class="hljs-string">&quot;&lt;/ul&gt;&lt;/td&gt;&quot;</span>);<br>	&#125;<br>	<span class="hljs-meta">out</span>.p<span class="hljs-meta">rint(</span><span class="hljs-string">&quot;&lt;/tr&gt;&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>
<p><img src="/.com//bianli.png" srcset="/img/loading.gif"></p>
<h4 id="1-5、Servlet于HTTP请求响应"><a href="#1-5、Servlet于HTTP请求响应" class="headerlink" title="1.5、Servlet于HTTP请求响应"></a>1.5、Servlet于HTTP请求响应</h4><p>浏览器请求网页时，它会向 Web 服务器发送特定信息，这些信息不能被直接读取，因为这些信息是作为 <code>HTTP 请求的头</code>的一部分进行传输的。您可以查看 <a target="_blank" rel="noopener" href="https://www.runoob.com/http/http-tutorial.html">HTTP 协议</a> 了解更多相关信息。</p>
<p><strong>（1）、以下是来自于浏览器端的重要头信息：</strong></p>
<table>
<thead>
<tr>
<th align="left">头信息</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Accept</td>
<td align="left">这个头信息指定浏览器或其他客户端可以处理的 MIME 类型。值 <strong>image/png</strong> 或 <strong>image/jpeg</strong> 是最常见的两种可能值。</td>
</tr>
<tr>
<td align="left">Accept-Charset</td>
<td align="left">这个头信息指定浏览器可以用来显示信息的字符集。例如 ISO-8859-1。</td>
</tr>
<tr>
<td align="left">Accept-Encoding</td>
<td align="left">这个头信息指定浏览器知道如何处理的编码类型。值 <strong>gzip</strong> 或 <strong>compress</strong> 是最常见的两种可能值。</td>
</tr>
<tr>
<td align="left">Accept-Language</td>
<td align="left">这个头信息指定客户端的首选语言，在这种情况下，Servlet 会产生多种语言的结果。例如，en、en-us、ru 等。</td>
</tr>
<tr>
<td align="left">Authorization</td>
<td align="left">这个头信息用于客户端在访问受密码保护的网页时识别自己的身份。</td>
</tr>
<tr>
<td align="left">Connection</td>
<td align="left">这个头信息指示客户端是否可以处理持久 HTTP 连接。持久连接允许客户端或其他浏览器通过<code>（单个请求来检索多个文件？？？）</code>。值 <strong>Keep-Alive</strong> 意味着使用了持续连接。</td>
</tr>
<tr>
<td align="left">Content-Length</td>
<td align="left">这个头信息只适用于 POST 请求，并给出 POST 数据的大小（以字节为单位）。</td>
</tr>
<tr>
<td align="left">Cookie</td>
<td align="left">这个头信息把之前发送到浏览器的 cookies 返回到服务器。</td>
</tr>
<tr>
<td align="left">Host</td>
<td align="left">这个头信息指定原始的 URL 中的主机和端口。</td>
</tr>
<tr>
<td align="left">If-Modified-Since</td>
<td align="left">这个头信息表示只有当页面在指定的日期后已更改时，客户端想要的页面。如果没有新的结果可以使用，服务器会发送一个 304 代码，表示 <strong>Not Modified</strong> 头信息。</td>
</tr>
<tr>
<td align="left">If-Unmodified-Since</td>
<td align="left">这个头信息是 If-Modified-Since 的对立面，它指定只有当文档早于指定日期时，操作才会成功。</td>
</tr>
<tr>
<td align="left">Referer</td>
<td align="left">这个头信息指示所指向的 Web 页的 URL。例如，如果您在网页 1，点击一个链接到网页 2，当浏览器请求网页 2 时，网页 1 的 URL 就会包含在 Referer 头信息中。</td>
</tr>
<tr>
<td align="left">User-Agent</td>
<td align="left">这个头信息识别发出请求的浏览器或其他客户端，并可以向不同类型的浏览器返回不同的内容。</td>
</tr>
</tbody></table>
<p><strong>（2）、下表总结了从 Web 服务器端返回到浏览器的最有用的 HTTP 1.1 响应报头：</strong></p>
<table>
<thead>
<tr>
<th align="left">头信息</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Allow</td>
<td align="left">这个头信息指定服务器支持的请求方法（GET、POST 等）。</td>
</tr>
<tr>
<td align="left">Cache-Control</td>
<td align="left">这个头信息指定响应文档在何种情况下可以安全地缓存。可能的值有：<strong>public、private</strong> 或 <strong>no-cache</strong> 等。Public 意味着文档是可缓存，Private 意味着文档是单个用户私用文档，且只能存储在私有（非共享）缓存中，no-cache 意味着文档不应被缓存。</td>
</tr>
<tr>
<td align="left">Connection</td>
<td align="left">这个头信息指示浏览器是否使用持久 HTTP 连接。值 <strong>close</strong> 指示浏览器不使用持久 HTTP 连接，值 <strong>keep-alive</strong> 意味着使用持久连接。</td>
</tr>
<tr>
<td align="left">Content-Disposition</td>
<td align="left">这个头信息可以让您请求浏览器要求用户以给定名称的文件把响应保存到磁盘。</td>
</tr>
<tr>
<td align="left">Content-Encoding</td>
<td align="left">在传输过程中，这个头信息指定页面的编码方式。</td>
</tr>
<tr>
<td align="left">Content-Language</td>
<td align="left">这个头信息表示文档编写所使用的语言。例如，en、en-us、ru 等。</td>
</tr>
<tr>
<td align="left">Content-Length</td>
<td align="left">这个头信息指示响应中的字节数。只有当浏览器使用持久（keep-alive）HTTP 连接时才需要这些信息。</td>
</tr>
<tr>
<td align="left">Content-Type</td>
<td align="left">这个头信息提供了响应文档的 MIME（Multipurpose Internet Mail Extension）类型。</td>
</tr>
<tr>
<td align="left">Expires</td>
<td align="left">这个头信息指定内容过期的时间，在这之后内容不再被缓存。</td>
</tr>
<tr>
<td align="left">Last-Modified</td>
<td align="left">这个头信息指示文档的最后修改时间。然后，客户端可以缓存文件，并在以后的请求中通过 <strong>If-Modified-Since</strong> 请求头信息提供一个日期。</td>
</tr>
<tr>
<td align="left">Location</td>
<td align="left">这个头信息应被包含在所有的带有状态码的响应中。在 300s 内，这会通知浏览器文档的地址。浏览器会自动重新连接到这个位置，并获取新的文档。</td>
</tr>
<tr>
<td align="left">Refresh</td>
<td align="left">这个头信息指定浏览器应该如何尽快请求更新的页面。您可以指定页面刷新的秒数。</td>
</tr>
<tr>
<td align="left">Retry-After</td>
<td align="left">这个头信息可以与 503（Service Unavailable 服务不可用）响应配合使用，这会告诉客户端多久就可以重复它的请求。</td>
</tr>
<tr>
<td align="left">Set-Cookie</td>
<td align="left">这个头信息指定一个与页面关联的 cookie。</td>
</tr>
</tbody></table>
<h5 id="1-5-1、Servlet处理浏览器HTTP请求"><a href="#1-5-1、Servlet处理浏览器HTTP请求" class="headerlink" title="1.5.1、Servlet处理浏览器HTTP请求"></a>1.5.1、Servlet处理浏览器HTTP请求</h5><p>通过 <code>HttpServletRequest</code> 对象：</p>
<table>
<thead>
<tr>
<th align="left">序号</th>
<th align="left">方法 &amp; 描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left"><strong>Cookie[] getCookies()</strong> 返回一个数组，包含客户端发送该请求的所有的 Cookie 对象。</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left"><strong>Enumeration getAttributeNames()</strong> 返回一个枚举，包含提供给该请求可用的属性名称。</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left"><strong>Enumeration getHeaderNames()</strong> 返回一个枚举，包含在该请求中包含的所有的头名。</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left"><strong>Enumeration getParameterNames()</strong> 返回一个 String 对象的枚举，包含在该请求中包含的参数的名称。</td>
</tr>
<tr>
<td align="left">5</td>
<td align="left"><strong>HttpSession getSession()</strong> 返回与该请求关联的当前 session 会话，或者<strong>如果请求没有 session 会话，则创建一个。</strong></td>
</tr>
<tr>
<td align="left">6</td>
<td align="left"><strong>HttpSession getSession(boolean create)</strong> 返回与该请求关联的当前 HttpSession，或者如果没有当前会话，且创建是真的，则返回一个新的 session 会话。</td>
</tr>
<tr>
<td align="left">7</td>
<td align="left"><strong>Locale getLocale()</strong> 基于 Accept-Language 头，返回<strong>客户端接受内容的首选的区域设置</strong>。</td>
</tr>
<tr>
<td align="left">8</td>
<td align="left"><strong>Object getAttribute(String name)</strong> 以对象形式返回已命名属性的值，如果没有给定名称的属性存在，则返回 null。</td>
</tr>
<tr>
<td align="left">9</td>
<td align="left"><strong>ServletInputStream getInputStream()</strong> 使用 ServletInputStream，以二进制数据形式检索请求的主体。</td>
</tr>
<tr>
<td align="left">10</td>
<td align="left"><strong>String getAuthType()</strong> 返回用于保护 Servlet 的<strong>身份验证方案的名称</strong>，例如，”BASIC” 或 “SSL”，如果JSP没有受到保护则返回 null。</td>
</tr>
<tr>
<td align="left">11</td>
<td align="left"><strong>String getCharacterEncoding()</strong> 返回请求主体中使用的字符编码的名称。</td>
</tr>
<tr>
<td align="left">12</td>
<td align="left"><strong>String getContentType()</strong> 返回请求主体的 MIME 类型，如果不知道类型则返回 null。</td>
</tr>
<tr>
<td align="left">13</td>
<td align="left"><strong>String getContextPath()</strong> 返回指示请求上下文的请求 URI 部分。</td>
</tr>
<tr>
<td align="left">14</td>
<td align="left"><strong>String getHeader(String name)</strong> 以字符串形式返回指定的请求头的值。</td>
</tr>
<tr>
<td align="left">15</td>
<td align="left"><strong>String getMethod()</strong> 返回请求的 HTTP 方法的名称，例如，GET、POST 或 PUT。</td>
</tr>
<tr>
<td align="left">16</td>
<td align="left"><strong>String getParameter(String name)</strong> 以字符串形式返回请求参数的值，或者如果参数不存在则返回 null。</td>
</tr>
<tr>
<td align="left">17</td>
<td align="left"><strong>String getPathInfo()</strong> 当请求发出时，返回与客户端发送的 URL 相关的任何额外的路径信息。</td>
</tr>
<tr>
<td align="left">18</td>
<td align="left"><strong>String getProtocol()</strong> 返回请求协议的名称和版本。</td>
</tr>
<tr>
<td align="left">19</td>
<td align="left"><strong>String getQueryString()</strong> 返回包含在路径后的请求 URL 中的<strong>查询字符串</strong>。</td>
</tr>
<tr>
<td align="left">20</td>
<td align="left"><strong>String getRemoteAddr()</strong> 返回发送请求的客户端的互联网协议（IP）地址。</td>
</tr>
<tr>
<td align="left">21</td>
<td align="left"><strong>String getRemoteHost()</strong> 返回发送请求的客户端的完全限定名称。</td>
</tr>
<tr>
<td align="left">22</td>
<td align="left"><strong>String getRemoteUser()</strong> 如果用户已通过身份验证，则返回发出请求的登录用户，或者如果用户未通过身份验证，则返回 null。</td>
</tr>
<tr>
<td align="left">23</td>
<td align="left"><strong>String getRequestURI()</strong> 从协议名称直到 HTTP 请求的第一行的查询字符串中，返回该请求的 URL 的一部分。</td>
</tr>
<tr>
<td align="left">24</td>
<td align="left"><strong>String getRequestedSessionId()</strong> 返回由客户端指定的 session 会话 ID。</td>
</tr>
<tr>
<td align="left">25</td>
<td align="left"><strong>String getServletPath()</strong> 返回调用 JSP 的请求的 URL 的一部分。</td>
</tr>
<tr>
<td align="left">26</td>
<td align="left"><strong>String[] getParameterValues(String name)</strong> 返回一个字符串对象的数组，包含所有给定的请求参数的值，如果参数不存在则返回 null。</td>
</tr>
<tr>
<td align="left">27</td>
<td align="left"><strong>boolean isSecure()</strong> 返回一个布尔值，指示请求是否使用安全通道，如 HTTPS。</td>
</tr>
<tr>
<td align="left">28</td>
<td align="left"><strong>int getContentLength()</strong> 以字节为单位返回请求主体的长度，并提供输入流，或者如果长度未知则返回 -1。</td>
</tr>
<tr>
<td align="left">29</td>
<td align="left"><strong>int getIntHeader(String name)</strong> 返回指定的请求头的值为一个 int 值。</td>
</tr>
<tr>
<td align="left">30</td>
<td align="left"><strong>int getServerPort()</strong> 返回接收到这个请求的端口号。</td>
</tr>
<tr>
<td align="left">31</td>
<td align="left"><strong>int getParameterMap()</strong> 将参数封装成 Map 类型。</td>
</tr>
</tbody></table>
<p>HTTP Header 请求实例：</p>
<p>使用 HttpServletRequest 的 <strong>getHeaderNames()</strong> 和**getHeader()**方法读取 HTTP 头信息。该方法返回一个枚举，包含与当前的 HTTP 请求相关的头信息。使用 <em>hasMoreElements()</em> 方法来确定何时停止，使用 <em>nextElement()</em> 方法来获取每个参数的名称。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-keyword">public</span> void doGet(<span class="hljs-type">HttpServletRequest</span> request, <span class="hljs-type">HttpServletResponse</span> response) <span class="hljs-keyword">throws</span> <span class="hljs-type">ServletException</span>, <span class="hljs-type">IOException</span><br>&#123;<br>    <span class="hljs-comment">// 设置响应内容类型</span><br>    response.setContentType(<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span>);<br><br>    <span class="hljs-type">PrintWriter</span> out <span class="hljs-operator">=</span> response.getWriter();<br>    <span class="hljs-type">String</span> title <span class="hljs-operator">=</span> <span class="hljs-string">&quot;HTTP Header 请求实例&quot;</span>;<br>    <span class="hljs-type">String</span> docType <span class="hljs-operator">=</span><span class="hljs-string">&quot;&lt;!DOCTYPE html&gt; <span class="hljs-subst">\n</span>&quot;</span>;<br>    out.println(docType <span class="hljs-operator">+</span><br>        <span class="hljs-string">&quot;&lt;html&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>        <span class="hljs-string">&quot;&lt;head&gt;&lt;meta charset=<span class="hljs-subst">\&quot;</span>utf-8<span class="hljs-subst">\&quot;</span>&gt;&lt;title&gt;&quot;</span> <span class="hljs-operator">+</span> title <span class="hljs-operator">+</span> <span class="hljs-string">&quot;&lt;/title&gt;&lt;/head&gt;<span class="hljs-subst">\n</span>&quot;</span><span class="hljs-operator">+</span><br>        <span class="hljs-string">&quot;&lt;body bgcolor=<span class="hljs-subst">\&quot;</span>#f0f0f0<span class="hljs-subst">\&quot;</span>&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>        <span class="hljs-string">&quot;&lt;h1 align=<span class="hljs-subst">\&quot;</span>center<span class="hljs-subst">\&quot;</span>&gt;&quot;</span> <span class="hljs-operator">+</span> title <span class="hljs-operator">+</span> <span class="hljs-string">&quot;&lt;/h1&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>        <span class="hljs-string">&quot;&lt;table width=<span class="hljs-subst">\&quot;</span>100%<span class="hljs-subst">\&quot;</span> border=<span class="hljs-subst">\&quot;</span>1<span class="hljs-subst">\&quot;</span> align=<span class="hljs-subst">\&quot;</span>center<span class="hljs-subst">\&quot;</span>&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>        <span class="hljs-string">&quot;&lt;tr bgcolor=<span class="hljs-subst">\&quot;</span>#949494<span class="hljs-subst">\&quot;</span>&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>        <span class="hljs-string">&quot;&lt;th&gt;Header 名称&lt;/th&gt;&lt;th&gt;Header 值&lt;/th&gt;<span class="hljs-subst">\n</span>&quot;</span><span class="hljs-operator">+</span><br>        <span class="hljs-string">&quot;&lt;/tr&gt;<span class="hljs-subst">\n</span>&quot;</span>);<br><br>    <span class="hljs-type">Enumeration</span> headerNames <span class="hljs-operator">=</span> request.getHeaderNames();<br><br>    <span class="hljs-keyword">while</span>(headerNames.hasMoreElements()) &#123;<br>        <span class="hljs-type">String</span> paramName <span class="hljs-operator">=</span> (<span class="hljs-type">String</span>)headerNames.nextElement();<br>        out.print(<span class="hljs-string">&quot;&lt;tr&gt;&lt;td&gt;&quot;</span> <span class="hljs-operator">+</span> paramName <span class="hljs-operator">+</span> <span class="hljs-string">&quot;&lt;/td&gt;<span class="hljs-subst">\n</span>&quot;</span>);<br>        <span class="hljs-type">String</span> paramValue <span class="hljs-operator">=</span> request.getHeader(paramName);<br>        out.println(<span class="hljs-string">&quot;&lt;td&gt; &quot;</span> <span class="hljs-operator">+</span> paramValue <span class="hljs-operator">+</span> <span class="hljs-string">&quot;&lt;/td&gt;&lt;/tr&gt;<span class="hljs-subst">\n</span>&quot;</span>);<br>    &#125;<br>    out.println(<span class="hljs-string">&quot;&lt;/table&gt;<span class="hljs-subst">\n</span>&lt;/body&gt;&lt;/html&gt;&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>
<p><img src="/.com//header.png" srcset="/img/loading.gif"></p>
<h5 id="1-5-2、Servlet服务器HTTP响应"><a href="#1-5-2、Servlet服务器HTTP响应" class="headerlink" title="1.5.2、Servlet服务器HTTP响应"></a>1.5.2、Servlet服务器HTTP响应</h5><p>HTTP 请求和 HTTP 响应消息的格式是类似的，结构如下：</p>
<ul>
<li>初始状态行 + 回车换行符（回车+换行）</li>
<li>零个或多个标题行+回车换行符</li>
<li>一个空白行，即回车换行符</li>
<li>一个可选的消息主体，比如文件、查询数据或查询输出</li>
</ul>
<p>一个典型的响应如下所示：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs xml">HTTP/1.1 200 OK<br>Content-Type: text/html<br>Header2: ...<br>...<br>HeaderN: ...<br>  (Blank Line)<br><span class="hljs-meta">&lt;!doctype ...&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>...<br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>
<p>状态行包括 HTTP 版本（在本例中为 HTTP/1.1）、一个状态码（在本例中为 200）和一个对应于状态码的短消息（在本例中为 OK）。</p>
<p>设置HTTP响应报头的方法</p>
<p>通过 <code>HttpServletResponse</code> 对象，在 Servlet 程序中设置 HTTP 响应报头</p>
<table>
<thead>
<tr>
<th align="left">序号</th>
<th align="left">方法 &amp; 描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left"><strong>String encodeRedirectURL(String url)</strong> 为 sendRedirect 方法中使用的指定的 URL 进行编码，或者如果编码不是必需的，则返回 URL 未改变。</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left"><strong>String encodeURL(String url)</strong> 对包含 session 会话 ID 的指定 URL 进行编码，或者如果编码不是必需的，则返回 URL 未改变。</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left"><strong>boolean containsHeader(String name)</strong> 返回一个布尔值，指示是否已经设置已命名的响应报头。</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left"><strong>boolean isCommitted()</strong> 返回一个布尔值，指示响应是否已经提交。</td>
</tr>
<tr>
<td align="left">5</td>
<td align="left"><strong>void addCookie(Cookie cookie)</strong> 把指定的 cookie 添加到响应。</td>
</tr>
<tr>
<td align="left">6</td>
<td align="left"><strong>void addDateHeader(String name, long date)</strong> 添加一个带有给定的名称和日期值的响应报头。</td>
</tr>
<tr>
<td align="left">7</td>
<td align="left"><strong>void addHeader(String name, String value)</strong> 添加一个带有给定的名称和值的响应报头。</td>
</tr>
<tr>
<td align="left">8</td>
<td align="left"><strong>void addIntHeader(String name, int value)</strong> 添加一个带有给定的名称和整数值的响应报头。</td>
</tr>
<tr>
<td align="left">9</td>
<td align="left"><strong>void flushBuffer()</strong> 强制任何在缓冲区中的内容被写入到客户端。</td>
</tr>
<tr>
<td align="left">10</td>
<td align="left"><strong>void reset()</strong> 清除缓冲区中存在的任何数据，包括状态码和头。</td>
</tr>
<tr>
<td align="left">11</td>
<td align="left"><strong>void resetBuffer()</strong> 清除响应中基础缓冲区的内容，不清除状态码和头。</td>
</tr>
<tr>
<td align="left">12</td>
<td align="left"><strong>void sendError(int sc)</strong> 使用指定的状态码（通常404）发送错误响应到客户端，并清除缓冲区。</td>
</tr>
<tr>
<td align="left">13</td>
<td align="left"><strong>void sendError(int sc, String msg)</strong> 使用指定的状态发送错误响应到客户端。</td>
</tr>
<tr>
<td align="left">14</td>
<td align="left"><strong>void sendRedirect(String location)</strong> 使用指定的重定向位置 URL 发送临时重定向响应到客户端。该方法生成一个 <code>302 响应</code>，连同一个带有新文档 URL 的 <em>Location</em> 头。</td>
</tr>
<tr>
<td align="left">15</td>
<td align="left"><strong>void setBufferSize(int size)</strong> 为响应主体设置首选的缓冲区大小。</td>
</tr>
<tr>
<td align="left">16</td>
<td align="left"><strong>void setCharacterEncoding(String charset)</strong> 设置被发送到客户端的响应的字符编码（MIME 字符集）例如，UTF-8。</td>
</tr>
<tr>
<td align="left">17</td>
<td align="left"><strong>void setContentLength(int len)</strong> 设置在 HTTP Servlet 响应中的内容主体的长度，该方法设置 HTTP Content-Length 头。</td>
</tr>
<tr>
<td align="left">18</td>
<td align="left"><strong>void setContentType(String type)</strong> 如果响应还未被提交，设置被发送到客户端的响应的内容类型。</td>
</tr>
<tr>
<td align="left">19</td>
<td align="left"><strong>void setDateHeader(String name, long date)</strong> 设置一个带有给定的名称和日期值的响应报头。</td>
</tr>
<tr>
<td align="left">20</td>
<td align="left"><strong>void setHeader(String name, String value)</strong> 设置一个带有给定的名称和值的响应报头。</td>
</tr>
<tr>
<td align="left">21</td>
<td align="left"><strong>void setIntHeader(String name, int value)</strong> 设置一个带有给定的名称和整数值的响应报头。</td>
</tr>
<tr>
<td align="left">22</td>
<td align="left"><strong>void setLocale(Locale loc)</strong> 如果响应还未被提交，设置响应的区域。</td>
</tr>
<tr>
<td align="left">23</td>
<td align="left"><strong>void setStatus(int sc)</strong> 为该响应设置状态码。</td>
</tr>
</tbody></table>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-keyword">public</span> void doGet(<span class="hljs-type">HttpServletRequest</span> request,<br>                  <span class="hljs-type">HttpServletResponse</span> response)<br>          <span class="hljs-keyword">throws</span> <span class="hljs-type">ServletException</span>, <span class="hljs-type">IOException</span><br>&#123;<br>    <span class="hljs-comment">// 设置刷新自动加载时间为 5 秒</span><br>    response.setIntHeader(<span class="hljs-string">&quot;Refresh&quot;</span>, <span class="hljs-number">5</span>);<br>    <span class="hljs-comment">// 设置响应内容类型</span><br>    response.setContentType(<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span>);<br>   <br>    <span class="hljs-comment">//使用默认时区和语言环境获得一个日历  </span><br>    <span class="hljs-type">Calendar</span> cale <span class="hljs-operator">=</span> <span class="hljs-type">Calendar</span>.getInstance();  <br>    <span class="hljs-comment">//将Calendar类型转换成Date类型  </span><br>    <span class="hljs-type">Date</span> tasktime<span class="hljs-operator">=</span>cale.getTime();  <br>    <span class="hljs-comment">//设置日期输出的格式  </span><br>    <span class="hljs-type">SimpleDateFormat</span> df<span class="hljs-operator">=</span>new <span class="hljs-type">SimpleDateFormat</span>(<span class="hljs-string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);  <br>    <span class="hljs-comment">//格式化输出  </span><br>    <span class="hljs-type">String</span> nowTime <span class="hljs-operator">=</span> df.format(tasktime);<br>    <br>    <span class="hljs-type">PrintWriter</span> out <span class="hljs-operator">=</span> response.getWriter();<br>    <span class="hljs-type">String</span> title <span class="hljs-operator">=</span> <span class="hljs-string">&quot;自动刷新 Header 设置&quot;</span>;<br>    <span class="hljs-type">String</span> docType <span class="hljs-operator">=</span><br>    <span class="hljs-string">&quot;&lt;!DOCTYPE html&gt;<span class="hljs-subst">\n</span>&quot;</span>;<br>    out.println(docType <span class="hljs-operator">+</span><br>      <span class="hljs-string">&quot;&lt;html&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>      <span class="hljs-string">&quot;&lt;head&gt;&lt;title&gt;&quot;</span> <span class="hljs-operator">+</span> title <span class="hljs-operator">+</span> <span class="hljs-string">&quot;&lt;/title&gt;&lt;/head&gt;<span class="hljs-subst">\n</span>&quot;</span><span class="hljs-operator">+</span><br>      <span class="hljs-string">&quot;&lt;body bgcolor=<span class="hljs-subst">\&quot;</span>#f0f0f0<span class="hljs-subst">\&quot;</span>&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>      <span class="hljs-string">&quot;&lt;h1 align=<span class="hljs-subst">\&quot;</span>center<span class="hljs-subst">\&quot;</span>&gt;&quot;</span> <span class="hljs-operator">+</span> title <span class="hljs-operator">+</span> <span class="hljs-string">&quot;&lt;/h1&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>      <span class="hljs-string">&quot;&lt;p&gt;当前时间是：&quot;</span> <span class="hljs-operator">+</span> nowTime <span class="hljs-operator">+</span> <span class="hljs-string">&quot;&lt;/p&gt;<span class="hljs-subst">\n</span>&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>
<p><img src="/.com//respon.png" srcset="/img/loading.gif"></p>
<h5 id="1-5-3、HTTP状态码"><a href="#1-5-3、HTTP状态码" class="headerlink" title="1.5.3、HTTP状态码"></a>1.5.3、HTTP状态码</h5><table>
<thead>
<tr>
<th align="left">代码</th>
<th align="left">消息</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">100</td>
<td align="left">Continue</td>
<td align="left">只有请求的一部分已经被服务器接收，但只要它没有被拒绝，客户端应继续该请求。</td>
</tr>
<tr>
<td align="left">101</td>
<td align="left">Switching Protocols</td>
<td align="left">服务器切换协议。</td>
</tr>
<tr>
<td align="left">200</td>
<td align="left">OK</td>
<td align="left">请求成功。</td>
</tr>
<tr>
<td align="left">201</td>
<td align="left">Created</td>
<td align="left">该请求是完整的，并创建一个新的资源。</td>
</tr>
<tr>
<td align="left">202</td>
<td align="left">Accepted</td>
<td align="left">该请求被接受处理，但是该处理是不完整的。</td>
</tr>
<tr>
<td align="left">203</td>
<td align="left">Non-authoritative Information</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">204</td>
<td align="left">No Content</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">205</td>
<td align="left">Reset Content</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">206</td>
<td align="left">Partial Content</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">300</td>
<td align="left">Multiple Choices</td>
<td align="left">链接列表。用户可以选择一个链接，进入到该位置。最多五个地址。</td>
</tr>
<tr>
<td align="left">301</td>
<td align="left">Moved Permanently</td>
<td align="left">所请求的页面已经转移到一个新的 URL。</td>
</tr>
<tr>
<td align="left">302</td>
<td align="left">Found</td>
<td align="left">所请求的页面已经临时转移到一个新的 URL。</td>
</tr>
<tr>
<td align="left">303</td>
<td align="left">See Other</td>
<td align="left">所请求的页面可以在另一个不同的 URL 下被找到。</td>
</tr>
<tr>
<td align="left">304</td>
<td align="left">Not Modified</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">305</td>
<td align="left">Use Proxy</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">306</td>
<td align="left"><em>Unused</em></td>
<td align="left">在以前的版本中使用该代码。现在已不再使用它，但代码仍被保留。</td>
</tr>
<tr>
<td align="left">307</td>
<td align="left">Temporary Redirect</td>
<td align="left">所请求的页面已经临时转移到一个新的 URL。</td>
</tr>
<tr>
<td align="left">400</td>
<td align="left">Bad Request</td>
<td align="left">服务器不理解请求。</td>
</tr>
<tr>
<td align="left">401</td>
<td align="left">Unauthorized</td>
<td align="left">所请求的页面需要用户名和密码。</td>
</tr>
<tr>
<td align="left">402</td>
<td align="left">Payment Required</td>
<td align="left"><em>您还不能使用该代码。</em></td>
</tr>
<tr>
<td align="left">403</td>
<td align="left">Forbidden</td>
<td align="left">禁止访问所请求的页面。</td>
</tr>
<tr>
<td align="left">404</td>
<td align="left">Not Found</td>
<td align="left">服务器无法找到所请求的页面。.</td>
</tr>
<tr>
<td align="left">405</td>
<td align="left">Method Not Allowed</td>
<td align="left">在请求中指定的方法是不允许的。</td>
</tr>
<tr>
<td align="left">406</td>
<td align="left">Not Acceptable</td>
<td align="left">服务器只生成一个不被客户端接受的响应。</td>
</tr>
<tr>
<td align="left">407</td>
<td align="left">Proxy Authentication Required</td>
<td align="left">在请求送达之前，您必须使用代理服务器的验证。</td>
</tr>
<tr>
<td align="left">408</td>
<td align="left">Request Timeout</td>
<td align="left">请求需要的时间比服务器能够等待的时间长，超时。</td>
</tr>
<tr>
<td align="left">409</td>
<td align="left">Conflict</td>
<td align="left">请求因为冲突无法完成。</td>
</tr>
<tr>
<td align="left">410</td>
<td align="left">Gone</td>
<td align="left">所请求的页面不再可用。</td>
</tr>
<tr>
<td align="left">411</td>
<td align="left">Length Required</td>
<td align="left">“Content-Length” 未定义。服务器无法处理客户端发送的不带 Content-Length 的请求信息。</td>
</tr>
<tr>
<td align="left">412</td>
<td align="left">Precondition Failed</td>
<td align="left">请求中给出的先决条件被服务器评估为 false。</td>
</tr>
<tr>
<td align="left">413</td>
<td align="left">Request Entity Too Large</td>
<td align="left">服务器不接受该请求，因为请求实体过大。</td>
</tr>
<tr>
<td align="left">414</td>
<td align="left">Request-url Too Long</td>
<td align="left">服务器不接受该请求，因为 URL 太长。当您转换一个 “post” 请求为一个带有长的查询信息的 “get” 请求时发生。</td>
</tr>
<tr>
<td align="left">415</td>
<td align="left">Unsupported Media Type</td>
<td align="left">服务器不接受该请求，因为媒体类型不被支持。</td>
</tr>
<tr>
<td align="left">417</td>
<td align="left">Expectation Failed</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">500</td>
<td align="left">Internal Server Error</td>
<td align="left">未完成的请求。服务器遇到了一个意外的情况。</td>
</tr>
<tr>
<td align="left">501</td>
<td align="left">Not Implemented</td>
<td align="left">未完成的请求。服务器不支持所需的功能。</td>
</tr>
<tr>
<td align="left">502</td>
<td align="left">Bad Gateway</td>
<td align="left">未完成的请求。服务器从上游服务器收到无效响应。</td>
</tr>
<tr>
<td align="left">503</td>
<td align="left">Service Unavailable</td>
<td align="left">未完成的请求。服务器暂时超载或死机。</td>
</tr>
<tr>
<td align="left">504</td>
<td align="left">Gateway Timeout</td>
<td align="left">网关超时。</td>
</tr>
<tr>
<td align="left">505</td>
<td align="left">HTTP Version Not Supported</td>
<td align="left">服务器不支持”HTTP协议”版本。</td>
</tr>
</tbody></table>
<h4 id="1-6、Servlet过滤器"><a href="#1-6、Servlet过滤器" class="headerlink" title="1.6、Servlet过滤器"></a>1.6、Servlet过滤器</h4><p>Servlet 过滤器可以动态地拦截请求和响应，以变换或使用包含在请求或响应中的信息。</p>
<p>可以将一个或多个 Servlet 过滤器附加到一个 Servlet 或一组 Servlet，也可以附加到 JavaServer Pages (JSP) 文件和 HTML 页面。调用 Servlet 前调用所有附加的 Servlet 过滤器。</p>
<p>过滤器通过 Web 部署描述符（web.xml）中的 XML 标签来声明，然后映射到您的应用程序的部署描述符中的 Servlet 名称或 URL 模式。</p>
<p>当 Web 容器启动 Web 应用程序时，它会为您在部署描述符中声明的每一个过滤器创建一个实例。</p>
<p>Filter的执行顺序与在web.xml配置文件中的配置顺序一致，一般把Filter配置在所有的Servlet之前。</p>
<h5 id="1-6-1、Servlet-过滤器目的"><a href="#1-6-1、Servlet-过滤器目的" class="headerlink" title="1.6.1、Servlet 过滤器目的"></a>1.6.1、Servlet 过滤器目的</h5><p>Servlet 过滤器是可用于 Servlet 编程的 Java 类，可以实现以下目的：</p>
<ul>
<li>在客户端的请求访问后端资源之前，拦截这些请求。</li>
<li>在服务器的响应发送回客户端之前，处理这些响应。</li>
</ul>
<h5 id="1-6-2、根据规范建议的各种类型的过滤器"><a href="#1-6-2、根据规范建议的各种类型的过滤器" class="headerlink" title="1.6.2、根据规范建议的各种类型的过滤器"></a>1.6.2、根据规范建议的各种类型的过滤器</h5><ul>
<li>身份验证过滤器（Authentication Filters）。</li>
<li>数据压缩过滤器（Data compression Filters）。</li>
<li>加密过滤器（Encryption Filters）。</li>
<li>触发资源访问事件过滤器。</li>
<li>图像转换过滤器（Image Conversion Filters）。</li>
<li>日志记录和审核过滤器（Logging and Auditing Filters）。</li>
<li>MIME-TYPE 链过滤器（MIME-TYPE Chain Filters）。</li>
<li>标记化过滤器（Tokenizing Filters）。</li>
<li>XSL/T 过滤器（XSL/T Filters），转换 XML 内容。</li>
</ul>
<h5 id="1-6-3、Servlet-过滤器方法"><a href="#1-6-3、Servlet-过滤器方法" class="headerlink" title="1.6.3、Servlet 过滤器方法"></a><strong>1.6.3、Servlet 过滤器方法</strong></h5><p>过滤器是一个实现了 <code>javax.servlet.Filter</code> 接口的 Java 类。javax.servlet.Filter 接口定义了三个方法：</p>
<table>
<thead>
<tr>
<th align="left">序号</th>
<th align="left">方法 &amp; 描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left"><strong>public void doFilter (ServletRequest, ServletResponse, FilterChain)</strong> <br>该方法完成实际的过滤操作，当客户端请求方法与过滤器设置匹配的URL时，Servlet容器将先调用过滤器的doFilter方法。FilterChain用户访问后续过滤器。</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left"><strong>public void init(FilterConfig filterConfig)</strong> <br>web 应用程序启动时，web 服务器将创建Filter 的实例对象，并调用其init方法，读取web.xml配置，完成对象的初始化功能，从而为后续的用户请求作好拦截的准备工作（filter对象只会创建一次，init方法也只会执行一次）。开发人员通过init方法的参数，可获得代表当前filter配置信息的FilterConfig对象。</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left"><strong>public void destroy()</strong> <br>Servlet容器在销毁过滤器实例前调用该方法，在该方法中释放Servlet过滤器占用的资源。</td>
</tr>
</tbody></table>
<h5 id="1-6-4、FilterConfig-使用"><a href="#1-6-4、FilterConfig-使用" class="headerlink" title="1.6.4、FilterConfig 使用"></a><strong>1.6.4、FilterConfig 使用</strong></h5><p>Filter 的 init 方法中提供了一个 FilterConfig 对象。</p>
<p>如 web.xml 文件配置如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">filter</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>LogFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-class</span>&gt;</span>com.ant_nest.test.LogFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-class</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">init-param</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>Site<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>Ant Nest<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">init-param</span>&gt;<span class="hljs-name">f</span></span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter</span>&gt;</span><br></code></pre></td></tr></table></figure>
<p>在 init 方法使用 FilterConfig 对象获取参数：</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span>  <span class="hljs-title">init</span><span class="hljs-params">(FilterConfig <span class="hljs-built_in">config</span>)</span> throws ServletException </span>&#123;<br>    <span class="hljs-comment">// 获取初始化参数</span><br>    <span class="hljs-keyword">String</span> site = <span class="hljs-built_in">config</span>.getInitParameter(<span class="hljs-string">&quot;Site&quot;</span>); <br>    <span class="hljs-comment">// 输出初始化参数</span><br>    System.out.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;网站名称: &quot;</span> + site); <br>&#125;<br></code></pre></td></tr></table></figure>
<h5 id="1-6-5、Servlet过滤器案例"><a href="#1-6-5、Servlet过滤器案例" class="headerlink" title="1.6.5、Servlet过滤器案例"></a>1.6.5、Servlet过滤器案例</h5><p><strong>1）、DisplayHeader.java</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-comment">//导入必需的 java 库</span><br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.PrintWriter;<br><span class="hljs-keyword">import</span> java.util.Enumeration;<br><br><span class="hljs-keyword">import</span> javax.servlet.ServletException;<br><span class="hljs-keyword">import</span> javax.servlet.annotation.WebServlet;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServlet;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletResponse;<br><br><span class="hljs-meta">@WebServlet</span>(<span class="hljs-string">&quot;/DisplayHeader&quot;</span>)<br><br><span class="hljs-comment">//扩展 HttpServlet 类</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DisplayHeader</span> <span class="hljs-title">extends</span> <span class="hljs-title">HttpServlet</span> </span>&#123;<br><br>    <span class="hljs-comment">// 处理 GET 方法请求的方法</span><br>    <span class="hljs-keyword">public</span> void doGet(<span class="hljs-type">HttpServletRequest</span> request, <span class="hljs-type">HttpServletResponse</span> response) <span class="hljs-keyword">throws</span> <span class="hljs-type">ServletException</span>, <span class="hljs-type">IOException</span><br>    &#123;<br>        <span class="hljs-comment">// 设置响应内容类型</span><br>        response.setContentType(<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span>);<br><br>        <span class="hljs-type">PrintWriter</span> out <span class="hljs-operator">=</span> response.getWriter();<br>        <span class="hljs-type">String</span> title <span class="hljs-operator">=</span> <span class="hljs-string">&quot;HTTP Header 请求实例&quot;</span>;<br>        <span class="hljs-type">String</span> docType <span class="hljs-operator">=</span><br>                <span class="hljs-string">&quot;&lt;!DOCTYPE html&gt; <span class="hljs-subst">\n</span>&quot;</span>;<br>        out.println(docType <span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;&lt;html&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;&lt;head&gt;&lt;meta charset=<span class="hljs-subst">\&quot;</span>utf-8<span class="hljs-subst">\&quot;</span>&gt;&lt;title&gt;&quot;</span> <span class="hljs-operator">+</span> title <span class="hljs-operator">+</span> <span class="hljs-string">&quot;&lt;/title&gt;&lt;/head&gt;<span class="hljs-subst">\n</span>&quot;</span><span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;&lt;body bgcolor=<span class="hljs-subst">\&quot;</span>#f0f0f0<span class="hljs-subst">\&quot;</span>&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;&lt;h1 align=<span class="hljs-subst">\&quot;</span>center<span class="hljs-subst">\&quot;</span>&gt;&quot;</span> <span class="hljs-operator">+</span> title <span class="hljs-operator">+</span> <span class="hljs-string">&quot;&lt;/h1&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;&lt;table width=<span class="hljs-subst">\&quot;</span>100%<span class="hljs-subst">\&quot;</span> border=<span class="hljs-subst">\&quot;</span>1<span class="hljs-subst">\&quot;</span> align=<span class="hljs-subst">\&quot;</span>center<span class="hljs-subst">\&quot;</span>&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;&lt;tr bgcolor=<span class="hljs-subst">\&quot;</span>#949494<span class="hljs-subst">\&quot;</span>&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;&lt;th&gt;Header 名称&lt;/th&gt;&lt;th&gt;Header 值&lt;/th&gt;<span class="hljs-subst">\n</span>&quot;</span><span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;&lt;/tr&gt;<span class="hljs-subst">\n</span>&quot;</span>);<br><br>        <span class="hljs-type">Enumeration</span> headerNames <span class="hljs-operator">=</span> request.getHeaderNames();<br><br>        <span class="hljs-keyword">while</span>(headerNames.hasMoreElements()) &#123;<br>            <span class="hljs-type">String</span> paramName <span class="hljs-operator">=</span> (<span class="hljs-type">String</span>)headerNames.nextElement();<br>            out.print(<span class="hljs-string">&quot;&lt;tr&gt;&lt;td&gt;&quot;</span> <span class="hljs-operator">+</span> paramName <span class="hljs-operator">+</span> <span class="hljs-string">&quot;&lt;/td&gt;<span class="hljs-subst">\n</span>&quot;</span>);<br>            <span class="hljs-type">String</span> paramValue <span class="hljs-operator">=</span> request.getHeader(paramName);<br>            out.println(<span class="hljs-string">&quot;&lt;td&gt; &quot;</span> <span class="hljs-operator">+</span> paramValue <span class="hljs-operator">+</span> <span class="hljs-string">&quot;&lt;/td&gt;&lt;/tr&gt;<span class="hljs-subst">\n</span>&quot;</span>);<br>        &#125;<br>        out.println(<span class="hljs-string">&quot;&lt;/table&gt;<span class="hljs-subst">\n</span>&lt;/body&gt;&lt;/html&gt;&quot;</span>);<br>    &#125;<br>    <span class="hljs-comment">// 处理 POST 方法请求的方法</span><br>    <span class="hljs-keyword">public</span> void doPost(<span class="hljs-type">HttpServletRequest</span> request, <span class="hljs-type">HttpServletResponse</span> response) <span class="hljs-keyword">throws</span> <span class="hljs-type">ServletException</span>, <span class="hljs-type">IOException</span> &#123;<br>        doGet(request, response);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><strong>2）、index.jsp</strong></p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">&lt;%<span class="hljs-comment">-- Created by IntelliJ IDEA. --%&gt;</span><br>&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; <span class="hljs-keyword">language</span>=&quot;java&quot; %&gt;<br>&lt;%@ taglib uri=&quot;http://java.sun.com/jsp/jstl/core&quot; prefix=&quot;c&quot; %&gt;<br>&lt;html&gt;<br>&lt;head&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br>    &lt;form action=&quot;DisplayHeader&quot; <span class="hljs-keyword">method</span>=&quot;get&quot;&gt;<br>        网址名：&lt;<span class="hljs-keyword">input</span> <span class="hljs-keyword">type</span>=&quot;text&quot; <span class="hljs-type">name</span>=&quot;name&quot;&gt;<br>        &lt;br /&gt;<br>        网址：&lt;<span class="hljs-keyword">input</span> <span class="hljs-keyword">type</span>=&quot;text&quot; <span class="hljs-type">name</span>=&quot;url&quot; /&gt;<br>        &lt;<span class="hljs-keyword">input</span> <span class="hljs-keyword">type</span>=&quot;checkbox&quot; <span class="hljs-type">name</span>=&quot;baidu&quot; checked=&quot;checked&quot; /&gt; 百度<br>        &lt;<span class="hljs-keyword">input</span> <span class="hljs-keyword">type</span>=&quot;checkbox&quot; <span class="hljs-type">name</span>=&quot;google&quot;  /&gt; Google<br>        &lt;<span class="hljs-keyword">input</span> <span class="hljs-keyword">type</span>=&quot;checkbox&quot; <span class="hljs-type">name</span>=&quot;taobao&quot; checked=&quot;checked&quot; /&gt; 淘宝<br>        &lt;<span class="hljs-keyword">input</span> <span class="hljs-keyword">type</span>=&quot;submit&quot; <span class="hljs-keyword">value</span>=&quot;提交&quot; /&gt;<br>    &lt;/form&gt;<br>&lt;/body&gt;<br>&lt;/html&gt;<br></code></pre></td></tr></table></figure>
<p><strong>3）、LogFilter.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> cn.ant_nest.Filter;<br><br><span class="hljs-comment">//导入必需的 java 库</span><br><span class="hljs-keyword">import</span> javax.servlet.*;<br><span class="hljs-keyword">import</span> java.util.*;<br><br><span class="hljs-comment">//实现 Filter 类</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LogFilter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Filter</span>  </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span>  <span class="hljs-title">init</span><span class="hljs-params">(FilterConfig config)</span> <span class="hljs-keyword">throws</span> ServletException </span>&#123;<br>        <span class="hljs-comment">// 获取初始化参数</span><br>        String site = config.getInitParameter(<span class="hljs-string">&quot;Site&quot;</span>);<br><br>        <span class="hljs-comment">// 输出初始化参数</span><br>        System.out.println(<span class="hljs-string">&quot;网站名称: &quot;</span> + site);<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span>  <span class="hljs-title">doFilter</span><span class="hljs-params">(ServletRequest request, ServletResponse response, FilterChain chain)</span> <span class="hljs-keyword">throws</span> java.io.IOException, ServletException </span>&#123;<br><br>        <span class="hljs-comment">// 输出站点名称</span><br>        System.out.println(<span class="hljs-string">&quot;站点网址：http://Kongwei-Liao.cn&quot;</span>);<br><br>        <span class="hljs-comment">// 把请求传回过滤链</span><br>        chain.doFilter(request,response);<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">destroy</span><span class="hljs-params">( )</span></span>&#123;<br>        <span class="hljs-comment">/* 在 Filter 实例被 Web 容器从服务移除之前调用 */</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><strong>4）、配置web.xml</strong></p>
<p>上述过滤器适用于所有的 Servlet，因为我们在配置中指定 <strong>/*</strong> 。如果您只想在少数的 Servlet 上应用过滤器，您可以指定一个具体的 Servlet 路径。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">web-app</span>&gt;</span><br>	<span class="hljs-tag">&lt;<span class="hljs-name">filter</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>LogFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">filter-class</span>&gt;</span>cn.ant_nest.Filter.LogFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-class</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">init-param</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>Site<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>练习使用过滤器<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">init-param</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">filter</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-mapping</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>LogFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/*<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">filter-mapping</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">web-app</span>&gt;</span><br></code></pre></td></tr></table></figure>
<p><img src="/.com//filt.png" srcset="/img/loading.gif"></p>
<h5 id="1-6-6、使用多个过滤器"><a href="#1-6-6、使用多个过滤器" class="headerlink" title="1.6.6、使用多个过滤器"></a>1.6.6、使用多个过滤器</h5><p>Web 应用程序可以根据特定的目的定义若干个不同的过滤器。假设您定义了两个过滤器 <em>AuthenFilter</em> 和 <em>LogFilter</em>。您需要创建一个如下所述的不同的映射，其余的处理与上述所讲解的大致相同：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">filter</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>LogFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">filter-class</span>&gt;</span>cn.ant_nest.Filter.LogFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-class</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">init-param</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>test-param<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>Initialization Paramter<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br>   <span class="hljs-tag">&lt;/<span class="hljs-name">init-param</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">filter</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>AuthenFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">filter-class</span>&gt;</span>cn.ant_nest.Filter.AuthenFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-class</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">init-param</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>test-param<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>Initialization Paramter<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br>   <span class="hljs-tag">&lt;/<span class="hljs-name">init-param</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">filter-mapping</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>LogFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/*<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter-mapping</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">filter-mapping</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>AuthenFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/*<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter-mapping</span>&gt;</span><br></code></pre></td></tr></table></figure>
<h5 id="1-6-7、多个过滤器的顺序"><a href="#1-6-7、多个过滤器的顺序" class="headerlink" title="1.6.7、多个过滤器的顺序"></a>1.6.7、多个过滤器的顺序</h5><p>web.xml 中的 filter-mapping 元素的顺序决定了 Web 容器应用过滤器到 Servlet 的顺序。若要反转过滤器的顺序，您只需要在 web.xml 文件中反转 filter-mapping 元素即可。</p>
<p>例如，上面的实例将先应用 LogFilter，然后再应用 AuthenFilter，但是下面的实例将颠倒这个顺序：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">filter-mapping</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>AuthenFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/*<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter-mapping</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">filter-mapping</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>LogFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/*<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter-mapping</span>&gt;</span><br></code></pre></td></tr></table></figure>
<h5 id="1-6-8、web-xml配置各个结点说明"><a href="#1-6-8、web-xml配置各个结点说明" class="headerlink" title="1.6.8、web.xml配置各个结点说明"></a>1.6.8、web.xml配置各个结点说明</h5><ul>
<li><p><filter>指定一个过滤器。 </filter></p>
<ul>
<li><filter-name>用于为过滤器指定一个名字，该元素的内容不能为空。</filter-name></li>
<li><filter-class>元素用于指定过滤器的完整的限定类名。</filter-class></li>
<li><init-param>元素用于为过滤器指定初始化参数，它的子元素<param-name>指定参数的名字，<param-value>指定参数的值。</param-value></param-name></init-param></li>
<li>在过滤器中，可以使用FilterConfig接口对象来访问初始化参数。</li>
</ul>
</li>
<li><p><filter-mapping>元素用于设置一个 Filter 所负责拦截的资源。一个Filter拦截的资源可通过两种方式来指定：Servlet 名称和资源访问的请求路径 </filter-mapping></p>
<ul>
<li><filter-name>子元素用于设置filter的注册名称。该值必须是在<filter>元素中声明过的过滤器的名字</filter></filter-name></li>
<li><url-pattern>设置 filter 所拦截的请求路径(过滤器关联的URL样式)</url-pattern></li>
</ul>
</li>
<li><p><servlet-name>指定过滤器所拦截的Servlet名称。</servlet-name></p>
</li>
<li><p><dispatcher>指定过滤器所拦截的资源被 Servlet 容器调用的方式，可以是REQUEST,INCLUDE,FORWARD和ERROR之一，默认REQUEST。用户可以设置多个<dispatcher>子元素用来指定 Filter 对资源的多种调用方式进行拦截。</dispatcher></dispatcher></p>
</li>
<li><p><dispatcher>子元素可以设置的值及其意义 </dispatcher></p>
<ul>
<li>REQUEST：当用户直接访问页面时，Web容器将会调用过滤器。如果目标资源是通过</li>
<li>RequestDispatcher的include()或forward()方法访问时，那么该过滤器就不会被调用。</li>
<li>INCLUDE：如果目标资源是通过RequestDispatcher的include()方法访问时，那么该过滤器将被调用。除此之外，该过滤器不会被调用。</li>
<li>FORWARD：如果目标资源是通过RequestDispatcher的forward()方法访问时，那么该过滤器将被调用，除此之外，该过滤器不会被调用。</li>
<li>ERROR：如果目标资源是通过声明式异常处理机制调用时，那么该过滤器将被调用。除此之外，过滤器不会被调用。</li>
</ul>
</li>
</ul>
<h4 id="1-7、Servlet异常处理"><a href="#1-7、Servlet异常处理" class="headerlink" title="1.7、Servlet异常处理"></a><a target="_blank" rel="noopener" href="https://www.runoob.com/servlet/servlet-exception-handling.html">1.7、Servlet异常处理</a></h4><p>当一个 Servlet 抛出一个异常时，Web 容器在使用了 exception-type 元素的 <strong>web.xml</strong> 中搜索与抛出异常类型相匹配的配置。</p>
<p>您必须在 web.xml 中使用 <strong>error-page</strong> 元素来指定对特定<strong>异常</strong> 或 HTTP <strong>状态码</strong> 作出相应的 Servlet 调用。</p>
<h5 id="1-7-1、web-xml配置"><a href="#1-7-1、web-xml配置" class="headerlink" title="1.7.1、web.xml配置"></a>1.7.1、web.xml配置</h5><p>假设，有一个 <em>ErrorHandler</em> 的 Servlet 在任何已定义的异常或错误出现时被调用。以下将是在 web.xml 中创建的项。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- servlet 定义 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>ErrorHandler<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>ErrorHandler<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br><span class="hljs-comment">&lt;!-- servlet 映射 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>ErrorHandler<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/ErrorHandler<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- error-code 相关的错误页面 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">error-page</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">error-code</span>&gt;</span>404<span class="hljs-tag">&lt;/<span class="hljs-name">error-code</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">location</span>&gt;</span>/ErrorHandler<span class="hljs-tag">&lt;/<span class="hljs-name">location</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">error-page</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">error-page</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">error-code</span>&gt;</span>403<span class="hljs-tag">&lt;/<span class="hljs-name">error-code</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">location</span>&gt;</span>/ErrorHandler<span class="hljs-tag">&lt;/<span class="hljs-name">location</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">error-page</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- exception-type 相关的错误页面 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">error-page</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">exception-type</span>&gt;</span><br>          javax.servlet.ServletException<br>    &lt;/exception-type &gt;<br>    <span class="hljs-tag">&lt;<span class="hljs-name">location</span>&gt;</span>/ErrorHandler<span class="hljs-tag">&lt;/<span class="hljs-name">location</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">error-page</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">error-page</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">exception-type</span>&gt;</span><br>    	java.io.IOException<br>    &lt;/exception-type &gt;<br>    <span class="hljs-tag">&lt;<span class="hljs-name">location</span>&gt;</span>/ErrorHandler<span class="hljs-tag">&lt;/<span class="hljs-name">location</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">error-page</span>&gt;</span><br></code></pre></td></tr></table></figure>
<p>如果您想对所有的异常有一个通用的错误处理程序，那么应该定义下面<code>java.lang.Throwable</code>的 error-page，而不是为每个异常定义单独的 error-page 元素：</p>
<figure class="highlight bnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bnf"><span class="hljs-attribute">&lt;error-page&gt;</span><br>    <span class="hljs-attribute">&lt;exception-type&gt;</span>java.lang.Throwable<span class="hljs-attribute">&lt;/exception-type &gt;</span><br>    <span class="hljs-attribute">&lt;location&gt;</span>/ErrorHandler<span class="hljs-attribute">&lt;/location&gt;</span><br><span class="hljs-attribute">&lt;/error-page&gt;</span><br></code></pre></td></tr></table></figure>
<p>以下是关于上面的 web.xml 异常处理要注意的点：</p>
<ul>
<li>Servlet ErrorHandler 与其他的 Servlet 的定义方式一样，且在 web.xml 中进行配置。</li>
<li>如果有错误状态代码出现，不管为 404（Not Found 未找到）或 403（Forbidden 禁止），则会调用 ErrorHandler 的 Servlet。</li>
<li>如果 Web 应用程序抛出 <em>ServletException</em> 或 <em>IOException</em>，那么 Web 容器会调用 ErrorHandler 的 Servlet。</li>
<li>您可以定义不同的错误处理程序来处理不同类型的错误或异常。上面的实例是非常通用的，希望您能通过实例理解基本的概念。</li>
</ul>
<h5 id="1-7-2、请求属性-错误-异常"><a href="#1-7-2、请求属性-错误-异常" class="headerlink" title="1.7.2、请求属性-错误/异常"></a>1.7.2、<code>请求属性</code>-错误/异常</h5><p>以下是错误处理的 Servlet 可以访问的请求属性列表，用来分析错误/异常的性质。</p>
<table>
<thead>
<tr>
<th align="left">序号</th>
<th align="left"><code>属性</code> &amp; 描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left"><strong>javax.servlet.error.status_code</strong> 该属性给出状态码，状态码可被存储，并在存储为 java.lang.Integer 数据类型后可被分析。</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left"><strong>javax.servlet.error.exception_type</strong> 该属性给出异常类型的信息，异常类型可被存储，并在存储为 java.lang.Class 数据类型后可被分析。</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left"><strong>javax.servlet.error.message</strong> 该属性给出确切错误消息的信息，信息可被存储，并在存储为 java.lang.String 数据类型后可被分析。</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left"><strong>javax.servlet.error.request_uri</strong> 该属性给出有关 URL 调用 Servlet 的信息，信息可被存储，并在存储为 java.lang.String 数据类型后可被分析。</td>
</tr>
<tr>
<td align="left">5</td>
<td align="left"><strong>javax.servlet.error.exception</strong> 该属性给出异常产生的信息，信息可被存储，并在存储为 java.lang.Throwable 数据类型后可被分析。</td>
</tr>
<tr>
<td align="left">6</td>
<td align="left"><strong>javax.servlet.error.servlet_name</strong> 该属性给出 Servlet 的名称，名称可被存储，并在存储为 java.lang.String 数据类型后可被分析。</td>
</tr>
</tbody></table>
<h5 id="1-7-3、Servlet错误处理程序"><a href="#1-7-3、Servlet错误处理程序" class="headerlink" title="1.7.3、Servlet错误处理程序"></a>1.7.3、Servlet错误处理程序</h5><p>以下是 Servlet 实例，将应对任何您所定义的错误或异常发生时的错误处理程序。</p>
<p>本实例让您对 Servlet 中的异常处理有基本的了解，您可以使用相同的概念编写更复杂的异常处理应用程序：</p>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs processing"><span class="hljs-comment">//扩展 HttpServlet 类</span><br><span class="hljs-keyword">public</span> class ErrorHandler extends HttpServlet &#123;<br><br>    <span class="hljs-comment">// 处理 GET 方法请求的方法</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> doGet(HttpServletRequest request, HttpServletResponse response) <span class="hljs-keyword">throws</span> ServletException, IOException<br>    &#123;<br>        Throwable throwable = (Throwable)<br>        request.getAttribute(<span class="hljs-string">&quot;javax.servlet.error.exception&quot;</span>);<span class="hljs-comment">//1.7.2的请求属性</span><br>        Integer statusCode = (Integer)<br>        request.getAttribute(<span class="hljs-string">&quot;javax.servlet.error.status_code&quot;</span>);<br>        <span class="hljs-keyword">String</span> servletName = (<span class="hljs-keyword">String</span>)<br>        request.getAttribute(<span class="hljs-string">&quot;javax.servlet.error.servlet_name&quot;</span>);<br>        <span class="hljs-keyword">if</span> (servletName == <span class="hljs-keyword">null</span>)&#123;<br>            servletName = <span class="hljs-string">&quot;Unknown&quot;</span>;<br>        &#125;<br>        <span class="hljs-keyword">String</span> requestUri = (<span class="hljs-keyword">String</span>)<br>        request.getAttribute(<span class="hljs-string">&quot;javax.servlet.error.request_uri&quot;</span>);<br>        <span class="hljs-keyword">if</span> (requestUri == <span class="hljs-keyword">null</span>)&#123;<br>            requestUri = <span class="hljs-string">&quot;Unknown&quot;</span>;<br>        &#125;<br>        <span class="hljs-comment">// 设置响应内容类型</span><br>        response.setContentType(<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span>);<br>    <br>        PrintWriter out = response.getWriter();<br>        <span class="hljs-keyword">String</span> title = <span class="hljs-string">&quot;Error/Exception 信息&quot;</span>;<br>       <br>        <span class="hljs-keyword">String</span> docType = <span class="hljs-string">&quot;&lt;!DOCTYPE html&gt;\n&quot;</span>;<br>        out.<span class="hljs-built_in">println</span>(docType +<br>            <span class="hljs-string">&quot;&lt;html&gt;\n&quot;</span> +<br>             <span class="hljs-string">&quot;&lt;head&gt;&lt;title&gt;&quot;</span> + title + <span class="hljs-string">&quot;&lt;/title&gt;&lt;/head&gt;\n&quot;</span> +<br>             <span class="hljs-string">&quot;&lt;body bgcolor=\&quot;#f0f0f0\&quot;&gt;\n&quot;</span>);<br>           out.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;&lt;h1&gt;异常信息实例演示&lt;/h1&gt;&quot;</span>);<br>           <span class="hljs-keyword">if</span> (throwable == <span class="hljs-keyword">null</span> &amp;&amp; statusCode == <span class="hljs-keyword">null</span>)&#123;<br>              out.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;&lt;h2&gt;错误信息丢失&lt;/h2&gt;&quot;</span>);<br>              out.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;请返回 &lt;a href=\&quot;&quot;</span> + <br>            response.encodeURL(<span class="hljs-string">&quot;http://localhost:8080/&quot;</span>) + <br>                <span class="hljs-string">&quot;\&quot;&gt;主页&lt;/a&gt;。&quot;</span>);<br>           &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (statusCode != <span class="hljs-keyword">null</span>) &#123;<br>              out.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;错误代码 : &quot;</span> + statusCode);<br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>               out.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;&lt;h2&gt;错误信息&lt;/h2&gt;&quot;</span>);<br>              out.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;Servlet Name : &quot;</span> + servletName + <br>                              <span class="hljs-string">&quot;&lt;/br&gt;&lt;/br&gt;&quot;</span>);<br>              out.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;异常类型 : &quot;</span> + <br>                              throwable.getClass( ).getName( ) + <br>                              <span class="hljs-string">&quot;&lt;/br&gt;&lt;/br&gt;&quot;</span>);<br>              out.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;请求 URI: &quot;</span> + requestUri + <br>                              <span class="hljs-string">&quot;&lt;br&gt;&lt;br&gt;&quot;</span>);<br>              out.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;异常信息: &quot;</span> + <br>                                  throwable.getMessage( ));<br>           &#125;<br>           out.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;&lt;/body&gt;&quot;</span>);<br>           out.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;&lt;/html&gt;&quot;</span>);<br>    &#125;<br>    <span class="hljs-comment">// 处理 POST 方法请求的方法</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> doPost(HttpServletRequest request,<br>                      HttpServletResponse response)<br>       <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        doGet(request, response);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>




<h4 id="1-8、Servlet-Cookies处理"><a href="#1-8、Servlet-Cookies处理" class="headerlink" title="1.8、Servlet Cookies处理"></a>1.8、Servlet Cookies处理</h4><p>Cookie 是存储在客户端计算机上的文本文件，并保留了各种跟踪信息。Java Servlet 显然支持 HTTP Cookie。</p>
<p>识别返回用户包括三个步骤：</p>
<ul>
<li>服务器脚本向浏览器发送一组 Cookie。例如：姓名、年龄或识别号码等。</li>
<li>浏览器将这些信息存储在本地计算机上，以备将来使用。</li>
<li>当下一次浏览器向 Web 服务器发送任何请求时，浏览器会把这些 Cookie 信息发送到服务器，服务器将使用这些信息来识别用户。</li>
</ul>
<p>Cookie 通常设置在 HTTP 头信息中（虽然 JavaScript 也可以直接在浏览器上设置一个 Cookie）。设置 Cookie 的 Servlet 会发送如下的头信息：</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">HTTP</span>/<span class="hljs-number">1</span>.<span class="hljs-number">1</span> <span class="hljs-number">200</span> OK<br><span class="hljs-attribute">Date</span>: Fri, <span class="hljs-number">04</span> Feb <span class="hljs-number">2000</span> <span class="hljs-number">21</span>:<span class="hljs-number">03</span>:<span class="hljs-number">38</span> GMT<br><span class="hljs-attribute">Server</span>: Apache/<span class="hljs-number">1</span>.<span class="hljs-number">3</span>.<span class="hljs-number">9</span> (UNIX) PHP/<span class="hljs-number">4</span>.<span class="hljs-number">0</span>b<span class="hljs-number">3</span><br><span class="hljs-attribute">Set</span>-Cookie: name=xyz; expires=Friday, <span class="hljs-number">04</span>-Feb-<span class="hljs-number">07</span> <span class="hljs-number">22</span>:<span class="hljs-number">03</span>:<span class="hljs-number">38</span> GMT; <br>                 <span class="hljs-attribute">path</span>=/; domain=Kongwei-Liao.cn<br><span class="hljs-attribute">Connection</span>: close<br><span class="hljs-attribute">Content</span>-Type: text/html<br></code></pre></td></tr></table></figure>
<p>正如您所看到的，Set-Cookie 头包含了一个名称值对、一个 GMT 日期、一个路径和一个域。名称和值会被 URL 编码。expires 字段是一个指令，告诉浏览器在给定的时间和日期之后”忘记”该 Cookie。</p>
<p>如果浏览器被配置为存储 Cookie，它将会保留此信息直到到期日期。如果用户的浏览器指向任何匹配该 Cookie 的路径和域的页面，它会重新发送 Cookie 到服务器。浏览器的头信息可能如下所示：</p>
<figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-keyword">GET</span> <span class="hljs-string">/</span> <span class="hljs-meta">HTTP/1.0</span><br><span class="hljs-attribute">Connection</span><span class="hljs-punctuation">: </span>Keep-Alive<br><span class="hljs-attribute">User-Agent</span><span class="hljs-punctuation">: </span>Mozilla/4.6 (X11; I; Linux 2.2.6-15apmac ppc)<br><span class="hljs-attribute">Host</span><span class="hljs-punctuation">: </span>zink.demon.co.uk:1126<br><span class="hljs-attribute">Accept</span><span class="hljs-punctuation">: </span>image/gif, */*<br><span class="hljs-attribute">Accept-Encoding</span><span class="hljs-punctuation">: </span>gzip<br><span class="hljs-attribute">Accept-Language</span><span class="hljs-punctuation">: </span>en<br><span class="hljs-attribute">Accept-Charset</span><span class="hljs-punctuation">: </span>iso-8859-1,*,utf-8<br><span class="hljs-attribute">Cookie</span><span class="hljs-punctuation">: </span>name=xyz<br></code></pre></td></tr></table></figure>
<p>Servlet 就能够通过请求方法 <code>request.getCookies()</code> 访问 Cookie，该方法将返回一个 <em>Cookie</em> 对象的数组。</p>
<p>以下是在 Servlet 中操作 Cookie 时可使用的有用的方法列表。</p>
<table>
<thead>
<tr>
<th align="left">序号</th>
<th align="left">方法 &amp; 描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left"><strong>public void setDomain(String pattern)</strong> 该方法设置 cookie 适用的域，例如 runoob.com。</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left"><strong>public String getDomain()</strong> 该方法获取 cookie 适用的域，例如 runoob.com。</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left"><strong>public void setMaxAge(int expiry)</strong> 该方法设置 cookie 过期的时间（以秒为单位）。如果不这样设置，cookie 只会在当前 session 会话中持续有效。</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left"><strong>public int getMaxAge()</strong> 该方法返回 cookie 的最大生存周期（以秒为单位），默认情况下，-1 表示 cookie 将持续下去，直到浏览器关闭。</td>
</tr>
<tr>
<td align="left">5</td>
<td align="left"><strong>public String getName()</strong> 该方法返回 cookie 的名称。名称在创建后不能改变。</td>
</tr>
<tr>
<td align="left">6</td>
<td align="left"><strong>public void setValue(String newValue)</strong> 该方法设置与 cookie 关联的值。</td>
</tr>
<tr>
<td align="left">7</td>
<td align="left"><strong>public String getValue()</strong> 该方法获取与 cookie 关联的值。</td>
</tr>
<tr>
<td align="left">8</td>
<td align="left"><strong>public void setPath(String uri)</strong> 该方法设置 cookie 适用的路径。如果您不指定路径，与当前页面相同目录下的（包括子目录下的）所有 URL 都会返回 cookie。</td>
</tr>
<tr>
<td align="left">9</td>
<td align="left"><strong>public String getPath()</strong> 该方法获取 cookie 适用的路径。</td>
</tr>
<tr>
<td align="left">10</td>
<td align="left"><strong>public void setSecure(boolean flag)</strong> 该方法设置布尔值，表示 cookie 是否应该只在加密的（即 SSL）连接上发送。</td>
</tr>
<tr>
<td align="left">11</td>
<td align="left"><strong>public void setComment(String purpose)</strong> 设置cookie的注释。该注释在浏览器向用户呈现 cookie 时非常有用。</td>
</tr>
<tr>
<td align="left">12</td>
<td align="left"><strong>public String getComment()</strong> 获取 cookie 的注释，如果 cookie 没有注释则返回 null。</td>
</tr>
</tbody></table>
<p>通过 Servlet 设置 Cookie 的步骤：</p>
<h5 id="1-8-1、创建一个-Cookie-对象："><a href="#1-8-1、创建一个-Cookie-对象：" class="headerlink" title="1.8.1、创建一个 Cookie 对象："></a><strong>1.8.1、创建一个 Cookie 对象：</strong></h5><p>您可以调用带有 cookie 名称和 cookie 值的 Cookie 构造函数，cookie 名称和 cookie 值都是字符串。</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">Cookie cookie</span> = new Cookie(<span class="hljs-string">&quot;key&quot;</span>,<span class="hljs-string">&quot;value&quot;</span>);<br></code></pre></td></tr></table></figure>
<p>请记住，无论是名字还是值，都不应该包含空格或以下任何字符：</p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c">[ ] ( ) = , <span class="hljs-string">&quot; / ? @ : ;</span><br></code></pre></td></tr></table></figure>
<h5 id="1-8-2、-设置最大生存周期："><a href="#1-8-2、-设置最大生存周期：" class="headerlink" title="1.8.2、 设置最大生存周期："></a><strong>1.8.2、 设置最大生存周期：</strong></h5><p>您可以使用 setMaxAge 方法来指定 cookie 能够保持有效的时间（以秒为单位）。下面将设置一个最长有效期为 24 小时的 cookie。</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">cookie</span>.setMaxAge(<span class="hljs-number">60</span>*<span class="hljs-number">60</span>*<span class="hljs-number">24</span>); <br></code></pre></td></tr></table></figure>
<h5 id="1-8-3、-发送-Cookie-到-HTTP-响应头："><a href="#1-8-3、-发送-Cookie-到-HTTP-响应头：" class="headerlink" title="1.8.3、 发送 Cookie 到 HTTP 响应头："></a><strong>1.8.3、 发送 Cookie 到 HTTP 响应头：</strong></h5><p>您可以使用 <strong>response.addCookie</strong> 来添加 HTTP 响应头中的 Cookie，如下所示：</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">response.add<span class="hljs-constructor">Cookie(<span class="hljs-params">cookie</span>)</span>;<br></code></pre></td></tr></table></figure>
<h5 id="1-8-4、要读取-Cookie"><a href="#1-8-4、要读取-Cookie" class="headerlink" title="1.8.4、要读取 Cookie"></a><strong>1.8.4、要读取 Cookie</strong></h5><p>您需要通过调用 <em>HttpServletRequest</em> 的 <strong>getCookies( )</strong> 方法创建一个 <em>javax.servlet.http.Cookie</em> 对象的数组。然后循环遍历数组，并使用 getName() 和 getValue() 方法来访问每个 cookie 和关联的值。</p>
<h5 id="1-8-5、删除Cookie："><a href="#1-8-5、删除Cookie：" class="headerlink" title="1.8.5、删除Cookie："></a><strong>1.8.5、删除Cookie：</strong></h5><p>1、读取一个现有的 cookie；</p>
<p>2、使用 <strong>setMaxAge()</strong> 方法设置 cookie 的年龄为零</p>
<p>3、把这个 cookie 添加到响应头。</p>
<h4 id="1-9、Servlet-Session跟踪"><a href="#1-9、Servlet-Session跟踪" class="headerlink" title="1.9、Servlet Session跟踪"></a>1.9、Servlet Session跟踪</h4><p>HTTP 是一种”无状态”协议，这意味着每次客户端检索网页时，客户端打开一个单独的连接到 Web 服务器，服务器会自动不保留之前客户端请求的任何记录。</p>
<p>Servlet 提供了 HttpSession 接口，该接口提供了一种跨多个页面请求或访问网站时识别用户以及存储有关用户信息的方式。</p>
<p>Servlet 容器使用这个接口来创建一个 HTTP 客户端和 HTTP 服务器之间的 session 会话。会话持续一个指定的时间段，跨多个连接或页面请求。</p>
<h5 id="1-9-1、Session对象获取"><a href="#1-9-1、Session对象获取" class="headerlink" title="1.9.1、Session对象获取"></a>1.9.1、Session对象获取</h5><p>通过调用 HttpServletRequest 的公共方法 <strong>getSession()</strong> 来获取 HttpSession 对象，如下所示：</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">HttpSession session = request.getSession()<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure>
<p>注：你需要在向客户端发送任何文档内容之前调用 <em>request.getSession()<em>。</em></em>？？？**</p>
<h5 id="1-9-2、HttpSession-对象中可用的几个重要的方法"><a href="#1-9-2、HttpSession-对象中可用的几个重要的方法" class="headerlink" title="1.9.2、HttpSession 对象中可用的几个重要的方法"></a>1.9.2、HttpSession 对象中可用的几个重要的方法</h5><table>
<thead>
<tr>
<th align="left">序号</th>
<th align="left">方法 &amp; 描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left"><strong>public Object getAttribute(String name)</strong> 该方法返回在该 session 会话中具有指定名称的对象，如果没有指定名称的对象，则返回 null。</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left"><strong>public Enumeration getAttributeNames()</strong> 该方法返回 String 对象的枚举，String 对象包含所有绑定到该 session 会话的对象的名称。</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left"><strong>public long getCreationTime()</strong> 该方法返回该 session 会话被创建的时间，自格林尼治标准时间 1970 年 1 月 1 日午夜算起，以毫秒为单位。</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left"><strong>public String getId()</strong> 该方法返回一个包含分配给该 session 会话的唯一标识符的字符串。</td>
</tr>
<tr>
<td align="left">5</td>
<td align="left"><strong>public long getLastAccessedTime()</strong> 该方法返回客户端最后一次发送与该 session 会话相关的请求的时间自格林尼治标准时间 1970 年 1 月 1 日午夜算起，以毫秒为单位。</td>
</tr>
<tr>
<td align="left">6</td>
<td align="left"><strong>public int getMaxInactiveInterval()</strong> 该方法返回 Servlet 容器在客户端访问时保持 session 会话打开的最大时间间隔，以秒为单位。</td>
</tr>
<tr>
<td align="left">7</td>
<td align="left"><strong>public void invalidate()</strong> 该方法指示该 session 会话无效，并解除绑定到它上面的任何对象。</td>
</tr>
<tr>
<td align="left">8</td>
<td align="left"><strong>public boolean isNew()</strong> 如果<strong>客户端还不知道该 session 会话</strong>，或者如果客户选择不参入该 session 会话，则该方法返回 true。</td>
</tr>
<tr>
<td align="left">9</td>
<td align="left"><strong>public void removeAttribute(String name)</strong> 该方法将从该 session 会话移除指定名称的对象。</td>
</tr>
<tr>
<td align="left">10</td>
<td align="left"><strong>public void setAttribute(String name, Object value)</strong>  该方法使用指定的名称绑定一个对象到该 session 会话。</td>
</tr>
<tr>
<td align="left">11</td>
<td align="left"><strong>public void setMaxInactiveInterval(int interval)</strong> 该方法在 Servlet 容器指示该 session 会话无效之前，指定客户端请求之间的时间，以秒为单位。</td>
</tr>
</tbody></table>
<h5 id="1-9-3、删除Session会话数据"><a href="#1-9-3、删除Session会话数据" class="headerlink" title="1.9.3、删除Session会话数据"></a>1.9.3、删除Session会话数据</h5><p>当您完成了一个用户的 session 会话数据，您有以下几种选择：</p>
<ul>
<li><strong>移除一个特定的属性：</strong>您可以调用 <em>public void removeAttribute(String name)</em> 方法来删除与特定的键相关联的值。</li>
<li><strong>删除整个 session 会话：</strong>您可以调用 <em>public void invalidate()</em> 方法来丢弃整个 session 会话。</li>
<li><strong>设置 session 会话过期时间：</strong>您可以调用 <em>public void setMaxInactiveInterval(int interval)</em> 方法来单独设置 session 会话超时。</li>
<li><strong>注销用户：</strong>如果使用的是支持 servlet 2.4 的服务器，您可以调用 <strong>logout</strong> 来注销 Web 服务器的客户端，并把属于所有用户的所有 session 会话设置为无效。</li>
<li><strong>web.xml 配置：</strong>如果您使用的是 Tomcat，除了上述方法，您还可以在 web.xml 文件中配置 session 会话超时，如下所示：</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">session-config</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">session-timeout</span>&gt;</span>15<span class="hljs-tag">&lt;/<span class="hljs-name">session-timeout</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">session-config</span>&gt;</span><br></code></pre></td></tr></table></figure>
<p>上面实例中的超时时间是<strong>以分钟为单位</strong>，将覆盖 Tomcat 中默认的 30 分钟超时时间。</p>
<p>在一个 Servlet 中的 getMaxInactiveInterval() 方法会返回 session 会话的超时时间，<strong>以秒为单位</strong>。所以，如果在 web.xml 中配置 session 会话超时时间为 15 分钟，那么 getMaxInactiveInterval() 会返回 900。</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">@<span class="hljs-constructor">WebServlet(<span class="hljs-string">&quot;/SessionTrack&quot;</span>)</span><br>public <span class="hljs-keyword">class</span> SessionTrack extends HttpServlet &#123;<br>    <span class="hljs-keyword">private</span> static final long serialVersionUID = <span class="hljs-number">1L</span>;<br><br>    public void <span class="hljs-keyword">do</span><span class="hljs-constructor">Get(HttpServletRequest <span class="hljs-params">request</span>, HttpServletResponse <span class="hljs-params">response</span>)</span> throws ServletException, IOException<br>    &#123;<br>        <span class="hljs-comment">// 如果不存在 session 会话，则创建一个 session 对象</span><br>        HttpSession session = request.get<span class="hljs-constructor">Session(<span class="hljs-params">true</span>)</span>;<br>        <span class="hljs-comment">// 获取 session 创建时间</span><br>        Date createTime = <span class="hljs-keyword">new</span> <span class="hljs-constructor">Date(<span class="hljs-params">session</span>.<span class="hljs-params">getCreationTime</span>()</span>);<br>        <span class="hljs-comment">// 获取该网页的最后一次访问时间</span><br>        Date lastAccessTime = <span class="hljs-keyword">new</span> <span class="hljs-constructor">Date(<span class="hljs-params">session</span>.<span class="hljs-params">getLastAccessedTime</span>()</span>);<br><br>        <span class="hljs-comment">//设置日期输出的格式  </span><br>        SimpleDateFormat df=<span class="hljs-keyword">new</span> <span class="hljs-constructor">SimpleDateFormat(<span class="hljs-string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>)</span>;<br><br>        String title = <span class="hljs-string">&quot;Servlet Session 实例 - 菜鸟教程&quot;</span>;<br>        Integer visitCount = <span class="hljs-keyword">new</span> <span class="hljs-constructor">Integer(0)</span>;<br>        String visitCountKey = <span class="hljs-keyword">new</span> <span class="hljs-constructor">String(<span class="hljs-string">&quot;visitCount&quot;</span>)</span>;<br>        String userIDKey = <span class="hljs-keyword">new</span> <span class="hljs-constructor">String(<span class="hljs-string">&quot;userID&quot;</span>)</span>;<br>        String userID = <span class="hljs-keyword">new</span> <span class="hljs-constructor">String(<span class="hljs-string">&quot;Runoob&quot;</span>)</span>;<br>        <span class="hljs-keyword">if</span>(session.get<span class="hljs-constructor">Attribute(<span class="hljs-params">visitCountKey</span>)</span><span class="hljs-operator"> == </span>null) &#123;<br>            session.set<span class="hljs-constructor">Attribute(<span class="hljs-params">visitCountKey</span>, <span class="hljs-params">new</span> Integer(0)</span>);<br>        &#125;<br><br><br>        <span class="hljs-comment">// 检查网页上是否有新的访问者</span><br>        <span class="hljs-keyword">if</span> (session.is<span class="hljs-constructor">New()</span>)&#123;<br>            title = <span class="hljs-string">&quot;Servlet Session 实例 - 菜鸟教程&quot;</span>;<br>            session.set<span class="hljs-constructor">Attribute(<span class="hljs-params">userIDKey</span>, <span class="hljs-params">userID</span>)</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            visitCount = (Integer)session.get<span class="hljs-constructor">Attribute(<span class="hljs-params">visitCountKey</span>)</span>;<br>            visitCount = visitCount + <span class="hljs-number">1</span>;<br>            userID = (String)session.get<span class="hljs-constructor">Attribute(<span class="hljs-params">userIDKey</span>)</span>;<br>        &#125;<br>        session.set<span class="hljs-constructor">Attribute(<span class="hljs-params">visitCountKey</span>,  <span class="hljs-params">visitCount</span>)</span>;<br><br>        <span class="hljs-comment">// 设置响应内容类型</span><br>        response.set<span class="hljs-constructor">ContentType(<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span>)</span>;<br>        PrintWriter out = response.get<span class="hljs-constructor">Writer()</span>;<br><br>        String docType = <span class="hljs-string">&quot;&lt;!DOCTYPE html&gt;\n&quot;</span>;<br>        out.println(docType +<br>                <span class="hljs-string">&quot;&lt;html&gt;\n&quot;</span> +<br>                <span class="hljs-string">&quot;&lt;head&gt;&lt;title&gt;&quot;</span> + title + <span class="hljs-string">&quot;&lt;/title&gt;&lt;/head&gt;\n&quot;</span> +<br>                <span class="hljs-string">&quot;&lt;body bgcolor=\&quot;#f0f0f0\&quot;&gt;\n&quot;</span> +<br>                <span class="hljs-string">&quot;&lt;h1 align=\&quot;center\&quot;&gt;&quot;</span> + title + <span class="hljs-string">&quot;&lt;/h1&gt;\n&quot;</span> +<br>                <span class="hljs-string">&quot;&lt;h2 align=\&quot;center\&quot;&gt;Session 信息&lt;/h2&gt;\n&quot;</span> +<br>                <span class="hljs-string">&quot;&lt;table border=\&quot;1\&quot; align=\&quot;center\&quot;&gt;\n&quot;</span> +<br>                <span class="hljs-string">&quot;&lt;tr bgcolor=\&quot;#949494\&quot;&gt;\n&quot;</span> +<br>                <span class="hljs-string">&quot;  &lt;th&gt;Session 信息&lt;/th&gt;&lt;th&gt;值&lt;/th&gt;&lt;/tr&gt;\n&quot;</span> +<br>                <span class="hljs-string">&quot;&lt;tr&gt;\n&quot;</span> +<br>                <span class="hljs-string">&quot;  &lt;td&gt;id&lt;/td&gt;\n&quot;</span> +<br>                <span class="hljs-string">&quot;  &lt;td&gt;&quot;</span> + session.get<span class="hljs-constructor">Id()</span> + <span class="hljs-string">&quot;&lt;/td&gt;&lt;/tr&gt;\n&quot;</span> +<br>                <span class="hljs-string">&quot;&lt;tr&gt;\n&quot;</span> +<br>                <span class="hljs-string">&quot;  &lt;td&gt;创建时间&lt;/td&gt;\n&quot;</span> +<br>                <span class="hljs-string">&quot;  &lt;td&gt;&quot;</span> +  df.format(createTime) +<br>                <span class="hljs-string">&quot;  &lt;/td&gt;&lt;/tr&gt;\n&quot;</span> +<br>                <span class="hljs-string">&quot;&lt;tr&gt;\n&quot;</span> +<br>                <span class="hljs-string">&quot;  &lt;td&gt;最后访问时间&lt;/td&gt;\n&quot;</span> +<br>                <span class="hljs-string">&quot;  &lt;td&gt;&quot;</span> + df.format(lastAccessTime) +<br>                <span class="hljs-string">&quot;  &lt;/td&gt;&lt;/tr&gt;\n&quot;</span> +<br>                <span class="hljs-string">&quot;&lt;tr&gt;\n&quot;</span> +<br>                <span class="hljs-string">&quot;  &lt;td&gt;用户 ID&lt;/td&gt;\n&quot;</span> +<br>                <span class="hljs-string">&quot;  &lt;td&gt;&quot;</span> + userID +<br>                <span class="hljs-string">&quot;  &lt;/td&gt;&lt;/tr&gt;\n&quot;</span> +<br>                <span class="hljs-string">&quot;&lt;tr&gt;\n&quot;</span> +<br>                <span class="hljs-string">&quot;  &lt;td&gt;访问统计：&lt;/td&gt;\n&quot;</span> +<br>                <span class="hljs-string">&quot;  &lt;td&gt;&quot;</span> + visitCount + <span class="hljs-string">&quot;&lt;/td&gt;&lt;/tr&gt;\n&quot;</span> +<br>                <span class="hljs-string">&quot;&lt;/table&gt;\n&quot;</span> +<br>                <span class="hljs-string">&quot;&lt;/body&gt;&lt;/html&gt;&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>


<h4 id="1-10、Servlet数据库访问"><a href="#1-10、Servlet数据库访问" class="headerlink" title="1.10、Servlet数据库访问"></a>1.10、Servlet数据库访问</h4><p>在 java 项目中，只需要在 Eclipse 中引入 mysql-connector-java-5.1.39-bin.jar 就可以运行java项目。 但是在 Eclipse web 项目中，当执行 Class.forName(“com.mysql.jdbc.Driver”);时不会去查找驱动的。所以本实例中我们需要把 mysql-connector-java-5.1.39-bin.jar 拷贝到<code> tomcat下lib目录</code>。</p>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><code class="hljs processing">@WebServlet(<span class="hljs-string">&quot;/DatabaseAccess&quot;</span>)<br><span class="hljs-keyword">public</span> class DatabaseAccess extends HttpServlet &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">long</span> serialVersionUID = <span class="hljs-number">1</span>L;<br>    <span class="hljs-comment">// JDBC 驱动名及数据库 URL</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">String</span> JDBC_DRIVER = <span class="hljs-string">&quot;com.mysql.jdbc.Driver&quot;</span>;  <br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">String</span> DB_URL = <span class="hljs-string">&quot;jdbc:mysql://localhost:3306/Train&quot;</span>;<br>    <br>    <span class="hljs-comment">// 数据库的用户名与密码，需要根据自己的设置</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">String</span> USER = <span class="hljs-string">&quot;root&quot;</span>;<br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">String</span> PASS = <span class="hljs-string">&quot;123456&quot;</span>; <br><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> doGet(HttpServletRequest request, HttpServletResponse response) <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        Connection conn = <span class="hljs-keyword">null</span>;<br>        Statement stmt = <span class="hljs-keyword">null</span>;<br>        <span class="hljs-comment">// 设置响应内容类型</span><br>        response.setContentType(<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span>);<br>        PrintWriter out = response.getWriter();<br>        <span class="hljs-keyword">String</span> title = <span class="hljs-string">&quot;Servlet Mysql 测试&quot;</span>;<br>        <span class="hljs-keyword">String</span> docType = <span class="hljs-string">&quot;&lt;!DOCTYPE html&gt;\n&quot;</span>;<br>        out.<span class="hljs-built_in">println</span>(docType +<br>        <span class="hljs-string">&quot;&lt;html&gt;\n&quot;</span> +<br>        <span class="hljs-string">&quot;&lt;head&gt;&lt;title&gt;&quot;</span> + title + <span class="hljs-string">&quot;&lt;/title&gt;&lt;/head&gt;\n&quot;</span> +<br>        <span class="hljs-string">&quot;&lt;body bgcolor=\&quot;#f0f0f0\&quot;&gt;\n&quot;</span> +<br>        <span class="hljs-string">&quot;&lt;h1 align=\&quot;center\&quot;&gt;&quot;</span> + title + <span class="hljs-string">&quot;&lt;/h1&gt;\n&quot;</span>);<br>        <span class="hljs-keyword">try</span>&#123;<br>            <span class="hljs-comment">// 注册 JDBC 驱动器</span><br>            Class.forName(<span class="hljs-string">&quot;com.mysql.jdbc.Driver&quot;</span>);<br>            <br>            <span class="hljs-comment">// 打开一个连接</span><br>            conn = DriverManager.getConnection(DB_URL,USER,PASS);<br><br>            <span class="hljs-comment">// 执行 SQL 查询</span><br>            stmt = conn.createStatement();<br>            <span class="hljs-keyword">String</span> sql;<br>            sql = <span class="hljs-string">&quot;SELECT id, name, url FROM websites&quot;</span>;<br>            ResultSet rs = stmt.executeQuery(sql);<br><br>            <span class="hljs-comment">// 展开结果集数据库</span><br>            <span class="hljs-keyword">while</span>(rs.next())&#123;<br>                <span class="hljs-comment">// 通过字段检索</span><br>                <span class="hljs-built_in">int</span> id  = rs.getInt(<span class="hljs-string">&quot;id&quot;</span>);<br>                <span class="hljs-keyword">String</span> name = rs.getString(<span class="hljs-string">&quot;name&quot;</span>);<br>                <span class="hljs-keyword">String</span> url = rs.getString(<span class="hljs-string">&quot;url&quot;</span>);<br>    <br>                <span class="hljs-comment">// 输出数据</span><br>                out.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;ID: &quot;</span> + id);<br>                out.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;, 站点名称: &quot;</span> + name);<br>                out.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;, 站点 URL: &quot;</span> + url);<br>                out.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;&lt;br /&gt;&quot;</span>);<br>            &#125;<br>            out.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;&lt;/body&gt;&lt;/html&gt;&quot;</span>);<br><br>            <span class="hljs-comment">// 完成后关闭</span><br>            rs.close();<br>            stmt.close();<br>            conn.close();<br>        &#125; <span class="hljs-keyword">catch</span>(SQLException se) &#123;<br>            <span class="hljs-comment">// 处理 JDBC 错误</span><br>            se.printStackTrace();<br>        &#125; <span class="hljs-keyword">catch</span>(Exception e) &#123;<br>            <span class="hljs-comment">// 处理 Class.forName 错误</span><br>            e.printStackTrace();<br>        &#125;<span class="hljs-keyword">finally</span>&#123;<br>            <span class="hljs-comment">// 最后是用于关闭资源的块</span><br>            <span class="hljs-keyword">try</span>&#123;<br>                <span class="hljs-keyword">if</span>(stmt!=<span class="hljs-keyword">null</span>)<br>                stmt.close();<br>            &#125;<span class="hljs-keyword">catch</span>(SQLException se2)&#123;<br>            &#125;<br>            <span class="hljs-keyword">try</span>&#123;<br>                <span class="hljs-keyword">if</span>(conn!=<span class="hljs-keyword">null</span>)<br>                conn.close();<br>            &#125;<span class="hljs-keyword">catch</span>(SQLException se)&#123;<br>                se.printStackTrace();<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h4 id="1-11、Servlet文件上传"><a href="#1-11、Servlet文件上传" class="headerlink" title="1.11、Servlet文件上传"></a>1.11、Servlet文件上传</h4><p>Servlet 可以与 HTML form 标签一起使用，来允许用户上传文件到服务器。上传的文件可以是文本文件或图像文件或任何文档。</p>
<p>需要引入的 jar 文件：commons-fileupload-1.3.2、commons-io-2.5.jar。</p>
<p><strong>注意：</strong>Servlet3.0 已经内置了文件上传这一特性，开发者不再需要将 Commons FileUpload 组件导入到工程中去。</p>
<p>案例：</p>
<h5 id="第一步创建一个文件上传表单"><a href="#第一步创建一个文件上传表单" class="headerlink" title="第一步创建一个文件上传表单"></a>第一步创建一个文件上传表单</h5><ul>
<li>表单 <strong>method</strong> 属性应该设置为 <strong>POST</strong> 方法，不能使用 GET 方法。</li>
<li>表单 <strong>enctype</strong> 属性应该设置为 <strong>multipart/form-data</strong>.</li>
<li>表单 <strong>action</strong> 属性应该设置为在后端服务器上处理文件上传的 Servlet 文件。下面的实例使用了 <strong>UploadServlet</strong> Servlet 来上传文件。</li>
<li>上传单个文件，您应该使用单个带有属性 type=”file” 的 &lt;input …/&gt; 标签。为了允许多个文件上传，请包含多个 name 属性值不同的 input 标签。输入标签具有不同的名称属性的值。浏览器会为每个 input 标签关联一个浏览按钮。</li>
</ul>
<p>upload.jsp代码</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs stata">&lt;<span class="hljs-keyword">form</span> method=<span class="hljs-string">&quot;post&quot;</span> action=<span class="hljs-string">&quot;/TomcatTest/UploadServlet&quot;</span> enctype=<span class="hljs-string">&quot;multipart/form-data&quot;</span>&gt;<br>    选择一个文件:<br>    &lt;<span class="hljs-keyword">input</span> <span class="hljs-keyword">type</span>=<span class="hljs-string">&quot;file&quot;</span> name=<span class="hljs-string">&quot;uploadFile&quot;</span> /&gt;<br>    &lt;<span class="hljs-keyword">br</span>/&gt;&lt;<span class="hljs-keyword">br</span>/&gt;<br>    &lt;<span class="hljs-keyword">input</span> <span class="hljs-keyword">type</span>=<span class="hljs-string">&quot;submit&quot;</span> value=<span class="hljs-string">&quot;上传&quot;</span> /&gt;<br>&lt;/<span class="hljs-keyword">form</span>&gt;<br></code></pre></td></tr></table></figure>
<h5 id="第二步编写后台Servlet"><a href="#第二步编写后台Servlet" class="headerlink" title="第二步编写后台Servlet"></a>第二步编写后台Servlet</h5><p>以下是 UploadServlet 的源代码，同于处理文件上传，在这之前我们先确保依赖包已经引入到项目的 WEB-INF/lib 目录下： </p>
<ul>
<li>下面的实例依赖于 FileUpload，所以一定要确保在您的 classpath 中有最新版本的 <strong>commons-fileupload.x.x.jar</strong> 文件。可以从 <a target="_blank" rel="noopener" href="http://commons.apache.org/proper/commons-fileupload/">http://commons.apache.org/proper/commons-fileupload/</a> 下载。</li>
<li>FileUpload 依赖于 Commons IO，所以一定要确保在您的 classpath 中有最新版本的 <strong>commons-io-x.x.jar</strong> 文件。可以从 <a target="_blank" rel="noopener" href="http://commons.apache.org/proper/commons-io/">http://commons.apache.org/proper/commons-io/</a> 下载。</li>
</ul>
<p>你可以直接下载本站提供的两个依赖包：</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://static.runoob.com/download/commons-fileupload-1.3.2.jar">commons-fileupload-1.3.2.jar</a></li>
<li><a target="_blank" rel="noopener" href="http://static.runoob.com/download/commons-io-2.5.jar">commons-io-2.5.jar</a></li>
</ul>
<p>UploadServlet 的源代码 如下所示：</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><code class="hljs gradle">@WebServlet(<span class="hljs-string">&quot;/UploadServlet&quot;</span>)<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> UploadServlet <span class="hljs-keyword">extends</span> HttpServlet &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">long</span> serialVersionUID = <span class="hljs-number">1</span>L;<br>     <br>    <span class="hljs-comment">// 上传文件存储目录</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String UPLOAD_DIRECTORY = <span class="hljs-string">&quot;upload&quot;</span>;<br> <br>    <span class="hljs-comment">// 上传配置</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> MEMORY_THRESHOLD   = <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">3</span>;  <span class="hljs-comment">// 3MB</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> MAX_FILE_SIZE      = <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">40</span>; <span class="hljs-comment">// 40MB</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> MAX_REQUEST_SIZE   = <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">50</span>; <span class="hljs-comment">// 50MB</span><br> <br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 上传数据及保存文件</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> doPost(HttpServletRequest request,<br>        HttpServletResponse response) <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        <span class="hljs-comment">// 检测是否为多媒体上传</span><br>        <span class="hljs-keyword">if</span> (!ServletFileUpload.isMultipartContent(request)) &#123;<br>            <span class="hljs-comment">// 如果不是则停止</span><br>            PrintWriter writer = response.getWriter();<br>            writer.<span class="hljs-keyword">println</span>(<span class="hljs-string">&quot;Error: 表单必须包含 enctype=multipart/form-data&quot;</span>);<br>            writer.flush();<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br> <br>        <span class="hljs-comment">// 配置上传参数</span><br>        DiskFileItemFactory factory = <span class="hljs-keyword">new</span> DiskFileItemFactory();<br>        <span class="hljs-comment">// 设置内存临界值 - 超过后将产生临时文件并存储于临时目录中</span><br>        factory.setSizeThreshold(MEMORY_THRESHOLD);<br>        <span class="hljs-comment">// 设置临时存储目录</span><br>        factory.setRepository(<span class="hljs-keyword">new</span> <span class="hljs-keyword">File</span>(System.getProperty(<span class="hljs-string">&quot;java.io.tmpdir&quot;</span>)));<br> <br>        ServletFileUpload upload = <span class="hljs-keyword">new</span> ServletFileUpload(factory);<br>         <br>        <span class="hljs-comment">// 设置最大文件上传值</span><br>        upload.setFileSizeMax(MAX_FILE_SIZE);<br>         <br>        <span class="hljs-comment">// 设置最大请求值 (包含文件和表单数据)</span><br>        upload.setSizeMax(MAX_REQUEST_SIZE);<br><br>        <span class="hljs-comment">// 中文处理</span><br>        upload.setHeaderEncoding(<span class="hljs-string">&quot;UTF-8&quot;</span>); <br><br>        <span class="hljs-comment">// 构造临时路径来存储上传的文件</span><br>        <span class="hljs-comment">// 这个路径相对当前应用的目录</span><br>        String uploadPath = request.getServletContext().getRealPath(<span class="hljs-string">&quot;./&quot;</span>) + <span class="hljs-keyword">File</span>.separator + UPLOAD_DIRECTORY;<br>       <br>         <br>        <span class="hljs-comment">// 如果目录不存在则创建</span><br>        <span class="hljs-keyword">File</span> uploadDir = <span class="hljs-keyword">new</span> <span class="hljs-keyword">File</span>(uploadPath);<br>        <span class="hljs-keyword">if</span> (!uploadDir.exists()) &#123;<br>            uploadDir.mkdir();<br>        &#125;<br> <br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">// 解析请求的内容提取文件数据</span><br>            @SuppressWarnings(<span class="hljs-string">&quot;unchecked&quot;</span>)<br>            List&lt;FileItem&gt; formItems = upload.parseRequest(request);<br> <br>            <span class="hljs-keyword">if</span> (formItems != <span class="hljs-keyword">null</span> &amp;&amp; formItems.<span class="hljs-keyword">size</span>() &gt; <span class="hljs-number">0</span>) &#123;<br>                <span class="hljs-comment">// 迭代表单数据</span><br>                <span class="hljs-keyword">for</span> (FileItem item : formItems) &#123;<br>                    <span class="hljs-comment">// 处理不在表单中的字段</span><br>                    <span class="hljs-keyword">if</span> (!item.isFormField()) &#123;<br>                        String fileName = <span class="hljs-keyword">new</span> <span class="hljs-keyword">File</span>(item.getName()).getName();<br>                        String filePath = uploadPath + <span class="hljs-keyword">File</span>.separator + fileName;<br>                        <span class="hljs-keyword">File</span> storeFile = <span class="hljs-keyword">new</span> <span class="hljs-keyword">File</span>(filePath);<br>                        <span class="hljs-comment">// 在控制台输出文件的上传路径</span><br>                        System.out.<span class="hljs-keyword">println</span>(filePath);<br>                        <span class="hljs-comment">// 保存文件到硬盘</span><br>                        item.<span class="hljs-keyword">write</span>(storeFile);<br>                        request.setAttribute(<span class="hljs-string">&quot;message&quot;</span>,<br>                            <span class="hljs-string">&quot;文件上传成功!&quot;</span>);<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (Exception ex) &#123;<br>            request.setAttribute(<span class="hljs-string">&quot;message&quot;</span>,<br>                    <span class="hljs-string">&quot;错误信息: &quot;</span> + ex.getMessage());<br>        &#125;<br>        <span class="hljs-comment">// 跳转到 message.jsp</span><br>        request.getServletContext().getRequestDispatcher(<span class="hljs-string">&quot;/message.jsp&quot;</span>).forward(<br>                request, response);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>message.jsp 文件代码如下：</p>
<figure class="highlight erb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs erb"><span class="xml">&lt;%</span><span class="ruby">@ page language=<span class="hljs-string">&quot;java&quot;</span> contentType=<span class="hljs-string">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class="ruby">    pageEncoding=<span class="hljs-string">&quot;UTF-8&quot;</span></span><span class="xml">%&gt;</span><br><span class="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span> <span class="hljs-meta-keyword">PUBLIC</span> <span class="hljs-meta-string">&quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;</span></span></span><br><span class="xml">    &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;</span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;Content-Type&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;text/html; charset=UTF-8&quot;</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>文件上传结果<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">center</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>$&#123;message&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">center</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span><br></code></pre></td></tr></table></figure>
<h4 id="1-12、Servlet处理时间"><a href="#1-12、Servlet处理时间" class="headerlink" title="1.12、Servlet处理时间"></a>1.12、Servlet处理时间</h4><p>使用 Servlet 的最重要的优势之一是，可以使用核心 Java 中的大多数可用的方法， Java 提供的 <strong>java.util</strong> 包中的 <strong>Date</strong> 类，这个类封装了当前的日期和时间。</p>
<h5 id="1-12-1、Date类"><a href="#1-12-1、Date类" class="headerlink" title="1.12.1、Date类"></a>1.12.1、Date类</h5><p>Date 类支持两个构造函数。第一个构造函数初始化当前日期和时间的对象。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">Date</span><span class="hljs-params">()</span></span><br></code></pre></td></tr></table></figure>
<p>下面的构造函数接受一个参数，该参数等于 1970 年 1 月 1 日午夜以来经过的毫秒数。</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-constructor">Date(<span class="hljs-params">long</span> <span class="hljs-params">millisec</span>)</span><br></code></pre></td></tr></table></figure>
<p>一旦您有一个可用的 Date 对象，您可以调用下列任意支持的方法来使用日期：</p>
<h5 id="1-12-2、Date-对象的方法"><a href="#1-12-2、Date-对象的方法" class="headerlink" title="1.12.2、Date 对象的方法"></a>1.12.2、Date 对象的方法</h5><table>
<thead>
<tr>
<th align="left">序号</th>
<th align="left">方法 &amp; 描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left"><strong>boolean after(Date date)</strong> 如果调用的 Date 对象中包含的日期在 date 指定的日期之后，则返回 true，否则返回 false。</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left"><strong>boolean before(Date date)</strong> 如果调用的 Date 对象中包含的日期在 date 指定的日期之前，则返回 true，否则返回 false。</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left"><strong>Object clone( )</strong> 重复调用 Date 对象。</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left"><strong>int compareTo(Date date)</strong> 把调用对象的值与 date 的值进行比较。如果两个值是相等的，则返回 0。如果调用对象在 date 之前，则返回一个负值。如果调用对象在 date 之后，则返回一个正值。</td>
</tr>
<tr>
<td align="left">5</td>
<td align="left"><strong>int compareTo(Object obj)</strong> 如果 obj 是 Date 类，则操作等同于 compareTo(Date)。否则，它会抛出一个 ClassCastException。</td>
</tr>
<tr>
<td align="left">6</td>
<td align="left"><strong>boolean equals(Object date)</strong> 如果调用的 Date 对象中包含的时间和日期与 date 指定的相同，则返回 true，否则返回 false。</td>
</tr>
<tr>
<td align="left">7</td>
<td align="left"><strong>long getTime( )</strong> 返回 1970 年 1 月 1 日以来经过的毫秒数。</td>
</tr>
<tr>
<td align="left">8</td>
<td align="left"><strong>int hashCode( )</strong> 为调用对象返回哈希代码。</td>
</tr>
<tr>
<td align="left">9</td>
<td align="left"><strong>void setTime(long time)</strong> 设置 time 指定的时间和日期，这表示从 1970 年 1 月 1 日午夜以来经过的时间（以毫秒为单位）。</td>
</tr>
<tr>
<td align="left">10</td>
<td align="left"><strong>String toString( )</strong> 转换调用的 Date 对象为一个字符串，并返回结果。</td>
</tr>
</tbody></table>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-meta">@WebServlet</span>(<span class="hljs-string">&quot;/CurrentDate&quot;</span>)<br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CurrentDate</span> <span class="hljs-title">extends</span> <span class="hljs-title">HttpServlet</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> long serialVersionUID <span class="hljs-operator">=</span> 1L;<br><br>    protected void doGet(<span class="hljs-type">HttpServletRequest</span> request, <span class="hljs-type">HttpServletResponse</span> response) <span class="hljs-keyword">throws</span> <span class="hljs-type">ServletException</span>, <span class="hljs-type">IOException</span> &#123;<br><br>        response.setContentType(<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span>);<br>        <span class="hljs-type">PrintWriter</span> out <span class="hljs-operator">=</span> response.getWriter();<br>          <span class="hljs-type">String</span> title <span class="hljs-operator">=</span> <span class="hljs-string">&quot;显示当前的日期和时间&quot;</span>;<br>        <span class="hljs-type">Date</span> date <span class="hljs-operator">=</span> new <span class="hljs-type">Date</span>();<br>        <span class="hljs-type">String</span> docType <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&lt;!DOCTYPE html&gt; <span class="hljs-subst">\n</span>&quot;</span>;<br>          out.println(docType <span class="hljs-operator">+</span><br>            <span class="hljs-string">&quot;&lt;html&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>            <span class="hljs-string">&quot;&lt;head&gt;&lt;title&gt;&quot;</span> <span class="hljs-operator">+</span> title <span class="hljs-operator">+</span> <span class="hljs-string">&quot;&lt;/title&gt;&lt;/head&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>            <span class="hljs-string">&quot;&lt;body bgcolor=<span class="hljs-subst">\&quot;</span>#f0f0f0<span class="hljs-subst">\&quot;</span>&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>            <span class="hljs-string">&quot;&lt;h1 align=<span class="hljs-subst">\&quot;</span>center<span class="hljs-subst">\&quot;</span>&gt;&quot;</span> <span class="hljs-operator">+</span> title <span class="hljs-operator">+</span> <span class="hljs-string">&quot;&lt;/h1&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>            <span class="hljs-string">&quot;&lt;h2 align=<span class="hljs-subst">\&quot;</span>center<span class="hljs-subst">\&quot;</span>&gt;&quot;</span> <span class="hljs-operator">+</span> date.toString() <span class="hljs-operator">+</span> <span class="hljs-string">&quot;&lt;/h2&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>            <span class="hljs-string">&quot;&lt;/body&gt;&lt;/html&gt;&quot;</span>);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<img src="/.com//date" srcset="/img/loading.gif" alt="img" style="zoom: 80%;">



<h5 id="1-12-3、日期比较"><a href="#1-12-3、日期比较" class="headerlink" title="1.12.3、日期比较"></a>1.12.3、日期比较</h5><ul>
<li>您可以使用 getTime() 来获取两个对象自 1970 年 1 月 1 日午夜以来经过的时间（以毫秒为单位），然后对这两个值进行比较。</li>
<li>您可以使用方法 before( )、after( ) 和 equals( )。由于一个月里 12 号在 18 号之前，例如，new Date(99, 2, 12).before(new Date (99, 2, 18)) 返回 true。</li>
<li>您可以使用 compareTo( ) 方法，该方法由 Comparable 接口定义，由 Date 实现。</li>
</ul>
<h5 id="1-12-4、使用SimpleDateFormat格式化日期"><a href="#1-12-4、使用SimpleDateFormat格式化日期" class="headerlink" title="1.12.4、使用SimpleDateFormat格式化日期"></a>1.12.4、使用SimpleDateFormat格式化日期</h5><p>SimpleDateFormat 是一个以语言环境敏感的方式来格式化和解析日期的具体类。 SimpleDateFormat 允许您选择任何用户定义的日期时间格式化的模式。</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-type">Date</span> dNow = <span class="hljs-built_in">new</span> <span class="hljs-type">Date</span>();<br>SimpleDateFormat ft = <span class="hljs-built_in">new</span> SimpleDateFormat (&quot;yyyy.MM.dd  hh:mm:ss E a &quot;);<br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(ft.format(dNow));<br></code></pre></td></tr></table></figure>
<p>使用事件模式字符串来指定时间格式。在这种模式下，所有的 ASCII 字母被保留为模式字母，这些字母定义如下：</p>
<table>
<thead>
<tr>
<th align="left">字符</th>
<th align="left">描述</th>
<th align="left">实例</th>
</tr>
</thead>
<tbody><tr>
<td align="left">G</td>
<td align="left">Era 指示器</td>
<td align="left">AD</td>
</tr>
<tr>
<td align="left">y</td>
<td align="left">四位数表示的年</td>
<td align="left">2001</td>
</tr>
<tr>
<td align="left">M</td>
<td align="left">一年中的月</td>
<td align="left">July 或 07</td>
</tr>
<tr>
<td align="left">d</td>
<td align="left">一月中的第几天</td>
<td align="left">10</td>
</tr>
<tr>
<td align="left">h</td>
<td align="left">带有 A.M./P.M. 的小时（1~12）</td>
<td align="left">12</td>
</tr>
<tr>
<td align="left">H</td>
<td align="left">一天中的第几小时（0~23）</td>
<td align="left">22</td>
</tr>
<tr>
<td align="left">m</td>
<td align="left">一小时中的第几分</td>
<td align="left">30</td>
</tr>
<tr>
<td align="left">s</td>
<td align="left">一分中的第几秒</td>
<td align="left">55</td>
</tr>
<tr>
<td align="left">S</td>
<td align="left">毫秒</td>
<td align="left">234</td>
</tr>
<tr>
<td align="left">E</td>
<td align="left">一周中的星期几</td>
<td align="left">Tuesday</td>
</tr>
<tr>
<td align="left">D</td>
<td align="left">一年中的第几天</td>
<td align="left">360</td>
</tr>
<tr>
<td align="left">F</td>
<td align="left">所在的周是这个月的第几周</td>
<td align="left">2 (second Wed. in July)</td>
</tr>
<tr>
<td align="left">w</td>
<td align="left">一年中的第几周</td>
<td align="left">40</td>
</tr>
<tr>
<td align="left">W</td>
<td align="left">一月中的第几周</td>
<td align="left">1</td>
</tr>
<tr>
<td align="left">a</td>
<td align="left">A.M./P.M. 标记</td>
<td align="left">PM</td>
</tr>
<tr>
<td align="left">k</td>
<td align="left">一天中的第几小时（1~24）</td>
<td align="left">24</td>
</tr>
<tr>
<td align="left">K</td>
<td align="left">带有 A.M./P.M. 的小时（0~11）</td>
<td align="left">10</td>
</tr>
<tr>
<td align="left">z</td>
<td align="left">时区</td>
<td align="left">Eastern Standard Time</td>
</tr>
<tr>
<td align="left">‘</td>
<td align="left">Escape for text</td>
<td align="left">Delimiter</td>
</tr>
<tr>
<td align="left">“</td>
<td align="left">单引号</td>
<td align="left">`</td>
</tr>
</tbody></table>
<p>如需查看可用的处理日期方法的完整列表，您可以参考标准的 Java 文档。</p>
<h4 id="1-13、Servlet网页重定向"><a href="#1-13、Servlet网页重定向" class="headerlink" title="1.13、Servlet网页重定向"></a>1.13、Servlet网页重定向</h4><p>当文档移动到新的位置，我们需要向客户端发送这个新位置时，我们需要用到网页重定向。当然，也可能是为了负载均衡，或者只是为了简单的随机，这些情况都有可能用到网页重定向。</p>
<h5 id="1-13-1、使用-response-对象的-sendRedirect-方法"><a href="#1-13-1、使用-response-对象的-sendRedirect-方法" class="headerlink" title="1.13.1、使用 response 对象的 sendRedirect() 方法"></a>1.13.1、使用 response 对象的 sendRedirect() 方法</h5><p>重定向请求到另一个网页的最简单的方式是使用 response 对象的 sendRedirect() 方法。下面是该方法的定义：</p>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs processing"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> HttpServletResponse.sendRedirect(<span class="hljs-keyword">String</span> location)<br><span class="hljs-keyword">throws</span> IOException<br></code></pre></td></tr></table></figure>
<h5 id="1-13-2、setStatus-和-setHeader-方法一起"><a href="#1-13-2、setStatus-和-setHeader-方法一起" class="headerlink" title="1.13.2、setStatus() 和 setHeader() 方法一起"></a>1.13.2、setStatus() 和 setHeader() 方法一起</h5><p>该方法把响应连同状态码和新的网页位置发送回浏览器。您也可以通过把 setStatus() 和 setHeader() 方法一起使用来达到同样的效果：</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">....<br>String site = &quot;http://www.baidu.com&quot; ;<br>response.setStatus(response.SC_MOVED_TEMPORARILY);<br>response.setHeader(&quot;Location&quot;, site); <br>....<br></code></pre></td></tr></table></figure>
<p>本实例显示了 Servlet 如何进行页面重定向到另一个位置：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-meta">@WebServlet</span>(<span class="hljs-string">&quot;/PageRedirect&quot;</span>)<br>public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PageRedirect</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span></span>&#123;<br>    <br>  public void doGet(<span class="hljs-type">HttpServletRequest</span> request,<br>                    <span class="hljs-type">HttpServletResponse</span> response)<br>            <span class="hljs-keyword">throws</span> <span class="hljs-type">ServletException</span>, <span class="hljs-type">IOException</span><br>  &#123;<br>      <span class="hljs-comment">// 设置响应内容类型</span><br>      response.setContentType(<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span>);<br><br>      <span class="hljs-comment">// 要重定向的新位置</span><br>      <span class="hljs-type">String</span> site = <span class="hljs-keyword">new</span> <span class="hljs-type">String</span>(<span class="hljs-string">&quot;http://www.runoob.com&quot;</span>);<br><br>      response.setStatus(response.<span class="hljs-type">SC_MOVED_TEMPORARILY</span>);<br>      response.setHeader(<span class="hljs-string">&quot;Location&quot;</span>, site);    <br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h4 id="1-14、Servlet点击计数器"><a href="#1-14、Servlet点击计数器" class="headerlink" title="1.14、Servlet点击计数器"></a>1.14、Servlet点击计数器</h4><h5 id="1-14-1网页点击计数器："><a href="#1-14-1网页点击计数器：" class="headerlink" title="1.14.1网页点击计数器："></a><strong>1.14.1网页点击计数器：</strong></h5><p>很多时候，您可能有兴趣知道网站的某个特定页面上的总点击量。使用 Servlet 来计算这些点击量是非常简单的，因为一个 Servlet 的生命周期是由它运行所在的容器控制的。</p>
<p>以下是实现一个简单的基于 Servlet 生命周期的网页点击计数器需要采取的步骤：</p>
<ul>
<li>在 init() 方法中初始化一个全局变量。</li>
<li>每次调用 doGet() 或 doPost() 方法时，都增加全局变量。</li>
<li>如果需要，您可以使用一个数据库表来存储全局变量的值在 destroy() 中。在下次初始化 Servlet 时，该值可在 init() 方法内被读取。这一步是可选的。</li>
<li>如果您只想对一个 session 会话计数一次页面点击，那么请使用 isNew() 方法来检查该 session 会话是否已点击过相同页面。这一步是可选的。</li>
<li>您可以通过显示全局计数器的值，来在网站上展示页面的总点击量。这一步是可选的。</li>
</ul>
<p>在这里，我们假设 Web 容器将无法重新启动。如果是重新启动或 Servlet 被销毁，计数器将被重置。</p>
<h5 id="1-14-2、网站点击计数器："><a href="#1-14-2、网站点击计数器：" class="headerlink" title="1.14.2、网站点击计数器："></a><strong>1.14.2、网站点击计数器</strong>：</h5><p>很多时候，您可能有兴趣知道整个网站的总点击量。在 Servlet 中，这也是非常简单的，我们可以使用过滤器做到这一点。</p>
<p>以下是实现一个简单的基于过滤器生命周期的网站点击计数器需要采取的步骤：</p>
<ul>
<li>在过滤器的 init() 方法中初始化一个全局变量。</li>
<li>每次调用 doFilter 方法时，都增加全局变量。</li>
<li>如果需要，您可以在过滤器的 destroy() 中使用一个数据库表来存储全局变量的值。在下次初始化过滤器时，该值可在 init() 方法内被读取, 这一步是可选的。</li>
</ul>
<p>在这里，我们假设 Web 容器将无法重新启动。如果是重新启动或 Servlet 被销毁，点击计数器将被重置。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SiteHitCounter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Filter</span></span>&#123;<br>  <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> hitCount; <br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span>  <span class="hljs-title">init</span><span class="hljs-params">(FilterConfig config)</span> </span><br><span class="hljs-function">                    <span class="hljs-keyword">throws</span> ServletException</span>&#123;<br>     <span class="hljs-comment">// 重置点ss击计数器</span><br>     hitCount = <span class="hljs-number">0</span>;<br>  &#125;<br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span>  <span class="hljs-title">doFilter</span><span class="hljs-params">(ServletRequest request, </span></span><br><span class="hljs-function"><span class="hljs-params">              ServletResponse response,</span></span><br><span class="hljs-function"><span class="hljs-params">              FilterChain chain)</span> </span><br><span class="hljs-function">              <span class="hljs-keyword">throws</span> java.io.IOException, ServletException </span>&#123;<br>      <span class="hljs-comment">// 把计数器的值增加 1</span><br>      hitCount++;<br>      <span class="hljs-comment">// 输出计数器</span><br>      System.out.println(<span class="hljs-string">&quot;网站访问统计：&quot;</span>+ hitCount );<br>      <span class="hljs-comment">// 把请求传回到过滤器链???</span><br>      chain.doFilter(request,response);<br>  &#125;<br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">destroy</span><span class="hljs-params">()</span> </span><br><span class="hljs-function">  </span>&#123; <br>      <span class="hljs-comment">// 这一步是可选的，但是如果需要，您可以把 hitCount 的值写入到数据库</span><br>  &#125; <br>&#125;<br></code></pre></td></tr></table></figure>
<h4 id="1-15、Servlet包"><a href="#1-15、Servlet包" class="headerlink" title="1.15、Servlet包"></a>1.15、Servlet包</h4><p>涉及到 WEB-INF 子目录的 Web 应用程序结构是所有的 Java web 应用程序的标准，并由 Servlet API 规范指定。给定一个顶级目录名 myapp，目录结构如下所示：</p>
<figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli"><span class="hljs-string">/myapp</span><br>    <span class="hljs-string">/images</span><br>    <span class="hljs-string">/WEB-INF</span><br>        <span class="hljs-string">/classes</span><br>        <span class="hljs-string">/lib</span><br></code></pre></td></tr></table></figure>
<p>WEB-INF 子目录中包含应用程序的部署描述符，名为 web.xml。所有的 HTML 文件都位于顶级目录 <em>myapp</em> 下。对于 admin 用户，您会发现 ROOT 目录是 myApp 的父目录。</p>
<h5 id="1-15-1、创建包中的-Servlet"><a href="#1-15-1、创建包中的-Servlet" class="headerlink" title="1.15.1、创建包中的 Servlet"></a>1.15.1、创建包中的 Servlet</h5><p>WEB-INF/classes 目录包含了所有的 Servlet 类和其他类文件，类文件所在的目录结构与他们的包名称匹配。例如，如果您有一个完全合格的类名称 <strong>com.myorg.MyServlet</strong>，那么这个 Servlet 类必须位于以下目录中：</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-regexp">/myapp/</span>WEB-INF<span class="hljs-regexp">/classes/</span>com<span class="hljs-regexp">/myorg/My</span>Servlet.<span class="hljs-keyword">class</span><br></code></pre></td></tr></table></figure>
<h5 id="1-15-2、编译包中的-Servlet"><a href="#1-15-2、编译包中的-Servlet" class="headerlink" title="1.15.2、编译包中的 Servlet"></a>1.15.2、编译包中的 Servlet</h5><p>编译包中的类与编译其他的类没有什么大的不同。最简单的方法是让您的 java 文件保留完全限定路径，如上面提到的类，将被保留在 com.myorg 中。您还需要在 CLASSPATH 中添加该目录。 </p>
<p>假设您的环境已正确设置，进入 <strong>/webapps/ROOT/WEB-INF/classes</strong> 目录，并编译 MyServlet.java，如下所示：</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">$ javac <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">MyServlet</span>.</span></span>java<br></code></pre></td></tr></table></figure>
<p>如果 Servlet 依赖于其他库，那么您必须在 CLASSPATH 中也要引用那些 JAR 文件。这里我只引用了 servlet-api.jar JAR 文件，因为我在 Hello World 程序中并没有使用任何其他库。</p>
<p>该命令行使用内置的 javac 编译器，它是 Sun Microsystems Java 软件开发工具包（JDK，全称 Java Software Development Kit）附带的。 Microsystems的Java软件开发工具包（JDK）。为了让该命令正常工作，必须包括您在 PATH 环境变量中所使用的 Java SDK 的位置。</p>
<p>如果一切顺利，上述编译会在同一目录下生成 <strong>MyServlet.class</strong> 文件。下一节将解释如何把一个已编译的 Servlet 部署到生产中。</p>
<h5 id="1-15-3、Servlet-打包部署"><a href="#1-15-3、Servlet-打包部署" class="headerlink" title="1.15.3、Servlet 打包部署"></a>1.15.3、Servlet 打包部署</h5><p>默认情况下，Servlet 应用程序位于路径 &lt;Tomcat-installation-directory&gt;/webapps/ROOT 下，且类文件放在 &lt;Tomcat-installation-directory&gt;/webapps/ROOT/WEB-INF/classes 中。</p>
<p>如果您有一个完全合格的类名称 <strong>com.myorg.MyServlet</strong>，那么这个 Servlet 类必须位于 WEB-INF/classes/com/myorg/MyServlet.class 中，您需要在位于 &lt;Tomcat-installation-directory&gt;/webapps/ROOT/WEB-INF/ 的 web.xml 文件中创建以下条目：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>MyServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>com.myorg.MyServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br> <br><span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>MyServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/MyServlet<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br></code></pre></td></tr></table></figure>
<p>上面的条目要被创建在 web.xml 文件中的 &lt;web-app&gt;…&lt;/web-app&gt; 标签内。在该文件中可能已经有各种可用的条目，但不要在意。</p>
<p>到这里，您基本上已经完成了，现在让我们使用 &lt;Tomcat-installation-directory&gt;\bin\startup.bat（在 Windows 上）或 &lt;Tomcat-installation-directory&gt;/bin/startup.sh（在 Linux/Solaris 等上）启动 tomcat 服务器，最后在浏览器的地址栏中输入 <strong><a target="_blank" rel="noopener" href="http://localhost:8080/MyServlet">http://localhost:8080/MyServlet</a></strong>。如果一切顺利，浏览器页面显示“Hello World“。</p>
<h4 id="1-16、Servlet调试"><a href="#1-16、Servlet调试" class="headerlink" title="1.16、Servlet调试"></a>1.16、Servlet调试</h4><p>测试/调试 Servlet 始终是开发使用过程中的难点。Servlet 往往涉及大量的客户端/服务器交互，可能会出现错误但又难以重现。</p>
<h5 id="1-16-1、一些提示和建议，帮助调试"><a href="#1-16-1、一些提示和建议，帮助调试" class="headerlink" title="1.16.1、一些提示和建议，帮助调试"></a>1.16.1、一些提示和建议，帮助调试</h5><ul>
<li><p>System.out.println()</p>
</li>
<li><p>消息日志：使用适当的日志记录方法来记录所有调试、警告和错误消息，推荐使用 <a target="_blank" rel="noopener" href="https://logging.apache.org/log4j/2.0/download.html">log4J</a> 来记录所有的消息。</p>
</li>
<li><p>使用JDB调试器：使用调试 applet 或应用程序的 jdb 命令来调试 Servlet。</p>
</li>
<li><p>使用注释：代码中的注释有助于以各种方式进行调试。</p>
</li>
<li><p>客户端和服务器端头信息：当一个 Servlet 并没有像预期那样时，查看原始的 HTTP 请求和响应是非常有用的。</p>
</li>
</ul>
<h5 id="1-16-2、一些-Servlet-调试的技巧："><a href="#1-16-2、一些-Servlet-调试的技巧：" class="headerlink" title="1.16.2、一些 Servlet 调试的技巧："></a>1.16.2、一些 Servlet 调试的技巧：</h5><ul>
<li>请注意，server_root/classes 不会重载，而 server_root/servlets 可能会。</li>
<li>要求浏览器显示它所显示的页面的原始内容。这有助于识别格式的问题。它通常是”视图”菜单下的一个选项。</li>
<li>通过强制执行完全重新加载页面来确保浏览器还没有缓存前一个请求的输出。在 Netscape Navigator 中，请使用 Shift-Reload，在 Internet Explorer 中，请使用 Shift-Refresh。</li>
<li>请确认 servlet 的 init() 方法接受一个 ServletConfig 参数，并调用 super.init(config)。</li>
</ul>
<h4 id="1-17、Servlet国际化"><a href="#1-17、Servlet国际化" class="headerlink" title="1.17、Servlet国际化"></a>1.17、Servlet国际化</h4><p>当建立一个全球性的网站时有一些注意事项。本教程不会讲解这些注意事项的完整细节，但它会通过一个很好的实例向您演示如何通过差异化定位（即区域设置）来让网页以不同语言呈现。</p>
<p>在我们开始之前，先来看看三个重要术语：</p>
<ul>
<li><strong>国际化（i18n）：</strong>这意味着一个网站提供了不同版本的翻译成访问者的语言或国籍的内容。</li>
<li><strong>本地化（l10n）：</strong>这意味着向网站添加资源，以使其适应特定的地理或文化区域，例如网站翻译成印地文（Hindi）。</li>
<li><strong>区域设置（locale）：</strong>这是一个特殊的文化或地理区域。它通常指语言符号后跟一个下划线和一个国家符号。例如 “en_US” 表示针对 US 的英语区域设置。</li>
</ul>
<p>Servlet 可以根据请求者的区域设置拾取相应版本的网站，并根据当地的语言、文化和需求提供相应的网站版本。以下是 request 对象中返回 Locale 对象的方法。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus">java<span class="hljs-selector-class">.util</span><span class="hljs-selector-class">.Locale</span> request<span class="hljs-selector-class">.getLocale</span>() <br></code></pre></td></tr></table></figure>
<h5 id="1-17-1、检测区域设置"><a href="#1-17-1、检测区域设置" class="headerlink" title="1.17.1、检测区域设置"></a>1.17.1、检测区域设置</h5><p>下面列出了重要的区域设置方法，您可以使用它们来检测请求者的地理位置、语言和区域设置。下面所有的方法都显示了请求者浏览器中设置的国家名称和语言名称。</p>
<table>
<thead>
<tr>
<th align="left">序号</th>
<th align="left">方法 &amp; 描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left"><strong>String getCountry()</strong> 该方法以 2 个大写字母形式的 ISO 3166 格式返回该区域设置的国家/地区代码。</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left"><strong>String getDisplayCountry()</strong> 该方法返回适合向用户显示的区域设置的国家的名称。</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left"><strong>String getLanguage()</strong> 该方法以小写字母形式的 ISO 639 格式返回该区域设置的语言代码。</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left"><strong>String getDisplayLanguage()</strong> 该方法返回适合向用户显示的区域设置的语言的名称。</td>
</tr>
<tr>
<td align="left">5</td>
<td align="left"><strong>String getISO3Country()</strong> 该方法返回该区域设置的国家的三个字母缩写。</td>
</tr>
<tr>
<td align="left">6</td>
<td align="left"><strong>String getISO3Language()</strong> 该方法返回该区域设置的语言的三个字母的缩写。</td>
</tr>
</tbody></table>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GetLocale</span> <span class="hljs-title">extends</span> <span class="hljs-title">HttpServlet</span></span>&#123;<br>  <span class="hljs-keyword">public</span> void doGet(<span class="hljs-type">HttpServletRequest</span> request,<br>                    <span class="hljs-type">HttpServletResponse</span> response)<br>            <span class="hljs-keyword">throws</span> <span class="hljs-type">ServletException</span>, <span class="hljs-type">IOException</span><br>  &#123;<br>      <span class="hljs-comment">// 获取客户端的区域设置</span><br>      <span class="hljs-type">Locale</span> locale <span class="hljs-operator">=</span> request.getLocale();<br>      <span class="hljs-type">String</span> language <span class="hljs-operator">=</span> locale.getLanguage();<br>      <span class="hljs-type">String</span> country <span class="hljs-operator">=</span> locale.getCountry();<br><br>      <span class="hljs-comment">// 设置响应内容类型</span><br>      response.setContentType(<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span>);<br>      <span class="hljs-type">PrintWriter</span> out <span class="hljs-operator">=</span> response.getWriter();<br><br>      <span class="hljs-type">String</span> title <span class="hljs-operator">=</span> <span class="hljs-string">&quot;检测区域设置&quot;</span>;<br>      <span class="hljs-type">String</span> docType <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&lt;!DOCTYPE html&gt; <span class="hljs-subst">\n</span>&quot;</span>;<br>      out.println(docType <span class="hljs-operator">+</span><br>        <span class="hljs-string">&quot;&lt;html&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>        <span class="hljs-string">&quot;&lt;head&gt;&lt;title&gt;&quot;</span> <span class="hljs-operator">+</span> title <span class="hljs-operator">+</span> <span class="hljs-string">&quot;&lt;/title&gt;&lt;/head&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>        <span class="hljs-string">&quot;&lt;body bgcolor=<span class="hljs-subst">\&quot;</span>#f0f0f0<span class="hljs-subst">\&quot;</span>&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>        <span class="hljs-string">&quot;&lt;h1 align=<span class="hljs-subst">\&quot;</span>center<span class="hljs-subst">\&quot;</span>&gt;&quot;</span> <span class="hljs-operator">+</span> language <span class="hljs-operator">+</span> <span class="hljs-string">&quot;&lt;/h1&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>        <span class="hljs-string">&quot;&lt;h2 align=<span class="hljs-subst">\&quot;</span>center<span class="hljs-subst">\&quot;</span>&gt;&quot;</span> <span class="hljs-operator">+</span> country <span class="hljs-operator">+</span> <span class="hljs-string">&quot;&lt;/h2&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>        <span class="hljs-string">&quot;&lt;/body&gt;&lt;/html&gt;&quot;</span>);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h5 id="1-17-2、语言设置"><a href="#1-17-2、语言设置" class="headerlink" title="1.17.2、语言设置"></a>1.17.2、语言设置</h5><p>Servlet 可以输出以西欧语言（如英语、西班牙语、德语、法语、意大利语、荷兰语等）编写的页面。在这里，为了能正确显示所有的字符，设置 Content-Language 头是非常重要的。</p>
<p>第二点是使用 HTML 实体显示所有的特殊字符，例如，”&amp;#241;” 表示 “ñ”，”&amp;#161;” 表示 “¡”，如下所示：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs scala">public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DisplaySpanish</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span></span>&#123;<br>  public void doGet(<span class="hljs-type">HttpServletRequest</span> request,<br>                    <span class="hljs-type">HttpServletResponse</span> response)<br>            <span class="hljs-keyword">throws</span> <span class="hljs-type">ServletException</span>, <span class="hljs-type">IOException</span><br>  &#123;<br>    <span class="hljs-comment">// 设置响应内容类型</span><br>    response.setContentType(<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span>);<br>    <span class="hljs-type">PrintWriter</span> out = response.getWriter();<br>    <span class="hljs-comment">// 设置西班牙语言代码</span><br>    response.setHeader(<span class="hljs-string">&quot;Content-Language&quot;</span>, <span class="hljs-string">&quot;es&quot;</span>);<br><br>    <span class="hljs-type">String</span> title = <span class="hljs-string">&quot;En Espa&amp;ntilde;ol&quot;</span>;<br>    <span class="hljs-type">String</span> docType = <span class="hljs-string">&quot;&lt;!DOCTYPE html&gt; \n&quot;</span>;<br>     out.println(docType +<br>     <span class="hljs-string">&quot;&lt;html&gt;\n&quot;</span> +<br>     <span class="hljs-string">&quot;&lt;head&gt;&lt;title&gt;&quot;</span> + title + <span class="hljs-string">&quot;&lt;/title&gt;&lt;/head&gt;\n&quot;</span> +<br>     <span class="hljs-string">&quot;&lt;body bgcolor=\&quot;#f0f0f0\&quot;&gt;\n&quot;</span> +<br>     <span class="hljs-string">&quot;&lt;h1&gt;&quot;</span> + <span class="hljs-string">&quot;En Espa&amp;ntilde;ol:&quot;</span> + <span class="hljs-string">&quot;&lt;/h1&gt;\n&quot;</span> +<br>     <span class="hljs-string">&quot;&lt;h1&gt;&quot;</span> + <span class="hljs-string">&quot;&amp;iexcl;Hola Mundo!&quot;</span> + <span class="hljs-string">&quot;&lt;/h1&gt;\n&quot;</span> +<br>     <span class="hljs-string">&quot;&lt;/body&gt;&lt;/html&gt;&quot;</span>);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h5 id="1-17-3、特定于区域设置的日期"><a href="#1-17-3、特定于区域设置的日期" class="headerlink" title="1.17.3、特定于区域设置的日期"></a>1.17.3、特定于区域设置的日期</h5><p>您可以使用 java.text.DateFormat 类及其静态方法 getDateTimeInstance() 来格式化特定于区域设置的日期和时间。下面的实例演示了如何格式化特定于某个给定的区域设置的日期：</p>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs lasso"><span class="hljs-keyword">public</span> class DateLocale extends HttpServlet&#123;<br>    <br>  <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> doGet(HttpServletRequest request,<br>                    HttpServletResponse response)<br>            throws ServletException, IOException<br>  &#123;<br>    <span class="hljs-comment">// 设置响应内容类型</span><br>    response.setContentType(<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span>);<br>    PrintWriter out = response.getWriter();<br>    <span class="hljs-comment">// 获取客户端的区域设置</span><br>    <span class="hljs-built_in">Locale</span> <span class="hljs-built_in">locale</span> = request.getLocale( );<br>    <span class="hljs-built_in">String</span> <span class="hljs-built_in">date</span> = DateFormat.getDateTimeInstance(<br>                                  DateFormat.<span class="hljs-literal">FULL</span>, <br>                                  DateFormat.SHORT, <br>                                  <span class="hljs-built_in">locale</span>).format(<span class="hljs-literal">new</span> <span class="hljs-built_in">Date</span>( ));<br><br>    <span class="hljs-built_in">String</span> title = <span class="hljs-string">&quot;特定于区域设置的日期&quot;</span>;<br>    <span class="hljs-built_in">String</span> docType = <span class="hljs-string">&quot;&lt;!DOCTYPE html&gt; \n&quot;</span>;<br>      out.println(docType +<br>      <span class="hljs-string">&quot;&lt;html&gt;\n&quot;</span> +<br>      <span class="hljs-string">&quot;&lt;head&gt;&lt;title&gt;&quot;</span> + title + <span class="hljs-string">&quot;&lt;/title&gt;&lt;/head&gt;\n&quot;</span> +<br>      <span class="hljs-string">&quot;&lt;body bgcolor=\&quot;#f0f0f0\&quot;&gt;\n&quot;</span> +<br>      <span class="hljs-string">&quot;&lt;h1 align=\&quot;center\&quot;&gt;&quot;</span> + <span class="hljs-built_in">date</span> + <span class="hljs-string">&quot;&lt;/h1&gt;\n&quot;</span> +<br>      <span class="hljs-string">&quot;&lt;/body&gt;&lt;/html&gt;&quot;</span>);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h5 id="1-17-4、特定于区域设置的货币"><a href="#1-17-4、特定于区域设置的货币" class="headerlink" title="1.17.4、特定于区域设置的货币"></a>1.17.4、特定于区域设置的货币</h5><p>您可以使用 java.text.NumberFormat 类及其静态方法 getCurrencyInstance() 来格式化数字（比如 long 类型或 double 类型）为特定于区域设置的货币。下面的实例演示了如何格式化特定于某个给定的区域设置的货币：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs scala">public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CurrencyLocale</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span></span>&#123;<br>    <br>  public void doGet(<span class="hljs-type">HttpServletRequest</span> request,<br>                    <span class="hljs-type">HttpServletResponse</span> response)<br>            <span class="hljs-keyword">throws</span> <span class="hljs-type">ServletException</span>, <span class="hljs-type">IOException</span><br>  &#123;<br>    <span class="hljs-comment">// 设置响应内容类型</span><br>    response.setContentType(<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span>);<br>    <span class="hljs-type">PrintWriter</span> out = response.getWriter();<br>    <span class="hljs-comment">// 获取客户端的区域设置</span><br>    <span class="hljs-type">Locale</span> locale = request.getLocale( );<br>    <span class="hljs-type">NumberFormat</span> nft = <span class="hljs-type">NumberFormat</span>.getCurrencyInstance(locale);<br>    <span class="hljs-type">String</span> formattedCurr = nft.format(<span class="hljs-number">1000000</span>);<br><br>    <span class="hljs-type">String</span> title = <span class="hljs-string">&quot;特定于区域设置的货币&quot;</span>;<br>    <span class="hljs-type">String</span> docType = <span class="hljs-string">&quot;&lt;!DOCTYPE html&gt; \n&quot;</span>;<br>      out.println(docType +<br>      <span class="hljs-string">&quot;&lt;html&gt;\n&quot;</span> +<br>      <span class="hljs-string">&quot;&lt;head&gt;&lt;title&gt;&quot;</span> + title + <span class="hljs-string">&quot;&lt;/title&gt;&lt;/head&gt;\n&quot;</span> +<br>      <span class="hljs-string">&quot;&lt;body bgcolor=\&quot;#f0f0f0\&quot;&gt;\n&quot;</span> +<br>      <span class="hljs-string">&quot;&lt;h1 align=\&quot;center\&quot;&gt;&quot;</span> + formattedCurr + <span class="hljs-string">&quot;&lt;/h1&gt;\n&quot;</span> +<br>      <span class="hljs-string">&quot;&lt;/body&gt;&lt;/html&gt;&quot;</span>);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h5 id="1-17-5、特定于区域设置的百分比"><a href="#1-17-5、特定于区域设置的百分比" class="headerlink" title="1.17.5、特定于区域设置的百分比"></a>1.17.5、特定于区域设置的百分比</h5><p>您可以使用 java.text.NumberFormat 类及其静态方法 getPercentInstance() 来格式化特定于区域设置的百分比。下面的实例演示了如何格式化特定于某个给定的区域设置的百分比：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs scala">public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PercentageLocale</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span></span>&#123;<br>    <br>  public void doGet(<span class="hljs-type">HttpServletRequest</span> request,<br>                    <span class="hljs-type">HttpServletResponse</span> response)<br>            <span class="hljs-keyword">throws</span> <span class="hljs-type">ServletException</span>, <span class="hljs-type">IOException</span><br>  &#123;<br>    <span class="hljs-comment">// 设置响应内容类型</span><br>    response.setContentType(<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span>);<br>    <span class="hljs-type">PrintWriter</span> out = response.getWriter();<br>    <span class="hljs-comment">// 获取客户端的区域设置</span><br>    <span class="hljs-type">Locale</span> locale = request.getLocale( );<br>    <span class="hljs-type">NumberFormat</span> nft = <span class="hljs-type">NumberFormat</span>.getPercentInstance(locale);<br>    <span class="hljs-type">String</span> formattedPerc = nft.format(<span class="hljs-number">0.51</span>);<br><br>    <span class="hljs-type">String</span> title = <span class="hljs-string">&quot;特定于区域设置的百分比&quot;</span>;<br>    <span class="hljs-type">String</span> docType = <span class="hljs-string">&quot;&lt;!DOCTYPE html&gt; \n&quot;</span>;<br>      out.println(docType +<br>      <span class="hljs-string">&quot;&lt;html&gt;\n&quot;</span> +<br>      <span class="hljs-string">&quot;&lt;head&gt;&lt;title&gt;&quot;</span> + title + <span class="hljs-string">&quot;&lt;/title&gt;&lt;/head&gt;\n&quot;</span> +<br>      <span class="hljs-string">&quot;&lt;body bgcolor=\&quot;#f0f0f0\&quot;&gt;\n&quot;</span> +<br>      <span class="hljs-string">&quot;&lt;h1 align=\&quot;center\&quot;&gt;&quot;</span> + formattedPerc + <span class="hljs-string">&quot;&lt;/h1&gt;\n&quot;</span> +<br>      <span class="hljs-string">&quot;&lt;/body&gt;&lt;/html&gt;&quot;</span>);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>




<h4 id="1-18、需要共享信息与页面跳转的原因"><a href="#1-18、需要共享信息与页面跳转的原因" class="headerlink" title="1.18、需要共享信息与页面跳转的原因"></a>1.18、需要共享信息与页面跳转的原因</h4><p><img src="/.com//servlet.png" srcset="/img/loading.gif"></p>
<h5 id="1-18-1、为什么需要跳转和数据共享？"><a href="#1-18-1、为什么需要跳转和数据共享？" class="headerlink" title="1.18.1、为什么需要跳转和数据共享？"></a>1.18.1、为什么需要跳转和数据共享？</h5><p>跳转：需要做责任分离（Servlet擅长写代码，jsp擅长展示页面）</p>
<p>共享：Http是无状态的，我们跳转的时候数据无法传递，因此需要做数据共享</p>
<h5 id="1-18-2、页面跳转可以怎么跳"><a href="#1-18-2、页面跳转可以怎么跳" class="headerlink" title="1.18.2、页面跳转可以怎么跳?"></a>1.18.2、页面跳转可以怎么跳?</h5><p>Servlet 跳转 其它资源(jsp,html)</p>
<p>Serlvet 跳转 Servlet </p>
<p>一般来说: 最后都会跳转到JSP页面(我们需要JSP页面来做展示)</p>
<h5 id="1-18-3、页面跳转的三种方式"><a href="#1-18-3、页面跳转的三种方式" class="headerlink" title="1.18.3、页面跳转的三种方式"></a>1.18.3、页面跳转的三种方式</h5><p>①请求转发、②重定向、③请求包含</p>
<h5 id="1-18-4、页面跳转：请求转发-Forward"><a href="#1-18-4、页面跳转：请求转发-Forward" class="headerlink" title="1.18.4、页面跳转：请求转发 Forward"></a>1.18.4、页面跳转：请求转发 Forward</h5><p>创建两个Servlet，分别是AServlet与BServlet，然后我访问AServlet，从AServlet跳转到BServlet；（分别使用3种方式）</p>
<p>转发的方式: <code>req.getRequestDispatcher(&quot;路径&quot;).forward(request, response);</code></p>
<p>注意:千万不要忘了forward</p>
<p><strong>案例代码：</strong></p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-meta">@WebServlet</span>(<span class="hljs-string">&quot;/forward/a&quot;</span>)<br>public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span></span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> void service(<span class="hljs-type">HttpServletRequest</span> req,<span class="hljs-type">HttpServletResponse</span> resp) <span class="hljs-keyword">throws</span> <span class="hljs-type">ServletException</span>, <span class="hljs-type">IOException</span> &#123;<br>        <span class="hljs-type">System</span>.out.println(<span class="hljs-string">&quot;现在AServlet中。。。&quot;</span>);<br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * req.getRequestDispatcher(String path)</span><br><span class="hljs-comment">         * 拿到分发器/确认跳转的地址</span><br><span class="hljs-comment">         * forward：进行跳转</span><br><span class="hljs-comment">         */</span><br>        req.getRequestDispatcher(<span class="hljs-string">&quot;/forward/b&quot;</span>).forward(req,resp);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-meta">@WebServlet</span>(<span class="hljs-string">&quot;/forward/b&quot;</span>)<br>public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> void service(<span class="hljs-type">HttpServletRequest</span> req, <span class="hljs-type">HttpServletResponse</span> resp) <span class="hljs-keyword">throws</span> <span class="hljs-type">IOException</span> &#123;<br>        <span class="hljs-type">System</span>.out.println(<span class="hljs-string">&quot;现在BServlet&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><img src="/.com//jsp2.png" srcset="/img/loading.gif"></p>
<p><strong>forward转发的特点：</strong></p>
<ul>
<li><p>地址栏地址不发生变化</p>
</li>
<li><p>浏览器只发送了一次请求（请求对象只有 <code>HTTPServletRequest req</code> 一个），forward是作为参数传递。</p>
</li>
<li><p>AServlet收到的浏览器的请求req和forward传给BServlet的req是同一个对象。里边的内容是相同的。</p>
</li>
<li><p>请求的顺序中，只最后一个response才起最用</p>
</li>
</ul>
<p><img src="/.com//response.png" srcset="/img/loading.gif"></p>
<p><img src="/.com//jsp3.png" srcset="/img/loading.gif"></p>
<ul>
<li><p>在AServlet 里面 跳转之后，resp.getWriter().println(i am aservlet”);不会显示在页面上，因为这个resp 不会转发之后，在回AServlet里面来;</p>
</li>
<li><p>forward不可跨域访问</p>
</li>
</ul>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-tag">req</span><span class="hljs-selector-class">.getRequestDispatcher</span>(<span class="hljs-string">&quot;https://www.baidu.com&quot;</span>)<span class="hljs-selector-class">.forward</span>(req,resp);<br></code></pre></td></tr></table></figure>
<p><img src="/.com//jsp4.png" srcset="/img/loading.gif"></p>
<ul>
<li>可以访问web-inf中的资源，但是不能直接通过/locolhost/WEB-INF/haha.html进行访问，可以通过转发访问到WEB-INF里面的内容。</li>
</ul>
<p><img src="/.com//jsp5.png" srcset="/img/loading.gif"></p>
<h5 id="1-18-5、页面跳转：重定向Redirect"><a href="#1-18-5、页面跳转：重定向Redirect" class="headerlink" title="1.18.5、页面跳转：重定向Redirect"></a>1.18.5、页面跳转：重定向Redirect</h5><p>跳转的方式: resp.sendRedirect(“路径”);//直接跳转</p>
<p><strong>转发特点:</strong></p>
<ul>
<li><p> 地址会发生变化</p>
</li>
<li><p> 发送了多次请求(每跳转一次就会发送一次请求)</p>
</li>
<li><p> 请求不一样的（请求头不共享）</p>
</li>
</ul>
<p><img src="/.com//redirect.png" srcset="/img/loading.gif"></p>
<ul>
<li> 请求的顺序, 显示的依然是最后一个</li>
</ul>
<p><img src="/.com//redirect3.png" srcset="/img/loading.gif"></p>
<p><img src="/.com//redirect1.png" srcset="/img/loading.gif"></p>
<ul>
<li> 可以跨域访问</li>
</ul>
<p><img src="/.com//redirect4.png" srcset="/img/loading.gif"></p>
<ul>
<li> 不能访问到WEB-INF下面的内容</li>
</ul>
<p><img src="/.com//redirect5.png" srcset="/img/loading.gif"></p>
<h5 id="1-18-6、页面跳转：请求包含include"><a href="#1-18-6、页面跳转：请求包含include" class="headerlink" title="1.18.6、页面跳转：请求包含include"></a><strong>1.18.6、页面跳转：请求包含include</strong></h5><p>一般不会在Servlet中使用</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-tag">req</span><span class="hljs-selector-class">.getRequestDispatcher</span>(<span class="hljs-string">&quot;/include/b&quot;</span>)<span class="hljs-selector-class">.include</span>(req, resp);<br></code></pre></td></tr></table></figure>
<p>这个两个结果会包含在一起（我们一般不使用）：</p>
<p><img src="/.com//include.png" srcset="/img/loading.gif"></p>
<h4 id="1-19、四大作用域对象"><a href="#1-19、四大作用域对象" class="headerlink" title="1.19、四大作用域对象"></a>1.19、四大作用域对象</h4><p>引入：我们在做数据共享的时候，把数据放到不同的地方，这个不同的地方就是放到不同的作用域里面，作用域对象有4个；</p>
<table>
<thead>
<tr>
<th>类</th>
<th>对象(叫法)</th>
<th>范围</th>
</tr>
</thead>
<tbody><tr>
<td>PageContext</td>
<td>pageContext</td>
<td>当前页面(作用不大)  当前页，直接使用就是，根本不需要在放到对象里面</td>
</tr>
<tr>
<td>HttpServletRequest</td>
<td>Request</td>
<td>一次请求(必需请求转发)</td>
</tr>
<tr>
<td>HttpSession</td>
<td>Session（多个对象）</td>
<td>一次会话</td>
</tr>
<tr>
<td>ServletContext</td>
<td>application</td>
<td>整个应用(有且只有一个对象)</td>
</tr>
</tbody></table>
<p>pageContext：每次访问的时候创建，可以有多个；</p>
<p>Request：每次请求的时候创建，可以有多个；</p>
<p>Session：每次会话的时候创建，不同人打开不同的浏览器，就创建多个，可以有个多个；</p>
<p>Application：整个应用有且只有一个对象，tomcat启动的创建，关闭的时候销毁；</p>
<h5 id="1-19-1、作用域对象的操作"><a href="#1-19-1、作用域对象的操作" class="headerlink" title="1.19.1、作用域对象的操作"></a>1.19.1、作用域对象的操作</h5><p><code>service方法</code>中拿到相应的作用域对象</p>
<blockquote>
<p>request:req</p>
<p>session:req.getSession()</p>
<p>application:super.getServletContext()</p>
</blockquote>
<p><strong>1)、向作用域对象中添加数据</strong></p>
<p>作用域对象.setAttribute(key, value);</p>
<p>修改（在设置一个相同的key，覆盖原有的）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ScopeServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span></span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function">protect <span class="hljs-keyword">void</span> <span class="hljs-title">service</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException</span>&#123;<br>        req.setAttribute(<span class="hljs-string">&quot;key&quot;</span>,<span class="hljs-string">&quot;value&quot;</span>);<span class="hljs-comment">//添加到request对象</span><br>        req.getSession().setAttribute(<span class="hljs-string">&quot;key&quot;</span>,<span class="hljs-string">&quot;value&quot;</span>);<span class="hljs-comment">//添加到Session对象中</span><br>        <span class="hljs-keyword">super</span>.getServletContext().setAttribute(<span class="hljs-string">&quot;key&quot;</span>,<span class="hljs-string">&quot;value&quot;</span>);<span class="hljs-comment">//添加到Applicatoin</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><strong>2）、作用域对象中获取数据</strong></p>
<p>作用域对象.getAttribute(key);</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs scala">public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ScopeServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span></span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    protect void service(<span class="hljs-type">HttpServletRequest</span> req, <span class="hljs-type">HttpServletResponse</span> resp) <span class="hljs-keyword">throws</span> <span class="hljs-type">ServletException</span>&#123;<br>        req.getAttribute(<span class="hljs-string">&quot;key&quot;</span>);<span class="hljs-comment">//从request对象获取数据</span><br>        req.getSession().getAttribute(<span class="hljs-string">&quot;key&quot;</span>);<span class="hljs-comment">//从Session对象中获取</span><br>        <span class="hljs-keyword">super</span>.getServletContext().getAttribute(<span class="hljs-string">&quot;key&quot;</span>);<span class="hljs-comment">//从Applicatoin获取</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><strong>3）、删除作用域对象中的数据</strong></p>
<p>作用域对象.removeAttribute(“key”);</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs scala">public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ScopeServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span></span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    protect void service(<span class="hljs-type">HttpServletRequest</span> req, <span class="hljs-type">HttpServletResponse</span> resp) <span class="hljs-keyword">throws</span> <span class="hljs-type">ServletException</span>&#123;<br>        req.removeAttribute(<span class="hljs-string">&quot;key&quot;</span>);<br>        req.getSession().removeAttribute(<span class="hljs-string">&quot;key&quot;</span>);<br>        <span class="hljs-keyword">super</span>.getServletContext().removeAttribute(<span class="hljs-string">&quot;key&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>


<p>作用域有大小，存在哪个作用域对象里，就需要在哪个作用域对象里获取</p>
<p><img src="/.com//domain.png" srcset="/img/loading.gif"></p>
<h5 id="1-19-2、各个作用域使用"><a href="#1-19-2、各个作用域使用" class="headerlink" title="1.19.2、各个作用域使用"></a>1.19.2、各个作用域使用</h5><p>①Session只用于登录，保存当前登录的用户</p>
<p>②Request我们平时从数据库拿到数据的展示都全部Request</p>
<p>③Application一般用于统计当前登录用户的数量上</p>
<h5 id="1-19-3、作用域经典案例"><a href="#1-19-3、作用域经典案例" class="headerlink" title="1.19.3、作用域经典案例"></a>1.19.3、作用域经典案例</h5><p>创建一个CountServlet.java</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 我们去作用域对象里面去拿到一个计数器</span><br><span class="hljs-comment"> *   如果有这个计数器,就直接拿到</span><br><span class="hljs-comment"> *   如果没有,创建一个,再拿到</span><br><span class="hljs-comment"> * 对计数器进行加1</span><br><span class="hljs-comment"> * 将新计数器再重新放到作用域中</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> javax.servlet.<span class="hljs-type">ServletException</span>;<br><span class="hljs-keyword">import</span> javax.servlet.annotation.<span class="hljs-type">WebServlet</span>;<br><span class="hljs-keyword">import</span> javax.servlet.http.<span class="hljs-type">HttpServlet</span>;<br><span class="hljs-keyword">import</span> javax.servlet.http.<span class="hljs-type">HttpServletRequest</span>;<br><span class="hljs-keyword">import</span> javax.servlet.http.<span class="hljs-type">HttpServletResponse</span>;<br><span class="hljs-keyword">import</span> java.io.<span class="hljs-type">IOException</span>;<br><br><span class="hljs-meta">@WebServlet</span>(<span class="hljs-string">&quot;/scope/count&quot;</span>)<br>public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CountServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> void service(<span class="hljs-type">HttpServletRequest</span> req, <span class="hljs-type">HttpServletResponse</span> resp) <span class="hljs-keyword">throws</span> <span class="hljs-type">ServletException</span>, <span class="hljs-type">IOException</span> &#123;<br>        <span class="hljs-comment">//request作用域</span><br>        <span class="hljs-type">Integer</span> reqCount=(<span class="hljs-type">Integer</span>)req.getAttribute(<span class="hljs-string">&quot;REQ_IN_COUNT&quot;</span>);<br>        <span class="hljs-keyword">if</span>(reqCount==<span class="hljs-literal">null</span>)&#123;<br>            reqCount=<span class="hljs-number">0</span>;<br>        &#125;<br>        reqCount=reqCount+<span class="hljs-number">1</span>;<br>        req.setAttribute(<span class="hljs-string">&quot;REQ_IN_COUNT&quot;</span>,reqCount);<br>        <span class="hljs-comment">//session作用域</span><br>        <span class="hljs-type">Integer</span> sessionCount=(<span class="hljs-type">Integer</span>)req.getSession().getAttribute(<span class="hljs-string">&quot;SESSION_IN_COUNT&quot;</span>);<br>        <span class="hljs-keyword">if</span>(sessionCount==<span class="hljs-literal">null</span>)&#123;<br>            sessionCount=<span class="hljs-number">0</span>;<br>        &#125;<br>        sessionCount=sessionCount+<span class="hljs-number">1</span>;<br>        req.getSession().setAttribute(<span class="hljs-string">&quot;SESSION_IN_COUNT&quot;</span>,sessionCount);<br><br>        <span class="hljs-comment">//application作用域</span><br>        <span class="hljs-type">Integer</span> appCount=(<span class="hljs-type">Integer</span>)<span class="hljs-keyword">super</span>.getServletContext().getAttribute(<span class="hljs-string">&quot;APP_IN_COUNT&quot;</span>);<br>        <span class="hljs-keyword">if</span>(appCount==<span class="hljs-literal">null</span>)&#123;<br>            appCount=<span class="hljs-number">0</span>;<br>        &#125;<br>        appCount=appCount+<span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">super</span>.getServletContext().setAttribute(<span class="hljs-string">&quot;APP_IN_COUNT&quot;</span>,appCount);<br><br>        req.getRequestDispatcher(<span class="hljs-string">&quot;/scope/result&quot;</span>).forward(req,resp);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>创建一个ScopeServlet.java拿到计数器的值</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-keyword">import</span> javax.servlet.annotation.<span class="hljs-type">WebServlet</span>;<br><span class="hljs-keyword">import</span> javax.servlet.http.<span class="hljs-type">HttpServlet</span>;<br><span class="hljs-keyword">import</span> javax.servlet.http.<span class="hljs-type">HttpServletRequest</span>;<br><span class="hljs-keyword">import</span> javax.servlet.http.<span class="hljs-type">HttpServletResponse</span>;<br><span class="hljs-keyword">import</span> java.io.<span class="hljs-type">IOException</span>;<br><br><span class="hljs-meta">@WebServlet</span>(<span class="hljs-string">&quot;/scope/result&quot;</span>)<br>public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ScopeServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> void service(<span class="hljs-type">HttpServletRequest</span> req, <span class="hljs-type">HttpServletResponse</span> resp) <span class="hljs-keyword">throws</span> <span class="hljs-type">IOException</span> &#123;<br>        <span class="hljs-type">Integer</span> reqCount=(<span class="hljs-type">Integer</span>)req.getAttribute(<span class="hljs-string">&quot;REQ_IN_COUNT&quot;</span>);<br>        resp.getWriter().println(<span class="hljs-string">&quot;request:&quot;</span>+reqCount);<br><br>        <span class="hljs-type">Integer</span> sessionCount=(<span class="hljs-type">Integer</span>)req.getSession().getAttribute(<span class="hljs-string">&quot;SESSION_IN_COUNT&quot;</span>);<br>        resp.getWriter().println(<span class="hljs-string">&quot;session:&quot;</span>+sessionCount);<br><br>        <span class="hljs-type">Integer</span> appCount=(<span class="hljs-type">Integer</span>)<span class="hljs-keyword">super</span>.getServletContext().getAttribute(<span class="hljs-string">&quot;APP_IN_COUNT&quot;</span>);<br>        resp.getWriter().println(<span class="hljs-string">&quot;application:&quot;</span>+appCount);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><img src="/.com//Scope.png" srcset="/img/loading.gif"></p>
<p>注：有的浏览器如Chrome，因受浏览器后台驻留影响，重新打开浏览器不会创建新的session会话，而是使用原有的session，给我们一种重启浏览器session不会重新计数的印象。</p>
<h5 id="1-19-4、ServletContext对象介绍"><a href="#1-19-4、ServletContext对象介绍" class="headerlink" title="1.19.4、ServletContext对象介绍"></a>1.19.4、ServletContext对象介绍</h5><p><strong>1）、获取ServletContext 上下文对象</strong></p>
<p>ServletContext 表示上下文对象，得到上下文对象ServletContext对象的四种方式：</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs routeros">ServletContext <span class="hljs-attribute">app1</span>=super.getServletContext();<br>ServletContext <span class="hljs-attribute">app2</span>=super.getServletConfig().getServletContext();<br>ServletContext <span class="hljs-attribute">app3</span>=req.getServletContext();<br>ServletContext <span class="hljs-attribute">app4</span>=re1.getSession().getServletContext();<br></code></pre></td></tr></table></figure>
<p>它们拿到的对象都是同一个对象，那我们选择哪种方式呢？</p>
<blockquote>
<p>第①和第②种我们肯定选择①</p>
<p>第③和和第④种我们肯定选择③（简单）</p>
<p>第①和第③种选择哪种？</p>
<ul>
<li>如果在servlet里面 有super，使用第一种①；</li>
<li>如果没有在servlet，普通类里面 ，可以通过传递req，选择③</li>
</ul>
<p>第③种更简单,不兼容低版本，不兼容tomcat7以前的版本</p>
<p>第④种麻烦一点,兼容性好</p>
</blockquote>
<p><strong>2）、ServletContext的常用方法</strong></p>
<p>获取到ServletContext 上下文对象后，怎么用？有什么用？</p>
<p>主要看里面的一些方法：</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-tag">getContextPath</span>();<span class="hljs-comment">//拿到上下文路径</span><br><span class="hljs-selector-tag">getRealPath</span>(“/”);拿到真实路径<span class="hljs-selector-tag">--</span>(以后做上传下载可以使用)<br><span class="hljs-selector-tag">getInitParameter</span>(“encoding”);<span class="hljs-comment">//拿到初始化参数（只能拿到全局里面的参数信息）</span><br></code></pre></td></tr></table></figure>
<p><img src="/.com//%E4%B8%8A%E4%B8%8B%E9%97%AE%E5%AF%B9%E8%B1%A1%E6%96%B9%E6%B3%95.png" srcset="/img/loading.gif"></p>
<p>①<strong>以前</strong>取到servlet里面配置的参数信息，</p>
<p> 通过super.getServletConfig().getInitParameter(“encoding”)拿到</p>
<p><img src="/.com//se.png" srcset="/img/loading.gif"></p>
<p>②<strong>现在</strong>web.xml配置全局的信息，通过super.getServletContext().getInitParameter(“encoding”) 拿到：</p>
<p><img src="/.com//webxml.png" srcset="/img/loading.gif"></p>
<p>注意：super.getServletContext().getInitParameter(“encoding”); 只能拿到context-param里面配置，不能拿到Servlet里面配置的参数；</p>
<h5 id="1-19-5、补充内容"><a href="#1-19-5、补充内容" class="headerlink" title="1.19.5、补充内容"></a>1.19.5、补充内容</h5><p><strong>1）、req.getParameter(“”)和req.getAttribute(“”)的区别?</strong></p>
<blockquote>
<p>req.getParameter :用户传过来的</p>
<p>req.getAttribute :从作用域里拿的(必需是放到作用域里的)</p>
</blockquote>
<p><strong>2）、ServletConfig.getInitParameter和application.getInitParameter 有什么区别?</strong></p>
<blockquote>
<p>ServletConfig.getInitParameter 只作为于一个Servlet</p>
<p>application.getInitParameter 整个应用都可以拿到</p>
</blockquote>
<h4 id="1-20、Servlet配置部署"><a href="#1-20、Servlet配置部署" class="headerlink" title="1.20、Servlet配置部署"></a>1.20、Servlet配置部署</h4><p>在Servlet2.5规范之前，Java Web应用的绝大部分组件都通过web.xml文件来配置管理，Servlet3.0规范可通过Annotation来配置管理Web组件，因此web.xml文件可以变得更加简洁，这也是Servlet3.0的重要简化。</p>
<p>两种方式：</p>
<h5 id="（1），通过web-xml配置"><a href="#（1），通过web-xml配置" class="headerlink" title="（1），通过web.xml配置"></a>（1），通过<strong>web.xml</strong>配置</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>GetApplication<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>com.fpp.GetApplication<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- 通过servletConfig getInitParameter()取出参数 --&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>GetApplication<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/GetApplication<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br></code></pre></td></tr></table></figure>
<h5 id="（2），使用-WebServlet-Annotation-进行配置"><a href="#（2），使用-WebServlet-Annotation-进行配置" class="headerlink" title="（2），使用**@WebServlet Annotation**进行配置"></a>（2），使用**@WebServlet Annotation**进行配置</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@WebServlet(name=&quot;AdminAddServlet&quot;,urlPatterns=&quot;/adminAddServlet&quot;)</span>  <br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AdminAddServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span>  </span><br></code></pre></td></tr></table></figure>
<p> @WebServlet支持的常用属性：</p>
<blockquote>
<p>displayName,initParams,loadOnStartup,name,urlPatterns/value,asyncSupported</p>
</blockquote>
<p>如果打算使用Annotation来配置Servlet，需要注意以下几点：</p>
<ul>
<li>不要在web.xml文件的根元素（&lt;web-app—/&gt;）中指定metadata-complete=“true”；</li>
<li>不要在web.xml文件中配置该Servlet</li>
</ul>
<h3 id="2、JSP"><a href="#2、JSP" class="headerlink" title="2、JSP"></a>2、JSP</h3><h4 id="2-1、JSP简介"><a href="#2-1、JSP简介" class="headerlink" title="2.1、JSP简介"></a>2.1、JSP简介</h4><p>JSP 与 PHP、ASP、ASP.NET 等语言类似，运行在服务端的语言。</p>
<p>JSP（全称Java Server Pages）是由 Sun Microsystems 公司倡导和许多公司参与共同创建的一种使软件开发者可以响应客户端请求，而动态生成 HTML、XML 或其他格式文档的Web网页的技术标准。</p>
<p>JSP 技术是以 Java 语言作为脚本语言的，JSP 网页为整个服务器端的 Java 库单元提供了一个接口来服务于HTTP的应用程序。</p>
<p><strong>Servlet也是Java用来做动态网页的技术，因为JSP就是Servlet；</strong></p>
<p>Servlet:         <strong>Java代码(主)</strong> + HTML代码</p>
<p>Jsp:                Java代码 + <strong>HTML代码(主)</strong></p>
<p>JSP就是Servlet ( 我们开发需要把 jsp 和 Servlet 结合使用)</p>
<p>Servlet更擅长写java业务代码，Jsp更擅长于显示的HTML页面；</p>
<p>开发目标：<strong>servlet里面不要写HTML代码，jsp里面不要写java代码。</strong></p>
<p>一个基本的JSP代码结构：</p>
<p><img src="/.com//JSPS.png" srcset="/img/loading.gif"></p>
<p>注意：JSP页面不能直接拖到浏览器上面运行，它只能在服务器上面使用，服务器对它作了编译的返回给浏览器HTML格式的页面。</p>
<h4 id="2-2、JSP原理分析"><a href="#2-2、JSP原理分析" class="headerlink" title="2.2、JSP原理分析"></a>2.2、JSP原理分析</h4><h5 id="2-2-1、JSP结构"><a href="#2-2-1、JSP结构" class="headerlink" title="2.2.1、JSP结构"></a>2.2.1、JSP结构</h5><p>网络服务器需要一个 JSP 引擎，也就是一个容器来处理 JSP 页面。容器负责截获对 JSP 页面的请求。本教程使用内嵌 JSP 容器的 Apache 来支持 JSP 开发。 </p>
<p> JSP 容器与 Web 服务器协同合作，为JSP的正常运行提供必要的运行环境和其他服务，并且能够正确识别专属于 JSP 网页的特殊元素。 </p>
<p>下图显示了 JSP 容器和 JSP 文件在 Web 应用中所处的位置。 </p>
<p><img src="/.com//StructJSP.png" srcset="/img/loading.gif"></p>
<h5 id="2-2-2、JSP处理"><a href="#2-2-2、JSP处理" class="headerlink" title="2.2.2、JSP处理"></a>2.2.2、JSP处理</h5><p>以下步骤表明了 Web 服务器是如何使用JSP来创建网页的： </p>
<ul>
<li><p>就像其他普通的网页一样，您的浏览器发送一个 HTTP 请求给服务器。</p>
</li>
<li><p>Web 服务器识别出这是一个对 JSP 网页的请求，并且将该请求传递给 JSP 引擎。通过使用  URL或者 .jsp 文件来完成。</p>
</li>
<li><p>JSP 引擎从磁盘中载入 JSP 文件，然后将它们转化为 Servlet。这种转化只是简单地将所有模板文本改用 println() 语句，并且将所有的 JSP 元素转化成 Java 代码。</p>
</li>
<li><p>JSP 引擎将 Servlet 编译成可执行类，并且将原始请求传递给 Servlet 引擎。</p>
</li>
<li><p>Web 服务器的某组件将会调用 Servlet 引擎，然后载入并执行 Servlet 类。在执行过程中，Servlet 产生 HTML 格式的输出并将其内嵌于 HTTP response 中上交给 Web 服务器。</p>
</li>
<li><p>Web 服务器以静态 HTML 网页的形式将 HTTP response 返回到您的浏览器中。</p>
</li>
<li><p>最终，Web 浏览器处理 HTTP response 中动态产生的HTML网页，就好像在处理静态网页一样。</p>
<p>以上提及到的步骤可以用下图来表示： </p>
</li>
</ul>
<p><img src="/.com//jsp-processing.jpg" srcset="/img/loading.gif"></p>
<p>一般情况下，JSP 引擎会检查 JSP 文件对应的 Servlet 是否已经存在，并且检查 JSP 文件的修改日期是否早于 Servlet。如果 JSP 文件的修改日期早于对应的 Servlet，那么容器就可以确定 JSP 文件没有被修改过并且 Servlet 有效。这使得整个流程与其他脚本语言（比如 PHP）相比要高效快捷一些。 </p>
<p> 总的来说，JSP 网页就是用另一种方式来编写 Servlet 而不用成为 Java 编程高手。除了解释阶段外，JSP 网页几乎可以被当成一个普通的 Servlet 来对待。 </p>
<h5 id="2-2-3、JSP生命周期"><a href="#2-2-3、JSP生命周期" class="headerlink" title="2.2.3、JSP生命周期"></a>2.2.3、JSP生命周期</h5><p>JSP生命周期就是从创建到销毁的整个过程，类似于servlet生命周期，区别在于JSP生命周期还包括将JSP文件编译成servlet。 </p>
<ul>
<li><p><strong>编译阶段：</strong></p>
<p>解析JSP文件，转换为Servlet，servlet容器编译servlet源文件，生成servlet类</p>
</li>
<li><p>初始化阶段：</p>
<p>加载与JSP对应的servlet类，创建其实例，并调用它的初始化方法</p>
</li>
<li><p>执行阶段：</p>
<p>调用与JSP对应的servlet实例的服务方法</p>
</li>
<li><p>销毁阶段：</p>
<p>调用与JSP对应的servlet实例的销毁方法，然后销毁servlet实例</p>
</li>
</ul>
<p>很明显，JSP生命周期的四个主要阶段和servlet生命周期非常相似，下面给出图示： </p>
<p><img src="/.com//jsp_life_cycle.jpg" srcset="/img/loading.gif"></p>
<p><img src="/.com//Snip.png" srcset="/img/loading.gif"></p>
<h5 id="2-2-4、代码分析"><a href="#2-2-4、代码分析" class="headerlink" title="2.2.4、代码分析"></a>2.2.4、代码分析</h5><p>Jsp页面上面的代码如下所示，怎么运行之后，就变成右边的时间呢？</p>
<figure class="highlight vbscript-html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs vbscript-html"><span class="vbscript">&lt;%@ page contentType=<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="hljs-string">&quot;java&quot;</span> %&gt;</span><br><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="xml">    HelloWorld！</span><span class="vbscript">&lt;%= <span class="hljs-keyword">new</span> java.util.<span class="hljs-built_in">Date</span>().<span class="hljs-keyword">to</span><span class="hljs-built_in">String</span>()%&gt;</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span><br></code></pre></td></tr></table></figure>
<p><img src="/.com//fenxi.png" srcset="/img/loading.gif"></p>
<p>当我们访问 20191120.jsp时，会先去找到web.xml里面&lt;url-pattern&gt;*.jsp&lt;/url-pattern&gt;，在会找到 JspServlet，如下图：</p>
<p><img src="/.com//procedure.png" srcset="/img/loading.gif"></p>
<p>JspServlet：在这里面，把我们自己写的JSP页面给翻译成一个JAVA文件，翻译好的文件放在         apache-tomcat-7.0.57\work\Catalina文件夹下面  </p>
<p><img src="/.com//compile.png" srcset="/img/loading.gif"></p>
<p>记事本打开这个生成的Java文件：</p>
<p><img src="/.com//shengcheng.png" srcset="/img/loading.gif"></p>
<p>翻译过程：</p>
<p><img src="/.com//procedure1.png" srcset="/img/loading.gif"></p>
<h4 id="2-3、JSP语法"><a href="#2-3、JSP语法" class="headerlink" title="2.3、JSP语法"></a>2.3、JSP语法</h4><p>请大家记住一句话:</p>
<blockquote>
<p>在JSP里面最好不要写JAVA代码，在Servlet里面也不要写HTML代码；</p>
<p>到目前，初学者可能还不能完全做到，后面内容学完，才能消除二者代码的杂糅。</p>
</blockquote>
<h5 id="2-3-1、JSP页面上面注释"><a href="#2-3-1、JSP页面上面注释" class="headerlink" title="2.3.1、JSP页面上面注释"></a>2.3.1、JSP页面上面注释</h5><p>   ①语法：&lt;%–这是注释–%&gt; 在jsp翻译成Servlet的时候这个注释就没有了(浏览器查看页面源代码看不到)；</p>
<p>   ②我们还可以用html的注释（<!--我是一个注释-->）,在页面上看源代码可以看到；</p>
<h5 id="2-3-2、-lt-表达式-gt"><a href="#2-3-2、-lt-表达式-gt" class="headerlink" title="2.3.2、&lt;%=表达式%&gt;"></a>2.3.2、&lt;%=表达式%&gt;</h5><p>实际上就是调用输出流打印到页面上，其对应servlet里的out.print(表达式);</p>
<p>作用：输出数据到页面上</p>
<p>例: &lt;%=**new** java.util.Date().toLocaleString() %&gt;</p>
<p>翻译到Servlet中的代码:</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">out.print(<span class="hljs-keyword">new</span> java.util.<span class="hljs-constructor">Date()</span>.<span class="hljs-keyword">to</span><span class="hljs-constructor">LocaleString()</span>);<br></code></pre></td></tr></table></figure>
<h5 id="2-3-3、-lt-…-gt"><a href="#2-3-3、-lt-…-gt" class="headerlink" title="2.3.3、&lt;% … %&gt;"></a>2.3.3、&lt;% … %&gt;</h5><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs abnf">&lt;%<br> Java语句<span class="hljs-number">1</span><span class="hljs-comment">;</span><br> Java语句<span class="hljs-number">2</span><span class="hljs-comment">;</span><br>%&gt;<br></code></pre></td></tr></table></figure>
<p>JSP中的Java脚本片段：(实际开发中，应做到JSP中不能出现一行Java脚本片段)</p>
<p>作用：书写Java代码逻辑</p>
<p>原理：其中的语句会原封不动的被服务器翻译到对应的<code>Servlet的_jspService</code>方法中。</p>
<p><img src="/.com//jspservice.png" srcset="/img/loading.gif"></p>
<p><img src="/.com//fanyi.png" srcset="/img/loading.gif"></p>
<h5 id="2-3-4、-lt-…-gt"><a href="#2-3-4、-lt-…-gt" class="headerlink" title="2.3.4、&lt;%!  … %&gt;"></a>2.3.4、&lt;%!  … %&gt;</h5><figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs erlang-repl">&lt;<span class="hljs-comment">%!</span><br>  Java代码<br><span class="hljs-comment">%&gt;</span><br></code></pre></td></tr></table></figure>
<p>作用：定义类的成员</p>
<p>原理: 把其中的代码,原封不动翻译到Servlet类中。</p>
<p><img src="/.com//chengyuan.png" srcset="/img/loading.gif"></p>
<h4 id="2-4、JSP三大指令"><a href="#2-4、JSP三大指令" class="headerlink" title="2.4、JSP三大指令"></a>2.4、JSP三大指令</h4><p>JSP指令用来设置整个JSP页面相关的属性，如网页的编码方式和脚本语言。</p>
<table>
<thead>
<tr>
<th align="left"><strong>指令</strong></th>
<th align="left"><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left">&lt;%@ page … %&gt;</td>
<td align="left">定义页面的依赖属性，比如脚本语言、error页面、缓存需求等等</td>
</tr>
<tr>
<td align="left">&lt;%@ include … %&gt;</td>
<td align="left">包含其他文件</td>
</tr>
<tr>
<td align="left">&lt;%@ taglib … %&gt;</td>
<td align="left">引入标签库的定义，可以是自定义标签</td>
</tr>
</tbody></table>
<h5 id="2-4-1、Page指令"><a href="#2-4-1、Page指令" class="headerlink" title="2.4.1、Page指令"></a>2.4.1、Page指令</h5><p>Page指令为容器提供当前页面的使用说明。一个JSP页面可以包含多个page指令。</p>
<p>Page指令的语法格式：</p>
<figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gcode">&lt;<span class="hljs-meta">%</span>@ page attribute=<span class="hljs-string">&quot;value&quot;</span> <span class="hljs-meta">%</span>&gt;<br></code></pre></td></tr></table></figure>
<p> 等价的XML格式：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">jsp:directive.page</span> <span class="hljs-attr">attribute</span>=<span class="hljs-string">&quot;value&quot;</span> /&gt;</span><br></code></pre></td></tr></table></figure>
<p>Page指令相关的属性：</p>
<table>
<thead>
<tr>
<th align="left"><strong>属性</strong></th>
<th align="left"><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left">buffer</td>
<td align="left">指定out对象使用缓冲区的大小</td>
</tr>
<tr>
<td align="left">autoFlush</td>
<td align="left">控制out对象的 缓存区</td>
</tr>
<tr>
<td align="left">contentType</td>
<td align="left">指定当前JSP页面的MIME类型和字符编码</td>
</tr>
<tr>
<td align="left">errorPage</td>
<td align="left">指定当JSP页面发生异常时需要转向的错误处理页面</td>
</tr>
<tr>
<td align="left">isErrorPage</td>
<td align="left">指定当前页面是否可以作为另一个JSP页面的错误处理页面</td>
</tr>
<tr>
<td align="left">extends</td>
<td align="left">指定servlet从哪一个类继承</td>
</tr>
<tr>
<td align="left">import</td>
<td align="left">导入要使用的Java类</td>
</tr>
<tr>
<td align="left">info</td>
<td align="left">定义JSP页面的描述信息</td>
</tr>
<tr>
<td align="left">isThreadSafe</td>
<td align="left">指定对JSP页面的访问是否为线程安全</td>
</tr>
<tr>
<td align="left">language</td>
<td align="left">定义JSP页面所用的脚本语言，默认是Java</td>
</tr>
<tr>
<td align="left">session</td>
<td align="left">指定JSP页面是否使用session</td>
</tr>
<tr>
<td align="left">isELIgnored</td>
<td align="left">指定是否执行EL表达式</td>
</tr>
<tr>
<td align="left">isScriptingEnabled</td>
<td align="left">确定脚本元素能否被使用</td>
</tr>
</tbody></table>
<p>①、language=”java” *–&gt;*语言只有java，意义不大 </p>
<p>②、contentType=”text/html; charset=UTF-8” *–&gt;*输出的页面类型,以后的servlet里面不用写（resp.setContentType(“text/html;charset=utf-8”)）</p>
<p><img src="/.com//setcontenttype.png" srcset="/img/loading.gif"></p>
<p>③、pageEncoding=”UTF-8”</p>
<p><img src="/.com//page.png" srcset="/img/loading.gif"></p>
<p>④、errorPage=”/myerror.jsp”:如果当前页面出错,就跳转到对应的页面</p>
<p>和isErrorPage=”true”:这个页面是否是错误页面(当我们要在页面上直接使用exception的时候就可以加上它)</p>
<p><img src="/.com//errorPage.png" srcset="/img/loading.gif"></p>
<p><img src="/.com//iserrorpage.png" srcset="/img/loading.gif"></p>
<p>效果：</p>
<p><img src="/.com//error.png" srcset="/img/loading.gif"></p>
<p>在web.xml里面也可以配置错误页面：</p>
<p><img src="/.com//errorxml.png" srcset="/img/loading.gif"></p>
<h5 id="2-4-2、Include指令"><a href="#2-4-2、Include指令" class="headerlink" title="2.4.2、Include指令"></a>2.4.2、Include指令</h5><p>JSP可以通过include指令来包含其他文件。被包含的文件可以是JSP文件、HTML文件或文本文件。包含的文件就好像是该JSP文件的一部分，会被同时编译执行。</p>
<p> Include指令的语法格式如下：</p>
<figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mel">&lt;%@ include <span class="hljs-keyword">file</span>=<span class="hljs-string">&quot;文件相对 url 地址&quot;</span> %&gt;<br></code></pre></td></tr></table></figure>
<p> <strong>include</strong> 指令中的文件名实际上是一个相对的 URL 地址。</p>
<p>如果您没有给文件关联一个路径，JSP编译器默认在当前路径下寻找。</p>
<p> 等价的XML语法：</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">&lt;jsp:directive.<span class="hljs-keyword">include</span> <span class="hljs-keyword">file</span>=<span class="hljs-string">&quot;文件相对 url 地址&quot;</span> /&gt;<br></code></pre></td></tr></table></figure>


<p>当每个页面都有导航的时候，我们只需要使用一个，这个时候就可以使用包含指令：</p>
<p><img src="/.com//include1.png" srcset="/img/loading.gif"></p>
<p><img src="/.com//baohan.png" srcset="/img/loading.gif"></p>
<p><img src="/.com//baohan1.png" srcset="/img/loading.gif"></p>
<p>一般被包含的jsp文件我们会取名为 jspf(jsp片断)：</p>
<p><img src="/.com//pianduan.png" srcset="/img/loading.gif"></p>
<h5 id="2-4-3、taglib指令"><a href="#2-4-3、taglib指令" class="headerlink" title="2.4.3、taglib指令"></a>2.4.3、taglib指令</h5><p>JSP API允许用户自定义标签，一个自定义标签库就是自定义标签的集合。</p>
<p> Taglib指令引入一个自定义标签集合的定义，包括库路径、自定义标签。</p>
<p> Taglib指令的语法：</p>
<figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gcode">&lt;<span class="hljs-meta">%</span>@ taglib uri=<span class="hljs-string">&quot;uri&quot;</span> prefix=<span class="hljs-string">&quot;prefixOfTag&quot;</span> <span class="hljs-meta">%</span>&gt;<br></code></pre></td></tr></table></figure>
<p> uri属性确定标签库的位置，prefix属性指定标签库的前缀。</p>
<p> 等价的XML语法：</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">&lt;jsp:directive.taglib <span class="hljs-attribute">uri</span>=<span class="hljs-string">&quot;uri&quot;</span> <span class="hljs-attribute">prefix</span>=<span class="hljs-string">&quot;prefixOfTag&quot;</span> /&gt;<br></code></pre></td></tr></table></figure>


<h4 id="2-5、JSP动作元素"><a href="#2-5、JSP动作元素" class="headerlink" title="2.5、JSP动作元素"></a><a target="_blank" rel="noopener" href="https://www.runoob.com/jsp/jsp-actions.html">2.5、JSP动作元素</a></h4><p>JSP行为标签使用XML语法结构来控制servlet引擎。它能够<code>动态</code>插入一个文件，重用JavaBean组件，引导用户去另一个页面，为Java插件产生相关的HTML等等。</p>
<p> 行为标签只有一种语法格式，它严格遵守XML标准：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">jsp:action_name</span> <span class="hljs-attr">attribute</span>=<span class="hljs-string">&quot;value&quot;</span> /&gt;</span><br></code></pre></td></tr></table></figure>
<p> 行为标签基本上是一些预先就定义好的函数，下表罗列出了一些可用的</p>
<h5 id="2-5-1、JSP动作标签：："><a href="#2-5-1、JSP动作标签：：" class="headerlink" title="2.5.1、JSP动作标签：："></a>2.5.1、JSP动作标签：：</h5><table>
<thead>
<tr>
<th align="left"><strong>语法</strong></th>
<th align="left"><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left">jsp:include</td>
<td align="left">用于在当前页面中包含静态或动态资源</td>
</tr>
<tr>
<td align="left">jsp:useBean</td>
<td align="left">寻找和初始化一个JavaBean组件</td>
</tr>
<tr>
<td align="left">jsp:setProperty</td>
<td align="left">设置 JavaBean组件的值</td>
</tr>
<tr>
<td align="left">jsp:getProperty</td>
<td align="left">将 JavaBean组件的值插入到 output中</td>
</tr>
<tr>
<td align="left">jsp:forward</td>
<td align="left">从一个JSP文件向另一个文件传递一个包含用户请求的request对象</td>
</tr>
<tr>
<td align="left">jsp:plugin</td>
<td align="left">用于在生成的HTML页面中包含Applet和JavaBean对象</td>
</tr>
<tr>
<td align="left">jsp:element</td>
<td align="left">动态创建一个XML元素</td>
</tr>
<tr>
<td align="left">jsp:attribute</td>
<td align="left">定义动态创建的XML元素的属性</td>
</tr>
<tr>
<td align="left">jsp:body</td>
<td align="left">定义动态创建的XML元素的主体</td>
</tr>
<tr>
<td align="left">jsp:text</td>
<td align="left">用于封装模板数据</td>
</tr>
</tbody></table>
<h5 id="2-5-2、所有的动作要素都有两个属性"><a href="#2-5-2、所有的动作要素都有两个属性" class="headerlink" title="2.5.2、所有的动作要素都有两个属性"></a>2.5.2、所有的动作要素都有两个属性</h5><ul>
<li><p>id属性：</p>
<p>id属性是动作元素的唯一标识，可以在JSP页面中引用。动作元素创建的id值可以通过PageContext来调用。 </p>
</li>
<li><p>scope属性：</p>
<p>该属性用于识别动作元素的生命周期。 id属性和scope属性有直接关系，scope属性定义了相关联id对象的寿命。 scope属性有四个可能的值： (a) page, (b)request, (c)session, 和 (d) application。 </p>
</li>
</ul>
<h5 id="2-5-3、-lt-jsp-include-gt-动作元素"><a href="#2-5-3、-lt-jsp-include-gt-动作元素" class="headerlink" title="2.5.3、**&lt;jsp:include&gt;**动作元素"></a>2.5.3、**&lt;jsp:include&gt;**动作元素</h5><p>用来包含静态和动态的文件。该动作把指定文件插入正在生成的页面。语法格式如下：</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">&lt;jsp:include <span class="hljs-attribute">page</span>=<span class="hljs-string">&quot;相对 URL 地址&quot;</span> <span class="hljs-attribute">flush</span>=<span class="hljs-string">&quot;true&quot;</span> /&gt;<br></code></pre></td></tr></table></figure>
<p> 前面已经介绍过include指令，它是在JSP文件被转换成Servlet的时候引入文件，而这里的</p>
<p>&lt;jsp:include&gt;动作不同，插入文件的时间是在页面被请求的时候。 </p>
<p>以下是include动作相关的属性列表。</p>
<table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">page</td>
<td align="left">包含在页面中的相对URL地址。</td>
</tr>
<tr>
<td align="left">flush</td>
<td align="left">布尔属性，定义在包含资源前是否刷新缓存区。</td>
</tr>
</tbody></table>
<h5 id="2-5-4、-lt-jsp-forward-gt-动作"><a href="#2-5-4、-lt-jsp-forward-gt-动作" class="headerlink" title="**2.5.4、&lt;jsp:forward&gt;**动作"></a>**2.5.4、&lt;jsp:forward&gt;**动作</h5><p>把请求转到另外的页面。jsp:forward标记只有一个属性page。语法格式如下所示：  </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">jsp:forward</span> <span class="hljs-attr">page</span>=<span class="hljs-string">&quot;相对 URL 地址&quot;</span> /&gt;</span><br></code></pre></td></tr></table></figure>
<p>以下是foward相关联的属性：</p>
<table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">page</td>
<td align="left">page属性包含的是一个相对URL。page的值既可以直接给出，也可以在请求的时候动态计算，可以是一个JSP页面或者一个 Java Servlet.</td>
</tr>
</tbody></table>
<h5 id="2-5-5、-lt-jsp-useBean-gt-动作用来加载一个将在JSP页面中使用的JavaBean。"><a href="#2-5-5、-lt-jsp-useBean-gt-动作用来加载一个将在JSP页面中使用的JavaBean。" class="headerlink" title="2.5.5、&lt;jsp:useBean&gt; 动作用来加载一个将在JSP页面中使用的JavaBean。"></a><strong>2.5.5、&lt;jsp:useBean&gt;</strong> 动作用来加载一个将在JSP页面中使用的JavaBean。</h5><p>这个功能非常有用，因为它使得我们可以发挥 Java 组件复用的优势。</p>
<p>jsp:useBean动作最简单的语法为：  </p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript">&lt;jsp:useBean <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-built_in">class</span>=<span class="hljs-string">&quot;package.class&quot;</span> /&gt;<br></code></pre></td></tr></table></figure>
<p> 在类载入后，我们既可以通过 jsp:setProperty 和 jsp:getProperty 动作来修改和检索bean的属性。  </p>
<p>以下是useBean动作相关的属性列表。</p>
<table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">class</td>
<td align="left">指定Bean的完整包名。</td>
</tr>
<tr>
<td align="left">type</td>
<td align="left">指定将引用该对象变量的类型。</td>
</tr>
<tr>
<td align="left">beanName</td>
<td align="left">通过 java.beans.Beans 的 instantiate() 方法指定Bean的名字。</td>
</tr>
</tbody></table>
<p>**&lt;jsp:setProperty&gt;**用来设置已经实例化的Bean对象的属性，有两种用法。首先，你可以在jsp:useBean元素的外面（后面）使用jsp:setProperty，如下所示：  </p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs applescript">&lt;jsp:useBean <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;myName&quot;</span> ... /&gt;<br>...<br>&lt;jsp:setProperty <span class="hljs-built_in">name</span>=<span class="hljs-string">&quot;myName&quot;</span> <span class="hljs-keyword">property</span>=<span class="hljs-string">&quot;someProperty&quot;</span> .../&gt;<br></code></pre></td></tr></table></figure>
<p>此时，不管jsp:useBean是找到了一个现有的Bean，还是新创建了一个Bean实例，jsp:setProperty都会执行。第二种用法是把jsp:setProperty放入jsp:useBean元素的内部，如下所示：  </p>
<figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">&lt;jsp<span class="hljs-function">:useBean</span> id=<span class="hljs-string">&quot;myName&quot;</span> <span class="hljs-string">...</span> &gt;<br><span class="hljs-string">...</span><br>   &lt;jsp<span class="hljs-function">:setProperty</span> name=<span class="hljs-string">&quot;myName&quot;</span> property=<span class="hljs-string">&quot;someProperty&quot;</span> <span class="hljs-string">.../</span>&gt;<br>&lt;<span class="hljs-string">/jsp</span><span class="hljs-function">:useBean</span>&gt;<br></code></pre></td></tr></table></figure>
<p>此时，jsp:setProperty只有在新建Bean实例时才会执行，如果是使用现有实例则不执行jsp:setProperty。  </p>
<p>jsp:setProperty动作有下面四个属性,如下表：</p>
<table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">name</td>
<td align="left">name属性是必需的。它表示要设置属性的是哪个Bean。</td>
</tr>
<tr>
<td align="left">property</td>
<td align="left">property属性是必需的。它表示要设置哪个属性。有一个特殊用法：如果property的值是”*”，表示所有名字和Bean属性名字匹配的请求参数都将被传递给相应的属性set方法。</td>
</tr>
<tr>
<td align="left">value</td>
<td align="left">value 属性是可选的。该属性用来指定Bean属性的值。字符串数据会在目标类中通过标准的valueOf方法自动转换成数字、boolean、Boolean、 byte、Byte、char、Character。例如，boolean和Boolean类型的属性值（比如”true”）通过 Boolean.valueOf转换，int和Integer类型的属性值（比如”42”）通过Integer.valueOf转换。  　value和param不能同时使用，但可以使用其中任意一个。</td>
</tr>
<tr>
<td align="left">param</td>
<td align="left">param 是可选的。它指定用哪个请求参数作为Bean属性的值。如果当前请求没有参数，则什么事情也不做，系统不会把null传递给Bean属性的set方法。因此，你可以让Bean自己提供默认属性值，只有当请求参数明确指定了新值时才修改默认属性值。</td>
</tr>
</tbody></table>
<p>**&lt;jsp:getProperty&gt;**动作提取指定Bean属性的值，转换成字符串，然后输出。语法格式如下：</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs applescript">&lt;jsp:useBean <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;myName&quot;</span> ... /&gt;<br>...<br>&lt;jsp:getProperty <span class="hljs-built_in">name</span>=<span class="hljs-string">&quot;myName&quot;</span> <span class="hljs-keyword">property</span>=<span class="hljs-string">&quot;someProperty&quot;</span> .../&gt;<br></code></pre></td></tr></table></figure>
<p>下表是与getProperty相关联的属性：</p>
<table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">name</td>
<td align="left">要检索的Bean属性名称。Bean必须已定义。</td>
</tr>
<tr>
<td align="left">property</td>
<td align="left">表示要提取Bean属性的值</td>
</tr>
</tbody></table>
<h4 id="2-6、JSP九大内置对象"><a href="#2-6、JSP九大内置对象" class="headerlink" title="2.6、JSP九大内置对象"></a>2.6、JSP九大内置对象</h4><p>引入：在jsp页面里面 ，可以直接使用request和session，为什么可以直接使用？</p>
<p>这里request和session 就是别人已经帮我们定义好9个内置对象中的其中两个，我们直接</p>
<p>拿到使用就是。</p>
<table>
<thead>
<tr>
<th align="left"><strong>对象</strong></th>
<th align="left"><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left">request</td>
<td align="left"><strong>HttpServletRequest</strong>类的实例</td>
</tr>
<tr>
<td align="left">response</td>
<td align="left"><strong>HttpServletResponse</strong>类的实例</td>
</tr>
<tr>
<td align="left">out</td>
<td align="left"><strong>PrintWriter</strong>类的实例，用于把结果输出至网页上，<strong>JSPWriter</strong></td>
</tr>
<tr>
<td align="left">session</td>
<td align="left"><strong>HttpSession</strong>类的实例</td>
</tr>
<tr>
<td align="left">application</td>
<td align="left"><strong>ServletContext</strong>类的实例，与应用上下文有关</td>
</tr>
<tr>
<td align="left">config</td>
<td align="left"><strong>ServletConfig</strong>类的实例</td>
</tr>
<tr>
<td align="left">pageContext</td>
<td align="left"><strong>PageContext</strong>类的实例，提供对JSP页面所有对象以及命名空间的访问</td>
</tr>
<tr>
<td align="left">page</td>
<td align="left">类似于Java类中的this关键字</td>
</tr>
<tr>
<td align="left">Exception</td>
<td align="left"><strong>Exception</strong>类的对象，代表发生错误的JSP页面中对应的异常对象</td>
</tr>
</tbody></table>
<h4 id="2-6、JSP四大作用域对象"><a href="#2-6、JSP四大作用域对象" class="headerlink" title="2.6、JSP四大作用域对象"></a>2.6、JSP四大作用域对象</h4><table>
<thead>
<tr>
<th>作用域对象</th>
<th>类</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>application</td>
<td>ServletContext</td>
<td>整个应用</td>
</tr>
<tr>
<td>session</td>
<td>HttpSession</td>
<td>一次会话</td>
</tr>
<tr>
<td>request</td>
<td>HttpServletRequest</td>
<td>一次请求</td>
</tr>
<tr>
<td>pageContext</td>
<td>PageContext</td>
<td>当前页</td>
</tr>
</tbody></table>
<p>JSP四大作用域对象属于9大内置对象</p>
<h4 id="2-7、补充内容"><a href="#2-7、补充内容" class="headerlink" title="2.7、补充内容"></a>2.7、补充内容</h4><p>在JSP动作元素中，我们只了解 jsp:include这个动作元素</p>
<p><img src="/.com//jspinclude.png" srcset="/img/loading.gif"></p>
<p>我们要用 jsp:include 来做包含页面的时候，就不能再使用<strong>片段</strong>（<code>2.4.2</code>）</p>
<p>面试题:动态包含(动作jsp:include)与静态包含(指令include)的区别? </p>
<p>什么时候用动态包含，什么时候用静态包含?</p>
<ul>
<li>静态包含先把页面包含进来,再翻译成java代码!!  (只有一个文件)</li>
<li>动态包含先都编译成java代码,再将内容进行包含!!  (有多个文件)</li>
</ul>
<p>有个说法：</p>
<ul>
<li>如果包含的是静态页面(html),那么使用静态包含</li>
<li>如果包含的是动态网页(jsp),那么使用动态包含</li>
</ul>
<p>编译的文件（\apache-tomcat-7.0.57\work\Catalina\路径下面）</p>
<ul>
<li>静态包含&lt;%@ include file=”/include/b.jsp” %&gt;</li>
</ul>
<p><img src="/.com//clip_image001.png" srcset="/img/loading.gif" alt="img"></p>
<ul>
<li>动态包含&lt;jsp:include page=”/include2/b.jsp”&gt;&lt;/ jsp:include&gt;</li>
</ul>
<p><img src="/.com//clip_image002.png" srcset="/img/loading.gif" alt="img"></p>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/Java/">Java</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/JSP/">JSP</a>
                    
                      <a class="hover-with-bg" href="/tags/Servlet/">Servlet</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！</p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2019/11/21/JavaBean&amp;EL&amp;JSTL/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">JavaBean&EL&JSTL</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2019/11/19/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BB%83%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89/">
                        <span class="hidden-mobile">数据库练习（一）</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  

  

  
</footer>

<!-- SCRIPTS -->

  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" ></script>
<script  src="/js/debouncer.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/lazyload.js" ></script>
  



  



  <script  src="https://cdn.jsdelivr.net/npm/tocbot@4.12.0/dist/tocbot.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.0/anchor.min.js" ></script>



  <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js" ></script>






  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    (function () {
      var path = "/local-search.xml";
      var inputArea = document.querySelector("#local-search-input");
      inputArea.onclick = function () {
        searchFunc(path, 'local-search-input', 'local-search-result');
        this.onclick = null
      }
    })()
  </script>















<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>



</body>
</html>
