<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Macå®‰è£…Wine-6.0</title>
    <link href="/2021/02/16/Mac%E5%AE%89%E8%A3%85Wine-6-0/"/>
    <url>/2021/02/16/Mac%E5%AE%89%E8%A3%85Wine-6-0/</url>
    
    <content type="html"><![CDATA[<h2 id="Macå®‰è£…Wine-6-0"><a href="#Macå®‰è£…Wine-6-0" class="headerlink" title="Macå®‰è£…Wine-6.0"></a>Macå®‰è£…Wine-6.0</h2><p>å®˜æ–¹ç½‘ç«™ä¸ºMacOSç”¨æˆ·æä¾›äº†äºŒè¿›åˆ¶å®‰è£…ç‰ˆæœ¬Wine-5.xï¼š<a href="https://www.winehq.org/">https://www.winehq.org/</a></p><p><img src="/2021/02/16/Mac%E5%AE%89%E8%A3%85Wine-6-0/BinaryPackages.png" alt="WineäºŒè¿›åˆ¶äºŒè¿›åˆ¶å®‰è£…åŒ…"></p><p>è¿™ä¸ªäºŒè¿›åˆ¶å®‰è£…åŒ…ä»…é€‚ç”¨äºä»æ”¯æŒ32ä½åº”ç”¨çš„MacOS10.8-10.14ï¼Œé«˜ç‰ˆæœ¬MacOSä¸å†ä¸º32åº”ç”¨æä¾›æ”¯æŒä¸å¿…å°è¯•ã€‚<a href="https://support.apple.com/en-ca/HT208436">https://support.apple.com/en-ca/HT208436</a></p><h2 id="ä¸‹è½½æºç è§£å‹"><a href="#ä¸‹è½½æºç è§£å‹" class="headerlink" title="ä¸‹è½½æºç è§£å‹"></a>ä¸‹è½½æºç è§£å‹</h2><p><a href="https://dl.winehq.org/wine/source/6.0/wine-6.0.tar.xz">https://dl.winehq.org/wine/source/6.0/wine-6.0.tar.xz</a><br>cdåˆ°wine-6.0ç›®å½•ä¸‹</p><p><img src="/2021/02/16/Mac%E5%AE%89%E8%A3%85Wine-6-0/wine_dir.png" alt="wine_source_dir"></p><h2 id="ç¼–è¯‘å®‰è£…"><a href="#ç¼–è¯‘å®‰è£…" class="headerlink" title="ç¼–è¯‘å®‰è£…"></a>ç¼–è¯‘å®‰è£…</h2><p>æ‰“å¼€READMEæ–‡ä»¶ï¼ŒæŒ‰ç…§æŒ‡å¼•å®‰è£…</p><p><img src="/2021/02/16/Mac%E5%AE%89%E8%A3%85Wine-6-0/README.png" alt="å®‰è£…æŒ‡å¼•"></p><p>ç¼–è¯‘ï¼Œé»˜è®¤ç¼–è¯‘ä¸º32ï¼Œç›®å‰åŸºæœ¬éƒ½æ˜¯64ä½ç³»ç»Ÿï¼Œéœ€è¦æŒ‡å®š64ç¼–è¯‘</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli"><span class="hljs-string">./configure</span> <span class="hljs-params">--enable-win64</span><br></code></pre></td></tr></table></figure><h3 id="è§£å†³ç¯å¢ƒé—®é¢˜"><a href="#è§£å†³ç¯å¢ƒé—®é¢˜" class="headerlink" title="è§£å†³ç¯å¢ƒé—®é¢˜"></a>è§£å†³ç¯å¢ƒé—®é¢˜</h3><p>ç¼–è¯‘å‡ºé”™ï¼Œéœ€è¦å‡çº§bisonç‰ˆæœ¬ï¼ŒæŸ¥çœ‹åŸæœ‰ç‰ˆæœ¬ï¼Œbisonä½2.3ç‰ˆæœ¬ï¼Œé€šè¿‡brewå®‰è£…</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">liaogangwei@<span class="hljs-keyword">bogon </span>wine<span class="hljs-number">-6</span>.<span class="hljs-number">0</span> %<span class="hljs-keyword">bison </span> --version<br><span class="hljs-keyword">bison </span>(GNU <span class="hljs-keyword">Bison) </span><span class="hljs-number">2</span>.<span class="hljs-number">3</span><br><span class="hljs-symbol">configure:</span> error: Your <span class="hljs-keyword">bison </span>version is too old. Please <span class="hljs-keyword">install </span><span class="hljs-keyword">bison </span>version <span class="hljs-number">3</span>.<span class="hljs-number">0</span> <span class="hljs-keyword">or </span>newer.<br></code></pre></td></tr></table></figure><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">liaogangwei@<span class="hljs-keyword">bogon </span>wine<span class="hljs-number">-6</span>.<span class="hljs-number">0</span> %<span class="hljs-keyword">brew </span><span class="hljs-keyword">install </span><span class="hljs-keyword">bison</span><br><span class="hljs-keyword">...</span><br></code></pre></td></tr></table></figure><p>å®‰è£…å®Œæˆåï¼Œè¿˜æ˜¯æç¤ºåŒæ ·çš„é”™è¯¯ï¼Œæ²¡æœ‰ç”Ÿæ•ˆï¼Œéœ€è¦æ‰‹åŠ¨æ›¿æ¢bison</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs awk">liaogangwei@bogon wine-<span class="hljs-number">6.0</span> %brew list bison<br><span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/Cellar/</span>bison<span class="hljs-regexp">/3.7.5/</span>bin/bison<br><span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/Cellar/</span>bison<span class="hljs-regexp">/3.7.5/</span>bin/yacc<br><span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/Cellar/</span>bison<span class="hljs-regexp">/3.7.5/</span>lib/liby.a<br><span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/Cellar/</span>bison<span class="hljs-regexp">/3.7.5/</span>share<span class="hljs-regexp">/aclocal/</span>bison-i18n.m4<br><span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/Cellar/</span>bison<span class="hljs-regexp">/3.7.5/</span>share<span class="hljs-regexp">/bison/</span> (<span class="hljs-number">29</span> files)<br><span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/Cellar/</span>bison<span class="hljs-regexp">/3.7.5/</span>share<span class="hljs-regexp">/doc/</span> (<span class="hljs-number">50</span> files)<br><span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/Cellar/</span>bison<span class="hljs-regexp">/3.7.5/</span>share<span class="hljs-regexp">/info/</span>bison.info<br><span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/Cellar/</span>bison<span class="hljs-regexp">/3.7.5/</span>share<span class="hljs-regexp">/man/</span> (<span class="hljs-number">2</span> files)<br></code></pre></td></tr></table></figure><p>å®‰è£…åˆ°/usr/local/Cellar/bison/ç›®å½•ï¼Œç³»ç»Ÿå®é™…è¿è¡Œåœ¨/Library/Developer/CommandLineTools/usr/binç›®å‰ï¼Œå¤‡ä»½æ—§æ–‡ä»¶ï¼Œå¤åˆ¶æ–°æ–‡ä»¶</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs awk">liaogangwei@bogon wine-<span class="hljs-number">6.0</span> %cd <span class="hljs-regexp">/Library/</span>Developer<span class="hljs-regexp">/CommandLineTools/u</span>sr/bin<br>liaogangwei@bogon wine-<span class="hljs-number">6.0</span> %ls -l bison<br>-rwxr-xr-x  <span class="hljs-number">1</span> root  wheel  <span class="hljs-number">221200</span> <span class="hljs-number">12</span> <span class="hljs-number">19</span> <span class="hljs-number">15</span>:<span class="hljs-number">44</span> bison<br>liaogangwei@bogon wine-<span class="hljs-number">6.0</span> %mv bison bison_bak<br>mv: rename bison to bison_bak: Permission denied<br>liaogangwei@bogon wine-<span class="hljs-number">6.0</span> %sudo mv bison bison_bak<br>liaogangwei@bogon wine-<span class="hljs-number">6.0</span> %sudo cp <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/Cellar/</span>bison<span class="hljs-regexp">/3.5.3/</span>bin<span class="hljs-regexp">/bison ./</span>bison<br></code></pre></td></tr></table></figure><p>ç‰ˆæœ¬æ›´æ–°æˆåŠŸ</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">liaogangwei@<span class="hljs-keyword">bogon </span>wine<span class="hljs-number">-6</span>.<span class="hljs-number">0</span> %<span class="hljs-keyword">bison </span>--version<br><span class="hljs-keyword">bison </span>(GNU <span class="hljs-keyword">Bison) </span><span class="hljs-number">3</span>.<span class="hljs-number">7</span>.<span class="hljs-number">5</span><br>Written <span class="hljs-keyword">by </span>Robert Corbett <span class="hljs-keyword">and </span>Richard Stallman.<br></code></pre></td></tr></table></figure><h3 id="æ­£å¼å°è¯•å®‰è£…"><a href="#æ­£å¼å°è¯•å®‰è£…" class="headerlink" title="æ­£å¼å°è¯•å®‰è£…"></a>æ­£å¼å°è¯•å®‰è£…</h3><p>é‡æ–°è¿›è¡Œconfigureï¼š</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs autoit">liaogangwei<span class="hljs-symbol">@bogon</span> wine<span class="hljs-number">-6.0</span> %./configure --enable-win64<br>...<br>configure: Finished.  <span class="hljs-keyword">Do</span> <span class="hljs-string">&#x27;make&#x27;</span> <span class="hljs-keyword">to</span> compile Wine.<br></code></pre></td></tr></table></figure><p>å¼€å§‹ç¼–è¯‘å®‰è£…ï¼š</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">liaogangwei</span>@bogon wine-<span class="hljs-number">6</span>.<span class="hljs-number">0</span> %make install<br><span class="hljs-attribute">mkdir</span>: /usr/local/lib<span class="hljs-number">64</span>/wine: Permission denied<br><span class="hljs-attribute">mkdir</span>: /usr/local/lib<span class="hljs-number">64</span>/wine: Permission denied<br><span class="hljs-attribute">liaogangwei</span>@bogon wine-<span class="hljs-number">6</span>.<span class="hljs-number">0</span> %<br><span class="hljs-attribute">liaogangwei</span>@bogon wine-<span class="hljs-number">6</span>.<span class="hljs-number">0</span> %<br><span class="hljs-attribute">liaogangwei</span>@bogon wine-<span class="hljs-number">6</span>.<span class="hljs-number">0</span> %sudo make install<br></code></pre></td></tr></table></figure><p>ç¼–è¯‘æ—¶é—´ç¨é•¿ï¼Œéœ€è€å¿ƒç­‰å¾…ã€‚</p><h2 id="å®‰è£…å®Œæˆ-amp-å¤±è´¥"><a href="#å®‰è£…å®Œæˆ-amp-å¤±è´¥" class="headerlink" title="å®‰è£…å®Œæˆ&amp;å¤±è´¥"></a>å®‰è£…å®Œæˆ&amp;å¤±è´¥</h2><p>å°è¯•</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">liaogangwei</span>@bogon wine-<span class="hljs-number">6</span>.<span class="hljs-number">0</span> %wine<span class="hljs-number">64</span> notepad<br><span class="hljs-attribute">error</span>...<br></code></pre></td></tr></table></figure><p>è¿˜æœ‰å…¶ä»–ä¸€å †é—®é¢˜</p><p><a href="https://www.cnblogs.com/chendeqiang/p/14309515.html">https://www.cnblogs.com/chendeqiang/p/14309515.html</a></p>]]></content>
    
    
    <categories>
      
      <category>è½¯ä»¶å®‰è£…</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç¯å¢ƒæ­å»º</tag>
      
      <tag>è½¯ä»¶å®‰è£…</tag>
      
      <tag>Mac</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>2021å¹´2æœˆ11æ—¥æˆ‘åœ¨åŒ—äº¬è¿‡å¤§å¹´</title>
    <link href="/2021/02/15/2021%E5%B9%B42%E6%9C%8811%E6%97%A5%E6%88%91%E5%9C%A8%E5%8C%97%E4%BA%AC%E8%BF%87%E5%A4%A7%E5%B9%B4/"/>
    <url>/2021/02/15/2021%E5%B9%B42%E6%9C%8811%E6%97%A5%E6%88%91%E5%9C%A8%E5%8C%97%E4%BA%AC%E8%BF%87%E5%A4%A7%E5%B9%B4/</url>
    
    <content type="html"><![CDATA[<h1 id="åŒ—äº¬è¿‡å¤§å¹´20210211"><a href="#åŒ—äº¬è¿‡å¤§å¹´20210211" class="headerlink" title="åŒ—äº¬è¿‡å¤§å¹´20210211"></a>åŒ—äº¬è¿‡å¤§å¹´20210211</h1><p>ä»Šå¹´æ˜¯æˆ‘æ¯•ä¸šæ¥åˆ°åŒ—äº¬å‚åŠ å·¥ä½œçš„ç¬¬ä¸€å¹´ï¼Œå› ä¸ºå…¨å›½æ–°å† ç–«æƒ…çš„åå¼¹æ²¡èƒ½å›åˆ°è€å®¶è¿‡å¹´ã€‚ç–«æƒ…åå¼¹ï¼Œå•ä½å“åº”å·å¬ï¼Œå…¨ä½“è½¯å¼€ä¸­å¿ƒäººå‘˜åŸåˆ™ä¸Šéœ€ç•™äº¬è¿‡å¹´ï¼Œæ— ç‰¹æ®Šæƒ…å†µä¸å…è®¸ç¦»äº¬ã€‚</p><h2 id="å¹´è´§å¤§æ‰«è¡"><a href="#å¹´è´§å¤§æ‰«è¡" class="headerlink" title="å¹´è´§å¤§æ‰«è¡"></a>å¹´è´§å¤§æ‰«è¡</h2><p>è¿˜å¥½æˆ‘ä»¬ä¸‰åå‰å¤•æ¥è¶…å¸‚å¤§æ‰«è¡ï¼Œä¸ç„¶è¿™ä¸ªå¹´ä¼°è®¡ä¸å¤ªå¥½è¿‡ï¼</p><p><img src="/2021/02/15/2021%E5%B9%B42%E6%9C%8811%E6%97%A5%E6%88%91%E5%9C%A8%E5%8C%97%E4%BA%AC%E8%BF%87%E5%A4%A7%E5%B9%B4/IMG_20210210_170305.jpg" alt="å¹´è´§å¤§æ‰«è¡"></p><h2 id="é™¤å¤•å•¦ï¼Œåƒå¹´å¤œé¥­"><a href="#é™¤å¤•å•¦ï¼Œåƒå¹´å¤œé¥­" class="headerlink" title="é™¤å¤•å•¦ï¼Œåƒå¹´å¤œé¥­"></a>é™¤å¤•å•¦ï¼Œåƒå¹´å¤œé¥­</h2><p>å¾¡ç”¨å¤§å¨ä»¬åœ¨åšé¥­ ğŸ˜‹ï¼Œæˆ‘ä»¬è¿™å„¿ç¬¬ä¸€æ¬¡åœ¨åŒ—äº¬è¿‡å¹´ï¼Œå’Œè€å®¶ä¸ä¸€æ ·çš„æ˜¯æˆ‘ä»¬æŠŠå¹´å¤œé¥­å‡†å¤‡çš„å¾ˆä¸°ç››ï¼Œè€å®¶çš„è¯ä¸‰åæ™šé¥­å°±æ˜¯ä¸€é¡¿é¥ºå­æ±¤åœ†ã€‚</p><p><img src="/2021/02/15/2021%E5%B9%B42%E6%9C%8811%E6%97%A5%E6%88%91%E5%9C%A8%E5%8C%97%E4%BA%AC%E8%BF%87%E5%A4%A7%E5%B9%B4/IMG_20210211_190140.jpg" alt="è´¾æ€»åº·æ€»å‡†å¤‡å¹´å¤œé¥­"></p><h2 id="è¾¹åƒé¥­ï¼Œè¾¹çœ‹æ˜¥èŠ‚è”æ¬¢æ™šä¼š"><a href="#è¾¹åƒé¥­ï¼Œè¾¹çœ‹æ˜¥èŠ‚è”æ¬¢æ™šä¼š" class="headerlink" title="è¾¹åƒé¥­ï¼Œè¾¹çœ‹æ˜¥èŠ‚è”æ¬¢æ™šä¼š"></a>è¾¹åƒé¥­ï¼Œè¾¹çœ‹æ˜¥èŠ‚è”æ¬¢æ™šä¼š</h2><p>ä¸Šé¥­å•¦ï¼åŒäº‹å®¶é‡Œæ¥è§†é¢‘è¯´æˆ‘ä»¬æ˜¯ä¸æ˜¯åœ¨åœ°ä¸ŠåƒğŸ˜…ã€‚æœ‰å›¾æœ‰çœŸç›¸ï¼Œæˆ‘ä»¬çœŸçš„æ²¡æœ‰åœ¨åœ°ä¸Šåƒï¼Œæˆ‘ä»¬åœ¨é˜³å°ä¸ŠåƒğŸ¤£ã€‚</p><p><img src="/2021/02/15/2021%E5%B9%B42%E6%9C%8811%E6%97%A5%E6%88%91%E5%9C%A8%E5%8C%97%E4%BA%AC%E8%BF%87%E5%A4%A7%E5%B9%B4/IMG_20210211_185302.jpg" alt="ä¸Šé¥­"></p><h2 id="å…¬å¸å¹´å¤œé¥­ä¹Ÿä¸é”™"><a href="#å…¬å¸å¹´å¤œé¥­ä¹Ÿä¸é”™" class="headerlink" title="å…¬å¸å¹´å¤œé¥­ä¹Ÿä¸é”™"></a>å…¬å¸å¹´å¤œé¥­ä¹Ÿä¸é”™</h2><p>å› ä¸ºç–«æƒ…ä¸è®©ç¦»äº¬ï¼Œå•ä½ä¹Ÿç»„ç»‡äº†é£Ÿå ‚ç»™æˆ‘ä»¬å¤–åœ°ä¸èƒ½å›å®¶çš„å‘˜å·¥å‡†å¤‡äº†å¹´å¤œé¥­ï¼Œçœ‹ç€è¿˜ä¸é”™ğŸ˜—</p><p><img src="/2021/02/15/2021%E5%B9%B42%E6%9C%8811%E6%97%A5%E6%88%91%E5%9C%A8%E5%8C%97%E4%BA%AC%E8%BF%87%E5%A4%A7%E5%B9%B4/mmexport1613396939031.jpg" alt="å…¬å¸å¹´å¤œé¥­"></p><p><strong>ç¥ï¼šæ–°å¹´å¿«ä¹ï¼Œå¿ƒæƒ³äº‹æˆï¼</strong></p>]]></content>
    
    
    <categories>
      
      <category>ç”Ÿæ´»çäº‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å¿ƒå¾—ä½“ä¼š</tag>
      
      <tag>è¶£äº‹</tag>
      
      <tag>æ‚è°ˆ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title></title>
    <link href="/2021/02/15/SSM%E9%9B%86%E6%88%90/"/>
    <url>/2021/02/15/SSM%E9%9B%86%E6%88%90/</url>
    
    <content type="html"><![CDATA[<h3 id="SSMé›†æˆ"><a href="#SSMé›†æˆ" class="headerlink" title="SSMé›†æˆ"></a>SSMé›†æˆ</h3><p>Spring+SpringMVC+MyBatis</p><p>æ¡†æ¶é›†æˆæ ¸å¿ƒï¼šå¦‚æœä½ çš„é¡¹ç›®ä¸­ï¼Œç”¨åˆ°äº†Springæ¡†æ¶ï¼Œé‚£ä¹ˆå…¶ä»–æ¡†æ¶ä¸»è¦å°±æ˜¯å’ŒSpringé›†æˆï¼ï¼</p><p>å’ŒSpringé›†æˆçš„æ ¸å¿ƒæ€è·¯ï¼š</p><ol><li>æŠŠå½“å‰æ¡†æ¶çš„æ ¸å¿ƒç±»ï¼Œäº¤ç»™Springç®¡ç†</li><li>å¦‚æœæ¡†æ¶æœ‰äº‹åŠ¡ï¼Œé‚£ä¹ˆäº‹åŠ¡ä¹Ÿè¦ç»Ÿä¸€äº¤ç»™Springç®¡ç†</li></ol><p>æ­¥éª¤ï¼š</p><ol><li>Spring</li><li>Spring+SpringMVC</li><li>Spring+MyBatis</li><li>Spring+SpringMVC+MyBatisï¼ˆäº‹åŠ¡ï¼‰</li></ol><p>å¦‚æœè¦åšä¸‰å¤§æ¡†æ¶é›†æˆï¼Œå¿…é¡»ä¿è¯åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­ï¼Œæ¯ä¸ªæ¡†æ¶éƒ½èƒ½å¤Ÿç‹¬ç«‹è¿è¡Œï¼ï¼</p><h4 id="1ã€å•ç‹¬é›†æˆSpring"><a href="#1ã€å•ç‹¬é›†æˆSpring" class="headerlink" title="1ã€å•ç‹¬é›†æˆSpring"></a>1ã€å•ç‹¬é›†æˆSpring</h4><h5 id="1-1ã€æ–°å»ºJavaWebé¡¹ç›®"><a href="#1-1ã€æ–°å»ºJavaWebé¡¹ç›®" class="headerlink" title="1.1ã€æ–°å»ºJavaWebé¡¹ç›®"></a>1.1ã€æ–°å»ºJavaWebé¡¹ç›®</h5><h5 id="1-2ã€å¯¼å…¥Springçš„JaråŒ…"><a href="#1-2ã€å¯¼å…¥Springçš„JaråŒ…" class="headerlink" title="1.2ã€å¯¼å…¥Springçš„JaråŒ…"></a>1.2ã€å¯¼å…¥Springçš„JaråŒ…</h5><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">org.springframework.version</span>&gt;</span>4.2.5.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">org.springframework.version</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">com.fasterxml.jackson.version</span>&gt;</span>2.6.5<span class="hljs-tag">&lt;/<span class="hljs-name">com.fasterxml.jackson.version</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">org.slf4j.version</span>&gt;</span>1.6.1<span class="hljs-tag">&lt;/<span class="hljs-name">org.slf4j.version</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span></span><br><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span></span><br><span class="xml">  <span class="hljs-comment">&lt;!-- Springçš„æ”¯æŒåŒ… --&gt;</span></span><br><span class="xml">  <span class="hljs-comment">&lt;!-- spring-core --&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$</span><span class="hljs-template-variable">&#123;org.springframework.version&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">  </span><br><span class="xml">  <span class="hljs-comment">&lt;!-- spring-context --&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-context<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$</span><span class="hljs-template-variable">&#123;org.springframework.version&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">  </span><br><span class="xml">  <span class="hljs-comment">&lt;!-- spring-context-support --&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-context-support<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$</span><span class="hljs-template-variable">&#123;org.springframework.version&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></span><br><br><span class="xml">  <span class="hljs-comment">&lt;!-- spring-tx --&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-tx<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$</span><span class="hljs-template-variable">&#123;org.springframework.version&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">  </span><br><span class="xml">  <span class="hljs-comment">&lt;!-- spring-jdbc --&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-jdbc<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$</span><span class="hljs-template-variable">&#123;org.springframework.version&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">  </span><br><span class="xml">  <span class="hljs-comment">&lt;!-- spring-orm --&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-orm<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$</span><span class="hljs-template-variable">&#123;org.springframework.version&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">  </span><br><span class="xml">  <span class="hljs-comment">&lt;!-- spring-aop --&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-aop<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$</span><span class="hljs-template-variable">&#123;org.springframework.version&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">  </span><br><span class="xml">  <span class="hljs-comment">&lt;!-- spring-test --&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-test<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$</span><span class="hljs-template-variable">&#123;org.springframework.version&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h5 id="1-3ã€å‡†å¤‡ä¸€ä¸ªapplicationContext-xml"><a href="#1-3ã€å‡†å¤‡ä¸€ä¸ªapplicationContext-xml" class="headerlink" title="1.3ã€å‡†å¤‡ä¸€ä¸ªapplicationContext.xml"></a>1.3ã€å‡†å¤‡ä¸€ä¸ªapplicationContext.xml</h5><h5 id="1-4ã€æµ‹è¯•"><a href="#1-4ã€æµ‹è¯•" class="headerlink" title="1.4ã€æµ‹è¯•"></a>1.4ã€æµ‹è¯•</h5><p>é…ç½®Beanåšæµ‹è¯•</p><p><img src="/2021/02/15/SSM%E9%9B%86%E6%88%90/2254.png" alt="image-20191213015952254"></p><h4 id="2ã€é›†æˆSpring-SpringMVC"><a href="#2ã€é›†æˆSpring-SpringMVC" class="headerlink" title="2ã€é›†æˆSpring+SpringMVC"></a>2ã€é›†æˆSpring+SpringMVC</h4><h5 id="2-1ã€å¯¼å…¥SpringMVCçš„JaråŒ…ï¼ˆSpringæœ‰å…³çš„ï¼Œæœ‰21ä¸ªï¼‰"><a href="#2-1ã€å¯¼å…¥SpringMVCçš„JaråŒ…ï¼ˆSpringæœ‰å…³çš„ï¼Œæœ‰21ä¸ªï¼‰" class="headerlink" title="2.1ã€å¯¼å…¥SpringMVCçš„JaråŒ…ï¼ˆSpringæœ‰å…³çš„ï¼Œæœ‰21ä¸ªï¼‰"></a>2.1ã€å¯¼å…¥SpringMVCçš„JaråŒ…ï¼ˆSpringæœ‰å…³çš„ï¼Œæœ‰21ä¸ªï¼‰</h5><p>aopã€txã€jdbcã€webã€webmvcã€dbcpã€fileuploadã€jackson</p><p><img src="/2021/02/15/SSM%E9%9B%86%E6%88%90/image-20191212145239902.png" alt="image-20191212145239902"></p><p>ç›¸å…³çš„Mavené¡¹ç›®ä¾èµ–ï¼š</p><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">org.springframework.version</span>&gt;</span>4.2.5.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">org.springframework.version</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">com.fasterxml.jackson.version</span>&gt;</span>2.6.5<span class="hljs-tag">&lt;/<span class="hljs-name">com.fasterxml.jackson.version</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">org.slf4j.version</span>&gt;</span>1.6.1<span class="hljs-tag">&lt;/<span class="hljs-name">org.slf4j.version</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span></span><br><br><span class="xml">  <span class="hljs-comment">&lt;!-- å¼•å…¥springmvc:webå‰ç«¯çš„æ”¯æŒ --&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$</span><span class="hljs-template-variable">&#123;org.springframework.version&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">  </span><br><span class="xml">  <span class="hljs-comment">&lt;!-- å¼•å…¥springmvc:spring-webmvcæ ¸å¿ƒåŒ…--&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-webmvc<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$</span><span class="hljs-template-variable">&#123;org.springframework.version&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">  </span><br><span class="xml">  <span class="hljs-comment">&lt;!-- SpringMCVä¸Šä¼ éœ€è¦ç”¨åˆ°ioåŒ…--&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.commons<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>commons-io<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.3.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">  </span><br><span class="xml">  <span class="hljs-comment">&lt;!-- æ–‡ä»¶ä¸Šä¼ ç”¨åˆ°çš„åŒ… --&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>commons-fileupload<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>commons-fileupload<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">  </span><br><span class="xml">  <span class="hljs-comment">&lt;!-- SpringMVCçš„json-coreæ”¯æŒåŒ… --&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jackson-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$</span><span class="hljs-template-variable">&#123;com.fasterxml.jackson.version&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">  </span><br><span class="xml">  <span class="hljs-comment">&lt;!-- jackson-annotations --&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jackson-annotations<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$</span><span class="hljs-template-variable">&#123;com.fasterxml.jackson.version&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">  </span><br><span class="xml">  <span class="hljs-comment">&lt;!-- jackson-databind --&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jackson-databind<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$</span><span class="hljs-template-variable">&#123;com.fasterxml.jackson.version&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">    </span><br><span class="xml">  <span class="hljs-comment">&lt;!-- commons-dbcp --&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>commons-dbcp<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>commons-dbcp<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">  </span><br><span class="xml">  <span class="hljs-comment">&lt;!-- commons-logging --&gt;</span></span><br><span class="xml">  <span class="hljs-comment">&lt;!-- commons-pool --&gt;</span></span><br><span class="xml">  <span class="hljs-comment">&lt;!--weaver--&gt;</span></span><br><span class="xml">  <span class="hljs-comment">&lt;!--spring-aspects--&gt;</span></span><br><span class="xml">  <span class="hljs-comment">&lt;!-- spring-beans --&gt;</span></span><br><span class="xml">  <span class="hljs-comment">&lt;!-- spring-experssion --&gt;</span></span><br><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h5 id="2-2ã€web-xmlæ–‡ä»¶"><a href="#2-2ã€web-xmlæ–‡ä»¶" class="headerlink" title="2.2ã€web.xmlæ–‡ä»¶"></a>2.2ã€web.xmlæ–‡ä»¶</h5><p>1ã€postä¹±ç è¿‡æ»¤å™¨           2ã€springmvcæ ¸å¿ƒæ§åˆ¶å™¨</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs xml">...<br><br><span class="hljs-comment">&lt;!-- postæäº¤ä¸­æ–‡ä¹±ç çš„è¿‡æ»¤å™¨ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">filter</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-class</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">init-param</span>&gt;</span><br><span class="hljs-comment">&lt;!-- æŒ‰ç…§ä»€ä¹ˆæ ¼å¼è¿›è¡Œè½¬ç  --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>encoding<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">init-param</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">filter-mapping</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/*<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter-mapping</span>&gt;</span><br><br>...<br></code></pre></td></tr></table></figure><h4 id><a href="#" class="headerlink" title></a></h4><h5 id="2-3ã€é›†æˆSpringMVC"><a href="#2-3ã€é›†æˆSpringMVC" class="headerlink" title="2.3ã€é›†æˆSpringMVC"></a>2.3ã€é›†æˆSpringMVC</h5><p><strong>æ–¹æ¡ˆä¸€ï¼š</strong>springmvcåˆå§‹åŒ–çš„æ—¶å€™å°±ä¸€èµ·æŠŠSpringåˆå§‹åŒ–äº†</p><p><code>web.xmlé…ç½®æ–‡ä»¶ï¼š</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--Springç›‘å¬å™¨ ApplicationContext è½½å…¥ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">listener</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="hljs-tag">&lt;/<span class="hljs-name">listener-class</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">listener</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- é…ç½®æ ¸å¿ƒæ§åˆ¶å™¨ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>DispatcherServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">init-param</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>contextConfigLocation<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- å·²ç»åœ¨applicationContext.xmlä¸­å¼•å…¥applicationContext-mvc.xml --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>classpath:applicationContext.xml<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">init-param</span>&gt;</span><br>  <span class="hljs-comment">&lt;!-- Springåˆå§‹åŒ–æ—¶å°±åŠ è½½è¿™ä¸ªServlet --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">load-on-startup</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">load-on-startup</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>DispatcherServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>  <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">  1. /* :æ‹¦æˆªæ‰€æœ‰.åŒ…æ‹¬é™æ€èµ„æº (ä¸å»ºè®®ä½¿ç”¨)</span><br><span class="hljs-comment">  2. .action .do : æ‹¦æˆªä»¥actionå’Œdoç»“å°¾çš„è¯·æ±‚ (ä¸»è¦ç”¨äºåå°ç³»ç»Ÿ.)</span><br><span class="hljs-comment">  3. / :æ‹¦æˆªæ‰€æœ‰,ä½†æ˜¯ä¸åŒ…å«jsp...</span><br><span class="hljs-comment">  å…¶ä»–é™æ€èµ„æºå¦‚:.css,.jsç­‰éœ€è¦ç”¨ä¾‹å¤–çš„é…ç½®è¿›è¡Œæ”¾è¡Œ (ä¸»è¦ç”¨äºå‰å°ç³»ç»Ÿ)--&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br></code></pre></td></tr></table></figure><p><code>applicationContext.xmlæ–‡ä»¶ï¼š</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/context&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:mvc</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/mvc&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:p</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/p&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:tx</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/tx&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;</span></span><br><span class="hljs-tag"><span class="hljs-string">         http://www.springframework.org/schema/beans</span></span><br><span class="hljs-tag"><span class="hljs-string">         http://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class="hljs-tag"><span class="hljs-string">         http://www.springframework.org/schema/context</span></span><br><span class="hljs-tag"><span class="hljs-string">         http://www.springframework.org/schema/context/spring-context.xsd</span></span><br><span class="hljs-tag"><span class="hljs-string">         http://www.springframework.org/schema/tx</span></span><br><span class="hljs-tag"><span class="hljs-string">         http://www.springframework.org/schema/tx/spring-tx.xsd</span></span><br><span class="hljs-tag"><span class="hljs-string">         http://www.springframework.org/schema/mvc</span></span><br><span class="hljs-tag"><span class="hljs-string">         http://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;</span>&gt;</span><br>  <br>  <span class="hljs-comment">&lt;!-- å°†Dateäº¤ç»™Springç®¡ç† --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;myDate&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;java.util.Date&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br>  <br>  <span class="hljs-comment">&lt;!-- ä¸€æ¬¡æ‰«æå°±OK --&gt;</span><br>  <span class="hljs-comment">&lt;!-- è¯¥é…ç½®æ‰«æäº†æ‰€æœ‰çš„ç»„ä»¶(Controllerã€serviceã€‚ã€‚ã€‚) --&gt;</span><br>  <span class="hljs-comment">&lt;!-- @Componentç»„ä»¶, @RepositoryæŒä¹…å±‚, @Serviceä¸šåŠ¡é€»è¾‘å±‚, and @Controlleræ§åˆ¶å™¨ --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">&quot;edu.zzu&quot;</span>/&gt;</span><br>  <br>  <span class="hljs-comment">&lt;!-- åŠ è½½å…¶ä»–æ¨¡å—ï¼šå¦‚ï¼ŒMVCã€SHIROç­‰ --&gt;</span><br>  <br>  <span class="hljs-comment">&lt;!-- å¼•å…¥å…¶å®ƒæ‰€æœ‰Springçš„é…ç½®ï¼šå¦‚SpringMVCé…ç½® --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">import</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;applicationContext-mvc.xml&quot;</span>&gt;</span><br>  <br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure><p><code>applicationContext-mvc.xmlæ–‡ä»¶ï¼š</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> å±æ€§å¤ªé•¿äº†ï¼Œåœ¨æ­¤å¤„è¢«çœç•¥ï¼Œè¯·ä»ä¸Šé¢å¤åˆ¶æ·»åŠ &gt;</span><br>  <br>  <span class="hljs-comment">&lt;!-- é™æ€èµ„æºæ”¾è¡Œ --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">mvc:default-servlet-handler</span>/&gt;</span><br><br><span class="hljs-comment">&lt;!--æ‰«æåŒ…ï¼Œæ­¤å¤„ç¬¬ä¸€ç§æ–¹æ¡ˆä¸éœ€è¦è¿™æ ·å•ç‹¬å¯¼å…¥</span><br><span class="hljs-comment">  &lt;context:component-scan base-package=&quot;edu.zzu.controller&quot;/&gt;</span><br><span class="hljs-comment">--&gt;</span><br><br>  <span class="hljs-comment">&lt;!-- å¼€å¯SpringMVCæ”¯æŒæ³¨è§£ @RequestMapping --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">mvc:annotation-driven</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>æ–¹æ¡ˆäºŒï¼š</strong>springå’ŒspringMVCåˆ†åˆ«åˆå§‹åŒ–</p><p>web.xmlæ–‡ä»¶ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- åˆå§‹åŒ–Spring --&gt;</span><br><br>  <span class="hljs-comment">&lt;!--åˆå§‹åŒ–Spring Shiroå¿…é¡»è¦æœ‰ä¸€ä¸ªSpringï¼Œæ‰€ä»¥åªèƒ½ç”¨æ­¤ç¬¬äºŒç§æ–¹æ¡ˆ--&gt;</span><br>  <span class="hljs-comment">&lt;!-- Springçš„é…ç½®æ–‡ä»¶è·¯å¾„ï¼Œç”¨äºåˆå§‹åŒ–Spring --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">context-param</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>contextConfigLocation<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>classpath:applicationContext.xml<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">context-param</span>&gt;</span><br>  <br>  <span class="hljs-comment">&lt;!--Springç›‘å¬å™¨ ApplicationContext è½½å…¥ï¼Œåˆå§‹åŒ–Spring --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">listener</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="hljs-tag">&lt;/<span class="hljs-name">listener-class</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">listener</span>&gt;</span><br><br><br><span class="hljs-comment">&lt;!-- åˆå§‹åŒ–SpringMVC --&gt;</span><br><br>  <span class="hljs-comment">&lt;!-- Spring MVC æ ¸å¿ƒé…ç½®å¼€å§‹ --&gt;</span><br>  <span class="hljs-comment">&lt;!-- é…ç½®æ ¸å¿ƒæ§åˆ¶å™¨ --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>DispatcherServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- åˆå§‹åŒ–SpringMVC --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">init-param</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>contextConfigLocation<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>classpath:applicationContext-mvc.xml<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">init-param</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- Springåˆå§‹åŒ–æ—¶å°±åŠ è½½è¿™ä¸ªServlet --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">load-on-startup</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">load-on-startup</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>DispatcherServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">    1. /* :æ‹¦æˆªæ‰€æœ‰.åŒ…æ‹¬é™æ€èµ„æº (ä¸å»ºè®®ä½¿ç”¨)</span><br><span class="hljs-comment">    2. .action .do : æ‹¦æˆªä»¥actionå’Œdoç»“å°¾çš„è¯·æ±‚ (ä¸»è¦ç”¨äºåå°ç³»ç»Ÿ.)</span><br><span class="hljs-comment">    3. / :æ‹¦æˆªæ‰€æœ‰,ä½†æ˜¯ä¸åŒ…å«jsp...</span><br><span class="hljs-comment">    å…¶ä»–é™æ€èµ„æºå¦‚:.css,.jsç­‰éœ€è¦ç”¨ä¾‹å¤–çš„é…ç½®è¿›è¡Œæ”¾è¡Œ (ä¸»è¦ç”¨äºå‰å°ç³»ç»Ÿ)--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br></code></pre></td></tr></table></figure><p><code>applicationContext.xmlæ–‡ä»¶ï¼š</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> å ä½ï¼šè¯·æ‹·è´ä¹‹å‰é…ç½®æ–‡ä»¶æ­¤å¤„çš„å†…å®¹&gt;</span><br>  <br>  <span class="hljs-comment">&lt;!-- å°†Dateäº¤ç»™Springç®¡ç† --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;myDate&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;java.util.Date&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br>  <br><span class="hljs-comment">&lt;!-- ç¬¬äºŒç§æ–¹æ¡ˆä¸å†å¦‚æ­¤æ‰«æ</span><br><span class="hljs-comment">  &lt;!-- ä¸€æ¬¡æ‰«æå°±OK --&gt;</span><br>  <span class="hljs-comment">&lt;!-- è¯¥é…ç½®æ‰«æäº†æ‰€æœ‰çš„ç»„ä»¶(Controllerã€serviceã€‚ã€‚ã€‚) --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">&quot;edu.zzu&quot;</span>/&gt;</span><br>--&gt;<br>  <br>  <span class="hljs-comment">&lt;!-- åªæ‰«æserviceï¼Œå…¶ä»–æ¨¡å—ç”±å…¶ä»–æ¨¡å—è‡ªè¡Œæ‰«æã€‚å¦‚SpringMVCæ‰«æcontroller --&gt;</span><br>  <span class="hljs-comment">&lt;!-- @Componentç»„ä»¶, @RepositoryæŒä¹…å±‚, @Serviceä¸šåŠ¡é€»è¾‘å±‚, and @Controlleræ§åˆ¶å™¨ --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">&quot;edu.zzu.service&quot;</span>/&gt;</span><br>  <br>  <span class="hljs-comment">&lt;!-- åŠ è½½å…¶ä»–æ¨¡å—(éSpringMVC)ï¼šå¦‚redisã€SHIROç­‰ --&gt;</span><br><br><span class="hljs-comment">&lt;!--ç¬¬äºŒç§æ–¹æ¡ˆä¸èƒ½è¿™æ ·å¼•å…¥SpringMVCçš„é…ç½®</span><br><span class="hljs-comment">  &lt;!-- å¼•å…¥å…¶å®ƒæ‰€æœ‰Springçš„é…ç½®ï¼šå¦‚SpringMVCé…ç½® --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">import</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;applicationContext-mvc.xml&quot;</span>&gt;</span><br>--&gt;<br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure><p><code>applicationContext-mvc.xmlæ–‡ä»¶ï¼š</code></p><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> å ä½ï¼šè¯·æ‹·è´ä¹‹å‰é…ç½®æ–‡ä»¶æ­¤å¤„çš„å†…å®¹&gt;</span></span><br><br><span class="xml"><span class="hljs-comment">&lt;!--é™æ€èµ„æºæ”¾è¡Œ--&gt;</span></span><br><span class="xml"><span class="hljs-comment">&lt;!--springmvcæ³¨è§£é©±åŠ¨--&gt;</span></span><br><span class="xml"><span class="hljs-comment">&lt;!--æ‰«åŒ…:controllerå±‚--&gt;</span></span><br><span class="xml"><span class="hljs-comment">&lt;!--è§†å›¾è§£æå™¨--&gt;</span></span><br><span class="xml"><span class="hljs-comment">&lt;!--æ–‡ä»¶ä¸Šä¼ --&gt;</span></span><br><span class="xml">  </span><br><span class="xml">  <span class="hljs-comment">&lt;!-- é™æ€èµ„æº(å›¾ç‰‡ï¼Œcssï¼Œjsç­‰)æ”¾è¡Œ --&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">mvc:default-servlet-handler</span>/&gt;</span></span><br><br><span class="xml">  <span class="hljs-comment">&lt;!-- æ‰«æcontorllerå±‚çš„åŒ…ï¼Œæ­¤å¤„ç¬¬äºŒç§æ–¹æ¡ˆéœ€è¦è¿™æ ·å•ç‹¬å¯¼å…¥ --&gt;</span></span><br><span class="xml">  <span class="hljs-comment">&lt;!-- @Componentç»„ä»¶, @RepositoryæŒä¹…å±‚, @Serviceä¸šåŠ¡é€»è¾‘å±‚, and @Controlleræ§åˆ¶å™¨ --&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">&quot;edu.zzu.controller&quot;</span>/&gt;</span></span><br><br><span class="xml">  <span class="hljs-comment">&lt;!-- å¼€å¯SpringMVCæ”¯æŒæ³¨è§£ @RequestMapping --&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">mvc:annotation-driven</span>/&gt;</span></span><br><span class="xml">  </span><br><span class="xml">  <span class="hljs-comment">&lt;!-- è§†å›¾è§£æå™¨ --&gt;</span></span><br><span class="xml">  <span class="hljs-comment">&lt;!-- è®¾ç½®è§†å›¾è·¯å¾„çš„å‰åç¼€ï¼Œè¯¥é…ç½®å¯ä»¥è®©æˆ‘ä»¬å†™è§†å›¾è·¯å¾„çš„æ—¶å€™æ›´ç®€å•ã€‚ --&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="xml">  <span class="hljs-comment">&lt;!--å‰ç¼€ï¼š jspåœ¨å½“å‰å·¥ç¨‹æ–‡ä»¶å¤¹çš„è·¯å¾„ --&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;prefix&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;/WEB-INF/views/&quot;</span> /&gt;</span></span><br><span class="xml">  <span class="hljs-comment">&lt;!--åç¼€ï¼šæ‰©å±•å --&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;suffix&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;.jsp&quot;</span> /&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span></span><br><span class="xml">  </span><br><span class="xml">  <span class="hljs-comment">&lt;!-- ä¸Šä¼ è§£æå™¨ --&gt;</span></span><br><span class="xml">  <span class="hljs-comment">&lt;!-- é”™è¯¯ï¼šæç¤ºå‘Šè¯‰å¼€å‘è€…ä½ æ²¡æœ‰é…ç½®æ–‡ä»¶ä¸Šä¼ è§£æå™¨ã€‚</span></span><br><span class="xml">       multipartResolver:ä¸èƒ½ä¹±å†™</span><br><span class="xml">  --&gt;</span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;multipartResolver&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;</span>&gt;</span></span><br><span class="xml">    <span class="hljs-comment">&lt;!-- è®¾ç½®ä¸Šä¼ æ–‡ä»¶çš„æœ€å¤§å°ºå¯¸ä¸º1MB --&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;maxUploadSize&quot;</span>&gt;</span></span><br><span class="xml">    <span class="hljs-comment">&lt;!-- spring elå†™æ³•ï¼š5MB --&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>#</span><span class="hljs-template-variable">&#123;1024*1024*5&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h4 id="3ã€é›†æˆMyBatisç¯å¢ƒ"><a href="#3ã€é›†æˆMyBatisç¯å¢ƒ" class="headerlink" title="3ã€é›†æˆMyBatisç¯å¢ƒ"></a>3ã€é›†æˆMyBatisç¯å¢ƒ</h4><h5 id="3-1ã€åŠ å…¥MyBatisç›¸å…³çš„9ä¸ªJaråŒ…ï¼ˆmtbatis-spring-1-2-0-jarï¼‰"><a href="#3-1ã€åŠ å…¥MyBatisç›¸å…³çš„9ä¸ªJaråŒ…ï¼ˆmtbatis-spring-1-2-0-jarï¼‰" class="headerlink" title="3.1ã€åŠ å…¥MyBatisç›¸å…³çš„9ä¸ªJaråŒ…ï¼ˆmtbatis-spring-1.2.0.jarï¼‰"></a>3.1ã€åŠ å…¥MyBatisç›¸å…³çš„9ä¸ªJaråŒ…ï¼ˆmtbatis-spring-1.2.0.jarï¼‰</h5><ol><li><p>æ ¸å¿ƒåŒ…</p></li><li><p>ä¾èµ–åŒ…(åˆ é™¤ä¸€ä¸ªcommons-logging-1.1.1.jar)</p></li><li><p>æ•°æ®åº“è¿æ¥åŒ…</p></li></ol><p><img src="/2021/02/15/SSM%E9%9B%86%E6%88%90/image-20191212145710351.png" alt="image-20191212145710351"></p><p>Mavençš„pom.xmlï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--æ•°æ®çš„æ”¯æŒ--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.1.6<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br><span class="hljs-comment">&lt;!--mybatisçš„jar--&gt;</span><br><span class="hljs-comment">&lt;!--mybatisçš„æ ¸å¿ƒåŒ…--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.2.4<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br><span class="hljs-comment">&lt;!--mybatisé›†æˆspring--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-spring<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br><span class="hljs-comment">&lt;!--ä»£ç ç”Ÿæˆå™¨çš„jaråŒ…--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis.generator<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-generator-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.3.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>SSMæ³¨å…¥é¡ºåºï¼šjdbc.properties-&gt;dataSource-&gt;sqlSessionFactory-&gt;mapper(dao)-&gt;service-&gt;controller(action)</p><h5 id="3-2ã€JDBCé…ç½®æ–‡ä»¶-amp-æ•°æ®æºDataSource"><a href="#3-2ã€JDBCé…ç½®æ–‡ä»¶-amp-æ•°æ®æºDataSource" class="headerlink" title="3.2ã€JDBCé…ç½®æ–‡ä»¶&amp;æ•°æ®æºDataSource"></a>3.2ã€JDBCé…ç½®æ–‡ä»¶&amp;æ•°æ®æºDataSource</h5><p><strong>JDBCé…ç½®æ–‡ä»¶ï¼š</strong></p><p>jdbc.propertiesæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">jdbc.driverClassName</span>=com.mysql.jdbc.Driver<br><span class="hljs-attr">jdbc.url</span>=jdbc:mysql:///mybatis<br><span class="hljs-attr">jdbc.username</span>=root<br><span class="hljs-attr">jdbc.password</span>=root<br></code></pre></td></tr></table></figure><p><strong>Springé…ç½®æ–‡ä»¶ï¼š</strong></p><p>applicationContext.xmlé…ç½®æ–‡ä»¶ï¼š</p><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="xml"><span class="hljs-comment">&lt;!-- Jdbcé…ç½®æ–‡ä»¶(jdbc.properties)ï¼šæ‹¿åˆ°è¿æ¥æ•°æ®åº“çš„æ•°æ® --&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">context:property-placeholder</span> <span class="hljs-attr">location</span>=<span class="hljs-string">&quot;classpath:jdbc.properties&quot;</span> /&gt;</span></span><br><br><span class="xml"><span class="hljs-comment">&lt;!-- æ³¨å…¥é¡ºåºï¼šjdbc.properties -&gt; dataSource(æ•°æ®æº)-&gt; SqlSessionFactory -&gt; Mapper -&gt; Service (äº‹åŠ¡)-&gt; Controller -&gt;EasyUI --&gt;</span></span><br><br><span class="xml"><span class="hljs-comment">&lt;!-- é…ç½®dbcpæ•°æ®æº --&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;dataSource&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.apache.commons.dbcp.BasicDataSource&quot;</span> <span class="hljs-attr">destroy-method</span>=<span class="hljs-string">&quot;close&quot;</span>&gt;</span></span><br><span class="xml"><span class="hljs-comment">&lt;!-- ä¾èµ–æ³¨å…¥è¿æ¥æ± éœ€è¦çš„å±æ€§ --&gt;</span></span><br><span class="xml"><span class="hljs-comment">&lt;!-- property name=&quot;æ˜¯BasicDataSourceçš„setæ–¹æ³•ï¼Œæœ¬è´¨å±æ€§&quot; --&gt;</span></span><br><span class="xml"><span class="hljs-comment">&lt;!-- property value=&quot;æ˜¯jdbc.propertiesé…ç½®æ–‡ä»¶çš„key&quot; --&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driverClassName&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$</span></span></span><span class="hljs-template-variable">&#123;jdbc.driverClassName&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span> /&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$</span></span></span><span class="hljs-template-variable">&#123;jdbc.url&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span> /&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$</span></span></span><span class="hljs-template-variable">&#123;jdbc.username&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span> /&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$</span></span></span><span class="hljs-template-variable">&#123;jdbc.password&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span> /&gt;</span></span><br><span class="xml"><span class="hljs-comment">&lt;!--maxActive: æœ€å¤§è¿æ¥æ•°é‡ --&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;maxActive&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;150&quot;</span> /&gt;</span></span><br><span class="xml"><span class="hljs-comment">&lt;!--minIdle: æœ€å°ç©ºé—²è¿æ¥ --&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;minIdle&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;5&quot;</span> /&gt;</span></span><br><span class="xml"><span class="hljs-comment">&lt;!--maxIdle: æœ€å¤§ç©ºé—²è¿æ¥ --&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;maxIdle&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;20&quot;</span> /&gt;</span></span><br><span class="xml"><span class="hljs-comment">&lt;!--initialSize: åˆå§‹åŒ–è¿æ¥ --&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;initialSize&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;30&quot;</span> /&gt;</span></span><br><span class="xml"><span class="hljs-comment">&lt;!-- è¿æ¥è¢«æ³„éœ²æ—¶æ˜¯å¦æ‰“å° --&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;logAbandoned&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;true&quot;</span> /&gt;</span></span><br><span class="xml"><span class="hljs-comment">&lt;!--removeAbandoned: æ˜¯å¦è‡ªåŠ¨å›æ”¶è¶…æ—¶è¿æ¥ --&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;removeAbandoned&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;true&quot;</span> /&gt;</span></span><br><span class="xml"><span class="hljs-comment">&lt;!--removeAbandonedTimeout: è¶…æ—¶æ—¶é—´(ä»¥ç§’æ•°ä¸ºå•ä½) --&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;removeAbandonedTimeout&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;10&quot;</span> /&gt;</span></span><br><span class="xml"><span class="hljs-comment">&lt;!--maxWait: è¶…æ—¶ç­‰å¾…æ—¶é—´ä»¥æ¯«ç§’ä¸ºå•ä½ 1000ç­‰äº60ç§’ --&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;maxWait&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;1000&quot;</span> /&gt;</span></span><br><span class="xml"><span class="hljs-comment">&lt;!-- åœ¨ç©ºé—²è¿æ¥å›æ”¶å™¨çº¿ç¨‹è¿è¡ŒæœŸé—´ä¼‘çœ çš„æ—¶é—´å€¼,ä»¥æ¯«ç§’ä¸ºå•ä½. --&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;timeBetweenEvictionRunsMillis&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;10000&quot;</span> /&gt;</span></span><br><span class="xml"><span class="hljs-comment">&lt;!-- åœ¨æ¯æ¬¡ç©ºé—²è¿æ¥å›æ”¶å™¨çº¿ç¨‹(å¦‚æœæœ‰)è¿è¡Œæ—¶æ£€æŸ¥çš„è¿æ¥æ•°é‡ --&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;numTestsPerEvictionRun&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;10&quot;</span> /&gt;</span></span><br><span class="xml"><span class="hljs-comment">&lt;!-- 1000 * 60 * 30 è¿æ¥åœ¨æ± ä¸­ä¿æŒç©ºé—²è€Œä¸è¢«ç©ºé—²è¿æ¥å›æ”¶å™¨çº¿ç¨‹ --&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;minEvictableIdleTimeMillis&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;10000&quot;</span> /&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;validationQuery&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;SELECT NOW() FROM DUAL&quot;</span> /&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h5 id="3-3ã€SqlSessionFactory"><a href="#3-3ã€SqlSessionFactory" class="headerlink" title="3.3ã€SqlSessionFactory"></a>3.3ã€SqlSessionFactory</h5><p><code>SSJ é›†æˆ</code>æ—¶å€™éœ€è¦<code>entityManagerFactory</code></p><p>applicationContext.xmlæ–‡ä»¶ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">&lt;bean <span class="hljs-attribute">id</span>=<span class="hljs-string">&quot;entityManagerFactory&quot;</span> <span class="hljs-attribute">class</span>=<span class="hljs-string">&quot;org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean&quot;</span>&gt;<br></code></pre></td></tr></table></figure><p><code>SSMé›†æˆ</code>æ—¶å€™éœ€è¦<code>sqlSessionFactory</code></p><p>applicationContext.xmlæ–‡ä»¶ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">&lt;bean <span class="hljs-attribute">id</span>=<span class="hljs-string">&quot;sqlSessionFactory&quot;</span> <span class="hljs-attribute">class</span>=<span class="hljs-string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;<br></code></pre></td></tr></table></figure><h6 id="3-3-1ã€è·å–SqlSessionFactory"><a href="#3-3-1ã€è·å–SqlSessionFactory" class="headerlink" title="3.3.1ã€è·å–SqlSessionFactory"></a>3.3.1ã€è·å–SqlSessionFactory</h6><p>applicationContext.xmlæ–‡ä»¶ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs xml">  <span class="hljs-comment">&lt;!--æµ‹è¯•çš„æ—¶å€™:sqlSessionFactory==sqlSession==mapperæ¥å£ --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;sqlSessionFactory&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;dataSource&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;dataSource&quot;</span> /&gt;</span><br>      <br>      <span class="hljs-comment">&lt;!--åˆ«åçš„é…ç½®:domain query--&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;typeAliasesPackage&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;cn.itsource.ssm.domain, cn.itsource.ssm.query&quot;</span>/&gt;</span><br>      <br>      <span class="hljs-comment">&lt;!-- æˆ–è€…</span><br><span class="hljs-comment">      &lt;property name=&quot;typeAliasesPackage&quot;&gt;</span><br><span class="hljs-comment">&lt;value&gt;</span><br><span class="hljs-comment">cn.itsource.ssm.domain</span><br><span class="hljs-comment">Cn.itsource.ssm.query  å¯èƒ½æœ‰æŸ¥è¯¢å¯¹è±¡</span><br><span class="hljs-comment">&lt;/value&gt;</span><br><span class="hljs-comment">&lt;/property&gt;</span><br><span class="hljs-comment">--&gt;</span><br><br>      <span class="hljs-comment">&lt;!--mapperçš„æ˜ å°„æ–‡ä»¶è·¯å¾„:é…ç½®æ‰€æœ‰çš„æ˜ å°„æ–‡ä»¶--&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;mapperLocations&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;classpath*:cn/itsource/ssm/mapper/*.xml&quot;</span> /&gt;</span><br>      <br>      <span class="hljs-comment">&lt;!--é…ç½®åˆ†é¡µæ‹¦æˆªå™¨--&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;plugins&quot;</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">array</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.github.pagehelper.PageInterceptor&quot;</span>&gt;</span><br>                  <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;properties&quot;</span>&gt;</span><br>                      <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>helperDialect=mysql<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>                  <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>              <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br>          <span class="hljs-tag">&lt;/<span class="hljs-name">array</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br>  <br>  <span class="hljs-comment">&lt;!--mapperæ¥å£çš„é…ç½®:æ˜ å°„å™¨</span><br><span class="hljs-comment">   åªé…ç½®äº†ä¸€ä¸ªmapperæ¥å£,å¦‚æœæœ‰å¤šä¸ª:ä¸€ä¸ªä¸ªçš„å¤åˆ¶,å¾ˆç´¯çš„</span><br><span class="hljs-comment">  &lt;bean id=&quot;departmentMapper&quot; class=&quot;org.mybatis.spring.mapper.MapperFactoryBean&quot;&gt;</span><br><span class="hljs-comment">      &lt;property name=&quot;mapperInterface&quot; value=&quot;DepartmentMapper&quot; /&gt;</span><br><span class="hljs-comment">      &lt;property name=&quot;sqlSessionFactory&quot; ref=&quot;sqlSessionFactory&quot; /&gt;</span><br><span class="hljs-comment">  &lt;/bean&gt; --&gt;</span><br>  <br>  <span class="hljs-comment">&lt;!--mapperæ¥å£çš„é…ç½®:ä¸€åŠ³æ°¸é€¸çš„é…ç½®--&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;</span>&gt;</span><br>      <span class="hljs-comment">&lt;!--æŠŠcn.itsource.ssm.mapperè·¯å¾„ä¸‹çš„æ‰€æœ‰çš„mapperéƒ½é…ç½®èµ·æ¥--&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;basePackage&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;com.ruanko.ssm.mapper&quot;</span> /&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure><h5 id="3-4ã€äº‹ç‰©çš„é…ç½®"><a href="#3-4ã€äº‹ç‰©çš„é…ç½®" class="headerlink" title="3.4ã€äº‹ç‰©çš„é…ç½®"></a>3.4ã€äº‹ç‰©çš„é…ç½®</h5><p>applicationContext.xmlæ–‡ä»¶ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">springæ³¨è§£å¼äº‹åŠ¡ç®¡ç†</span><br><span class="hljs-comment">1ã€é…ç½®ä¸€ä¸ªäº‹åŠ¡ç®¡ç†å™¨</span><br><span class="hljs-comment">2ã€è¯†åˆ«æ³¨è§£äº‹åŠ¡</span><br><span class="hljs-comment">3ã€æ‰“æ³¨è§£</span><br><span class="hljs-comment">--&gt;</span><br><span class="hljs-comment">&lt;!--äº‹åŠ¡çš„é…ç½®:service--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;transactionManager&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;dataSource&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;dataSource&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure><h5 id="3-5ã€æ³¨è§£é©±åŠ¨"><a href="#3-5ã€æ³¨è§£é©±åŠ¨" class="headerlink" title="3.5ã€æ³¨è§£é©±åŠ¨"></a>3.5ã€æ³¨è§£é©±åŠ¨</h5><p>applicationContext.xmlæ–‡ä»¶ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--æ³¨è§£é©±åŠ¨--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">tx:annotation-driven</span> <span class="hljs-attr">transaction-manager</span>=<span class="hljs-string">&quot;transactionManager&quot;</span>/&gt;</span><br></code></pre></td></tr></table></figure><h4 id="4ã€æ€»ç»“"><a href="#4ã€æ€»ç»“" class="headerlink" title="4ã€æ€»ç»“"></a>4ã€æ€»ç»“</h4><h5 id="4-1ã€é‡ç‚¹"><a href="#4-1ã€é‡ç‚¹" class="headerlink" title="4.1ã€é‡ç‚¹"></a>4.1ã€é‡ç‚¹</h5><ol><li><p>SSMé›†æˆï¼Œæ“ä½œå¿…é¡»éå¸¸ç†Ÿç»ƒ</p></li><li><p>å¤šå¯¹ä¸€åµŒå¥—ç»“æœï¼ŒåµŒå¥—æŸ¥è¯¢</p></li><li><p>ä¸€å¯¹å¤šåµŒå¥—ç»“æœ</p></li><li><p>æ˜ å°„å™¨æ¥å£</p></li></ol><h5 id="4-2ã€éš¾ç‚¹"><a href="#4-2ã€éš¾ç‚¹" class="headerlink" title="4.2ã€éš¾ç‚¹"></a>4.2ã€éš¾ç‚¹</h5><ol><li><p>å¤šå¯¹ä¸€åµŒå¥—ç»“æœï¼šæŸ¥è¯¢çš„æœ‰deptè¡¨çš„åˆ«åé…ç½®</p></li><li><p>æ˜ å°„æ–‡ä»¶é‡Œé¢ä½¿ç”¨${}çš„é€‚ç”¨åœºæ™¯ï¼šorder by</p></li></ol><h4 id="5ã€å¸¸è§å¼‚å¸¸"><a href="#5ã€å¸¸è§å¼‚å¸¸" class="headerlink" title="5ã€å¸¸è§å¼‚å¸¸"></a>5ã€å¸¸è§å¼‚å¸¸</h4><p>Caused by: java.io.NotSerializableException: cn.itsource.mybatis.day2._5_cache.User</p><p>è¦ä½¿ç”¨äºŒçº§ç¼“å­˜ï¼Œè¦æ±‚domainå¿…é¡»å®ç°åºåˆ—åŒ–æ¥å£</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title></title>
    <link href="/2021/02/15/Spring%20Security/"/>
    <url>/2021/02/15/Spring%20Security/</url>
    
    <content type="html"><![CDATA[<h1 id="Spring-Security"><a href="#Spring-Security" class="headerlink" title="Spring Security"></a>Spring Security</h1><p>Spring Security æ˜¯ Spring ç¤¾åŒºçš„ä¸€ä¸ªé¡¶çº§é¡¹ç›®ï¼Œä¹Ÿæ˜¯ Spring Boot å®˜æ–¹æ¨èä½¿ç”¨çš„å®‰å…¨æ¡†æ¶ã€‚é™¤äº†å¸¸è§„çš„è®¤è¯ï¼ˆAuthenticationï¼‰å’Œæˆæƒï¼ˆAuthorizationï¼‰ä¹‹å¤–ï¼ŒSpring Securityè¿˜æä¾›äº†è¯¸å¦‚ACLsï¼ŒLDAPï¼ŒJAASï¼ŒCASç­‰é«˜çº§ç‰¹æ€§ä»¥æ»¡è¶³å¤æ‚åœºæ™¯ä¸‹çš„å®‰å…¨éœ€æ±‚ã€‚</p><p>Spring Security åº”ç”¨çº§åˆ«çš„å®‰å…¨ä¸»è¦åŒ…å«ä¸¤ä¸ªä¸»è¦éƒ¨åˆ†ï¼Œå³<code>ç™»å½•è®¤è¯ï¼ˆAuthenticationï¼‰</code>å’Œ<code>è®¿é—®æˆæƒï¼ˆAuthorizationï¼‰</code>ï¼Œé¦–å…ˆç”¨æˆ·ç™»å½•çš„æ—¶å€™ä¼ å…¥ã€ç™»å½•ä¿¡æ¯ã€‘ï¼Œã€ç™»å½•éªŒè¯å™¨ã€‘å®Œæˆç™»å½•è®¤è¯å¹¶å°†ç™»å½•è®¤è¯å¥½çš„ä¿¡æ¯å­˜å‚¨åˆ°ã€è¯·æ±‚ä¸Šä¸‹æ–‡ã€‘ï¼Œç„¶ååœ¨è¿›è¡Œå…¶ä»–æ“ä½œï¼Œå¦‚æ¥å£è®¿é—®ã€æ–¹æ³•è°ƒç”¨æ—¶ï¼Œæƒé™è®¤è¯å™¨ä»ä¸Šä¸‹æ–‡ä¸­è·å–ç™»å½•è®¤è¯ä¿¡æ¯ï¼Œç„¶åæ ¹æ®è®¤è¯ä¿¡æ¯è·å–æƒé™ä¿¡æ¯ï¼Œé€šè¿‡æƒé™ä¿¡æ¯å’Œç‰¹å®šçš„æˆæƒç­–ç•¥å†³å®šæ˜¯å¦æˆæƒã€‚</p><p>æ¥ä¸‹æ¥ï¼Œå°†åˆ†åˆ«å¯¹ç™»å½•è®¤è¯å’Œè®¿é—®æˆæƒçš„æ‰§è¡Œæµç¨‹è¿›è¡Œå‰–æï¼Œå¹¶åœ¨æœ€åç»™å‡ºå®Œæ•´çš„æ¡ˆä¾‹å®ç°ï¼Œç»“åˆæ¡ˆä¾‹ç†è§£ç™»å½•è®¤è¯å’Œè®¿é—®æˆæƒçš„æ‰§è¡ŒåŸç†ã€‚</p><h2 id="ç™»å½•è®¤è¯ï¼ˆAuthenticationï¼‰"><a href="#ç™»å½•è®¤è¯ï¼ˆAuthenticationï¼‰" class="headerlink" title="ç™»å½•è®¤è¯ï¼ˆAuthenticationï¼‰"></a>ç™»å½•è®¤è¯ï¼ˆAuthenticationï¼‰</h2><h3 id="ç™»å½•è®¤è¯è¿‡æ»¤å™¨"><a href="#ç™»å½•è®¤è¯è¿‡æ»¤å™¨" class="headerlink" title="ç™»å½•è®¤è¯è¿‡æ»¤å™¨"></a>ç™»å½•è®¤è¯è¿‡æ»¤å™¨</h3><p>å¦‚æœåœ¨ç»§æ‰¿ WebSecurityConfigurerAdapter çš„é…ç½®ç±»ä¸­çš„ configure(HttpSecurity http) æ–¹æ³•ä¸­æœ‰é…ç½® HttpSecurity çš„ formLoginï¼Œåˆ™ä¼šè¿”å›ä¸€ä¸ª FormLoginConfigurer å¯¹è±¡ã€‚</p><p>å¦‚ä¸‹æ˜¯ä¸€ä¸ª Spring Security çš„é…ç½®æ ·ä¾‹ï¼Œ formLogin().x.x å°±æ˜¯é…ç½®ä½¿ç”¨<code>å†…ç½®çš„ç™»å½•éªŒè¯è¿‡æ»¤å™¨</code>ï¼Œé»˜è®¤å®ç°ä¸º <code>UsernamePasswordAuthenticationFilter</code>ã€‚</p><p>WebSecurityConfig.java</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@Configuration</span><br><span class="hljs-variable">@EnableWebSecurity</span><br><span class="hljs-variable">@EnableGlobalMethodSecurity</span>(prePostEnabled = true)<br>public class WebSecurityConfig extends WebSecurityConfigurerAdapter &#123;<br><br>    <span class="hljs-variable">@Autowired</span><br>    private UserDetailsService userDetailsService;<br>    <br>    <span class="hljs-variable">@Override</span><br>    public void configure(AuthenticationManagerBuilder auth) throws Exception &#123;<br>        <span class="hljs-comment">// ä½¿ç”¨è‡ªå®šä¹‰èº«ä»½éªŒè¯ç»„ä»¶</span><br>        <span class="hljs-selector-tag">auth</span><span class="hljs-selector-class">.authenticationProvider</span>(new JwtAuthenticationProvider(userDetailsService));<br>    &#125;<br>    <br>    @<span class="hljs-selector-tag">Override</span><br>    <span class="hljs-selector-tag">protected</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">configure</span>(HttpSecurity http) <span class="hljs-selector-tag">throws</span> <span class="hljs-selector-tag">Exception</span> &#123;<br>        <span class="hljs-selector-tag">http</span><span class="hljs-selector-class">.cors</span>()<span class="hljs-selector-class">.and</span>()<span class="hljs-selector-class">.csrf</span>()<span class="hljs-selector-class">.disable</span>()<br>            <span class="hljs-selector-class">.authorizeRequests</span>()<br>        <span class="hljs-comment">// é¦–é¡µå’Œç™»å½•é¡µé¢</span><br>        <span class="hljs-selector-class">.antMatchers</span>(<span class="hljs-string">&quot;/&quot;</span>)<span class="hljs-selector-class">.permitAll</span>()<br>        <span class="hljs-comment">// å…¶ä»–æ‰€æœ‰è¯·æ±‚éœ€è¦èº«ä»½è®¤è¯</span><br>        <span class="hljs-selector-class">.anyRequest</span>()<span class="hljs-selector-class">.authenticated</span>()<br>        <span class="hljs-comment">// é…ç½®ç™»å½•è®¤è¯</span><br>        <span class="hljs-selector-class">.and</span>()<span class="hljs-selector-class">.formLogin</span>()<span class="hljs-selector-class">.loginProcessingUrl</span>(<span class="hljs-string">&quot;/login&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹ HttpSecurityæºä»£ç çš„ formLogion æ–¹æ³•è¿”å›ä¸€ä¸ª <code>FormLoginConfigurer</code> å¯¹è±¡ã€‚</p><p>org.springframework.security.config.annotation.web.builders.HttpSecurity.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> FormLoginConfigurer&lt;HttpSecurity&gt; <span class="hljs-title">formLogin</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;<br><span class="hljs-keyword">return</span> getOrApply(<span class="hljs-keyword">new</span> FormLoginConfigurer&lt;&gt;());<br>&#125;<br></code></pre></td></tr></table></figure><p>è€Œ FormLoginConfigurer çš„æ„é€ å‡½æ•°å†…ç»‘å®šäº†ä¸€ä¸ª <code>UsernamePasswordAuthenticationFilter</code> è¿‡æ»¤å™¨ã€‚</p><p>org.springframework.security.config.annotation.web.configurers.FormLoginConfigurer.java</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-title">FormLoginConfigurer</span>(<span class="hljs-params"></span>)</span> &#123;<br><span class="hljs-built_in">super</span>(<span class="hljs-keyword">new</span> UsernamePasswordAuthenticationFilter(), <span class="hljs-literal">null</span>);<br>usernameParameter(<span class="hljs-string">&quot;username&quot;</span>);<br>passwordParameter(<span class="hljs-string">&quot;password&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>å†çœ‹ UsernamePasswordAuthenticationFilter è¿‡æ»¤å™¨çš„æ„é€ å‡½æ•°å†…ç»‘å®šäº† POST ç±»å‹çš„ /login è¯·æ±‚ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœé…ç½®äº† formLogin çš„ç›¸å…³ä¿¡æ¯ï¼Œé‚£ä¹ˆåœ¨ä½¿ç”¨ POST ç±»å‹çš„ /login URLè¿›è¡Œç™»å½•çš„æ—¶å€™å°±ä¼šè¢«è¿™ä¸ªè¿‡æ»¤å™¨æ‹¦æˆªï¼Œå¹¶è¿›è¡Œç™»å½•éªŒè¯ï¼Œç™»å½•éªŒè¯è¿‡ç¨‹æˆ‘ä»¬ä¸‹é¢ç»§ç»­åˆ†æã€‚</p><p>org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter.java</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-title">UsernamePasswordAuthenticationFilter</span>(<span class="hljs-params"></span>)</span> &#123;<br><span class="hljs-built_in">super</span>(<span class="hljs-keyword">new</span> AntPathRequestMatcher(<span class="hljs-string">&quot;/login&quot;</span>, <span class="hljs-string">&quot;POST&quot;</span>));<br>&#125;<br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹ UsernamePasswordAuthenticationFilterï¼Œå‘ç°å®ƒç»§æ‰¿äº† AbstractAuthenticationProcessingFilter</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs scala">public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UsernamePasswordAuthenticationFilter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractAuthenticationProcessingFilter</span></span>&#123;...&#125;<br></code></pre></td></tr></table></figure><p>AbstractAuthenticationProcessingFilter ä¸­çš„ doFilter åŒ…å«äº†è§¦å‘ç™»å½•è®¤è¯æ‰§è¡Œæµç¨‹çš„ç›¸å…³é€»è¾‘ã€‚</p><p>org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.java</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">public void <span class="hljs-keyword">do</span><span class="hljs-constructor">Filter(ServletRequest <span class="hljs-params">req</span>, ServletResponse <span class="hljs-params">res</span>, FilterChain <span class="hljs-params">chain</span>)</span> throws IOException, ServletException &#123;<br>        HttpServletRequest request = (HttpServletRequest)req;<br>        HttpServletResponse response = (HttpServletResponse)res;<br>        <span class="hljs-keyword">if</span> (!this.requires<span class="hljs-constructor">Authentication(<span class="hljs-params">request</span>, <span class="hljs-params">response</span>)</span>) &#123;<br>            chain.<span class="hljs-keyword">do</span><span class="hljs-constructor">Filter(<span class="hljs-params">request</span>, <span class="hljs-params">response</span>)</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">if</span> (this.logger.is<span class="hljs-constructor">DebugEnabled()</span>) &#123;<br>                this.logger.debug(<span class="hljs-string">&quot;Request is to process authentication&quot;</span>);<br>            &#125;<br><br>            Authentication authResult;<br>            <span class="hljs-keyword">try</span> &#123;<br>                authResult = this.attempt<span class="hljs-constructor">Authentication(<span class="hljs-params">request</span>, <span class="hljs-params">response</span>)</span>;<br>                <span class="hljs-keyword">if</span> (authResult<span class="hljs-operator"> == </span>null) &#123;<br>                    return;<br>                &#125;<br><br>                this.sessionStrategy.on<span class="hljs-constructor">Authentication(<span class="hljs-params">authResult</span>, <span class="hljs-params">request</span>, <span class="hljs-params">response</span>)</span>;<br>            &#125; catch (InternalAuthenticationServiceException var8) &#123;<br>                this.logger.error(<span class="hljs-string">&quot;An internal error occurred while trying to authenticate the user.&quot;</span>, var8);<br>                this.unsuccessful<span class="hljs-constructor">Authentication(<span class="hljs-params">request</span>, <span class="hljs-params">response</span>, <span class="hljs-params">var8</span>)</span>;<br>                return;<br>            &#125; catch (AuthenticationException var9) &#123;<br>                this.unsuccessful<span class="hljs-constructor">Authentication(<span class="hljs-params">request</span>, <span class="hljs-params">response</span>, <span class="hljs-params">var9</span>)</span>;<br>                return;<br>            &#125;<br><br>            <span class="hljs-keyword">if</span> (this.continueChainBeforeSuccessfulAuthentication) &#123;<br>                chain.<span class="hljs-keyword">do</span><span class="hljs-constructor">Filter(<span class="hljs-params">request</span>, <span class="hljs-params">response</span>)</span>;<br>            &#125;<br><br>            this.successful<span class="hljs-constructor">Authentication(<span class="hljs-params">request</span>, <span class="hljs-params">response</span>, <span class="hljs-params">chain</span>, <span class="hljs-params">authResult</span>)</span>;<br>        &#125;<br>    &#125;<br></code></pre></td></tr></table></figure><p>ä¸Šé¢çš„ç™»å½•é€»è¾‘ä¸»è¦æ­¥éª¤æœ‰ä¸¤ä¸ªï¼š</p><ol><li><p>attemptAuthentication(request, response)</p><p>è¿™æ˜¯ AbstractAuthenticationProcessingFilter ä¸­çš„ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼ŒåŒ…å«ç™»å½•ä¸»é€»è¾‘ï¼Œç”±å…¶å­ç±»å®ç°å…·ä½“çš„ç™»å½•éªŒè¯ï¼Œå¦‚ UsernamePasswordAuthenticationFilter æ˜¯ä½¿ç”¨è¡¨å•æ–¹å¼ç™»å½•çš„å…·ä½“å®ç°ã€‚å¦‚æœæ˜¯éè¡¨å•ç™»å½•çš„æ–¹å¼ï¼Œå¦‚JNDIç­‰å…¶ä»–æ–¹å¼ç™»å½•çš„å¯ä»¥é€šè¿‡<code>ç»§æ‰¿ AbstractAuthenticationProcessingFilter</code> è‡ªå®šä¹‰ç™»å½•å®ç°ã€‚UsernamePasswordAuthenticationFilter çš„ç™»å½•å®ç°é€»è¾‘å¦‚ä¸‹ã€‚</p></li></ol><p>org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter.java</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">public Authentication attempt<span class="hljs-constructor">Authentication(HttpServletRequest <span class="hljs-params">request</span>, HttpServletResponse <span class="hljs-params">response</span>)</span> throws AuthenticationException &#123;<br>        <span class="hljs-keyword">if</span> (postOnly<span class="hljs-operator"> &amp;&amp; </span>!request.get<span class="hljs-constructor">Method()</span>.equals(<span class="hljs-string">&quot;POST&quot;</span>)) &#123;<br>            throw <span class="hljs-keyword">new</span> <span class="hljs-constructor">AuthenticationServiceException(<span class="hljs-string">&quot;Authentication method not supported: &quot;</span> + <span class="hljs-params">request</span>.<span class="hljs-params">getMethod</span>()</span>);<br>        &#125;<br>ã€€ã€€ã€€ã€€ã€€<span class="hljs-comment">// è·å–ç”¨æˆ·åå’Œå¯†ç </span><br>        String username = obtain<span class="hljs-constructor">Username(<span class="hljs-params">request</span>)</span>;<br>        String password = obtain<span class="hljs-constructor">Password(<span class="hljs-params">request</span>)</span>;<br><br>        <span class="hljs-keyword">if</span> (username<span class="hljs-operator"> == </span>null) &#123;<br>            username = <span class="hljs-string">&quot;&quot;</span>;<br>        &#125;<br><br>        <span class="hljs-keyword">if</span> (password<span class="hljs-operator"> == </span>null) &#123;<br>            password = <span class="hljs-string">&quot;&quot;</span>;<br>        &#125;<br><br>        username = username.trim<span class="hljs-literal">()</span>;<br><br>        UsernamePasswordAuthenticationToken authRequest = <span class="hljs-keyword">new</span> <span class="hljs-constructor">UsernamePasswordAuthenticationToken(<span class="hljs-params">username</span>, <span class="hljs-params">password</span>)</span>;<br><br>        <span class="hljs-comment">// Allow subclasses to set the &quot;details&quot; property</span><br>        set<span class="hljs-constructor">Details(<span class="hljs-params">request</span>, <span class="hljs-params">authRequest</span>)</span>;<br><br>        return this.get<span class="hljs-constructor">AuthenticationManager()</span>.authenticate(authRequest);<br>    &#125;<br></code></pre></td></tr></table></figure><ol start="2"><li><p>successfulAuthentication(HttpServletRequest request, HttpServletResponse response, FilterChain chain, Authentication authResult)</p><p>ç™»å½•æˆåŠŸä¹‹åï¼Œå°†è®¤è¯åçš„ Authentication å¯¹è±¡å­˜å‚¨åˆ°è¯·æ±‚çº¿ç¨‹ä¸Šä¸‹æ–‡ï¼Œè¿™æ ·åœ¨æˆæƒé˜¶æ®µå°±å¯ä»¥è·å–åˆ° Authentication è®¤è¯ä¿¡æ¯ï¼Œå¹¶åˆ©ç”¨ Authentication å†…çš„æƒé™ä¿¡æ¯è¿›è¡Œè®¿é—®æ§åˆ¶åˆ¤æ–­ã€‚</p></li></ol><p>org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.java</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-tag">protected</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">successfulAuthentication</span>(HttpServletRequest request,<br>        HttpServletResponse response, FilterChain chain, Authentication authResult)<br>        <span class="hljs-selector-tag">throws</span> <span class="hljs-selector-tag">IOException</span>, <span class="hljs-selector-tag">ServletException</span> &#123;<br><br>    <span class="hljs-selector-tag">if</span> (logger.isDebugEnabled()) &#123;<br>        <span class="hljs-selector-tag">logger</span><span class="hljs-selector-class">.debug</span>(<span class="hljs-string">&quot;Authentication success. Updating SecurityContextHolder to contain: &quot;</span> + authResult);<br>    &#125;<br>ã€€ã€€ã€€ã€€ã€€<span class="hljs-comment">// ç™»å½•æˆåŠŸä¹‹åï¼ŒæŠŠè®¤è¯åçš„ Authentication å¯¹è±¡å­˜å‚¨åˆ°è¯·æ±‚çº¿ç¨‹ä¸Šä¸‹æ–‡ï¼Œè¿™æ ·åœ¨æˆæƒé˜¶æ®µå°±å¯ä»¥è·å–åˆ°æ­¤è®¤è¯ä¿¡æ¯è¿›è¡Œè®¿é—®æ§åˆ¶åˆ¤æ–­</span><br>    <span class="hljs-selector-tag">SecurityContextHolder</span><span class="hljs-selector-class">.getContext</span>()<span class="hljs-selector-class">.setAuthentication</span>(authResult);<br><br>    <span class="hljs-selector-tag">rememberMeServices</span><span class="hljs-selector-class">.loginSuccess</span>(request, response, authResult);<br><br>    <span class="hljs-comment">// Fire event</span><br>    <span class="hljs-selector-tag">if</span> (this.eventPublisher != null) &#123;<br>        <span class="hljs-selector-tag">eventPublisher</span><span class="hljs-selector-class">.publishEvent</span>(new InteractiveAuthenticationSuccessEvent(<br>                authResult, this.getClass()));<br>    &#125;<br><br>    <span class="hljs-selector-tag">successHandler</span><span class="hljs-selector-class">.onAuthenticationSuccess</span>(request, response, authResult);<br>&#125;<br></code></pre></td></tr></table></figure><p>ä»ä¸Šé¢çš„ç™»å½•é€»è¾‘æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒSpring Securityçš„ç™»å½•è®¤è¯è¿‡ç¨‹æ˜¯å§”æ‰˜ç»™ AuthenticationManager å®Œæˆçš„ï¼Œå®ƒå…ˆæ˜¯è§£æå‡ºç”¨æˆ·åå’Œå¯†ç ï¼Œç„¶åæŠŠç”¨æˆ·åå’Œå¯†ç å°è£…åˆ°ä¸€ä¸ªUsernamePasswordAuthenticationToken ä¸­ï¼Œä¼ é€’ç»™ AuthenticationManagerï¼Œäº¤ç”± AuthenticationManager å®Œæˆå®é™…çš„ç™»å½•è®¤è¯è¿‡ç¨‹ã€‚</p><p>package org.springframework.security.authentication.AuthenticationManager.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> org.springframework.security.authentication;<br><br><span class="hljs-keyword">import</span> org.springframework.security.core.Authentication;<br><span class="hljs-keyword">import</span> org.springframework.security.core.AuthenticationException;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> \* Processes an &#123;<span class="hljs-doctag">@link</span> Authentication&#125; request.</span><br><span class="hljs-comment"> \* <span class="hljs-doctag">@author</span> Ben Alex</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">AuthenticationManager</span> </span>&#123;<br><br><span class="hljs-function">Authentication <span class="hljs-title">authenticate</span><span class="hljs-params">(Authentication authentication)</span> <span class="hljs-keyword">throws</span> AuthenticationException</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>AuthenticationManager æä¾›äº†ä¸€ä¸ªé»˜è®¤çš„ å®ç° ProviderManagerï¼Œè€Œ ProviderManager åˆå°†éªŒè¯å§”æ‰˜ç»™äº† AuthenticationProviderã€‚</p><p>ProviderManager.java</p><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs aspectj"><span class="hljs-keyword">public</span> Authentication authenticate(Authentication authentication)<br>        <span class="hljs-keyword">throws</span> AuthenticationException &#123;<br>ã€€ã€€ã€€ã€€ã€€...ã€€ã€€ <span class="hljs-keyword">for</span> (AuthenticationProvider provider : getProviders()) &#123;<br>        <span class="hljs-keyword">if</span> (!provider.supports(toTest)) &#123;<br>            <span class="hljs-keyword">continue</span>;<br>        &#125;<span class="hljs-keyword">try</span> &#123;<br>            result = provider.authenticate(authentication);<br>            <span class="hljs-keyword">if</span> (result != <span class="hljs-keyword">null</span>) &#123;<br>                copyDetails(authentication, result);<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>        &#125;ã€€ã€€ã€€ã€€ ...<br>&#125;<br></code></pre></td></tr></table></figure><p>æ ¹æ®éªŒè¯æ–¹å¼çš„å¤šæ ·åŒ–ï¼ŒAuthenticationProvider è¡ç”Ÿå‡ºå¤šç§ç±»å‹çš„å®ç°ï¼ŒAbstractUserDetailsAuthenticationProvider æ˜¯ AuthenticationProvider çš„æŠ½è±¡å®ç°ï¼Œå®šä¹‰äº†è¾ƒä¸ºç»Ÿä¸€çš„éªŒè¯é€»è¾‘ï¼Œå„ç§éªŒè¯æ–¹å¼å¯ä»¥é€‰æ‹©ç›´æ¥ç»§æ‰¿ AbstractUserDetailsAuthenticationProvider å®Œæˆç™»å½•è®¤è¯ï¼Œå¦‚ DaoAuthenticationProvider å°±æ˜¯ç»§æ‰¿äº†æ­¤æŠ½è±¡ç±»ï¼Œå®Œæˆäº†ä»DAOæ–¹å¼è·å–éªŒè¯éœ€è¦çš„ç”¨æˆ·ä¿¡æ¯çš„ã€‚</p><p>AbstractUserDetailsAuthenticationProvider.java</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">public Authentication authenticate(Authentication authentication) throws AuthenticationException &#123;<span class="hljs-comment">// Determine username</span><br>        String username = (authentication.get<span class="hljs-constructor">Principal()</span><span class="hljs-operator"> == </span>null) ? <span class="hljs-string">&quot;NONE_PROVIDED&quot;</span> : authentication.get<span class="hljs-constructor">Name()</span>;<br>        boolean cacheWasUsed = <span class="hljs-literal">true</span>;<br>        UserDetails user = this.userCache.get<span class="hljs-constructor">UserFromCache(<span class="hljs-params">username</span>)</span>;<br>        <span class="hljs-keyword">if</span> (user<span class="hljs-operator"> == </span>null) &#123;<br>            cacheWasUsed = <span class="hljs-literal">false</span>;<br>            <span class="hljs-keyword">try</span> &#123;ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ <span class="hljs-comment">// å­ç±»æ ¹æ®è‡ªèº«æƒ…å†µä»æŒ‡å®šçš„åœ°æ–¹åŠ è½½è®¤è¯éœ€è¦çš„ç”¨æˆ·ä¿¡æ¯</span><br>                user = retrieve<span class="hljs-constructor">User(<span class="hljs-params">username</span>, (UsernamePasswordAuthenticationToken)</span> authentication);<br>            &#125;<br>            ...<span class="hljs-keyword">try</span> &#123;ã€€ã€€ã€€ã€€ã€€ã€€ã€€<span class="hljs-comment">// å‰ç½®æ£€æŸ¥ï¼Œä¸€èˆ¬æ˜¯æ£€æŸ¥è´¦å·çŠ¶æ€ï¼Œå¦‚æ˜¯å¦é”å®šä¹‹ç±»</span><br>            preAuthenticationChecks.check(user);ã€€ã€€ã€€ã€€ã€€ã€€ã€€<span class="hljs-comment">// è¿›è¡Œä¸€èˆ¬é€»è¾‘è®¤è¯ï¼Œå¦‚ DaoAuthenticationProvider å®ç°ä¸­çš„å¯†ç éªŒè¯å°±æ˜¯åœ¨è¿™é‡Œå®Œæˆçš„</span><br>            additional<span class="hljs-constructor">AuthenticationChecks(<span class="hljs-params">user</span>, (UsernamePasswordAuthenticationToken)</span> authentication);<br>        &#125;<br>        ...<br>ã€€ã€€ã€€ã€€ <span class="hljs-comment">//ã€€åç½®æ£€æŸ¥ï¼Œå¦‚å¯ä»¥æ£€æŸ¥å¯†ç æ˜¯å¦è¿‡æœŸä¹‹ç±»</span><br>        postAuthenticationChecks.check(user);<br><br><span class="hljs-operator">ã€€ã€€ã€€ã€€ ...ã€€ã€€ã€€ã€€ã€€</span><span class="hljs-comment">// éªŒè¯æˆåŠŸä¹‹åè¿”å›åŒ…å«å®Œæ•´è®¤è¯ä¿¡æ¯çš„ Authentication å¯¹è±¡</span><br>        return create<span class="hljs-constructor">SuccessAuthentication(<span class="hljs-params">principalToReturn</span>, <span class="hljs-params">authentication</span>, <span class="hljs-params">user</span>)</span>;<br>    &#125;<br></code></pre></td></tr></table></figure><p>å¦‚ä¸Šé¢æ‰€è¿°ï¼Œ AuthenticationProvider é€šè¿‡ retrieveUser(String username, UsernamePasswordAuthenticationToken authentication) è·å–éªŒè¯ä¿¡æ¯ï¼Œå¯¹äºæˆ‘ä»¬ä¸€èˆ¬æ‰€ç”¨çš„ DaoAuthenticationProvider æ˜¯ç”± UserDetailsService ä¸“é—¨è´Ÿè´£è·å–éªŒè¯ä¿¡æ¯çš„ã€‚</p><p>DaoAuthenticationProvider.java</p><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs aspectj"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">final</span> <span class="hljs-function">UserDetails <span class="hljs-title">retrieveUser</span><span class="hljs-params">(String username, UsernamePasswordAuthenticationToken authentication)</span> <span class="hljs-keyword">throws</span> AuthenticationException </span>&#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>        UserDetails loadedUser = <span class="hljs-keyword">this</span>.getUserDetailsService().loadUserByUsername(username);<br>        <span class="hljs-keyword">if</span> (loadedUser == <span class="hljs-keyword">null</span>) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> InternalAuthenticationServiceException(<span class="hljs-string">&quot;UserDetailsService returned null, which is an interface contract violation&quot;</span>);<br>        &#125;<br>        <span class="hljs-keyword">return</span> loadedUser;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>UserDetailsService æ¥å£åªæœ‰ä¸€ä¸ªæ–¹æ³•ï¼ŒloadUserByUsername(String username)ï¼Œä¸€èˆ¬éœ€è¦æˆ‘ä»¬å®ç°æ­¤æ¥å£æ–¹æ³•ï¼Œæ ¹æ®ç”¨æˆ·ååŠ è½½ç™»å½•è®¤è¯å’Œè®¿é—®æˆæƒæ‰€éœ€è¦çš„ä¿¡æ¯ï¼Œå¹¶è¿”å›ä¸€ä¸ª UserDetailsçš„å®ç°ç±»ï¼Œåé¢ç™»å½•è®¤è¯å’Œè®¿é—®æˆæƒéƒ½éœ€è¦ç”¨åˆ°æ­¤ä¸­çš„ä¿¡æ¯ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">UserDetailsService</span> </span>&#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * Locates the user based on the username. In the actual implementation, the search</span><br><span class="hljs-comment">     * may possibly be case sensitive, or case insensitive depending on how the</span><br><span class="hljs-comment">     * implementation instance is configured. In this case, the &lt;code&gt;UserDetails&lt;/code&gt;</span><br><span class="hljs-comment">     * object that comes back may have a username that is of a different case than what</span><br><span class="hljs-comment">     * was actually requested..</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> username the username identifying the user whose data is required.</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> a fully populated user record (never &lt;code&gt;null&lt;/code&gt;)</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> UsernameNotFoundException if the user could not be found or the user has no</span><br><span class="hljs-comment">     * GrantedAuthority</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function">UserDetails <span class="hljs-title">loadUserByUsername</span><span class="hljs-params">(String username)</span> <span class="hljs-keyword">throws</span> UsernameNotFoundException</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>UserDetails æä¾›äº†ä¸€ä¸ªé»˜è®¤å®ç° Userï¼Œä¸»è¦åŒ…å«ç”¨æˆ·åï¼ˆusernameï¼‰ã€å¯†ç (password)ã€æƒé™ï¼ˆauthoritiesï¼‰å’Œä¸€äº›è´¦å·æˆ–å¯†ç çŠ¶æ€çš„æ ‡è¯†ã€‚</p><p>å¦‚æœé»˜è®¤å®ç°æ»¡è¶³ä¸äº†ä½ çš„éœ€æ±‚ï¼Œå¯ä»¥æ ¹æ®éœ€æ±‚å®šåˆ¶è‡ªå·±çš„ UserDetailsï¼Œç„¶ååœ¨ UserDetailsService çš„ loadUserByUsername ä¸­è¿”å›å³å¯ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">UserDetails</span>, <span class="hljs-title">CredentialsContainer</span> </span>&#123;<span class="hljs-comment">// ~ Instance fields</span><br>    <span class="hljs-comment">// ================================================================================================</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">String</span> password;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">String</span> username;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Set&lt;GrantedAuthority&gt; authorities;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">boolean</span> accountNonExpired;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">boolean</span> accountNonLocked;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">boolean</span> credentialsNonExpired;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">boolean</span> enabled;<br><br>    <span class="hljs-comment">// ~ Constructors</span><br>    <span class="hljs-comment">// ===================================================================================================</span><br>    <span class="hljs-keyword">public</span> User(<span class="hljs-keyword">String</span> username, <span class="hljs-keyword">String</span> password,<br>            Collection<span class="hljs-meta">&lt;?</span> <span class="hljs-keyword">extends</span> GrantedAuthority&gt; authorities) &#123;<br>        this(username, password, <span class="hljs-literal">true</span>, <span class="hljs-literal">true</span>, <span class="hljs-literal">true</span>, <span class="hljs-literal">true</span>, authorities);<br>    &#125;ã€€ã€€ ...<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="é€€å‡ºç™»å½•"><a href="#é€€å‡ºç™»å½•" class="headerlink" title="é€€å‡ºç™»å½•"></a>é€€å‡ºç™»å½•</h3><p>Spring Security æä¾›äº†ä¸€ä¸ªé»˜è®¤çš„ç™»å‡ºè¿‡æ»¤å™¨ LogoutFilterï¼Œé»˜è®¤æ‹¦æˆªè·¯å¾„æ˜¯ /logoutï¼Œå½“è®¿é—® /logout è·¯å¾„çš„æ—¶å€™ï¼ŒLogoutFilter ä¼šè¿›è¡Œé€€å‡ºå¤„ç†ã€‚</p><p>LogoutFilter.java</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-keyword">package</span> org.springframework.security.web.authentication.logout;<br><br>public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LogoutFilter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">GenericFilterBean</span> </span>&#123;<br><br>    <span class="hljs-comment">// ~ Instance fields</span><br>    <span class="hljs-comment">// ================================================================================================</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">RequestMatcher</span> logoutRequestMatcher;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">LogoutHandler</span> handler;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">LogoutSuccessHandler</span> logoutSuccessHandler;<br><br>    <span class="hljs-comment">// ~ Constructors</span><br>    <span class="hljs-comment">// ===================================================================================================</span><br>    public <span class="hljs-type">LogoutFilter</span>(<span class="hljs-type">LogoutSuccessHandler</span> logoutSuccessHandler,<br>            <span class="hljs-type">LogoutHandler</span>... handlers) &#123;<br>        <span class="hljs-keyword">this</span>.handler = <span class="hljs-keyword">new</span> <span class="hljs-type">CompositeLogoutHandler</span>(handlers);<br>        <span class="hljs-type">Assert</span>.notNull(logoutSuccessHandler, <span class="hljs-string">&quot;logoutSuccessHandler cannot be null&quot;</span>);<br>        <span class="hljs-keyword">this</span>.logoutSuccessHandler = logoutSuccessHandler;<br>        setFilterProcessesUrl(<span class="hljs-string">&quot;/logout&quot;</span>);ã€€ã€€<span class="hljs-comment">// ç»‘å®š /logout</span><br>    &#125;<span class="hljs-comment">// ~ Methods</span><br>    <span class="hljs-comment">// ========================================================================================================</span><br>    public void doFilter(<span class="hljs-type">ServletRequest</span> req, <span class="hljs-type">ServletResponse</span> res, <span class="hljs-type">FilterChain</span> chain)<br>            <span class="hljs-keyword">throws</span> <span class="hljs-type">IOException</span>, <span class="hljs-type">ServletException</span> &#123;<br>        <span class="hljs-type">HttpServletRequest</span> request = (<span class="hljs-type">HttpServletRequest</span>) req;<br>        <span class="hljs-type">HttpServletResponse</span> response = (<span class="hljs-type">HttpServletResponse</span>) res;<br><br>        <span class="hljs-keyword">if</span> (requiresLogout(request, response)) &#123;<br>            <span class="hljs-type">Authentication</span> auth = <span class="hljs-type">SecurityContextHolder</span>.getContext().getAuthentication();<span class="hljs-keyword">this</span>.handler.logout(request, response, auth);ã€€ã€€<span class="hljs-comment">// ç™»å‡ºå¤„ç†ï¼Œå¯èƒ½åŒ…å«sessionã€cookieã€è®¤è¯ä¿¡æ¯çš„æ¸…ç†å·¥ä½œ</span><br><br>            logoutSuccessHandler.onLogoutSuccess(request, response, auth);ã€€ã€€<span class="hljs-comment">// é€€å‡ºåçš„æ“ä½œï¼Œå¯èƒ½æ˜¯è·³è½¬ã€è¿”å›æˆåŠŸçŠ¶æ€ç­‰</span><br><br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br><br>        chain.doFilter(request, response);<br>    &#125;<br><br>   ...<br>&#125;<br></code></pre></td></tr></table></figure><p>å¦‚ä¸‹æ˜¯ SecurityContextLogoutHandler ä¸­çš„ç™»å‡ºå¤„ç†å®ç°ã€‚</p><p>SecurityContextLogoutHandler.java</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">public void logout(HttpServletRequest request, HttpServletResponse response,<br>        Authentication authentication) &#123;<br>    <span class="hljs-comment">// è®© session å¤±æ•ˆã€€if (invalidateHttpSession) &#123;</span><br>        HttpSession session = request.get<span class="hljs-constructor">Session(<span class="hljs-params">false</span>)</span>;<br>        <span class="hljs-keyword">if</span> (session != null) &#123;<br>            logger.debug(<span class="hljs-string">&quot;Invalidating session: &quot;</span> + session.get<span class="hljs-constructor">Id()</span>);<br>            session.invalidate<span class="hljs-literal">()</span>;<br>        &#125;<br>    &#125;<br>ã€€ã€€ã€€ã€€ã€€<span class="hljs-comment">// æ¸…ç† Security ä¸Šä¸‹æ–‡ï¼Œå…¶ä¸­åŒ…å«ç™»å½•è®¤è¯ä¿¡æ¯</span><br>    <span class="hljs-keyword">if</span> (clearAuthentication) &#123;<br>        SecurityContext context = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">SecurityContextHolder</span>.</span></span>get<span class="hljs-constructor">Context()</span>;<br>        context.set<span class="hljs-constructor">Authentication(<span class="hljs-params">null</span>)</span>;<br>    &#125;<br>    <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">SecurityContextHolder</span>.</span></span>clear<span class="hljs-constructor">Context()</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="è®¿é—®æˆæƒï¼ˆAuthorizationï¼‰"><a href="#è®¿é—®æˆæƒï¼ˆAuthorizationï¼‰" class="headerlink" title="è®¿é—®æˆæƒï¼ˆAuthorizationï¼‰"></a>è®¿é—®æˆæƒï¼ˆAuthorizationï¼‰</h2><p>è®¿é—®æˆæƒä¸»è¦åˆ†ä¸ºä¸¤ç§ï¼šé€šè¿‡URLæ–¹å¼çš„æ¥å£è®¿é—®æ§åˆ¶å’Œæ–¹æ³•è°ƒç”¨çš„æƒé™æ§åˆ¶ã€‚</p><h3 id="æ¥å£è®¿é—®æˆæƒ"><a href="#æ¥å£è®¿é—®æˆæƒ" class="headerlink" title="æ¥å£è®¿é—®æˆæƒ"></a>æ¥å£è®¿é—®æˆæƒ</h3><p>åœ¨é€šè¿‡æ¯”å¦‚æµè§ˆå™¨ä½¿ç”¨URLè®¿é—®åå°æ¥å£æ—¶ï¼Œæ˜¯å¦å…è®¸è®¿é—®æ­¤URLï¼Œå°±æ˜¯æ¥å£è®¿é—®æƒé™ã€‚</p><p>åœ¨è¿›è¡Œæ¥å£è®¿é—®æ—¶ï¼Œä¼šç”± FilterSecurityInterceptor è¿›è¡Œæ‹¦æˆªå¹¶è¿›è¡Œæˆæƒã€‚</p><p>FilterSecurityInterceptor ç»§æ‰¿äº† AbstractSecurityInterceptor å¹¶å®ç°äº† javax.servlet.Filter æ¥å£ï¼Œ æ‰€ä»¥åœ¨URLè®¿é—®çš„æ—¶å€™éƒ½ä¼šè¢«è¿‡æ»¤å™¨æ‹¦æˆªï¼ŒdoFilter å®ç°å¦‚ä¸‹ã€‚</p><p>FilterSecurityInterceptor.java</p><figure class="highlight vbscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs vbscript"><span class="hljs-keyword">public</span> void <span class="hljs-keyword">do</span><span class="hljs-built_in">Filter</span>(ServletRequest <span class="hljs-built_in">request</span>, ServletResponse <span class="hljs-built_in">response</span>,<br>        FilterChain chain) throws IOException, ServletException &#123;<br>    FilterInvocation fi = <span class="hljs-keyword">new</span> FilterInvocation(<span class="hljs-built_in">request</span>, <span class="hljs-built_in">response</span>, chain);<br>    invoke(fi);<br>&#125;<br></code></pre></td></tr></table></figure><p>doFilter æ–¹æ³•åˆè°ƒç”¨äº†è‡ªèº«çš„ invoke æ–¹æ³•ï¼Œ invoke æ–¹æ³•åˆè°ƒç”¨äº†çˆ¶ç±» AbstractSecurityInterceptor çš„ beforeInvocation æ–¹æ³•ã€‚</p><p>FilterSecurityInterceptor.java</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">public void invoke(FilterInvocation fi) throws IOException, ServletException &#123;<br>    <span class="hljs-keyword">if</span> ((fi.get<span class="hljs-constructor">Request()</span> != null)<br><span class="hljs-operator">            &amp;&amp; </span>(fi.get<span class="hljs-constructor">Request()</span>.get<span class="hljs-constructor">Attribute(FILTER_APPLIED)</span> != null)<br><span class="hljs-operator">            &amp;&amp; </span>observeOncePerRequest) &#123;<br>        <span class="hljs-comment">// filter already applied to this request and user wants us to observe</span><br>        <span class="hljs-comment">// once-per-request handling, so don&#x27;t re-do security checking</span><br>        fi.get<span class="hljs-constructor">Chain()</span>.<span class="hljs-keyword">do</span><span class="hljs-constructor">Filter(<span class="hljs-params">fi</span>.<span class="hljs-params">getRequest</span>()</span>, fi.get<span class="hljs-constructor">Response()</span>);<br>    &#125;<br>    <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-comment">// first time this request being called, so perform security checking</span><br>        <span class="hljs-keyword">if</span> (fi.get<span class="hljs-constructor">Request()</span> != null<span class="hljs-operator"> &amp;&amp; </span>observeOncePerRequest) &#123;<br>            fi.get<span class="hljs-constructor">Request()</span>.set<span class="hljs-constructor">Attribute(FILTER_APPLIED, Boolean.TRUE)</span>;<br>        &#125;<br><br>        InterceptorStatusToken token = super.before<span class="hljs-constructor">Invocation(<span class="hljs-params">fi</span>)</span>;<br><br>        <span class="hljs-keyword">try</span> &#123;<br>            fi.get<span class="hljs-constructor">Chain()</span>.<span class="hljs-keyword">do</span><span class="hljs-constructor">Filter(<span class="hljs-params">fi</span>.<span class="hljs-params">getRequest</span>()</span>, fi.get<span class="hljs-constructor">Response()</span>);<br>        &#125;<br>        finally &#123;<br>            super.finally<span class="hljs-constructor">Invocation(<span class="hljs-params">token</span>)</span>;<br>        &#125;<br><br>        super.after<span class="hljs-constructor">Invocation(<span class="hljs-params">token</span>, <span class="hljs-params">null</span>)</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ–¹æ³•è°ƒç”¨æˆæƒ"><a href="#æ–¹æ³•è°ƒç”¨æˆæƒ" class="headerlink" title="æ–¹æ³•è°ƒç”¨æˆæƒ"></a>æ–¹æ³•è°ƒç”¨æˆæƒ</h3><p>åœ¨è¿›è¡Œåå°æ–¹æ³•è°ƒç”¨æ—¶ï¼Œæ˜¯å¦å…è®¸è¯¥æ–¹æ³•è°ƒç”¨ï¼Œå°±æ˜¯æ–¹æ³•è°ƒç”¨æƒé™ã€‚æ¯”å¦‚åœ¨æ–¹æ³•ä¸Šæ·»åŠ äº†æ­¤ç±»æ³¨è§£ @PreAuthorize(â€œhasRole(â€˜ROLE_ADMINâ€™)â€) ï¼ŒSecurity æ–¹æ³•æ³¨è§£çš„æ”¯æŒéœ€è¦åœ¨ä»»ä½•é…ç½®ç±»ä¸­ï¼ˆå¦‚ WebSecurityConfigurerAdapter ï¼‰æ·»åŠ  @EnableGlobalMethodSecurity(prePostEnabled = true) å¼€å¯ï¼Œæ‰èƒ½å¤Ÿä½¿ç”¨ã€‚</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@Configuration</span><br><span class="hljs-variable">@EnableWebSecurity</span><br><span class="hljs-variable">@EnableGlobalMethodSecurity</span>(prePostEnabled = true)<br>public class WebSecurityConfig extends WebSecurityConfigurerAdapter &#123;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨è¿›è¡Œæ–¹æ³•è°ƒç”¨æ—¶ï¼Œä¼šç”± MethodSecurityInterceptor è¿›è¡Œæ‹¦æˆªå¹¶è¿›è¡Œæˆæƒã€‚</p><p>MethodSecurityInterceptor ç»§æ‰¿äº† AbstractSecurityInterceptor å¹¶å®ç°äº†AOP çš„ org.aopalliance.intercept.MethodInterceptor æ¥å£ï¼Œ æ‰€ä»¥å¯ä»¥åœ¨æ–¹æ³•è°ƒç”¨æ—¶è¿›è¡Œæ‹¦æˆªã€‚</p><p>MethodSecurityInterceptor .java</p><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs aspectj"><span class="hljs-keyword">public</span> <span class="hljs-function">Object <span class="hljs-title">invoke</span><span class="hljs-params">(MethodInvocation mi)</span> <span class="hljs-keyword">throws</span> Throwable </span>&#123;<br>    InterceptorStatusToken token = <span class="hljs-keyword">super</span>.beforeInvocation(mi);<br><br>    Object result;<br>    <span class="hljs-keyword">try</span> &#123;<br>        result = mi.<span class="hljs-keyword">proceed</span>();<br>    &#125;<br>    <span class="hljs-keyword">finally</span> &#123;<br>        <span class="hljs-keyword">super</span>.finallyInvocation(token);<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">return</span> <span class="hljs-keyword">super</span>.<span class="hljs-title">afterInvocation</span><span class="hljs-params">(token, result)</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬çœ‹åˆ°ï¼ŒMethodSecurityInterceptor è·Ÿ FilterSecurityInterceptor ä¸€æ ·ï¼Œ éƒ½æ˜¯é€šè¿‡è°ƒç”¨çˆ¶ç±» AbstractSecurityInterceptor çš„ç›¸å…³æ–¹æ³•å®Œæˆæˆæƒï¼Œå…¶ä¸­ beforeInvocation æ˜¯å®Œæˆæƒé™è®¤è¯çš„å…³é”®ã€‚</p><p>AbstractSecurityInterceptor.java</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">protected</span> InterceptorStatusToken <span class="hljs-function"><span class="hljs-title">beforeInvocation</span>(<span class="hljs-params"><span class="hljs-built_in">Object</span> <span class="hljs-built_in">object</span></span>)</span> &#123;<br>        ...<br>ã€€ã€€ã€€ã€€ã€€<span class="hljs-comment">// é€šè¿‡ SecurityMetadataSource è·å–æƒé™é…ç½®ä¿¡æ¯ï¼Œå¯ä»¥å®šåˆ¶å®ç°è‡ªå·±çš„æƒé™ä¿¡æ¯è·å–é€»è¾‘</span><br>        Collection&lt;ConfigAttribute&gt; attributes = <span class="hljs-built_in">this</span>.obtainSecurityMetadataSource().getAttributes(<span class="hljs-built_in">object</span>);<br><br>ã€€ã€€ã€€ã€€ã€€...ã€€ã€€ã€€ã€€ã€€<span class="hljs-comment">// ç¡®è®¤æ˜¯å¦ç»è¿‡ç™»å½•è®¤è¯ã€€ã€€ã€€ã€€ã€€</span><br>        Authentication authenticated = authenticateIfRequired();<br><br>        <span class="hljs-comment">// Attempt authorization</span><br>        <span class="hljs-keyword">try</span> &#123;ã€€ã€€ã€€ã€€ã€€ã€€  <span class="hljs-comment">// é€šè¿‡ AccessDecisionManager å®Œæˆæˆæƒè®¤è¯ï¼Œé»˜è®¤å®ç°æ˜¯ AffirmativeBased</span><br>            <span class="hljs-built_in">this</span>.accessDecisionManager.decide(authenticated, <span class="hljs-built_in">object</span>, attributes);<br>        &#125;<br>        ...<br>    &#125;<br></code></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç æ˜¾ç¤º AbstractSecurityInterceptor åˆæ˜¯å§”æ‰˜æˆæƒè®¤è¯å™¨ AccessDecisionManager å®Œæˆæˆæƒè®¤è¯ï¼Œé»˜è®¤å®ç°æ˜¯ AffirmativeBasedï¼Œ decide æ–¹æ³•å®ç°å¦‚ä¸‹ã€‚</p><p>AffirmativeBased.java</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">decide</span>(<span class="hljs-params">Authentication authentication, Object <span class="hljs-built_in">object</span>,</span></span><br><span class="hljs-function"><span class="hljs-params">            Collection&lt;ConfigAttribute&gt; configAttributes</span>) throws AccessDeniedException</span> &#123;<br>        <span class="hljs-built_in">int</span> deny = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (AccessDecisionVoter voter : getDecisionVoters()) &#123;ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ <span class="hljs-comment">// é€šè¿‡å„ç§æŠ•ç¥¨ç­–ç•¥ï¼Œæœ€ç»ˆå†³å®šæ˜¯å¦æˆæƒã€€</span><br>            <span class="hljs-built_in">int</span> result = voter.vote(authentication, <span class="hljs-built_in">object</span>, configAttributes);<br><span class="hljs-keyword">switch</span> (result) &#123;<br>            <span class="hljs-keyword">case</span> AccessDecisionVoter.ACCESS_GRANTED:<br>                <span class="hljs-keyword">return</span>;<br>            <span class="hljs-keyword">case</span> AccessDecisionVoter.ACCESS_DENIED:<br>                deny++;<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-literal">default</span>:<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>ã€€ã€€ã€€ã€€...<br>    &#125;<br></code></pre></td></tr></table></figure><p>è€Œ AccessDecisionManager å†³å®šæˆæƒåˆæ˜¯é€šè¿‡ä¸€ä¸ªæˆæƒç­–ç•¥é›†åˆï¼ˆAccessDecisionVoter ï¼‰å†³å®šçš„ï¼Œæˆæƒå†³å®šçš„åŸåˆ™æ˜¯ï¼š</p><ol><li><p>éå†æ‰€æœ‰æˆæƒç­–ç•¥ï¼Œ å¦‚æœæœ‰å…¶ä¸­ä¸€ä¸ªè¿”å› ACCESS_GRANTEDï¼Œåˆ™åŒæ„æˆæƒã€‚</p></li><li><p>å¦åˆ™ï¼Œç­‰å¾…éå†ç»“æŸï¼Œç»Ÿè®¡ ACCESS_DENIED ä¸ªæ•°ï¼Œåªè¦æ‹’ç»æ•°å¤§äº1ï¼Œåˆ™ä¸åŒæ„æˆæƒã€‚</p><p>å¯¹äºæ¥å£è®¿é—®æˆæƒï¼Œä¹Ÿå°±æ˜¯ FilterSecurityInterceptor ç®¡ç†çš„URLæˆæƒï¼Œé»˜è®¤å¯¹åº”çš„æˆæƒç­–ç•¥åªæœ‰ä¸€ä¸ªï¼Œå°±æ˜¯ WebExpressionVoterï¼Œå®ƒçš„æˆæƒç­–ç•¥ä¸»è¦æ˜¯æ ¹æ® WebSecurityConfigurerAdapter å†…é…ç½®çš„è·¯å¾„è®¿é—®ç­–ç•¥è¿›è¡ŒåŒ¹é…ï¼Œç„¶åå†³å®šæ˜¯å¦æˆæƒã€‚</p></li></ol><p>WebExpressionVoter.java</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Voter which handles web authorisation decisions.</span><br><span class="hljs-comment"> * @author Luke Taylor</span><br><span class="hljs-comment"> * @since 3.0</span><br><span class="hljs-comment"> */</span><br>public <span class="hljs-keyword">class</span> WebExpressionVoter implements AccessDecisionVoter&lt;FilterInvocation&gt; &#123;<br>    <span class="hljs-keyword">private</span> SecurityExpressionHandler&lt;FilterInvocation&gt; expressionHandler = <span class="hljs-keyword">new</span> <span class="hljs-constructor">DefaultWebSecurityExpressionHandler()</span>;<br><br>    public <span class="hljs-built_in">int</span> vote(Authentication authentication, FilterInvocation fi,<br>            Collection&lt;ConfigAttribute&gt; attributes) &#123;<br>        <span class="hljs-keyword">assert</span> authentication != null;<br>        <span class="hljs-keyword">assert</span> fi != null;<br>        <span class="hljs-keyword">assert</span> attributes != null;<br><br>        WebExpressionConfigAttribute weca = find<span class="hljs-constructor">ConfigAttribute(<span class="hljs-params">attributes</span>)</span>;<br><br>        <span class="hljs-keyword">if</span> (weca<span class="hljs-operator"> == </span>null) &#123;<br>            return ACCESS_ABSTAIN;<br>        &#125;<br><br>        EvaluationContext ctx = expressionHandler.create<span class="hljs-constructor">EvaluationContext(<span class="hljs-params">authentication</span>, <span class="hljs-params">fi</span>)</span>;<br>        ctx = weca.post<span class="hljs-constructor">Process(<span class="hljs-params">ctx</span>, <span class="hljs-params">fi</span>)</span>;<br><br>        return <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">ExpressionUtils</span>.</span></span>evaluate<span class="hljs-constructor">AsBoolean(<span class="hljs-params">weca</span>.<span class="hljs-params">getAuthorizeExpression</span>()</span>, ctx) ? ACCESS_GRANTED : ACCESS_DENIED;<br>    &#125;<br><br>    ...<br>&#125;<br></code></pre></td></tr></table></figure><p>å¯¹äºæ–¹æ³•è°ƒç”¨æˆæƒï¼Œåœ¨å…¨å±€æ–¹æ³•å®‰å…¨é…ç½®ç±»é‡Œï¼Œå¯ä»¥çœ‹åˆ°ç»™ MethodSecurityInterceptor é»˜è®¤é…ç½®çš„æœ‰ RoleVoterã€AuthenticatedVoterã€Jsr250Voterã€å’Œ PreInvocationAuthorizationAdviceVoterï¼Œå…¶ä¸­ Jsr250Voterã€PreInvocationAuthorizationAdviceVoter éƒ½éœ€è¦æ‰“å¼€æŒ‡å®šçš„å¼€å…³ï¼Œæ‰ä¼šæ·»åŠ æ”¯æŒã€‚</p><p>GlobalMethodSecurityConfiguration.java</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">@Configuration<br>public <span class="hljs-keyword">class</span> GlobalMethodSecurityConfiguration implements ImportAware, SmartInitializingSingleton &#123;<br>    ...<span class="hljs-keyword">private</span> MethodSecurityInterceptor methodSecurityInterceptor;<br>        ã€€ã€€@Bean<br>    public MethodInterceptor <span class="hljs-keyword">method</span><span class="hljs-constructor">SecurityInterceptor()</span> throws Exception &#123;<br>        this.methodSecurityInterceptor = is<span class="hljs-constructor">AspectJ()</span><br>                ? <span class="hljs-keyword">new</span> <span class="hljs-constructor">AspectJMethodSecurityInterceptor()</span><br>                : <span class="hljs-keyword">new</span> <span class="hljs-constructor">MethodSecurityInterceptor()</span>;<br>        methodSecurityInterceptor.set<span class="hljs-constructor">AccessDecisionManager(<span class="hljs-params">accessDecisionManager</span>()</span>);<br>        methodSecurityInterceptor.set<span class="hljs-constructor">AfterInvocationManager(<span class="hljs-params">afterInvocationManager</span>()</span>);<br>        methodSecurityInterceptor<br>                .set<span class="hljs-constructor">SecurityMetadataSource(<span class="hljs-params">methodSecurityMetadataSource</span>()</span>);<br>        RunAsManager runAsManager = run<span class="hljs-constructor">AsManager()</span>;<br>        <span class="hljs-keyword">if</span> (runAsManager != null) &#123;<br>            methodSecurityInterceptor.set<span class="hljs-constructor">RunAsManager(<span class="hljs-params">runAsManager</span>)</span>;<br>        &#125;<br><br>        return this.methodSecurityInterceptor;<br>    &#125;<br>    <br>    protected AccessDecisionManager access<span class="hljs-constructor">DecisionManager()</span> &#123;<br>        List&lt;AccessDecisionVoter&lt;? extends Object&gt;&gt; decisionVoters = <span class="hljs-keyword">new</span> ArrayList&lt;AccessDecisionVoter&lt;? extends Object&gt;&gt;<span class="hljs-literal">()</span>;<br>        ExpressionBasedPreInvocationAdvice expressionAdvice = <span class="hljs-keyword">new</span> <span class="hljs-constructor">ExpressionBasedPreInvocationAdvice()</span>;<br>        expressionAdvice.set<span class="hljs-constructor">ExpressionHandler(<span class="hljs-params">getExpressionHandler</span>()</span>);<br>        <span class="hljs-keyword">if</span> (pre<span class="hljs-constructor">PostEnabled()</span>) &#123;<br>            decisionVoters<br>                    .add(<span class="hljs-keyword">new</span> <span class="hljs-constructor">PreInvocationAuthorizationAdviceVoter(<span class="hljs-params">expressionAdvice</span>)</span>);<br>        &#125;<br>        <span class="hljs-keyword">if</span> (jsr250<span class="hljs-constructor">Enabled()</span>) &#123;<br>            decisionVoters.add(<span class="hljs-keyword">new</span> <span class="hljs-constructor">Jsr250Voter()</span>);<br>        &#125;<br>        decisionVoters.add(<span class="hljs-keyword">new</span> <span class="hljs-constructor">RoleVoter()</span>);<br>        decisionVoters.add(<span class="hljs-keyword">new</span> <span class="hljs-constructor">AuthenticatedVoter()</span>);<br>        return <span class="hljs-keyword">new</span> <span class="hljs-constructor">AffirmativeBased(<span class="hljs-params">decisionVoters</span>)</span>;<br>    &#125;ã€€ã€€...&#125;<br></code></pre></td></tr></table></figure><p>RoleVoter æ˜¯æ ¹æ®è§’è‰²è¿›è¡ŒåŒ¹é…æˆæƒçš„ç­–ç•¥ã€‚</p><p>RoleVoter.java</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RoleVoter</span> <span class="hljs-title">implements</span> <span class="hljs-title">AccessDecisionVoter</span>&lt;<span class="hljs-title">Object</span>&gt; </span>&#123;<br>ã€€ã€€ <span class="hljs-comment">// RoleVoter  é»˜è®¤è§’è‰²åä»¥ &quot;ROLE_&quot; ä¸ºå‰ç¼€ã€‚</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-built_in">String</span> rolePrefix = <span class="hljs-string">&quot;ROLE_&quot;</span>;<span class="hljs-keyword">public</span> <span class="hljs-built_in">boolean</span> <span class="hljs-function"><span class="hljs-title">supports</span>(<span class="hljs-params">ConfigAttribute attribute</span>)</span> &#123;<br>        <span class="hljs-keyword">if</span> ((attribute.getAttribute() != <span class="hljs-literal">null</span>)<br>                &amp;&amp; attribute.getAttribute().startsWith(getRolePrefix())) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        &#125;<br>        <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>    &#125;<span class="hljs-keyword">public</span> int vote(Authentication authentication, <span class="hljs-built_in">Object</span> <span class="hljs-built_in">object</span>,<br>            Collection&lt;ConfigAttribute&gt; attributes) &#123;<br>        <span class="hljs-keyword">if</span>(authentication == <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-keyword">return</span> ACCESS_DENIED;<br>        &#125;<br>        int result = ACCESS_ABSTAIN;<br>        Collection&lt;? <span class="hljs-keyword">extends</span> GrantedAuthority&gt; authorities = extractAuthorities(authentication);<br>ã€€ã€€ã€€ã€€ã€€<span class="hljs-comment">// é€ä¸ªè§’è‰²è¿›è¡ŒåŒ¹é…ï¼Œå…¥è‚¡æœ‰ä¸€ä¸ªåŒ¹é…å¾—ä¸Šï¼Œåˆ™è¿›è¡Œæˆæƒ</span><br>        <span class="hljs-keyword">for</span> (ConfigAttribute attribute : attributes) &#123;<br>            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.supports(attribute)) &#123;<br>                result = ACCESS_DENIED;<br>                <span class="hljs-comment">// Attempt to find a matching granted authority</span><br>                <span class="hljs-keyword">for</span> (GrantedAuthority authority : authorities) &#123;<br>                    <span class="hljs-keyword">if</span> (attribute.getAttribute().equals(authority.getAuthority())) &#123;<br>                        <span class="hljs-keyword">return</span> ACCESS_GRANTED;<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-keyword">return</span> result;<br>    &#125;<br><br>    Collection&lt;? <span class="hljs-keyword">extends</span> GrantedAuthority&gt; <span class="hljs-function"><span class="hljs-title">extractAuthorities</span>(<span class="hljs-params">Authentication authentication</span>)</span> &#123;<br>        <span class="hljs-keyword">return</span> authentication.getAuthorities();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>AuthenticatedVoter ä¸»è¦æ˜¯é’ˆå¯¹æœ‰é…ç½®ä»¥ä¸‹å‡ ä¸ªå±æ€§æ¥å†³å®šæˆæƒçš„ç­–ç•¥ã€‚</p><p>IS_AUTHENTICATED_REMEMBEREDï¼šè®°ä½æˆ‘ç™»å½•çŠ¶æ€</p><p>IS_AUTHENTICATED_ANONYMOUSLYï¼šåŒ¿åè®¤è¯çŠ¶æ€</p><p>IS_AUTHENTICATED_FULLYï¼š å®Œå…¨ç™»å½•çŠ¶æ€ï¼Œå³éä¸Šé¢ä¸¤ç§ç±»å‹</p><p>AuthenticatedVoter.java</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">public <span class="hljs-built_in">int</span> vote(Authentication authentication, Object <span class="hljs-keyword">object</span>,<br>            Collection&lt;ConfigAttribute&gt; attributes) &#123;<br>        <span class="hljs-built_in">int</span> result = ACCESS_ABSTAIN;<br><br>        <span class="hljs-keyword">for</span> (ConfigAttribute attribute : attributes) &#123;<br>            <span class="hljs-keyword">if</span> (this.supports(attribute)) &#123;<br>                result = ACCESS_DENIED;<br>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€<span class="hljs-comment">// å®Œå…¨ç™»å½•çŠ¶æ€</span><br>                <span class="hljs-keyword">if</span> (<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">IS_AUTHENTICATED_FULLY</span>.</span></span>equals(attribute.get<span class="hljs-constructor">Attribute()</span>)) &#123;<br>                    <span class="hljs-keyword">if</span> (is<span class="hljs-constructor">FullyAuthenticated(<span class="hljs-params">authentication</span>)</span>) &#123;<br>                        return ACCESS_GRANTED;<br>                    &#125;<br>                &#125;<br>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ <span class="hljs-comment">// è®°ä½æˆ‘ç™»å½•çŠ¶æ€</span><br>                <span class="hljs-keyword">if</span> (<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">IS_AUTHENTICATED_REMEMBERED</span>.</span></span>equals(attribute.get<span class="hljs-constructor">Attribute()</span>)) &#123;<br>                    <span class="hljs-keyword">if</span> (authenticationTrustResolver.is<span class="hljs-constructor">RememberMe(<span class="hljs-params">authentication</span>)</span><br><span class="hljs-operator">                            || </span>is<span class="hljs-constructor">FullyAuthenticated(<span class="hljs-params">authentication</span>)</span>) &#123;<br>                        return ACCESS_GRANTED;<br>                    &#125;<br>                &#125;<br>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ <span class="hljs-comment">// åŒ¿åç™»å½•çŠ¶æ€</span><br>                <span class="hljs-keyword">if</span> (<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">IS_AUTHENTICATED_ANONYMOUSLY</span>.</span></span>equals(attribute.get<span class="hljs-constructor">Attribute()</span>)) &#123;<br>                    <span class="hljs-keyword">if</span> (authenticationTrustResolver.is<span class="hljs-constructor">Anonymous(<span class="hljs-params">authentication</span>)</span><br><span class="hljs-operator">                            || </span>is<span class="hljs-constructor">FullyAuthenticated(<span class="hljs-params">authentication</span>)</span><br><span class="hljs-operator">                            || </span>authenticationTrustResolver.is<span class="hljs-constructor">RememberMe(<span class="hljs-params">authentication</span>)</span>) &#123;<br>                        return ACCESS_GRANTED;<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br><br>        return result;<br>    &#125;<br></code></pre></td></tr></table></figure><p>PreInvocationAuthorizationAdviceVoter æ˜¯é’ˆå¯¹ç±»ä¼¼ @PreAuthorize(â€œhasRole(â€˜ROLE_ADMINâ€™)â€) æ³¨è§£è§£æå¹¶è¿›è¡Œæˆæƒçš„ç­–ç•¥ã€‚</p><p>PreInvocationAuthorizationAdviceVoter.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PreInvocationAuthorizationAdviceVoter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">AccessDecisionVoter</span>&lt;<span class="hljs-title">MethodInvocation</span>&gt; </span>&#123;<span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> PreInvocationAuthorizationAdvice preAdvice;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">vote</span><span class="hljs-params">(Authentication authentication, MethodInvocation method,</span></span><br><span class="hljs-function"><span class="hljs-params">            Collection&lt;ConfigAttribute&gt; attributes)</span> </span>&#123;<br><br>        PreInvocationAttribute preAttr = findPreInvocationAttribute(attributes);<br><br>        <span class="hljs-keyword">if</span> (preAttr == <span class="hljs-keyword">null</span>) &#123;<br>            <span class="hljs-comment">// No expression based metadata, so abstain</span><br>            <span class="hljs-keyword">return</span> ACCESS_ABSTAIN;<br>        &#125;<br><br>        <span class="hljs-keyword">boolean</span> allowed = preAdvice.before(authentication, method, preAttr);<br><br>        <span class="hljs-keyword">return</span> allowed ? ACCESS_GRANTED : ACCESS_DENIED;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">private</span> PreInvocationAttribute <span class="hljs-title">findPreInvocationAttribute</span><span class="hljs-params">(</span></span><br><span class="hljs-function"><span class="hljs-params">            Collection&lt;ConfigAttribute&gt; config)</span> </span>&#123;<br>        <span class="hljs-keyword">for</span> (ConfigAttribute attribute : config) &#123;<br>            <span class="hljs-keyword">if</span> (attribute <span class="hljs-keyword">instanceof</span> PreInvocationAttribute) &#123;<br>                <span class="hljs-keyword">return</span> (PreInvocationAttribute) attribute;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>PreInvocationAuthorizationAdviceVoter è§£æå‡ºæ³¨è§£å±æ€§é…ç½®ï¼Œ ç„¶åé€šè¿‡è°ƒç”¨ PreInvocationAuthorizationAdvice çš„å‰ç½®é€šçŸ¥æ–¹æ³•è¿›è¡Œæˆæƒè®¤è¯ï¼Œé»˜è®¤å®ç°ç±»ä¼¼ ExpressionBasedPreInvocationAdviceï¼Œé€šçŸ¥å†…ä¸»è¦è¿›è¡Œäº†å†…å®¹çš„è¿‡æ»¤å’Œæƒé™è¡¨è¾¾å¼çš„åŒ¹é…ã€‚</p><p>ExpressionBasedPreInvocationAdvice.java</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">public <span class="hljs-keyword">class</span> ExpressionBasedPreInvocationAdvice implements PreInvocationAuthorizationAdvice &#123;<br>    <span class="hljs-keyword">private</span> MethodSecurityExpressionHandler expressionHandler = <span class="hljs-keyword">new</span> <span class="hljs-constructor">DefaultMethodSecurityExpressionHandler()</span>;<br><br>    public boolean before(Authentication authentication, MethodInvocation mi, PreInvocationAttribute attr) &#123;<br>        PreInvocationExpressionAttribute preAttr = (PreInvocationExpressionAttribute) attr;<br>        EvaluationContext ctx = expressionHandler.create<span class="hljs-constructor">EvaluationContext(<span class="hljs-params">authentication</span>, <span class="hljs-params">mi</span>)</span>;<br>        Expression preFilter = preAttr.get<span class="hljs-constructor">FilterExpression()</span>;<br>        Expression preAuthorize = preAttr.get<span class="hljs-constructor">AuthorizeExpression()</span>;<br><br>        <span class="hljs-keyword">if</span> (preFilter != null) &#123;<br>            Object filterTarget = find<span class="hljs-constructor">FilterTarget(<span class="hljs-params">preAttr</span>.<span class="hljs-params">getFilterTarget</span>()</span>, ctx, mi);<br>            expressionHandler.filter(filterTarget, preFilter, ctx);<br>        &#125;<br><br>        <span class="hljs-keyword">if</span> (preAuthorize<span class="hljs-operator"> == </span>null) &#123;<br>            return <span class="hljs-literal">true</span>;<br>        &#125;<br><br>        return <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">ExpressionUtils</span>.</span></span>evaluate<span class="hljs-constructor">AsBoolean(<span class="hljs-params">preAuthorize</span>, <span class="hljs-params">ctx</span>)</span>;<br>    &#125;<br><br>ã€€ã€€...<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="æ¡ˆä¾‹å®ç°"><a href="#æ¡ˆä¾‹å®ç°" class="headerlink" title="æ¡ˆä¾‹å®ç°"></a>æ¡ˆä¾‹å®ç°</h2><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä»¥ä¸€ä¸ªå®ç°æ¡ˆä¾‹æ¥è¿›è¡Œè¯´æ˜è®²è§£ã€‚</p><h3 id="æ–°å»ºå·¥ç¨‹"><a href="#æ–°å»ºå·¥ç¨‹" class="headerlink" title="æ–°å»ºå·¥ç¨‹"></a>æ–°å»ºå·¥ç¨‹</h3><p>æ–°å»ºä¸€ä¸ª Spring Boot é¡¹ç›® springboot-spring-securityã€‚</p><p>![img](Spring Security/1-20181128154034209-1921752671.png)</p><h3 id="æ·»åŠ ä¾èµ–"><a href="#æ·»åŠ ä¾èµ–" class="headerlink" title="æ·»åŠ ä¾èµ–"></a>æ·»åŠ ä¾èµ–</h3><p>æ·»åŠ é¡¹ç›®ä¾èµ–ï¼Œä¸»è¦æ˜¯ Spring Security å’Œ JWTï¼Œå¦å¤–æ·»åŠ  Swagger å’Œ fastjson ä½œä¸ºè¾…åŠ©å·¥å…·ã€‚</p><p>pom.xml</p><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="xml">         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;</span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span></span><br><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>top.ivan.demo<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>springboot-spring-security<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">packaging</span>&gt;</span>jar<span class="hljs-tag">&lt;/<span class="hljs-name">packaging</span>&gt;</span></span><br><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>springboot-spring-security<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">description</span>&gt;</span>Demo project for Spring Boot<span class="hljs-tag">&lt;/<span class="hljs-name">description</span>&gt;</span></span><br><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.0.4.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">relativePath</span>/&gt;</span> <span class="hljs-comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span></span><br><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">project.reporting.outputEncoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">project.reporting.outputEncoding</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">java.version</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">java.version</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">mybatis.spring.version</span>&gt;</span>1.3.2<span class="hljs-tag">&lt;/<span class="hljs-name">mybatis.spring.version</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">swagger.version</span>&gt;</span>2.8.0<span class="hljs-tag">&lt;/<span class="hljs-name">swagger.version</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">jwt.version</span>&gt;</span>0.9.1<span class="hljs-tag">&lt;/<span class="hljs-name">jwt.version</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">fastjson.version</span>&gt;</span>1.2.48<span class="hljs-tag">&lt;/<span class="hljs-name">fastjson.version</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span></span><br><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span></span><br><span class="xml">           <span class="hljs-comment">&lt;!-- spring boot --&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">        <span class="hljs-comment">&lt;!-- swagger --&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.springfox<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>springfox-swagger2<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$</span><span class="hljs-template-variable">&#123;swagger.version&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.springfox<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>springfox-swagger-ui<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$</span><span class="hljs-template-variable">&#123;swagger.version&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">        <span class="hljs-comment">&lt;!-- spring security --&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-security<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">        <span class="hljs-comment">&lt;!-- jwt --&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.jsonwebtoken<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jjwt<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$</span><span class="hljs-template-variable">&#123;jwt.version&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">        <span class="hljs-comment">&lt;!-- fastjson --&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>fastjson<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$</span><span class="hljs-template-variable">&#123;fastjson.version&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span></span><br><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span></span><br><span class="xml">                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></span><br><span class="xml">                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span></span><br><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h3 id="å¯åŠ¨ç±»"><a href="#å¯åŠ¨ç±»" class="headerlink" title="å¯åŠ¨ç±»"></a>å¯åŠ¨ç±»</h3><p>å¯åŠ¨ç±»æ²¡ä»€ä¹ˆï¼Œä¸»è¦å¼€å¯ä»¥ä¸‹åŒ…æ‰«æã€‚</p><p>SpringSecurityApplication.java</p><figure class="highlight d"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs d"><span class="hljs-keyword">package</span> com.citibank.springboot.spring.security;<br><br><span class="hljs-keyword">import</span> org.springframework.boot.SpringApplication;<br><span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;<br><span class="hljs-keyword">import</span> org.springframework.context.annotation.ComponentScan;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * å¯åŠ¨å™¨</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">@SpringBootApplication</span><br><span class="hljs-keyword">@ComponentScan</span>(basePackages = <span class="hljs-string">&quot;com.louis.springboot&quot;</span>)<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> SpringSecurityApplication &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> main(String[] args) &#123;<br>        SpringApplication.run(SpringSecurityApplication.<span class="hljs-keyword">class</span>, args);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="è·¨åŸŸé…ç½®ç±»"><a href="#è·¨åŸŸé…ç½®ç±»" class="headerlink" title="è·¨åŸŸé…ç½®ç±»"></a>è·¨åŸŸé…ç½®ç±»</h3><p>è·¨åŸŸé…ç½®ç±»ï¼Œä¸å¤šè¯´ï¼Œéƒ½æ‡‚å¾—ã€‚</p><p>CorsConfig.java</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">package com.citibank.springboot.spring.security.config;<br><br>import org.springframework.context.annotation.Configuration;<br>import org.springframework.web.servlet.config.annotation.CorsRegistry;<br>import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;<br><br>/**<br> * è·¨åŸŸé…ç½®<br> */<br>@Configuration<br>public class CorsConfig implements WebMvcConfigurer &#123;<br><br>    @Override<br>    public void addCorsMappings(CorsRegistry registry) &#123;<br>        registry.addMapping(<span class="hljs-string">&quot;/**&quot;</span>)    // å…è®¸è·¨åŸŸè®¿é—®çš„è·¯å¾„<br>        .allowedOrigins(<span class="hljs-string">&quot;*&quot;</span>)    // å…è®¸è·¨åŸŸè®¿é—®çš„æº<br>        .allowedMethods(<span class="hljs-string">&quot;<span class="hljs-keyword">POST</span>&quot;</span>, <span class="hljs-string">&quot;<span class="hljs-keyword">GET</span>&quot;</span>, <span class="hljs-string">&quot;<span class="hljs-keyword">PUT</span>&quot;</span>, <span class="hljs-string">&quot;<span class="hljs-keyword">OPTIONS</span>&quot;</span>, <span class="hljs-string">&quot;<span class="hljs-keyword">DELETE</span>&quot;</span>)    // å…è®¸è¯·æ±‚æ–¹æ³•<br>        .maxAge(<span class="hljs-number">168000</span>)    // é¢„æ£€é—´éš”æ—¶é—´<br>        .allowedHeaders(<span class="hljs-string">&quot;*&quot;</span>)  // å…è®¸å¤´éƒ¨è®¾ç½®<br>        .allowCredentials(true);    // æ˜¯å¦å‘é€cookie<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Swaggeré…ç½®ç±»"><a href="#Swaggeré…ç½®ç±»" class="headerlink" title="Swaggeré…ç½®ç±»"></a>Swaggeré…ç½®ç±»</h3><p>Swaggeré…ç½®ç±»ï¼Œé™¤äº†å¸¸è§„é…ç½®å¤–ï¼ŒåŠ äº†ä¸€ä¸ªä»¤ç‰Œå±æ€§ï¼Œå¯ä»¥åœ¨æ¥å£è°ƒç”¨çš„æ—¶å€™ä¼ é€’ä»¤ç‰Œã€‚</p><p>SwaggerConfig.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.citibank.springboot.spring.security.config;<br><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">import</span> org.springframework.context.annotation.Bean;<br><span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;<br><br><span class="hljs-keyword">import</span> springfox.documentation.builders.ApiInfoBuilder;<br><span class="hljs-keyword">import</span> springfox.documentation.builders.ParameterBuilder;<br><span class="hljs-keyword">import</span> springfox.documentation.builders.PathSelectors;<br><span class="hljs-keyword">import</span> springfox.documentation.builders.RequestHandlerSelectors;<br><span class="hljs-keyword">import</span> springfox.documentation.schema.ModelRef;<br><span class="hljs-keyword">import</span> springfox.documentation.service.ApiInfo;<br><span class="hljs-keyword">import</span> springfox.documentation.service.Parameter;<br><span class="hljs-keyword">import</span> springfox.documentation.spi.DocumentationType;<br><span class="hljs-keyword">import</span> springfox.documentation.spring.web.plugins.Docket;<br><span class="hljs-keyword">import</span> springfox.documentation.swagger2.annotations.EnableSwagger2;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Swaggeré…ç½®</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@Configuration</span><br><span class="hljs-meta">@EnableSwagger2</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SwaggerConfig</span> </span>&#123;<br><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Docket <span class="hljs-title">createRestApi</span><span class="hljs-params">()</span></span>&#123;<br>        <span class="hljs-comment">// æ·»åŠ è¯·æ±‚å‚æ•°ï¼Œæˆ‘ä»¬è¿™é‡ŒæŠŠtokenä½œä¸ºè¯·æ±‚å¤´éƒ¨å‚æ•°ä¼ å…¥åç«¯</span><br>        ParameterBuilder parameterBuilder = <span class="hljs-keyword">new</span> ParameterBuilder();<br>        List&lt;Parameter&gt; parameters = <span class="hljs-keyword">new</span> ArrayList&lt;Parameter&gt;();<br>        parameterBuilder.name(<span class="hljs-string">&quot;Authorization&quot;</span>).description(<span class="hljs-string">&quot;ä»¤ç‰Œ&quot;</span>).modelRef(<span class="hljs-keyword">new</span> ModelRef(<span class="hljs-string">&quot;string&quot;</span>)).parameterType(<span class="hljs-string">&quot;header&quot;</span>)<br>                .required(<span class="hljs-keyword">false</span>).build();<br>        parameters.add(parameterBuilder.build());<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Docket(DocumentationType.SWAGGER_2).apiInfo(apiInfo()).select().apis(RequestHandlerSelectors.any())<br>                .paths(PathSelectors.any()).build().globalOperationParameters(parameters);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">private</span> ApiInfo <span class="hljs-title">apiInfo</span><span class="hljs-params">()</span></span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ApiInfoBuilder().build();<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>åŠ äº†ä»¤ç‰Œå±æ€§åçš„ Swagger æ¥å£è°ƒç”¨ç•Œé¢ã€‚</p><p>![img](Spring Security/2-20181128155349854-989402738.png)</p><h3 id="å®‰å…¨é…ç½®ç±»"><a href="#å®‰å…¨é…ç½®ç±»" class="headerlink" title="å®‰å…¨é…ç½®ç±»"></a>å®‰å…¨é…ç½®ç±»</h3><p>ä¸‹é¢è¿™ä¸ªé…ç½®ç±»æ˜¯Spring Securityçš„å…³é”®é…ç½®ã€‚</p><p>åœ¨è¿™ä¸ªé…ç½®ç±»ä¸­ï¼Œæˆ‘ä»¬ä¸»è¦åšäº†ä»¥ä¸‹å‡ ä¸ªé…ç½®ï¼š</p><ol><li><p>è®¿é—®è·¯å¾„URLçš„æˆæƒç­–ç•¥ï¼Œå¦‚ç™»å½•ã€Swaggerè®¿é—®å…ç™»å½•è®¤è¯ç­‰</p></li><li><p>æŒ‡å®šäº†ç™»å½•è®¤è¯æµç¨‹è¿‡æ»¤å™¨ JwtLoginFilterï¼Œç”±å®ƒæ¥è§¦å‘ç™»å½•è®¤è¯</p></li><li><p>æŒ‡å®šäº†è‡ªå®šä¹‰èº«ä»½è®¤è¯ç»„ä»¶ JwtAuthenticationProviderï¼Œå¹¶æ³¨å…¥ UserDetailsService</p></li><li><p>æŒ‡å®šäº†è®¿é—®æ§åˆ¶è¿‡æ»¤å™¨ JwtAuthenticationFilterï¼Œåœ¨æˆæƒæ—¶è§£æä»¤ç‰Œå’Œè®¾ç½®ç™»å½•çŠ¶æ€</p></li><li><p>æŒ‡å®šäº†é€€å‡ºç™»å½•å¤„ç†å™¨ï¼Œå› ä¸ºæ˜¯å‰åç«¯åˆ†ç¦»ï¼Œé˜²æ­¢å†…ç½®çš„ç™»å½•å¤„ç†å™¨åœ¨åå°è¿›è¡Œè·³è½¬</p></li></ol><p>WebSecurityConfig.java</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-keyword">package</span> com.citibank.springboot.spring.security.config;<br><br><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.<span class="hljs-type">Autowired</span>;<br><span class="hljs-keyword">import</span> org.springframework.context.annotation.<span class="hljs-type">Bean</span>;<br><span class="hljs-keyword">import</span> org.springframework.context.annotation.<span class="hljs-type">Configuration</span>;<br><span class="hljs-keyword">import</span> org.springframework.http.<span class="hljs-type">HttpMethod</span>;<br><span class="hljs-keyword">import</span> org.springframework.security.authentication.<span class="hljs-type">AuthenticationManager</span>;<br><span class="hljs-keyword">import</span> org.springframework.security.config.annotation.authentication.builders.<span class="hljs-type">AuthenticationManagerBuilder</span>;<br><span class="hljs-keyword">import</span> org.springframework.security.config.annotation.method.configuration.<span class="hljs-type">EnableGlobalMethodSecurity</span>;<br><span class="hljs-keyword">import</span> org.springframework.security.config.annotation.web.builders.<span class="hljs-type">HttpSecurity</span>;<br><span class="hljs-keyword">import</span> org.springframework.security.config.annotation.web.configuration.<span class="hljs-type">EnableWebSecurity</span>;<br><span class="hljs-keyword">import</span> org.springframework.security.config.annotation.web.configuration.<span class="hljs-type">WebSecurityConfigurerAdapter</span>;<br><span class="hljs-keyword">import</span> org.springframework.security.core.userdetails.<span class="hljs-type">UserDetailsService</span>;<br><span class="hljs-keyword">import</span> org.springframework.security.web.authentication.<span class="hljs-type">UsernamePasswordAuthenticationFilter</span>;<br><span class="hljs-keyword">import</span> org.springframework.security.web.authentication.logout.<span class="hljs-type">HttpStatusReturningLogoutSuccessHandler</span>;<br><br><span class="hljs-keyword">import</span> com.citibank.springboot.spring.security.security.<span class="hljs-type">JwtAuthenticationFilter</span>;<br><span class="hljs-keyword">import</span> com.citibank.springboot.spring.security.security.<span class="hljs-type">JwtAuthenticationProvider</span>;<br><span class="hljs-keyword">import</span> com.citibank.springboot.spring.security.security.<span class="hljs-type">JwtLoginFilter</span>;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Security Config</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@Configuration</span><br><span class="hljs-meta">@EnableWebSecurity</span><br><span class="hljs-meta">@EnableGlobalMethodSecurity</span>(prePostEnabled = <span class="hljs-literal">true</span>)<br>public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">WebSecurityConfig</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">WebSecurityConfigurerAdapter</span> </span>&#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">UserDetailsService</span> userDetailsService;<br>    <br>    <span class="hljs-meta">@Override</span><br>    public void configure(<span class="hljs-type">AuthenticationManagerBuilder</span> auth) <span class="hljs-keyword">throws</span> <span class="hljs-type">Exception</span> &#123;<br>        <span class="hljs-comment">// ä½¿ç”¨è‡ªå®šä¹‰ç™»å½•èº«ä»½è®¤è¯ç»„ä»¶</span><br>        auth.authenticationProvider(<span class="hljs-keyword">new</span> <span class="hljs-type">JwtAuthenticationProvider</span>(userDetailsService));<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> void configure(<span class="hljs-type">HttpSecurity</span> http) <span class="hljs-keyword">throws</span> <span class="hljs-type">Exception</span> &#123;<br>        <span class="hljs-comment">// ç¦ç”¨ csrf, ç”±äºä½¿ç”¨çš„æ˜¯JWTï¼Œæˆ‘ä»¬è¿™é‡Œä¸éœ€è¦csrf</span><br>        http.cors().and().csrf().disable()<br>            .authorizeRequests()<br>            <span class="hljs-comment">// è·¨åŸŸé¢„æ£€è¯·æ±‚</span><br>            .antMatchers(<span class="hljs-type">HttpMethod</span>.<span class="hljs-type">OPTIONS</span>, <span class="hljs-string">&quot;/**&quot;</span>).permitAll()<br>            <span class="hljs-comment">// ç™»å½•URL</span><br>            .antMatchers(<span class="hljs-string">&quot;/login&quot;</span>).permitAll()<br>            <span class="hljs-comment">// swagger</span><br>            .antMatchers(<span class="hljs-string">&quot;/swagger-ui.html&quot;</span>).permitAll()<br>            .antMatchers(<span class="hljs-string">&quot;/swagger-resources&quot;</span>).permitAll()<br>            .antMatchers(<span class="hljs-string">&quot;/v2/api-docs&quot;</span>).permitAll()<br>            .antMatchers(<span class="hljs-string">&quot;/webjars/springfox-swagger-ui/**&quot;</span>).permitAll()<br>            <span class="hljs-comment">// å…¶ä»–æ‰€æœ‰è¯·æ±‚éœ€è¦èº«ä»½è®¤è¯</span><br>            .anyRequest().authenticated();<br>        <span class="hljs-comment">// é€€å‡ºç™»å½•å¤„ç†å™¨</span><br>        http.logout().logoutSuccessHandler(<span class="hljs-keyword">new</span> <span class="hljs-type">HttpStatusReturningLogoutSuccessHandler</span>());<br>        <span class="hljs-comment">// å¼€å¯ç™»å½•è®¤è¯æµç¨‹è¿‡æ»¤å™¨</span><br>        http.addFilterBefore(<span class="hljs-keyword">new</span> <span class="hljs-type">JwtLoginFilter</span>(authenticationManager()), <span class="hljs-type">UsernamePasswordAuthenticationFilter</span>.<span class="hljs-keyword">class</span>);<br>        <span class="hljs-comment">// è®¿é—®æ§åˆ¶æ—¶ç™»å½•çŠ¶æ€æ£€æŸ¥è¿‡æ»¤å™¨</span><br>        http.addFilterBefore(<span class="hljs-keyword">new</span> <span class="hljs-type">JwtAuthenticationFilter</span>(authenticationManager()), <span class="hljs-type">UsernamePasswordAuthenticationFilter</span>.<span class="hljs-keyword">class</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-meta">@Override</span><br>    public <span class="hljs-type">AuthenticationManager</span> authenticationManager() <span class="hljs-keyword">throws</span> <span class="hljs-type">Exception</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">super</span>.authenticationManager();<br>    &#125;<br>    <br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ç™»å½•è®¤è¯è§¦å‘è¿‡æ»¤å™¨"><a href="#ç™»å½•è®¤è¯è§¦å‘è¿‡æ»¤å™¨" class="headerlink" title="ç™»å½•è®¤è¯è§¦å‘è¿‡æ»¤å™¨"></a>ç™»å½•è®¤è¯è§¦å‘è¿‡æ»¤å™¨</h3><p>JwtLoginFilter æ˜¯åœ¨é€šè¿‡è®¿é—® /login çš„POSTè¯·æ±‚æ˜¯è¢«é¦–å…ˆè¢«è§¦å‘çš„è¿‡æ»¤å™¨ï¼Œé»˜è®¤å®ç°æ˜¯ UsernamePasswordAuthenticationFilterï¼Œå®ƒç»§æ‰¿äº† AbstractAuthenticationProcessingFilterï¼ŒæŠ½è±¡çˆ¶ç±»çš„ doFilter å®šä¹‰äº†ç™»å½•è®¤è¯çš„å¤§è‡´æ“ä½œæµç¨‹ï¼Œè¿™é‡Œæˆ‘ä»¬çš„ JwtLoginFilter ç»§æ‰¿äº† UsernamePasswordAuthenticationFilterï¼Œå¹¶è¿›è¡Œäº†ä¸¤ä¸ªä¸»è¦å†…å®¹çš„å®šåˆ¶ã€‚</p><ol><li><p>è¦†å†™è®¤è¯æ–¹æ³•ï¼Œä¿®æ”¹ç”¨æˆ·åã€å¯†ç çš„è·å–æ–¹å¼ï¼Œå…·ä½“åŸå› çœ‹ä»£ç æ³¨é‡Š</p></li><li><p>è¦†å†™è®¤è¯æˆåŠŸåçš„æ“ä½œï¼Œç§»é™¤åå°è·³è½¬ï¼Œæ·»åŠ ç”Ÿæˆä»¤ç‰Œå¹¶è¿”å›ç»™å®¢æˆ·ç«¯</p></li></ol><p>JwtLoginFilter.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.citibank.springboot.spring.security.security;<br><br><span class="hljs-keyword">import</span> java.io.BufferedReader;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.InputStream;<br><span class="hljs-keyword">import</span> java.io.InputStreamReader;<br><span class="hljs-keyword">import</span> java.nio.charset.Charset;<br><br><span class="hljs-keyword">import</span> javax.servlet.FilterChain;<br><span class="hljs-keyword">import</span> javax.servlet.ServletException;<br><span class="hljs-keyword">import</span> javax.servlet.ServletRequest;<br><span class="hljs-keyword">import</span> javax.servlet.ServletResponse;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletResponse;<br><br><span class="hljs-keyword">import</span> org.springframework.security.authentication.AuthenticationManager;<br><span class="hljs-keyword">import</span> org.springframework.security.authentication.event.InteractiveAuthenticationSuccessEvent;<br><span class="hljs-keyword">import</span> org.springframework.security.core.Authentication;<br><span class="hljs-keyword">import</span> org.springframework.security.core.AuthenticationException;<br><span class="hljs-keyword">import</span> org.springframework.security.core.context.SecurityContextHolder;<br><span class="hljs-keyword">import</span> org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;<br><br><span class="hljs-keyword">import</span> com.alibaba.fastjson.JSON;<br><span class="hljs-keyword">import</span> com.alibaba.fastjson.JSONObject;<br><span class="hljs-keyword">import</span> com.citibank.springboot.spring.security.utils.HttpUtils;<br><span class="hljs-keyword">import</span> com.citibank.springboot.spring.security.utils.JwtTokenUtils;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * å¯åŠ¨ç™»å½•è®¤è¯æµç¨‹è¿‡æ»¤å™¨</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">JwtLoginFilter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">UsernamePasswordAuthenticationFilter</span> </span>&#123;<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">JwtLoginFilter</span><span class="hljs-params">(AuthenticationManager authManager)</span> </span>&#123;<br>        setAuthenticationManager(authManager);<br>    &#125;<br>    <br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doFilter</span><span class="hljs-params">(ServletRequest req, ServletResponse res, FilterChain chain)</span></span><br><span class="hljs-function">            <span class="hljs-keyword">throws</span> IOException, ServletException </span>&#123;<br>        <span class="hljs-comment">// POST è¯·æ±‚ /login ç™»å½•æ—¶æ‹¦æˆªï¼Œ ç”±æ­¤æ–¹æ³•è§¦å‘æ‰§è¡Œç™»å½•è®¤è¯æµç¨‹ï¼Œå¯ä»¥åœ¨æ­¤è¦†å†™æ•´ä¸ªç™»å½•è®¤è¯é€»è¾‘</span><br>        <span class="hljs-keyword">super</span>.doFilter(req, res, chain); <br>    &#125;<br>    <br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Authentication <span class="hljs-title">attemptAuthentication</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> AuthenticationException </span>&#123;<br>        <span class="hljs-comment">// å¯ä»¥åœ¨æ­¤è¦†å†™å°è¯•è¿›è¡Œç™»å½•è®¤è¯çš„é€»è¾‘ï¼Œç™»å½•æˆåŠŸä¹‹åç­‰æ“ä½œä¸å†æ­¤æ–¹æ³•å†…</span><br>        <span class="hljs-comment">// å¦‚æœä½¿ç”¨æ­¤è¿‡æ»¤å™¨æ¥è§¦å‘ç™»å½•è®¤è¯æµç¨‹ï¼Œæ³¨æ„ç™»å½•è¯·æ±‚æ•°æ®æ ¼å¼çš„é—®é¢˜</span><br>        <span class="hljs-comment">// æ­¤è¿‡æ»¤å™¨çš„ç”¨æˆ·åå¯†ç é»˜è®¤ä»request.getParameter()è·å–ï¼Œä½†æ˜¯è¿™ç§</span><br>        <span class="hljs-comment">// è¯»å–æ–¹å¼ä¸èƒ½è¯»å–åˆ°å¦‚ application/json ç­‰ post è¯·æ±‚æ•°æ®ï¼Œéœ€è¦æŠŠ</span><br>        <span class="hljs-comment">// ç”¨æˆ·åå¯†ç çš„è¯»å–é€»è¾‘ä¿®æ”¹ä¸ºåˆ°æµä¸­è¯»å–request.getInputStream()</span><br><br>        String body = getBody(request);<br>        JSONObject jsonObject = JSON.parseObject(body);<br>        String username = jsonObject.getString(<span class="hljs-string">&quot;username&quot;</span>);<br>        String password = jsonObject.getString(<span class="hljs-string">&quot;password&quot;</span>);<br><br>        <span class="hljs-keyword">if</span> (username == <span class="hljs-keyword">null</span>) &#123;<br>            username = <span class="hljs-string">&quot;&quot;</span>;<br>        &#125;<br><br>        <span class="hljs-keyword">if</span> (password == <span class="hljs-keyword">null</span>) &#123;<br>            password = <span class="hljs-string">&quot;&quot;</span>;<br>        &#125;<br><br>        username = username.trim();<br><br>        JwtAuthenticatioToken authRequest = <span class="hljs-keyword">new</span> JwtAuthenticatioToken(username, password);<br><br>        <span class="hljs-comment">// Allow subclasses to set the &quot;details&quot; property</span><br>        setDetails(request, authRequest);<br><br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getAuthenticationManager().authenticate(authRequest);<br>    <br>    &#125;<br>    <br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">successfulAuthentication</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response, FilterChain chain,</span></span><br><span class="hljs-function"><span class="hljs-params">            Authentication authResult)</span> <span class="hljs-keyword">throws</span> IOException, ServletException </span>&#123;<br>        <span class="hljs-comment">// å­˜å‚¨ç™»å½•è®¤è¯ä¿¡æ¯åˆ°ä¸Šä¸‹æ–‡</span><br>        SecurityContextHolder.getContext().setAuthentication(authResult);<br>        <span class="hljs-comment">// è®°ä½æˆ‘æœåŠ¡</span><br>        getRememberMeServices().loginSuccess(request, response, authResult);<br>        <span class="hljs-comment">// è§¦å‘äº‹ä»¶ç›‘å¬å™¨</span><br>        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.eventPublisher != <span class="hljs-keyword">null</span>) &#123;<br>            eventPublisher.publishEvent(<span class="hljs-keyword">new</span> InteractiveAuthenticationSuccessEvent(authResult, <span class="hljs-keyword">this</span>.getClass()));<br>        &#125;<br>        <span class="hljs-comment">// ç”Ÿæˆå¹¶è¿”å›tokenç»™å®¢æˆ·ç«¯ï¼Œåç»­è®¿é—®æºå¸¦æ­¤token</span><br>        JwtAuthenticatioToken token = <span class="hljs-keyword">new</span> JwtAuthenticatioToken(<span class="hljs-keyword">null</span>, <span class="hljs-keyword">null</span>, JwtTokenUtils.generateToken(authResult));<br>        HttpUtils.write(response, token);<br>    &#125;<br>    <br>    <span class="hljs-comment">/** </span><br><span class="hljs-comment">     * è·å–è¯·æ±‚Body</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> request</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getBody</span><span class="hljs-params">(HttpServletRequest request)</span> </span>&#123;<br>        StringBuilder sb = <span class="hljs-keyword">new</span> StringBuilder();<br>        InputStream inputStream = <span class="hljs-keyword">null</span>;<br>        BufferedReader reader = <span class="hljs-keyword">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            inputStream = request.getInputStream();<br>            reader = <span class="hljs-keyword">new</span> BufferedReader(<span class="hljs-keyword">new</span> InputStreamReader(inputStream, Charset.forName(<span class="hljs-string">&quot;UTF-8&quot;</span>)));<br>            String line = <span class="hljs-string">&quot;&quot;</span>;<br>            <span class="hljs-keyword">while</span> ((line = reader.readLine()) != <span class="hljs-keyword">null</span>) &#123;<br>                sb.append(line);<br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-keyword">if</span> (inputStream != <span class="hljs-keyword">null</span>) &#123;<br>                <span class="hljs-keyword">try</span> &#123;<br>                    inputStream.close();<br>                &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                    e.printStackTrace();<br>                &#125;<br>            &#125;<br>            <span class="hljs-keyword">if</span> (reader != <span class="hljs-keyword">null</span>) &#123;<br>                <span class="hljs-keyword">try</span> &#123;<br>                    reader.close();<br>                &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                    e.printStackTrace();<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> sb.toString();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ç™»å½•æ§åˆ¶å™¨"><a href="#ç™»å½•æ§åˆ¶å™¨" class="headerlink" title="ç™»å½•æ§åˆ¶å™¨"></a>ç™»å½•æ§åˆ¶å™¨</h3><p>é™¤äº†ä½¿ç”¨ä¸Šé¢çš„ç™»å½•è®¤è¯è¿‡æ»¤å™¨æ‹¦æˆª /login Postè¯·æ±‚ä¹‹å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä¸ä½¿ç”¨ä¸Šé¢çš„è¿‡æ»¤å™¨ï¼Œé€šè¿‡è‡ªå®šä¹‰ç™»å½•æ¥å£å®ç°ï¼Œåªè¦åœ¨ç™»å½•æ¥å£æ‰‹åŠ¨è§¦å‘ç™»å½•æµç¨‹å¹¶ç”Ÿäº§ä»¤ç‰Œå³å¯ã€‚</p><p>å…¶å® Spring Security çš„ç™»å½•è®¤è¯è¿‡ç¨‹åªéœ€ è°ƒç”¨ AuthenticationManager çš„ authenticate(Authentication authentication) æ–¹æ³•ï¼Œæœ€ç»ˆè¿”å›è®¤è¯æˆåŠŸçš„ Authentication å®ç°ç±»å¹¶å­˜å‚¨åˆ°SpringContexHolder ä¸Šä¸‹æ–‡å³å¯ï¼Œè¿™æ ·åé¢æˆæƒçš„æ—¶å€™å°±å¯ä»¥ä» SpringContexHolder ä¸­è·å–ç™»å½•è®¤è¯ä¿¡æ¯ï¼Œå¹¶æ ¹æ®å…¶ä¸­çš„ç”¨æˆ·ä¿¡æ¯å’Œæƒé™ä¿¡æ¯å†³å®šæ˜¯å¦è¿›è¡Œæˆæƒã€‚</p><p>LoginController.java</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">package</span> com.citibank.springboot.spring.security.controller;<br><br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;<br><br><span class="hljs-keyword">import</span> org.springframework.beans.factory.<span class="hljs-keyword">annotation</span>.Autowired;<br><span class="hljs-keyword">import</span> org.springframework.security.authentication.AuthenticationManager;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.<span class="hljs-keyword">annotation</span>.PostMapping;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.<span class="hljs-keyword">annotation</span>.RequestBody;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.<span class="hljs-keyword">annotation</span>.RestController;<br><br><span class="hljs-keyword">import</span> com.citibank.springboot.spring.security.security.JwtAuthenticatioToken;<br><span class="hljs-keyword">import</span> com.citibank.springboot.spring.security.utils.SecurityUtils;<br><span class="hljs-keyword">import</span> com.citibank.springboot.spring.security.vo.HttpResult;<br><span class="hljs-keyword">import</span> com.citibank.springboot.spring.security.vo.LoginBean;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * ç™»å½•æ§åˆ¶å™¨</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@RestController</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LoginController</span> </span>&#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> AuthenticationManager authenticationManager;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ç™»å½•æ¥å£</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@PostMapping(value = <span class="hljs-meta-string">&quot;/login&quot;</span>)</span><br>    <span class="hljs-keyword">public</span> HttpResult login(<span class="hljs-meta">@RequestBody</span> LoginBean loginBean, HttpServletRequest request) throws IOException &#123;<br>        String username = loginBean.getUsername();<br>        String password = loginBean.getPassword();<br>        <br>        <span class="hljs-comment">// ç³»ç»Ÿç™»å½•è®¤è¯</span><br>        JwtAuthenticatioToken token = SecurityUtils.login(request, username, password, authenticationManager);<br>                <br>        <span class="hljs-keyword">return</span> HttpResult.ok(token);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>æ³¨æ„ï¼šå¦‚æœä½¿ç”¨æ­¤ç™»å½•æ§åˆ¶å™¨è§¦å‘ç™»å½•è®¤è¯ï¼Œéœ€è¦ç¦ç”¨ç™»å½•è®¤è¯è¿‡æ»¤å™¨ï¼Œå³å°† WebSecurityConfig ä¸­çš„ä»¥ä¸‹é…ç½®é¡¹æ³¨é‡Šå³å¯ï¼Œå¦åˆ™è®¿é—®ç™»å½•æ¥å£ä¼šè¢«è¿‡æ»¤æ‹¦æˆªï¼Œæ‰§è¡Œä¸ä¼šå†è¿›å…¥æ­¤ç™»å½•æ¥å£ï¼Œå¤§å®¶æ ¹æ®ä½¿ç”¨ä¹ æƒ¯äºŒé€‰ä¸€å³å¯ã€‚</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-comment">// å¼€å¯ç™»å½•è®¤è¯æµç¨‹è¿‡æ»¤å™¨ï¼Œå¦‚æœä½¿ç”¨LoginControllerçš„loginæ¥å£, éœ€è¦æ³¨é‡Šæ‰æ­¤è¿‡æ»¤å™¨ï¼Œæ ¹æ®ä½¿ç”¨ä¹ æƒ¯äºŒé€‰ä¸€å³å¯</span><br>http.add<span class="hljs-constructor">FilterBefore(<span class="hljs-params">new</span> JwtLoginFilter(<span class="hljs-params">authenticationManager</span>()</span>), <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">UsernamePasswordAuthenticationFilter</span>.</span></span><span class="hljs-keyword">class</span>);<br></code></pre></td></tr></table></figure><p>å¦‚ä¸‹æ˜¯ç™»å½•è®¤è¯çš„é€»è¾‘ï¼Œ å¯ä»¥çœ‹åˆ°éƒ¨åˆ†é€»è¾‘è·Ÿä¸Šé¢çš„ç™»å½•è®¤è¯è¿‡æ»¤å™¨å·®ä¸å¤šã€‚</p><ol><li><p>æ‰§è¡Œç™»å½•è®¤è¯è¿‡ç¨‹ï¼Œé€šè¿‡è°ƒç”¨ AuthenticationManager çš„ authenticate(token) æ–¹æ³•å®ç°</p></li><li><p>å°†è®¤è¯æˆåŠŸçš„è®¤è¯ä¿¡æ¯å­˜å‚¨åˆ°ä¸Šä¸‹æ–‡ï¼Œä¾›åç»­è®¿é—®æˆæƒçš„æ—¶å€™è·å–ä½¿ç”¨</p></li><li><p>é€šè¿‡JWTç”Ÿæˆä»¤ç‰Œå¹¶è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œåç»­è®¿é—®å’Œæ“ä½œéƒ½éœ€è¦æºå¸¦æ­¤ä»¤ç‰Œ</p></li></ol><p>SecurityUtils.java</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Securityç›¸å…³æ“ä½œ</span><br><span class="hljs-comment"> */</span><br>public <span class="hljs-keyword">class</span> SecurityUtils &#123;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ç³»ç»Ÿç™»å½•è®¤è¯</span><br><span class="hljs-comment">     * @param request</span><br><span class="hljs-comment">     * @param username</span><br><span class="hljs-comment">     * @param password</span><br><span class="hljs-comment">     * @param authenticationManager</span><br><span class="hljs-comment">     * @return</span><br><span class="hljs-comment">     */</span><br>    public static JwtAuthenticatioToken login(HttpServletRequest request, String username, String password, AuthenticationManager authenticationManager) &#123;<br>        JwtAuthenticatioToken token = <span class="hljs-keyword">new</span> <span class="hljs-constructor">JwtAuthenticatioToken(<span class="hljs-params">username</span>, <span class="hljs-params">password</span>)</span>;<br>        token.set<span class="hljs-constructor">Details(<span class="hljs-params">new</span> WebAuthenticationDetailsSource()</span>.build<span class="hljs-constructor">Details(<span class="hljs-params">request</span>)</span>);<br>        <span class="hljs-comment">// æ‰§è¡Œç™»å½•è®¤è¯è¿‡ç¨‹</span><br>        Authentication authentication = authenticationManager.authenticate(token);<br>        <span class="hljs-comment">// è®¤è¯æˆåŠŸå­˜å‚¨è®¤è¯ä¿¡æ¯åˆ°ä¸Šä¸‹æ–‡</span><br>        <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">SecurityContextHolder</span>.</span></span>get<span class="hljs-constructor">Context()</span>.set<span class="hljs-constructor">Authentication(<span class="hljs-params">authentication</span>)</span>;<br>        <span class="hljs-comment">// ç”Ÿæˆä»¤ç‰Œå¹¶è¿”å›ç»™å®¢æˆ·ç«¯</span><br>        token.set<span class="hljs-constructor">Token(JwtTokenUtils.<span class="hljs-params">generateToken</span>(<span class="hljs-params">authentication</span>)</span>);<br>        return token;<br>    &#125;ã€€ã€€ã€€ã€€...<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ä»¤ç‰Œç”Ÿæˆå™¨"><a href="#ä»¤ç‰Œç”Ÿæˆå™¨" class="headerlink" title="ä»¤ç‰Œç”Ÿæˆå™¨"></a>ä»¤ç‰Œç”Ÿæˆå™¨</h3><p>æˆ‘ä»¬ä»¤ç‰Œæ˜¯ä½¿ç”¨JWTç”Ÿæˆçš„ï¼Œä¸‹é¢æ˜¯ä»¤ç‰Œç”Ÿæˆçš„ç®€è¦é€»è¾‘ï¼Œè¯¦ç»†å‚è§æºç ã€‚</p><p>JwtTokenUtils.java</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * JWTå·¥å…·ç±»</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">JwtTokenUtils</span> <span class="hljs-title">implements</span> <span class="hljs-title">Serializable</span> </span>&#123;<br><br>    ...<span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ç”Ÿæˆä»¤ç‰Œ</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param </span>userDetails ç”¨æˆ·</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return </span>ä»¤ç‰Œ</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">String</span> <span class="hljs-function"><span class="hljs-title">generateToken</span>(<span class="hljs-params">Authentication authentication</span>)</span> &#123;<br>        <span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">Object</span>&gt; claims = <span class="hljs-keyword">new</span> HashMap&lt;&gt;(<span class="hljs-number">3</span>);<br>        claims.put(USERNAME, SecurityUtils.getUsername(authentication));<br>        claims.put(CREATED, <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>());<br>        claims.put(AUTHORITIES, authentication.getAuthorities());<br>        <span class="hljs-keyword">return</span> generateToken(claims);<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ä»æ•°æ®å£°æ˜ç”Ÿæˆä»¤ç‰Œ</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param </span>claims æ•°æ®å£°æ˜</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return </span>ä»¤ç‰Œ</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">String</span> <span class="hljs-function"><span class="hljs-title">generateToken</span>(<span class="hljs-params"><span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">Object</span>&gt; claims</span>)</span> &#123;<br>        <span class="hljs-built_in">Date</span> expirationDate = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(System.currentTimeMillis() + EXPIRE_TIME);<br>        <span class="hljs-keyword">return</span> Jwts.builder().setClaims(claims).setExpiration(expirationDate).signWith(SignatureAlgorithm.HS512, SECRET).compact();<br>    &#125;<br><br>ã€€ã€€...<br><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ç™»å½•èº«ä»½è®¤è¯ç»„ä»¶"><a href="#ç™»å½•èº«ä»½è®¤è¯ç»„ä»¶" class="headerlink" title="ç™»å½•èº«ä»½è®¤è¯ç»„ä»¶"></a>ç™»å½•èº«ä»½è®¤è¯ç»„ä»¶</h3><p>ä¸Šé¢è¯´åˆ°ç™»å½•è®¤è¯æ˜¯é€šè¿‡è°ƒç”¨ AuthenticationManager çš„ authenticate(token) æ–¹æ³•å®ç°çš„ï¼Œè€Œ AuthenticationManager åˆæ˜¯é€šè¿‡è°ƒç”¨ AuthenticationProvider çš„ authenticate(Authentication authentication) æ¥å®Œæˆè®¤è¯çš„ï¼Œæ‰€ä»¥é€šè¿‡å®šåˆ¶ AuthenticationProvider ä¹Ÿå¯ä»¥å®Œæˆå„ç§è‡ªå®šä¹‰çš„éœ€æ±‚ï¼Œæˆ‘ä»¬è¿™é‡Œåªæ˜¯ç®€å•çš„ç»§æ‰¿ DaoAuthenticationProvider å±•ç¤ºå¦‚ä½•è‡ªå®šä¹‰ï¼Œå…·ä½“çš„å¤§å®¶å¯ä»¥æ ¹æ®å„è‡ªçš„éœ€æ±‚æŒ‰éœ€å®šåˆ¶ã€‚</p><p>JwtAuthenticationProvider.java</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-keyword">package</span> com.citibank.springboot.spring.security.security;<br><br><span class="hljs-keyword">import</span> org.springframework.security.authentication.<span class="hljs-type">UsernamePasswordAuthenticationToken</span>;<br><span class="hljs-keyword">import</span> org.springframework.security.authentication.dao.<span class="hljs-type">DaoAuthenticationProvider</span>;<br><span class="hljs-keyword">import</span> org.springframework.security.core.<span class="hljs-type">Authentication</span>;<br><span class="hljs-keyword">import</span> org.springframework.security.core.<span class="hljs-type">AuthenticationException</span>;<br><span class="hljs-keyword">import</span> org.springframework.security.core.userdetails.<span class="hljs-type">UserDetails</span>;<br><span class="hljs-keyword">import</span> org.springframework.security.core.userdetails.<span class="hljs-type">UserDetailsService</span>;<br><span class="hljs-keyword">import</span> org.springframework.security.crypto.bcrypt.<span class="hljs-type">BCryptPasswordEncoder</span>;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * èº«ä»½éªŒè¯æä¾›è€…</span><br><span class="hljs-comment"> */</span><br>public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">JwtAuthenticationProvider</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">DaoAuthenticationProvider</span> </span>&#123;<br><br>    public <span class="hljs-type">JwtAuthenticationProvider</span>(<span class="hljs-type">UserDetailsService</span> userDetailsService) &#123;<br>        setUserDetailsService(userDetailsService);<br>        setPasswordEncoder(<span class="hljs-keyword">new</span> <span class="hljs-type">BCryptPasswordEncoder</span>());<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    public <span class="hljs-type">Authentication</span> authenticate(<span class="hljs-type">Authentication</span> authentication) <span class="hljs-keyword">throws</span> <span class="hljs-type">AuthenticationException</span> &#123;<br>        <span class="hljs-comment">// å¯ä»¥åœ¨æ­¤å¤„è¦†å†™æ•´ä¸ªç™»å½•è®¤è¯é€»è¾‘</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">super</span>.authenticate(authentication);<br>    &#125;<br>    <br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> void additionalAuthenticationChecks(<span class="hljs-type">UserDetails</span> userDetails, <span class="hljs-type">UsernamePasswordAuthenticationToken</span> authentication)<br>            <span class="hljs-keyword">throws</span> <span class="hljs-type">AuthenticationException</span> &#123;<br>        <span class="hljs-comment">// å¯ä»¥åœ¨æ­¤å¤„è¦†å†™å¯†ç éªŒè¯é€»è¾‘</span><br>        <span class="hljs-keyword">super</span>.additionalAuthenticationChecks(userDetails, authentication);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="è®¤è¯ä¿¡æ¯è·å–æœåŠ¡"><a href="#è®¤è¯ä¿¡æ¯è·å–æœåŠ¡" class="headerlink" title="è®¤è¯ä¿¡æ¯è·å–æœåŠ¡"></a>è®¤è¯ä¿¡æ¯è·å–æœåŠ¡</h3><p>é€šè¿‡è·Ÿè¸ªä»£ç è¿è¡Œï¼Œæˆ‘ä»¬å‘ç°åƒé»˜è®¤ä½¿ç”¨çš„ DaoAuthenticationProviderï¼Œåœ¨è®¤è¯çš„ä½¿ç”¨éƒ½æ˜¯é€šè¿‡ä¸€ä¸ªå« UserDetailsService çš„æ¥è·å–ç”¨æˆ·è®¤è¯æ‰€éœ€ä¿¡æ¯çš„ã€‚</p><p>AbstractUserDetailsAuthenticationProvider å®šä¹‰äº†åœ¨ authenticate æ–¹æ³•ä¸­é€šè¿‡ retrieveUser æ–¹æ³•è·å–ç”¨æˆ·ä¿¡æ¯ï¼Œå­ç±» DaoAuthenticationProvider é€šè¿‡ UserDetailsService æ¥è¿›è¡Œè·å–ï¼Œ ä¸€èˆ¬æƒ…å†µï¼Œè¿™ä¸ª UserDetailsService éœ€è¦æˆ‘ä»¬è‡ªå®šä¹‰ï¼Œå®ç°ä»ç”¨æˆ·æœåŠ¡è·å–ç”¨æˆ·å’Œæƒé™ä¿¡æ¯å°è£…åˆ° UserDetails çš„å®ç°ç±»ã€‚</p><p>AbstractUserDetailsAuthenticationProvider.java</p><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs aspectj"><span class="hljs-keyword">public</span> <span class="hljs-function">Authentication <span class="hljs-title">authenticate</span><span class="hljs-params">(Authentication authentication)</span> <span class="hljs-keyword">throws</span> AuthenticationException </span>&#123;<br>        <br>ã€€ã€€ã€€ã€€ã€€...<span class="hljs-keyword">if</span> (user == <span class="hljs-keyword">null</span>) &#123;<br>            cacheWasUsed = <span class="hljs-keyword">false</span>;<br>            <span class="hljs-keyword">try</span> &#123;<br>                user = retrieveUser(username, (UsernamePasswordAuthenticationToken) authentication);<br>            &#125;<br>     <br>        ...<span class="hljs-function"><span class="hljs-keyword">return</span> <span class="hljs-title">createSuccessAuthentication</span><span class="hljs-params">(principalToReturn, authentication, user)</span></span>;<br>    &#125;<br></code></pre></td></tr></table></figure><p>DaoAuthenticationProvider.java</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">final</span> UserDetails <span class="hljs-title">retrieveUser</span><span class="hljs-params">(<span class="hljs-keyword">String</span> username, UsernamePasswordAuthenticationToken authentication)</span></span><br><span class="hljs-function">        throws AuthenticationException </span>&#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>        UserDetails loadedUser = <span class="hljs-keyword">this</span>.getUserDetailsService().loadUserByUsername(username);<br>   <span class="hljs-keyword">return</span> loadedUser;<br>    &#125;<br>    ...<br>&#125;<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬è‡ªå®šä¹‰çš„ UserDetailsServiceï¼Œä»æˆ‘ä»¬çš„ç”¨æˆ·æœåŠ¡ UserService ä¸­è·å–ç”¨æˆ·å’Œæƒé™ä¿¡æ¯ã€‚</p><p>UserDetailsServiceImpl.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.citibank.springboot.spring.security.security;<br><span class="hljs-keyword">import</span> java.util.List;<br><span class="hljs-keyword">import</span> java.util.Set;<br><span class="hljs-keyword">import</span> java.util.stream.Collectors;<br><br><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;<br><span class="hljs-keyword">import</span> org.springframework.security.core.GrantedAuthority;<br><span class="hljs-keyword">import</span> org.springframework.security.core.userdetails.UserDetails;<br><span class="hljs-keyword">import</span> org.springframework.security.core.userdetails.UserDetailsService;<br><span class="hljs-keyword">import</span> org.springframework.security.core.userdetails.UsernameNotFoundException;<br><span class="hljs-keyword">import</span> org.springframework.stereotype.Service;<br><br><span class="hljs-keyword">import</span> com.citibank.springboot.spring.security.model.User;<br><span class="hljs-keyword">import</span> com.citibank.springboot.spring.security.service.UserService;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * ç”¨æˆ·ç™»å½•è®¤è¯ä¿¡æ¯æŸ¥è¯¢</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserDetailsServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">UserDetailsService</span> </span>&#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> UserService userService;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> UserDetails <span class="hljs-title">loadUserByUsername</span><span class="hljs-params">(String username)</span> <span class="hljs-keyword">throws</span> UsernameNotFoundException </span>&#123;<br>        User user = userService.findByUsername(username);<br>        <span class="hljs-keyword">if</span> (user == <span class="hljs-keyword">null</span>) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> UsernameNotFoundException(<span class="hljs-string">&quot;è¯¥ç”¨æˆ·ä¸å­˜åœ¨&quot;</span>);<br>        &#125;<br>        <span class="hljs-comment">// ç”¨æˆ·æƒé™åˆ—è¡¨ï¼Œæ ¹æ®ç”¨æˆ·æ‹¥æœ‰çš„æƒé™æ ‡è¯†ä¸å¦‚ @PreAuthorize(&quot;hasAuthority(&#x27;sys:menu:view&#x27;)&quot;) æ ‡æ³¨çš„æ¥å£å¯¹æ¯”ï¼Œå†³å®šæ˜¯å¦å¯ä»¥è°ƒç”¨æ¥å£</span><br>        Set&lt;String&gt; permissions = userService.findPermissions(username);<br>        List&lt;GrantedAuthority&gt; grantedAuthorities = permissions.stream().map(GrantedAuthorityImpl::<span class="hljs-keyword">new</span>).collect(Collectors.toList());<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> JwtUserDetails(username, user.getPassword(), grantedAuthorities);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸€èˆ¬è€Œè¨€ï¼Œå®šåˆ¶ UserDetailsService å°±å¯ä»¥æ»¡è¶³å¤§éƒ¨åˆ†éœ€æ±‚äº†ï¼Œåœ¨ UserDetailsService æ»¡è¶³ä¸äº†æˆ‘ä»¬çš„éœ€æ±‚çš„æ—¶å€™è€ƒè™‘å®šåˆ¶ AuthenticationProviderã€‚</p><p>å¦‚æœç›´æ¥å®šåˆ¶UserDetailsService ï¼Œè€Œä¸è‡ªå®šä¹‰ AuthenticationProviderï¼Œå¯ä»¥ç›´æ¥åœ¨é…ç½®æ–‡ä»¶ WebSecurityConfig ä¸­è¿™æ ·é…ç½®ã€‚</p><p>WebSecurityConfig.java</p><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs aspectj"><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">configure</span><span class="hljs-params">(AuthenticationManagerBuilder auth)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;<br>    <span class="hljs-comment">// æŒ‡å®šè‡ªå®šä¹‰çš„è·å–ä¿¡æ¯è·å–æœåŠ¡</span><br>    auth.userDetailsService(userDetailsService)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ç”¨æˆ·è®¤è¯ä¿¡æ¯"><a href="#ç”¨æˆ·è®¤è¯ä¿¡æ¯" class="headerlink" title="ç”¨æˆ·è®¤è¯ä¿¡æ¯"></a>ç”¨æˆ·è®¤è¯ä¿¡æ¯</h3><p>ä¸Šé¢ UserDetailsService åŠ è½½å¥½ç”¨æˆ·è®¤è¯ä¿¡æ¯åä¼šå°è£…è®¤è¯ä¿¡æ¯åˆ°ä¸€ä¸ª UserDetails çš„å®ç°ç±»ã€‚</p><p>é»˜è®¤å®ç°æ˜¯ User ç±»ï¼Œæˆ‘ä»¬è¿™é‡Œæ²¡æœ‰ç‰¹æ®Šéœ€è¦ï¼Œç®€å•ç»§æ‰¿å³å¯ï¼Œå¤æ‚éœ€æ±‚å¯ä»¥åœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡Œæ‹“å±•ã€‚</p><p>JwtUserDetails.java</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs typescript">package com.citibank.springboot.spring.security.security;<br><span class="hljs-keyword">import</span> java.util.Collection;<br><br><span class="hljs-keyword">import</span> org.springframework.security.core.GrantedAuthority;<br><span class="hljs-keyword">import</span> org.springframework.security.core.userdetails.User;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * å®‰å…¨ç”¨æˆ·æ¨¡å‹</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">JwtUserDetails</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">User</span> </span>&#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> final long serialVersionUID = 1L;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-title">JwtUserDetails</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> username, <span class="hljs-built_in">String</span> password, Collection&lt;? <span class="hljs-keyword">extends</span> GrantedAuthority&gt; authorities</span>)</span> &#123;<br>        <span class="hljs-built_in">this</span>(username, password, <span class="hljs-literal">true</span>, <span class="hljs-literal">true</span>, <span class="hljs-literal">true</span>, <span class="hljs-literal">true</span>, authorities);<br>    &#125;<br>    <br>    <span class="hljs-keyword">public</span> JwtUserDetails(<span class="hljs-built_in">String</span> username, <span class="hljs-built_in">String</span> password, <span class="hljs-built_in">boolean</span> enabled, <span class="hljs-built_in">boolean</span> accountNonExpired,<br>            <span class="hljs-built_in">boolean</span> credentialsNonExpired, <span class="hljs-built_in">boolean</span> accountNonLocked, Collection&lt;? <span class="hljs-keyword">extends</span> GrantedAuthority&gt; authorities) &#123;<br>        <span class="hljs-built_in">super</span>(username, password, enabled, accountNonExpired, credentialsNonExpired, accountNonLocked, authorities);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ç”¨æˆ·æ“ä½œä»£ç "><a href="#ç”¨æˆ·æ“ä½œä»£ç " class="headerlink" title="ç”¨æˆ·æ“ä½œä»£ç "></a>ç”¨æˆ·æ“ä½œä»£ç </h3><p>ç®€å•çš„ç”¨æˆ·æ¨¡å‹ï¼ŒåŒ…å«ç”¨æˆ·åå¯†ç ã€‚</p><p>User.java</p><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs haxe"><span class="hljs-keyword">package</span> com.louis.springboot.spring.security.model;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * ç”¨æˆ·æ¨¡å‹</span><br><span class="hljs-comment"> * @author Louis</span><br><span class="hljs-comment"> * @date Nov 28, 2018</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>&#123;<br><br>    <span class="hljs-keyword">private</span> Long id;<br>    <br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">String</span> username;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">String</span> password;<br><br>    ...<br><br>&#125;<br></code></pre></td></tr></table></figure><p>ç”¨æˆ·æœåŠ¡æ¥å£ï¼Œåªæä¾›ç®€å•çš„ç”¨æˆ·æŸ¥è¯¢å’Œæƒé™æŸ¥è¯¢æ¥å£ç”¨äºæ¨¡æ‹Ÿã€‚</p><p>UserService.java</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * ç”¨æˆ·ç®¡ç†</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">UserService</span> </span>&#123;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ ¹æ®ç”¨æˆ·åæŸ¥æ‰¾ç”¨æˆ·</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> username</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    User findByUsername(<span class="hljs-keyword">String</span> username);<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æŸ¥æ‰¾ç”¨æˆ·çš„èœå•æƒé™æ ‡è¯†é›†åˆ</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> userName</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    Set&lt;<span class="hljs-keyword">String</span>&gt; findPermissions(<span class="hljs-keyword">String</span> username);<br><br>&#125;<br></code></pre></td></tr></table></figure><p>ç”¨æˆ·æœåŠ¡å®ç°ï¼Œåªç®€å•è·å–è¿”å›æ¨¡æ‹Ÿæ•°æ®ï¼Œå®é™…åœºæ™¯æ ¹æ®æƒ…å†µä»DAOè·å–å³å¯ã€‚</p><p>SysUserServiceImpl.java</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">@Service<br><span class="hljs-built_in">public</span> <span class="hljs-keyword">class</span> SysUserServiceImpl implements UserService &#123;<br><br>    @Override<br>    <span class="hljs-built_in">public</span> <span class="hljs-keyword">User</span> findByUsername(String username) &#123;<br>        <span class="hljs-keyword">User</span> <span class="hljs-keyword">user</span> = <span class="hljs-built_in">new</span> <span class="hljs-keyword">User</span>();<br>        <span class="hljs-keyword">user</span>.setId(<span class="hljs-number">1</span>L);<br>        <span class="hljs-keyword">user</span>.setUsername(username);<br>        String <span class="hljs-keyword">password</span> = <span class="hljs-built_in">new</span> BCryptPasswordEncoder().encode(&quot;123&quot;);<br>        <span class="hljs-keyword">user</span>.setPassword(<span class="hljs-keyword">password</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">user</span>;<br>    &#125;<br><br>    @Override<br>    <span class="hljs-built_in">public</span> <span class="hljs-keyword">Set</span>&lt;String&gt; findPermissions(String username) &#123;<br>        <span class="hljs-keyword">Set</span>&lt;String&gt; permissions = <span class="hljs-built_in">new</span> HashSet&lt;&gt;();<br>        permissions.<span class="hljs-keyword">add</span>(&quot;sys:user:view&quot;);<br>        permissions.<span class="hljs-keyword">add</span>(&quot;sys:user:add&quot;);<br>        permissions.<span class="hljs-keyword">add</span>(&quot;sys:user:edit&quot;);<br>        <span class="hljs-keyword">return</span> permissions;<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>ç”¨æˆ·æ§åˆ¶å™¨ï¼Œæä¾›ä¸‰ä¸ªæµ‹è¯•æ¥å£ï¼Œå…¶ä¸­æƒé™åˆ—è¡¨ä¸­æœªåŒ…å«åˆ é™¤æ¥å£å®šä¹‰çš„æƒé™ï¼ˆâ€™sys:user:deleteâ€™ï¼‰ï¼Œç™»å½•ä¹‹åä¹Ÿå°†æ— æƒé™è°ƒç”¨ã€‚</p><p>UserController.java</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * ç”¨æˆ·æ§åˆ¶å™¨</span><br><span class="hljs-comment"> */</span><br><span class="hljs-variable">@RestController</span><br><span class="hljs-variable">@RequestMapping</span>(<span class="hljs-string">&quot;user&quot;</span>)<br>public class UserController &#123;<br><br>    <br>    <span class="hljs-variable">@PreAuthorize</span>(<span class="hljs-string">&quot;hasAuthority(&#x27;sys:user:view&#x27;)&quot;</span>)<br>    <span class="hljs-variable">@GetMapping</span>(value=<span class="hljs-string">&quot;/findAll&quot;</span>)<br>    public HttpResult findAll() &#123;<br>        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">HttpResult</span><span class="hljs-selector-class">.ok</span>(<span class="hljs-string">&quot;the findAll service is called success.&quot;</span>);<br>    &#125;<br>    <br>    @<span class="hljs-selector-tag">PreAuthorize</span>(<span class="hljs-string">&quot;hasAuthority(&#x27;sys:user:edit&#x27;)&quot;</span>)<br>    @<span class="hljs-selector-tag">GetMapping</span>(value=<span class="hljs-string">&quot;/edit&quot;</span>)<br>    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">HttpResult</span> <span class="hljs-selector-tag">edit</span>() &#123;<br>        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">HttpResult</span><span class="hljs-selector-class">.ok</span>(<span class="hljs-string">&quot;the edit service is called success.&quot;</span>);<br>    &#125;<br>    <br>    @<span class="hljs-selector-tag">PreAuthorize</span>(<span class="hljs-string">&quot;hasAuthority(&#x27;sys:user:delete&#x27;)&quot;</span>)<br>    @<span class="hljs-selector-tag">GetMapping</span>(value=<span class="hljs-string">&quot;/delete&quot;</span>)<br>    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">HttpResult</span> <span class="hljs-selector-tag">delete</span>() &#123;<br>        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">HttpResult</span><span class="hljs-selector-class">.ok</span>(<span class="hljs-string">&quot;the delete service is called success.&quot;</span>);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ç™»å½•è®¤è¯æ£€æŸ¥è¿‡æ»¤å™¨"><a href="#ç™»å½•è®¤è¯æ£€æŸ¥è¿‡æ»¤å™¨" class="headerlink" title="ç™»å½•è®¤è¯æ£€æŸ¥è¿‡æ»¤å™¨"></a>ç™»å½•è®¤è¯æ£€æŸ¥è¿‡æ»¤å™¨</h3><p>è®¿é—®æ¥å£çš„æ—¶å€™ï¼Œç™»å½•è®¤è¯æ£€æŸ¥è¿‡æ»¤å™¨ JwtAuthenticationFilter ä¼šæ‹¦æˆªè¯·æ±‚æ ¡éªŒä»¤ç‰Œå’Œç™»å½•çŠ¶æ€ï¼Œå¹¶æ ¹æ®æƒ…å†µè®¾ç½®ç™»å½•çŠ¶æ€ã€‚</p><p>JwtAuthenticationFilter.java</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * ç™»å½•è®¤è¯æ£€æŸ¥è¿‡æ»¤å™¨</span><br><span class="hljs-comment"> */</span><br>public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">JwtAuthenticationFilter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">BasicAuthenticationFilter</span> </span>&#123;<br>    <br>    <span class="hljs-meta">@Autowired</span><br>    public <span class="hljs-type">JwtAuthenticationFilter</span>(<span class="hljs-type">AuthenticationManager</span> authenticationManager) &#123;<br>        <span class="hljs-keyword">super</span>(authenticationManager);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> void doFilterInternal(<span class="hljs-type">HttpServletRequest</span> request, <span class="hljs-type">HttpServletResponse</span> response, <span class="hljs-type">FilterChain</span> chain) <span class="hljs-keyword">throws</span> <span class="hljs-type">IOException</span>, <span class="hljs-type">ServletException</span> &#123;<br>        <span class="hljs-comment">// è·å–token, å¹¶æ£€æŸ¥ç™»å½•çŠ¶æ€</span><br>        <span class="hljs-type">SecurityUtils</span>.checkAuthentication(request);<br>        chain.doFilter(request, response);<br>    &#125;<br>    <br>&#125;<br></code></pre></td></tr></table></figure><p>SecurityUtils.java</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * è·å–ä»¤ç‰Œè¿›è¡Œè®¤è¯</span><br><span class="hljs-comment"> * @param request</span><br><span class="hljs-comment"> */</span><br>public static void check<span class="hljs-constructor">Authentication(HttpServletRequest <span class="hljs-params">request</span>)</span> &#123;<br>    <span class="hljs-comment">// è·å–ä»¤ç‰Œå¹¶æ ¹æ®ä»¤ç‰Œè·å–ç™»å½•è®¤è¯ä¿¡æ¯</span><br>    Authentication authentication = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">JwtTokenUtils</span>.</span></span>get<span class="hljs-constructor">AuthenticationeFromToken(<span class="hljs-params">request</span>)</span>;<br>    <span class="hljs-comment">// è®¾ç½®ç™»å½•è®¤è¯ä¿¡æ¯åˆ°ä¸Šä¸‹æ–‡</span><br>    <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">SecurityContextHolder</span>.</span></span>get<span class="hljs-constructor">Context()</span>.set<span class="hljs-constructor">Authentication(<span class="hljs-params">authentication</span>)</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>JwtTokenUtils.java</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ ¹æ®è¯·æ±‚ä»¤ç‰Œè·å–ç™»å½•è®¤è¯ä¿¡æ¯</span><br><span class="hljs-comment"> * @param token ä»¤ç‰Œ</span><br><span class="hljs-comment"> * @return ç”¨æˆ·å</span><br><span class="hljs-comment"> */</span><br>public static Authentication get<span class="hljs-constructor">AuthenticationeFromToken(HttpServletRequest <span class="hljs-params">request</span>)</span> &#123;<br>    Authentication authentication = null;<br>    <span class="hljs-comment">// è·å–è¯·æ±‚æºå¸¦çš„ä»¤ç‰Œ</span><br>    String token = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">JwtTokenUtils</span>.</span></span>get<span class="hljs-constructor">Token(<span class="hljs-params">request</span>)</span>;<br>    <span class="hljs-keyword">if</span>(token != null) &#123;<br>        <span class="hljs-comment">// è¯·æ±‚ä»¤ç‰Œä¸èƒ½ä¸ºç©º</span><br>        <span class="hljs-keyword">if</span>(<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">SecurityUtils</span>.</span></span>get<span class="hljs-constructor">Authentication()</span><span class="hljs-operator"> == </span>null) &#123;<br>            <span class="hljs-comment">// ä¸Šä¸‹æ–‡ä¸­Authenticationä¸ºç©º</span><br>            Claims claims = get<span class="hljs-constructor">ClaimsFromToken(<span class="hljs-params">token</span>)</span>;<br>            <span class="hljs-keyword">if</span>(claims<span class="hljs-operator"> == </span>null) &#123;<br>                return null;<br>            &#125;<br>            String username = claims.get<span class="hljs-constructor">Subject()</span>;<br>            <span class="hljs-keyword">if</span>(username<span class="hljs-operator"> == </span>null) &#123;<br>                return null;<br>            &#125;<br>            <span class="hljs-keyword">if</span>(is<span class="hljs-constructor">TokenExpired(<span class="hljs-params">token</span>)</span>) &#123;<br>                return null;<br>            &#125;<br>            Object authors = claims.get(AUTHORITIES);<br>            List&lt;GrantedAuthority&gt; authorities = <span class="hljs-keyword">new</span> ArrayList&lt;GrantedAuthority&gt;<span class="hljs-literal">()</span>;<br>            <span class="hljs-keyword">if</span> (authors != null<span class="hljs-operator"> &amp;&amp; </span>authors instanceof List) &#123;<br>                <span class="hljs-keyword">for</span> (Object <span class="hljs-keyword">object</span> : (List) authors) &#123;<br>                    authorities.add(<span class="hljs-keyword">new</span> <span class="hljs-constructor">GrantedAuthorityImpl((String)</span> ((Map) <span class="hljs-keyword">object</span>).get(<span class="hljs-string">&quot;authority&quot;</span>)));<br>                &#125;<br>            &#125;<br>            authentication = <span class="hljs-keyword">new</span> <span class="hljs-constructor">JwtAuthenticatioToken(<span class="hljs-params">username</span>, <span class="hljs-params">null</span>, <span class="hljs-params">authorities</span>, <span class="hljs-params">token</span>)</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">if</span>(validate<span class="hljs-constructor">Token(<span class="hljs-params">token</span>, SecurityUtils.<span class="hljs-params">getUsername</span>()</span>)) &#123;<br>                <span class="hljs-comment">// å¦‚æœä¸Šä¸‹æ–‡ä¸­Authenticationéç©ºï¼Œä¸”è¯·æ±‚ä»¤ç‰Œåˆæ³•ï¼Œç›´æ¥è¿”å›å½“å‰ç™»å½•è®¤è¯ä¿¡æ¯</span><br>                authentication = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">SecurityUtils</span>.</span></span>get<span class="hljs-constructor">Authentication()</span>;<br>            &#125;<br>        &#125;<br>    &#125;<br>    return authentication;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ¥å£æµ‹è¯•"><a href="#æ¥å£æµ‹è¯•" class="headerlink" title="æ¥å£æµ‹è¯•"></a>æ¥å£æµ‹è¯•</h3><p>æ‰¾åˆ° SpringSecurityApplicationï¼Œ å¯åŠ¨ç¨‹åºï¼Œ è®¿é—® <a href="http://localhost:8080/swagger-ui.html%EF%BC%8C%E8%BF%9B%E5%85%A5Swagger%E3%80%82">http://localhost:8080/swagger-ui.htmlï¼Œè¿›å…¥Swaggerã€‚</a></p><p>![img](Spring Security/3-20181128173706668-177381559.png)</p><p>æˆ‘ä»¬å…ˆå†æœªç™»å½•æ²¡æœ‰ä»¤ç‰Œçš„æ—¶å€™ç›´æ¥è®¿é—®æ¥å£ï¼Œå‘ç°éƒ½è¿”å›æ— æƒé™ï¼Œç¦æ­¢è®¿é—®çš„ç»“æœã€‚</p><p>![img](Spring Security/4-20181128173840193-199335952.png)</p><p>è¿”å›æ‹’ç»è®¿é—®ç»“æœã€‚</p><p>![img](Spring Security/5-20181128174042582-676639129.png)</p><p> æ‰“å¼€ LoginControllerï¼Œè¾“å…¥æˆ‘ä»¬ç”¨æˆ·åå’Œå¯†ç ï¼ˆusername:amdin, password:123ï¼‰</p><p>![img](Spring Security/6-20181128174231451-1027667004.png)</p><p> ç™»å½•æˆåŠŸä¹‹åï¼ŒæˆåŠŸè¿”å›ä»¤ç‰Œï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p> ![img](Spring Security/7-20181128174436613-252448914.png)</p><p>æ‹·è´è¿”å›çš„ä»¤ç‰Œï¼Œç²˜è´´åˆ°ä»¤ç‰Œå‚æ•°è¾“å…¥æ¡†ï¼Œå†æ¬¡è®¿é—® /user/edit æ¥å£ã€‚</p><p>![img](Spring Security/8-20181128174642788-1883486292.png)</p><p>è¿™ä¸ªæ—¶å€™ï¼ŒæˆåŠŸçš„è¿”å›äº†ç»“æœï¼š the edit service is called success.</p><p>![img](Spring Security/9-20181128174754351-925193390.png)</p><p>åŒæ ·çš„ï¼Œæ‹·è´è¿”å›çš„ä»¤ç‰Œï¼Œç²˜è´´åˆ°ä»¤ç‰Œå‚æ•°è¾“å…¥æ¡†ï¼Œè®¿é—® /user/delete æ¥å£ã€‚</p><p>![img](Spring Security/91-20181128174924465-934756567.png)</p><p>å‘ç°è¿˜æ˜¯è¿”å›æ‹’ç»è®¿é—®çš„ç»“æœï¼Œé‚£æ˜¯å› ä¸ºè®¿é—®è¿™ä¸ªæ¥å£éœ€è¦ â€˜sys:user:deleteâ€™ æƒé™ï¼Œè€Œæˆ‘ä»¬ä¹‹å‰è¿”å›çš„æƒé™åˆ—è¡¨ä¸­å¹¶æ²¡æœ‰åŒ…å«ï¼Œæ‰€ä»¥æˆæƒè®¿é—®å¤±è´¥ã€‚</p><p>![img](Spring Security/92-20181128175018727-518353637.png)</p><p>æˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹ SysUserServiceImplï¼Œæ·»åŠ ä¸Šâ€˜sys:user:deleteâ€™ æƒé™ï¼Œé‡æ–°ç™»å½•ï¼Œå†æ¬¡è®¿é—®ä¸€éã€‚</p><p>![img](Spring Security/93-20181128175401465-494777099.png)</p><p>å‘ç°åˆ é™¤æ¥å£ä¹Ÿå¯ä»¥è®¿é—®äº†ï¼Œè®°ä½åŠ¡å¿…è¦é‡æ–°è°ƒç”¨ç™»å½•æ¥å£ï¼Œè·å–ä»¤ç‰Œåæ‹·è´åˆ°åˆ é™¤æ¥å£ï¼Œå†æ¬¡è®¿é—®åˆ é™¤æ¥å£ã€‚</p><p>![img](Spring Security/94-20181128175606389-1013803667.png)</p><p>è‡³æ­¤ç»“æŸã€‚</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title></title>
    <link href="/2021/02/15/Shiro/"/>
    <url>/2021/02/15/Shiro/</url>
    
    <content type="html"><![CDATA[<h3 id="Shiroå®‰å…¨æ¡†æ¶"><a href="#Shiroå®‰å…¨æ¡†æ¶" class="headerlink" title="Shiroå®‰å…¨æ¡†æ¶"></a>Shiroå®‰å…¨æ¡†æ¶</h3><p>Apache Shiroæ˜¯ä¸€ä¸ª<code>å¼ºå¤§ä¸”æ˜“ç”¨çš„Javaå®‰å…¨æ¡†æ¶</code>ï¼Œæœ‰<code>èº«ä»½éªŒè¯</code>ã€<code>æˆæƒ</code>ã€<code>å¯†ç å­¦</code>å’Œ<code>ä¼šè¯ç®¡ç†</code>ã€‚ä½¿ç”¨Shiroçš„æ˜“äºç†è§£çš„APIï¼Œæ‚¨å¯ä»¥å¿«é€Ÿã€è½»æ¾åœ°è·å¾—ä»»ä½•åº”ç”¨ç¨‹åºï¼Œä»æœ€å°çš„ç§»åŠ¨åº”ç”¨ç¨‹åºåˆ°æœ€å¤§çš„ç½‘ç»œå’Œä¼ä¸šåº”ç”¨ç¨‹åºã€‚</p><ul><li><p>Spring securityæ˜¯ä¸€ä¸ªé‡é‡çº§çš„å®‰å…¨æ¡†æ¶</p></li><li><p>Apache Shiroæ˜¯ä¸€ä¸ªè½»é‡çº§çš„å®‰å…¨æ¡†æ¶</p></li></ul><p><img src="/2021/02/15/Shiro/image-20191214181115794.png" alt="image-20191214181115794"></p><p>Shiro å¼€å‘å›¢é˜Ÿç§° â€œ åº”ç”¨ç¨‹åºçš„å››å¤§åŸºçŸ³ï¼šèº«ä»½éªŒè¯ï¼Œæˆæƒï¼Œä¼šè¯ç®¡ç†å’ŒåŠ å¯† â€œ ä¸ºå…¶ç›®æ ‡ã€‚</p><p><strong>Authentication(èº«ä»½è®¤è¯)ï¼š</strong></p><p>æœ‰æ—¶ä¹Ÿç®€ç§°ä¸ºâ€œç™»å½•â€ï¼Œè¿™æ˜¯ä¸€ä¸ªè¯æ˜ç”¨æˆ·æ˜¯ä»–ä»¬æ‰€è¯´çš„ä»–ä»¬æ˜¯è°çš„è¡Œä¸ºã€‚</p><p><strong>Authorizationï¼ˆæˆæƒï¼‰ï¼š</strong></p><p>è®¿é—®æ§åˆ¶çš„è¿‡ç¨‹ï¼Œä¹Ÿå°±æ˜¯ç»å¯¹â€œè°â€å»è®¿é—®â€œä»€ä¹ˆâ€æƒé™ã€‚</p><p><strong>Session Managementï¼ˆä¼šè¯ç®¡ç†ï¼‰ï¼š</strong></p><p>ç®¡ç†ç”¨æˆ·ç‰¹å®šçš„ä¼šè¯ï¼Œå³ä½¿åœ¨é Web æˆ– EJB åº”ç”¨ç¨‹åºã€‚</p><p><strong>Cryptographyï¼ˆå¯†ç å­¦ï¼‰ï¼š</strong></p><p>é€šè¿‡ä½¿ç”¨åŠ å¯†ç®—æ³•ä¿æŒæ•°æ®å®‰å…¨åŒæ—¶æ˜“äºä½¿ç”¨ã€‚</p><p>Shiroè¿˜æä¾›äº†é¢å¤–çš„åŠŸèƒ½æ¥æ”¯æŒå’ŒåŠ å¼ºåœ¨ä¸åŒç¯å¢ƒä¸‹æ‰€å…³æ³¨çš„æ–¹é¢ï¼Œå°¤å…¶æ˜¯ä»¥ä¸‹è¿™äº›ï¼š</p><p><strong>Web Supportï¼š</strong> Shiro çš„ web æ”¯æŒçš„ API èƒ½å¤Ÿè½»æ¾åœ°å¸®åŠ©ä¿æŠ¤ Web åº”ç”¨ç¨‹åºã€‚</p><p><strong>Cachingï¼š</strong>ç¼“å­˜æ˜¯ Apache Shiro ä¸­çš„ç¬¬ä¸€å±‚å…¬æ°‘ï¼Œæ¥ç¡®ä¿å®‰å…¨æ“ä½œå¿«é€Ÿè€Œåˆé«˜æ•ˆã€‚</p><p><strong>Concurrencyï¼š</strong> Apache Shiro åˆ©ç”¨å®ƒçš„å¹¶å‘ç‰¹æ€§æ¥æ”¯æŒå¤šçº¿ç¨‹åº”ç”¨ç¨‹åºã€‚</p><p><strong>Testingï¼š</strong>æµ‹è¯•æ”¯æŒçš„å­˜åœ¨æ¥å¸®åŠ©ä½ ç¼–å†™å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•ï¼Œå¹¶ç¡®ä¿ä½ çš„èƒ½å¤Ÿå¦‚é¢„æœŸçš„ä¸€æ ·å®‰å…¨ã€‚</p><p><strong>â€œRun Asâ€ï¼š</strong>ä¸€ä¸ªå…è®¸ç”¨æˆ·å‡è®¾ä¸ºå¦ä¸€ä¸ªç”¨æˆ·èº«ä»½ï¼ˆå¦‚æœå…è®¸ï¼‰çš„åŠŸèƒ½ï¼Œæœ‰æ—¶å€™åœ¨ç®¡ç†è„šæœ¬å¾ˆæœ‰ç”¨ã€‚</p><p><strong>â€œRemember Meâ€ï¼š</strong>åœ¨ä¼šè¯ä¸­è®°ä½ç”¨æˆ·çš„èº«ä»½ï¼Œæ‰€ä»¥ä»–ä»¬åªéœ€è¦åœ¨å¼ºåˆ¶æ—¶å€™ç™»å½•ã€‚</p><h4 id="1ã€Shiroçš„æ¶æ„"><a href="#1ã€Shiroçš„æ¶æ„" class="headerlink" title="1ã€Shiroçš„æ¶æ„"></a>1ã€Shiroçš„æ¶æ„</h4><h5 id="1ã€Shiroå¤–éƒ¨æ¥è¯´"><a href="#1ã€Shiroå¤–éƒ¨æ¥è¯´" class="headerlink" title="1ã€Shiroå¤–éƒ¨æ¥è¯´"></a>1ã€Shiroå¤–éƒ¨æ¥è¯´</h5><p>ä»å¤–éƒ¨æ¥çœ‹Shiroï¼Œå³ä»åº”ç”¨ç¨‹åºè§’åº¦æ¥å¦‚ä½•ä½¿ç”¨shiroæ¥å®Œæˆå·¥ä½œ(è®¤è¯ã€æˆæƒç­‰)ã€‚</p><p><img src="/2021/02/15/Shiro/image-20191214182355268.png" alt="image-20191214182355268"></p><p><strong>Subjectï¼š</strong>åº”ç”¨ä»£ç ç›´æ¥äº¤äº’çš„å¯¹è±¡æ˜¯Subjectï¼Œä¹Ÿå°±æ˜¯è¯´Shiroçš„å¯¹å¤–APIæ ¸å¿ƒå°±æ˜¯Subjectã€‚Subjectä»£è¡¨äº†å½“å‰â€œç”¨æˆ·â€ï¼Œè¿™ä¸ªç”¨æˆ·ä¸ä¸€å®šæ˜¯ä¸€ä¸ªå…·ä½“çš„äººï¼Œä¸å½“å‰åº”ç”¨äº¤äº’çš„ä»»ä½•ä¸œè¥¿éƒ½æ˜¯Subjectï¼Œå¦‚ç½‘ç»œçˆ¬è™«ã€æœºå™¨äººç­‰ï¼›</p><p>ä¸Subjectçš„æ‰€æœ‰äº¤äº’éƒ½ä¼šå§”æ‰˜ç»™SecurityManagerï¼ŒSubjectå…¶å®å°±æ˜¯ä¸€ä¸ªé—¨é¢ï¼ŒSecurityManageræ‰æ˜¯å®é™…çš„æ‰§è¡Œè€…ï¼›</p><p><strong>SecurityManagerï¼š</strong>å®‰å…¨ç®¡ç†å™¨ï¼Œå³æ‰€æœ‰ä¸å®‰å…¨æœ‰å…³çš„æ“ä½œéƒ½ä¼šSecurityManageräº¤äº’ï¼Œå¹¶ä¸”ç®¡ç†ç€æ‰€æœ‰Subjectï¼›å¯ä»¥çœ‹å‡ºä»–æ˜¯Shiroçš„æ ¸å¿ƒï¼Œå®ƒè´Ÿè´£ä¸Shiroçš„å…¶ä»–ç»„ä»¶è¿›è¡Œäº¤äº’ï¼Œå®ƒç›¸å½“äºSpringMVCä¸­DispatcherServletçš„è§’è‰²ï¼›</p><p><strong>Realmï¼š</strong>Shiroä»Realmè·å–å®‰å…¨æ•°æ®ï¼ˆå¦‚ç”¨æˆ·ï¼Œè§’è‰²ï¼Œæƒé™ï¼‰ï¼Œå°±æ˜¯è¯´SecurityManagerè¦éªŒè¯ç”¨æˆ·èº«ä»½ï¼Œé‚£ä¹ˆä»–éœ€è¦ä»Realmè·å–ç›¸åº”çš„ç”¨æˆ·è¿›è¡Œæ¯”è¾ƒä»¥ç¡®å®šç”¨æˆ·èº«ä»½æ˜¯å¦åˆæ³•ï¼›ä¹Ÿéœ€è¦Realmå¾—åˆ°ç”¨æˆ·ç›¸åº”çš„è§’è‰²/æƒé™è¿›è¡ŒéªŒè¯ç”¨æˆ·æ˜¯å¦èƒ½è¿›è¡Œï¼›å¯ä»¥æŠŠRealmçœ‹æˆDataSourceã€‚</p><h5 id="2ã€Shiroå†…éƒ¨æ¥çœ‹"><a href="#2ã€Shiroå†…éƒ¨æ¥çœ‹" class="headerlink" title="2ã€Shiroå†…éƒ¨æ¥çœ‹"></a>2ã€Shiroå†…éƒ¨æ¥çœ‹</h5><p><img src="/2021/02/15/Shiro/image-20191214183943765.png" alt="image-20191214183943765"></p><p><strong>Subjectï¼š</strong>å€’å¯å¯ä»¥ä¸åº”ç”¨äº¤äº’çš„â€ç”¨æˆ·â€ï¼›</p><p><strong>SecurityManagerï¼š</strong>ç›¸å½“äºSpringMVCä¸­çš„DispatcherServIetï¼›æ˜¯Shiroçš„å¿ƒè„ï¼Œæ‰€æœ‰å…·ä½“çš„äº¤äº’éƒ½é€šè¿‡SecurityManagerè¿›è¡Œæ§åˆ¶ï¼›å®ƒç®¡ç†ç€æ‰€æœ‰Subjectã€ä¸”è´Ÿè´£è¿›è¡Œè®¤è¯ã€æˆæƒã€ä¼šè¯åŠç¼“å­˜çš„ç®¡ç†ï¼›</p><p><strong>Authenticatorï¼š</strong>è´Ÿè´£Subjectè®¤è¯ï¼Œæ˜¯ä¸€ä¸ªæ‰©å±•ç‚¹ï¼Œå¯ä»¥è‡ªå®šä¹‰å®ç°ï¼›å¯ä»¥ä½¿ç”¨è®¤è¯ç­–ç•¥ï¼ˆAuthenticationStrategyï¼‰ï¼Œå³ä»€ä¹ˆæƒ…å†µä¸‹ç®—ç”¨æˆ·è®¤è¯é€šè¿‡äº†ï¼›</p><p><strong>Authorizerï¼š</strong>æˆæƒå™¨ã€å³è®¿é—®æ§åˆ¶å™¨ï¼Œç”¨æ¥å†³å®šä¸»ä½“æ˜¯å¦æœ‰æƒé™è¿›è¡Œç›¸åº”çš„æ“ä½œï¼›å³æ§åˆ¶ç€ç”¨æˆ·èƒ½è®¿é—®åº”ç”¨ä¸­çš„å“ªäº›åŠŸèƒ½ ï¼›</p><p><strong>Realmï¼š</strong>å¯ä»¥æœ‰1ä¸ªæˆ–å¤šä¸ªRealmï¼Œå¯ä»¥è®¤ä¸ºæ˜¯å®‰å…¨å®ä½“æ•°æ®æºï¼Œå³ç”¨äºè·å–å®‰å…¨å®ä½“çš„ï¼Œå¯ä»¥æ˜¯JDBCå®ç°ä¹Ÿå¯ä»¥æ˜¯å†…å­˜å®ç°ç­‰ç­‰ï¼›ç”±ç”¨æˆ·æä¾›ï¼Œæ‰€ä»¥ä¸€èˆ¬åœ¨åº”ç”¨ä¸­éƒ½éœ€è¦å®ç°è‡ªå·±çš„Realmï¼›</p><p><strong>SessionManagerï¼š</strong>ç®¡ç†Sessionç”Ÿå‘½å‘¨æœŸçš„ç»„ä»¶ï¼Œè€ŒShiroå¹¶ä¸ä»…ä»…å¯ä»¥ç”¨åœ¨Webç¯å¢ƒï¼Œä¹Ÿå¯ä»¥ç”¨åœ¨å¦‚æ™®é€šçš„JavaSEç¯å¢ƒï¼›</p><p><strong>CacheManagerï¼š</strong>ç¼“å­˜æ§åˆ¶å™¨ï¼Œæ¥ç®¡ç†å¦‚ç”¨æˆ·ã€è§’è‰²ã€æƒé™ç­‰çš„ç¼“å­˜çš„ï¼Œå› ä¸ºè¿™äº›æ•°æ®åŸºæœ¬ä¸Šå¾ˆå°‘æ”¹å˜ï¼Œæ”¾åˆ°ç¼“å­˜ä¸­åå¯ä»¥æé«˜è®¿é—®çš„æ€§èƒ½ï¼›</p><p><strong>Cryptographyï¼š</strong>å¯†ç æ¨¡å—Shiroæé«˜äº†ä¸€äº›å¸¸è§çš„åŠ å¯†ç»„ä»¶ç”¨äºå¦‚å¯†ç åŠ å¯†/è§£å¯†ã€‚</p><p>å°ç»“ï¼š</p><p>Shiroï¼šæ˜¯ä¸€ä¸ªapacheçš„å®‰å…¨æ¡†æ¶ï¼Œè¿˜æœ‰spring securityï¼›</p><p>Shiroï¼šèƒ½åšï¼šèº«ä»½è®¤è¯(ç™»å½•)authenticationï¼Œæˆæƒauthorizationï¼Œå¯†ç å­¦ï¼Œä¼šè¯ç®¡ç†ã€‚</p><p>Shiroè·¯çº¿ï¼šåº”ç”¨ â€“&gt; Subject(å½“å‰ç”¨æˆ·) â€“&gt; Security Manangerç®¡ç† â€“&gt; Realm â€“&gt; db</p><h4 id="2ã€Shiroå…¥é—¨"><a href="#2ã€Shiroå…¥é—¨" class="headerlink" title="2ã€Shiroå…¥é—¨"></a>2ã€Shiroå…¥é—¨</h4><h5 id="2-1ã€å¯¼å¦‚ç›¸å…³ä¾èµ–åŒ…"><a href="#2-1ã€å¯¼å¦‚ç›¸å…³ä¾èµ–åŒ…" class="headerlink" title="2.1ã€å¯¼å¦‚ç›¸å…³ä¾èµ–åŒ…"></a>2.1ã€å¯¼å¦‚ç›¸å…³ä¾èµ–åŒ…</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- shiroçš„æ”¯æŒåŒ… --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.shiro<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>shiro-all<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.4.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-comment">&lt;!-- shiro-core --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.shiro<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>shiro-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.4.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></table></figure><h5 id="2-2ã€å‡†å¤‡èµ„æº"><a href="#2-2ã€å‡†å¤‡èµ„æº" class="headerlink" title="2.2ã€å‡†å¤‡èµ„æº"></a>2.2ã€å‡†å¤‡èµ„æº</h5><p>è¿™ä¸ªèµ„æºæˆ‘ä»¬å¯ä»¥åˆ°shiroçš„æºç æ–‡ä»¶ä¸­æ‹·å¤‡ï¼š/shiro-root-1.4.0-RC2/samples/quickstart/src/main/resources</p><ul><li><strong>shiro.ini</strong></li><li><strong>log4j.properties</strong></li></ul><p>æ³¨ï¼šusersä¸‹é¢ä»£è¡¨çš„ç™»å½•çš„ç”¨æˆ·(ç”¨æˆ·å=å¯†ç )</p><p><strong>shiro.ini</strong>æ–‡ä»¶(å¯¹æ‹·å¤‡è¿‡æ¥çš„æ•°æ®è¿›è¡Œäº†è§£é‡Š)ï¼š</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-comment"># -----------------------------------------------------------------------------</span><br><span class="hljs-comment"># Users and their assigned roles</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># Each line conforms to the format defined in the</span><br><span class="hljs-comment"># org.apache.shiro.realm.text.TextConfigurationRealm#setUserDefinitions JavaDoc</span><br><span class="hljs-comment"># -----------------------------------------------------------------------------</span><br><span class="hljs-section">[users]</span><br><span class="hljs-comment"># user &#x27;root&#x27; with password &#x27;secret&#x27; and the &#x27;admin&#x27; role</span><br><span class="hljs-attr">root</span> = secret, admin<br><span class="hljs-comment"># user &#x27;guest&#x27; with the password &#x27;guest&#x27; and the &#x27;guest&#x27; role</span><br><span class="hljs-attr">guest</span> = guest, guest<br><span class="hljs-comment"># user &#x27;presidentskroob&#x27; with password &#x27;12345&#x27; (&quot;That&#x27;s the same combination on</span><br><span class="hljs-comment"># my luggage!!!&quot; ;)), and role &#x27;president&#x27;</span><br><span class="hljs-attr">presidentskroob</span> = <span class="hljs-number">12345</span>, president<br><span class="hljs-comment"># user &#x27;darkhelmet&#x27; with password &#x27;ludicrousspeed&#x27; and roles &#x27;darklord&#x27; and &#x27;schwartz&#x27;</span><br><span class="hljs-attr">darkhelmet</span> = ludicrousspeed, darklord, schwartz<br><span class="hljs-comment"># user &#x27;lonestarr&#x27; with password &#x27;vespa&#x27; and roles &#x27;goodguy&#x27; and &#x27;schwartz&#x27;</span><br><span class="hljs-attr">lonestarr</span> = vespa, goodguy, schwartz<br><br><span class="hljs-comment"># -----------------------------------------------------------------------------</span><br><span class="hljs-comment"># Roles with assigned permissions</span><br><span class="hljs-comment"># </span><br><span class="hljs-comment"># Each line conforms to the format defined in the</span><br><span class="hljs-comment"># org.apache.shiro.realm.text.TextConfigurationRealm#setRoleDefinitions JavaDoc</span><br><span class="hljs-comment"># -----------------------------------------------------------------------------</span><br><span class="hljs-section">[roles]</span><br><span class="hljs-comment"># &#x27;admin&#x27; role has all permissions, indicated by the wildcard &#x27;*&#x27;</span><br><span class="hljs-attr">admin</span> = *<br><span class="hljs-comment"># The &#x27;schwartz&#x27; role can do anything (*) with any lightsaber:</span><br><span class="hljs-attr">schwartz</span> = lightsaber:*<br><span class="hljs-comment"># The &#x27;goodguy&#x27; role is allowed to &#x27;drive&#x27; (action) the winnebago (type) with</span><br><span class="hljs-comment"># license plate &#x27;eagle5&#x27; (instance specific id)</span><br><span class="hljs-attr">goodguy</span> = winnebago:drive:eagle5<br></code></pre></td></tr></table></figure><h5 id="2-3ã€æµ‹è¯•"><a href="#2-3ã€æµ‹è¯•" class="headerlink" title="2.3ã€æµ‹è¯•"></a>2.3ã€æµ‹è¯•</h5><p>Sessionæ•°æ®ã€ç™»å½•ã€æˆæƒ</p><p>è¿™ä¸ªæ–‡ä»¶ä½ç½® : /shiro-root-1.4.0-RC2/samples/quickstart/src/main/java</p><p>æˆ‘ä»¬ä¸‹é¢å¯¹è¿™ä¸ªæ–‡ä»¶è¿›è¡Œäº†ä¸­æ–‡çš„è§£é‡Š</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * ç®€å•çš„å…¥é—¨ç¤ºä¾‹ï¼Œæ•™æˆ‘ä»¬æ€ä¹ˆä½¿ç”¨shiroä¸­çš„ä¸€ä¸ªAPI</span><br><span class="hljs-comment"> */</span><br>public <span class="hljs-keyword">class</span> Quickstart &#123;<br><br>    <span class="hljs-keyword">private</span> static final transient Logger log = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">LoggerFactory</span>.</span></span>get<span class="hljs-constructor">Logger(Quickstart.<span class="hljs-params">class</span>)</span>;<br><br>    public static void main(String<span class="hljs-literal">[]</span> args) &#123;<br>        <span class="hljs-comment">//è¯»å–åˆ°shiro.iniæ–‡ä»¶ï¼Œå¹¶ä¸”æ ¹æ®æ–‡ä»¶åˆ›å»ºSecurityManagerå¯¹è±¡</span><br>        <span class="hljs-comment">//  SecurityManagerï¼šæƒé™çš„æ ¸å¿ƒç®¡ç†å¯¹è±¡</span><br>        Factory&lt;SecurityManager&gt; factory = <span class="hljs-keyword">new</span> <span class="hljs-constructor">IniSecurityManagerFactory(<span class="hljs-string">&quot;classpath:shiro.ini&quot;</span>)</span>;<br>        SecurityManager securityManager = factory.get<span class="hljs-constructor">Instance()</span>;<br><br>        <span class="hljs-comment">// ä¸ºäº†ç¨‹åºæ­£å¸¸è¿è¡Œï¼Œéœ€è¦è®¾è®¡ä¸€ä¸ªè¿™ä¸ªsecurityManager(ç›¸å½“äºæŠŠè¿™ä¸ªç®¡ç†æ”¾åˆ°ç¯å¢ƒä¸­å»äº†)</span><br>        <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">SecurityUtils</span>.</span></span>set<span class="hljs-constructor">SecurityManager(<span class="hljs-params">securityManager</span>)</span>;<br><br>        <span class="hljs-comment">//æ‹¿åˆ°å½“å‰ç”¨æˆ·ã€Subject:æ“ä½œå½“å‰ç³»ç»Ÿçš„ä¸€ä¸ªç”¨æˆ·ã€‘</span><br>        Subject currentUser = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">SecurityUtils</span>.</span></span>get<span class="hljs-constructor">Subject()</span>;<br><br>        <span class="hljs-comment">//æ‹¿åˆ°ä¸€ä¸ªä¼šè¯(å®ƒåœ¨å’±ä»¬çš„æ‰€æœ‰ç±»å‹ç³»ç»Ÿéƒ½å¯ä»¥ä½¿ç”¨ã€ä¸è¦æ±‚å¿…éœ€æ˜¯webé¡¹ç›®ã€‘)</span><br>        Session session = currentUser.get<span class="hljs-constructor">Session()</span>;<br>        <span class="hljs-comment">//ä¼šè¯æ“ä½œã€å¯ä»¥åœ¨ä¼šè¯ä¸­è®¾ç½®å€¼ä¸è·å–å€¼ã€‘</span><br>        session.set<span class="hljs-constructor">Attribute(<span class="hljs-string">&quot;someKey&quot;</span>, <span class="hljs-string">&quot;aValue&quot;</span>)</span>;<br>        String value = (String) session.get<span class="hljs-constructor">Attribute(<span class="hljs-string">&quot;someKey&quot;</span>)</span>;<br>        <span class="hljs-keyword">if</span> (value.equals(<span class="hljs-string">&quot;aValue&quot;</span>)) &#123;<br>           <span class="hljs-comment">// log.info(&quot;Retrieved the correct value! [&quot; + value + &quot;]&quot;);</span><br>            <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(<span class="hljs-string">&quot;å¯ä»¥è·å–åˆ°è¿™ä¸ªå€¼&quot;</span>+value);<br>        &#125;<br><br>        <span class="hljs-comment">//åˆ¤æ–­è¿™ä¸ªç”¨æˆ·æ˜¯å¦ç»è¿‡éªŒè¯(æ²¡æœ‰ç™»å½•æˆ‘ä»¬å¯ä»¥è®¤ä¸ºæ˜¯ä¸€ä¸ªæ¸¸å®¢)</span><br>        <span class="hljs-comment">//æ²¡æœ‰ç™»å½•ï¼Œæˆ‘ä»¬å°±å¯ä»¥å®Œæˆç™»å½•</span><br>        <span class="hljs-keyword">if</span> (!currentUser.is<span class="hljs-constructor">Authenticated()</span>) &#123;<br>            <span class="hljs-comment">//æ‹¿åˆ°ç”¨æˆ·åä¸å¯†ç ä»¤ç‰Œã€æ‹¿åˆ°ç”¨æˆ·åä¸å¯†ç ã€‘</span><br>            UsernamePasswordToken token = <span class="hljs-keyword">new</span> <span class="hljs-constructor">UsernamePasswordToken(<span class="hljs-string">&quot;lonestarr&quot;</span>, <span class="hljs-string">&quot;vespa&quot;</span>)</span>;<br>            <span class="hljs-comment">//è®¾ç½®è®°ä½æˆ‘çš„åŠŸèƒ½</span><br>            token.set<span class="hljs-constructor">RememberMe(<span class="hljs-params">true</span>)</span>;<br>            <span class="hljs-keyword">try</span> &#123;<br>                <span class="hljs-comment">//å®Œæˆç™»å½•åŠŸèƒ½</span><br>                currentUser.login(token);<br>            &#125; catch (UnknownAccountException uae) &#123;<br>                <span class="hljs-comment">//log.info(&quot;There is no user with username of &quot; + token.getPrincipal());</span><br>                <span class="hljs-comment">//token.getPrincipal()[ËˆprÉªnsÉ™pl] -&gt; æ‹¿åˆ°ä¸»ä½“ï¼ˆç™»å½•ç”¨æˆ·çš„ä¸»è¦æ ‡è¯†ã€ç”¨æˆ·åã€‘ï¼‰</span><br>                <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(<span class="hljs-string">&quot;è¿™æ²¡æœ‰è¿™ä¸ªè´¦å·ï¼ˆç”¨æˆ·åï¼‰&quot;</span>+token.get<span class="hljs-constructor">Principal()</span>);<br>            &#125; catch (IncorrectCredentialsException ice) &#123;<br>                <span class="hljs-comment">//incorrect [ËŒÉªnkÉ™Ëˆrekt]:ä¸æ­£ç¡®çš„ï¼Œé”™è¯¯çš„</span><br>                <span class="hljs-comment">//Credentials[krÉ™ËˆdenÊƒlz]:è¯ä¹¦; å‡­è¯ï¼Œè¯ä»¶</span><br>                <span class="hljs-comment">//log.info(&quot;Password for account &quot; + token.getPrincipal() + &quot; was incorrect!&quot;);</span><br>                <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(<span class="hljs-string">&quot;è¿™ä¸ªå¯†ç æ˜¯é”™è¯¯çš„&quot;</span>+token.get<span class="hljs-constructor">Principal()</span>);<br>            &#125; catch (LockedAccountException lae) &#123;<br>                <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(<span class="hljs-string">&quot;è¿™ä¸ªè´¦å·å·²ç»è¢«é”å®š&quot;</span>);<br>            &#125;<br>            <span class="hljs-comment">//å…¶å®ƒçš„ç™»å½•å¤±è´¥å¼‚å¸¸ã€å®ƒæ˜¯æ‰€æœ‰ç™»å½•å¼‚å¸¸çš„çˆ¶ç±»ã€‘</span><br>            catch (AuthenticationException ae) &#123;<br>                <span class="hljs-comment">//unexpected condition?  error?</span><br>            &#125;<br>        &#125;<br><br>        <span class="hljs-comment">//ç”¨æˆ·ç™»å½•æˆåŠŸ</span><br>        log.info(<span class="hljs-string">&quot;User [&quot;</span> + currentUser.get<span class="hljs-constructor">Principal()</span> + <span class="hljs-string">&quot;] logged in successfully.&quot;</span>);<br><br>        <span class="hljs-comment">//åˆ¤æ–­è¿™ä¸ªç”¨æˆ·æ˜¯å¦æ˜¯æŸä¸€ä¸ªè§’è‰²</span><br>        <span class="hljs-keyword">if</span> (currentUser.has<span class="hljs-constructor">Role(<span class="hljs-string">&quot;schwartz&quot;</span>)</span>) &#123;<br>            log.info(<span class="hljs-string">&quot;May the Schwartz be with you!&quot;</span>);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            log.info(<span class="hljs-string">&quot;Hello, mere mortal.&quot;</span>);<br>        &#125;<br><br>        <span class="hljs-comment">//æµ‹è¯•ç”¨æˆ·æ˜¯å¦æœ‰æŸä¸€ä¸ªæƒé™</span><br>        <span class="hljs-keyword">if</span> (currentUser.is<span class="hljs-constructor">Permitted(<span class="hljs-string">&quot;lightsaber:wield&quot;</span>)</span>) &#123;<br>            log.info(<span class="hljs-string">&quot;You may use a lightsaber ring.  Use it wisely.&quot;</span>);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            log.info(<span class="hljs-string">&quot;Sorry, lightsaber rings are for schwartz masters only.&quot;</span>);<br>        &#125;<br><br>        <span class="hljs-comment">//a (very powerful) Instance Level permission:</span><br>        <span class="hljs-keyword">if</span> (currentUser.is<span class="hljs-constructor">Permitted(<span class="hljs-string">&quot;winnebago:drive:eagle5&quot;</span>)</span>) &#123;<br>            log.info(<span class="hljs-string">&quot;You are permitted to &#x27;drive&#x27; the winnebago with license plate (id) &#x27;eagle5&#x27;.  &quot;</span> +<br>                    <span class="hljs-string">&quot;Here are the keys - have fun!&quot;</span>);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            log.info(<span class="hljs-string">&quot;Sorry, you aren&#x27;t allowed to drive the &#x27;eagle5&#x27; winnebago!&quot;</span>);<br>        &#125;<br><br>        <span class="hljs-comment">//ç™»å‡º(æ³¨é”€å½“å‰ç™»å½•ç”¨æˆ·)</span><br>        currentUser.logout<span class="hljs-literal">()</span>;<br><br>        <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>exit(<span class="hljs-number">0</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="2-4ã€æ€»ç»“"><a href="#2-4ã€æ€»ç»“" class="headerlink" title="2.4ã€æ€»ç»“"></a>2.4ã€æ€»ç»“</h5><p>é€šè¿‡SecurityMangerè·å–Suject :</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">SecurityUtils</span>.</span></span>set<span class="hljs-constructor">SecurityManager(<span class="hljs-params">securityManager</span>)</span>;<br>Subject currentUser = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">SecurityUtils</span>.</span></span>get<span class="hljs-constructor">Subject()</span>;<br></code></pre></td></tr></table></figure><p>é€šè¿‡Subjectæ¥åšäº‹æƒ…ï¼š</p><p>è·å–Session-å­˜å€¼å’Œè·å–å€¼ Subject.getSessionã€session.setAttributeã€session.getAttribute</p><p>è®¤è¯ï¼ˆç™»å½•ï¼‰:</p><ul><li><p>åˆ¤æ–­æ˜¯å¦ç™»å½•Suject.isAuthenticated()</p></li><li><p>å¦‚æœæ²¡æœ‰ç™»å½•ï¼Œé€šè¿‡ç”¨æˆ·åå’Œå¯†ç åˆ›å»ºUsernamePasswordToken</p></li><li><p>è°ƒç”¨subject.login(UsernamePasswordToken)æ¥è¿›è¡Œç™»å½•åˆ¤æ–­</p></li><li><p>ç™»é™†æˆåŠŸ: è¿”å›principalç»™å½“å‰ç”¨æˆ·</p></li><li><p>ç™»é™†å¤±è´¥: æŠ›å‡ºå¼‚å¸¸</p></li></ul><p>æˆæƒï¼š</p><ul><li><p>åˆ¤æ–­æ˜¯å¦å…·æœ‰æŸä¸ªè§’è‰²subject .hasRole</p></li><li><p>åˆ¤æ–­æ˜¯å¦æœ‰æƒé™subject .isPrermited(resource:æ“ä½œ)</p></li></ul><h4 id="3ã€è‡ªå®šä¹‰Realm"><a href="#3ã€è‡ªå®šä¹‰Realm" class="headerlink" title="3ã€è‡ªå®šä¹‰Realm"></a>3ã€è‡ªå®šä¹‰Realm</h4><p>åˆšæ‰å’±ä»¬ä½¿ç”¨çš„æ˜¯å‡†å¤‡çš„å¥½çš„ä¸€ä¸ªRealmï¼Œåœ¨Shiroä¸­ï¼Œé™¤äº†å’±ä»¬ åˆšæ‰ä½¿ç”¨çš„IniRealmï¼ˆé€šè¿‡Shiro.iniæ‹¿æ•°æ®ï¼‰ï¼Œè¿˜æœ‰æ™®é€šSimpleAccountRealmï¼ŒJDBCRealmç­‰ç­‰ã€‚</p><p>ä½†æ˜¯è¿™äº›Realméƒ½ä¸èƒ½æ»¡è¶³å’±ä»¬çš„éœ€æ±‚ (åæœŸå’±ä»¬Realmçš„æ•°æ®è‚¯å®šæ˜¯é€šè¿‡JPAå»æ‹¿çš„ï¼Œä¸‹ä¸€ä¸ªé¡¹ç›®è¦ä½¿ç”¨MyBatiså»æ‹¿)ï¼Œè€Œè¿™ç§æƒ…å†µä¸‹ï¼Œå°±éœ€è¦æˆ‘ä»¬è‡ªå·±å®šä¹‰ä¸€ä¸ªRealmæ¥å®ç°ç›¸åº”çš„åŠŸèƒ½ï¼</p><h5 id="3-1ã€å‡†å¤‡å·¥ä½œ"><a href="#3-1ã€å‡†å¤‡å·¥ä½œ" class="headerlink" title="3.1ã€å‡†å¤‡å·¥ä½œ"></a>3.1ã€å‡†å¤‡å·¥ä½œ</h5><p>è‡ªå®šä¹‰Realmä¸€èˆ¬ç›´æ¥ç»§æ‰¿AuthorizingRealmæ¥å£å³å¯(é‡Œé¢åŒ…å«<code>èº«ä»½è®¤è¯</code>ä¸<code>æˆæƒ</code>ä¸¤ä¸ªæ–¹æ³•)</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * è‡ªå®šä¹‰ä¸€ä¸ªRealm</span><br><span class="hljs-comment"> */</span><br>public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyRealm</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AuthorizingRealm</span> </span>&#123;<br><br>    <span class="hljs-comment">//è·å–åˆ°è¿™ä¸ªRealmçš„åç§°(éšä¾¿å–)</span><br>    <span class="hljs-meta">@Override</span><br>    public <span class="hljs-type">String</span> getName() &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;MyRealm&quot;</span>;<br>    &#125;<br><br>    <span class="hljs-comment">//è¿›è¡Œæˆæƒåˆ¤æ–­ï¼ˆæƒé™ï¼‰</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-type">AuthorizationInfo</span> doGetAuthorizationInfo(<span class="hljs-type">PrincipalCollection</span> principalCollection) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    &#125;<br><br>    <span class="hljs-comment">//è¿›è¡Œèº«ä»½è®¤è¯(ç™»å½•)</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-type">AuthenticationInfo</span> doGetAuthenticationInfo(<span class="hljs-type">AuthenticationToken</span> authenticationToken) <span class="hljs-keyword">throws</span> <span class="hljs-type">AuthenticationException</span> &#123;<br>           <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="3-2ã€èº«ä»½è®¤è¯ï¼ˆç™»å½•ï¼‰"><a href="#3-2ã€èº«ä»½è®¤è¯ï¼ˆç™»å½•ï¼‰" class="headerlink" title="3.2ã€èº«ä»½è®¤è¯ï¼ˆç™»å½•ï¼‰"></a>3.2ã€èº«ä»½è®¤è¯ï¼ˆç™»å½•ï¼‰</h5><p>èº«ä»½è®¤è¯çš„ä»£ç </p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * è‡ªå®šä¹‰ä¸€ä¸ªRealm</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyRealm</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AuthorizingRealm</span> </span>&#123;<br><br>    <span class="hljs-comment">//è·å–åˆ°è¿™ä¸ªRealmçš„åç§°(éšä¾¿å–)</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">String</span> <span class="hljs-function"><span class="hljs-title">getName</span>(<span class="hljs-params"></span>)</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;MyRealm&quot;</span>;<br>    &#125;<br><br>    <span class="hljs-comment">//è¿›è¡Œæˆæƒçš„è®¤è¯</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> AuthorizationInfo <span class="hljs-function"><span class="hljs-title">doGetAuthorizationInfo</span>(<span class="hljs-params">PrincipalCollection principalCollection</span>)</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    &#125;<br><br>    <span class="hljs-comment">//è¿›è¡Œç™»å½•çš„è®¤è¯</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> AuthenticationInfo doGetAuthenticationInfo(AuthenticationToken authenticationToken) throws AuthenticationException &#123;<br>        <span class="hljs-comment">//æ˜æ˜¾çš„çŸ¥é“ï¼šè¿™ä¸ªauthenticationTokenå°±æ˜¯UsernamePasswordtoken</span><br>        UsernamePasswordToken token = (UsernamePasswordToken)authenticationToken;<br>        <span class="hljs-built_in">String</span> username = token.getUsername(); <span class="hljs-comment">//æ‹¿åˆ°ç”¨æˆ·å(æ³¨:è¿™ä¸ªç”¨æˆ·åæ˜¯ä¼ è¿‡æ¥çš„)</span><br>        <span class="hljs-comment">//è¿™é‡Œæ ¹æ®ç”¨æˆ·åå»è·å–å¯†ç (å¦‚æœæ²¡æœ‰è·å–åˆ°ï¼Œç›¸å½“äºè¿™ä¸ªç”¨æˆ·ä¸å­˜åœ¨ï¼Œå°±è¿”å›nullå€¼)</span><br>        <span class="hljs-built_in">String</span> password = getByName(username);<br>        <span class="hljs-keyword">if</span>(password==<span class="hljs-literal">null</span>)&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>        <span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªç®€å•çš„èº«ä»½ä¿¡æ¯(æŠŠç”¨æˆ·åä¸å¯†ç æ”¾è¿›å»-æ³¨ï¼šå®ƒä¼šè‡ªåŠ¨çš„æ¯”è¾ƒè·å–çš„å¯†ç ä¸ä½ ä¼ è¿‡æ¥çš„å¯†ç )</span><br>        SimpleAuthenticationInfo authenticationInfo = <span class="hljs-keyword">new</span> SimpleAuthenticationInfo(username,password,getName());<br>        <span class="hljs-keyword">return</span> authenticationInfo;<br>    &#125;<br><br><span class="hljs-comment">//æ¨¡æ‹Ÿä»æ•°æ®åº“ä¸­è·å–ä¿¡æ¯</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-built_in">String</span> <span class="hljs-function"><span class="hljs-title">getByName</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> username</span>)</span> &#123;<br>        <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;admin&quot;</span>.equals(username))&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;123456&quot;</span>;<br>        &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;guest&quot;</span>.equals(username))&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;abcd&quot;</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>èº«ä»½è®¤è¯æµ‹è¯•</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">@Test<br>public void test<span class="hljs-constructor">MyRealm()</span> throws Exception&#123;<br><br>    <span class="hljs-comment">//åˆ›å»ºè‡ªå·±å®šä¹‰çš„Realm</span><br>    MyRealm myRealm = <span class="hljs-keyword">new</span> <span class="hljs-constructor">MyRealm()</span>;<br>   <span class="hljs-comment">//æŠŠRealmæ”¾åˆ°securityManagerä¸­å»</span><br>    DefaultSecurityManager securityManager = <span class="hljs-keyword">new</span> <span class="hljs-constructor">DefaultSecurityManager()</span>;<br>    securityManager.set<span class="hljs-constructor">Realm(<span class="hljs-params">myRealm</span>)</span>;<br>    <span class="hljs-comment">//æŠŠæƒé™ç®¡ç†å™¨æ”¾åˆ°ç›¸åº”çš„ç¯å¢ƒä¸­(æˆ‘ä»¬å¯ä»¥åœ¨é¡¹ç›®ä»»ä½•ä½ç½®æ‹¿åˆ°)</span><br>    <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">SecurityUtils</span>.</span></span>set<span class="hljs-constructor">SecurityManager(<span class="hljs-params">securityManager</span>)</span>;<br><br>    <span class="hljs-comment">//æ‹¿åˆ°å½“å‰ç”¨æˆ·(Subjectå°±æ˜¯å½“å‰ç”¨æˆ·,æ¸¸å®¢)</span><br>    Subject currentUser = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">SecurityUtils</span>.</span></span>get<span class="hljs-constructor">Subject()</span>;<br>    <span class="hljs-comment">//å‡†å¤‡ç™»å½•çš„ä»¤ç‰Œ(å‡†å¤‡ç”¨æˆ·åä¸å¯†ç )</span><br>    UsernamePasswordToken token = <span class="hljs-keyword">new</span> <span class="hljs-constructor">UsernamePasswordToken(<span class="hljs-string">&quot;admin&quot;</span>,<span class="hljs-string">&quot;123456&quot;</span>)</span>;<br><br>    <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-comment">//æ ¹æ®ä»¤ç‰Œè¿›è¡ŒåŠŸèƒ½ç™»å½•(å½“å‰ç”¨æˆ·è¿›è¡Œç™»å½•)</span><br>        currentUser.login(token);<br>    &#125; catch (UnknownAccountException e) &#123;<br>        <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(<span class="hljs-string">&quot;è¿™ä¸ªè´¦å·ä¸å­˜åœ¨!&quot;</span> + token.get<span class="hljs-constructor">Principal()</span>);<br>        e.print<span class="hljs-constructor">StackTrace()</span>;<br>    &#125; catch (IncorrectCredentialsException ice) &#123;<br>        <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(<span class="hljs-string">&quot;è¿™ä¸ªå¯†ç ä¸å­˜åœ¨!&quot;</span> + token.get<span class="hljs-constructor">Principal()</span>);<br>        ice.print<span class="hljs-constructor">StackTrace()</span>;<br>    &#125;catch (AuthenticationException e)&#123;<br>        <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(<span class="hljs-string">&quot;i don&#x27;t k&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="3-3ã€æˆæƒï¼ˆæƒé™ï¼‰è®¤è¯"><a href="#3-3ã€æˆæƒï¼ˆæƒé™ï¼‰è®¤è¯" class="headerlink" title="3.3ã€æˆæƒï¼ˆæƒé™ï¼‰è®¤è¯"></a>3.3ã€æˆæƒï¼ˆæƒé™ï¼‰è®¤è¯</h5><p>æˆæƒè®¤è¯çš„ä»£ç </p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyRealm</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AuthorizingRealm</span> </span>&#123;<br><br>    <span class="hljs-comment">//è·å–åˆ°è¿™ä¸ªRealmçš„åç§°(éšä¾¿å–)</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">String</span> <span class="hljs-function"><span class="hljs-title">getName</span>(<span class="hljs-params"></span>)</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;MyRealm&quot;</span>;<br>    &#125;<br><br>    <span class="hljs-comment">//è¿›è¡Œæˆæƒçš„è®¤è¯</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> AuthorizationInfo <span class="hljs-function"><span class="hljs-title">doGetAuthorizationInfo</span>(<span class="hljs-params">PrincipalCollection principalCollection</span>)</span> &#123;<br>    <br>        <span class="hljs-comment">//æ‹¿åˆ°è®¤è¯çš„ä¸»è¦ä¿¡æ¯(ç”¨æˆ·å)</span><br>        <span class="hljs-built_in">String</span> username = (<span class="hljs-built_in">String</span>) principalCollection.getPrimaryPrincipal();<br>        <br>        <span class="hljs-comment">//æ¨¡æ‹Ÿ æ ¹æ®ç”¨æˆ·å  æ‹¿åˆ°  è§’è‰²ä¿¡æ¯ä¸æƒé™ä¿¡æ¯</span><br>        <span class="hljs-built_in">Set</span>&lt;<span class="hljs-built_in">String</span>&gt; roles = getRolesByUsername(username);<br>        <span class="hljs-built_in">Set</span>&lt;<span class="hljs-built_in">String</span>&gt; permissions = getPermissionsByUsername(username);<br>        <br>        <span class="hljs-comment">//æ‹¿åˆ°éªŒè¯ä¿¡æ¯å¯¹è±¡</span><br>        SimpleAuthorizationInfo authorizationInfo = <span class="hljs-keyword">new</span> SimpleAuthorizationInfo();<br>        <br>        <span class="hljs-comment">//è®¾ç½®ç”¨æˆ·çš„è§’è‰²</span><br>        authorizationInfo.setRoles(roles);<br>        <br>        <span class="hljs-comment">//è®¾ç½®ç”¨æˆ·çš„æƒé™</span><br>        authorizationInfo.setStringPermissions(permissions);<br>        <span class="hljs-keyword">return</span> authorizationInfo;<br>    &#125;<br><br>    <span class="hljs-comment">//æ¨¡æ‹Ÿ æ ¹æ®ç”¨æˆ·å  æ‹¿åˆ°  è§’è‰²çš„åŠŸèƒ½</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-built_in">Set</span>&lt;<span class="hljs-built_in">String</span>&gt; <span class="hljs-function"><span class="hljs-title">getRolesByUsername</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> username</span>)</span> &#123;<br>        <span class="hljs-built_in">Set</span>&lt;<span class="hljs-built_in">String</span>&gt; roles = <span class="hljs-keyword">new</span> HashSet&lt;&gt;();<br>        roles.add(<span class="hljs-string">&quot;admin&quot;</span>);<br>        roles.add(<span class="hljs-string">&quot;it&quot;</span>);<br>        <span class="hljs-keyword">return</span> roles;<br>    &#125;<br>    <span class="hljs-comment">//æ¨¡æ‹Ÿ æ ¹æ®ç”¨æˆ·å  æ‹¿åˆ°  æƒé™çš„åŠŸèƒ½</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-built_in">Set</span>&lt;<span class="hljs-built_in">String</span>&gt; <span class="hljs-function"><span class="hljs-title">getPermissionsByUsername</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> username</span>)</span> &#123;<br>        <span class="hljs-built_in">Set</span>&lt;<span class="hljs-built_in">String</span>&gt; permissions = <span class="hljs-keyword">new</span> HashSet&lt;&gt;();<br>        permissions.add(<span class="hljs-string">&quot;employee.*&quot;</span>);<br>        permissions.add(<span class="hljs-string">&quot;department.save&quot;</span>);<br>        <span class="hljs-keyword">return</span> permissions;<br>    &#125;<br> ...<br>&#125;<br></code></pre></td></tr></table></figure><p>åŠŸèƒ½æµ‹è¯•</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(<span class="hljs-string">&quot;æ˜¯å¦æ˜¯è¿™ä¸ªè§’è‰²ï¼š&quot;</span>+currentUser.has<span class="hljs-constructor">Role(<span class="hljs-string">&quot;admin&quot;</span>)</span>);<br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(<span class="hljs-string">&quot;æ˜¯å¦æ˜¯æ‹¥æœ‰æƒé™ï¼š&quot;</span>+currentUser.is<span class="hljs-constructor">Permitted(<span class="hljs-string">&quot;employee.save&quot;</span>)</span>);<br></code></pre></td></tr></table></figure><h4 id="4ã€å¯†ç åŠ å¯†"><a href="#4ã€å¯†ç åŠ å¯†" class="headerlink" title="4ã€å¯†ç åŠ å¯†"></a>4ã€å¯†ç åŠ å¯†</h4><h5 id="4-1ã€Shiroä¸­çš„å¯†ç åŠ å¯†"><a href="#4-1ã€Shiroä¸­çš„å¯†ç åŠ å¯†" class="headerlink" title="4.1ã€Shiroä¸­çš„å¯†ç åŠ å¯†"></a>4.1ã€Shiroä¸­çš„å¯†ç åŠ å¯†</h5><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> *  algorithmName:åŠ å¯†ç®—æ³•(md5,sha)</span><br><span class="hljs-comment"> *  source:åŸå§‹å¯†ç </span><br><span class="hljs-comment"> *  salt,åŠ ç›</span><br><span class="hljs-comment"> *  hashIterations:éå†æ¬¡æ•°</span><br><span class="hljs-comment"> */</span><br>SimpleHash simpleHash = <span class="hljs-keyword">new</span> <span class="hljs-constructor">SimpleHash(<span class="hljs-string">&quot;MD5&quot;</span>,<span class="hljs-string">&quot;admin&quot;</span>,<span class="hljs-string">&quot;kongwei_liao&quot;</span>,10)</span>;<br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(simpleHash);<br></code></pre></td></tr></table></figure><h5 id="4-2ã€æµ‹è¯•æ—¶è®©è‡ªå®šä¹‰RealmåŠ ä¸Šç®—æ³•"><a href="#4-2ã€æµ‹è¯•æ—¶è®©è‡ªå®šä¹‰RealmåŠ ä¸Šç®—æ³•" class="headerlink" title="4.2ã€æµ‹è¯•æ—¶è®©è‡ªå®šä¹‰RealmåŠ ä¸Šç®—æ³•"></a>4.2ã€æµ‹è¯•æ—¶è®©è‡ªå®šä¹‰RealmåŠ ä¸Šç®—æ³•</h5><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">@Test<br>public void test<span class="hljs-constructor">MyRealm()</span> throws Exception&#123;<br><br>    <span class="hljs-comment">//åˆ›å»ºè‡ªå·±å®šä¹‰çš„Realm</span><br>    MyRealm myRealm = <span class="hljs-keyword">new</span> <span class="hljs-constructor">MyRealm()</span>;<br>    <br>    <span class="hljs-comment">//æŠŠRealmæ”¾åˆ°securityManagerä¸­å»</span><br>    DefaultSecurityManager securityManager = <span class="hljs-keyword">new</span> <span class="hljs-constructor">DefaultSecurityManager()</span>;<br>    securityManager.set<span class="hljs-constructor">Realm(<span class="hljs-params">myRealm</span>)</span>;<br>    <br>    <span class="hljs-comment">//æŠŠæƒé™ç®¡ç†å™¨æ”¾åˆ°ç›¸åº”çš„ç¯å¢ƒä¸­(æˆ‘ä»¬å¯ä»¥åœ¨é¡¹ç›®ä»»ä½•ä½ç½®æ‹¿åˆ°)</span><br>    <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">SecurityUtils</span>.</span></span>set<span class="hljs-constructor">SecurityManager(<span class="hljs-params">securityManager</span>)</span>;<br><br><span class="hljs-comment">//è®¾ç½®å’±ä»¬Realmçš„å¯†ç åŒ¹é…å™¨(æˆ‘ä»¬çš„å¯†ç è¦æ€ä¹ˆå¤„ç†)</span><br>    HashedCredentialsMatcher matcher = <span class="hljs-keyword">new</span> <span class="hljs-constructor">HashedCredentialsMatcher()</span>;<br>    matcher.set<span class="hljs-constructor">HashAlgorithmName(<span class="hljs-string">&quot;md5&quot;</span>)</span>; <span class="hljs-comment">//åŒ¹é…å™¨ä½¿ç”¨MD5çš„ç®—æ³•</span><br>    matcher.set<span class="hljs-constructor">HashIterations(10)</span>;<span class="hljs-comment">//åŠ å¯†ç®—æ³•è¦è¿­ä»£å¤šå°‘æ¬¡</span><br>    myRealm.set<span class="hljs-constructor">CredentialsMatcher(<span class="hljs-params">matcher</span>)</span>;<br><br><span class="hljs-comment">//æ‹¿åˆ°å½“å‰ç”¨æˆ·(Subjectå°±æ˜¯å½“å‰ç”¨æˆ·,æ¸¸å®¢)</span><br>    Subject currentUser = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">SecurityUtils</span>.</span></span>get<span class="hljs-constructor">Subject()</span>;<br>    <span class="hljs-comment">//å‡†å¤‡ç™»å½•çš„ä»¤ç‰Œ(å‡†å¤‡ç”¨æˆ·åä¸å¯†ç ) -&gt; è¿™é‡Œçš„å¯†ç è¿›è¡Œäº†åŠ å¯†</span><br>    UsernamePasswordToken token = <span class="hljs-keyword">new</span> <span class="hljs-constructor">UsernamePasswordToken(<span class="hljs-string">&quot;admin&quot;</span>,<span class="hljs-string">&quot;123456&quot;</span>)</span>;<br><br>    <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-comment">//æ ¹æ®ä»¤ç‰Œè¿›è¡ŒåŠŸèƒ½ç™»å½•(å½“å‰ç”¨æˆ·è¿›è¡Œç™»å½•)</span><br>        currentUser.login(token);<br>    <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(<span class="hljs-string">&quot;ç™»å½•æˆåŠŸå•¦ã€‚ã€‚ã€‚ã€‚&quot;</span>);<br>     &#125; catch (UnknownAccountException e) &#123;<br>        <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(<span class="hljs-string">&quot;è¿™ä¸ªè´¦å·ä¸å­˜åœ¨!&quot;</span> + token.get<span class="hljs-constructor">Principal()</span>);<br>        e.print<span class="hljs-constructor">StackTrace()</span>;<br>     &#125; catch (IncorrectCredentialsException ice) &#123;<br>         <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(<span class="hljs-string">&quot;è¿™ä¸ªå¯†ç ä¸å­˜åœ¨!&quot;</span> + token.get<span class="hljs-constructor">Principal()</span>);<br>         ice.print<span class="hljs-constructor">StackTrace()</span>;<br>     &#125;catch (AuthenticationException e)&#123;<br>         <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(<span class="hljs-string">&quot;i don&#x27;t k&quot;</span>);<br>     &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="4-3ã€è‡ªå®šä¹‰RealmåŠ ä¸Šç›å€¼"><a href="#4-3ã€è‡ªå®šä¹‰RealmåŠ ä¸Šç›å€¼" class="headerlink" title="4.3ã€è‡ªå®šä¹‰RealmåŠ ä¸Šç›å€¼"></a>4.3ã€è‡ªå®šä¹‰RealmåŠ ä¸Šç›å€¼</h5><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-comment">//è¿›è¡Œç™»å½•çš„è®¤è¯</span><br>@Override<br>protected AuthenticationInfo <span class="hljs-keyword">do</span><span class="hljs-constructor">GetAuthenticationInfo(AuthenticationToken <span class="hljs-params">authenticationToken</span>)</span> throws AuthenticationException &#123;<br><br>    <span class="hljs-comment">//æ˜æ˜¾çš„çŸ¥é“ï¼šè¿™ä¸ªauthenticationTokenå°±æ˜¯UsernamePasswordtoken</span><br>    UsernamePasswordToken token = (UsernamePasswordToken)authenticationToken;<br>    String username = token.get<span class="hljs-constructor">Username()</span>; <span class="hljs-comment">//æ‹¿åˆ°ç”¨æˆ·å(æ³¨:è¿™ä¸ªç”¨æˆ·åæ˜¯ä¼ è¿‡æ¥çš„)</span><br><br>    <span class="hljs-comment">//è¿™é‡Œæ ¹æ®ç”¨æˆ·åå»è·å–å¯†ç (å¦‚æœæ²¡æœ‰è·å–åˆ°ï¼Œç›¸å½“äºè¿™ä¸ªç”¨æˆ·ä¸å­˜åœ¨ï¼Œå°±è¿”å›é™ªæˆ‘)</span><br>    String password = get<span class="hljs-constructor">ByName(<span class="hljs-params">username</span>)</span>;<br>    <span class="hljs-keyword">if</span>(password==null)&#123;<br>        return null;<br>    &#125;<br>    <br>    <span class="hljs-comment">//åœ¨è¿™é‡ŒåŠ ç›å€¼éœ€ä¸€ä¸ªByteSourceå¯¹è±¡ï¼Œè€ŒShiroæä¾›äº†ä¸€ä¸ªByteSourceå¯¹è±¡ç»™å’±ä»¬</span><br>    ByteSource salt = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">ByteSource</span>.</span><span class="hljs-module"><span class="hljs-identifier">Util</span>.</span></span><span class="hljs-built_in">bytes</span>(<span class="hljs-string">&quot;kongwei_liao&quot;</span>);<br>    <br>    <span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªç®€å•çš„èº«ä»½ä¿¡æ¯(æŠŠç”¨æˆ·åä¸å¯†ç æ”¾è¿›å»-æ³¨ï¼šå®ƒä¼šè‡ªåŠ¨çš„æ¯”è¾ƒè·å–çš„å¯†ç ä¸ä½ ä¼ è¿‡æ¥çš„å¯†ç )</span><br>    SimpleAuthenticationInfo authenticationInfo = <span class="hljs-keyword">new</span> <span class="hljs-constructor">SimpleAuthenticationInfo(<span class="hljs-params">username</span>,<span class="hljs-params">password</span>,<span class="hljs-params">salt</span>,<span class="hljs-params">getName</span>()</span>);<br>    return authenticationInfo;<br>&#125;<br><br><span class="hljs-keyword">private</span> String get<span class="hljs-constructor">ByName(String <span class="hljs-params">username</span>)</span> &#123;<br>    <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;admin&quot;</span>.equals(username))&#123;<br>        <span class="hljs-comment">// 4a95737b032e98a50c056c41f2fa9ec6: 123456 è¿­ä»£10æ¬¡ä¸åŠ ç›çš„ç»“æœ</span><br>        <span class="hljs-comment">// 922ad745e6fc8a539f70003fa7473336: 123456 è¿­ä»£10æ¬¡åŠ ç›(kongwei_liao)çš„ç»“æœ</span><br>        return <span class="hljs-string">&quot;922ad745e6fc8a539f70003fa7473336&quot;</span>; <span class="hljs-comment">//ä¿®æ”¹ä¸ºåŠ å¯†åŠ ç›åçš„æ•°æ®</span><br>    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;guest&quot;</span>.equals(username))&#123;<br>        return <span class="hljs-string">&quot;abcd&quot;</span>;<br>    &#125;<br>    return null;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="5ã€Shiroé›†æˆSpring"><a href="#5ã€Shiroé›†æˆSpring" class="headerlink" title="5ã€Shiroé›†æˆSpring"></a>5ã€Shiroé›†æˆSpring</h4><p>æˆ‘ä»¬çš„é¡¹ç›®åŸºæœ¬éƒ½æ˜¯é€šè¿‡Springæ¥ç®¡ç†beançš„ï¼Œå¦‚æœè¦æƒ³ä½¿ç”¨Shiroï¼Œé‚£å°±è¦æŠŠshiroé›†æˆåˆ°Springã€‚é›†æˆSpringçš„æ ¸å¿ƒå°±æ˜¯æŠŠæ¡†æ¶çš„æ ¸å¿ƒç±»(SecurityManagerï¼ŒSubjectï¼ŒRealm)äº¤ç»™Springç®¡ç†ï¼</p><h5 id="5-1ã€å‡†å¤‡Spring-webé¡¹ç›®"><a href="#5-1ã€å‡†å¤‡Spring-webé¡¹ç›®" class="headerlink" title="5.1ã€å‡†å¤‡Spring-webé¡¹ç›®"></a>5.1ã€å‡†å¤‡Spring-webé¡¹ç›®</h5><h5 id="5-2ã€é›†æˆ"><a href="#5-2ã€é›†æˆ" class="headerlink" title="5.2ã€é›†æˆ"></a>5.2ã€é›†æˆ</h5><p>å¯¼å…¥ShiroåŒ…</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- shiroçš„æ”¯æŒåŒ… --&gt;</span><br> <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.shiro<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>shiro-all<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.4.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>  <span class="hljs-comment">&lt;!-- shiroä¸Springçš„é›†æˆåŒ… --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.shiro<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>shiro-spring<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.4.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>æ‹·è´ShiroFilteré…ç½®åˆ°web.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- Springä¸shiroé›†æˆ:éœ€è¦å®šä¹‰ä¸€ä¸ªshiroè¿‡æ»¤å™¨(è¿™æ˜¯ä¸€ä¸ªä»£ç†è¿‡æ»¤å™¨ï¼Œå®ƒä¼šåˆ°springçš„é…ç½®ä¸­æ‰¾ä¸€ä¸ªåç§°ç›¸åŒçš„çœŸå®è¿‡æ»¤å™¨) --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">filter</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>shiroFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">filter-class</span>&gt;</span>org.springframework.web.filter.DelegatingFilterProxy<span class="hljs-tag">&lt;/<span class="hljs-name">filter-class</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">init-param</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>targetFilterLifecycle<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">init-param</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">filter-mapping</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>shiroFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/*<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter-mapping</span>&gt;</span><br></code></pre></td></tr></table></figure><p>é›†æˆåˆ°Springï¼Œæ‹·è´shiro Springé…ç½®åˆ°é…ç½®æ–‡ä»¶applicationContext-shiro.xmlï¼Œåœ¨applicationContext.xmlä¸­å¯¼å…¥</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;</span></span><br><span class="hljs-tag"><span class="hljs-string">       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&quot;</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- 1.é…ç½®shiroçš„æ ¸å¿ƒå¯¹è±¡ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;securityManager&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.apache.shiro.web.mgt.DefaultWebSecurityManager&quot;</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- é…ç½®ä¸€ä¸ªrealmï¼Œåˆ°æ•°æ®åº“ä¸­è·å–æƒé™æ•°æ® --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;realm&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;MyRealm&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--  2.æˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ªrealmï¼Œè¿™ä¸ªå¿…éœ€å®ç°org.apache.shiro.realm.Realmæ¥å£ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;MyRealm&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;cn.kongwei_liao.realm.MyRealm&quot;</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--æ³¨å…¥å¯†ç åŒ¹é…å™¨--&gt;</span><br>        <span class="hljs-comment">&lt;!--&lt;property name=&quot;credentialsMatcher&quot;&gt;--&gt;</span><br>        <span class="hljs-comment">&lt;!--&lt;bean class=&quot;org.apache.shiro.authc.credential.HashedCredentialsMatcher&quot;&gt;--&gt;</span><br>        <span class="hljs-comment">&lt;!--&amp;lt;!&amp;ndash;åŠ å¯†çš„æ–¹å¼&amp;ndash;&amp;gt;--&gt;</span><br>        <span class="hljs-comment">&lt;!--&lt;property name=&quot;hashAlgorithmName&quot; value=&quot;MD5&quot;&gt;&lt;/property&gt;--&gt;</span><br>        <span class="hljs-comment">&lt;!--&amp;lt;!&amp;ndash;åŠ å¯†æ¬¡æ•°&amp;ndash;&amp;gt;--&gt;</span><br>        <span class="hljs-comment">&lt;!--&lt;property name=&quot;hashIterations&quot; value=&quot;10&quot;&gt;&lt;/property&gt;--&gt;</span><br>        <span class="hljs-comment">&lt;!--&lt;/bean&gt;--&gt;</span><br>        <span class="hljs-comment">&lt;!--&lt;/property&gt;--&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- 3.lifecycleBeanPostProcessorï¼šå¯ä»¥è‡ªåŠ¨è°ƒç”¨åœ¨Spring Iocçª—å£ä¸­ Shiro beançš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³• --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;lifecycleBeanPostProcessor&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.apache.shiro.spring.LifecycleBeanPostProcessor&quot;</span>/&gt;</span><br>    <span class="hljs-comment">&lt;!-- 4.å¯åŠ¨iocå®¹å™¨ä¸­ä½¿ç”¨ shiroçš„æ³¨è§£ï¼Œä½†æ˜¯å¿…éœ€é…ç½®åœ¨Spring Iocå®¹å™¨ä¸­Shiro beançš„ç”Ÿæˆå‘¨æœŸæ–¹æ³• --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.springframework.aop.framework.autoproxy.DefaultAdvisorAutoProxyCreator&quot;</span></span><br><span class="hljs-tag">          <span class="hljs-attr">depends-on</span>=<span class="hljs-string">&quot;lifecycleBeanPostProcessor&quot;</span>/&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.apache.shiro.spring.security.interceptor.AuthorizationAttributeSourceAdvisor&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;securityManager&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;securityManager&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- 5.shiroçš„æ ¸å¿ƒè¿‡æ»¤å™¨(æ³¨ï¼šè¿™ä¸ªåç§°å¿…éœ€å’Œweb.xmlçš„ä»£è¡¨è¿‡æ»¤å™¨ã€DelegatingFilterProxyã€‘åç§°ä¸€æ ·) --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;shiroFilter&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.apache.shiro.spring.web.ShiroFilterFactoryBean&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;securityManager&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;securityManager&quot;</span>/&gt;</span><br>        <span class="hljs-comment">&lt;!-- ç™»å½•çš„url,å¦‚æœæ²¡æœ‰ç™»å½•ï¼Œä½ è®¿é—®çš„è·¯å¾„ä¼šè·³åˆ°è¿™ä¸ªé¡µé¢ --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;loginUrl&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;/login.jsp&quot;</span>/&gt;</span><br>        <span class="hljs-comment">&lt;!-- ç™»å½•æˆåŠŸçš„url,å¦‚æœç™»å½•æˆåŠŸï¼Œä¼šè·³è½¬åˆ°è¿™ä¸ªé¡µé¢ --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;successUrl&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;/success.jsp&quot;</span>/&gt;</span><br>        <span class="hljs-comment">&lt;!-- æ²¡æœ‰æƒé™æ—¶è·³è½¬åˆ°è¿™ä¸ªä½ç½® --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;unauthorizedUrl&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;/noPermission.jsp&quot;</span>/&gt;</span><br>        <span class="hljs-comment">&lt;!--å®šä¹‰è¿‡æ»¤å™¨é“¾--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;filterChainDefinitions&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span><br>                <span class="hljs-comment">&lt;!--anon:åŒ¿åè¿‡æ»¤å™¨,è¡¨ç¤ºç›´æ¥æ”¾è¡Œ--&gt;</span><br>                login.jsp = anon<br>                /login = anon<br>                <span class="hljs-comment">&lt;!--æ³¨é”€--&gt;</span><br>                /logout = logout<br>                <span class="hljs-comment">&lt;!--/**ï¼šæ‰€æœ‰è¯·æ±‚åŒ…æ‹¬å­è¯·æ±‚ï¼Œauthcï¼šå¿…é¡»è®¤è¯é€šè¿‡æ‰æ”¾è¡Œ--&gt;</span><br>                /** = authc<br>            <span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">            é…ç½®å“ªäº›èµ„æºè¢«ä¿æŠ¤ï¼Œå“ªäº›èµ„æºéœ€è¦æƒé™</span><br><span class="hljs-comment">            anonï¼šä¸éœ€è¦ç™»å½•ä¹Ÿå¯ä»¥è®¿é—®ç›¸åº”çš„æƒé™</span><br><span class="hljs-comment">            authcï¼šéœ€è¦æƒé™æ‰èƒ½è®¿é—®</span><br><span class="hljs-comment">              /** ï¼šæ‰€æœ‰æ–‡ä»¶åŠå…¶å­æ–‡ä»¶</span><br><span class="hljs-comment">        --&gt;</span><br>        <span class="hljs-comment">&lt;!--&lt;property name=&quot;filterChainDefinitionMap&quot; ref=&quot;filterChainDefinitionMap&quot;&gt;&lt;/property&gt;--&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--&lt;bean id=&quot;chainDefinitionMapFactory&quot; class=&quot;cn.itsource.crm.realm.FilterChainDefinitionMapFactory&quot;/&gt;--&gt;</span><br>    <span class="hljs-comment">&lt;!--&lt;bean id=&quot;filterChainDefinitionMap&quot; factory-bean=&quot;chainDefinitionMapFactory&quot; factory-method=&quot;createFilterChainDefinitionMap&quot;/&gt;--&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- å¼•å…¥Shiroçš„é…ç½® --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">import</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;applicationContext-shiro.xml&quot;</span>/&gt;</span><br></code></pre></td></tr></table></figure><p>æµ‹è¯•ï¼šé™¤äº†ç™»å½•ç•Œé¢èƒ½å¤Ÿè¢«æ­£å¸¸è®¿é—®ï¼Œå…¶ä»–çš„éƒ½è¦è·³è½¬åˆ°ç™»å½•ç•Œé¢ï¼</p><h5 id="5-3ã€å°ç»“"><a href="#5-3ã€å°ç»“" class="headerlink" title="5.3ã€å°ç»“"></a>5.3ã€å°ç»“</h5><p>æ³¨æ„ï¼šéœ€è¦ä¸€ä¸ªSpringçš„ç¯å¢ƒï¼Œä¸èƒ½å…¨éƒ¨éƒ½åœ¨SpringMVCé‚£å„¿åˆå§‹åŒ–</p><h4 id="6ã€Authenticationï¼ˆèº«ä»½è®¤è¯ï¼‰"><a href="#6ã€Authenticationï¼ˆèº«ä»½è®¤è¯ï¼‰" class="headerlink" title="6ã€Authenticationï¼ˆèº«ä»½è®¤è¯ï¼‰"></a>6ã€Authenticationï¼ˆèº«ä»½è®¤è¯ï¼‰</h4><p>åœ¨é›†æˆSpringçš„ä¾‹å­ä¸­ï¼Œåªæœ‰ç™»å½•é¡µé¢æ˜¯ä¸éœ€è¦ç™»å½•å¯ä»¥ç›´æ¥è®¿é—®ã€‚å…¶ä»–çš„é¡µé¢éœ€è¦è®¤è¯ï¼ˆå³ç™»å½•ï¼‰åæ‰èƒ½è®¿é—®ï¼Œé‚£æ€ä¹ˆæ¥å®ç°ç™»å½•è®¤è¯ï¼Œåˆå«åšèº«ä»½è®¤è¯å‘¢ï¼Ÿ</p><p><strong>èº«ä»½éªŒè¯ï¼š</strong>ä¸€èˆ¬éœ€è¦æä¾›å¦‚èº«ä»½IDç­‰ä¸€äº›æ ‡è¯†ä¿¡æ¯æ¥è¡¨æ˜ç™»å½•è€…çš„èº«ä»½ï¼Œå¦‚æä¾›emailç”¨æˆ·å/å¯†ç æ¥è¯æ˜ã€‚</p><p>åœ¨Shiroä¸­ç”¨æˆ·éœ€è¦æä¾›principalsï¼ˆèº«ä»½ï¼‰å’ŒcredentiaIsï¼ˆè¯æ˜ï¼‰ç»™Shiroï¼Œä»è€Œåº”ç”¨èƒ½éªŒè¯ç”¨æˆ·èº«ä»½ï¼š</p><ul><li><strong>principalsï¼š</strong>èº«ä»½ï¼Œå³ä¸»ä½“çš„æ ‡è¯†å±æ€§ï¼Œå¯ä»¥æ˜¯ç”°å¯å±æ€§ï¼Œå¦‚ç”¨æˆ·åã€é‚®ç®±ç­‰ï¼Œå”¯ä¸€å³å¯ã€‚ä¸€ä¸ªä¸»ä½“å¯ä»¥æœ‰å¤šä¸ªprincipalsï¼Œä½†åªæœ‰ä¸€ä¸ªPrimaryprincipalsï¼Œä¸€èˆ¬æ˜¯ç”¨æˆ·å/é‚®ç®±/æ‰‹æœºå·ã€‚</li><li><strong>credentialsï¼š</strong>è¯æ˜/å‡­è¯ï¼Œå³åªæœ‰ä¸»ä½“çŸ¥é“çš„å®‰å…¨å€¼ï¼Œå¦‚å¯†ç /æ•°å­—è¯ä¹¦ç­‰ã€‚</li><li>æœ€å¸¸è§çš„principalså’Œcredentialsç»„åˆå°±æ˜¯ç”¨æˆ·å/å¯†ç äº†</li></ul><p>åšè®¤è¯éœ€è¦ç”¨æˆ·åå’Œå¯†ç ï¼Œè®¤è¯æµç¨‹ï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><img src="/2021/02/15/Shiro/image-20191214195132572.png" alt="image-20191214195132572"></p><h5 id="6-1ã€è¯¦ç»†æ­¥éª¤åˆ†æ"><a href="#6-1ã€è¯¦ç»†æ­¥éª¤åˆ†æ" class="headerlink" title="6.1ã€è¯¦ç»†æ­¥éª¤åˆ†æ"></a>6.1ã€è¯¦ç»†æ­¥éª¤åˆ†æ</h5><p>è¦æƒ³å®ç°ç™»å½•ï¼Œåˆ†å‰å°å’Œåå°ä¸¤éƒ¨åˆ†ï¼š</p><ul><li><p>å‰å°ï¼šå®ç°ä¸€ä¸ªlogin.jspçš„é¡µé¢ï¼Œç”¨æ¥æœé›†ç™»å½•ä¿¡æ¯ï¼ˆç”¨æˆ·åå’Œå¯†ç ï¼‰ï¼å½“ç‚¹å‡»ç™»å½•æ—¶æŠŠç™»å½•ä¿¡æ¯æäº¤åˆ°åå°å®Œæˆè®¤è¯ã€‚</p></li><li><p>åå°ï¼šå†™ä¸€ä¸ªControlleræ¥æ”¶å‰å°ä¼ å…¥çš„ç™»å½•ä¿¡æ¯ï¼Œå®Œæˆç™»å½•è®¤è¯ã€‚</p></li></ul><p>å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li><p>åˆ›å»ºLoginConrollerï¼Œå†™ä¸€ä¸ªæ–¹æ³•æ¥æ”¶å‰å°ç™»å½•è¯·æ±‚å¹¶æ¥å—ç™»å½•ä¿¡æ¯(ç”¨æˆ·åå’Œå¯†ç )</p></li><li><p>è·å–å½“å‰çš„ Subjectï¼Œè°ƒç”¨ SecurityUtils.getSubject();</p></li><li><p>æµ‹è¯•å½“å‰çš„ç”¨æˆ·æ˜¯å¦å·²ç»è¢«è®¤è¯ã€‚å³æ˜¯å¦å·²ç»ç™»å½•. è°ƒç”¨ Subject çš„ isAuthenticated() </p></li><li><p>è‹¥æ²¡æœ‰è¢«è®¤è¯ï¼Œåˆ™æŠŠç”¨æˆ·åå’Œå¯†ç å°è£…ä¸º UsernamePasswordToken å¯¹è±¡</p></li><li><p>æ‰§è¡Œç™»å½•: è°ƒç”¨ Subject çš„ login(AuthenticationToken) æ–¹æ³•. </p></li><li><p>è‡ªå®šä¹‰ Realm çš„æ–¹æ³•ï¼Œä»æ•°æ®åº“ä¸­è·å–å¯¹åº”çš„è®°å½•, è¿”å›ç»™ Shiro.</p><ul><li>å…¥é—¨ä¸­ä½¿ç”¨çš„æ˜¯Shiroè‡ªå¸¦çš„IniRealmï¼ŒIniRealmä»inié…ç½®æ–‡ä»¶ä¸­è¯»å–ç”¨æˆ·çš„ä¿¡æ¯ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹éœ€è¦ä»ç³»ç»Ÿçš„æ•°æ®åº“ä¸­è¯»å–ç”¨æˆ·ä¿¡æ¯ï¼Œæ‰€ä»¥éœ€è¦è‡ªå®šä¹‰realmã€‚</li><li>å®é™…ä¸Šéœ€è¦ç»§æ‰¿ org.apache.shiro.realm.AuthenticatingRealm ç±»</li><li>å®ç° doGetAuthenticationInfo(AuthenticationToken) æ–¹æ³•. </li></ul></li><li><p>ç”± shiro å®Œæˆå¯¹å¯†ç çš„æ¯”å¯¹.</p></li></ol><h5 id="6-2ã€ç®€å•è®¤è¯å®ç°"><a href="#6-2ã€ç®€å•è®¤è¯å®ç°" class="headerlink" title="6.2ã€ç®€å•è®¤è¯å®ç°"></a>6.2ã€ç®€å•è®¤è¯å®ç°</h5><p>login.jsp</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs stata">&lt;<span class="hljs-keyword">form</span> action=<span class="hljs-string">&quot;/login&quot;</span> method=<span class="hljs-string">&quot;post&quot;</span>&gt;<br>    ç”¨æˆ·å&lt;<span class="hljs-keyword">input</span> <span class="hljs-keyword">type</span>=<span class="hljs-string">&quot;text&quot;</span> name=<span class="hljs-string">&quot;username&quot;</span> /&gt; &lt;<span class="hljs-keyword">br</span> /&gt;<br>    å¯†ç :&lt;<span class="hljs-keyword">input</span> <span class="hljs-keyword">type</span>=<span class="hljs-string">&quot;password&quot;</span> name=<span class="hljs-string">&quot;password&quot;</span> /&gt; &lt;<span class="hljs-keyword">br</span> /&gt;<br>    &lt;<span class="hljs-keyword">input</span> <span class="hljs-keyword">type</span>=<span class="hljs-string">&quot;submit&quot;</span> value=<span class="hljs-string">&quot;ç™»å½•&quot;</span> /&gt;<br>&lt;/<span class="hljs-keyword">form</span>&gt;<br></code></pre></td></tr></table></figure><p>LoginController</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">@Controller<br>public <span class="hljs-keyword">class</span> LoginController &#123;<br>    @<span class="hljs-constructor">RequestMapping(<span class="hljs-string">&quot;/login&quot;</span>)</span><br>    public String login(String username,String password)&#123;<br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * è·å–å½“å‰çš„ Subject. è°ƒç”¨ SecurityUtils.getSubject();</span><br><span class="hljs-comment">         * æµ‹è¯•å½“å‰çš„ç”¨æˆ·æ˜¯å¦å·²ç»è¢«è®¤è¯. å³æ˜¯å¦å·²ç»ç™»å½•. è°ƒç”¨ Subject çš„ isAuthenticated()</span><br><span class="hljs-comment">         * è‹¥æ²¡æœ‰è¢«è®¤è¯, åˆ™æŠŠç”¨æˆ·åå’Œå¯†ç å°è£…ä¸º UsernamePasswordToken å¯¹è±¡</span><br><span class="hljs-comment">         * æ‰§è¡Œç™»å½•: è°ƒç”¨ Subject çš„ login(AuthenticationToken) æ–¹æ³•.</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-comment">//1.æ‹¿åˆ°è®¿é—®çš„ä¸»ä½“(å½“å‰ç™»å½•ç”¨æˆ·)</span><br>        Subject subject = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">SecurityUtils</span>.</span></span>get<span class="hljs-constructor">Subject()</span>;<br>        <span class="hljs-comment">//2.åˆ¤æ–­è¿™ä¸ªç”¨æˆ·æ˜¯å¦å·²ç»ç™»å½•(é€šè¿‡éªŒè¯)</span><br>        <span class="hljs-keyword">if</span>(!subject.is<span class="hljs-constructor">Authenticated()</span>)&#123;<br>            <span class="hljs-comment">//3.å¦‚æœæ²¡æœ‰éªŒè¯ï¼Œå°±è¦å®Œæˆç™»å½•</span><br>            UsernamePasswordToken token = <span class="hljs-keyword">new</span> <span class="hljs-constructor">UsernamePasswordToken(<span class="hljs-params">username</span>,<span class="hljs-params">password</span>)</span>;<br>            <span class="hljs-keyword">try</span>&#123;<br>                <span class="hljs-comment">//4.æ ¹æ®tokeå®Œæˆç™»å½•åŠŸèƒ½</span><br>                subject.login(token);<br>            &#125;catch (UnknownAccountException e)&#123;<br>                <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(<span class="hljs-string">&quot;ç”¨æˆ·åä¸å­˜åœ¨ï¼ï¼&quot;</span>);<br>                e.print<span class="hljs-constructor">StackTrace()</span>;<br>            &#125;catch (IncorrectCredentialsException e)&#123;<br>                <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(<span class="hljs-string">&quot;å¯†ç ä¸å­˜åœ¨ï¼&quot;</span>);<br>                e.print<span class="hljs-constructor">StackTrace()</span>;<br>            &#125;catch (AuthenticationException e)&#123;<br>                <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(<span class="hljs-string">&quot;ç™»å½•å‡ºé”™ï¼&quot;</span>);<br>                e.print<span class="hljs-constructor">StackTrace()</span>;<br>            &#125;<br>        &#125;<br>        return <span class="hljs-string">&quot;redirect:/s/main.jsp&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>JpaRealm</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs scala">public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">JpaRealm</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AuthenticatingRealm</span> </span>&#123;<br><br>    <span class="hljs-comment">//AuthenticationInfo:è®¤è¯; èº«ä»½éªŒè¯; è¯æ˜</span><br>    <span class="hljs-comment">//ç™»å½•çš„æ—¶å€™å°±ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•æ¥åšéªŒè¯</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-type">AuthenticationInfo</span> doGetAuthenticationInfo(<span class="hljs-type">AuthenticationToken</span> token) <span class="hljs-keyword">throws</span> <span class="hljs-type">AuthenticationException</span> &#123;<br>        <span class="hljs-comment">//System.out.println(token.getClass().getName());</span><br>        <span class="hljs-comment">//å¯ä»¥è½¬æˆç›¸åº”çš„token</span><br>        <span class="hljs-comment">//UsernamePasswordToken upToken =(UsernamePasswordToken)token;</span><br>        <span class="hljs-comment">//æ‹¿åˆ°ä¼ è¿‡æ¥çš„ç”¨æˆ·å</span><br>        <span class="hljs-comment">//String username = upToken.getUsername();</span><br>        <span class="hljs-comment">//è‡ªå®šä¹‰Realmä¸­ï¼Œéœ€è¦æ ¹æ®ç”¨æˆ·ååˆ°æ•°æ®åº“ä¸­æ‹¿åˆ°å¯†ç ï¼Œç„¶åè¿”å›ç»™shiro</span><br>        <span class="hljs-comment">//String password = &quot;123456&quot;;</span><br>        <span class="hljs-comment">//èº«ä»½è®¤è¯(ç”¨æˆ·å)</span><br>        <span class="hljs-type">Object</span> principal = token.getPrincipal();<br>        <span class="hljs-type">Object</span> credentials = <span class="hljs-string">&quot;123456&quot;</span>; <span class="hljs-comment">//å¯†ç å‡è®¾æ˜¯æ ¹æ®ç”¨æˆ·ååˆ°æ•°æ®åº“ä¸­æŸ¥è¯¢å‡ºæ¥çš„</span><br>        <span class="hljs-comment">// Object principal, Object credentials, String realmName</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-type">SimpleAuthenticationInfo</span>(principal,credentials,getName());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="6-3ã€åŠ å¯†è®¤è¯"><a href="#6-3ã€åŠ å¯†è®¤è¯" class="headerlink" title="6.3ã€åŠ å¯†è®¤è¯"></a>6.3ã€åŠ å¯†è®¤è¯</h5><p>åˆ†æï¼š</p><p> 1ã€å¯†ç ä¸èƒ½æ˜æ–‡ä¿å­˜åˆ°æ•°æ®åº“ åŠ å¯†ä¿å­˜ï¼Œæ¯”å¯¹ä¹Ÿè¦åŠ å¯†æ¯”å¯¹ï¼Œå…·ä½“çš„æ¯”å¯¹CredentialsMatcherï¼Œé»˜è®¤ä½¿ç”¨å°±æ˜¯SimpleCredentialsMatcherï¼Œä¸åšåŠ å¯†çš„æ¯”å¯¹ã€‚è¦æƒ³åšmd5åŠ å¯†è¦ä½¿ç”¨HashedCredentialsMatcherï¼Œå¹¶ä¸”è®¾ç½®åŠ å¯†ä¸ºmd5 </p><p>æ•°æ®åº“åŠ å¯†ä¿å­˜ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain"><br></code></pre></td></tr></table></figure><p><img src="/2021/02/15/Shiro/image-20191214195619630.png" alt="image-20191214195619630"></p><p>åŠ å¯†å¯¹æ¯”ä»£ç å®ç°ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">//å®Œæˆç™»å½•çš„è®¤è¯</span><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">protected</span> AuthenticationInfo doGetAuthenticationInfo(AuthenticationToken authenticationToken) throws AuthenticationException &#123;<br>    UsernamePasswordToken token = (UsernamePasswordToken)authenticationToken;<br>    <span class="hljs-built_in">String</span> username = token.getUsername();<br>    <span class="hljs-built_in">String</span> dbPassword  = findByUsername(token.getUsername());<br>    <span class="hljs-keyword">if</span>(dbPassword==<span class="hljs-literal">null</span>)&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    &#125;<br>    SimpleAuthenticationInfo authorizationInfo = <span class="hljs-keyword">new</span> SimpleAuthenticationInfo(username,dbPassword,getName());<br>    <span class="hljs-keyword">return</span> authorizationInfo;<br>&#125;<br><br><span class="hljs-keyword">private</span> <span class="hljs-built_in">String</span> <span class="hljs-function"><span class="hljs-title">findByUsername</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> username</span>)</span> &#123;<br>    <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;admin&quot;</span>.equals(username))&#123;<br>        <span class="hljs-comment">//è¿™é‡Œæ˜¯æ²¡æœ‰åŠ ç›çš„ç»“æœ</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;4a95737b032e98a50c056c41f2fa9ec6&quot;</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>è®¾ç½®Realmçš„åŒ¹é…å€¼ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- 2.æˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ªrealm è¿™ä¸ªå¿…éœ€å®ç°org.apache.shiro.realm.Realmæ¥å£ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;jpaRealm&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;cn.kongwei_liao.shiro.realm.JpaRealm&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;credentialsMatcher&quot;</span>&gt;</span><br>        &lt;!â€”è®¾ç½®åŠ å¯†åŒ¹é…æ–¹æ¡ˆ--&gt;<br>        <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.apache.shiro.authc.credential.HashedCredentialsMatcher&quot;</span>&gt;</span><br>            <span class="hljs-comment">&lt;!-- ç¼–ç çš„æ–¹å¼ä½¿ç”¨:md5 --&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;hashAlgorithmName&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;MD5&quot;</span>/&gt;</span><br>            <span class="hljs-comment">&lt;!-- ç¼–ç çš„æ¬¡æ•°:10 --&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;hashIterations&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;10&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="/2021/02/15/Shiro/image-20191214195742239.png" alt="image-20191214195742239"></p><h5 id="6-4ã€ç›å€¼åŠ å¯†è®¤è¯"><a href="#6-4ã€ç›å€¼åŠ å¯†è®¤è¯" class="headerlink" title="6.4ã€ç›å€¼åŠ å¯†è®¤è¯"></a>6.4ã€ç›å€¼åŠ å¯†è®¤è¯</h5><p>ä½¿ç”¨ç›å€¼åŠ å¯†ï¼Œç›å€¼åŠ å¯†ï¼Œæ›´å®‰å…¨ï¼</p><p>æ•°æ®åº“è¦åŠ å¯†ä¿å­˜</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">@Test<br><span class="hljs-built_in">public</span> <span class="hljs-type">void</span> testHash() throws <span class="hljs-keyword">Exception</span>&#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * algorithmName:åŠ å¯†ç®—æ³•(md5,sha)</span><br><span class="hljs-comment">     *  source:åŸå§‹å¯†ç </span><br><span class="hljs-comment">     *  salt,åŠ ç›</span><br><span class="hljs-comment">     *  hashIterations:éå†æ¬¡æ•°</span><br><span class="hljs-comment">     */</span><br>    SimpleHash simpleHash = <span class="hljs-built_in">new</span> SimpleHash(&quot;MD5&quot;,&quot;123456&quot;,&quot;kongwei_liao&quot;,<span class="hljs-number">10</span>);<br>    <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(simpleHash);<br>&#125;<br></code></pre></td></tr></table></figure><p>è®¤è¯æ—¶è¦æ”¯æŒç›å€¼</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-comment">//AuthenticationInfo:è®¤è¯; èº«ä»½éªŒè¯; è¯æ˜</span><br><span class="hljs-comment">//ç™»å½•çš„æ—¶å€™å°±ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•æ¥åšéªŒè¯</span><br><span class="hljs-comment">//è¿›è¡Œç™»å½•çš„è®¤è¯</span><br>@Override<br>protected AuthenticationInfo <span class="hljs-keyword">do</span><span class="hljs-constructor">GetAuthenticationInfo(AuthenticationToken <span class="hljs-params">authenticationToken</span>)</span> throws AuthenticationException &#123;<br>    <span class="hljs-comment">//æ˜æ˜¾çš„çŸ¥é“ï¼šè¿™ä¸ªauthenticationTokenå°±æ˜¯UsernamePasswordtoken</span><br>    UsernamePasswordToken token = (UsernamePasswordToken)authenticationToken;<br>    String username = token.get<span class="hljs-constructor">Username()</span>; <span class="hljs-comment">//æ‹¿åˆ°ç”¨æˆ·å(æ³¨:è¿™ä¸ªç”¨æˆ·åæ˜¯ä¼ è¿‡æ¥çš„)</span><br>    <span class="hljs-comment">//è¿™é‡Œæ ¹æ®ç”¨æˆ·åå»è·å–å¯†ç (å¦‚æœæ²¡æœ‰è·å–åˆ°ï¼Œç›¸å½“äºè¿™ä¸ªç”¨æˆ·ä¸å­˜åœ¨ï¼Œå°±è¿”å›é™ªæˆ‘)</span><br>    String password = get<span class="hljs-constructor">ByName(<span class="hljs-params">username</span>)</span>;<br>    <span class="hljs-keyword">if</span>(password==null)&#123;<br>        return null;<br>    &#125;<br>    <span class="hljs-comment">//åœ¨è¿™é‡ŒåŠ ç›å€¼éœ€ä¸€ä¸ªByteSourceå¯¹è±¡ï¼Œè€ŒShiroæä¾›äº†ä¸€ä¸ªByteSourceå¯¹è±¡ç»™å’±ä»¬</span><br>    ByteSource salt = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">ByteSource</span>.</span><span class="hljs-module"><span class="hljs-identifier">Util</span>.</span></span><span class="hljs-built_in">bytes</span>(<span class="hljs-string">&quot;kongwei_liao&quot;</span>);<br>    <span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªç®€å•çš„èº«ä»½ä¿¡æ¯(æŠŠç”¨æˆ·åä¸å¯†ç æ”¾è¿›å»-æ³¨ï¼šå®ƒä¼šè‡ªåŠ¨çš„æ¯”è¾ƒè·å–çš„å¯†ç ä¸ä½ ä¼ è¿‡æ¥çš„å¯†ç )</span><br>    SimpleAuthenticationInfo authenticationInfo = <span class="hljs-keyword">new</span> <span class="hljs-constructor">SimpleAuthenticationInfo(<span class="hljs-params">username</span>,<span class="hljs-params">password</span>,<span class="hljs-params">salt</span>,<span class="hljs-params">getName</span>()</span>);<br>    return authenticationInfo;<br>&#125;<br><br><span class="hljs-keyword">private</span> String get<span class="hljs-constructor">ByName(String <span class="hljs-params">username</span>)</span> &#123;<br>    <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;admin&quot;</span>.equals(username))&#123;<br>        <span class="hljs-comment">// 4a95737b032e98a50c056c41f2fa9ec6: 123456 è¿­ä»£10æ¬¡ä¸åŠ ç›çš„ç»“æœ</span><br>        <span class="hljs-comment">// 922ad745e6fc8a539f70003fa7473336: 123456 è¿­ä»£10æ¬¡åŠ ç›(kongwei_liao)çš„ç»“æœ</span><br>        return <span class="hljs-string">&quot;922ad745e6fc8a539f70003fa7473336&quot;</span>; <span class="hljs-comment">//ä¿®æ”¹ä¸ºåŠ å¯†åŠ ç›åçš„æ•°æ®</span><br>    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;guest&quot;</span>.equals(username))&#123;<br>        return <span class="hljs-string">&quot;abcd&quot;</span>;<br>    &#125;<br>    return null;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="6-5ã€å°ç»“"><a href="#6-5ã€å°ç»“" class="headerlink" title="6.5ã€å°ç»“"></a>6.5ã€å°ç»“</h5><p>æ™®é€šè®¤è¯ã€åŠ å¯†è®¤è¯ã€åŠ å¯†åŠ ç›è®¤è¯ï¼ˆ<strong>é‡‡çº³</strong>ï¼‰</p><h4 id="7ã€Authorizingï¼ˆæˆæƒï¼‰"><a href="#7ã€Authorizingï¼ˆæˆæƒï¼‰" class="headerlink" title="7ã€Authorizingï¼ˆæˆæƒï¼‰"></a>7ã€Authorizingï¼ˆæˆæƒï¼‰</h4><p>æœ‰çš„èµ„æºéœ€è¦æœ‰å¯¹åº”çš„æƒé™æ‰èƒ½è®¿é—®ï¼Œå¦‚æœæƒ³è¦æŸä¸ªç”¨æˆ·èƒ½å¤Ÿè®¿é—®æŸä¸ªèµ„æºï¼Œå¿…é¡»ç»™å¯¹åº”ç”¨æˆ·æˆæƒã€‚</p><p>å¯¹äºæˆæƒéœ€è¦åšä¸¤ä¸ªäº‹æƒ…ï¼š</p><ol><li><code>æƒé™æ‹¦æˆª</code>ï¼šå½“ç”¨æˆ·è®¿é—®æ²¡æœ‰æƒé™çš„èµ„æºæ—¶è¿›è¡Œæ‹¦æˆª</li><li><code>æƒé™åˆ¤æ–­</code>ï¼šç»™ç”¨æˆ·æˆæƒ</li></ol><p>æˆæƒï¼Œä¹Ÿå«è®¿é—®æ§åˆ¶ï¼Œå³åœ¨åº”ç”¨ä¸­æ§åˆ¶è°è®¿é—®å“ªäº›èµ„æºï¼ˆå¦‚è®¿é—®é¡µé¢/ç¼–è¾‘æ•°æ®/é¡µé¢æ“ä½œç­‰ï¼‰ã€‚åœ¨æˆæƒä¸­éœ€äº†è§£çš„å‡ ä¸ªå…³é”®å¯¹è±¡ä¸»ä½“ï¼ˆSubjectï¼‰ã€èµ„æºï¼ˆResourceï¼‰ã€æƒé™ï¼ˆPermissionï¼‰ã€è§’è‰²ï¼ˆRoleï¼‰ã€‚</p><ol><li><code>ä¸»ä½“(Subject)</code>ï¼šè®¿é—®åº”ç”¨çš„ç”¨æˆ·ï¼Œåœ¨Shiroä¸­ä½¿ç”¨Subjectä»£è¡¨è¯¥ç”¨æˆ·ã€‚ç”¨æˆ·åªæœ‰æˆæƒåæ‰å…è®¸è®¿é—®ç›¸åº”çš„èµ„æºã€‚</li><li><code>èµ„æº(Resource)</code>ï¼šåœ¨åº”ç”¨ä¸­ç”¨æˆ·å¯ä»¥è®¿é—®çš„URLï¼Œæ¯”å¦‚è®¿é—®JSPé¡µé¢ã€æŸ¥çœ‹/ç¼–è¾‘æŸäº›æ•°æ®ã€è®¿é—®æŸä¸ªä¸šåŠ¡æ–¹æ³•ã€æ‰“å°æ–‡æœ¬ç­‰ç­‰éƒ½æ˜¯èµ„æºã€‚ç”¨æˆ·åªè¦æˆæƒåæ‰èƒ½è®¿é—®ã€‚</li><li><code>æƒé™(Permission)</code>ï¼šå®‰å…¨ç­–ç•¥ä¸­çš„åŸå­æˆæƒå•ä½ï¼Œé€šè¿‡æƒé™æˆ‘ä»¬å¯ä»¥è¡¨ç¤ºåœ¨åº”ç”¨ä¸­ç”¨æˆ·æœ‰æ²¡æœ‰æ“ä½œæŸä¸ªèµ„æºçš„æƒåŠ›ã€‚å³æƒé™è¡¨ç¤ºåœ¨åº”ç”¨ä¸­ç”¨æˆ·èƒ½ä¸èƒ½è®¿é—®æŸä¸ªèµ„æºï¼Œå¦‚ï¼šè®¿é—®ç”¨æˆ·åˆ—è¡¨é¡µé¢æŸ¥çœ‹/æ–°å¢/ä¿®æ”¹/åˆ é™¤ç”¨æˆ·æ•°æ®ï¼ˆå³å¾ˆå¤šæ—¶å€™éƒ½æ˜¯CRUDï¼ˆå¢æŸ¥æ”¹åˆ ï¼‰å¼æƒé™æ§åˆ¶ï¼‰ç­‰ã€‚æƒé™ä»£è¡¨äº†ç”¨æˆ·æœ‰æ²¡æœ‰æ“ä½œæŸä¸ªèµ„æºçš„æƒåˆ©ï¼Œå³åæ˜ åœ¨æŸä¸ªèµ„æºä¸Šçš„æ“ä½œå…ä¸å…è®¸ã€‚</li><li><code>è§’è‰²(Role)</code>ï¼šæƒé™çš„é›†åˆï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä¼šèµ‹äºˆç”¨æˆ·è§’è‰²è€Œä¸æ˜¯æƒé™å³è¿™æ ·ç”¨æˆ·å¯ä»¥æ‹¥æœ‰ä¸€ç»„æƒé™ï¼Œèµ‹äºˆæƒé™æ—¶æ¯”è¾ƒæ–¹ä¾¿å…¸å‹çš„å¦‚ï¼šé¡¹ç›®ç»ç†ã€æŠ€æœ¯æ€»ç›‘ã€CTOã€å¼€å‘å·¥ç¨‹å¸ˆç­‰éƒ½æ˜¯è§’è‰²ï¼Œä¸åŒçš„è§’è‰²æ‹¥æœ‰ä¸€ç»„ä¸åŒçš„æƒé™ã€‚</li></ol><p>Shiroæ”¯æŒç²—ç²’åº¦æƒé™ï¼ˆå¦‚ç”¨æˆ·æ¨¡å—çš„æ‰€æœ‰æƒé™ï¼‰å’Œç»†ç²’åº¦æƒé™ï¼ˆæ“ä½œæŸä¸ªç”¨æˆ·çš„æƒé™ï¼Œå³å®ä¾‹çº§åˆ«çš„ï¼‰</p><h5 id="7-1ã€Shiroçš„ä¸‰ç§æƒé™åˆ¤æ–­æ–¹å¼"><a href="#7-1ã€Shiroçš„ä¸‰ç§æƒé™åˆ¤æ–­æ–¹å¼" class="headerlink" title="7.1ã€Shiroçš„ä¸‰ç§æƒé™åˆ¤æ–­æ–¹å¼"></a>7.1ã€Shiroçš„ä¸‰ç§æƒé™åˆ¤æ–­æ–¹å¼</h5><p>ç¼–ç¨‹å¼ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">//</span>é€šè¿‡<span class="hljs-keyword">if</span>/<span class="hljs-keyword">else</span>æˆæƒä»£ç å—å®Œæˆ<br>Subject subject = SecurityUtils.getSubject();<br><span class="hljs-keyword">if</span>(subject.hasRole(<span class="hljs-string">&quot;admin&quot;</span>)) &#123;<br><span class="hljs-regexp">//</span>æœ‰æƒé™<br>&#125; <span class="hljs-keyword">else</span> &#123;<br><span class="hljs-regexp">//</span>æ— æƒé™<br>&#125;<br></code></pre></td></tr></table></figure><p>æ³¨è§£å¼ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">//é€šè¿‡åœ¨æ‰§è¡Œçš„Javaæ–¹æ³•ä¸Šæ”¾ç½®ç›¸åº”çš„æ³¨è§£å®Œæˆ</span><br><span class="hljs-meta">@RequiresRoles</span>(<span class="hljs-string">&quot;admin&quot;</span>)<br><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">hello</span>(<span class="hljs-params"></span>)</span> &#123;<br><span class="hljs-comment">//æœ‰æƒé™</span><br>&#125;<br></code></pre></td></tr></table></figure><p>JSP/GSPæ ‡ç­¾ï¼šåœ¨JSP/GSP é¡µé¢é€šè¿‡ç›¸åº”çš„æ ‡ç­¾å®Œæˆ</p><figure class="highlight erb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs erb"><span class="xml">&lt;%</span><span class="ruby"><span class="hljs-variable">@taglib</span> prefix=<span class="hljs-string">&quot;shiro&quot;</span> uri=<span class="hljs-string">&quot;http://shiro.apache.org/tags&quot;</span></span><span class="xml">%&gt;</span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">shiro:hasRole</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;admin&quot;</span>&gt;</span></span><br><span class="xml">&lt;!â€” æœ‰æƒé™â€”&gt;</span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>åˆ é™¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">shiro:hasRole</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p>æ§åˆ¶å“ªäº›èµ„æºè¦åšæƒé™æ‹¦æˆªï¼Œå¦‚æœä¸åšæ‹¦æˆªï¼Œç›´æ¥æ”¾è¡Œï¼Œå¦‚æœè¦æ‹¦æˆªå°±è¦åšæƒé™åˆ¤æ–­</p><p>è·å–ç”¨æˆ·èƒ½å¤Ÿè®¿é—®èµ„æºï¼Œå¦‚æœä½ è®¿é—®èµ„æºåœ¨é‡Œé¢ï¼Œè¯´æ˜æœ‰æƒé™ã€‚å¯ä»¥è®¿é—®ï¼Œå¦åˆ™ä¸èƒ½è®¿é—®ã€‚</p><p>ä¸æ§åˆ¶ç›´æ¥æ”¾è¡Œï¼Œè¦æ§åˆ¶æŸ¥çœ‹ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰,å¦‚æœæœ‰ç›´æ¥è®¿é—®,å¦åˆ™ä¸èƒ½è®¿é—®</p><h5 id="7-2ã€æˆæƒæ‹¦æˆª"><a href="#7-2ã€æˆæƒæ‹¦æˆª" class="headerlink" title="7.2ã€æˆæƒæ‹¦æˆª"></a>7.2ã€æˆæƒæ‹¦æˆª</h5><p>æƒé™æ‹¦æˆªåŒæ ·éœ€è¦ä»æ•°æ®åº“ä¸­è·å–æƒé™æˆ–è§’è‰²ä¿¡æ¯ï¼Œæ‰€ä»¥åŒæ ·éœ€è¦è‡ªå®šä¹‰Realmã€‚</p><p>æ³¨æ„ï¼šç°è¦æƒé™å†™æ­»åœ¨é…ç½®ä¸­ï¼</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- 5.shiroçš„çœŸå®è¿‡æ»¤å™¨(æ³¨ï¼šè¿™ä¸ªåç§°å¿…éœ€å’Œweb.xmlçš„ä»£è¡¨è¿‡æ»¤å™¨ã€DelegatingFilterProxyã€‘åç§°ä¸€æ ·) --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;shiroFilter&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.apache.shiro.spring.web.ShiroFilterFactoryBean&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;securityManager&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;securityManager&quot;</span>/&gt;</span><br>    <span class="hljs-comment">&lt;!-- ç™»å½•çš„url,å¦‚æœæ²¡æœ‰ç™»å½•ï¼Œä½ è®¿é—®çš„è·¯å¾„ä¼šè·³åˆ°è¿™ä¸ªé¡µé¢ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;loginUrl&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;/s/login.jsp&quot;</span>/&gt;</span><br>    <span class="hljs-comment">&lt;!-- ç™»å½•æˆåŠŸçš„url,å¦‚æœç™»å½•æˆåŠŸï¼Œä¼šè·³è½¬åˆ°è¿™ä¸ªé¡µé¢ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;successUrl&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;/s/main.jsp&quot;</span>/&gt;</span><br>    <span class="hljs-comment">&lt;!-- æ²¡æœ‰æƒé™æ—¶è·³è½¬åˆ°è¿™ä¸ªä½ç½® --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;unauthorizedUrl&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;/s/unauthorized.jsp&quot;</span>/&gt;</span><br>    <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">        é…ç½®å“ªäº›èµ„æºè¢«ä¿æŠ¤ï¼Œå“ªäº›èµ„æºéœ€è¦æƒé™</span><br><span class="hljs-comment">        anonï¼šä¸éœ€è¦ç™»å½•ä¹Ÿå¯ä»¥è®¿é—®ç›¸åº”çš„æƒé™</span><br><span class="hljs-comment">        authcï¼šéœ€è¦æƒé™æ‰èƒ½è®¿é—®</span><br><span class="hljs-comment">          /** ï¼šæ‰€æœ‰æ–‡ä»¶åŠå…¶å­æ–‡ä»¶</span><br><span class="hljs-comment">    --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;filterChainDefinitions&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span><br>            /s/login.jsp = anon<br>            /login = anon<br>            <span class="hljs-comment">&lt;!--å¯¹èµ„æºè¿›è¡Œæƒé™æ§åˆ¶ï¼Œè¦æ§åˆ¶çš„èµ„æºéƒ½åº”è¯¥ä»æ•°æ®åº“æŸ¥å‡ºï¼Œç°åœ¨å’±ä»¬å…ˆå†™æ­»--&gt;</span><br>            /s/permission.jsp = perms[user:*]<br>            /** = authc<br>        <span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure><p>è‡ªå®šä¹‰çš„Realmæˆæƒï¼š</p><p>æˆæƒéœ€è¦ç»§æ‰¿ AuthorizingRealm ç±»ï¼Œå¹¶å®ç°å…¶ doGetAuthorizationInfo æ–¹æ³• </p><p>AuthorizingRealm ç±»ç»§æ‰¿è‡ª AuthenticatingRealmï¼Œä½†æ²¡æœ‰å®ç° AuthenticatingRealm ä¸­çš„doGetAuthenticationInfoï¼Œæ‰€ä»¥è®¤è¯å’Œæˆæƒåªéœ€è¦ç»§æ‰¿ AuthorizingRealm å°±å¯ä»¥äº†ã€‚åŒæ—¶å®ç°ä»–çš„ä¸¤ä¸ªæŠ½è±¡æ–¹æ³•ã€‚</p><p>å…·ä½“å®ç°ï¼š</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">public <span class="hljs-keyword">class</span> JpaRealm extends AuthorizingRealm &#123;<br>    <span class="hljs-comment">//AuthorizationInfo:æˆæƒ(æ˜¯å¦æœ‰æƒé™è¿›å…¥æ“ä½œ)</span><br>    <span class="hljs-comment">// æˆ‘ä»¬åªéœ€è¦æŠŠç›¸åº”çš„æƒé™äº¤ç»™Shiroï¼Œå®ƒå°±ä¼šè‡ªåŠ¨æ¯”å¯¹</span><br>    @Override<br>    protected AuthorizationInfo <span class="hljs-keyword">do</span><span class="hljs-constructor">GetAuthorizationInfo(PrincipalCollection <span class="hljs-params">principals</span>)</span> &#123;<br>        <span class="hljs-comment">//æ‹¿åˆ°ä¸»ä½“ä¿¡æ¯(æŒ‡çš„å°±æ˜¯å½“å‰ç™»å½•ç”¨æˆ·å) -&gt; å’±ä»¬çš„æƒé™åº”è¯¥æ˜¯æ ¹æ®å½“å‰ç”¨æˆ·è¿›è¡ŒæŸ¥è¯¢åˆ°çš„</span><br>        String username = (String) principals.get<span class="hljs-constructor">PrimaryPrincipal()</span>;<br>        <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(<span class="hljs-string">&quot;åé¢éœ€è¦æ ¹æ®ç”¨æˆ·åè·å–èµ„æº&quot;</span>+username);<br>        <span class="hljs-comment">//è·å–æƒé™èµ„æº(è¿™é‡Œå‡è®¾å·²ç»æ ¹æ®ç”¨æˆ·ååˆ°æ•°æ®åº“ä¸­è·å–åˆ°äº†)</span><br>        Set&lt;String&gt; permissions = <span class="hljs-keyword">new</span> HashSet&lt;&gt;<span class="hljs-literal">()</span>;<br>        permissions.add(<span class="hljs-string">&quot;user:*&quot;</span>);<br>        <span class="hljs-comment">//æ‹¿åˆ°æˆæƒå¯¹è±¡ï¼Œå¹¶ä¸”æ‰€æœ‰æƒé™äº¤ç»™å®ƒ</span><br>        SimpleAuthorizationInfo simpleAuthorizationInfo = <span class="hljs-keyword">new</span> <span class="hljs-constructor">SimpleAuthorizationInfo()</span>;<br>        simpleAuthorizationInfo.set<span class="hljs-constructor">StringPermissions(<span class="hljs-params">permissions</span>)</span>;<br>        <span class="hljs-comment">//è¿”å›æˆæƒå¯¹è±¡</span><br>        return simpleAuthorizationInfo;<br>    &#125;<br><br>    <span class="hljs-comment">//AuthenticationInfo:è®¤è¯; èº«ä»½éªŒè¯; è¯æ˜</span><br>    <span class="hljs-comment">//ç™»å½•çš„æ—¶å€™å°±ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•æ¥åšéªŒè¯</span><br>    @Override<br>    protected AuthenticationInfo <span class="hljs-keyword">do</span><span class="hljs-constructor">GetAuthenticationInfo(AuthenticationToken <span class="hljs-params">token</span>)</span> throws AuthenticationException &#123;<br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * Object principalï¼šä¸»ä½“(ç°åœ¨å°±æ˜¯ç™»å½•çš„ç”¨æˆ·å)</span><br><span class="hljs-comment">         * Object hashedCredentialsï¼šç¼–ç åçš„è®¤è¯å¯†ç </span><br><span class="hljs-comment">         * ByteSource credentialsSalt:åŠ ç›</span><br><span class="hljs-comment">         * String realmName</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-comment">//èº«ä»½è®¤è¯(ç”¨æˆ·å)</span><br>        Object principal = token.get<span class="hljs-constructor">Principal()</span>;<br>        <span class="hljs-comment">//å¯†ç å‡è®¾æ˜¯æ ¹æ®ç”¨æˆ·ååˆ°æ•°æ®åº“ä¸­æŸ¥è¯¢å‡ºæ¥çš„ï¼ˆæ•°æ®åº“å¯†ç æ˜¯ç»è¿‡åŠ å¯†çš„ï¼‰</span><br>        Object credentials = <span class="hljs-string">&quot;d5a3fedf6c59c2ecbe7f7a6c1a22da37&quot;</span>;<br>        <span class="hljs-comment">//åŠ ç›çš„æ•°æ®</span><br>        ByteSource byteSource = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">ByteSource</span>.</span><span class="hljs-module"><span class="hljs-identifier">Util</span>.</span></span><span class="hljs-built_in">bytes</span>(<span class="hljs-string">&quot;itsource&quot;</span>);<br>        return <span class="hljs-keyword">new</span> <span class="hljs-constructor">SimpleAuthenticationInfo(<span class="hljs-params">principal</span>,<span class="hljs-params">credentials</span>,<span class="hljs-params">byteSource</span>,<span class="hljs-params">getName</span>()</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="7-3ã€å°ç»“"><a href="#7-3ã€å°ç»“" class="headerlink" title="7.3ã€å°ç»“"></a>7.3ã€å°ç»“</h5><p>æˆæƒæ‹¦æˆª:</p><ol><li><p>å†™æ­»</p></li><li><p>é€šè¿‡factoryBeanåŠ¨æ€è·å–</p></li><li><p>é€šè¿‡Realmè·å–ç”¨æˆ·æƒé™è¿”å›ç»™æ¡†æ¶</p></li></ol>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title></title>
    <link href="/2021/02/15/Object/"/>
    <url>/2021/02/15/Object/</url>
    
    <content type="html"><![CDATA[<h1 id="Object"><a href="#Object" class="headerlink" title="Object"></a>Object</h1><p> <code>Objectç±»</code> æ˜¯ç±»å±‚æ¬¡ç»“æ„çš„æ ¹ç±»ï¼Œæ¯ä¸ªç±»éƒ½ä½¿ç”¨ <code>Object</code> ä½œä¸ºè¶…ç±»ã€‚</p><p>æ‰€æœ‰çš„ç±»å½“ç„¶é™¤äº†Objectç±»ï¼ˆåŒ…æ‹¬æ•°ç»„ï¼‰éƒ½å®ç°è¿™ä¸ªç±»çš„æ–¹æ³• :ã€€æ‰€æœ‰çš„å®ä¾‹å¯¹è±¡éƒ½å¯ä»¥è°ƒç”¨åˆ°Objectä¸­çš„æ–¹æ³•;</p><blockquote><p> è¡¥å……ï¼šä»€ä¹ˆæ˜¯Native Method</p><p>â€‹    ç®€å•åœ°è®²ï¼Œä¸€ä¸ªNative Methodå°±æ˜¯ä¸€ä¸ªjavaè°ƒç”¨éjavaä»£ç çš„æ¥å£ã€‚</p><p>â€‹    ä¸€ä¸ªNative Methodæ˜¯è¿™æ ·ä¸€ä¸ªjavaçš„æ–¹æ³•ï¼šè¯¥æ–¹æ³•çš„å®ç°ç”±éjavaè¯­è¨€å®ç°ï¼Œæ¯”å¦‚Cã€‚</p><p>â€‹    è¿™ä¸ªç‰¹å¾å¹¶éjavaæ‰€ç‰¹æœ‰ï¼Œå¾ˆå¤šå…¶å®ƒçš„ç¼–ç¨‹è¯­è¨€éƒ½æœ‰è¿™ä¸€æœºåˆ¶ï¼Œæ¯”å¦‚åœ¨Cï¼‹ï¼‹ä¸­ï¼Œä½ å¯ä»¥ç”¨extern â€œCâ€å‘ŠçŸ¥Cï¼‹ï¼‹ç¼–è¯‘å™¨å»è°ƒç”¨ä¸€ä¸ªCçš„å‡½æ•°ã€‚</p><p>â€‹    â€œA native method is a Java method whose implementation is provided by non-java code.â€</p></blockquote><p>package java.lang.Object.javaæºä»£ç åˆ†æï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> java.lang;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * ç±»Objectæ˜¯ç±»å±‚æ¬¡ç»“æ„çš„æ ¹ã€‚</span><br><span class="hljs-comment"> * æ¯ä¸ªç±»éƒ½æœ‰Objectä½œä¸ºè¶…ç±»ã€‚æ‰€æœ‰å¯¹è±¡ï¼ŒåŒ…æ‹¬æ•°ç»„ï¼Œå®ç°è¿™ä¸ªç±»çš„æ–¹æ³•ã€‚</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>  unascribed</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@see</span>     java.lang.Class</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@since</span>   JDK1.0</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Object</span> </span>&#123;<br><br>    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title">registerNatives</span><span class="hljs-params">()</span></span>;<br>    <span class="hljs-keyword">static</span> &#123;<br>        registerNatives();<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * è¿”å›æ­¤Objectçš„è¿è¡Œæ—¶ç±»ã€‚è¿”å›çš„Classå¯¹è±¡æ˜¯ç”±æ‰€è¡¨ç¤ºç±»çš„static synchronizedæ–¹æ³•é”å®šçš„å¯¹è±¡ã€‚</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * å®é™…ç»“æœç±»å‹æ˜¯Class&lt;ï¼Ÿextends|X|&gt;ï¼Œå…¶ä¸­|X|æ˜¯è°ƒç”¨getClassçš„è¡¨è¾¾å¼çš„é™æ€ç±»å‹çš„æ“¦é™¤ã€‚</span><br><span class="hljs-comment">     </span><br><span class="hljs-comment">     * ä¾‹å¦‚ï¼Œæ­¤ä»£ç ç‰‡æ®µä¸éœ€è¦å¼ºåˆ¶è½¬æ¢:</span><br><span class="hljs-comment">     * Number n = 0;</span><br><span class="hljs-comment">     * Class&lt;? extends Number&gt; c = n.getClass(); </span><br><span class="hljs-comment">     * è¿”å›å€¼ è¡¨ç¤ºæ­¤å¯¹è±¡çš„è¿è¡Œæ—¶ç±»çš„ç±»å¯¹è±¡ã€‚</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">native</span> Class&lt;?&gt; getClass();<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment"> * è¿”å›å¯¹è±¡çš„å“ˆå¸Œä»£ç å€¼ã€‚æ”¯æŒæ­¤æ–¹æ³•æ˜¯ä¸ºäº†ç»™å“ˆå¸Œè¡¨æä¾›ä¾¿åˆ©ï¼Œå¦‚java.util.HashMapæä¾›çš„å“ˆå¸Œè¡¨ã€‚</span><br><span class="hljs-comment">     * </span><br><span class="hljs-comment">     * The general contract of hashCode is:</span><br><span class="hljs-comment">     * </span><br><span class="hljs-comment">     * æ¯å½“åœ¨Javaåº”ç”¨ç¨‹åºçš„æ‰§è¡Œè¿‡ç¨‹ä¸­å¯¹åŒä¸€ä¸ªå¯¹è±¡è°ƒç”¨å¤šæ¬¡æ—¶ï¼ŒhashCodeæ–¹æ³•å¿…é¡»ä¸€è‡´åœ°è¿”å›ç›¸åŒçš„æ•´æ•°ï¼Œå‰ææ˜¯   * åœ¨å¯¹è±¡çš„equalsæ¯”è¾ƒä¸­ä½¿ç”¨çš„ä¿¡æ¯æ²¡æœ‰è¢«ä¿®æ”¹</span><br><span class="hljs-comment">     * ä»åº”ç”¨ç¨‹åºçš„ä¸€æ¬¡æ‰§è¡Œåˆ°åŒä¸€åº”ç”¨ç¨‹åºçš„å¦ä¸€æ¬¡æ‰§è¡Œï¼Œæ­¤æ•´æ•°ä¸å¿…ä¿æŒä¸€è‡´ã€‚</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * å¦‚æœæ ¹æ®equalsï¼ˆObjectï¼‰æ–¹æ³•ï¼Œä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰ï¼Œé‚£ä¹ˆå¯¹ä¸¤ä¸ªå¯¹è±¡ä¸­çš„æ¯ä¸ªå¯¹è±¡è°ƒç”¨hashCodeæ–¹æ³•å¿…é¡»äº§ç”Ÿç›¸  * åŒçš„æ•´æ•°ç»“æœã€‚</span><br><span class="hljs-comment">     * æ ¹æ®java.lang.Object#equalsï¼ˆjava.lang.Objectï¼‰æ–¹æ³•ï¼Œå¦‚æœä¸¤ä¸ªå¯¹è±¡ä¸ç›¸ç­‰ï¼Œåˆ™å¯¹è¿™ä¸¤ä¸ªå¯¹è±¡ä¸­çš„æ¯  * ä¸€ä¸ªè°ƒç”¨hashCodeæ–¹æ³•éƒ½å¿…é¡»äº§ç”Ÿä¸åŒçš„æ•´æ•°ç»“æœã€‚ ä½†æ˜¯ï¼Œç¨‹åºå‘˜åº”è¯¥çŸ¥é“ï¼Œä¸ºä¸ç›¸ç­‰çš„å¯¹è±¡ç”Ÿæˆä¸åŒçš„æ•´æ•°ç»“   * æœå¯èƒ½ä¼šæé«˜å“ˆå¸Œè¡¨çš„æ€§èƒ½ã€‚</span><br><span class="hljs-comment">     * </span><br><span class="hljs-comment">     * å°½å¯èƒ½åˆç†åˆ‡å®å¯è¡Œçš„ï¼Œç”±ç±»å¯¹è±¡å®šä¹‰çš„hashCodeæ–¹æ³•ç¡®å®ä¸ºä¸åŒçš„å¯¹è±¡è¿”å›ä¸åŒçš„æ•´æ•°ã€‚ï¼ˆè¿™é€šå¸¸æ˜¯é€šè¿‡å°†å¯¹è±¡  * çš„å†…éƒ¨åœ°å€è½¬æ¢ä¸ºæ•´æ•°æ¥å®ç°çš„ï¼Œä½†æ˜¯Java&amp;amp;tradeï¼›ç¼–ç¨‹è¯­è¨€ä¸éœ€è¦è¿™ç§å®ç°æŠ€æœ¯ã€‚ï¼‰</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * è¿”å›çš„æ˜¯ a hash code value for this object.</span><br><span class="hljs-comment">     * å‚è€ƒ     java.lang.Object#equals(java.lang.Object)</span><br><span class="hljs-comment">     * å‚è€ƒ     java.lang.System#identityHashCode</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">int</span> <span class="hljs-title">hashCode</span><span class="hljs-params">()</span></span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æŒ‡ç¤ºå…¶ä»–å¯¹è±¡æ˜¯å¦â€œç­‰äºâ€æ­¤å¯¹è±¡ã€‚</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * equalsæ–¹æ³•åœ¨éç©ºå¯¹è±¡å¼•ç”¨ä¸Šå®ç°ç­‰ä»·å…³ç³»ï¼š</span><br><span class="hljs-comment">     * å®ƒæ˜¯è‡ªåçš„ï¼šå¯¹äºä»»ä½•éç©ºçš„å¼•ç”¨å€¼xï¼Œx.equalsï¼ˆxï¼‰åº”è¯¥è¿”å›trueã€‚</span><br><span class="hljs-comment">     * å®ƒæ˜¯å¯¹ç§°çš„ï¼šå¯¹äºä»»ä½•éç©ºçš„å¼•ç”¨å€¼xå’Œyï¼Œå½“ä¸”ä»…å½“y.equalsï¼ˆxï¼‰è¿”å›trueæ—¶ï¼Œx.equalsï¼ˆyï¼‰åº”è¿”å› * trueã€‚</span><br><span class="hljs-comment">     * å®ƒæ˜¯å¯ä¼ é€’çš„ï¼šå¯¹äºä»»ä½•éç©ºçš„å¼•ç”¨å€¼xã€yå’Œzï¼Œå¦‚æœx.equalsï¼ˆyï¼‰è¿”å›trueï¼Œy.equalsï¼ˆzï¼‰è¿”å›trueï¼Œé‚£  * ä¹ˆx.equalsï¼ˆzï¼‰åº”è¯¥è¿”å›trueã€‚</span><br><span class="hljs-comment">     * å®ƒæ˜¯ä¸€è‡´çš„ï¼šå¯¹äºä»»ä½•éç©ºçš„å¼•ç”¨å€¼xå’Œyï¼Œå¤šæ¬¡è°ƒç”¨x.equalsï¼ˆyï¼‰ä¸€è‡´åœ°è¿”å›trueæˆ–ä¸€è‡´åœ°è¿”å›falseï¼Œå‰æ  * æ˜¯åœ¨å¯¹è±¡çš„equalsæ¯”è¾ƒä¸­ä½¿ç”¨çš„ä¿¡æ¯æ²¡æœ‰è¢«ä¿®æ”¹ã€‚</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * å¯¹äºä»»ä½•éç©ºå¼•ç”¨å€¼xï¼Œx.equals(null)åº”è¿”å›falseã€‚</span><br><span class="hljs-comment">     * </span><br><span class="hljs-comment">     * ç±»å¯¹è±¡çš„equalsæ–¹æ³•åœ¨å¯¹è±¡ä¸Šå®ç°äº†æœ€æœ‰é‰´åˆ«èƒ½åŠ›çš„ç­‰ä»·å…³ç³»ï¼›</span><br><span class="hljs-comment">     * ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äºä»»ä½•éç©ºçš„å¼•ç”¨å€¼xå’Œyï¼Œåªæœ‰å½“xå’Œyå¼•ç”¨åŒä¸€å¯¹è±¡æ—¶ï¼Œè¯¥æ–¹æ³•æ‰è¿”å›true</span><br><span class="hljs-comment">     * (x == y has the value true).</span><br><span class="hljs-comment">     * </span><br><span class="hljs-comment">     * è¯·æ³¨æ„ï¼Œæ¯å½“é‡å†™hashCodeæ–¹æ³•æ—¶ï¼Œé€šå¸¸éƒ½éœ€è¦é‡å†™è¯¥æ–¹æ³•ï¼Œä»¥ä¾¿ç»´æŠ¤hashCodeæ–¹æ³•çš„ä¸€èˆ¬çº¦å®šï¼Œè¯¥çº¦å®šå£°æ˜ç›¸ * ç­‰çš„å¯¹è±¡å¿…é¡»å…·æœ‰ç›¸ç­‰çš„hashä»£ç ã€‚</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>   obj   the reference object with which to compare.</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span>  &#123;<span class="hljs-doctag">@code</span> true&#125; if this object is the same as the obj</span><br><span class="hljs-comment">     *          argument; &#123;<span class="hljs-doctag">@code</span> false&#125; otherwise.</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>     #hashCode()</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>     java.util.HashMap</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">equals</span><span class="hljs-params">(Object obj)</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> (<span class="hljs-keyword">this</span> == obj);<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * åˆ›å»ºå¹¶è¿”å›æ­¤å¯¹è±¡çš„å‰¯æœ¬ã€‚â€œå¤åˆ¶â€çš„ç¡®åˆ‡å«ä¹‰å¯èƒ½å–å†³äºå¯¹è±¡çš„ç±»åˆ«ã€‚ ä¸€èˆ¬æ„å›¾æ˜¯ï¼Œå¯¹äºä»»ä½•å¯¹è±¡xï¼Œè¡¨è¾¾å¼ï¼š</span><br><span class="hljs-comment">     * x.clone() != x will be true, and that the expression:</span><br><span class="hljs-comment">     * x.clone().getClass() == x.getClass() will be true, ä½†è¿™å¹¶ä¸æ˜¯ç»å¯¹çš„è¦æ±‚ã€‚</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * While it is typically the case that: é€šå¸¸æƒ…å†µä¸‹ï¼š</span><br><span class="hljs-comment">     * x.clone().equals(x) will be true, è¿™å¹¶ä¸æ˜¯ç»å¯¹çš„è¦æ±‚ï¼Œå¦‚æ•°ç»„çš„å…‹éš†è¿™é‡Œè¿”å›çš„å°±æ˜¯false.</span><br><span class="hljs-comment">     * </span><br><span class="hljs-comment">     * æŒ‰ç…§æƒ¯ä¾‹ï¼Œè¿”å›çš„å¯¹è±¡åº”è¯¥é€šè¿‡è°ƒç”¨super.cloneæ¥è·å¾—ã€‚å¦‚æœä¸€ä¸ªç±»åŠå…¶æ‰€æœ‰çš„è¶…ç±»ï¼ˆå¯¹è±¡é™¤å¤–ï¼‰éƒ½éµå®ˆè¿™ä¸ªæƒ¯   * ä¾‹ï¼Œé‚£ä¹ˆx.clone().getClass()==x.getClass()å°±æ˜¯è¿™æ ·ã€‚</span><br><span class="hljs-comment">     * </span><br><span class="hljs-comment">     * æŒ‰ç…§æƒ¯ä¾‹ï¼Œæ­¤æ–¹æ³•è¿”å›çš„å¯¹è±¡åº”ç‹¬ç«‹äºæ­¤å¯¹è±¡ï¼ˆæ­£åœ¨å…‹éš†ï¼‰ã€‚ä¸ºäº†å®ç°è¿™ç§ç‹¬ç«‹æ€§ï¼Œå¯èƒ½éœ€è¦åœ¨è¿”å›super.clone   * è¿”å›çš„å¯¹è±¡ä¹‹å‰ä¿®æ”¹è¯¥å¯¹è±¡çš„ä¸€ä¸ªæˆ–å¤šä¸ªå­—æ®µã€‚é€šå¸¸ï¼Œè¿™æ„å‘³ç€å¤åˆ¶æ„æˆè¢«å…‹éš†å¯¹è±¡çš„å†…éƒ¨â€œæ·±å±‚ç»“æ„â€çš„ä»»ä½•å¯å˜ * å¯¹è±¡ï¼Œå¹¶ç”¨å¯¹å‰¯æœ¬çš„å¼•ç”¨æ›¿æ¢å¯¹è¿™äº›å¯¹è±¡çš„å¼•ç”¨ã€‚å¦‚æœä¸€ä¸ªç±»åªåŒ…å«åŸè¯­å­—æ®µæˆ–å¯¹ä¸å¯å˜å¯¹è±¡çš„å¼•ç”¨ï¼Œé‚£ä¹ˆé€šå¸¸æƒ…å†µ   * ä¸‹super.cloneè¿”å›çš„å¯¹è±¡ä¸­ä¸éœ€è¦ä¿®æ”¹ä»»ä½•å­—æ®µã€‚</span><br><span class="hljs-comment">     * </span><br><span class="hljs-comment">     * ç±»å¯¹è±¡çš„æ–¹æ³•å…‹éš†æ‰§è¡Œç‰¹å®šçš„å…‹éš†æ“ä½œã€‚é¦–å…ˆï¼Œå¦‚æœè¿™ä¸ªå¯¹è±¡çš„ç±»æ²¡æœ‰å®ç°æ¥å£Cloneableï¼Œé‚£ä¹ˆä¼šæŠ›å‡º * CloneNotSupportedExceptionã€‚æ³¨æ„ï¼Œæ‰€æœ‰æ•°ç»„éƒ½è¢«è®¤ä¸ºå®ç°äº†æ¥å£Cloneableï¼Œå¹¶ä¸”æ•°ç»„ç±»å‹T[]çš„ * cloneæ–¹æ³•çš„è¿”å›ç±»å‹æ˜¯T[]ï¼Œå…¶ä¸­Tæ˜¯ä»»ä½•å¼•ç”¨æˆ–åŸºå…ƒç±»å‹ã€‚</span><br><span class="hljs-comment">     * å¦åˆ™ï¼Œæ­¤æ–¹æ³•å°†åˆ›å»ºæ­¤å¯¹è±¡ç±»çš„æ–°å®ä¾‹ï¼Œå¹¶ä½¿ç”¨æ­¤å¯¹è±¡ç›¸åº”å­—æ®µçš„å†…å®¹åˆå§‹åŒ–å…¶æ‰€æœ‰å­—æ®µï¼Œå°±åƒé€šè¿‡èµ‹å€¼ä¸€æ ·ï¼›å­—æ®µ   * çš„å†…å®¹æœ¬èº«ä¸ä¼šè¢«å…‹éš†ã€‚å› æ­¤ï¼Œæ­¤æ–¹æ³•æ‰§è¡Œæ­¤å¯¹è±¡çš„â€œæµ…å¤åˆ¶â€ï¼Œè€Œä¸æ˜¯â€œæ·±å¤åˆ¶â€æ“ä½œã€‚</span><br><span class="hljs-comment">     * </span><br><span class="hljs-comment">     * Objectç±»æœ¬èº«å¹¶ä¸å®ç°æ¥å£Cloneableï¼Œå› æ­¤å¯¹ç±»ä¸ºObjectçš„å¯¹è±¡è°ƒç”¨cloneæ–¹æ³•å°†å¯¼è‡´åœ¨è¿è¡Œæ—¶å¼•å‘å¼‚å¸¸ã€‚</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span>     a clone of this instance.</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span>  CloneNotSupportedException  if the object&#x27;s class does not</span><br><span class="hljs-comment">     *               support the &#123;<span class="hljs-doctag">@code</span> Cloneable&#125; interface. Subclasses</span><br><span class="hljs-comment">     *               that override the &#123;<span class="hljs-doctag">@code</span> clone&#125; method can also</span><br><span class="hljs-comment">     *               throw this exception to indicate that an instance cannot</span><br><span class="hljs-comment">     *               be cloned.</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@see</span> java.lang.Cloneable</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">native</span> Object <span class="hljs-title">clone</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> CloneNotSupportedException</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * è¿”å›å¯¹è±¡çš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼ã€‚é€šå¸¸ï¼ŒtoStringæ–¹æ³•è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¯¥å­—ç¬¦ä¸²â€œä»¥æ–‡æœ¬å½¢å¼è¡¨ç¤ºâ€è¯¥å¯¹è±¡ã€‚ç»“æœåº”è¯¥   * æ˜¯ä¸€ä¸ªç®€æ´ä½†ä¿¡æ¯é‡å¤§çš„è¡¨è¿°ï¼Œä¾¿äºé˜…è¯»ã€‚å»ºè®®æ‰€æœ‰å­ç±»é‡å†™æ­¤æ–¹æ³•ã€‚</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * ç±»å¯¹è±¡çš„toStringæ–¹æ³•è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¯¥å­—ç¬¦ä¸²ç”±å¯¹è±¡ä¸ºå®ä¾‹çš„ç±»çš„åç§°ã€atç¬¦å·å­—ç¬¦â€œ@â€å’Œå¯¹è±¡å“ˆå¸Œä»£ç çš„æ— * ç¬¦å·åå…­è¿›åˆ¶è¡¨ç¤ºç»„æˆã€‚æ¢å¥è¯è¯´ï¼Œæ­¤æ–¹æ³•è¿”å›çš„å­—ç¬¦ä¸²ç­‰äºï¼š</span><br><span class="hljs-comment">     * </span><br><span class="hljs-comment">     * getClass().getName() + &#x27;@&#x27; + Integer.toHexString(hashCode())</span><br><span class="hljs-comment">     * </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span>  a string representation of the object.</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">toString</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> getClass().getName() + <span class="hljs-string">&quot;@&quot;</span> + Integer.toHexString(hashCode());<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * å”¤é†’ç­‰å¾…æ­¤å¯¹è±¡ç›‘è§†å™¨çš„å•ä¸ªçº¿ç¨‹ã€‚å¦‚æœæœ‰ä»»ä½•çº¿ç¨‹æ­£åœ¨ç­‰å¾…è¿™ä¸ªå¯¹è±¡ï¼Œåˆ™é€‰æ‹©å…¶ä¸­ä¸€ä¸ªçº¿ç¨‹è¢«å”¤é†’ã€‚é€‰æ‹©æ˜¯ä»»æ„  * çš„ï¼Œç”±å®ç°è€…è‡ªè¡Œå†³å®šã€‚çº¿ç¨‹é€šè¿‡è°ƒç”¨å…¶ä¸­ä¸€ä¸ªç­‰å¾…æ–¹æ³•æ¥ç­‰å¾…å¯¹è±¡çš„ç›‘è§†å™¨ã€‚</span><br><span class="hljs-comment">     * </span><br><span class="hljs-comment">     * åœ¨å½“å‰çº¿ç¨‹æ”¾å¼ƒå¯¹è¯¥å¯¹è±¡çš„é”å®šä¹‹å‰ï¼Œå”¤é†’çš„çº¿ç¨‹å°†æ— æ³•ç»§ç»­ã€‚å”¤é†’çš„çº¿ç¨‹å°†ä»¥é€šå¸¸çš„æ–¹å¼ä¸ä»»ä½•å…¶ä»–çº¿ç¨‹ç«äº‰ï¼Œè¿™   * äº›çº¿ç¨‹å¯èƒ½æ­£åœ¨ç§¯æç«äº‰ä»¥åœ¨æ­¤å¯¹è±¡ä¸ŠåŒæ­¥ï¼›ä¾‹å¦‚ï¼Œå”¤é†’çš„çº¿ç¨‹åœ¨æˆä¸ºä¸‹ä¸€ä¸ªé”å®šæ­¤å¯¹è±¡çš„çº¿ç¨‹æ—¶æ²¡æœ‰å¯é çš„ç‰¹æƒæˆ– * åŠ£åŠ¿ã€‚</span><br><span class="hljs-comment">     * </span><br><span class="hljs-comment">     * æ­¤æ–¹æ³•åªèƒ½ç”±ä½œä¸ºæ­¤å¯¹è±¡ç›‘è§†å™¨æ‰€æœ‰è€…çš„çº¿ç¨‹è°ƒç”¨ã€‚çº¿ç¨‹é€šè¿‡ä»¥ä¸‹ä¸‰ç§æ–¹å¼ä¹‹ä¸€æˆä¸ºå¯¹è±¡ç›‘è§†å™¨çš„æ‰€æœ‰è€…ï¼š</span><br><span class="hljs-comment">     * </span><br><span class="hljs-comment">     * By executing a synchronized instance method of that object.</span><br><span class="hljs-comment">     * By executing the body of a synchronized statement that synchronizes on the object.</span><br><span class="hljs-comment">     * For objects of type Class, by executing a synchronized static method of that class.</span><br><span class="hljs-comment">     * </span><br><span class="hljs-comment">     * Only one thread at a time can own an object&#x27;s monitor.ä¸€æ¬¡åªæœ‰ä¸€ä¸ªçº¿ç¨‹æœ‰è¯¥å¯¹è±¡çš„ç›‘è§†å™¨ã€‚</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span>  IllegalMonitorStateException  if the current thread is not</span><br><span class="hljs-comment">     *               the owner of this object&#x27;s monitor.</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>        java.lang.Object#notifyAll()</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>        java.lang.Object#wait()</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title">notify</span><span class="hljs-params">()</span></span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * å”¤é†’æ­¤å¯¹è±¡ç›‘è§†å™¨ä¸Šç­‰å¾…çš„æ‰€æœ‰çº¿ç¨‹ã€‚çº¿ç¨‹é€šè¿‡è°ƒç”¨å…¶ä¸­ä¸€ä¸ªç­‰å¾…æ–¹æ³•æ¥ç­‰å¾…å¯¹è±¡çš„ç›‘è§†å™¨ã€‚</span><br><span class="hljs-comment">     * </span><br><span class="hljs-comment">     * åœ¨å½“å‰çº¿ç¨‹æ”¾å¼ƒå¯¹è¯¥å¯¹è±¡çš„é”å®šä¹‹å‰ï¼Œå”¤é†’çš„çº¿ç¨‹å°†æ— æ³•ç»§ç»­ã€‚å”¤é†’çš„çº¿ç¨‹å°†ä»¥é€šå¸¸çš„æ–¹å¼ä¸ä»»ä½•å…¶ä»–çº¿ç¨‹ç«äº‰ï¼Œè¿™   * äº›çº¿ç¨‹å¯èƒ½æ­£åœ¨ç§¯æç«äº‰ä»¥åœ¨æ­¤å¯¹è±¡ä¸ŠåŒæ­¥ï¼›ä¾‹å¦‚ï¼Œå”¤é†’çš„çº¿ç¨‹åœ¨æˆä¸ºä¸‹ä¸€ä¸ªçº¿ç¨‹ä»¥é”å®šæ­¤å¯¹è±¡æ—¶æ²¡æœ‰å¯é çš„ç‰¹æƒæˆ– * åŠ£åŠ¿ã€‚</span><br><span class="hljs-comment">     * </span><br><span class="hljs-comment">     * æ­¤æ–¹æ³•åªèƒ½ç”±ä½œä¸ºæ­¤å¯¹è±¡ç›‘è§†å™¨æ‰€æœ‰è€…çš„çº¿ç¨‹è°ƒç”¨ã€‚æœ‰å…³çº¿ç¨‹æˆä¸ºç›‘è§†å™¨æ‰€æœ‰è€…çš„æ–¹å¼çš„æè¿°ï¼Œè¯·å‚è§notifyæ–¹ * æ³•ã€‚</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span>  IllegalMonitorStateException  if the current thread is not</span><br><span class="hljs-comment">     *               the owner of this object&#x27;s monitor.</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>        java.lang.Object#notify()</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>        java.lang.Object#wait()</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title">notifyAll</span><span class="hljs-params">()</span></span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ä½¿å½“å‰çº¿ç¨‹ç­‰å¾…ï¼Œç›´åˆ°å¦ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨æ­¤å¯¹è±¡çš„java.lang.Object#notifyï¼ˆï¼‰æ–¹æ³•æˆ–java.lang.Object#notifyAllï¼ˆï¼‰æ–¹æ³•ï¼Œæˆ–è€…å·²è¿‡æŒ‡å®šçš„æ—¶é—´ã€‚</span><br><span class="hljs-comment">     * </span><br><span class="hljs-comment">     * The current thread must own this object&#x27;s monitor.</span><br><span class="hljs-comment">     * </span><br><span class="hljs-comment">     * æ­¤æ–¹æ³•ä¼šå¯¼è‡´å½“å‰çº¿ç¨‹ï¼ˆç§°ä¸ºTï¼‰å°†è‡ªèº«æ”¾ç½®åœ¨æ­¤å¯¹è±¡çš„ç­‰å¾…é›†ä¸­ï¼Œç„¶åæ”¾å¼ƒå¯¹æ­¤å¯¹è±¡çš„ä»»ä½•å’Œæ‰€æœ‰åŒæ­¥å£°æ˜ã€‚å‡ºäº   * çº¿ç¨‹è°ƒåº¦çš„ç›®çš„ï¼Œçº¿ç¨‹Tå°†è¢«ç¦ç”¨ï¼Œå¹¶å¤„äºä¼‘çœ çŠ¶æ€ï¼Œç›´åˆ°å‘ç”Ÿä»¥ä¸‹å››ç§æƒ…å†µä¹‹ä¸€ï¼š</span><br><span class="hljs-comment">     * å…¶ä»–ä¸€äº›çº¿ç¨‹ä¸ºæ­¤å¯¹è±¡è°ƒç”¨notifyæ–¹æ³•ï¼Œè€Œçº¿ç¨‹Tæ°å¥½è¢«ä»»æ„é€‰æ‹©ä¸ºè¦å”¤é†’çš„çº¿ç¨‹ã€‚</span><br><span class="hljs-comment">     * å…¶ä»–ä¸€äº›çº¿ç¨‹ä¸ºæ­¤å¯¹è±¡è°ƒç”¨notifyAllæ–¹æ³•ã€‚</span><br><span class="hljs-comment">     * å¦ä¸€ä¸ªçº¿ç¨‹æ™®é€šçº¿ç¨‹interruptï¼ˆï¼‰ä¸­æ–­çº¿ç¨‹Tã€‚</span><br><span class="hljs-comment">     * æŒ‡å®šçš„å®æ—¶æ—¶é—´æˆ–å¤šæˆ–å°‘å·²ç»è¿‡å»ã€‚ä½†æ˜¯ï¼Œå¦‚æœè¶…æ—¶ä¸ºé›¶ï¼Œåˆ™ä¸è€ƒè™‘å®æ—¶æ€§ï¼Œçº¿ç¨‹åªéœ€ç­‰å¾…é€šçŸ¥ã€‚</span><br><span class="hljs-comment">     * </span><br><span class="hljs-comment">     * ç„¶åä»è¯¥å¯¹è±¡çš„ç­‰å¾…é›†ä¸­åˆ é™¤çº¿ç¨‹Tï¼Œå¹¶é‡æ–°å¯ç”¨çº¿ç¨‹è°ƒåº¦ã€‚ç„¶åï¼Œå®ƒä»¥é€šå¸¸çš„æ–¹å¼ä¸å…¶ä»–çº¿ç¨‹ç«äº‰å¯¹è±¡ä¸Šçš„åŒæ­¥  * æƒï¼›ä¸€æ—¦å®ƒè·å¾—äº†å¯¹è±¡çš„æ§åˆ¶æƒï¼Œå®ƒå¯¹è¯¥å¯¹è±¡çš„æ‰€æœ‰åŒæ­¥å£°æ˜éƒ½å°†æ¢å¤åˆ°åŸæ¥çš„çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ¢å¤åˆ°è°ƒç”¨wait * æ–¹æ³•æ—¶çš„çŠ¶æ€ã€‚ç„¶åçº¿ç¨‹Tä»waitæ–¹æ³•çš„è°ƒç”¨è¿”å›ã€‚å› æ­¤ï¼Œä»waitæ–¹æ³•è¿”å›æ—¶ï¼Œå¯¹è±¡å’Œçº¿ç¨‹Tçš„åŒæ­¥çŠ¶æ€ä¸è°ƒç”¨ * waitæ–¹æ³•æ—¶å®Œå…¨ç›¸åŒã€‚</span><br><span class="hljs-comment">     * </span><br><span class="hljs-comment">     * çº¿ç¨‹ä¹Ÿå¯ä»¥åœ¨ä¸è¢«é€šçŸ¥ã€ä¸­æ–­æˆ–è¶…æ—¶çš„æƒ…å†µä¸‹å”¤é†’ï¼Œå³æ‰€è°“çš„è™šå‡å”¤é†’ã€‚è™½ç„¶è¿™ç§æƒ…å†µåœ¨å®è·µä¸­å¾ˆå°‘å‘ç”Ÿï¼Œä½†åº”ç”¨ç¨‹   * åºå¿…é¡»é€šè¿‡æµ‹è¯•æœ¬åº”å¯¼è‡´çº¿ç¨‹è¢«å”¤é†’çš„æ¡ä»¶ï¼Œå¹¶åœ¨æ¡ä»¶ä¸æ»¡è¶³æ—¶ç»§ç»­ç­‰å¾…æ¥é˜²èŒƒè¿™ç§æƒ…å†µã€‚æ¢å¥è¯è¯´ï¼Œç­‰å¾…åº”è¯¥æ€»æ˜¯ * ä»¥å¾ªç¯çš„å½¢å¼å‡ºç°ï¼Œå°±åƒè¿™æ ·ï¼š</span><br><span class="hljs-comment">     * &lt;pre&gt;</span><br><span class="hljs-comment">     *     synchronized (obj) &#123;</span><br><span class="hljs-comment">     *         while (&amp;lt;condition does not hold&amp;gt;)</span><br><span class="hljs-comment">     *             obj.wait(timeout);</span><br><span class="hljs-comment">     *         ... // Perform action appropriate to condition</span><br><span class="hljs-comment">     *     &#125;</span><br><span class="hljs-comment">     * &lt;/pre&gt;</span><br><span class="hljs-comment">     * ï¼ˆæœ‰å…³æ­¤ä¸»é¢˜çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…Doug Leaçš„â€œConcurrent Programming in Java (Second  * Edition)â€ï¼ˆAddison-Wesleyï¼Œ2000ï¼‰ä¸­çš„ç¬¬3.2.3èŠ‚ï¼Œæˆ–Joshua Blochçš„â€œEffective Java  * Programming Language Guideâ€ï¼ˆAddison-Wesleyï¼Œ2001ï¼‰ä¸­çš„ç¬¬50é¡¹ï¼‰ã€‚</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * å¦‚æœå½“å‰çº¿ç¨‹æ˜¯æ™®é€šçš„java.lang.thread#interruptï¼ˆï¼‰ï¼Œåœ¨ç­‰å¾…ä¹‹å‰æˆ–ç­‰å¾…æœŸé—´è¢«ä»»ä½•çº¿ç¨‹ä¸­æ–­ï¼Œåˆ™æŠ›å‡º * InterruptedExceptionã€‚åœ¨è¿˜åŸæ­¤å¯¹è±¡çš„é”å®šçŠ¶æ€ï¼ˆå¦‚ä¸Šæ‰€è¿°ï¼‰ä¹‹å‰ï¼Œä¸ä¼šå¼•å‘æ­¤å¼‚å¸¸ã€‚</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * è¯·æ³¨æ„ï¼Œwaitæ–¹æ³•åœ¨å°†å½“å‰çº¿ç¨‹æ”¾å…¥æ­¤å¯¹è±¡çš„ç­‰å¾…é›†ä¸­æ—¶ï¼Œä»…è§£é”æ­¤å¯¹è±¡ï¼›åœ¨çº¿ç¨‹ç­‰å¾…æœŸé—´ï¼Œå¯ä»¥åŒæ­¥å½“å‰çº¿ç¨‹çš„ * ä»»ä½•å…¶ä»–å¯¹è±¡å°†ä¿æŒé”å®šçŠ¶æ€ã€‚</span><br><span class="hljs-comment">     * </span><br><span class="hljs-comment">     * æ­¤æ–¹æ³•åªèƒ½ç”±ä½œä¸ºæ­¤å¯¹è±¡ç›‘è§†å™¨æ‰€æœ‰è€…çš„çº¿ç¨‹è°ƒç”¨ã€‚æœ‰å…³çº¿ç¨‹æˆä¸ºç›‘è§†å™¨æ‰€æœ‰è€…çš„æ–¹å¼çš„æè¿°ï¼Œè¯·å‚è§notifyæ–¹ * æ³•ã€‚</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>      timeout   the maximum time to wait in milliseconds.</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span>  IllegalArgumentException      if the value of timeout is</span><br><span class="hljs-comment">     *               negative.</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span>  IllegalMonitorStateException  if the current thread is not</span><br><span class="hljs-comment">     *               the owner of the object&#x27;s monitor.</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span>  InterruptedException if any thread interrupted the</span><br><span class="hljs-comment">     *             current thread before or while the current thread</span><br><span class="hljs-comment">     *             was waiting for a notification.  The &lt;i&gt;interrupted</span><br><span class="hljs-comment">     *             status&lt;/i&gt; of the current thread is cleared when</span><br><span class="hljs-comment">     *             this exception is thrown.</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>        java.lang.Object#notify()</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>        java.lang.Object#notifyAll()</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title">wait</span><span class="hljs-params">(<span class="hljs-keyword">long</span> timeout)</span> <span class="hljs-keyword">throws</span> InterruptedException</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * Causes the current thread to wait until another thread invokes the</span><br><span class="hljs-comment">     * &#123;<span class="hljs-doctag">@link</span> java.lang.Object#notify()&#125; method or the</span><br><span class="hljs-comment">     * &#123;<span class="hljs-doctag">@link</span> java.lang.Object#notifyAll()&#125; method for this object, or</span><br><span class="hljs-comment">     * some other thread interrupts the current thread, or a certain</span><br><span class="hljs-comment">     * amount of real time has elapsed.</span><br><span class="hljs-comment">     * &lt;p&gt;</span><br><span class="hljs-comment">     * This method is similar to the &#123;<span class="hljs-doctag">@code</span> wait&#125; method of one</span><br><span class="hljs-comment">     * argument, but it allows finer control over the amount of time to</span><br><span class="hljs-comment">     * wait for a notification before giving up. The amount of real time,</span><br><span class="hljs-comment">     * measured in nanoseconds, is given by:</span><br><span class="hljs-comment">     * &lt;blockquote&gt;</span><br><span class="hljs-comment">     * &lt;pre&gt;</span><br><span class="hljs-comment">     * 1000000*timeout+nanos&lt;/pre&gt;&lt;/blockquote&gt;</span><br><span class="hljs-comment">     * &lt;p&gt;</span><br><span class="hljs-comment">     * In all other respects, this method does the same thing as the</span><br><span class="hljs-comment">     * method &#123;<span class="hljs-doctag">@link</span> #wait(long)&#125; of one argument. In particular,</span><br><span class="hljs-comment">     * &#123;<span class="hljs-doctag">@code</span> wait(0, 0)&#125; means the same thing as &#123;<span class="hljs-doctag">@code</span> wait(0)&#125;.</span><br><span class="hljs-comment">     * &lt;p&gt;</span><br><span class="hljs-comment">     * The current thread must own this object&#x27;s monitor. The thread</span><br><span class="hljs-comment">     * releases ownership of this monitor and waits until either of the</span><br><span class="hljs-comment">     * following two conditions has occurred:</span><br><span class="hljs-comment">     * &lt;ul&gt;</span><br><span class="hljs-comment">     * &lt;li&gt;Another thread notifies threads waiting on this object&#x27;s monitor</span><br><span class="hljs-comment">     *     to wake up either through a call to the &#123;<span class="hljs-doctag">@code</span> notify&#125; method</span><br><span class="hljs-comment">     *     or the &#123;<span class="hljs-doctag">@code</span> notifyAll&#125; method.</span><br><span class="hljs-comment">     * &lt;li&gt;The timeout period, specified by &#123;<span class="hljs-doctag">@code</span> timeout&#125;</span><br><span class="hljs-comment">     *     milliseconds plus &#123;<span class="hljs-doctag">@code</span> nanos&#125; nanoseconds arguments, has</span><br><span class="hljs-comment">     *     elapsed.</span><br><span class="hljs-comment">     * &lt;/ul&gt;</span><br><span class="hljs-comment">     * &lt;p&gt;</span><br><span class="hljs-comment">     * The thread then waits until it can re-obtain ownership of the</span><br><span class="hljs-comment">     * monitor and resumes execution.</span><br><span class="hljs-comment">     * &lt;p&gt;</span><br><span class="hljs-comment">     * As in the one argument version, interrupts and spurious wakeups are</span><br><span class="hljs-comment">     * possible, and this method should always be used in a loop:</span><br><span class="hljs-comment">     * &lt;pre&gt;</span><br><span class="hljs-comment">     *     synchronized (obj) &#123;</span><br><span class="hljs-comment">     *         while (&amp;lt;condition does not hold&amp;gt;)</span><br><span class="hljs-comment">     *             obj.wait(timeout, nanos);</span><br><span class="hljs-comment">     *         ... // Perform action appropriate to condition</span><br><span class="hljs-comment">     *     &#125;</span><br><span class="hljs-comment">     * &lt;/pre&gt;</span><br><span class="hljs-comment">     * This method should only be called by a thread that is the owner</span><br><span class="hljs-comment">     * of this object&#x27;s monitor. See the &#123;<span class="hljs-doctag">@code</span> notify&#125; method for a</span><br><span class="hljs-comment">     * description of the ways in which a thread can become the owner of</span><br><span class="hljs-comment">     * a monitor.</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>      timeout   the maximum time to wait in milliseconds.</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>      nanos      additional time, in nanoseconds range</span><br><span class="hljs-comment">     *                       0-999999.</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span>  IllegalArgumentException      if the value of timeout is</span><br><span class="hljs-comment">     *                      negative or the value of nanos is</span><br><span class="hljs-comment">     *                      not in the range 0-999999.</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span>  IllegalMonitorStateException  if the current thread is not</span><br><span class="hljs-comment">     *               the owner of this object&#x27;s monitor.</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span>  InterruptedException if any thread interrupted the</span><br><span class="hljs-comment">     *             current thread before or while the current thread</span><br><span class="hljs-comment">     *             was waiting for a notification.  The &lt;i&gt;interrupted</span><br><span class="hljs-comment">     *             status&lt;/i&gt; of the current thread is cleared when</span><br><span class="hljs-comment">     *             this exception is thrown.</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title">wait</span><span class="hljs-params">(<span class="hljs-keyword">long</span> timeout, <span class="hljs-keyword">int</span> nanos)</span> <span class="hljs-keyword">throws</span> InterruptedException </span>&#123;<br>        <span class="hljs-keyword">if</span> (timeout &lt; <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IllegalArgumentException(<span class="hljs-string">&quot;timeout value is negative&quot;</span>);<br>        &#125;<br><br>        <span class="hljs-keyword">if</span> (nanos &lt; <span class="hljs-number">0</span> || nanos &gt; <span class="hljs-number">999999</span>) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IllegalArgumentException(<br>                                <span class="hljs-string">&quot;nanosecond timeout value out of range&quot;</span>);<br>        &#125;<br><br>        <span class="hljs-keyword">if</span> (nanos &gt; <span class="hljs-number">0</span>) &#123;<br>            timeout++;<br>        &#125;<br><br>        wait(timeout);<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * Causes the current thread to wait until another thread invokes the</span><br><span class="hljs-comment">     * &#123;<span class="hljs-doctag">@link</span> java.lang.Object#notify()&#125; method or the</span><br><span class="hljs-comment">     * &#123;<span class="hljs-doctag">@link</span> java.lang.Object#notifyAll()&#125; method for this object.</span><br><span class="hljs-comment">     * In other words, this method behaves exactly as if it simply</span><br><span class="hljs-comment">     * performs the call &#123;<span class="hljs-doctag">@code</span> wait(0)&#125;.</span><br><span class="hljs-comment">     * &lt;p&gt;</span><br><span class="hljs-comment">     * The current thread must own this object&#x27;s monitor. The thread</span><br><span class="hljs-comment">     * releases ownership of this monitor and waits until another thread</span><br><span class="hljs-comment">     * notifies threads waiting on this object&#x27;s monitor to wake up</span><br><span class="hljs-comment">     * either through a call to the &#123;<span class="hljs-doctag">@code</span> notify&#125; method or the</span><br><span class="hljs-comment">     * &#123;<span class="hljs-doctag">@code</span> notifyAll&#125; method. The thread then waits until it can</span><br><span class="hljs-comment">     * re-obtain ownership of the monitor and resumes execution.</span><br><span class="hljs-comment">     * &lt;p&gt;</span><br><span class="hljs-comment">     * As in the one argument version, interrupts and spurious wakeups are</span><br><span class="hljs-comment">     * possible, and this method should always be used in a loop:</span><br><span class="hljs-comment">     * &lt;pre&gt;</span><br><span class="hljs-comment">     *     synchronized (obj) &#123;</span><br><span class="hljs-comment">     *         while (&amp;lt;condition does not hold&amp;gt;)</span><br><span class="hljs-comment">     *             obj.wait();</span><br><span class="hljs-comment">     *         ... // Perform action appropriate to condition</span><br><span class="hljs-comment">     *     &#125;</span><br><span class="hljs-comment">     * &lt;/pre&gt;</span><br><span class="hljs-comment">     * This method should only be called by a thread that is the owner</span><br><span class="hljs-comment">     * of this object&#x27;s monitor. See the &#123;<span class="hljs-doctag">@code</span> notify&#125; method for a</span><br><span class="hljs-comment">     * description of the ways in which a thread can become the owner of</span><br><span class="hljs-comment">     * a monitor.</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span>  IllegalMonitorStateException  if the current thread is not</span><br><span class="hljs-comment">     *               the owner of the object&#x27;s monitor.</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span>  InterruptedException if any thread interrupted the</span><br><span class="hljs-comment">     *             current thread before or while the current thread</span><br><span class="hljs-comment">     *             was waiting for a notification.  The &lt;i&gt;interrupted</span><br><span class="hljs-comment">     *             status&lt;/i&gt; of the current thread is cleared when</span><br><span class="hljs-comment">     *             this exception is thrown.</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>        java.lang.Object#notify()</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@see</span>        java.lang.Object#notifyAll()</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title">wait</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> InterruptedException </span>&#123;<br>        wait(<span class="hljs-number">0</span>);<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * å½“åƒåœ¾å›æ”¶ç¡®å®šä¸å†æœ‰å¯¹å¯¹è±¡çš„å¼•ç”¨æ—¶ï¼Œç”±å¯¹è±¡ä¸Šçš„åƒåœ¾å›æ”¶å™¨è°ƒç”¨ã€‚å­ç±»é‡å†™finalizeæ–¹æ³•ä»¥é‡Šæ”¾ç³»ç»Ÿèµ„æºæˆ–æ‰§  * è¡Œå…¶ä»–æ¸…ç†ã€‚</span><br><span class="hljs-comment">     * </span><br><span class="hljs-comment">     * finalizeçš„ä¸€èˆ¬çº¦å®šæ˜¯ï¼Œå½“Javaè™šæ‹Ÿæœºç¡®å®šä¸å†æœ‰ä»»ä½•æ–¹æ³•å¯ä»¥è®©ä»»ä½•å°šæœªç»ˆæ­¢çš„çº¿ç¨‹è®¿é—®è¯¥å¯¹è±¡æ—¶ï¼Œè°ƒç”¨ * finalizeï¼Œé™¤éæ˜¯ç”±æŸä¸ªå…¶ä»–å¯¹è±¡æˆ–ç±»çš„finalizeæ‰€é‡‡å–çš„å‡†å¤‡å¥½è¿›è¡Œfinalizeçš„æ“ä½œå¯¼è‡´çš„ã€‚finalizeæ–¹   * æ³•å¯ä»¥æ‰§è¡Œä»»ä½•æ“ä½œï¼ŒåŒ…æ‹¬ä½¿æ­¤å¯¹è±¡å¯¹å…¶ä»–çº¿ç¨‹å†æ¬¡å¯ç”¨ï¼›ä½†æ˜¯finalizeçš„é€šå¸¸ç›®çš„æ˜¯åœ¨å¯¹è±¡è¢«ä¸å¯æ’¤é”€åœ°ä¸¢å¼ƒä¹‹* å‰æ‰§è¡Œæ¸…ç†æ“ä½œã€‚ä¾‹å¦‚ï¼Œè¡¨ç¤ºè¾“å…¥/è¾“å‡ºè¿æ¥çš„å¯¹è±¡çš„finalizeæ–¹æ³•å¯èƒ½ä¼šæ‰§è¡Œæ˜¾å¼I/Oäº‹åŠ¡ï¼Œä»¥ä¾¿åœ¨æ°¸ä¹…ä¸¢å¼ƒè¯¥  * å¯¹è±¡ä¹‹å‰æ–­å¼€è¿æ¥ã€‚</span><br><span class="hljs-comment">     * </span><br><span class="hljs-comment">     * ç±»å¯¹è±¡çš„finalizeæ–¹æ³•ä¸æ‰§è¡Œä»»ä½•ç‰¹æ®Šæ“ä½œï¼›å®ƒåªæ˜¯æ­£å¸¸è¿”å›ã€‚å¯¹è±¡çš„å­ç±»å¯ä»¥é‡å†™æ­¤å®šä¹‰ã€‚</span><br><span class="hljs-comment">     * </span><br><span class="hljs-comment">     * Javaç¼–ç¨‹è¯­è¨€ä¸ä¿è¯å“ªä¸ªçº¿ç¨‹å°†è°ƒç”¨ä»»ä½•ç»™å®šå¯¹è±¡çš„finalizeæ–¹æ³•ã€‚ä½†æ˜¯ï¼Œå¯ä»¥ä¿è¯è°ƒç”¨finalizeçš„çº¿ç¨‹åœ¨è°ƒ  * ç”¨finalizeæ—¶ä¸ä¼šæŒæœ‰ä»»ä½•ç”¨æˆ·å¯è§çš„åŒæ­¥é”ã€‚å¦‚æœfinalizeæ–¹æ³•å¼•å‘æœªæ•è·çš„å¼‚å¸¸ï¼Œåˆ™å°†å¿½ç•¥è¯¥å¼‚å¸¸ï¼Œå¹¶ç»ˆæ­¢  * è¯¥å¯¹è±¡çš„finalizeã€‚</span><br><span class="hljs-comment">     * </span><br><span class="hljs-comment">     * ä¸ºå¯¹è±¡è°ƒç”¨finalizeæ–¹æ³•åï¼Œåœ¨Javaè™šæ‹Ÿæœºå†æ¬¡ç¡®å®šä¸å†æœ‰ä»»ä½•æ–¹æ³•å¯ä»¥é€šè¿‡ä»»ä½•å°šæœªç»ˆæ­¢çš„çº¿ç¨‹è®¿é—®è¯¥å¯¹è±¡ä¹‹   * å‰ï¼Œä¸ä¼šé‡‡å–è¿›ä¸€æ­¥çš„æ“ä½œï¼ŒåŒ…æ‹¬å…¶ä»–å·²å‡†å¤‡å¥½è¿›è¡Œfinalizeçš„å¯¹è±¡æˆ–ç±»å¯èƒ½é‡‡å–çš„æ“ä½œï¼Œæ­¤æ—¶å¯¹è±¡å¯èƒ½ä¼šè¢«ä¸¢ * å¼ƒã€‚</span><br><span class="hljs-comment">     * </span><br><span class="hljs-comment">     * å¯¹äºä»»ä½•ç»™å®šçš„å¯¹è±¡ï¼ŒJavaè™šæ‹Ÿæœºéƒ½ä¸ä¼šå¤šæ¬¡è°ƒç”¨finalizeæ–¹æ³•ã€‚</span><br><span class="hljs-comment">     * </span><br><span class="hljs-comment">     * finalizeæ–¹æ³•å¼•å‘çš„ä»»ä½•å¼‚å¸¸éƒ½ä¼šå¯¼è‡´ç»ˆæ­¢æ­¤å¯¹è±¡çš„finalizeï¼Œä½†æ˜¯äº§ç”Ÿçš„å¼‚å¸¸å°†è¢«å¿½ç•¥ã€‚</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> Throwable the &#123;<span class="hljs-doctag">@code</span> Exception&#125; raised by this method</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@see</span> java.lang.ref.WeakReference</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@see</span> java.lang.ref.PhantomReference</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@jls</span> 12.6 Finalization of Class Instances</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">finalize</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Throwable </span>&#123; &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h1 id="equals-æ–¹æ³•ä¸-çš„åŒºåˆ«"><a href="#equals-æ–¹æ³•ä¸-çš„åŒºåˆ«" class="headerlink" title="equals()æ–¹æ³•ä¸ == çš„åŒºåˆ«"></a>equals()æ–¹æ³•ä¸ == çš„åŒºåˆ«</h1><p>å‡¡æ˜¯newå‡ºæ¥çš„å¯¹è±¡éƒ½ä¼šåœ¨å †ä¸­å¼€è¾Ÿæ–°çš„ç©ºé—´, å æ®ä¸åŒåœ°å€å€¼çš„ç©ºé—´ã€‚</p><p>åŸæ¥Objectä¸­å®šä¹‰çš„equalsæ–¹æ³•çš„æ¯”è¾ƒè§„åˆ™å°±æ˜¯ ==  ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦å†™è‡ªå·±çš„è§„åˆ™ï¼Œåˆ™éœ€è¦åœ¨æˆ‘ä»¬è‡ªå·±çš„ç±»ä¸­è¦†å†™Objectçš„equalsæ–¹æ³•ï¼Œåœ¨æ–¹æ³•é‡Œé¢å†™æˆ‘ä»¬è‡ªå·±çš„è§„åˆ™ã€‚</p><p>ç›¸ç­‰ : a ä¼ ç»Ÿçš„ç†è§£ä¸€èˆ¬éƒ½æ˜¯æ•°å­—å€¼æ˜¯å¦ç›¸ç­‰;    b åœ¨ç¨‹åºä¸­ä»»ä½•ä¸œè¥¿éƒ½æ˜¯æ•°æ®,éƒ½ä¼šæ¯”è¾ƒæ˜¯å¦ç›¸ç­‰</p><ul><li><p><code>==</code> æ¯”è¾ƒçš„ç›¸ç­‰ï¼š</p><ul><li>åŸºæœ¬æ•°æ®ç±»å‹:  æ¯”è¾ƒçš„å°±æ˜¯å€¼æ˜¯å¦ç›¸ç­‰ï¼›</li><li>å¼•ç”¨æ•°æ®ç±»å‹:  æ¯”è¾ƒçš„æ˜¯å¯¹è±¡çš„åœ°å€æ˜¯å¦ä¸€æ ·ï¼›<u>å¦‚æœè¦æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„å†…å®¹æ˜¯å¦ç›¸åŒï¼Œæ­¤ç§æ¯”è¾ƒä¸åœ¨é€‚ç”¨</u></li></ul></li><li><p><code>equals()</code> æ¯”è¾ƒçš„ç›¸ç­‰ ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">equals</span><span class="hljs-params">(Object obj)</span> </span>&#123;<br><span class="hljs-keyword">return</span> (<span class="hljs-keyword">this</span> == obj);<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>åŸºæœ¬æ•°æ®ç±»å‹ï¼šä¸èƒ½å¤Ÿä½¿ç”¨ï¼åŸºæœ¬æ•°æ®ç±»å‹ä¸æ˜¯å¯¹è±¡ï¼Œä¸èƒ½å¤Ÿè°ƒç”¨Objectä¸­çš„æ–¹æ³•ï¼›</li><li>å¼•ç”¨æ•°æ®ç±»å‹ï¼šåœ¨Objectçš„æºç ä¸­å®šä¹‰çš„å°±æ˜¯ä½¿ç”¨==è¿›è¡Œæ¯”è¾ƒï¼Œé€šè¿‡é‡å†™equalsæ–¹æ³•è¿›è¡Œå¯¹è±¡å†…å®¹çš„æ¯”è¾ƒã€‚</li></ul></li></ul><p>å¦‚æœæˆ‘ä»¬æ²¡æœ‰å»è¦†å†™è¿‡equalsæ–¹æ³•è€Œæ˜¯ç›´æ¥è°ƒç”¨åˆ°äº†Objectä¸­çš„æ­¤æ–¹æ³•ï¼Œé‚£ä¹ˆç»“æœå’Œ==æ¯”è¾ƒå¼•ç”¨æ•°æ®ç±»å‹çš„ç»“æœä¸€æ ·çš„ï¼›</p><p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬æ¯”è¾ƒå¯¹è±¡éƒ½æ˜¯é€šè¿‡å¯¹è±¡çš„å­—æ®µå€¼è¿›è¡Œæ¯”è¾ƒï¼ˆä¸€èˆ¬æ¯”è¾ƒå¯¹è±¡çš„åœ°å€æ²¡æœ‰å¤šå¤§ç”¨å¤„ï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¼šç»å¸¸è¦†å†™Objectä¸­çš„equalsæ–¹æ³•ï¼ŒæŠŠè‡ªå·±çš„è§„åˆ™å†™åœ¨æ–¹æ³•é‡Œé¢ã€‚</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title></title>
    <link href="/2021/02/15/MyBatis-%E5%9F%BA%E7%A1%80/"/>
    <url>/2021/02/15/MyBatis-%E5%9F%BA%E7%A1%80/</url>
    
    <content type="html"><![CDATA[<h2 id="MyBatisæŒä¹…å±‚æ¡†æ¶"><a href="#MyBatisæŒä¹…å±‚æ¡†æ¶" class="headerlink" title="MyBatisæŒä¹…å±‚æ¡†æ¶"></a>MyBatisæŒä¹…å±‚æ¡†æ¶</h2><p>MyBatisæ¡†æ¶ï¼Œæ­¤æ¡†æ¶çš„ä¸»è¦ä½œç”¨å°±æ˜¯æ›´åŠ ä¾¿æ·çš„æ“ä½œæ•°æ®åº“ï¼Œæ¯”å¦‚ï¼šMyBatisåšæŸ¥è¯¢æ—¶å¯ä»¥å°†ResultSetå¯¹è±¡è¿”å›çš„æ•°æ®è®°å½•è‡ªåŠ¨å°è£…è¿›Entityå®ä½“ç±»æˆ–Listä¸­ã€å¯ä»¥æŠŠSQLè¯­å¥é…ç½®åˆ°XMLæ–‡ä»¶ä¸­ï¼Œä¹Ÿå°±æ˜¯å°†SQLè¯­å¥ä¸*.javaæ–‡ä»¶è¿›è¡Œåˆ†ç¦»ï¼Œæœ‰åˆ©äºä»£ç çš„åæœŸç»´æŠ¤ï¼Œä¹Ÿä½¿ä»£ç çš„åˆ†å±‚æ›´åŠ æ˜ç¡®ã€‚</p><p>MyBatisä¸æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æŠ€æœ¯ï¼Œå®ƒå†…éƒ¨çš„æ“ä½œæ•°æ®åº“çš„åŸç†è¿˜æ˜¯ä½¿ç”¨JDBCï¼Œå…¶åªæ˜¯å¯¹JDBCè¿›è¡Œäº†è½»é‡çº§çš„å°è£…ï¼Œä¾¿äºç¨‹åºå‘˜æ›´åŠ æ–¹ä¾¿çš„è®¾è®¡ä»£ç å»æ“ä½œæ•°æ®åº“ã€‚</p><p>MyBatisæ˜¯ä¸€ä¸ªâ€œæŒä¹…åŒ–ORMæ¡†æ¶â€ï¼ŒæŒä¹…åŒ–æ˜¯æŒ‡å†…å­˜ä¸­çš„æ•°æ®ä¿å­˜åˆ°ç¡¬ç›˜ä¸Šã€‚ORMï¼ˆObject Relation Mappingï¼‰å¯¹è±¡å…³ç³»æ˜ å°„ï¼Œä»ä¸¤æ–¹é¢ä»‹ç»ï¼š</p><ol><li>å¤§çš„æ–¹é¢ï¼Œä¸€ä¸ªç±»å¯¹åº”è¡¨ä¸­çš„ä¸€è¡Œï¼›</li><li>å°çš„æ–¹é¢ï¼Œä¸€ä¸ªç±»ä¸­çš„å±æ€§å¯¹åº”ä¸€ä¸ªè¡¨ä¸­çš„åˆ—ã€‚</li></ol><p>ä¹Ÿå°±æ˜¯è¯´åœ¨ä½¿ç”¨MyBatisæ¡†æ¶æ—¶ï¼Œå¯ä»¥å°†Javaç±»è½¬åŒ–æˆæ•°æ®è¡¨ä¸­çš„è®°å½•ï¼Œæˆ–è€…å°†æ•°æ®è¡¨ä¸­çš„è®°å½•è½¬åŒ–æˆJavaä¸­çš„ç±»ï¼Œå†…éƒ¨æŠ€æœ¯çš„åŸç†å…¶å®å°±æ˜¯JDBC+Javaåå°„æŠ€æœ¯ã€‚</p><p>MyBatis æ˜¯ä¸€ä¸ªæ”¯æŒæ™®é€š SQLæŸ¥è¯¢ã€å­˜å‚¨è¿‡ç¨‹å’Œé«˜çº§æ˜ å°„çš„<code>ä¼˜ç§€çš„æŒä¹…å±‚æ¡†æ¶</code>ã€‚MyBatis æ¶ˆé™¤äº†å‡ ä¹æ‰€æœ‰çš„ JDBCä»£ç  å’Œ æ‰‹å·¥è®¾ç½®å‚æ•° ï¼Œä»¥åŠç»“æœé›†çš„æ£€ç´¢ã€‚</p><p>MyBatis ä½¿ç”¨ç®€å•çš„ <code>XML</code> æˆ– <code>æ³¨è§£</code> ç”¨äºé…ç½®å’ŒåŸå§‹æ˜ å°„ï¼Œå°†<code>æ¥å£</code>å’Œ <code>Java çš„POJOs</code>ï¼ˆPlain Old Java Objectsï¼Œæ™®é€šçš„ Javaå¯¹è±¡ï¼‰æ˜ å°„æˆæ•°æ®åº“ä¸­çš„è®°å½•ã€‚MyBatisä¸èƒ½è‡ªåŠ¨åˆ›å»ºè¡¨ï¼Œå¦‚æœèƒ½å¤Ÿè‡ªåŠ¨å»ºè¡¨ï¼Œå¿…é¡»è‡ªå·±äº‹å…ˆå‡†å¤‡å¥½å»ºè¡¨çš„SQLè¯­å¥ã€‚</p><h3 id="1ã€å¯¹è±¡å…³ç³»æ˜ å°„ORMï¼ˆObject-Relation-Mappingï¼‰æ¦‚è¿°"><a href="#1ã€å¯¹è±¡å…³ç³»æ˜ å°„ORMï¼ˆObject-Relation-Mappingï¼‰æ¦‚è¿°" class="headerlink" title="1ã€å¯¹è±¡å…³ç³»æ˜ å°„ORMï¼ˆObject Relation Mappingï¼‰æ¦‚è¿°"></a>1ã€å¯¹è±¡å…³ç³»æ˜ å°„ORMï¼ˆObject Relation Mappingï¼‰æ¦‚è¿°</h3><h4 id="1-1ã€æµè¡Œçš„ORMæ¡†æ¶"><a href="#1-1ã€æµè¡Œçš„ORMæ¡†æ¶" class="headerlink" title="1.1ã€æµè¡Œçš„ORMæ¡†æ¶"></a>1.1ã€æµè¡Œçš„ORMæ¡†æ¶</h4><p>1ã€<strong>JPA</strong>ï¼šæœ¬èº«æ˜¯ä¸€ç§<strong>ORMè§„èŒƒ</strong>ï¼Œä¸æ˜¯ORMæ¡†æ¶ï¼Œ<strong>ç”±å„å¤§ORMæ¡†æ¶æä¾›å®ç°</strong>ã€‚</p><p>2ã€<strong>Hibernate</strong>ï¼š<code>ç›®å‰æœ€æµè¡Œçš„ORMæ¡†æ¶</code>ï¼Œè®¾è®¡çµå·§ï¼Œæ€§èƒ½ä¸€èˆ¬ï¼ˆå¹¶ä¸”å¼€å‘äººå‘˜ä¸èƒ½å¤Ÿå¾ˆå¥½çš„æ§åˆ¶æ€§èƒ½ï¼‰ï¼Œæ–‡æ¡£ä¸°å¯Œã€‚Hibernateæ˜¯ä¸€ä¸ªå®Œæ•´çš„ORMæ¡†æ¶ï¼Œå¸¸è§„CRUDæˆ‘ä»¬ä¸éœ€è¦å†™ä¸€å¥SQL ( å®Œå…¨è‡ªåŠ¨æ“ä½œ ) ï¼›</p><p>3ã€<strong>MyBatis</strong>ï¼šåŸæœ¬æ˜¯apacheçš„ä¸€ä¸ªå¼€æºé¡¹ç›®iBatisï¼Œæä¾›çš„æŒä¹…å±‚æ¡†æ¶åŒ…æ‹¬SQL Mapså’ŒDaoã€‚MyBatis å¹¶ä¸æ˜¯ä¸€ä¸ªå®Œæ•´çš„ORMæ¡†æ¶ï¼ˆæˆ–ç§°â€œåŠè‡ªåŠ¨â€çš„ORMæ¡†æ¶ï¼‰ï¼Œå› ä¸ºæˆ‘ä»¬è¿˜éœ€è¦è‡ªå·±å»å†™å…¨éƒ¨SQLï¼Œå¼€å‘äººå‘˜ç›´æ¥ç¼–å†™SQL(æ›´å¥½çµæ´»)ã€‚</p><h4 id="1-2ã€JDBCæ“ä½œæ•°æ®åº“çš„ç¼ºé™·"><a href="#1-2ã€JDBCæ“ä½œæ•°æ®åº“çš„ç¼ºé™·" class="headerlink" title="1.2ã€JDBCæ“ä½œæ•°æ®åº“çš„ç¼ºé™·"></a>1.2ã€JDBCæ“ä½œæ•°æ®åº“çš„ç¼ºé™·</h4><p>é¦–å…ˆï¼Œé€šè¿‡jdbcä¹Ÿèƒ½å®ç°<strong>å¯¹è±¡å®ä½“</strong>å’Œ<strong>æ•°æ®åº“å…³ç³»çš„æ˜ å°„</strong>ã€‚é‚£å°±æ˜¯é‡‡ç”¨ç¡¬ç¼–ç æ–¹å¼ï¼Œä¸ºæ¯ä¸€ç§å¯èƒ½çš„æ•°æ®åº“è®¿é—®æ“ä½œæä¾›å•ç‹¬çš„æ–¹æ³•ï¼Œ ä¹Ÿå°±æ˜¯å„ç§Dao (UserDaoã€DeptDaoç­‰)ã€‚</p><p>æœ€å¤§çš„ç¼ºç‚¹å°±æ˜¯ï¼š</p><ol><li>SQLå†™åœ¨JAVAä»£ç ä¸­ï¼Œåœ¨ä¿®æ”¹SQLæŸ¥è¯¢è¯­å¥æ—¶ï¼Œå°±è¿å¸¦ç€ä¿®æ”¹äº†Javaä»£ç ï¼Œéœ€è¦é‡æ–°ç¼–è¯‘ï¼›</li><li>æœ‰å¾ˆå¤šé‡å¤æ€§çš„æ“ä½œï¼ˆæ¯”å¦‚è·å–è¿æ¥ï¼Œé‡Šæ”¾èµ„æºç­‰ï¼‰ã€‚</li></ol><h4 id="1-3ã€ORMæ¡†æ¶çš„æ“ä½œæ•°æ®åº“å…³ç³»æ–¹å¼æœ‰è®¸å¤šç§ï¼Œå¸¸ç”¨çš„æœ‰ä¸¤ç§"><a href="#1-3ã€ORMæ¡†æ¶çš„æ“ä½œæ•°æ®åº“å…³ç³»æ–¹å¼æœ‰è®¸å¤šç§ï¼Œå¸¸ç”¨çš„æœ‰ä¸¤ç§" class="headerlink" title="1.3ã€ORMæ¡†æ¶çš„æ“ä½œæ•°æ®åº“å…³ç³»æ–¹å¼æœ‰è®¸å¤šç§ï¼Œå¸¸ç”¨çš„æœ‰ä¸¤ç§"></a>1.3ã€ORMæ¡†æ¶çš„æ“ä½œæ•°æ®åº“å…³ç³»æ–¹å¼æœ‰è®¸å¤šç§ï¼Œå¸¸ç”¨çš„æœ‰ä¸¤ç§</h4><h5 id="1ã€SQLæ“ä½œæ–¹å¼-å¯¹JDBCè¿›è¡Œè½»é‡çº§å°è£…çš„MyBatisæ¡†æ¶å®ç°"><a href="#1ã€SQLæ“ä½œæ–¹å¼-å¯¹JDBCè¿›è¡Œè½»é‡çº§å°è£…çš„MyBatisæ¡†æ¶å®ç°" class="headerlink" title="1ã€SQLæ“ä½œæ–¹å¼ ( å¯¹JDBCè¿›è¡Œè½»é‡çº§å°è£…çš„MyBatisæ¡†æ¶å®ç° )"></a>1ã€SQLæ“ä½œæ–¹å¼ ( å¯¹JDBCè¿›è¡Œè½»é‡çº§å°è£…çš„MyBatisæ¡†æ¶å®ç° )</h5><p>é…ç½®åˆ°é…ç½®æ–‡ä»¶ä¸­ï¼Œé€šè¿‡ä¸åŒä¸­å®Œæˆå¯¹è±¡å®ä½“å’Œæ•°æ®åº“å…³ç³»ç›¸äº’è½¬æ¢çš„æ“ä½œã€‚</p><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;cn.kongwei_liao.domain.ProductMapper&quot;</span>&gt;</span></span><br><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;get&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;long&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;cn.kongwei_liao.domain.Product&quot;</span>&gt;</span></span><br><span class="xml">select * from product where id= #</span><span class="hljs-template-variable">&#123;id&#125;</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></span><br><span class="xml"></span><br><span class="xml"><span class="hljs-comment">&lt;!--</span></span><br><span class="xml">select : è¿™ä¸ªæ ‡ç­¾é‡Œå†™æŸ¥è¯¢è¯­å¥</span><br><span class="xml">id : ç”¨æ¥å”¯ä¸€ç¡®å®šè¿™æ¡æŸ¥è¯¢è¯­å¥</span><br><span class="xml">æœªæ¥ç”¨è¿™æ¡æŸ¥è¯¢æ—¶ç”±ï¼šnamespace + . + id çš„æ–¹å¼å”¯ä¸€ç¡®å®šè¿™æ¡æŸ¥è¯¢</span><br><span class="xml">å¦‚ï¼Œcn.kongwei_liao.domain.ProductMapper.get</span><br><span class="xml">parameterType : ä¼ å…¥çš„å‚æ•°ç±»å‹ï¼ˆlongï¼šLongã€_longï¼šlongï¼‰ï¼Œå…·ä½“æ•°æ®åº“å­—æ®µç±»å‹å¯¹åº”çš„é«˜çº§ç¨‹åºè¯­è¨€ç±»å‹å‚è§æ–‡æ¡£</span><br><span class="xml">resultType : ç»“æœç±»å‹ï¼ˆç¬¬ä¸€æ¡æ•°æ®è¿”å›çš„å¯¹è±¡ç±»å‹ï¼‰ï¼Œä¸€å®šæ˜¯cn.kongwei_liao.domain.Productè¿™æ ·çš„å…¨é™å®šç±»å</span><br><span class="xml">--&gt;</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h5 id="2ã€å®Œæ•´æ“ä½œ-JPAã€Hibenateæ¡†æ¶å®ç°æ–¹å¼"><a href="#2ã€å®Œæ•´æ“ä½œ-JPAã€Hibenateæ¡†æ¶å®ç°æ–¹å¼" class="headerlink" title="2ã€å®Œæ•´æ“ä½œ(JPAã€Hibenateæ¡†æ¶å®ç°æ–¹å¼)"></a>2ã€å®Œæ•´æ“ä½œ(JPAã€Hibenateæ¡†æ¶å®ç°æ–¹å¼)</h5><p>ç›´æ¥æ˜ å°„çš„æ˜¯å¯¹è±¡å®ä½“å’Œæ•°æ®åº“å…³ç³»æ˜ å°„ã€‚æ“ä½œæ•°æ®åº“å…³ç³»ï¼Œä¸ç”¨å†™SQLç”±æ¡†æ¶è‡ªå·±ç”Ÿæˆã€‚</p><p><img src="/2021/02/15/MyBatis-%E5%9F%BA%E7%A1%80/image-20191203144714812.png" alt="image-20191203144714812"></p><h5 id="3ã€MyBatisä¸Hibenateå¯¹æ¯”"><a href="#3ã€MyBatisä¸Hibenateå¯¹æ¯”" class="headerlink" title="3ã€MyBatisä¸Hibenateå¯¹æ¯”"></a>3ã€MyBatisä¸Hibenateå¯¹æ¯”</h5><p>MyBatisä½¿ç”¨SQLè¯­å¥å¯¹æ•°æ®åº“è¿›è¡Œæ“ä½œçš„ï¼Œæ‰€ä»¥å•ç‹¬å¯¹SQLè¯­å¥è¿›è¡Œä¼˜åŒ–ï¼Œä»¥æé«˜æŸ¥è¯¢æ•ˆç‡ï¼Œè¿™ç‚¹ä¸Hibernateæ¡†æ¶ç›¸æ¯”æœ‰å¾ˆå¤§ä¼˜åŠ¿ï¼Œç°é˜¶æ®µå¤§éƒ¨åˆ†çš„è½¯ä»¶ä¼ä¸šæ­£é€æ­¥ç”¨MyBatisæ›¿æ¢æ‰Hibernateã€‚</p><p>æ›´ä¸¥æ ¼çš„æ¥è®²ï¼ŒMyBatisæ˜¯ä¸€ç§â€œåŠè‡ªåŠ¨åŒ–â€çš„ORMæ¡†æ¶ï¼Œåº”è¯¥ç®—ä½œSQLæ˜ å°„æ¡†æ¶ï¼ˆSQL mapper frameworkï¼‰ã€‚å› ä¸ºMyBatisæ“ä½œæ•°æ®åº“æ—¶è¿˜æ˜¯ä½¿ç”¨çš„åŸå§‹çš„SQLè¯­å¥ï¼Œè¿™äº›è¯­å¥ä»è¦ç”±ç¨‹åºå‘˜æ¥è‡ªè¡Œè®¾è®¡ã€‚åœ¨ä½¿ç”¨ä¸Šå’Œå…¨è‡ªåŠ¨çš„ORMæ¡†æ¶Hibernateæœ‰ç€éå¸¸å¤§çš„åŒºåˆ«ï¼ŒMyBatisæ˜¯ä»¥SQLè¯­å¥ä¸ºæ˜ å°„åŸºç¡€ï¼Œè€ŒHibernateæ˜¯å½»åº•çš„åŸºäºå®ä½“ç±»ä¸è¡¨è¿›è¡Œæ˜ å°„ã€‚æ­£æ˜¯ç”±äºMyBatisçš„åŠè‡ªåŠ¨åŒ–ç‰¹æ€§ï¼Œå¯ä»¥å°†SQLè¯­å¥çµæ´»å¤šå˜çš„ç‰¹æ€§èå…¥åˆ°é¡¹ç›®çš„å¼€å‘ä¸­ã€‚</p><p>ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚</p><h4 id="1-4ã€ORMæ¡†æ¶å·¥ä½œåŸç†"><a href="#1-4ã€ORMæ¡†æ¶å·¥ä½œåŸç†" class="headerlink" title="1.4ã€ORMæ¡†æ¶å·¥ä½œåŸç†"></a>1.4ã€ORMæ¡†æ¶å·¥ä½œåŸç†</h4><p>1ã€ä»¥ä¸€å®šçš„æ˜ å°„æ–¹å¼ï¼ŒæŠŠå®ä½“æ¨¡å‹å’Œæ•°æ®åº“å…³ç³»çš„æ˜ å°„ï¼›</p><p>2ã€ORMæ¡†æ¶å¯åŠ¨æ—¶åŠ è½½è¿™äº›æ˜ å°„å’Œæ•°æ®åº“é…ç½®æ–‡ä»¶ï¼›</p><p>3ã€ORMé€šè¿‡å¯¹æœ€åŸç”ŸJDBCçš„å°è£…æä¾›æ›´åŠ ä¾¿åˆ©çš„æ“ä½œAPIï¼›</p><p>4ã€Daoé€šè¿‡ORMæä¾›çš„ä¾¿æ·APIä»¥å¯¹è±¡çš„æ–¹å¼æ“ä½œæ•°æ®åº“å…³ç³»ã€‚</p><p><img src="/2021/02/15/MyBatis-%E5%9F%BA%E7%A1%80/image-20191203144903564.png" alt="image-20191203144903564"></p><h3 id="3ã€MyBatiså®ŒæˆCRUDå…¥é—¨ä¸¾ä¾‹"><a href="#3ã€MyBatiså®ŒæˆCRUDå…¥é—¨ä¸¾ä¾‹" class="headerlink" title="3ã€MyBatiså®ŒæˆCRUDå…¥é—¨ä¸¾ä¾‹"></a>3ã€MyBatiså®ŒæˆCRUDå…¥é—¨ä¸¾ä¾‹</h3><p>å‡†å¤‡æ­¥éª¤ï¼š<strong>å¯¼åŒ…</strong> â€“&gt; <strong>å»ºè¡¨</strong> â€“&gt; <strong>domain(JavaBean)</strong> â€“&gt; <strong>å‡†å¤‡Daoå±‚(CRUD)</strong> â€“&gt; <strong>æµ‹è¯•åŠä¸šåŠ¡ä»£ç ä¸­ä½¿ç”¨</strong></p><p>æ³¨æ„ï¼šæˆ‘ä»¬è¦å¼•å“ªäº›åŒ…?</p><ol><li>ä¸€å®šè¦å¼•å…¥JDBCé©±åŠ¨åŒ…ï¼›</li><li>å¯¼å…¥MyBatisçš„æ ¸å¿ƒåŒ…ï¼›</li><li>å¯¼å…¥MyBatisçš„ä¾èµ–åŒ…ã€‚</li></ol><h4 id="3-1ã€å‡†å¤‡å·¥ä½œ"><a href="#3-1ã€å‡†å¤‡å·¥ä½œ" class="headerlink" title="3.1ã€å‡†å¤‡å·¥ä½œ"></a>3.1ã€å‡†å¤‡å·¥ä½œ</h4><p>1ã€åˆ›å»ºJavaé¡¹ç›®</p><p>2ã€å¯¼å…¥æ‰€éœ€çš„JaråŒ…</p><p>MyBatisæ˜¯ä¸€ä¸ªæŒä¹…å±‚æ¡†æ¶ï¼Œåœ¨Javaä¸­æ¡†æ¶å°±æ˜¯ä¸€ç»„Javaç±»æœ€åæ‰“æˆJaråŒ…ã€‚æ‰€æœ‰ä½¿ç”¨çš„Javaæ¡†æ¶ï¼Œä½¿ç”¨å‰éƒ½è¦å…ˆå¯¼å…¥ç›¸åº” çš„JaråŒ…ã€‚åœ¨å¯¼å…¥jaråŒ…ä¹‹å‰ï¼Œæˆ‘ä»¬å¾—å…ˆè¯´ä¸€ä¸‹ï¼ŒMyBatisæ˜¯æ“ä½œæ•°æ®åº“çš„æ¡†æ¶ã€‚è¦æ“ä½œæ•°æ®åº“ï¼Œè¿˜éœ€è¦å¯¼å…¥ç›¸åº”çš„æ•°æ®åº“é©±åŠ¨åŒ…ã€‚æ³¨ï¼šæ•°æ®åº“é©±åŠ¨åŒ…å°±æ˜¯å„å¤§æ•°æ®åº“å‚å•†æ ¹æ®JDBCè§„èŒƒå®ç°çš„jaråŒ…ã€‚</p><p>ä¸‹å›¾ä¸ºæˆ‘ä»¬ä½¿ç”¨MyBatisè¦å¯¼å…¥çš„åŒ…ï¼š</p><p><img src="/2021/02/15/MyBatis-%E5%9F%BA%E7%A1%80/image-20191203145413871.png" alt="image-20191203145413871"></p><p>å¦‚ç”¨MavenåŒ…ç®¡ç†å·¥å…·ç®¡ç†é¡¹ç›®ï¼Œå¯åœ¨é…ç½®æ–‡ä»¶ä¸­åŠ å…¥å¦‚ä¸‹ä¾èµ–ï¼š</p><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span></span><br><span class="xml">    <span class="hljs-comment">&lt;!-- mybatisç‰ˆæœ¬å· --&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">mybatis.version</span>&gt;</span>3.2.8<span class="hljs-tag">&lt;/<span class="hljs-name">mybatis.version</span>&gt;</span></span><br><br><span class="xml">    <span class="hljs-comment">&lt;!-- mysqlé©±åŠ¨ç‰ˆæœ¬å· --&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">mysql-driver.version</span>&gt;</span>5.1.29<span class="hljs-tag">&lt;/<span class="hljs-name">mysql-driver.version</span>&gt;</span></span><br><br><span class="xml">    <span class="hljs-comment">&lt;!-- log4jæ—¥å¿—åŒ…ç‰ˆæœ¬å· --&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">slf4j.version</span>&gt;</span>1.7.18<span class="hljs-tag">&lt;/<span class="hljs-name">slf4j.version</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">log4j.version</span>&gt;</span>1.2.17<span class="hljs-tag">&lt;/<span class="hljs-name">log4j.version</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span></span><br><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span></span><br><span class="xml">    <span class="hljs-comment">&lt;!-- æ·»åŠ mybatisä¾èµ– --&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$</span><span class="hljs-template-variable">&#123;mybatis.version&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>asm<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>asm<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>commons-logging<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>commons-logging<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.javassist<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>javassist<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.18.1-GA<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.commons<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>commons-io<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.3.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></span><br><br><span class="xml">    <span class="hljs-comment">&lt;!-- æ·»åŠ mysqlé©±åŠ¨ä¾èµ– --&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$</span><span class="hljs-template-variable">&#123;mysql-driver.version&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></span><br><br><span class="xml">    <span class="hljs-comment">&lt;!-- æ·»åŠ æ—¥å¿—ç›¸å…³jaråŒ… --&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>log4j<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>log4j<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$</span><span class="hljs-template-variable">&#123;log4j.version&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.slf4j<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>slf4j-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$</span><span class="hljs-template-variable">&#123;slf4j.version&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.slf4j<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>slf4j-log4j12<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$</span><span class="hljs-template-variable">&#123;slf4j.version&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.12<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p>3ã€å‡†å¤‡ç›¸åº”çš„æ•°æ®åº“è¡¨</p><p>ç°åœ¨ç›´æ¥å¼•å…¥æˆ‘ä»¬å‡†å¤‡å¥½çš„productè¡¨å³å¯ï¼š</p><p><img src="/2021/02/15/MyBatis-%E5%9F%BA%E7%A1%80/image-20191203150151545.png" alt="image-20191203150151545"></p><p>4ã€å‡†å¤‡å®ä½“ç±»JavaBeanï¼ˆdomainå±‚ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆæ˜¯ç”¨domainè¿™ä¸ªè¯ï¼‰</p><p>åˆ›å»ºä¸€ä¸ªProductå¯¹è±¡ï¼Œå¯¹è±¡å±æ€§ å’Œæ•°æ®åº“çš„ è¡¨ä¸­å­—æ®µ å¯¹åº”ï¼›</p><p>æ³¨ï¼šç±»çš„åç§°  å’Œ  ç±»å‹ éƒ½å’Œæˆ‘ä»¬çš„  Productè¡¨ç›¸å¯¹åº”åŒ¹é…ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Product</span> </span>&#123;<br><span class="hljs-keyword">private</span>Long id;<span class="hljs-comment">//å•†å“åç§°</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">String</span> productName;<span class="hljs-comment">//å“ç‰Œ</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">String</span> brand;<span class="hljs-comment">//ä¾›åº”å•†</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">String</span> supplier;<span class="hljs-comment">//é›¶å”®ä»·</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">Double</span> salePrice;<span class="hljs-comment">//è¿›ä»·</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">Double</span> costPrice;<span class="hljs-comment">//æŠ˜æ‰£æ¯”ä¾‹</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">Double</span> cutoff;<span class="hljs-comment">//å•†å“åˆ†ç±»ç¼–å·</span><br><span class="hljs-keyword">private</span> Long dir_id; <span class="hljs-comment">//æä¾›getterä¸setter...</span><br>&#125;<br></code></pre></td></tr></table></figure><p>5ã€Daoå±‚å‡†å¤‡</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * å•†å“çš„æŒä¹…æ“ä½œ</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">IProductDao</span> &#123;<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">save</span>(<span class="hljs-params">Product p</span>)</span>;<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">update</span>(<span class="hljs-params">Product p</span>)</span>;<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">delete</span>(<span class="hljs-params">Long id</span>)</span>;<br><span class="hljs-function">Product <span class="hljs-title">get</span>(<span class="hljs-params">Long id</span>)</span>;<br><span class="hljs-function">List&lt;Product&gt; <span class="hljs-title">getAll</span>(<span class="hljs-params"></span>)</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="3-2ã€MyBatisæ ¸å¿ƒé…ç½®æ–‡ä»¶"><a href="#3-2ã€MyBatisæ ¸å¿ƒé…ç½®æ–‡ä»¶" class="headerlink" title="3.2ã€MyBatisæ ¸å¿ƒé…ç½®æ–‡ä»¶"></a>3.2ã€MyBatisæ ¸å¿ƒé…ç½®æ–‡ä»¶</h4><p>å…¥é—¨å¼€å§‹ï¼Œä»‹ç»äº†MyBatisä¹‹åï¼Œå°±åœ¨æå‰çŸ¥é“MyBatisæœ‰ä¸€ä¸ªæ ¸å¿ƒå¯¹è±¡ï¼š<code>SqlSessionFactory</code>ï¼Œæ¥ä¸‹æ¥è¦æƒ³æ–¹è®¾æ³•æ‹¿åˆ°è¿™ä¸ªæ ¸å¿ƒå¯¹è±¡ã€‚é‚£æˆ‘ä»¬å¦‚ä½•æ‹¿åˆ°è¿™ä¸ªSqlSessionFactoryå¯¹è±¡ï¼Ÿ</p><ol><li>æˆ‘ä»¬éœ€è¦å‡†å¤‡ä¸€ä¸ªæ ¸å¿ƒçš„xmlæ–‡ä»¶ï¼›</li><li>æ‹¿åˆ°SqlSessionFactoryä¹‹å‰éœ€è¦è¯»å–æ ¸å¿ƒçš„xmlé…ç½®æ–‡ä»¶ï¼›</li><li>éœ€è¦æ„é€ è€…(SqlSessionFactoryBuilder)æ¥åˆ›å»ºå®ƒã€‚</li></ol><h5 id="1ã€å‡†å¤‡æ ¸å¿ƒçš„xmlæ–‡ä»¶ï¼š"><a href="#1ã€å‡†å¤‡æ ¸å¿ƒçš„xmlæ–‡ä»¶ï¼š" class="headerlink" title="1ã€å‡†å¤‡æ ¸å¿ƒçš„xmlæ–‡ä»¶ï¼š"></a>1ã€å‡†å¤‡æ ¸å¿ƒçš„xmlæ–‡ä»¶ï¼š</h5><p>æ•°æ®åº“è¿æ¥é…ç½®ï¼Œæ˜ å°„æ–‡ä»¶ä½ç½®çš„é…ç½®ç­‰ã€‚</p><p>èµ„æºæ–‡ä»¶åŠ ä¸‹é¢åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œå‘½åä¸ºMyBatis-Config.xml</p><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">configuration</span> <span class="hljs-meta-keyword">PUBLIC</span> <span class="hljs-meta-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="xml">        &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;</span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span></span><br><span class="xml">    <span class="hljs-comment">&lt;!-- å¼•å…¥ä¸€ä¸ªå¤–éƒ¨çš„Propertiesæ–‡ä»¶ï¼Œå¦‚db.propertiesæ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶ä¿å­˜æ•°æ®åº“è¿æ¥å±æ€§ï¼ŒåŒ…æ‹¬ï¼šé©±åŠ¨ã€æ•°æ®åº“åœ°å€ã€æ•°æ®åº“è´¦å·åŠå¯†ç  --&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">properties</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;db.properties&quot;</span> /&gt;</span></span><br><span class="xml">    </span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">typeAliases</span>&gt;</span></span><br><span class="xml">    <span class="hljs-comment">&lt;!-- alias:å–çš„åˆ«å --&gt;</span></span><br><span class="xml">    <span class="hljs-comment">&lt;!-- typeï¼šè¿™ä¸ªåˆ«åæ‰€å¯¹åº”çš„Javaç±» ï¼šåˆ«åä½¿ç”¨çš„æ—¶å€™ä¸å¤§å°å†™æ— å…³ --&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">typeAlias</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;cn.kongwei-liao.domain.Department&quot;</span> <span class="hljs-attr">alias</span>=<span class="hljs-string">&quot;Department&quot;</span>/&gt;</span></span><br><span class="xml">        </span><br><span class="xml">        <span class="hljs-comment">&lt;!-- å°†ä¸€ä¸ªåŒ…ä¸‹é¢çš„æ‰€æœ‰ç±»éƒ½å–ä¸Šåˆ«å:&lt;package name=&quot;cn.kongwei-liao.domain&quot; /&gt; --&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">package</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;cn.kongwei-liao.domain&quot;</span>/&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">typeAliases</span>&gt;</span></span><br><span class="xml">    </span><br><br><span class="xml">    <span class="hljs-comment">&lt;!-- ç¯å¢ƒä»¬ (å¾ˆå¤šç¯å¢ƒçš„æ„æ€)default:é»˜è®¤ä½¿ç”¨å“ªä¸€ä¸ªç¯å¢ƒ(å¿…éœ€å¯¹åº”ä¸€ä¸ªç¯å¢ƒçš„id) --&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">environments</span> <span class="hljs-attr">default</span>=<span class="hljs-string">&quot;development&quot;</span>&gt;</span></span><br><span class="xml">        <span class="hljs-comment">&lt;!-- ä¸€ä¸ªç¯å¢ƒä¸€ä¸ªid:ä¸ºè¿™ä¸ªç¯å¢ƒå–å”¯ä¸€ä¸€ä¸ªidåç§° --&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">environment</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;development&quot;</span>&gt;</span></span><br><span class="xml">            <span class="hljs-comment">&lt;!-- äº‹åŠ¡ç®¡ç† type:JDBC(æ”¯æŒäº‹åŠ¡)/MANAGED(ä»€ä¹ˆéƒ½ä¸åš) --&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">transactionManager</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;JDBC&quot;</span> /&gt;</span></span><br><span class="xml">            <span class="hljs-comment">&lt;!-- æ•°æ®æº, è¿æ¥æ±  type(POOLED):MyBatisè‡ªå¸¦çš„è¿æ¥æ±  --&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">dataSource</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="xml">                <span class="hljs-comment">&lt;!-- è¿æ¥æ•°æ®åº“çš„å‚æ•° --&gt;</span></span><br><span class="xml">                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driver&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$</span></span></span><span class="hljs-template-variable">&#123;db.driver&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span> /&gt;</span></span><br><span class="xml">                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$</span></span></span><span class="hljs-template-variable">&#123;db.url&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span> /&gt;</span></span><br><span class="xml">                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$</span></span></span><span class="hljs-template-variable">&#123;db.username&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span> /&gt;</span></span><br><span class="xml">                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$</span></span></span><span class="hljs-template-variable">&#123;db.password&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span> /&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">dataSource</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">environment</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">environments</span>&gt;</span></span><br><span class="xml">    <span class="hljs-comment">&lt;!-- è¿™ä¸ªmappersä»£è¡¨çš„æ˜¯ç›¸åº”çš„ORMæ˜ å°„æ–‡ä»¶ï¼Œæ·»åŠ æ˜ å°„æ–‡ä»¶çš„ä½ç½® --&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">mappers</span>&gt;</span></span><br><span class="xml">        <span class="hljs-comment">&lt;!-- æ·»åŠ æ˜ å°„æ–‡ä»¶ï¼š1.å‰é¢ä¸æ·»åŠ /ï¼Œè¡¨ç¤ºç›¸å¯¹è·¯å¾„;2.ä½¿ç”¨çš„æ–‡ä»¶è·¯å¾„/,ä¸æ˜¯åŒ…è·¯å¾„. --&gt;</span></span><br><span class="xml">        <span class="hljs-comment">&lt;!-- å•è¡¨crud --&gt;</span></span><br><span class="xml">        <span class="hljs-comment">&lt;!-- &lt;mapper resource=&quot;cn/kongwei_liao/domain/ProductMapper.xml&quot; /&gt; --&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;cn/kongwei_liao/domain/ProductMapper.xml&quot;</span>/&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">mappers</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p>Eclipseé…ç½®MyBatis-Config.xmlæç¤ºä¿¡æ¯ï¼ŒIDEAæ²¡æ•´ç†ä¸çŸ¥é“å’‹æï¼Ÿï¼Ÿ</p><p><img src="/2021/02/15/MyBatis-%E5%9F%BA%E7%A1%80/image-20191203152252675.png" alt="image-20191203152252675"></p><h5 id="2ã€MyBatisæ ¸å¿ƒé…ç½®æ ‡ç­¾çš„ä¸€ä¸ªç®€å•ä»‹ç»ï¼š"><a href="#2ã€MyBatisæ ¸å¿ƒé…ç½®æ ‡ç­¾çš„ä¸€ä¸ªç®€å•ä»‹ç»ï¼š" class="headerlink" title="2ã€MyBatisæ ¸å¿ƒé…ç½®æ ‡ç­¾çš„ä¸€ä¸ªç®€å•ä»‹ç»ï¼š"></a>2ã€MyBatisæ ¸å¿ƒé…ç½®æ ‡ç­¾çš„ä¸€ä¸ªç®€å•ä»‹ç»ï¼š</h5><p>configurationï¼šé…ç½®æ–‡ä»¶æ ¹æ ‡ç­¾ï¼›</p><p>environmentsï¼šé‡Œé¢ä¸¤ä¸ªå†…å®¹(<code>transactionManager</code>, <code>dataSource</code> )ï¼›</p><p>dataSource : <code>driver</code>, <code>url</code>, <code>username</code>, <code>password</code>(è¿æ¥æ•°æ®åº“çš„æœ€å°å•ä½)ï¼›</p><p>mappersï¼šmapperæ˜ å°„æ–‡ä»¶åœ°å€ã€‚</p><h5 id="3ã€æŠ½å–æ•°æ®åº“ä¿¡æ¯-åˆ°-db-propertiesé…ç½®æ–‡ä»¶"><a href="#3ã€æŠ½å–æ•°æ®åº“ä¿¡æ¯-åˆ°-db-propertiesé…ç½®æ–‡ä»¶" class="headerlink" title="3ã€æŠ½å–æ•°æ®åº“ä¿¡æ¯ åˆ° db.propertiesé…ç½®æ–‡ä»¶"></a>3ã€æŠ½å–æ•°æ®åº“ä¿¡æ¯ åˆ° db.propertiesé…ç½®æ–‡ä»¶</h5><p>å…³äºæ•°æ®åº“è¿æ¥çš„ä¿¡æ¯å·²ç»åœ¨é…ç½®æ–‡ä»¶(XML)ä¸­ï¼Œä½†æ˜¯æ›´å¤šæ—¶å€™ï¼Œæˆ‘ä»¬è¿˜æ˜¯ä¼šæŠŠé…ç½®æ–‡ä»¶çš„ä¿¡æ¯æ”¾åˆ°db.propertiesä¸­ã€‚(ç”±äºpropertiesçš„ç»“æ„ç®€å•ï¼Œä¾¿äºä¿®æ”¹ï¼Œè€Œè¿™ä¸ªæ–‡ä»¶åªæ”¾æ•°æ®åº“çš„è¿æ¥ä¿¡æ¯ä¹Ÿæ›´å¥½çš„ä½“ç°äº†èŒè´£åˆ†ç¦»)ã€‚</p><p>å…¶å®ï¼Œåœ¨å®˜æ–¹æ–‡æ¡£çš„æ ¸å¿ƒæ–‡ä»¶é…ç½®ï¼Œå°±æ˜¯ç›´æ¥ä½¿ç”¨çš„æ¨èçš„propertiesæ–¹å¼ã€‚</p><p>åªéœ€è¦æˆ‘ä»¬åšå¦‚ä¸‹ä¿®æ”¹å³å¯ï¼š</p><p>èµ„æºæ–‡ä»¶å¤¹æ–°å»º***.propertiesæ–‡ä»¶ï¼Œå¦‚<strong>db.properties</strong></p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">db.driver</span>=com.mysql.jdbc.Driver<br><span class="hljs-attr">db.url</span>=jdbc:mysql://localhost:<span class="hljs-number">3306</span>/test<br><span class="hljs-attr">db.username</span>=root<br><span class="hljs-attr">db.password</span>=root<br></code></pre></td></tr></table></figure><p>MyBatis-Config.xmlæ–‡ä»¶ä¿®æ”¹ï¼šç”¨${â€¦}ç¬¦å·å¼•å…¥db.propertiesä¸­å‚æ•°</p><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span></span><br><span class="xml"><span class="hljs-comment">&lt;!-- å¼•å…¥Propertiesæ–‡ä»¶ --&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">properties</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;db.properties&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">environments</span> <span class="hljs-attr">default</span>=<span class="hljs-string">&quot;development&quot;</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">environment</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;development&quot;</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">transactionManager</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;JDBC&quot;</span> /&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dataSource</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="xml"><span class="hljs-comment">&lt;!-- æ ¹æ®keyæ‹¿åˆ°propertiesä¸­çš„valueå€¼ --&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driver&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$</span></span></span><span class="hljs-template-variable">&#123;db.driver&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span> /&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$</span></span></span><span class="hljs-template-variable">&#123;db.url&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span> /&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$</span></span></span><span class="hljs-template-variable">&#123;db.username&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span> /&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$</span></span></span><span class="hljs-template-variable">&#123;db.password&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span> /&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">dataSource</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">environment</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">environments</span>&gt;</span> </span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h5 id="4ã€æ˜ å°„æ–‡ä»¶ï¼šå¯¹è±¡ä¸å…³ç³»çš„æ˜ å°„"><a href="#4ã€æ˜ å°„æ–‡ä»¶ï¼šå¯¹è±¡ä¸å…³ç³»çš„æ˜ å°„" class="headerlink" title="4ã€æ˜ å°„æ–‡ä»¶ï¼šå¯¹è±¡ä¸å…³ç³»çš„æ˜ å°„"></a>4ã€æ˜ å°„æ–‡ä»¶ï¼šå¯¹è±¡ä¸å…³ç³»çš„æ˜ å°„</h5><p>MyBatisæ˜¯ä¸€ä¸ªORMæ˜ å°„æ¡†æ¶ï¼Œè¯·é—®ORMä½“ç°åœ¨å“ª?</p><p>æ ¸å¿ƒæ–‡ä»¶ä¸­æœ‰ä¸€ä¸ªmappers,å®ƒæŒ‡å‘äº†ä¸€ä¸ªæ˜ å°„æ–‡ä»¶ã€‚æ˜ å°„æ–‡ä»¶åœ¨å“ªï¼Ÿ</p><p>ä¸æ˜¯è¯´å¥½çš„MyBatisè¦å†™SQLè¯­å¥ä¹ˆï¼ŸSQLè¯­å¥åˆåœ¨å“ªé‡Œï¼Ÿ</p><p>å¦‚æœç›´æ¥å†™xmlæ˜¯æ²¡æœ‰æç¤ºäº†ï¼Œåœ¨xmlæ–‡ä»¶ä¸­åŠ ä¸Šçº¦æŸçš„æ—¶å€™ï¼Œxmlå°±ä¼šæœ‰æç¤ºã€‚</p><p>è€Œç°åœ¨ä½¿ç”¨çš„çº¦æŸæ˜¯é€šè¿‡ç½‘ç»œè®¿é—®ï¼Œåœ¨Eclipseä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°ç›¸åº”çš„çº¦æŸæ–‡ä»¶ï¼Œç„¶åé…ç½®åˆ°è‡ªå·±æœ¬åœ°å³å¯ã€‚</p><p>ç›´æ¥æ‰¾åˆ°æˆ‘ä»¬æ–‡æ¡£ä¸­çš„æ¢ç©¶å·²æ˜ å°„çš„SQLè¯­å¥,åœ¨è¿™é‡Œï¼Œæˆ‘å°±å¯ä»¥çœ‹åˆ°ä¸€æ®µxml(å¦‚ä¸‹å›¾)ï¼Œè¿™ä¸ªxmlå°±æ˜¯å’±ä»¬éœ€è¦çš„æ˜ å°„æ–‡ä»¶ï¼Œå®ƒå°±å¯ä»¥ä½“ç°å‡ºORMï¼Œå¹¶ä¸”åœ¨è¿™é‡Œé¢ï¼Œä¹Ÿå¯ä»¥æ„‰å¿«çš„å†™sqlè¯­å¥äº†ã€‚</p><p><img src="/2021/02/15/MyBatis-%E5%9F%BA%E7%A1%80/image-20191203155111232.png" alt="image-20191203155111232"></p><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥çœ‹æ‡‚ä¸€äº›é…ç½®çš„æ„æ€ï¼Œä½†æ˜¯ä¹Ÿæœ‰ä¸€äº›ä¸œè¥¿ä¸æ˜¯å¾ˆæ˜ç™½ã€‚åœ¨ä¸‹é¢çš„å®ä¾‹ä¸­ï¼Œæˆ‘å·²ç»å¯¹æ¯ä¸€å¥é…ç½®å‡†å¤‡å¥½äº†ç›¸åº”çš„è§£é‡Šï¼š</p><p>cn/kongwei_liao/domain/ProductMapper.xmlæ–‡ä»¶å¦‚ä¸‹ï¼š</p><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">mapper</span> <span class="hljs-meta-keyword">PUBLIC</span> <span class="hljs-meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="xml">        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span><br><br><span class="xml"><span class="hljs-comment">&lt;!--å…¬å…±æŸ¥è¯¢å¥ï¼šå¯ç”±includeæ ‡ç­¾å¼•å…¥--&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">sql</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;rootsql&quot;</span>&gt;</span></span><br><span class="xml">select * from product</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">sql</span>&gt;</span></span><br><span class="xml"><span class="hljs-comment">&lt;!-------------------------------------------------------------------------------------&gt;</span></span><br><span class="xml"><span class="hljs-comment">&lt;!--</span></span><br><span class="xml">è¿™ä¸ªMapperçš„ä¸»è¦åŠŸèƒ½å°±æ˜¯å†™sql</span><br><span class="xml">mapper:æ ¹</span><br><span class="xml">namespace:å‘½ä»¤ç©ºé—´ (ç”¨æ¥ç¡®å®šå”¯ä¸€) ä»¥å‰è¿™ä¸ªæ˜¯å¯ä»¥ä¸åŠ çš„,ç°åœ¨å¿…éœ€åŠ </span><br><span class="xml">namespaceçš„å€¼ï¼Œè§„åˆ™çš„ï¼šæ˜ å°„æ–‡ä»¶XxxMapper.xmlæ‰€åœ¨çš„åŒ…+domainç±»å+Mapper</span><br><span class="xml"> --&gt;</span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;cn.kongwei_liao.domain.ProductMapper&quot;</span>&gt;</span><span class="hljs-comment">&lt;!-- å›ºå®šä¹¦å†™æ–¹æ³• --&gt;</span></span><br><span class="xml">    <span class="hljs-comment">&lt;!--</span></span><br><span class="xml">        select : è¿™é‡Œé¢å†™æŸ¥è¯¢è¯­å¥</span><br><span class="xml">        id:ç”¨æ¥ç¡®å®šè¿™æ¡sqlè¯­å¥çš„å”¯ä¸€</span><br><span class="xml">               ä»¥åæˆ‘ä»¬ç¡®å®šå”¯ä¸€,ä¹Ÿå°±æ˜¯æ‰¾sqlè¯­å¥ : namespace + . + id</span><br><span class="xml">             ä¾‹: cn.kongwei_liao.domain.ProductMapper.get</span><br><span class="xml">        parameterType : ä¼ å…¥çš„å‚æ•°ç±»å‹  long:å¤§Long  _long:å°long (å…·ä½“çš„å¯¹åº”è¯·å‚è§æ–‡æ¡£)</span><br><span class="xml">        resultType : ç»“æœç±»å‹(ç¬¬ä¸€æ¡æ•°æ®è¿”å›çš„å¯¹è±¡ç±»å‹) è‡ªå·±çš„å¯¹è±¡ï¼Œä¸€å®šæ˜¯cn.kongwei_liao.domain.Productè¿™æ ·çš„å…¨é™å®šç±»å</span><br><span class="xml">     --&gt;</span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getAll&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;cn.kongwei_liao.domain.Product&quot;</span>&gt;</span></span><br><span class="xml"><span class="hljs-comment">&lt;!--include refid=&quot;rootsql&quot;&gt;&lt;/include--&gt;</span></span><br><span class="xml"><span class="hljs-comment">&lt;!--OR--&gt;</span></span><br><span class="xml">select * from product</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getById&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;long&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;cn.kongwei_liao.domain.Product&quot;</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">include</span> <span class="hljs-attr">refid</span>=<span class="hljs-string">&quot;rootsql&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span></span><br><span class="xml">where id = #</span><span class="hljs-template-variable">&#123;id&#125;</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;selectByNameAndId&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;employee_department_role&quot;</span> &gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">include</span> <span class="hljs-attr">refid</span>=<span class="hljs-string">&quot;rootsql&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span></span><br><span class="xml">where  productname=#</span><span class="hljs-template-variable">&#123;0&#125;</span><span class="xml"> and productid=#</span><span class="hljs-template-variable">&#123;1&#125;</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;searchByProductName&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;string&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;cn.kongwei_liao.domain.Product&quot;</span></span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">include</span> <span class="hljs-attr">refid</span>=<span class="hljs-string">&quot;rootsql&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span></span><br><span class="xml">where productname like &#x27;%$</span><span class="hljs-template-variable">&#123;productname&#125;</span><span class="xml">%&#x27;</span><br><span class="xml"><span class="hljs-comment">&lt;!-- è‹¥æ–¹æ³•ä¼ å‚åäº$or#</span></span><span class="hljs-template-variable">&#123;&#125;</span><span class="xml"><span class="hljs-comment">ä¸­çš„ä¸åŒ¹é…ï¼Œåœ¨æ–¹æ³•çš„ä¼ å…¥çš„å‚æ•°ç±»å‹å‰åŠ @Param(&quot;$or#</span></span><span class="hljs-template-variable">&#123;&#125;</span><span class="xml"><span class="hljs-comment">ä¸­çš„åå­—&quot;) --&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;save&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;cn.kongwei_liao.domain.Product&quot;</span>&gt;</span></span><br><span class="xml">insert into product(productName,salePrice,costPrice,cutoff,supplier,brand,dir_id)</span><br><span class="xml">values</span><br><span class="xml">(#</span><span class="hljs-template-variable">&#123;productName&#125;</span><span class="xml">,#</span><span class="hljs-template-variable">&#123;salePrice&#125;</span><span class="xml">,#</span><span class="hljs-template-variable">&#123;costPrice&#125;</span><span class="xml">,#</span><span class="hljs-template-variable">&#123;cutoff&#125;</span><span class="xml">,#</span><span class="hljs-template-variable">&#123;supplier&#125;</span><span class="xml">,#</span><span class="hljs-template-variable">&#123;brand&#125;</span><span class="xml">,#</span><span class="hljs-template-variable">&#123;dir_id&#125;</span><span class="xml">)</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">update</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;update&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;cn.kongwei_liao.domain.Product&quot;</span>&gt;</span></span><br><span class="xml">update product set productName=#</span><span class="hljs-template-variable">&#123;productName&#125;</span><span class="xml">,salePrice=#</span><span class="hljs-template-variable">&#123;salePrice&#125;</span><span class="xml">,costPrice=#</span><span class="hljs-template-variable">&#123;costPrice&#125;</span><span class="xml">,</span><br><span class="xml">cutoff=#</span><span class="hljs-template-variable">&#123;cutoff&#125;</span><span class="xml">,supplier=#</span><span class="hljs-template-variable">&#123;supplier&#125;</span><span class="xml">,brand=#</span><span class="hljs-template-variable">&#123;brand&#125;</span><span class="xml">,dir_id=#</span><span class="hljs-template-variable">&#123;dir_id&#125;</span><br><span class="xml">where id=#</span><span class="hljs-template-variable">&#123;id&#125;</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">update</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">delete</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;delete&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;Long&quot;</span>&gt;</span></span><br><span class="xml">delete from product where id=#</span><span class="hljs-template-variable">&#123;id&#125;</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">delete</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h4 id="3-3ã€ä¸Šè¿°æ˜ å°„é…ç½®æ–‡ä»¶çš„è§„èŒƒåŠæ³¨æ„äº‹é¡¹"><a href="#3-3ã€ä¸Šè¿°æ˜ å°„é…ç½®æ–‡ä»¶çš„è§„èŒƒåŠæ³¨æ„äº‹é¡¹" class="headerlink" title="3.3ã€ä¸Šè¿°æ˜ å°„é…ç½®æ–‡ä»¶çš„è§„èŒƒåŠæ³¨æ„äº‹é¡¹"></a>3.3ã€ä¸Šè¿°æ˜ å°„é…ç½®æ–‡ä»¶çš„è§„èŒƒåŠæ³¨æ„äº‹é¡¹</h4><p>â‘  æˆ‘ä»¬çš„æ˜ å°„æ–‡ä»¶ä¸€èˆ¬æƒ…å†µä¸‹æ˜¯æ”¾åœ¨ <code>resourcesç±»å‹ç›®å½•ä¸‹</code> å’Œå®ƒå¯¹åº”çš„<code>domain</code>åœ¨åŒä¸€ä¸ªå±‚çº§ï¼›</p><p>â‘¡ è¿™ä¸ªæ˜ å°„æ–‡ä»¶çš„åç§°ä¸€èˆ¬å«åš XxxMapper.xml (Xxxä»£è¡¨çš„æ˜¯å®ä½“ç±»åç§°)ï¼›</p><p>â‘¢ namespaceçš„åç§°ä¸ºäº†ç¡®å®šå”¯ä¸€æ€§ï¼Œåº”æŒ‰æ¨èè¦æ±‚å–åï¼š</p><p>â€‹    å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªç±»ï¼š</p><p>â€‹        cn.kongwei_liao.domain.Product / cn.kongwei_liao.domain.Student</p><p>â€‹    é‚£è¿™é‡Œå–ååº”è¯¥æ˜¯ï¼š</p><p>â€‹        cn.kongwei_liao.domain.ProductMapper / cn.kongwei_liao.domain.StudentMapper</p><p>â‘£ é™¤äº†MyBatisæ”¯æŒçš„ç±»å‹ï¼Œå…¶å®ƒçš„ç±»å‹éƒ½é€šé€šä½¿ç”¨<code>å…¨é™å®šå</code> ï¼›</p><p>â‘¤ å¦‚æœå°†æ˜ å°„æ–‡ä»¶ä¸å®ä½“ç±»æ”¾åœ¨ä¸€èµ·ï¼Œè¿è¡Œæ—¶ä¼šé‡åˆ°è®¿é—®ä¸åˆ°è¿™ä¸ªæ˜ å°„æ–‡ä»¶èµ„æºé”™è¯¯ï¼ˆæ”¾åˆ°resourcesç±»å‹ç›®å½•ä¸‹å°±ä¸ä¼šå‡ºç°è¿™ç§æƒ…å†µï¼‰ï¼Œå¯èƒ½æ˜¯å› ä¸ºèµ„æºè·¯å¾„ä¸å¯è¾¾ï¼Œå¯åœ¨pom.xmlæ–‡ä»¶ä¸­æ·»åŠ ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- buildæ ‡ç­¾å†… --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">resources</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/main/resources<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.properties<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.xml<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">filtering</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">filtering</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span><span class="hljs-comment">&lt;!--å…³é”®é…ç½®--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/main/java<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.properties<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.xml<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">filtering</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">filtering</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">resources</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="3-4ã€å®Œæˆæ•°æ®çš„CRUD"><a href="#3-4ã€å®Œæˆæ•°æ®çš„CRUD" class="headerlink" title="3.4ã€å®Œæˆæ•°æ®çš„CRUD"></a>3.4ã€å®Œæˆæ•°æ®çš„CRUD</h4><p>æ ¸å¿ƒé…ç½®æ–‡ä»¶æœ‰äº†ï¼Œæ˜ å°„æ–‡ä»¶ä¹Ÿæœ‰äº†ï¼Œç°åœ¨å°±å¯ä»¥å®Œæˆæ•°æ®åº“çš„CRUDäº†ã€‚é¦–å…ˆéœ€è¦è·å–çš„æ˜¯æ ¸å¿ƒå¯¹è±¡SqlSessionFactoryï¼Œç„¶åé€šè¿‡å®ƒå»æ‹¿åˆ°ä¸€ä¸ªSqlSessionå¯¹è±¡(ç›¸å½“äºJDBCçš„è¿æ¥)ã€‚å¿…éœ€è¦æœ‰SqlSessionè¿™ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬æ‰å¯ä»¥å»æ‰§è¡Œç›¸åº”çš„SQLã€‚</p><h5 id="1ã€SqlSessionå¯¹è±¡çš„è·å–"><a href="#1ã€SqlSessionå¯¹è±¡çš„è·å–" class="headerlink" title="1ã€SqlSessionå¯¹è±¡çš„è·å–"></a>1ã€SqlSessionå¯¹è±¡çš„è·å–</h5><p>å®˜æ–¹æ–‡æ¡£ä»XML ä¸­æ„å»º SqlSessionFactoryè¿™ä¸€ç« ä¸­ï¼Œé™¤äº†é…ç½®çš„æ ¸å¿ƒxmlï¼Œåœ¨ä¸Šé¢æˆ‘ä»¬è¿˜å¯ä»¥çœ‹åˆ°å‡ å¥ä»£ç (å¦‚ä¸‹å›¾)ï¼Œç°åœ¨å’±ä»¬å°±æ¥è¯¦ç»†åˆ†æä¸€ä¸‹è¿™å‡ å¥ä»£ç æ˜¯ä»€ä¹ˆæ„æ€ï¼š</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-keyword">private</span> static SqlSessionFactory sqlSessionFactory;<br>Reader reader = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Resources</span>.</span></span>get<span class="hljs-constructor">ResourceAsReader(<span class="hljs-string">&quot;MyBatis-Config.xml&quot;</span>)</span>;<br>sqlSessionFactory = <span class="hljs-keyword">new</span> <span class="hljs-constructor">SqlSessionFactoryBuilder()</span>.build(reader);<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬ç®€å•è§£é‡Šä¸€ä¸‹ä¸Šé¢çš„ä»£ç ï¼šè¯»å–æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼Œç„¶åå†é€šè¿‡SqlSessionFactoryBuilderæ„å»ºè€…æ¥åˆ›å»ºä¸€ä¸ªSqlSessionFactoryå¯¹è±¡ã€‚</p><p>æ³¨ï¼šä¸Šé¢çš„SqlSessionå¯¹è±¡æ˜¯ä¸€ä¸ªé€šè¿‡SqlSessionFactoryå·¥å‚å¯¹è±¡è¿”å›çš„å¯¹è±¡:</p><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs aspectj"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-function">SqlSession <span class="hljs-title">getSession</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-function"><span class="hljs-keyword">return</span> sqlSessionFactory.<span class="hljs-title">openSession</span><span class="hljs-params">()</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="2ã€è·å–SqlSessionçš„å·¥å…·ç±»ï¼ˆMyBatisUtilsï¼‰æŠ½å–"><a href="#2ã€è·å–SqlSessionçš„å·¥å…·ç±»ï¼ˆMyBatisUtilsï¼‰æŠ½å–" class="headerlink" title="2ã€è·å–SqlSessionçš„å·¥å…·ç±»ï¼ˆMyBatisUtilsï¼‰æŠ½å–"></a>2ã€è·å–SqlSessionçš„å·¥å…·ç±»ï¼ˆMyBatisUtilsï¼‰æŠ½å–</h5><p>å¯¹äºMyBatisçš„å·¥å…·ç±»æŠ½å–ï¼Œç›´æ¥ä½¿ç”¨é™æ€å·¥å…·çš„å•ä¾‹æ¨¡å¼ã€‚</p><p>æ³¨ï¼šå‡ ç§å•ä¾‹æ¨¡å¼çš„åŒºåˆ«ä¸ä½¿ç”¨(å•ä¾‹å·¥å…·ä¸é™æ€å·¥å…·çš„åŒºåˆ«)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> org.apache.ibatis.io.Resources;<br><span class="hljs-keyword">import</span> org.apache.ibatis.session.SqlSession;<br><span class="hljs-keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;<br><span class="hljs-keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;<br><br><span class="hljs-keyword">import</span> java.io.Reader;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyBatisUtils</span> </span>&#123;<br>    <span class="hljs-comment">// ä¿è¯SqlSessionFactoryæ˜¯å•ä¾‹</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> SqlSessionFactory sqlSessionFactory;<br><br>    <span class="hljs-comment">// SqlSessionFactoryç±»ä¼¼äºJPAçš„EntityManagerFactoryï¼ŒHibernateçš„SessionFactory</span><br>    <span class="hljs-comment">// SqlSession ç±»ä¼¼äºJPAçš„EntityManagerï¼ŒHibernateçš„Session</span><br><br>    <span class="hljs-keyword">static</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            Reader reader = Resources.getResourceAsReader(<span class="hljs-string">&quot;MyBatis-Config.xml&quot;</span>);<br>            sqlSessionFactory = <span class="hljs-keyword">new</span> SqlSessionFactoryBuilder().build(reader);<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            e.printStackTrace();<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeException(<span class="hljs-string">&quot;è§£æMyBatisçš„é…ç½®æ–‡ä»¶æˆ–è€…æ˜ å°„æ–‡ä»¶å‡ºç°å¼‚å¸¸ï¼š&quot;</span> + e.getMessage());<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// å¯¹å¤–æä¾›ä¸€ä¸ªè¿”å›SqlSessionå¯¹è±¡çš„æ–¹æ³•</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SqlSession <span class="hljs-title">getSession</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> sqlSessionFactory.openSession();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="3ã€æŸ¥è¯¢ä¸€æ¡æ•°æ®"><a href="#3ã€æŸ¥è¯¢ä¸€æ¡æ•°æ®" class="headerlink" title="3ã€æŸ¥è¯¢ä¸€æ¡æ•°æ®"></a><strong>3ã€æŸ¥è¯¢ä¸€æ¡æ•°æ®</strong></h5><p>å¤§å®¶è¦æ³¨æ„å’±ä»¬ä¼ è¿‡å»çš„å‚æ•°ï¼Œè¿˜æœ‰åœ¨SQLæ¥æ”¶çš„å‚æ•°ï¼</p><p>ä¼ è¿‡å»çš„<code>å˜é‡åç§°</code>å’Œ<code>#é‡Œé¢çš„å­—ç¬¦ä¸²åç§°</code>ä¸æ˜¯ä¸€å›äº‹ï¼</p><p>æ•´ä¸ªMyBatisçš„æµç¨‹å†è¿›è¡Œä¸€æ¬¡åˆ†æï¼š</p><ol><li><p>æˆ‘ä»¬éœ€è¦æ ¸å¿ƒæ–‡ä»¶(æä¾›è”ç³»æ•°æ®åº“çš„ç¯å¢ƒ)</p></li><li><p>éœ€è¦æ˜ å°„æ–‡ä»¶(æä¾›ORMä¸è¿è¡Œçš„SQLè¯­å¥)</p></li><li><p>æ‹¿åˆ°SqlSessionå¯¹è±¡ï¼Œç”¨äºæ‰§è¡ŒSQL</p></li></ol><p>ProductDaoImp.java</p><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs aspectj"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String NAME_SPACE = <span class="hljs-string">&quot;cn.kongwei_liao.domain.ProductMapper.&quot;</span>;<span class="hljs-comment">//NAME_SPACEæ€ä¹ˆå†™????  æœ€åéœ€è¦æœ‰ä¸ªç‚¹</span><br><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-function">Product <span class="hljs-title">get</span><span class="hljs-params">(Long id)</span> </span>&#123;<br>    SqlSession sqlSession = <span class="hljs-keyword">null</span>;<br>    <span class="hljs-keyword">try</span> &#123;<br>        sqlSession = MyBatisUtils.getSession();<br>        <span class="hljs-function"><span class="hljs-keyword">return</span> sqlSession.<span class="hljs-title">selectOne</span><span class="hljs-params">(NAME_SPACE + <span class="hljs-string">&quot;getById&quot;</span>, id)</span></span>;<br>    &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>        e.printStackTrace();<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeException(<span class="hljs-string">&quot;ProductDaoImpl.getå‡ºç°å¼‚å¸¸ï¼š&quot;</span> + e.getMessage());<br>    &#125; <span class="hljs-keyword">finally</span> &#123;<br>        <span class="hljs-keyword">if</span> (sqlSession != <span class="hljs-keyword">null</span>) &#123;<br>            sqlSession.close();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="4ã€junitæµ‹è¯•ï¼ˆæœ‰å¿…è¦çš„ï¼‰"><a href="#4ã€junitæµ‹è¯•ï¼ˆæœ‰å¿…è¦çš„ï¼‰" class="headerlink" title="4ã€junitæµ‹è¯•ï¼ˆæœ‰å¿…è¦çš„ï¼‰"></a>4ã€junitæµ‹è¯•ï¼ˆæœ‰å¿…è¦çš„ï¼‰</h5><p>å†™ä»£ç è¿‡ç¨‹ä¸­è¿›è¡Œæµ‹è¯•æ˜¯ä¸€ä¸ªå¥½ä¹ æƒ¯ã€‚</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ProductDaoTest</span> &#123;</span><br>IProductDao productDao = <span class="hljs-keyword">new</span> ProductDaoImpl();<br>@Test<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testGet</span><span class="hljs-params">()</span> </span>&#123;<br>Product product = productDao.<span class="hljs-built_in">get</span>(<span class="hljs-number">1L</span>);<br>System.out.<span class="hljs-built_in">println</span>(product);<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="5ã€æŸ¥è¯¢æ‰€æœ‰æ•°æ®"><a href="#5ã€æŸ¥è¯¢æ‰€æœ‰æ•°æ®" class="headerlink" title="5ã€æŸ¥è¯¢æ‰€æœ‰æ•°æ®"></a>5ã€æŸ¥è¯¢æ‰€æœ‰æ•°æ®</h5><p>ä»£ç ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> List&lt;Product&gt; <span class="hljs-function"><span class="hljs-title">getAll</span>(<span class="hljs-params"></span>)</span> &#123;<br>SqlSession sqlSession = <span class="hljs-literal">null</span>;<br><span class="hljs-keyword">try</span> &#123;<br>sqlSession = MyBatisUtils.getSession();<br><span class="hljs-keyword">return</span> sqlSession.selectList(NAME_SPACE + <span class="hljs-string">&quot;getAll&quot;</span>);<br>&#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>e.printStackTrace();<br><span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeException(<span class="hljs-string">&quot;ProductDaoImpl.getå‡ºç°å¼‚å¸¸ï¼š&quot;</span> + e.getMessage());<br>&#125; <span class="hljs-keyword">finally</span> &#123;<br><span class="hljs-keyword">if</span> (sqlSession != <span class="hljs-literal">null</span>) &#123;<br>sqlSession.close();<br>&#125;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æµ‹è¯•ï¼š</p><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs fortran">@Test<br><span class="hljs-keyword">public</span> void testGetAll() &#123;<br>List&lt;<span class="hljs-built_in">Product</span>&gt; list = productDao.getAll();<br>for (<span class="hljs-built_in">Product</span> <span class="hljs-built_in">product</span> : list) &#123;<br>System.<span class="hljs-keyword">out</span>.println(<span class="hljs-built_in">product</span>);<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="6ã€æ·»åŠ æ•°æ®"><a href="#6ã€æ·»åŠ æ•°æ®" class="headerlink" title="6ã€æ·»åŠ æ•°æ®"></a>6ã€æ·»åŠ æ•°æ®</h5><p>æ³¨ï¼šæ·»åŠ çš„æ—¶å€™ä¸€å®šè¦è®°ä½æäº¤äº‹åŠ¡ ( é…ç½®äº‹åŠ¡ã€è¡¨ç»“æ„æ”¯æŒäº‹åŠ¡ );</p><p><code>JDBCçš„äº‹åŠ¡æ˜¯è‡ªåŠ¨æäº¤çš„ï¼Œè€ŒJPAã€Hibernateã€MyBatisäº‹åŠ¡éƒ½æ˜¯éœ€è¦æ‰‹åŠ¨æäº¤çš„ã€‚</code></p><p>ä»£ç ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">save</span>(<span class="hljs-params">Product product</span>)</span> &#123;<br>SqlSession sqlSession = <span class="hljs-literal">null</span>;<br><span class="hljs-keyword">try</span> &#123;<br>sqlSession = MyBatisUtils.getSession();<br>sqlSession.insert(NAME_SPACE + <span class="hljs-string">&quot;save&quot;</span>, product);<br><br><span class="hljs-comment">// JDBCçš„äº‹åŠ¡æ˜¯è‡ªåŠ¨æäº¤çš„ï¼Œè€ŒJPAã€Hibernateã€MyBatisäº‹åŠ¡éƒ½æ˜¯éœ€è¦æ‰‹åŠ¨æäº¤çš„</span><br>sqlSession.commit();<br>&#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>e.printStackTrace();<br><span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeException(<span class="hljs-string">&quot;ProductDaoImpl.getå‡ºç°å¼‚å¸¸ï¼š&quot;</span> + e.getMessage());<br>&#125; <span class="hljs-keyword">finally</span> &#123;<br><span class="hljs-keyword">if</span> (sqlSession != <span class="hljs-literal">null</span>) &#123;<br>sqlSession.close();<br>&#125;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æµ‹è¯•ï¼š</p><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs fortran">@Test<br><span class="hljs-keyword">public</span> void testSave() &#123;<br><span class="hljs-built_in">Product</span> <span class="hljs-built_in">product</span> = new <span class="hljs-built_in">Product</span>();<br><span class="hljs-built_in">product</span>.setBrand(<span class="hljs-string">&quot;å¤§åŠ›ç‰Œ&quot;</span>);<br><span class="hljs-built_in">product</span>.setCostPrice(<span class="hljs-number">30.0</span>);<br><span class="hljs-built_in">product</span>.setCutoff(<span class="hljs-number">0.8</span>);<br><span class="hljs-built_in">product</span>.setDir_id(<span class="hljs-number">1</span>L);<br><span class="hljs-built_in">product</span>.setProductName(<span class="hljs-string">&quot;000000&quot;</span>);<br><span class="hljs-built_in">product</span>.setSalePrice(<span class="hljs-number">60</span>D);<br><span class="hljs-built_in">product</span>.setSupplier(<span class="hljs-string">&quot;ä¸œèä¾›åº”å•†&quot;</span>);<br>productDao.<span class="hljs-keyword">save</span>(<span class="hljs-built_in">product</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>æ·»åŠ æ•°æ®çš„æœ‰æ—¶å€™å’±ä»¬éœ€è¦æ‹¿åˆ°å½“å‰æ•°æ®çš„ä¸»é”®ã€‚å’±ä»¬å…ˆç§»æ­¥åˆ°MyBatisç»†èŠ‚ä¸€ç« çš„æ‹¿åˆ°è¿”å›ä¸»é”®éƒ¨åˆ†ï¼ä¸‹ä¸€ç« </p><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="xml"><span class="hljs-comment">&lt;!-- å¯é€‰æ‹©æ€§æ’å…¥ --&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;insertSelective&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;cn.kongwei_liao.domain.Product&quot;</span></span></span><br><span class="xml">        useGeneratedKeys=&quot;true&quot; keyProperty=&quot;id&quot;&gt;</span><br><span class="xml">        insert into product</span><br><span class="xml">        product(productName,salePrice,costPrice,cutoff,supplier,brand,dir_id)</span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">trim</span> <span class="hljs-attr">prefix</span>=<span class="hljs-string">&quot;(&quot;</span> <span class="hljs-attr">suffix</span>=<span class="hljs-string">&quot;)&quot;</span> <span class="hljs-attr">suffixOverrides</span>=<span class="hljs-string">&quot;,&quot;</span>&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;id != null&quot;</span>&gt;</span></span><br><span class="xml">                id,</span><br><span class="xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;productName != null&quot;</span>&gt;</span></span><br><span class="xml">                vid,</span><br><span class="xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;salePrice != null&quot;</span>&gt;</span></span><br><span class="xml">                ntype,</span><br><span class="xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;costPrice != null&quot;</span>&gt;</span></span><br><span class="xml">                canentry,</span><br><span class="xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;supplier != null&quot;</span>&gt;</span></span><br><span class="xml">                title,</span><br><span class="xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;brand != null&quot;</span>&gt;</span></span><br><span class="xml">                ispush,</span><br><span class="xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;dir_id != null&quot;</span>&gt;</span></span><br><span class="xml">                entrycount,</span><br><span class="xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">trim</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">trim</span> <span class="hljs-attr">prefix</span>=<span class="hljs-string">&quot;values (&quot;</span> <span class="hljs-attr">suffix</span>=<span class="hljs-string">&quot;)&quot;</span> <span class="hljs-attr">suffixOverrides</span>=<span class="hljs-string">&quot;,&quot;</span>&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;id != null&quot;</span>&gt;</span></span><br><span class="xml">                #</span><span class="hljs-template-variable">&#123;id,jdbcType=INTEGER&#125;</span><span class="xml">,</span><br><span class="xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;productName != null&quot;</span>&gt;</span></span><br><span class="xml">                #</span><span class="hljs-template-variable">&#123;productName,jdbcType=VARCHAR&#125;</span><span class="xml">,</span><br><span class="xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;salePrice != null&quot;</span>&gt;</span></span><br><span class="xml">                #</span><span class="hljs-template-variable">&#123;salePrice,jdbcType=TINYINT&#125;</span><span class="xml">,</span><br><span class="xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;costPrice != null&quot;</span>&gt;</span></span><br><span class="xml">                #</span><span class="hljs-template-variable">&#123;costPrice,jdbcType=TINYINT&#125;</span><span class="xml">,</span><br><span class="xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;cutoff != null&quot;</span>&gt;</span></span><br><span class="xml">                #</span><span class="hljs-template-variable">&#123;cutoff,jdbcType=VARCHAR&#125;</span><span class="xml">,</span><br><span class="xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;supplier != null&quot;</span>&gt;</span></span><br><span class="xml">                #</span><span class="hljs-template-variable">&#123;supplier,jdbcType=TINYINT&#125;</span><span class="xml">,</span><br><span class="xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;brand != null&quot;</span>&gt;</span></span><br><span class="xml">                #</span><span class="hljs-template-variable">&#123;brand,jdbcType=VARCHAR&#125;</span><span class="xml">,</span><br><span class="xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;dir_id != null&quot;</span>&gt;</span></span><br><span class="xml">                #</span><span class="hljs-template-variable">&#123;dir_id,jdbcType=INTEGER&#125;</span><span class="xml">,</span><br><span class="xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">trim</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h5 id="7ã€ä¿®æ”¹æ•°æ®"><a href="#7ã€ä¿®æ”¹æ•°æ®" class="headerlink" title="7ã€ä¿®æ”¹æ•°æ®"></a>7ã€ä¿®æ”¹æ•°æ®</h5><p>ä»£ç ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">update</span>(<span class="hljs-params">Product product</span>)</span> &#123;<br>SqlSession sqlSession = <span class="hljs-literal">null</span>;<br><span class="hljs-keyword">try</span> &#123;<br>sqlSession = MyBatisUtils.getSession();<br>sqlSession.update(NAME_SPACE + <span class="hljs-string">&quot;update&quot;</span>, product);<br><br><span class="hljs-comment">// JDBCçš„äº‹åŠ¡æ˜¯è‡ªåŠ¨æäº¤çš„ï¼Œè€ŒJPAã€Hibernateã€MyBatisäº‹åŠ¡éƒ½æ˜¯éœ€è¦æ‰‹åŠ¨æäº¤çš„</span><br>sqlSession.commit();<br>&#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>e.printStackTrace();<br><span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeException(<span class="hljs-string">&quot;ProductDaoImpl.getå‡ºç°å¼‚å¸¸ï¼š&quot;</span> + e.getMessage());<br>&#125; <span class="hljs-keyword">finally</span> &#123;<br><span class="hljs-keyword">if</span> (sqlSession != <span class="hljs-literal">null</span>) &#123;<br>sqlSession.close();<br>&#125;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æµ‹è¯•ï¼š</p><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs fortran">@Test<br><span class="hljs-keyword">public</span> void testUpdate() &#123;<br><span class="hljs-built_in">Product</span> <span class="hljs-built_in">product</span> = productDao.get(<span class="hljs-number">1</span>L);<br>System.<span class="hljs-keyword">out</span>.println(<span class="hljs-built_in">product</span>);<br><br><span class="hljs-built_in">product</span>.setBrand(<span class="hljs-string">&quot;å¤§åŠ›ç‰Œ&quot;</span>);<br><span class="hljs-built_in">product</span>.setCostPrice(<span class="hljs-number">30.0</span>);<br><span class="hljs-built_in">product</span>.setCutoff(<span class="hljs-number">0.8</span>);<br><span class="hljs-built_in">product</span>.setDir_id(<span class="hljs-number">1</span>L);<br><span class="hljs-built_in">product</span>.setProductName(<span class="hljs-string">&quot;000000&quot;</span>);<br><span class="hljs-built_in">product</span>.setSalePrice(<span class="hljs-number">60</span>D);<br><span class="hljs-built_in">product</span>.setSupplier(<span class="hljs-string">&quot;ä¸œèä¾›åº”å•†&quot;</span>);<br>productDao.update(<span class="hljs-built_in">product</span>);<br><br><span class="hljs-built_in">product</span> = productDao.get(<span class="hljs-number">1</span>L);<br>System.<span class="hljs-keyword">out</span>.println(<span class="hljs-built_in">product</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="8ã€åˆ é™¤ä¸€æ¡æ•°æ®"><a href="#8ã€åˆ é™¤ä¸€æ¡æ•°æ®" class="headerlink" title="8ã€åˆ é™¤ä¸€æ¡æ•°æ®"></a>8ã€åˆ é™¤ä¸€æ¡æ•°æ®</h5><p>ä»£ç ï¼š</p><figure class="highlight d"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs d"><span class="hljs-keyword">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-keyword">delete</span>(Long id) &#123;<br>SqlSession sqlSession = <span class="hljs-literal">null</span>;<br><span class="hljs-keyword">try</span> &#123;<br>sqlSession = MyBatisUtils.getSession();<br>sqlSession.<span class="hljs-keyword">delete</span>(NAME_SPACE + <span class="hljs-string">&quot;delete&quot;</span>, id);<br><span class="hljs-comment">// JDBCçš„äº‹åŠ¡æ˜¯è‡ªåŠ¨æäº¤çš„ï¼Œè€ŒJPAã€Hibernateã€MyBatisäº‹åŠ¡éƒ½æ˜¯éœ€è¦æ‰‹åŠ¨æäº¤çš„</span><br>sqlSession.commit();<br>&#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>e.printStackTrace();<br><span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeException(<span class="hljs-string">&quot;ProductDaoImpl.deleteå‡ºç°å¼‚å¸¸ï¼š&quot;</span> + e.getMessage());<br>&#125; <span class="hljs-keyword">finally</span> &#123;<br><span class="hljs-keyword">if</span> (sqlSession != <span class="hljs-literal">null</span>) &#123;<br>sqlSession.close();<br>&#125;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æµ‹è¯•ï¼š</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs arduino">@Test<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testDelete</span><span class="hljs-params">()</span> </span>&#123;<br>productDao.<span class="hljs-keyword">delete</span>(<span class="hljs-number">1L</span>);<br>Product product = productDao.<span class="hljs-built_in">get</span>(<span class="hljs-number">1L</span>);<br>System.out.<span class="hljs-built_in">println</span>(product);<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="9ã€CRUDæ³¨æ„äº‹é¡¹"><a href="#9ã€CRUDæ³¨æ„äº‹é¡¹" class="headerlink" title="9ã€CRUDæ³¨æ„äº‹é¡¹"></a>9ã€CRUDæ³¨æ„äº‹é¡¹</h5><p>ä¸‹é¢æ˜¯åœ¨ä½¿ç”¨MyBatisçš„æ—¶å€™ç»å¸¸å‡ºç°çš„é—®é¢˜ï¼Œéœ€è¦å¼•èµ·é‡è§†ã€‚å‡ºç°é—®é¢˜çš„æ—¶å€™è¿‡æ¥å¥½å¥½çš„æ¥æ‰¾ã€‚åŸºæœ¬å’±ä»¬ä½¿ç”¨MyBatisä¸­å‡ºçš„é”™éƒ½åœ¨è¿™é‡Œã€‚</p><p>ä½¿ç”¨æ¡†æ¶çš„æ—¶å€™é…ç½®ä¿¡æ¯å˜å¤šï¼Œåœ¨é…ç½®é‡Œå†™çš„éƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œè€Œä¸”ç»å¸¸æ˜¯è¦å¯¹åº”çš„ã€‚å› ä¸ºï¼Œè¿™é‡Œå¸Œæœ›å¤§å®¶è¦åˆ‡è®°ï¼šå†™çš„æ—¶å€™ç»†å¿ƒï¼Œå‡ºç°é”™è¯¯æ‰¾å­—ç¬¦ä¸²è¦è€å¿ƒï¼Œ</p><ol><li>ä¸»é…ç½®ä¸­æœªé…ç½®ç›¸åº”çš„mapperï¼ˆå½“ç„¶ï¼Œè¿™ä¸ªè·¯å¾„ä¹Ÿå¯èƒ½å†™é”™ï¼‰ï¼›</li><li>åœ¨ä»£ç ä¸­è°ƒç”¨Sqlçš„æ—¶å€™è·¯å¾„å†™é”™ï¼›</li><li>Sqlå†™é”™ï¼Œè¿™ä¸ªåº”è¯¥è¿˜å¥½æ‰¾ï¼›</li><li>å½“æˆ‘ä»¬åœ¨é…ç½®æ–‡ä»¶ä¸­å¾ˆå¤šåœ°æ–¹å¦‚æœå†™é”™ï¼Œå³ä¾¿æ˜¯ä½ è¿˜æ²¡æœ‰ä½¿ç”¨ä¹Ÿå¯èƒ½ä¼šæŠ¥é”™ï¼›</li><li>å†™Sqlçš„æ ‡ç­¾ä¸éœ€è¦å…¨éƒ¨ä¸€è‡´ï¼ˆå¦‚æ·»åŠ ä¸ä¸€å®šå¿…éœ€ä½¿ç”¨insertï¼‰ï¼Œä½†æ˜¯å®ƒçš„å±æ€§ä¼šä¸åŒï¼›</li><li>åœ¨ä¼ å…¥ä¸è¿”å›å‚æ•°æ—¶å…¨é™å®šç±»åå†™é”™ã€‚</li></ol><p>åœ¨å¼€å‘çš„æ—¶å€™ï¼Œè¦è¾¹åšè¾¹æµ‹è¯•ã€‚ åœ¨æŸä¸€æ­¥å‡ºç°é”™è¯¯åï¼Œåˆ é™¤æ–°åŠ çš„ä»£ç çœ‹æœ‰æ²¡æœ‰é—®é¢˜ï¼Œå¦‚æœåˆ é™¤éƒ¨åˆ†ä»£ç åè¿è¡ŒæˆåŠŸï¼Œå°±ç›¸åº”çš„å¯ä»¥ç¼©å°æ’é”™çš„èŒƒå›´ã€‚</p><h3 id="4ã€MyBatisä¸‰å¤§æ ¸å¿ƒå¯¹è±¡ä»‹ç»ï¼ŒåŠå…¶ç”Ÿå‘½å‘¨æœŸ"><a href="#4ã€MyBatisä¸‰å¤§æ ¸å¿ƒå¯¹è±¡ä»‹ç»ï¼ŒåŠå…¶ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="4ã€MyBatisä¸‰å¤§æ ¸å¿ƒå¯¹è±¡ä»‹ç»ï¼ŒåŠå…¶ç”Ÿå‘½å‘¨æœŸ"></a>4ã€MyBatisä¸‰å¤§æ ¸å¿ƒå¯¹è±¡ä»‹ç»ï¼ŒåŠå…¶ç”Ÿå‘½å‘¨æœŸ</h3><h4 id="4-1ã€SqlSessionFactoryBuilder"><a href="#4-1ã€SqlSessionFactoryBuilder" class="headerlink" title="4.1ã€SqlSessionFactoryBuilder"></a>4.1ã€SqlSessionFactoryBuilder</h4><p>å»ºé€ è€…æ¨¡å¼ï¼šæˆ‘ä»¬æœ€åæ‹¿åˆ°çš„è¿™ä¸ªå¯¹è±¡æ˜¯éå¸¸å¤æ‚çš„ã€‚ç”¨è¿™ä¸ªå»ºé€ è€…å°±å®ƒå…ˆä¸ºæˆ‘ä»¬æŠŠè¿™äº›å¤æ‚çš„ä»£ç å®Œæˆã€‚</p><p>è¿™ä¸ªç±»å¯ä»¥è¢«å®ä¾‹åŒ–ï¼Œä½¿ç”¨å’Œä¸¢å¼ƒã€‚<strong>ä¸€æ—¦ä½ åˆ›å»ºäº†SqlSessionFactoryåï¼Œè¿™ä¸ªSqlSessionFactoryBuilderç±»å°±ä¸éœ€è¦å­˜åœ¨äº†ã€‚</strong>å› æ­¤SqlSessionFactoryBuilderå®ä¾‹çš„æœ€ä½³èŒƒå›´æ˜¯æ–¹æ³•èŒƒå›´ï¼ˆä¹Ÿå°±æ˜¯æœ¬åœ°æ–¹æ³•å˜é‡ï¼‰ã€‚</p><p>ä½ å¯ä»¥é‡ç”¨SqlSessionFactoryBuilderæ¥åˆ›å»ºå¤šä¸ªSqlSessionFactoryå®ä¾‹ï¼Œä½†æ˜¯æœ€å¥½çš„æ–¹å¼æ˜¯</p><p>ä¸éœ€è¦ä¿æŒå®ƒä¸€ç›´å­˜åœ¨æ¥ä¿è¯æ‰€æœ‰XMLè§£æèµ„æºï¼Œå› ä¸ºè¿˜æœ‰æ›´é‡è¦çš„äº‹æƒ…è¦åšã€‚ </p><h4 id="4-2ã€SqlSessionFactory"><a href="#4-2ã€SqlSessionFactory" class="headerlink" title="4.2ã€SqlSessionFactory"></a>4.2ã€SqlSessionFactory</h4><p>ç±»ä¼¼äºJPAçš„EntityManagerFactoryï¼ŒHibernateçš„SessionFactory</p><p><strong>ä¸€æ—¦è¢«åˆ›å»ºï¼ŒSqlSessionFactoryåº”è¯¥åœ¨ä½ çš„åº”ç”¨æ‰§è¡ŒæœŸé—´éƒ½å­˜åœ¨ã€‚</strong>æ²¡æœ‰ç†ç”±æ¥å¤„ç†æˆ–é‡æ–°åˆ›å»ºå®ƒã€‚ä½¿ç”¨SqlSessionFactoryçš„æœ€ä½³å®è·µæ˜¯åœ¨åº”ç”¨è¿è¡ŒæœŸé—´ä¸è¦é‡å¤åˆ›å»ºå¤šæ¬¡ã€‚è¿™æ ·çš„æ“ä½œå°†è¢«è§†ä¸ºæ˜¯éå¸¸ç³Ÿç³•çš„ï¼Œå› æ­¤SqlSessionFactoryçš„æœ€ä½³èŒƒå›´æ˜¯åº”ç”¨èŒƒå›´ã€‚</p><p>æœ‰å¾ˆå¤šæ–¹æ³•å¯ä»¥åšåˆ°ï¼Œæœ€ç®€å•çš„å°±æ˜¯<code>ä½¿ç”¨å•ä¾‹æ¨¡å¼</code>æˆ–è€…<code>é™æ€å•ä¾‹æ¨¡å¼</code>ã€‚ç„¶è€Œè¿™ä¸¤ç§æ–¹æ³•éƒ½ä¸è®¤ä¸ºæ˜¯æœ€ä½³å®è·µã€‚è¿™æ ·çš„è¯ï¼Œä½ å¯ä»¥<strong>è€ƒè™‘ä¾èµ–æ³¨å…¥å®¹å™¨ï¼Œæ¯”å¦‚Google Guiceæˆ–Springã€‚è¿™æ ·çš„æ¡†æ¶å…è®¸ä½ åˆ›å»ºæ”¯æŒç¨‹åºæ¥ç®¡ç†å•ä¾‹SqlSessionFactoryçš„ç”Ÿå‘½å‘¨æœŸã€‚</strong> </p><h4 id="4-3ã€SqlSession"><a href="#4-3ã€SqlSession" class="headerlink" title="4.3ã€SqlSession"></a>4.3ã€SqlSession</h4><p>ç±»ä¼¼äºJPAçš„EntityManagerï¼ŒHibernateçš„Session</p><p><strong>æ¯ä¸ªçº¿ç¨‹éƒ½åº”è¯¥æœ‰å®ƒè‡ªå·±çš„SqlSessionå®ä¾‹ã€‚SqlSessionçš„å®ä¾‹ä¸èƒ½è¢«å…±äº«ï¼Œä¹Ÿæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ã€‚</strong>å› æ­¤æœ€ä½³çš„èŒƒå›´æ˜¯è¯·æ±‚æˆ–æ–¹æ³•èŒƒå›´ã€‚</p><p>ç»å¯¹ä¸èƒ½å°†SqlSessionå®ä¾‹çš„å¼•ç”¨æ”¾åœ¨ä¸€ä¸ªç±»çš„é™æ€å­—æ®µç”šè‡³æ˜¯å®ä¾‹å­—æ®µä¸­ã€‚</p><p>ä¹Ÿç»ä¸èƒ½å°†SqlSessionå®ä¾‹çš„å¼•ç”¨æ”¾åœ¨ä»»ä½•ç±»å‹çš„ç®¡ç†èŒƒå›´ä¸­ï¼Œæ¯”å¦‚Serlvetæ¶æ„ä¸­çš„HttpSessionã€‚</p><p>å¦‚æœä½ ç°åœ¨æ­£ç”¨ä»»æ„çš„Webæ¡†æ¶ï¼Œè¦è€ƒè™‘SqlSessionæ”¾åœ¨ä¸€ä¸ªå’ŒHTTPè¯·æ±‚å¯¹è±¡ç›¸ä¼¼çš„èŒƒå›´å†…ã€‚æ¢å¥è¯è¯´ï¼ŒåŸºäºæ”¶åˆ°çš„HTTPè¯·æ±‚ï¼Œä½ å¯ä»¥æ‰“å¼€äº†ä¸€ä¸ªSqlSessionï¼Œç„¶åè¿”å›å“åº”ï¼Œå°±å¯ä»¥å…³é—­å®ƒäº†ã€‚å…³é—­Sessionå¾ˆé‡è¦ï¼</p><p>ä¸ºä»€ä¹ˆåœ¨è¿™é‡Œæˆ‘ä»¬è¦å…ˆè¯´è¿™ä¸‰å¤§æ ¸å¿ƒå¯¹è±¡å‘¢ï¼Œå› ä¸ºåœ¨æˆ‘ä»¬å¿…éœ€è¦äº†è§£è¿™ä¸‰ä¸ªå¯¹è±¡çš„ç‰¹æ€§ã€‚æ‰å¯ä»¥æ›´å¥½çš„æ ¹æ®è¿™ä¸ªç‰¹æ€§æ¥å®ŒæˆMyBatisUtilså·¥å…·ç±»ä»£ç ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> org.apache.ibatis.io.Resources;<br><span class="hljs-keyword">import</span> org.apache.ibatis.session.SqlSession;<br><span class="hljs-keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;<br><span class="hljs-keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;<br><br><span class="hljs-keyword">import</span> java.io.Reader;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyBatisUtils</span> </span>&#123;<br>    <span class="hljs-comment">// ä¿è¯SqlSessionFactoryæ˜¯å•ä¾‹</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> SqlSessionFactory sqlSessionFactory;<br><br>    <span class="hljs-comment">// SqlSessionFactoryç±»ä¼¼äºJPAçš„EntityManagerFactoryï¼ŒHibernateçš„SessionFactory</span><br>    <span class="hljs-comment">// SqlSession ç±»ä¼¼äºJPAçš„EntityManagerï¼ŒHibernateçš„Session</span><br><br>    <span class="hljs-keyword">static</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            Reader reader = Resources.getResourceAsReader(<span class="hljs-string">&quot;MyBatis-Config.xml&quot;</span>);<br>            sqlSessionFactory = <span class="hljs-keyword">new</span> SqlSessionFactoryBuilder().build(reader);<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            e.printStackTrace();<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeException(<span class="hljs-string">&quot;è§£æMyBatisçš„é…ç½®æ–‡ä»¶æˆ–è€…æ˜ å°„æ–‡ä»¶å‡ºç°å¼‚å¸¸ï¼š&quot;</span> + e.getMessage());<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// å¯¹å¤–æä¾›ä¸€ä¸ªç±»</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SqlSession <span class="hljs-title">getSession</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> sqlSessionFactory.openSession();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="5ã€MyBatisçš„ä½¿ç”¨ç»†èŠ‚"><a href="#5ã€MyBatisçš„ä½¿ç”¨ç»†èŠ‚" class="headerlink" title="5ã€MyBatisçš„ä½¿ç”¨ç»†èŠ‚"></a>5ã€MyBatisçš„ä½¿ç”¨ç»†èŠ‚</h3><h4 id="5-1ã€æ·»åŠ æ—¶æ‹¿åˆ°è¿”å›çš„ä¸»é”®"><a href="#5-1ã€æ·»åŠ æ—¶æ‹¿åˆ°è¿”å›çš„ä¸»é”®" class="headerlink" title="5.1ã€æ·»åŠ æ—¶æ‹¿åˆ°è¿”å›çš„ä¸»é”®"></a>5.1ã€æ·»åŠ æ—¶æ‹¿åˆ°è¿”å›çš„ä¸»é”®</h4><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="xml"><span class="hljs-comment">&lt;!-- </span></span><br><span class="xml">parameterTypeï¼šéœ€è¦ä¼ å…¥æˆ‘ä»¬çš„å¯¹è±¡;</span><br><span class="xml">useGeneratedKeys: æ˜¯å¦éœ€è¦ä¸»é”®;</span><br><span class="xml">keyColumn:ä¸»é”®æ‰€åœ¨çš„è¡¨å­—æ®µï¼ˆåˆ—ï¼‰ï¼Œå¯ä»¥ä¸ç”¨é…ç½®;</span><br><span class="xml">keyProperty:Javaå¯¹è±¡ä¸­çš„å±æ€§ (ä»£è¡¨ä¸»é”®çš„é‚£ä¸ªå±æ€§)ã€‚</span><br><span class="xml"> --&gt;</span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;save&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;cn.kongwei_liao.domain.Product&quot;</span></span></span><br><span class="xml">useGeneratedKeys=&quot;true&quot; </span><br><span class="xml">keyColumn=&quot;id&quot;</span><br><span class="xml">keyProperty=&quot;id&quot;&gt;</span><br><span class="xml">insert into product (productName,dir_id,salePrice,supplier,brand,cutoff,costPrice)</span><br><span class="xml">values (#</span><span class="hljs-template-variable">&#123;productName&#125;</span><span class="xml">,#</span><span class="hljs-template-variable">&#123;dir_id&#125;</span><span class="xml">,#</span><span class="hljs-template-variable">&#123;salePrice&#125;</span><span class="xml">,#</span><span class="hljs-template-variable">&#123;supplier&#125;</span><span class="xml">,#</span><span class="hljs-template-variable">&#123;brand&#125;</span><span class="xml">,#</span><span class="hljs-template-variable">&#123;cutoff&#125;</span><span class="xml">,#</span><span class="hljs-template-variable">&#123;costPrice&#125;</span><span class="xml">)</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p>ä¸Šè¿°çš„æ’å…¥æ“ä½œï¼Œæ²¡æœ‰è¿›è¡Œä¸»é”®çš„æ’å…¥ï¼Œå†æ’å…¥è¿™æ¡è®°å½•æ—¶ä¸»é”®ä»¥é€’å¢çš„æ–¹å¼æ’å…¥è®°å½•ã€‚MyBatisä¼šè‡ªåŠ¨æŠŠè¿™ä¸ªä¸»é”®setåˆ°å¯¹è±¡çš„å±æ€§ä¸Šã€‚</p><h4 id="5-2ã€Log4jæ—¥å¿—æ¡†æ¶"><a href="#5-2ã€Log4jæ—¥å¿—æ¡†æ¶" class="headerlink" title="5.2ã€Log4jæ—¥å¿—æ¡†æ¶"></a>5.2ã€Log4jæ—¥å¿—æ¡†æ¶</h4><p>åœ¨ä½¿ç”¨MyBatisçš„å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦æŠŠæ—¥å¿—æ‰“å°å‡ºæ¥ï¼Œå¸®åŠ©æˆ‘ä»¬è¿›è¡Œåˆ†æä¸æ’é”™ã€‚</p><p>æ‰“å¼€åæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ‰§è¡Œçš„SQLè¯­å¥ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬ä¼ é€’çš„å‚æ•°ã€‚</p><p>è€ŒMyBatisä¸­æ‰“å°æ—¥å¿—ä½¿ç”¨çš„æ˜¯Log4jã€‚</p><p>1ã€Log4jç®€ä»‹</p><p>Log4jæœ‰ä¸‰ä¸ªä¸»è¦çš„ç»„ä»¶ï¼š<code>Loggersï¼ˆè®°å½•å™¨ï¼‰</code>ï¼Œ<code>Appendersï¼ˆè¾“å‡ºæºï¼‰</code>å’Œ <code>Layoutsï¼ˆå¸ƒå±€ï¼‰</code>ã€‚</p><p>å¯ç®€å•ç†è§£ä¸º<code>æ—¥å¿—ç±»åˆ«</code>ï¼Œæ—¥å¿—<code>è¦è¾“å‡ºçš„åœ°æ–¹</code>å’Œæ—¥å¿—<code>ä»¥ä½•ç§å½¢å¼è¾“å‡º</code>ã€‚ç»¼åˆä½¿ç”¨è¿™ä¸‰ä¸ªç»„ä»¶å¯ä»¥è½»æ¾åœ°è®°å½•<code>ä¿¡æ¯çš„ç±»å‹</code>å’Œ<code>çº§åˆ«</code>ï¼Œå¹¶å¯ä»¥åœ¨è¿è¡Œæ—¶<code>æ§åˆ¶æ—¥å¿—è¾“å‡ºçš„æ ·å¼å’Œä½ç½®</code>ã€‚</p><p>2ã€æ—¥å¿—ç­‰çº§</p><blockquote><p>ç­‰çº§ä»ä½åˆ°é«˜</p><ol><li><p>TRACEï¼šè¯¦ç»†</p></li><li><p>DEBUGï¼šè°ƒè¯•ï¼Œç±»ä¼¼äºSystem.out.print</p></li><li><p>INFOï¼šä¿¡æ¯ï¼Œç±»ä¼¼äºJPAæ‰“å°sqlç­‰çº§</p></li><li><p>WARNï¼šè­¦å‘Šï¼Œç¨‹åºå¯ä»¥æ­£å¸¸è¿è¡Œï¼Œå‡ºç°æç¤º</p></li><li><p>ERRORï¼šé”™è¯¯ï¼Œå‡ºç°å¼‚å¸¸</p></li></ol></blockquote><p>3ã€log4j.properties</p><p>è¦åœ¨é¡¹ç›®ä¸­æ‰“å¼€æ—¥å¿—ï¼Œåœ¨èµ„æºæ–‡ä»¶æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªlog4j.propertiesçš„æ–‡ä»¶ï¼Œå¹¶æŠŠä¸‹é¢çš„ä»£ç æ‹·å¤‡åˆ°é‡Œé¢ã€‚</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">log4j.rootLogger</span>=ERROR, STDOUT<br><span class="hljs-comment">#log4j.rootLogger=NONE</span><br><span class="hljs-attr">log4j.logger.cn.kongwei_liao</span>=TRACE   <span class="hljs-comment">#æŠŠå·¦è¾¹åŒ…åæ”¹æˆä½ è‡ªå·±çš„åŒ…å</span><br><br><span class="hljs-attr">log4j.appender.stdout</span>=org.apache.log4j.ConsoleAppender<br><span class="hljs-attr">log4j.appender.stdout.layout</span>=org.apache.log4j.PatternLayout<br><span class="hljs-attr">log4j.appender.stdout.layout.ConversionPattern</span>=%d %p [%c] - %m%n<br></code></pre></td></tr></table></figure><p>æ³¨æ„ï¼šcn.kongwei_liaoï¼šä¸€å®šè¦æ ¹æ®è‡ªå·±çš„åŒ…åæƒ…å†µè¿›è¡Œä¿®æ”¹ã€‚</p><p>å¦‚æœé…ç½®æˆåŠŸï¼Œé‚£ä¹ˆåœ¨MyBatisè¿è¡Œæ“ä½œæ•°æ®æ—¶å°±å¯ä»¥çœ‹åˆ°ç›¸åº”çš„æ—¥å¿—äº†ã€‚</p><h4 id="5-3ã€MyBatisä¸­ä¸ºä¸€ä¸ªç±»å–åˆ«å"><a href="#5-3ã€MyBatisä¸­ä¸ºä¸€ä¸ªç±»å–åˆ«å" class="headerlink" title="5.3ã€MyBatisä¸­ä¸ºä¸€ä¸ªç±»å–åˆ«å"></a>5.3ã€MyBatisä¸­ä¸ºä¸€ä¸ªç±»å–åˆ«å</h4><p>åˆ«åï¼šåˆ†ä¸¤ç§ â€“&gt; <code>å†…ç½®åˆ«å</code>å’Œ<code>è‡ªå®šä¹‰åˆ«å</code></p><p><img src="/2021/02/15/MyBatis-%E5%9F%BA%E7%A1%80/image-20191211110636317.png" alt="image-20191211110636317"></p><p>è‡ªå®šä¹‰åˆ«åï¼š</p><p>åœ¨æˆ‘ä»¬å‰é¢ä¼ å‚ä¸æ¥æ”¶ç»“æœçš„æ—¶å€™ï¼Œå’±ä»¬ä¸€ç›´æ˜¯ä½¿ç”¨çš„å…¨é™å®šåï¼›</p><p>ä½†æ˜¯MyBatisè‡ªå·±åœ¨ä½¿ç”¨å¾ˆå¤šè‡ªå·±çš„å†…ç½®ç±»å‹çš„æ—¶å€™ï¼ˆå¦‚Integerï¼ŒBooleanï¼‰å´å¯ä»¥ç›´æ¥ä½¿ç”¨åˆ«åï¼›</p><p>é‚£ä¹ˆï¼Œå’±ä»¬è‡ªå·±çš„å†™çš„ç±»èƒ½ä¸èƒ½ä½¿ç”¨åˆ«åå‘¢ï¼Ÿå½“ç„¶å¯ä»¥ï¼Œçœ‹ä¸‹é¢çš„æ¡ˆä¾‹ï¼š</p><p>å–åˆ«åæœ‰ä»€ä¹ˆç”¨ï¼Ÿæˆ‘è®¤è¯†ä¸€ä¸ªæœ‹å‹ï¼Œä»–å«åšï¼šç‰¹é›·è¥¿ Â· éº¦å…‹æ ¼é›·è¿ªï¼Œæˆ‘å«ä»–éº¦è¿ªã€‚</p><p>ä¸‹é¢ä¸ºå–åˆ«åçš„ä»£ç ï¼š</p><p>åœ¨MyBatis-Config.xmlé…ç½®æ–‡ä»¶ä¸­é…ç½®åˆ«åï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">typeAliases</span>&gt;</span><br><span class="hljs-comment">&lt;!-- </span><br><span class="hljs-comment">1ã€å°†ä¸€ä¸ªåŒ…ä¸‹é¢çš„æ‰€æœ‰ç±»éƒ½å–ä¸Šåˆ«å:&lt;package name=&quot;cn.kongwei_liao.domain&quot;ï¼Œåˆ«åå°±æ˜¯ç±»åã€‚/&gt;</span><br><span class="hljs-comment">2ã€å•ç‹¬çš„ä¸ºå„JavaBeanå®ä½“ç±»å–åˆ«å</span><br><span class="hljs-comment">alias:å–çš„åˆ«å</span><br><span class="hljs-comment">typeï¼šè¿™ä¸ªåˆ«åæ‰€å¯¹åº”çš„Javaç±»</span><br><span class="hljs-comment">3ã€åˆ«åä½¿ç”¨çš„æ—¶å€™ä¸å¤§å°å†™æ— å…³</span><br><span class="hljs-comment"> --&gt;</span><br><br><span class="hljs-comment">&lt;!-- é…ç½®ç¹çå¾ˆå°‘ä½¿ç”¨ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">typeAlias</span> <span class="hljs-attr">alias</span>=<span class="hljs-string">&quot;product&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;cn.kongwei_liao.domain.Product&quot;</span> /&gt;</span><br><br><span class="hljs-comment">&lt;!-- åšé¡¹ç›®çš„æ—¶å€™ä½¿ç”¨ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">package</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;cn.kongwei_liao.domain&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">typeAliases</span>&gt;</span><br></code></pre></td></tr></table></figure><p>Springé›†æˆé¡¹ç›®ä¸­çš„applicationContext.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;sqlSessionFactory&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span><br>... ...<br><span class="hljs-comment">&lt;!--åˆ«åçš„é…ç½®:domain query--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;typeAliasesPackage&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;edu.zzu.domain,edu.zzu.query&quot;</span>/&gt;</span><br><span class="hljs-comment">&lt;!--&lt;property name=&quot;typeAliases&quot;  value=&quot;&quot;/&gt;--&gt;</span><br>... ...<br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure><p>æ³¨ï¼šå¿…éœ€åœ¨ä¸»é…ç½®æ–‡ä»¶ä¸­è®¾ç½®åˆ«åï¼Œå…¶å®ƒåœ°æ–¹ï¼ˆå¦‚æ˜ å°„æ–‡ä»¶ä¸­ï¼‰æ‰å¯ä»¥ä½¿ç”¨ï¼ˆåˆ‡è®°ï¼åˆ‡è®°ï¼ï¼‰ã€‚</p><h4 id="5-4ã€åˆ—åä¸å±æ€§åä¸å¯¹åº”çš„è§£å†³resultMap"><a href="#5-4ã€åˆ—åä¸å±æ€§åä¸å¯¹åº”çš„è§£å†³resultMap" class="headerlink" title="5.4ã€åˆ—åä¸å±æ€§åä¸å¯¹åº”çš„è§£å†³resultMap"></a>5.4ã€åˆ—åä¸å±æ€§åä¸å¯¹åº”çš„è§£å†³resultMap</h4><p>ä¹‹å‰åšæ˜ å°„æ–‡ä»¶çš„æ—¶å€™ï¼Œåªåšäº†<code>æ•°æ®åº“è¡¨</code>ä¸<code>Javaå¯¹è±¡</code>ä¹‹é—´çš„è”ç³»ã€‚å¹¶æ²¡æœ‰åš<code>è¡¨å­—æ®µ</code>ä¸<code>Javaå¯¹è±¡å±æ€§</code>ä¹‹é—´çš„è”ç³»ã€‚å®ƒä»¬ä¹‹é—´æ˜¯å¦‚ä½•è”ç³»çš„ï¼Ÿ</p><p><strong>ç”±äºä¹‹å‰å’±ä»¬çš„  <code>æ•°æ®åº“è¡¨å­—æ®µå</code> ä¸  <code>JavaBeanå±æ€§å</code> æ˜¯ä¸€è‡´çš„ï¼Œå› æ­¤MyBatisæ¡†æ¶å¯ä»¥å¯¹æ­¤è¿›è¡Œè‡ªåŠ¨è¯†åˆ«ã€‚</strong></p><p><strong>é‚£ä¹ˆï¼š</strong>å¦‚æœå’±ä»¬çš„  åˆ—å  ä¸  Javaå¯¹è±¡å±æ€§å  ä¸ä¸€è‡´äº† ( å¯¹åº”ä¸ä¸Š )ï¼Œè¿™æ—¶å€™åº”è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p><p>è¿™æ—¶å€™ï¼Œå°±éœ€è¦æˆ‘ä»¬å¼€å‘äººå‘˜å‘Šè¯‰MyBatisæ¡†æ¶ï¼Œæˆ‘ä»¬éœ€è¦æŠŠå“ªäº›å­—æ®µåä¸å±æ€§åå¯¹åº”ä¸Šã€‚</p><p>åœ¨MyBatisä¸­ï¼Œæä¾›äº†ä¸€ä¸ª<code>resultMapçš„æ ‡ç­¾</code>ï¼Œå°±æ˜¯è®©æˆ‘ä»¬æ¥<code>å®Œæˆè¿”å›ç»“æœçš„å…³ç³»å¯¹åº”</code>çš„ï¼Œä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š</p><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="xml"><span class="hljs-comment">&lt;!-- </span></span><br><span class="xml">è¿”å›çš„æ•°æ®æ˜ å°„ </span><br><span class="xml">typeï¼šä»£è¡¨æ˜¯è¦æ˜ å°„çš„å¯¹è±¡</span><br><span class="xml">idï¼šä»£è¡¨å”¯ä¸€(è¿‡ä¼šæˆ‘ä»¬è¦æ‹¿åˆ°å®ƒ)</span><br><span class="xml">--&gt;</span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;cn.kongwei_liao.domain.Product&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;BaseResultMap&quot;</span>&gt;</span></span><br><span class="xml"><span class="hljs-comment">&lt;!-- </span></span><br><span class="xml">column: æ•°æ®åº“è¡¨ä¸­çš„åˆ—å</span><br><span class="xml">property: JavaBeanä¸­çš„å±æ€§å</span><br><span class="xml"> --&gt;</span><br><span class="xml"> </span><br><span class="xml"><span class="hljs-comment">&lt;!-- productè¡¨ä¸»é”®ä¸ºidï¼Œå¯¹åº”Productå¯¹è±¡ä¸­çš„idå±æ€§ --&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;id&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;id&quot;</span>  /&gt;</span></span><br><span class="xml"></span><br><span class="xml"><span class="hljs-comment">&lt;!-- å…¶ä»–è¡¨å­—æ®µï¼Œä¸Productå¯¹è±¡ä¸­å±æ€§å¯¹åº” --&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;productName&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;name&quot;</span> /&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span></span><br><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;queryOne&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;long&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;BaseResultMap&quot;</span>&gt;</span></span><br><span class="xml">select * from product where id = #</span><span class="hljs-template-variable">&#123;id&#125;</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h3 id="6ã€å¸¸è§å¼‚å¸¸"><a href="#6ã€å¸¸è§å¼‚å¸¸" class="headerlink" title="6ã€å¸¸è§å¼‚å¸¸"></a>6ã€å¸¸è§å¼‚å¸¸</h3><ol><li><p>java.lang.ClassNotFoundException: Cannot find class: id</p><p>&lt;delete id=â€deleteâ€ parameterType=â€idâ€&gt;    åº”è¯¥ä¼ å…¥longç±»å‹ï¼Œè€Œä¸æ˜¯idï¼›</p></li><li><p>Caused by: org.xml.sax.SAXParseException; lineNumber: 23; columnNumber: 4</p><p>å…ƒç´ ç±»å‹ â€œselectâ€ å¿…é¡»ç”±åŒ¹é…çš„ç»“æŸæ ‡è®° â€œ&lt;/select&gt;â€ ç»ˆæ­¢ï¼›</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- selectæ ‡ç­¾å¼€å§‹ï¼Œinsertæ ‡ç­¾ç»“æŸå¯¼è‡´çš„é”™è¯¯ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getAll&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;cn.kongwei_liao.domain.Product&quot;</span>&gt;</span><br>select id,productName,salePrice,costPrice,cutoff,supplier,brand,dir_id from<br>product<br><span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>Caused by: java.lang.IllegalArgumentException: Mapped Statements collection does not contain value for cn.kongwei_liao.domain.ProductMapper.get</p><p>é…ç½®æ–‡ä»¶é‡Œé¢æ²¡æœ‰åŒ¹é…çš„æ˜ å°„å…³ç³»ï¼ˆé”™è¯¯æ˜ å°„ï¼Œæˆ–æœªæ˜ å°„ï¼‰ï¼›</p></li><li><p>Caused by: org.apache.ibatis.reflection.ReflectionException: There is no getter for property named â€˜productNameâ€™ in â€˜class cn.kongwei_liao.domain.Productâ€™</p><p>Product ç±»é‡Œé¢æ²¡æœ‰ â€˜productNameâ€™ è¿™ä¸ªå±æ€§ã€‚</p></li></ol><h3 id="7ã€å¸¸è§é—®é¢˜"><a href="#7ã€å¸¸è§é—®é¢˜" class="headerlink" title="7ã€å¸¸è§é—®é¢˜"></a>7ã€å¸¸è§é—®é¢˜</h3><ol><li>   æ²¡æœ‰å¯¼å…¥æ•°æ®åº“çš„é©±åŠ¨åŒ…ï¼›</li><li>   åœ¨XMLä¸­å¾ˆå¤šéƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œç»†å¿ƒï¼Œä¸è¦å†™é”™ï¼›</li><li>   åœ¨æ˜ å°„æ–‡ä»¶ä¸­å…¨é™å®šç±»åå¯èƒ½ä¼šå†™é”™ï¼›</li><li>   æ‰¾ä¸åˆ°ç›¸åº”çš„Statement(sqlè¯­å¥)ï¼›</li><li>   æ‰¾SQLçš„Statementå†™é”™äº†ï¼›</li><li>   åœ¨æ ¸å¿ƒXMLä¸­æ²¡æœ‰æ‰¾ç›¸åº”çš„æ˜ å°„æ–‡ä»¶ï¼›</li><li>   åœ¨æˆ‘ä»¬è°ƒç”¨Statementï¼ˆsqlè¯­å¥ï¼‰çš„æ—¶å€™ï¼Œç»å¸¸ä¼šå¿˜è®°ä¼ å‚ï¼›</li><li>   æ‰§è¡ŒæˆåŠŸåï¼Œæ•°æ®åº“å´æ²¡æœ‰åæ˜ ï¼Œå¾ˆæœ‰å¯èƒ½æ˜¯æ²¡æœ‰æäº¤äº‹åŠ¡ï¼›</li><li>   å¯èƒ½æˆ‘ä»¬å¿˜äº†å†™æ‰§è¡Œçš„ä»£ç äº†ï¼›</li><li>   é”™è¯¯ä¸€å®šè¦æ‰“å°å‡ºæ¥ï¼ˆæ‰§è¡Œçš„æ—¶å€™æ²¡æ•ˆæœï¼Œä½†æ˜¯åˆä¸æŠ¥é”™ï¼‰ï¼›</li><li>   Mapperä¸­å°±ç®—ä¸€ä¸ªè¯­å¥æ²¡æœ‰ä½¿ç”¨ï¼Œå®ƒçš„é”™ä¹Ÿå¯èƒ½ä¼šå½±å“åˆ°å…¶å®ƒæ­£ç¡®çš„è¯­å¥ï¼›</li><li>   æ¡†æ¶çš„é”™å¾€å¾€ä»åå‘å‰æ‰¾ï¼›</li><li>   ä½¿ç”¨æœªå®šä¹‰çš„åˆ«åï¼›</li><li>   Mysqlä¹±ç ï¼Œæ·»åŠ å­—ç¬¦ç¼–ç ã€è®¾ç½®æ—¶åŒºï¼šuseUnicode=true&amp;characterEncoding=UTF-8ã€‚</li></ol><h3 id="8ã€JDBCç±»å‹ä¸Javaç±»å‹å¯¹ç…§"><a href="#8ã€JDBCç±»å‹ä¸Javaç±»å‹å¯¹ç…§" class="headerlink" title="8ã€JDBCç±»å‹ä¸Javaç±»å‹å¯¹ç…§"></a>8ã€JDBCç±»å‹ä¸Javaç±»å‹å¯¹ç…§</h3><table><thead><tr><th align="left"><strong>JDBC ç±»å‹</strong></th><th align="left"><strong>Java ç±»å‹</strong></th></tr></thead><tbody><tr><td align="left"><code>CHAR</code></td><td align="left"><code>String</code></td></tr><tr><td align="left"><code>VARCHAR</code></td><td align="left"><code>String</code></td></tr><tr><td align="left"><code>LONGVARCHAR</code></td><td align="left"><code>String</code></td></tr><tr><td align="left"><code>NUMERIC</code></td><td align="left"><code>java.math.BigDecimal</code></td></tr><tr><td align="left"><code>DECIMAL</code></td><td align="left"><code>java.math.BigDecimal</code></td></tr><tr><td align="left"><code>BIT</code></td><td align="left"><code>boolean</code></td></tr><tr><td align="left"><code>TINYINT</code></td><td align="left"><code>byte</code></td></tr><tr><td align="left"><code>SMALLINT</code></td><td align="left"><code>short</code></td></tr><tr><td align="left"><code>INTEGER</code></td><td align="left"><code>int</code></td></tr><tr><td align="left"><code>BIGINT</code></td><td align="left"><code>long</code></td></tr><tr><td align="left"><code>REAL</code></td><td align="left"><code>float</code></td></tr><tr><td align="left"><code>FLOAT</code></td><td align="left"><code>double</code></td></tr><tr><td align="left"><code>DOUBLE</code></td><td align="left"><code>double</code></td></tr><tr><td align="left"><code>BINARY</code></td><td align="left"><code>byte[]</code></td></tr><tr><td align="left"><code>VARBINARY</code></td><td align="left"><code>byte[]</code></td></tr><tr><td align="left"><code>LONGVARBINARY</code></td><td align="left"><code>byte[]</code></td></tr><tr><td align="left"><code>DATE</code></td><td align="left"><code>java.sql.Date</code>ç»§æ‰¿äº†java.util.Date</td></tr><tr><td align="left"><code>TIME</code></td><td align="left"><code>java.sql.Time</code>ç»§æ‰¿äº†java.util.Date</td></tr><tr><td align="left"><code>TIMESTAMP</code></td><td align="left"><code>java.sql.Timestamp</code>ç»§æ‰¿äº†java.util.Date</td></tr></tbody></table><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">//æ•°æ®åº“ä¸­Dateç±»å‹ã€Javaä¸­Dateæ•°æ®ç±»å‹åˆ°å‰ç«¯æ˜¾ç¤ºæ—¶é—´é—®é¢˜ çš„å¤„ç†</span><br><span class="hljs-keyword">import</span> java.text.*;<br><span class="hljs-keyword">import</span> java.util.*;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Datetransform</span> </span>&#123;<br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * å°†Dateç±»æ—¥æœŸè½¬ä¸ºå­—ç¬¦ä¸²æ—¥æœŸ</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param </span>dateã€ <span class="hljs-doctag">@param </span>formatã€ <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment"> */</span><br> <br><span class="hljs-comment">//String DateFormatStr = &quot;yyyy-MM-dd HH:mm:ss&quot;;//å¹´-æœˆ-æ—¥ æ—¶:åˆ†:ç§’</span><br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">String</span> <span class="hljs-function"><span class="hljs-title">param</span>(<span class="hljs-params"><span class="hljs-built_in">Date</span> date, <span class="hljs-built_in">String</span> format</span>)</span> &#123;<br>SimpleDateFormat sdf = <span class="hljs-keyword">new</span> SimpleDateFormat(format);<br><span class="hljs-built_in">String</span> strDate = sdf.format(date);<span class="hljs-comment">//SimpleDateFormat.format(Date)--&gt;Stringæ—¶é—´å­—ç¬¦ä¸²</span><br><span class="hljs-keyword">return</span> strDate;<br>&#125;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * å°†å­—ç¬¦ä¸²æ—¥æœŸè½¬åŒ–æœªDateç±»æ—¥æœŸ</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param </span>strDateã€ <span class="hljs-doctag">@param </span>formatã€ <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">Date</span> <span class="hljs-function"><span class="hljs-title">parse</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> pStrDate, <span class="hljs-built_in">String</span> pformat</span>)</span> &#123;<br>SimpleDateFormat sdf = <span class="hljs-keyword">new</span> SimpleDateFormat(pformat);<br><span class="hljs-built_in">Date</span> date = <span class="hljs-literal">null</span>;<br><span class="hljs-keyword">try</span> &#123;<br>date = sdf.parse(pStrDate);<span class="hljs-comment">//SimpleDateFormat.parse(String)--&gt;Dateç±»æ—¶é—´å¯¹è±¡</span><br>&#125; <span class="hljs-keyword">catch</span> (ParseException e) &#123;<br>e.printStackTrace();<br>&#125;<br><span class="hljs-keyword">return</span> date;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="9ã€MyBatis-SQLå‚æ•°ä¼ é€’-â€¦-ã€-â€¦"><a href="#9ã€MyBatis-SQLå‚æ•°ä¼ é€’-â€¦-ã€-â€¦" class="headerlink" title="9ã€MyBatis SQLå‚æ•°ä¼ é€’#{â€¦}ã€${â€¦}"></a>9ã€MyBatis SQLå‚æ•°ä¼ é€’#{â€¦}ã€${â€¦}</h3><p><code>#&#123;OGNLè¡¨è¾¾å¼&#125;</code> å’Œ <code>$&#123;OGNLè¡¨è¾¾å¼&#125;</code> çš„åŒºåˆ«</p><h4 id="9-1ã€-OGNLè¡¨è¾¾å¼"><a href="#9-1ã€-OGNLè¡¨è¾¾å¼" class="headerlink" title="9.1ã€#{OGNLè¡¨è¾¾å¼}"></a>9.1ã€#{OGNLè¡¨è¾¾å¼}</h4><p>MyBatisä¼šæŠŠè¿™ä¸ªè¡¨è¾¾å¼ä½¿ç”¨   â€œ ?(å ä½ç¬¦) â€   æ›¿æ¢ï¼Œä½œä¸º<code>ä¸€ä¸ªsqlå‚æ•°</code>ä½¿ç”¨</p><p>æ¯”å¦‚nameçš„å€¼ä¸º: </p><p>â€‹        å®šä¹‰SQL: <code>select * from t_user where name = #&#123;name&#125;</code></p><p>â€‹        æœ€ç»ˆSQL: <code>select * from t_user where name = ?</code></p><h4 id="9-2ã€-OGNLè¡¨è¾¾å¼"><a href="#9-2ã€-OGNLè¡¨è¾¾å¼" class="headerlink" title="9.2ã€${OGNLè¡¨è¾¾å¼}"></a>9.2ã€${OGNLè¡¨è¾¾å¼}</h4><p>MyBatisä¼šæŠŠè¿™ä¸ªè¡¨è¾¾å¼çš„å€¼  æ›¿æ¢åˆ°sqlä¸­  ï¼Œä½œä¸º<code>sqlçš„ç»„æˆéƒ¨åˆ†</code></p><p>è¯¥æ–¹å¼ä¸»è¦ç”¨äºç¨‹åºæ‹¼æ¥SQL</p><p>æ¯”å¦‚nameçš„å€¼ä¸º: â€˜<code>1 or 1=1</code>â€˜</p><p>â€‹        å®šä¹‰SQL: select * from t_user where name = ${id}</p><p>â€‹        æœ€ç»ˆSQL: select * from t_user where name = <code>1 or 1=1</code> å‡ºç°sqlæ³¨å…¥</p><p>å¦‚æœsqlä¸­ä½¿ç”¨${OGNL}ï¼Œå¹¶ä¸”å‚æ•°çš„ç±»å‹æ˜¯(Integerï¼ŒStringâ€¦.)é‚£ä¹ˆOGNLè¡¨è¾¾å¼å¯ä»¥å†™æˆä»»æ„ä¸œè¥¿;</p><h4 id="9-3ã€SQLæ³¨å…¥"><a href="#9-3ã€SQLæ³¨å…¥" class="headerlink" title="9.3ã€SQLæ³¨å…¥"></a>9.3ã€SQLæ³¨å…¥</h4><p>é¢„é˜²sqlæ³¨å…¥ï¼Œä½¿ç”¨ å ä½ç¬¦(?PrepareStatement) æŸ¥è¯¢</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> employee <span class="hljs-keyword">where</span> username=? <span class="hljs-keyword">and</span> <span class="hljs-keyword">password</span>=?<br><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> employee <span class="hljs-keyword">where</span> username=<span class="hljs-string">&#x27;admin&#x27;</span> <span class="hljs-keyword">and</span> <span class="hljs-keyword">password</span>=<span class="hljs-string">&#x27;admin&#x27;</span><br></code></pre></td></tr></table></figure><p>å­—ç¬¦ä¸²æ‹¼æ¥ï¼Œä¼šå¯¼è‡´å‡ºç°sqlæ³¨å…¥</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> employee <span class="hljs-keyword">where</span> username=<span class="hljs-string">&#x27;admin&#x27;</span> <span class="hljs-keyword">and</span> <span class="hljs-keyword">password</span>=<span class="hljs-string">&#x27;0000&#x27;</span> <span class="hljs-keyword">or</span> <span class="hljs-string">&#x27;1&#x27;</span>=<span class="hljs-string">&#x27;1&#x27;</span><br></code></pre></td></tr></table></figure><h4 id="9-4ã€-OGNL-è¡¨è¾¾å¼çš„åº”ç”¨åœºæ™¯"><a href="#9-4ã€-OGNL-è¡¨è¾¾å¼çš„åº”ç”¨åœºæ™¯" class="headerlink" title="9.4ã€${OGNL}è¡¨è¾¾å¼çš„åº”ç”¨åœºæ™¯"></a>9.4ã€${OGNL}è¡¨è¾¾å¼çš„åº”ç”¨åœºæ™¯</h4><p>ä¸èƒ½ç”¨åœ¨ç™»å½•åœºæ™¯ï¼Œä¼šå‡ºç°sqlæ³¨å…¥ï¼›</p><p>ç”¨åœ¨ <code>order byçš„åœºæ™¯</code> æˆ– <code>å¤æ‚çš„å‚æ•°ä¼ é€’</code>ï¼š</p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs maxima">Map&lt;String,Object&gt;  <br><span class="hljs-built_in">map</span>.<span class="hljs-built_in">put</span>(<span class="hljs-string">&quot;orderBy&quot;</span>,&#x27;name desc&#x27;);<br><span class="hljs-built_in">map</span>.<span class="hljs-built_in">put</span>(<span class="hljs-string">&quot;begin&quot;</span>,<span class="hljs-number">0</span>);<br><span class="hljs-built_in">map</span>.<span class="hljs-built_in">put</span>(<span class="hljs-string">&quot;end&quot;</span>,<span class="hljs-number">10</span>);<br><br><span class="hljs-built_in">map</span>.<span class="hljs-built_in">put</span>(<span class="hljs-string">&quot;minAge&quot;</span>,<span class="hljs-number">19</span>);<br><span class="hljs-built_in">map</span>.<span class="hljs-built_in">put</span>(<span class="hljs-string">&quot;maxAge&quot;</span>,<span class="hljs-number">90</span>);<br>List&lt;User&gt; users1=session.selectList(<span class="hljs-string">&quot;cn.kongwei_liao.mapper.UserMapper&quot;</span>+<span class="hljs-string">&quot;.selectRange&quot;</span>,<span class="hljs-built_in">map</span>);<br>List&lt;User&gt; users2=session.selectList(<span class="hljs-string">&quot;cn.kongwei_liao.mapper.UserMapper&quot;</span>+<span class="hljs-string">&quot;.findByOrderBy&quot;</span>,<span class="hljs-built_in">map</span>);<br></code></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs awk">&lt;select id=<span class="hljs-string">&quot;findByOrderBy&quot;</span> parameterType=<span class="hljs-string">&quot;map&quot;</span> resultType=cn.kongwei_liao.domain.Use<span class="hljs-string">r&quot;&gt;</span><br><span class="hljs-string">select * from t_user order by $&#123;orderBy&#125; limit $&#123;begin&#125;,$&#123;end&#125;</span><br><span class="hljs-string">&lt;/select&gt;</span><br><span class="hljs-string">&lt;select id=&quot;</span>selectRange<span class="hljs-string">&quot; parameterType=&quot;</span>map<span class="hljs-string">&quot; resultType=cn.kongwei_liao.domain.User&quot;</span>&gt;<br>select * from t_user where age between <span class="hljs-comment">#&#123;minAge&#125; and #&#123;maxAge&#125;</span><br>&lt;/select&gt;<br></code></pre></td></tr></table></figure><p>åœ¨jdbcçš„sqlä»£ç order byåé¢ä¸èƒ½ä½¿ç”¨å ä½ç¬¦?   åªèƒ½è¿›è¡Œå­—ç¬¦ä¸²çš„æ‹¼æ¥ã€‚</p><h3 id="10ã€å…³è”æŸ¥è¯¢æ˜ å°„ï¼ˆå¤šå¯¹ä¸€ï¼‰"><a href="#10ã€å…³è”æŸ¥è¯¢æ˜ å°„ï¼ˆå¤šå¯¹ä¸€ï¼‰" class="headerlink" title="10ã€å…³è”æŸ¥è¯¢æ˜ å°„ï¼ˆå¤šå¯¹ä¸€ï¼‰"></a>10ã€å…³è”æŸ¥è¯¢æ˜ å°„ï¼ˆå¤šå¯¹ä¸€ï¼‰</h3><p>åœ¨æœ‰å¤šä¸ªå‘˜å·¥å¯¹åº”æœ‰åŒä¸€ä¸ªéƒ¨é—¨çš„æƒ…å†µï¼Œæ ¹æ®ç”¨æˆ·idæŸ¥è¯¢è¯¥ç”¨æˆ·ä¿¡æ¯åŠå…¶æ‰€åœ¨çš„éƒ¨é—¨åç§°ã€‚</p><h4 id="10-1ã€åˆ›å»ºæ¡ˆä¾‹æ•°æ®åº“"><a href="#10-1ã€åˆ›å»ºæ¡ˆä¾‹æ•°æ®åº“" class="headerlink" title="10.1ã€åˆ›å»ºæ¡ˆä¾‹æ•°æ®åº“"></a>10.1ã€åˆ›å»ºæ¡ˆä¾‹æ•°æ®åº“</h4><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">CREATE</span> TABLE <span class="hljs-symbol">`t_dept`</span> (<br><br><span class="hljs-symbol">`id`</span> bigint(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> AUTO_INCREMENT,<br><span class="hljs-symbol">`name`</span> varchar(<span class="hljs-number">255</span>) DEFAULT <span class="hljs-literal">NULL</span>,<br> <br><span class="hljs-keyword">PRIMARY</span> <span class="hljs-keyword">KEY</span> (<span class="hljs-symbol">`id`</span>)<br>) ENGINE=InnoDB DEFAULT CHARSET=utf8;<br></code></pre></td></tr></table></figure><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">CREATE</span> TABLE <span class="hljs-symbol">`t_user`</span> (<br><br><span class="hljs-symbol">`id`</span> bigint(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> AUTO_INCREMENT,<br> <span class="hljs-symbol">`name`</span> varchar(<span class="hljs-number">255</span>) DEFAULT <span class="hljs-literal">NULL</span>,<br> <span class="hljs-symbol">`password`</span> varchar(<span class="hljs-number">255</span>) DEFAULT <span class="hljs-literal">NULL</span>,<br> <span class="hljs-symbol">`dept_id`</span> bigint(<span class="hljs-number">20</span>) DEFAULT <span class="hljs-literal">NULL</span>,<br> <br> <span class="hljs-keyword">PRIMARY</span> <span class="hljs-keyword">KEY</span> (<span class="hljs-symbol">`id`</span>),<br> <span class="hljs-keyword">KEY</span> <span class="hljs-symbol">`fk1`</span> (<span class="hljs-symbol">`dept_id`</span>),<br> CONSTRAINT <span class="hljs-symbol">`fk1`</span> FOREIGN <span class="hljs-keyword">KEY</span> (<span class="hljs-symbol">`dept_id`</span>) REFERENCES <span class="hljs-symbol">`t_dept`</span> (<span class="hljs-symbol">`id`</span>)<br> <br>) ENGINE=InnoDB DEFAULT CHARSET=utf8;<br></code></pre></td></tr></table></figure><p>[^CONSTRAINT]: CONSTRAINT [kÉ™nËˆstreÉªnt]  n. é™åˆ¶; é™å®š; çº¦æŸ; ä¸¥ç®¡;</p><h4 id="10-2ã€å»ºç«‹æ¨¡å‹å±‚ï¼šDeptã€Userç­‰çš„JavaBean"><a href="#10-2ã€å»ºç«‹æ¨¡å‹å±‚ï¼šDeptã€Userç­‰çš„JavaBean" class="headerlink" title="10.2ã€å»ºç«‹æ¨¡å‹å±‚ï¼šDeptã€Userç­‰çš„JavaBean"></a>10.2ã€å»ºç«‹æ¨¡å‹å±‚ï¼šDeptã€Userç­‰çš„JavaBean</h4><h4 id="10-3ã€é…ç½®æ–‡ä»¶MyBatis-Config-xml"><a href="#10-3ã€é…ç½®æ–‡ä»¶MyBatis-Config-xml" class="headerlink" title="10.3ã€é…ç½®æ–‡ä»¶MyBatis-Config.xml"></a>10.3ã€é…ç½®æ–‡ä»¶MyBatis-Config.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- å•å‘å¤šå¯¹ä¸€ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;cn/kongwei_liao/mapper/DomainMapper.xml&quot;</span> /&gt;</span><br></code></pre></td></tr></table></figure><h4 id="10-4ã€æ˜ å°„æ–‡ä»¶DomainMapper-xml"><a href="#10-4ã€æ˜ å°„æ–‡ä»¶DomainMapper-xml" class="headerlink" title="10.4ã€æ˜ å°„æ–‡ä»¶DomainMapper.xml"></a>10.4ã€æ˜ å°„æ–‡ä»¶DomainMapper.xml</h4><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;cn.kongwei_liao.mapper.DomainMapper&quot;</span>&gt;</span></span><br><br><span class="xml"><span class="hljs-comment">&lt;!-- ä¿å­˜éƒ¨é—¨ --&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;saveDept&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;cn.kongwei_liao.mapper.Dept&quot;</span> <span class="hljs-attr">useGeneratedKeys</span>=<span class="hljs-string">&quot;true&quot;</span></span></span><br><span class="xml">keyProperty=&quot;id&quot;&gt;</span><br><span class="xml">insert into t_dept(name) values(#</span><span class="hljs-template-variable">&#123;name&#125;</span><span class="xml">)</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span></span><br><span class="xml"></span><br><span class="xml"><span class="hljs-comment">&lt;!-- ä¿å­˜ç”¨æˆ· --&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;saveUser&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;cn.kongwei_liao.mapper.User&quot;</span> <span class="hljs-attr">useGeneratedKeys</span>=<span class="hljs-string">&quot;true&quot;</span></span></span><br><span class="xml">keyProperty=&quot;id&quot;&gt;</span><br><span class="xml">insert into t_user(name,password,dept_id) values(#</span><span class="hljs-template-variable">&#123;name&#125;</span><span class="xml">,#</span><span class="hljs-template-variable">&#123;password&#125;</span><span class="xml">,#</span><span class="hljs-template-variable">&#123;dept.id&#125;</span><span class="xml">)</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span></span><br><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h4 id="10-5ã€ä¿å­˜æµ‹è¯•æ•°æ®"><a href="#10-5ã€ä¿å­˜æµ‹è¯•æ•°æ®" class="headerlink" title="10.5ã€ä¿å­˜æµ‹è¯•æ•°æ®"></a>10.5ã€ä¿å­˜æµ‹è¯•æ•°æ®</h4><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">String NAME_SPACE = &quot;cn.kongwei_liao.mapper.DomainMapper&quot;;<br><br>@Test<br><span class="hljs-built_in">public</span> <span class="hljs-type">void</span> testSave() &#123;<br>SqlSession <span class="hljs-keyword">session</span> = MyBatisUtils.getSession();<br>// å…ˆä¿å­˜éƒ¨é—¨<br>Dept dept1 = <span class="hljs-built_in">new</span> Dept();<br>dept1.setName(&quot;éƒ¨é—¨1&quot;);//æœªè®¾ä¸»é”®ï¼Œæ’å…¥è®°å½•ä¸»é”®è‡ªå¢<br>Dept dept2 = <span class="hljs-built_in">new</span> Dept();<br>dept2.setName(&quot;éƒ¨é—¨2&quot;);<br><span class="hljs-keyword">session</span>.<span class="hljs-keyword">insert</span>(NAME_SPACE + &quot;.saveDept&quot;, dept1);<br><span class="hljs-keyword">session</span>.<span class="hljs-keyword">insert</span>(NAME_SPACE + &quot;.saveDept&quot;, dept2);<br><br>// åœ¨ä¿å­˜ç”¨æˆ·<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; <span class="hljs-number">11</span>; i++) &#123;<br><span class="hljs-keyword">User</span> <span class="hljs-keyword">user</span> = <span class="hljs-built_in">new</span> <span class="hljs-keyword">User</span>();<br><span class="hljs-keyword">user</span>.setName(&quot;user&quot; + i);<br><span class="hljs-keyword">user</span>.setPassword(&quot;admin&quot;);<br><span class="hljs-keyword">if</span> (i % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>) &#123;<br><span class="hljs-keyword">user</span>.setDept(dept1); // <span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> t_user(dept_id) <span class="hljs-keyword">values</span>(#&#123;dept.id&#125;)<br>&#125; <span class="hljs-keyword">else</span> &#123;<br><span class="hljs-keyword">user</span>.setDept(dept2);<br>&#125;<br><span class="hljs-keyword">session</span>.<span class="hljs-keyword">insert</span>(NAME_SPACE + &quot;.saveUser&quot;, <span class="hljs-keyword">user</span>);<br>&#125;<br><br><span class="hljs-keyword">session</span>.<span class="hljs-keyword">commit</span>();<br><span class="hljs-keyword">session</span>.<span class="hljs-keyword">close</span>();<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="10-6ã€å¤šä¸ªè¡¨å…³è”æŸ¥è¯¢"><a href="#10-6ã€å¤šä¸ªè¡¨å…³è”æŸ¥è¯¢" class="headerlink" title="10.6ã€å¤šä¸ªè¡¨å…³è”æŸ¥è¯¢"></a>10.6ã€å¤šä¸ªè¡¨å…³è”æŸ¥è¯¢</h4><h5 id="10-6-1ã€å•è¡¨æŸ¥è¯¢ï¼Œä¸èƒ½æŸ¥è¯¢éƒ¨é—¨çš„åç§°"><a href="#10-6-1ã€å•è¡¨æŸ¥è¯¢ï¼Œä¸èƒ½æŸ¥è¯¢éƒ¨é—¨çš„åç§°" class="headerlink" title="10.6.1ã€å•è¡¨æŸ¥è¯¢ï¼Œä¸èƒ½æŸ¥è¯¢éƒ¨é—¨çš„åç§°"></a>10.6.1ã€å•è¡¨æŸ¥è¯¢ï¼Œä¸èƒ½æŸ¥è¯¢éƒ¨é—¨çš„åç§°</h5><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;cn.kongwei_liao.mapper.DomainMapper&quot;</span>&gt;</span></span><br><br><span class="xml"><span class="hljs-comment">&lt;!-- ä¿å­˜éƒ¨é—¨ --&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;saveDept&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;cn.kongwei_liao.mapper.Dept&quot;</span> <span class="hljs-attr">useGeneratedKeys</span>=<span class="hljs-string">&quot;true&quot;</span></span></span><br><span class="xml">keyProperty=&quot;id&quot;&gt;</span><br><span class="xml">insert into t_dept(name) values(#</span><span class="hljs-template-variable">&#123;name&#125;</span><span class="xml">)</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span></span><br><span class="xml"></span><br><span class="xml"><span class="hljs-comment">&lt;!-- ä¿å­˜ç”¨æˆ· --&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;saveUser&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;cn.kongwei_liao.mapper.User&quot;</span> <span class="hljs-attr">useGeneratedKeys</span>=<span class="hljs-string">&quot;true&quot;</span></span></span><br><span class="xml">keyProperty=&quot;id&quot;&gt;</span><br><span class="xml">insert into t_user(name,password,dept_id) values(#</span><span class="hljs-template-variable">&#123;name&#125;</span><span class="xml">,#</span><span class="hljs-template-variable">&#123;password&#125;</span><span class="xml">,#</span><span class="hljs-template-variable">&#123;dept.id&#125;</span><span class="xml">)</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span></span><br><span class="xml"></span><br><span class="xml"><span class="hljs-comment">&lt;!-- æŸ¥è¯¢ç”¨æˆ· --&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getAll&quot;</span> <span class="hljs-attr">resuleType</span>=<span class="hljs-string">&quot;cn.kongwei_liao.mapper.User&quot;</span> <span class="hljs-attr">useGeneratedKeys</span>=<span class="hljs-string">&quot;true&quot;</span> <span class="hljs-attr">keyProperty</span>=<span class="hljs-string">&quot;id&quot;</span>&gt;</span></span><br><span class="xml">select * from t_user</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></span><br><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h5 id="10-6-2ã€ç­‰å€¼è¿æ¥æŸ¥è¯¢"><a href="#10-6-2ã€ç­‰å€¼è¿æ¥æŸ¥è¯¢" class="headerlink" title="10.6.2ã€ç­‰å€¼è¿æ¥æŸ¥è¯¢"></a>10.6.2ã€ç­‰å€¼è¿æ¥æŸ¥è¯¢</h5><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs applescript">select u.*,d.*<br><span class="hljs-keyword">from</span> t_user u,t_dept d<br><span class="hljs-keyword">where</span> u.dept_id=d.<span class="hljs-built_in">id</span><br></code></pre></td></tr></table></figure><h5 id="10-6-3ã€å†…è¿æ¥æŸ¥è¯¢"><a href="#10-6-3ã€å†…è¿æ¥æŸ¥è¯¢" class="headerlink" title="10.6.3ã€å†…è¿æ¥æŸ¥è¯¢"></a>10.6.3ã€å†…è¿æ¥æŸ¥è¯¢</h5><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">select</span> u.*,d.*<br><span class="hljs-keyword">from</span> t_user u <br><span class="hljs-keyword">join</span> t_dept d<br><span class="hljs-keyword">on</span> u.dept_id=d.id<br></code></pre></td></tr></table></figure><h5 id="10-6-4ã€å·¦å¤–è¿æ¥æŸ¥è¯¢"><a href="#10-6-4ã€å·¦å¤–è¿æ¥æŸ¥è¯¢" class="headerlink" title="10.6.4ã€å·¦å¤–è¿æ¥æŸ¥è¯¢"></a>10.6.4ã€å·¦å¤–è¿æ¥æŸ¥è¯¢</h5><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">select</span> u.*,d.*<br><span class="hljs-keyword">from</span> t_user u <br><span class="hljs-keyword">left</span> <span class="hljs-keyword">join</span> t_dept d<br><span class="hljs-keyword">on</span> u.dept_id=d.id<br></code></pre></td></tr></table></figure><h5 id="10-6-5ã€æµ‹è¯•ç”¨ä¾‹"><a href="#10-6-5ã€æµ‹è¯•ç”¨ä¾‹" class="headerlink" title="10.6.5ã€æµ‹è¯•ç”¨ä¾‹"></a>10.6.5ã€æµ‹è¯•ç”¨ä¾‹</h5><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">@Test<br><span class="hljs-built_in">public</span> <span class="hljs-type">void</span> testGetAll() &#123;<br>SqlSession <span class="hljs-keyword">session</span> = MyBatisUtils.getSession();<br>List&lt;<span class="hljs-keyword">User</span>&gt; list = <span class="hljs-keyword">session</span>.selectList(NAME_SPACE + &quot;.getAll&quot;);//NAME_SPACE + &quot;.ï¼Ÿ&quot;<br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">User</span> <span class="hljs-keyword">user</span> : list) &#123;<br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(<span class="hljs-keyword">user</span>);<br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(<span class="hljs-keyword">user</span>.getDept());<br>&#125;<br><span class="hljs-keyword">session</span>.<span class="hljs-keyword">close</span>();<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="10-7ã€MyBatisæä¾›ä¸¤ç§æ–¹å¼å¤„ç†associateå…³è”å¯¹è±¡"><a href="#10-7ã€MyBatisæä¾›ä¸¤ç§æ–¹å¼å¤„ç†associateå…³è”å¯¹è±¡" class="headerlink" title="10.7ã€MyBatisæä¾›ä¸¤ç§æ–¹å¼å¤„ç†associateå…³è”å¯¹è±¡"></a>10.7ã€MyBatisæä¾›ä¸¤ç§æ–¹å¼å¤„ç†associateå…³è”å¯¹è±¡</h4><h5 id="10-7-1ã€åµŒå¥—ç»“æœ"><a href="#10-7-1ã€åµŒå¥—ç»“æœ" class="headerlink" title="10.7.1ã€åµŒå¥—ç»“æœ"></a>10.7.1ã€åµŒå¥—ç»“æœ</h5><p>å‘ä¸€æ¡å·¦å¤–è¿æ¥sqlè§£å†³é—®é¢˜ï¼Œæ˜ å°„æ–‡ä»¶Mapperç»“æœçš„æ‰‹åŠ¨å°è£…ResultMap</p><p>ä½¿ç”¨åµŒå¥—ç»“æœæ˜ å°„æ¥å¤„ç†é‡å¤çš„è”åˆç»“æœçš„å­é›†ã€‚è¿™ç§æ–¹å¼ï¼Œæ‰€æœ‰å±æ€§æ˜ å°„éƒ½è¦è‡ªå·±æ¥ï¼Œæ²¡åŠæ³•é€šè¿‡ä»£ç ç”Ÿæˆå™¨ç”Ÿæˆï¼</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;cn.kongwei_liao.mapper.DomainMapper&quot;</span>&gt;</span><br><span class="hljs-comment">&lt;!-- User:Dept  å¤šå¯¹ä¸€å…³ç³» --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;cn.kongwei_liao.domain.User&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userResultMap&quot;</span>&gt;</span><br><span class="hljs-comment">&lt;!-- Userè¡¨ä¸»é”®id ä¸ Userå®ä½“ç±»idå±æ€§ å¯¹åº” --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;id&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;id&quot;</span> /&gt;</span><br><br><span class="hljs-comment">&lt;!-- Userè¡¨å…¶ä»–å­—æ®µ ä¸ Userå®ä½“ç±»å…¶å®ƒå±æ€§ å¯¹åº” --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;name&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;password&quot;</span> /&gt;</span><br><br><span class="hljs-comment">&lt;!-- æ­¤å¤„associateæ ‡ç­¾çš„propertyå±æ€§å€¼åº”æ˜¯åœ¨Userå®ä½“ç±»å†…å®šä¹‰çš„å±æ€§ï¼Œå±æ€§ådeptï¼Œè¯¥å±æ€§ç±»å‹æ˜¯cn.kongwei_liai.Dept --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">association</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;dept&quot;</span> <span class="hljs-attr">javaType</span>=<span class="hljs-string">&quot;cn.kongwei_liao.Dept&quot;</span>&gt;</span><br><span class="hljs-comment">&lt;!-- Deptè¡¨ä¸»é”®id ä¸ Deptå®ä½“ç±»idå±æ€§ å¯¹åº” --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;id&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;did&quot;</span> /&gt;</span><br><br><span class="hljs-comment">&lt;!-- Deptè¡¨å…¶å®ƒå­—æ®µ ä¸ Deptå®ä½“ç±»å…¶å®ƒå±æ€§ å¯¹åº” --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;dname&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">association</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- åµŒå¥—ç»“æœï¼ˆå‘ä¸€æ¡å·¦å¤–è¿æ¥sqlè§£å†³é—®é¢˜ï¼Œæ˜ å°„æ–‡ä»¶Mapperç»“æœçš„æ‰‹åŠ¨å°è£…ResultMapï¼‰ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getAll&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;userResultMap&quot;</span>&gt;</span><br>select u.id,u.name,u.password,d.id did,d.name dname<br>from t_user u<br>left join t_dept d<br>on u.dept_id=d.id<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br></code></pre></td></tr></table></figure><h5 id="10-7-2ã€åµŒå¥—æŸ¥è¯¢"><a href="#10-7-2ã€åµŒå¥—æŸ¥è¯¢" class="headerlink" title="10.7.2ã€åµŒå¥—æŸ¥è¯¢"></a>10.7.2ã€åµŒå¥—æŸ¥è¯¢</h5><p>å‘  ä¸€æ¡æŸ¥è¯¢user  å’Œ  næ¡æŸ¥è¯¢dept   è§£å†³é—®é¢˜ï¼Œæ˜ å°„æ–‡ä»¶Mapperç»“æœçš„è‡ªåŠ¨å°è£…userResultMap</p><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;cn.kongwei_liao.mapper.DomainMapper&quot;</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userResultMap&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;cn.kongwei_liao.domain.User&quot;</span> &gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;id&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;id&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;username&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;password&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span></span><br><span class="xml">   </span><br><span class="xml"><span class="hljs-comment">&lt;!-- æ­¤å¤„associateæ ‡ç­¾çš„</span></span><br><span class="xml">   propertyå±æ€§å€¼ï¼šæ­¤å¤„åº”æ˜¯Userå®ä½“ç±»çš„å±æ€§ï¼Œå±æ€§ådeptï¼› </span><br><span class="xml">   columnå±æ€§å€¼ï¼šä¼ ç»™åµŒå¥—æŸ¥è¯¢ï¼ŒåšæŸ¥è¯¢æ¡ä»¶ã€‚</span><br><span class="xml">   --&gt;</span><br><span class="xml">   <span class="hljs-tag">&lt;<span class="hljs-name">association</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;dept&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;dept_id&quot;</span> <span class="hljs-attr">select</span>=<span class="hljs-string">&quot;cn.kongwei_liao.mapper.DomainMapper.findDeptBydeptId&quot;</span> /&gt;</span><span class="hljs-comment">&lt;!-- åµŒå¥—äº†column=&quot;dept_id&quot; --&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span></span><br><br><span class="xml"><span class="hljs-comment">&lt;!-- æ ¹æ®è¿”å›æ¥çš„næ¡userè®°å½•ä¸­çš„dept_idå­—æ®µï¼ŒæŸ¥è¯¢dept --&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;findDeptBydeptId&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;cn.kongwei_liao.domain.Dept&quot;</span>&gt;</span></span><br><span class="xml">   select id,name from t_dept where id=#</span><span class="hljs-template-variable">&#123;dept_id&#125;</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></span><br><br><span class="xml"><span class="hljs-comment">&lt;!-- ä¸€æ¡æŸ¥è¯¢userè¡¨ï¼Œè¿”å›næ¡userè®°å½• --&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getAll&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;userResultMap&quot;</span>&gt;</span></span><br><span class="xml">   select u.id,u.username,u.password,u.dept_id</span><br><span class="xml">   from t_user u</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h3 id="11ã€é›†åˆæŸ¥è¯¢æ˜ å°„ï¼ˆä¸€å¯¹å¤šï¼Œå¤šå¯¹å¤šï¼‰"><a href="#11ã€é›†åˆæŸ¥è¯¢æ˜ å°„ï¼ˆä¸€å¯¹å¤šï¼Œå¤šå¯¹å¤šï¼‰" class="headerlink" title="11ã€é›†åˆæŸ¥è¯¢æ˜ å°„ï¼ˆä¸€å¯¹å¤šï¼Œå¤šå¯¹å¤šï¼‰"></a>11ã€é›†åˆæŸ¥è¯¢æ˜ å°„ï¼ˆä¸€å¯¹å¤šï¼Œå¤šå¯¹å¤šï¼‰</h3><h4 id="11-1ã€å¸¸è§å…³ç³»"><a href="#11-1ã€å¸¸è§å…³ç³»" class="headerlink" title="11.1ã€å¸¸è§å…³ç³»"></a>11.1ã€å¸¸è§å…³ç³»</h4><p>å‘˜å·¥å’Œéƒ¨é—¨ï¼šä¸€å¯¹å¤šï¼Œæ ¹æ®éƒ¨é—¨æŸ¥è¯¢å‘˜å·¥</p><ul><li><p>åœ¨éƒ¨é—¨æ–¹ï¼Œéœ€è¦æŸ¥è¯¢åˆ°å½“å‰éƒ¨é—¨ä¸‹çš„æ‰€æœ‰å‘˜å·¥ã€‚</p></li><li><p>ä¸€ä¸ªéƒ¨é—¨  æ‹¥æœ‰  å¤šä¸ªå‘˜å·¥</p></li></ul><p>å­¦ç”Ÿå’Œè¯¾ç¨‹ï¼šå¤šå¯¹å¤šï¼Œæ ¹æ®å­¦ç”ŸæŸ¥è¯¢å…¶é€‰ä¿®è¯¾ç¨‹ï¼Œæˆ–æ ¹æ®è¯¾ç¨‹æŸ¥è¯¢æŸ¥è¯¢é€‰ä¿®è¯¥è¯¾ç¨‹çš„å­¦ç”Ÿ</p><ul><li><p>ä¸€ä¸ªå­¦ç”Ÿ  å¯ä»¥å­¦ä¹   å¤šé—¨è¯¾ç¨‹</p></li><li><p>ä¸€é—¨è¯¾ç¨‹  å¯ä»¥æœ‰   å¤šä¸ªå­¦ç”Ÿ</p></li></ul><h4 id="11-2ã€collection"><a href="#11-2ã€collection" class="headerlink" title="11.2ã€collection"></a>11.2ã€collection</h4><p>è¿”å›ç»“æœ ï¼ˆè¿”å›ç»“æœå¯¹è±¡æœ‰ä¸€ä¸ªå±æ€§Listæˆ–Set&lt;å…³è”è¡¨å¯¹è±¡&gt;ï¼‰</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">collection</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;é›†åˆæ•°æ®å±æ€§å&quot;</span> <span class="hljs-attr">ofType</span>=<span class="hljs-string">&quot;é›†åˆä¸­å…ƒç´ ç±»å‹&quot;</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">collection</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="xml"><span class="hljs-comment">&lt;!-- extends: é›†æˆå·²æœ‰resultMapï¼›--&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;Department&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;DepartmentAndUsersResultMap&quot;</span> <span class="hljs-attr">extends</span>=<span class="hljs-string">&quot;DepartmentResultMap&quot;</span>&gt;</span></span><br><span class="xml"><span class="hljs-comment">&lt;!--</span></span><br><span class="xml">å…³è”é›†åˆï¼š</span><br><span class="xml">propertyï¼šé›†åˆæ•°æ®</span><br><span class="xml">ofTypeï¼šé›†åˆå…ƒç´ ç±»å‹****</span><br><span class="xml">selectï¼šé€šè¿‡è¿™æ¡SQLæŸ¥è¯¢å¯¹åº”å…³è”é›†åˆ</span><br><span class="xml">select * from t_user where dept_id = #</span><span class="hljs-template-variable">&#123;id&#125;</span><br><span class="xml">columnï¼šå…³è”å¯¹è±¡è¡¨t_deptä¸­çš„ä¸»é”®id  å¯¹åº”  å½“å‰å¯¹è±¡è¡¨ä¸­t_userå¤–é”®dept_id</span><br><span class="xml">--&gt;</span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">collection</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;users&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;id&quot;</span> <span class="hljs-attr">ofType</span>=<span class="hljs-string">&quot;cn.kongwei_liao.domain.User&quot;</span> <span class="hljs-attr">select</span>=<span class="hljs-string">&quot;cn.kongwei_liao.domain.DomainMapper.getByUserDept_Id&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">collection</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h4 id="11-3ã€åµŒå¥—ç»“æœï¼ˆä½¿ç”¨ä¸€æ¡SQLè¯­å¥ï¼‰"><a href="#11-3ã€åµŒå¥—ç»“æœï¼ˆä½¿ç”¨ä¸€æ¡SQLè¯­å¥ï¼‰" class="headerlink" title="11.3ã€åµŒå¥—ç»“æœï¼ˆä½¿ç”¨ä¸€æ¡SQLè¯­å¥ï¼‰"></a>11.3ã€åµŒå¥—ç»“æœï¼ˆä½¿ç”¨ä¸€æ¡SQLè¯­å¥ï¼‰</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;cn.kongwei_liao.domain.DomainMapper&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;cn.kongwei_liao.domain.Dept&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;DepartmentResultMap&quot;</span>&gt;</span><br><span class="hljs-comment">&lt;!-- å¤„ç†ä¸€æ–¹ï¼šéƒ¨é—¨ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;id&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;id&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;name&quot;</span> /&gt;</span><br><br><span class="hljs-comment">&lt;!-- å¤„ç†å¤šæ–¹ï¼šå‘˜å·¥ --&gt;</span><br><span class="hljs-comment">&lt;!-- // å•å‘ä¸€å¯¹å¤šï¼Œç»“æœä¿å­˜å†Setæˆ–Listä¸­ --&gt;</span><br><span class="hljs-comment">&lt;!-- private Set&lt;User&gt; users; --&gt;</span><br><span class="hljs-comment">&lt;!-- private List&lt;User&gt; users; --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">collection</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;users&quot;</span> <span class="hljs-attr">ofType</span>=<span class="hljs-string">&quot;cn.kongwei_liao.domain.User&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;id&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;id&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;username&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;password&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;dept_id&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;dept_id&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">collection</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- åµŒå¥—ç»“æœï¼ˆå‘ä¸€æ¡å·¦å¤–è¿æ¥sqlè§£å†³é—®é¢˜ï¼Œæ˜ å°„æ–‡ä»¶Mapperç»“æœçš„æ‰‹åŠ¨å°è£…ResultMapï¼‰ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getAll&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;DepartmentResultMap&quot;</span>&gt;</span><br>select d.id,d.name,u.id uid,u.name uname,u.password<br>from t_dept d<br>left join t_user u<br>on d.id=u.dept_id<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="11-4ã€åµŒå¥—æŸ¥è¯¢"><a href="#11-4ã€åµŒå¥—æŸ¥è¯¢" class="headerlink" title="11.4ã€åµŒå¥—æŸ¥è¯¢"></a>11.4ã€åµŒå¥—æŸ¥è¯¢</h4><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;cn.kongwei_liao.domain.DomainMapper&quot;</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;cn.kongwei_liao.domain.Dept&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;DepartmentResultMap&quot;</span>&gt;</span></span><br><span class="xml"><span class="hljs-comment">&lt;!-- å¤„ç†ä¸€æ–¹ï¼šéƒ¨é—¨ --&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;id&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;id&quot;</span> /&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;name&quot;</span> /&gt;</span></span><br><span class="xml"></span><br><span class="xml"><span class="hljs-comment">&lt;!-- å¤„ç†å¤šæ–¹ï¼šå‘˜å·¥ --&gt;</span></span><br><span class="xml"><span class="hljs-comment">&lt;!-- // å•å‘ä¸€å¯¹å¤šï¼Œç»“æœä¿å­˜å†Setæˆ–Listä¸­ --&gt;</span></span><br><span class="xml"><span class="hljs-comment">&lt;!-- private Set&lt;User&gt; users; --&gt;</span></span><br><span class="xml"><span class="hljs-comment">&lt;!-- private List&lt;User&gt; users; --&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">collection</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;users&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;id&quot;</span> <span class="hljs-attr">ofType</span>=<span class="hljs-string">&quot;cn.kongwei_liao.domain.User&quot;</span> <span class="hljs-attr">select</span>=<span class="hljs-string">&quot;cn.kongwei_liao.domain.DomainMapper.getByUserDept_Id&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">collection</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span></span><br><span class="xml"></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getByUserDept_Id&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;cn.kongwei_liao.domain.User&quot;</span> &gt;</span></span><br><span class="xml">select * from t_user where dept_id=$</span><span class="hljs-template-variable">&#123;id&#125;</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></span><br><span class="xml"></span><br><span class="xml"><span class="hljs-comment">&lt;!-- åµŒå¥—ç»“æœï¼ˆå‘ä¸€æ¡å·¦å¤–è¿æ¥sqlè§£å†³é—®é¢˜ï¼Œæ˜ å°„æ–‡ä»¶Mapperç»“æœçš„æ‰‹åŠ¨å°è£…ResultMapï¼‰ --&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getAll&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;DepartmentResultMap&quot;</span>&gt;</span></span><br><span class="xml">select id,name</span><br><span class="xml">from t_dept</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h3 id="12ã€åµŒå¥—ç»“æœå’ŒåµŒå¥—æŸ¥è¯¢çš„ä½¿ç”¨åœºæ™¯"><a href="#12ã€åµŒå¥—ç»“æœå’ŒåµŒå¥—æŸ¥è¯¢çš„ä½¿ç”¨åœºæ™¯" class="headerlink" title="12ã€åµŒå¥—ç»“æœå’ŒåµŒå¥—æŸ¥è¯¢çš„ä½¿ç”¨åœºæ™¯"></a>12ã€åµŒå¥—ç»“æœå’ŒåµŒå¥—æŸ¥è¯¢çš„ä½¿ç”¨åœºæ™¯</h3><h4 id="12-1ã€åµŒå¥—ç»“æœï¼šä¸€æ¡SQLè¯­å¥"><a href="#12-1ã€åµŒå¥—ç»“æœï¼šä¸€æ¡SQLè¯­å¥" class="headerlink" title="12.1ã€åµŒå¥—ç»“æœï¼šä¸€æ¡SQLè¯­å¥"></a>12.1ã€åµŒå¥—ç»“æœï¼šä¸€æ¡SQLè¯­å¥</h4><ol><li><p>ç”¨åœ¨å¤šå¯¹ä¸€çš„è¡¨ç»“æ„ï¼›</p></li><li><p>å¤šä¸ªæ•°æ®å­—å…¸æ˜ç»†å’Œä¸€ä¸ªæ•°æ®å­—å…¸ç±»å‹ï¼›</p></li><li><p>å¤šä¸ªå‘˜å·¥å±äºä¸€ä¸ªéƒ¨é—¨ï¼›</p></li><li><p>å¤šä¸ªéƒ¨é—¨æœ‰ä¸€ä¸ªéƒ¨é—¨ç»ç†ã€‚</p></li></ol><h4 id="12-2ã€åµŒå¥—æŸ¥è¯¢ï¼š1-næ¡SQLè¯­å¥"><a href="#12-2ã€åµŒå¥—æŸ¥è¯¢ï¼š1-næ¡SQLè¯­å¥" class="headerlink" title="12.2ã€åµŒå¥—æŸ¥è¯¢ï¼š1+næ¡SQLè¯­å¥"></a>12.2ã€åµŒå¥—æŸ¥è¯¢ï¼š1+næ¡SQLè¯­å¥</h4><ol><li><p>ç”¨åœ¨ ä¸€å¯¹å¤š æˆ–è€… å¤šå¯¹å¤š çš„è¡¨ç»“æ„ï¼›</p></li><li><p>å±•ç¤ºæ•°æ®çš„æ—¶å€™ï¼Œåœ¨ä¸€è¡Œç¬¬ä¸€åˆ—æ˜¾ç¤ºä¸€æ–¹ï¼Œç¬¬äºŒåˆ—æ˜¾ç¤ºå¤šä¸ªå¤šæ–¹ï¼›</p></li><li><p>ä¸€å¯¹å¤šï¼šï¼ˆéƒ¨é—¨1  ï¼šå‘˜å·¥1ã€‚ã€‚ã€‚å‘˜å·¥nï¼‰ï¼›</p></li><li><p>å¤šå¯¹å¤šï¼šï¼ˆå‘˜å·¥1  ï¼šè§’è‰²1ã€‚ã€‚ã€‚è§’è‰²nï¼‰ã€‚</p></li></ol><h3 id="13ã€SQLæ˜ å°„å™¨Mapper"><a href="#13ã€SQLæ˜ å°„å™¨Mapper" class="headerlink" title="13ã€SQLæ˜ å°„å™¨Mapper"></a>13ã€SQLæ˜ å°„å™¨Mapper</h3><p>MyBatisæ¡†æ¶  <code>åŸºäºä»£ç†æœºåˆ¶</code>ï¼Œå¯ä»¥è®©æˆ‘ä»¬<code>æ— éœ€å†ç¼–å†™Daoçš„å®ç°</code>ã€‚</p><h4 id="13-1ã€ä¼ ç»ŸDaoå±‚æ¥å£ï¼Œç°åœ¨åç§°ç»Ÿä¸€ä»¥Mapperç»“å°¾"><a href="#13-1ã€ä¼ ç»ŸDaoå±‚æ¥å£ï¼Œç°åœ¨åç§°ç»Ÿä¸€ä»¥Mapperç»“å°¾" class="headerlink" title="13.1ã€ä¼ ç»ŸDaoå±‚æ¥å£ï¼Œç°åœ¨åç§°ç»Ÿä¸€ä»¥Mapperç»“å°¾"></a>13.1ã€ä¼ ç»ŸDaoå±‚æ¥å£ï¼Œç°åœ¨åç§°ç»Ÿä¸€ä»¥Mapperç»“å°¾</h4><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-comment">/*</span><br><span class="hljs-comment">å®šä¹‰MaBatisæ˜ å°„å™¨ï¼ˆæ˜ å°„å™¨å…¶å®å°±æ˜¯æ“ä½œæ•°æ®åº“çš„å¯¹è±¡ï¼Œç­‰æ•ˆäºä¹‹å‰çš„Daoå±‚æ¥å£</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">æ˜ å°„å™¨é…ç½®äºxmlé…ç½®å¯¹åº”ï¼š</span><br><span class="hljs-comment">æ¥å£ä¸­çš„æ–¹æ³•åäºSQLçš„idå¯¹åº”ï¼›</span><br><span class="hljs-comment">æ¥å£ä¸­çš„æ–¹æ³•è¿”å›å€¼äºSQLä¸­çš„resultType/resultMapå¯¹åº”ï¼›</span><br><span class="hljs-comment">æ¥å£ä¸­çš„æ–¹æ³•å‚æ•°ç±»å‹äºSQLä¸­çš„parameterTypeå¯¹åº”ã€‚</span><br><span class="hljs-comment">*/</span><br><br><span class="hljs-built_in">public</span> interface UserMapper&#123;<br><span class="hljs-keyword">User</span> <span class="hljs-keyword">get</span>(Long id);<br>List&lt;<span class="hljs-keyword">User</span>&gt; <span class="hljs-keyword">select</span>(Map&lt;String,<span class="hljs-keyword">Object</span>&gt; paramMap);<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="13-2ã€æ¥å£å®ç°æ–¹å¼ä¸€ï¼ˆä¼ ç»Ÿï¼‰"><a href="#13-2ã€æ¥å£å®ç°æ–¹å¼ä¸€ï¼ˆä¼ ç»Ÿï¼‰" class="headerlink" title="13.2ã€æ¥å£å®ç°æ–¹å¼ä¸€ï¼ˆä¼ ç»Ÿï¼‰"></a>13.2ã€æ¥å£å®ç°æ–¹å¼ä¸€ï¼ˆä¼ ç»Ÿï¼‰</h4><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs aspectj"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserMapperImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">UserMapper</span></span>&#123;<br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-function">User <span class="hljs-title">get</span><span class="hljs-params">(Long id)</span></span>&#123;<br>SqlSession sqlSession = <span class="hljs-keyword">null</span>;<br><span class="hljs-keyword">try</span>&#123;<br>sqlSession = MyBatisUtils.getSqlSession();<br><span class="hljs-function"><span class="hljs-keyword">return</span> sqlSession.<span class="hljs-title">selectone</span><span class="hljs-params">(<span class="hljs-string">&quot;cn.kongwei_liao.mapper.UserMapper.get&quot;</span>,id)</span></span>;<br>&#125;<span class="hljs-keyword">finally</span>&#123;<br><span class="hljs-keyword">if</span>(sqlSession!=<span class="hljs-keyword">null</span>)&#123;<br>sqlSession.close();<br>&#125;<br>&#125;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="13-3ã€æ¥å£å®ç°æ–¹å¼äºŒï¼ˆæ˜ å°„å™¨ï¼‰"><a href="#13-3ã€æ¥å£å®ç°æ–¹å¼äºŒï¼ˆæ˜ å°„å™¨ï¼‰" class="headerlink" title="13.3ã€æ¥å£å®ç°æ–¹å¼äºŒï¼ˆæ˜ å°„å™¨ï¼‰"></a>13.3ã€æ¥å£å®ç°æ–¹å¼äºŒï¼ˆæ˜ å°„å™¨ï¼‰</h4><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-comment">/*</span><br><span class="hljs-comment">å®šä¹‰ä¸€ä¸ªæ˜ å°„å™¨Mapperæ¥å£ï¼Œä½¿ç”¨MyBatisè‡ªåŠ¨ä¸ºæˆ‘ä»¬åˆ›å»ºçš„ä»£ç†ç±»ï¼›</span><br><span class="hljs-comment">*/</span><br>public <span class="hljs-keyword">class</span> MyBatisMapperTest&#123;<br>@Test<br>public void test<span class="hljs-constructor">Proxy()</span> throws Exception&#123;<br><span class="hljs-comment">//getMapper(Mapperæ¥å£)ï¼Œé€šè¿‡MyBatisä¸ºæˆ‘ä»¬åˆ›å»ºæŒ‡å®šMapperæ¥å£ä»£ç†å¯¹è±¡ï¼›</span><br>UserMapper mapper = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">MyBatisUtils</span>.</span></span>get<span class="hljs-constructor">SqlSession()</span>.get<span class="hljs-constructor">Mapper(UserMapper.<span class="hljs-params">class</span>)</span>;<br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(mapper.get(<span class="hljs-number">1L</span>));<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="14ã€ç¼“å­˜"><a href="#14ã€ç¼“å­˜" class="headerlink" title="14ã€ç¼“å­˜"></a>14ã€ç¼“å­˜</h3><p>é»˜è®¤æ”¯æŒä¸€çº§ç¼“å­˜ï¼ŒäºŒçº§ç¼“å­˜éœ€è¦é…ç½®ï¼ŒåŒJPAä¸€è‡´</p><p>ç¼“å­˜æ˜¯ä¸€ç§å…¸å‹çš„  â€œä»¥ç©ºé—´æ¢æ—¶é—´â€  çš„ç­–ç•¥ã€‚</p><h4 id="14-1ã€ä¸€çº§ç¼“å­˜"><a href="#14-1ã€ä¸€çº§ç¼“å­˜" class="headerlink" title="14.1ã€ä¸€çº§ç¼“å­˜"></a>14.1ã€ä¸€çº§ç¼“å­˜</h4><p>SqlSessionçº§åˆ«ç¼“å­˜ï¼Œç¼“å­˜å¯¹è±¡å­˜å‚¨å‘¨æœŸä¸ºç¬¬ä¸€æ¬¡è·å–ï¼Œåˆ°sqlsessionè¢«é”€æ¯æ‰ï¼Œæˆ–æ˜¯sqlSession().clearCache()ï¼›</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">@Test<br><span class="hljs-built_in">public</span> <span class="hljs-type">void</span> testProxy()&#123;<br>    SqlSession <span class="hljs-keyword">session</span> = MyBatisUtils.getSession();<br>    UserMapper mapper = <span class="hljs-keyword">session</span>.getMapper(UserMapper.<span class="hljs-keyword">class</span>);<br>    <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(mapper.<span class="hljs-keyword">get</span>(<span class="hljs-number">8</span>L));//å‘é€ä¸€æ¡<span class="hljs-keyword">sql</span><br>    <span class="hljs-keyword">session</span>.clearCache();<br>    <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(mapper.<span class="hljs-keyword">get</span>(<span class="hljs-number">8</span>L));//æ¸…é™¤ç¼“å­˜ä¹‹å åœ¨å‘é€ä¸€æ¡<span class="hljs-keyword">sql</span><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="14-2ã€äºŒçº§ç¼“å­˜"><a href="#14-2ã€äºŒçº§ç¼“å­˜" class="headerlink" title="14.2ã€äºŒçº§ç¼“å­˜"></a>14.2ã€äºŒçº§ç¼“å­˜</h4><p>SqlSessionFactoryçº§åˆ«ç¼“å­˜ï¼Œç¼“å­˜å¯¹è±¡å­˜å‚¨å‘¨æœŸä¸ºç¬¬ä¸€æ¬¡è·å–ï¼Œåˆ°SqlSessionFactoryè¢«é”€æ¯æ‰(åº”ç”¨åœæ­¢äº†)ï¼›</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œåªå¼€å¯ä¸€çº§ç¼“å­˜ï¼Œå¦‚æœéœ€è¦å¼€å¯äºŒçº§ç¼“å­˜æˆ‘ä»¬éœ€è¦åœ¨Mapper.xmlæ·»åŠ ä¸€ä¸ª&lt;cache&gt;æ ‡ç­¾ã€‚</p><ol><li>æ³¨æ„ï¼šéœ€è¦ç¼“å­˜çš„å¯¹è±¡ï¼Œåº”è¯¥å®ç°java.io.Serializableï¼›</li></ol><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs actionscript">&lt;mapper <span class="hljs-keyword">namespace</span>=<span class="hljs-string">&quot;cn.kongwei_liao.mapper.UserMapper&quot;</span>&gt;<br>   &lt;cache/&gt;<br>â€¦<br>&lt;/mapper&gt;<br>åŒæ—¶ç±»è¦è¿›è¡Œåºåˆ—åŒ–<br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Serializable</span></span><br></code></pre></td></tr></table></figure><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">@Test<br>public void test<span class="hljs-constructor">SecondLevel()</span>&#123;<br><br>SqlSession session1 = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">MyBatisUtils</span>.</span></span>get<span class="hljs-constructor">Session()</span>;<br>UserMapper mapper1 = session1.get<span class="hljs-constructor">Mapper(UserMapper.<span class="hljs-params">class</span>)</span>;<br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(mapper1.get(<span class="hljs-number">8L</span>));<span class="hljs-comment">//å‘é€ä¸€æ¡sql</span><br>session1.close<span class="hljs-literal">()</span>;<br><br>SqlSession session2 = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">MyBatisUtils</span>.</span></span>get<span class="hljs-constructor">Session()</span>;<br>UserMapper mapper2 = session2.get<span class="hljs-constructor">Mapper(UserMapper.<span class="hljs-params">class</span>)</span>;<br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(mapper2.get(<span class="hljs-number">8L</span>));<br>session2.close<span class="hljs-literal">()</span>;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title></title>
    <link href="/2021/02/15/MyBatis-%E9%AB%98%E7%BA%A7/"/>
    <url>/2021/02/15/MyBatis-%E9%AB%98%E7%BA%A7/</url>
    
    <content type="html"><![CDATA[<h3 id="MyBatisä»£ç ç”Ÿæˆå™¨"><a href="#MyBatisä»£ç ç”Ÿæˆå™¨" class="headerlink" title="MyBatisä»£ç ç”Ÿæˆå™¨"></a>MyBatisä»£ç ç”Ÿæˆå™¨</h3><p>æˆ‘ä»¬åœ¨å­¦ä¹ MyBatisçš„æ—¶å€™ï¼Œæ€»æ˜¯è¦åšå¾ˆå¤šåŸºç¡€çš„CRUDï¼Œè¿™äº›ä»£ç éƒ½æ˜¯æ¯”è¾ƒé‡å¤çš„ã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨MyBatisçš„ä»£ç ç”Ÿæˆå™¨ï¼šæ•°æ®åº“çš„è¡¨â€“domainâ€“mapperæ¥å£â€“mapperæ˜ å°„</p><p>éœ€è¦å…ˆå¯¼å…¥ç›¸åº”çš„MyBatisçš„åŸºæœ¬åŒ…å’ŒMySqlçš„é©±åŠ¨åŒ…ã€‚å¦å¤–ï¼Œè¿˜è¦ä¸‹è½½ä¸€ä¸ªmybatis-generator-1.3.5.zipï¼Œåœ¨å®˜ç½‘ä¸‹è½½å³å¯:<a href="https://github.com/mybatis/generator/releases">https://github.com/mybatis/generator/releases</a></p><p>ä¸­æ–‡æ–‡æ¡£ï¼š<a href="http://mbg.cndocs.ml/">http://mbg.cndocs.ml</a></p><h4 id="1ã€ä½¿ç”¨MyBatis-Generatorç”Ÿæˆä»£ç "><a href="#1ã€ä½¿ç”¨MyBatis-Generatorç”Ÿæˆä»£ç " class="headerlink" title="1ã€ä½¿ç”¨MyBatis-Generatorç”Ÿæˆä»£ç "></a>1ã€ä½¿ç”¨MyBatis-Generatorç”Ÿæˆä»£ç </h4><h5 id="1-1ã€åˆ›å»ºä¸€ä¸‹æ–°çš„é¡¹ç›®"><a href="#1-1ã€åˆ›å»ºä¸€ä¸‹æ–°çš„é¡¹ç›®" class="headerlink" title="1.1ã€åˆ›å»ºä¸€ä¸‹æ–°çš„é¡¹ç›®"></a>1.1ã€åˆ›å»ºä¸€ä¸‹æ–°çš„é¡¹ç›®</h5><p>åˆ›å»ºIDEA Mavené¡¹ç›®ï¼Œå¹¶ä¸”ä»¥pomæ–¹å¼å¯¼å…¥ç›¸åº”çš„jaråŒ…ï¼š</p><p>å¯¼å…¥mybatis(æ ¸å¿ƒåŒ…å’Œmysqlçš„é©±åŠ¨åŒ…,æ—¥å¿—åŒ…)ç›¸å…³åŒ…ï¼šå› ä¸ºç”Ÿæˆçš„ä»£ç è¦åœ¨mybatisä¸­è¿è¡Œ:</p><p>Pom.xmlé…ç½®ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>  <span class="hljs-comment">&lt;!-- MySqlæ•°æ®åº“é©±åŠ¨ --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>8.0.17<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>  <br>  <span class="hljs-comment">&lt;!--mybatisçš„jar--&gt;</span><br>  <span class="hljs-comment">&lt;!--mybatisçš„æ ¸å¿ƒåŒ…--&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.2.4<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <br>  <span class="hljs-comment">&lt;!--mybatisé›†æˆspring--&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-spring<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>  <br>  <span class="hljs-comment">&lt;!--ä»£ç ç”Ÿæˆå™¨çš„jaråŒ…--&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis.generator<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-generator-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.3.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- ä»¥æ’ä»¶çš„æ–¹å¼å¼•å…¥ä»£ç ç”Ÿæˆå™¨ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><span class="hljs-comment">&lt;!-- ä¸èƒ½æ”¾åˆ°pluginManagementé‡Œé¢ --&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis.generator<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-generator-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.3.7<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">verbose</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">verbose</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">overwrite</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">overwrite</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="/2021/02/15/MyBatis-%E9%AB%98%E7%BA%A7/image-20191212170325227.png" alt="image-20191212170325227"></p><h5 id="1-2ã€å‡†å¤‡é…ç½®æ–‡ä»¶"><a href="#1-2ã€å‡†å¤‡é…ç½®æ–‡ä»¶" class="headerlink" title="1.2ã€å‡†å¤‡é…ç½®æ–‡ä»¶"></a>1.2ã€å‡†å¤‡é…ç½®æ–‡ä»¶</h5><p>é»˜è®¤æ˜¯åœ¨classpathæ‰¾generatorConfig.xmlæ–‡ä»¶</p><p>(æ³¨:è¿™ä¸ªæ–‡ä»¶æ˜¯ä»£ç ç”Ÿæˆå™¨æœ€é‡è¦çš„ä¸€æ­¥ï¼Œå¤§å®¶å¯ä»¥æ‹·å¤‡ä¸‹æ¥è¿›è¡Œç›¸åº”çš„ä¿®æ”¹å³å¯)</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">generatorConfiguration</span></span><br><span class="hljs-meta">        <span class="hljs-meta-keyword">PUBLIC</span> <span class="hljs-meta-string">&quot;-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-meta-string">&quot;http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd&quot;</span>&gt;</span><br><span class="hljs-comment">&lt;!-- è‡ªåŠ¨ç”Ÿæˆå™¨çš„é…ç½®(æ ¹ç›®å½•ï¼Œä¸åšè¿‡å¤šä»‹ç»)--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">generatorConfiguration</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">       classPathEntryï¼šå¯ä»¥é…ç½®å¤šä¸ªï¼Œä¹Ÿä¸é…ç½®</span><br><span class="hljs-comment">       æ•°æ®åº“é©±åŠ¨:è¿™é‡Œæ‰¾åˆ°ç›¸åº”çš„é©±åŠ¨jaråŒ…å°±å¯ä»¥äº†(æ³¨:ä¸åŒæ•°æ®åº“çš„jarä¸ä¸€æ ·)</span><br><span class="hljs-comment">          location:é‡Œé¢çš„æ˜¯è·¯å¾„(ä¹Ÿå¯ä»¥ç›´æ¥å†™ç»å¯¹è·¯å¾„ -&gt; å¦‚:E:\mybatis\mysql-connector-java-5.1.26-bin.jar)</span><br><span class="hljs-comment">    --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">classPathEntry</span>   <span class="hljs-attr">location</span>=<span class="hljs-string">&quot;D:\Program Files\apache-maven-3.6.1\repo\mysql\mysql-connector-java\5.1.6\mysql-connector-java-5.1.6.jar&quot;</span>/&gt;</span><br>    <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">       contextï¼šç”¨äºç”Ÿæˆä¸€ç»„å¯¹è±¡çš„ç¯å¢ƒ(è‡³å°‘é…ç½®1ä¸ªï¼Œå¯ä»¥é…ç½®å¤šä¸ª)</span><br><span class="hljs-comment">       id:è¡¨è¾¾å”¯ä¸€çš„åç§°</span><br><span class="hljs-comment">       targetRuntimeï¼šç”¨äºæŒ‡å®šç”Ÿæˆçš„ä»£ç çš„è¿è¡Œç¯å¢ƒ(MyBatis3/MyBatis3Simple)</span><br><span class="hljs-comment">          MyBatis3:é»˜è®¤å€¼</span><br><span class="hljs-comment">          MyBatis3Simpleï¼šä¸ä¼šç”Ÿæˆä¸Example(æ¡ˆä¾‹)ç›¸å…³çš„æ–¹æ³•</span><br><span class="hljs-comment">    --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">context</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;DB2Tables&quot;</span>   <span class="hljs-attr">targetRuntime</span>=<span class="hljs-string">&quot;MyBatis3Simple&quot;</span> &gt;</span><br>        <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">            ç”¨äºé…ç½®å¦‚æœç”Ÿæˆæ³¨é‡Šä¿¡æ¯(æœ€å¤šå¯ä»¥é…ç½®ä¸€ä¸‹)</span><br><span class="hljs-comment">            suppressAllComments:é˜»æ­¢ç”Ÿæˆæ³¨é‡Š ï¼Œé»˜è®¤ä¸ºfalse</span><br><span class="hljs-comment">            suppressDate:é˜»æ­¢ç”Ÿæˆçš„æ³¨é‡Š æ—¶é—´æˆ³ï¼Œé»˜è®¤ä¸ºfalse</span><br><span class="hljs-comment">            addRemarkCommentsï¼šæ³¨é‡Šæ˜¯å¦æ·»åŠ æ•°æ®åº“è¡¨çš„å¤‡æ³¨ä¿¡æ¯ï¼Œé»˜è®¤ä¸ºfalse</span><br><span class="hljs-comment">         --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">commentGenerator</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;suppressDate&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;true&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;suppressAllComments&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;true&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">commentGenerator</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">           è¿™ä¸ªåº”è¯¥æ¯”è¾ƒæ¸…æ¥šï¼Œé…ç½®è¿æ¥æ•°æ®åº“çš„åŸºæœ¬ä¿¡æ¯</span><br><span class="hljs-comment">        --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">jdbcConnection</span> <span class="hljs-attr">driverClass</span>=<span class="hljs-string">&quot;com.mysql.jdbc.Driver&quot;</span></span><br><span class="hljs-tag">                        <span class="hljs-attr">connectionURL</span>=<span class="hljs-string">&quot;jdbc:mysql:///mybatis01&quot;</span></span><br><span class="hljs-tag">                        <span class="hljs-attr">userId</span>=<span class="hljs-string">&quot;root&quot;</span> <span class="hljs-attr">password</span>=<span class="hljs-string">&quot;admin&quot;</span>&gt;</span><br>            <span class="hljs-comment">&lt;!-- </span><br><span class="hljs-comment">                MyBatis Generator ç”Ÿæˆå™¨æŠŠå…¶ä»–æ•°æ®åº“çš„åŒåè¡¨ç”Ÿæˆä¸‹æ¥çš„é—®é¢˜</span><br><span class="hljs-comment">                [WARNING] Table Configuration *** matched more than one table </span><br><span class="hljs-comment">            --&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;nullCatalogMeansCurrent&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;true&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">jdbcConnection</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">           ç”¨äºæŒ‡å®šJDBCç±»å‹å’ŒJavaç±»å‹å¦‚ä½•è½¬æ¢ï¼Œæœ€å¤šå¯ä»¥é…ç½®ä¸€ä¸ª</span><br><span class="hljs-comment">           forceBigDecimals:æ§åˆ¶æ˜¯å¦å¼ºåˆ¶å°†DECIMALå’ŒNUMERICç±»å‹çš„JDBCå­—æ®µè½¬æ¢æˆJavaç±»å‹çš„ BigDecimal</span><br><span class="hljs-comment">                        é»˜è®¤ä¸ºfalse,ä¸€èˆ¬ä¸éœ€è¦é…ç½®</span><br><span class="hljs-comment">        --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">javaTypeResolver</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;forceBigDecimals&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;false&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">javaTypeResolver</span>&gt;</span><br><br>        <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">           javaModelGenerator:ç”¨æ¥æ§åˆ¶ç”Ÿæˆçš„å®ä½“ç±»</span><br><span class="hljs-comment">              targetPackageï¼šç”ŸæˆModelç±»å­˜æ”¾ä½ç½®(åŒ…å)</span><br><span class="hljs-comment">              targetProjectï¼šæŒ‡å®šç›®æ ‡é¡¹ç›®è·¯å¾„(æ ¹ç›®å½•)</span><br><span class="hljs-comment">              å¯¹åº”çš„å­å±æ€§:</span><br><span class="hljs-comment">                 trimStringsï¼šåˆ¤æ–­æ˜¯å¦å¯¹æ•°æ®åº“æŸ¥è¯¢ç»“æœè¿›è¡Œtrimæ“ä½œ(é»˜è®¤false)</span><br><span class="hljs-comment">        --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">javaModelGenerator</span> <span class="hljs-attr">targetPackage</span>=<span class="hljs-string">&quot;cn.kongwei_liao.domain&quot;</span> <span class="hljs-attr">targetProject</span>=<span class="hljs-string">&quot;D:\IdeaProjects\Templet\src\main\java&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;trimStrings&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;true&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">javaModelGenerator</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">           sqlMapGeneratorï¼šç”Ÿæˆæ˜ å°„æ–‡ä»¶å­˜æ”¾ä½ç½®(Mapper.xmlæ–‡ä»¶)</span><br><span class="hljs-comment">              targetPackage:ç”ŸæˆSQLæ˜ å°„æ–‡ä»¶(XMLæ–‡ä»¶)åœ¨å“ªä¸ªåŒ…ä¸­</span><br><span class="hljs-comment">              targetProject:æŒ‡å®šç›®æ ‡é¡¹ç›®è·¯å¾„(æ ¹ç›®å½•)</span><br><span class="hljs-comment">        --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">sqlMapGenerator</span> <span class="hljs-attr">targetPackage</span>=<span class="hljs-string">&quot;cn.kongwei_liao.mapper&quot;</span> <span class="hljs-attr">targetProject</span>=<span class="hljs-string">&quot;D:\IdeaProjects\Templet\src\main\resources&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">sqlMapGenerator</span>&gt;</span><br><br>        <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">           javaClientGeneratorï¼šJavaå®¢æˆ·ç«¯ç”Ÿæˆå™¨(ç”ŸæˆDao/Mapperçš„æ¥å£)</span><br><span class="hljs-comment">                          è¯¥ æ ‡ç­¾å¯é€‰(æœ€å¤šé…ç½®ä¸€ä¸ª)ï¼Œå¦‚æœä¸é…ç½®ï¼Œå°±ä¸ä¼šç”ŸæˆMapperæ¥å£</span><br><span class="hljs-comment">              type:é€‰æ‹©å®¢æˆ·ç«¯ä»£ç ç”Ÿæˆå™¨</span><br><span class="hljs-comment">                 MyBatis3</span><br><span class="hljs-comment">                    ANNOTATEDMAPPERï¼šåŸºäºæ³¨è§£çš„Mapperæ¥å£ï¼Œä¸ä¼šæœ‰å¯¹åº”çš„XMLæ˜ å°„æ–‡ä»¶</span><br><span class="hljs-comment">                    MIXEDMAPPER:XMLå’Œæ³¨è§£æ··åˆå½¢å¼</span><br><span class="hljs-comment">                    XMLMAPPERï¼šæ‰€æœ‰æ–¹æ³•éƒ½åœ¨XMLä¸­(æ¥å£è°ƒç”¨ä¾èµ–XML)</span><br><span class="hljs-comment">                 MyBatis3Simple</span><br><span class="hljs-comment">                    ANNOTATEDMAPPERï¼šåŸºäºæ³¨è§£çš„Mapperæ¥å£ï¼Œä¸ä¼šæœ‰å¯¹åº”çš„XMLæ˜ å°„æ–‡ä»¶</span><br><span class="hljs-comment">                    XMLMAPPERï¼šæ‰€æœ‰æ–¹æ³•éƒ½åœ¨XMLä¸­(æ¥å£è°ƒç”¨ä¾èµ–XML)</span><br><span class="hljs-comment">              targetPackageï¼šç”ŸæˆMapperæ¥å£å­˜æ”¾çš„åŒ…å</span><br><span class="hljs-comment">              targetProjectï¼šæŒ‡å®šç›®æ ‡é¡¹ç›®è·¯å¾„</span><br><span class="hljs-comment">        --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">javaClientGenerator</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;XMLMAPPER&quot;</span> <span class="hljs-attr">targetPackage</span>=<span class="hljs-string">&quot;cn.kongwei_liao.mapper&quot;</span> <span class="hljs-attr">targetProject</span>=<span class="hljs-string">&quot;D:\IdeaProjects\Templet\src\main\java&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;enableSubPackages&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;true&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">javaClientGenerator</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">           tableï¼šç”Ÿæˆå¯¹åº”è¡¨åŠç±»å</span><br><span class="hljs-comment">              tableNameï¼šå¯¹åº”è¡¨å(æ³¨:%ä»£è¡¨æ‰€æœ‰)</span><br><span class="hljs-comment">              domainObjectName:å¯¹åº”çš„ç±»å</span><br><span class="hljs-comment">              generatedKeyï¼šä¸»é”®è‡ªå¢çš„idå­—æ®µ(é’ˆå¯¹å½“å‰ æ•°æ®åº“é…ç½®MySQL)</span><br><span class="hljs-comment">        --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">table</span> <span class="hljs-attr">tableName</span>=<span class="hljs-string">&quot;product&quot;</span> <span class="hljs-attr">domainObjectName</span>=<span class="hljs-string">&quot;Product&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">generatedKey</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;id&quot;</span> <span class="hljs-attr">sqlStatement</span>=<span class="hljs-string">&quot;MySql&quot;</span> /&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">context</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">generatorConfiguration</span>&gt;</span><br></code></pre></td></tr></table></figure><h5 id="1-3ã€è¿è¡Œç”Ÿæˆä»£ç "><a href="#1-3ã€è¿è¡Œç”Ÿæˆä»£ç " class="headerlink" title="1.3ã€è¿è¡Œç”Ÿæˆä»£ç "></a>1.3ã€è¿è¡Œç”Ÿæˆä»£ç </h5><p><img src="/2021/02/15/MyBatis-%E9%AB%98%E7%BA%A7/image-20191213151734365.png" alt="image-20191213151734365"></p><p><img src="/2021/02/15/MyBatis-%E9%AB%98%E7%BA%A7/image-20191213152409343.png" alt="image-20191213152409343"></p><p>Product.java</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs typescript">package cn.kongwei_liao.domain;<br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Product</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> Long id;<br>    <span class="hljs-keyword">private</span> <span class="hljs-built_in">String</span> productname;<br>    <span class="hljs-keyword">private</span> Long dirId;<br>    <span class="hljs-keyword">private</span> Double saleprice;<br>    <span class="hljs-keyword">private</span> <span class="hljs-built_in">String</span> supplier;<br>    <span class="hljs-keyword">private</span> <span class="hljs-built_in">String</span> brand;<br>    <span class="hljs-keyword">private</span> Double cutoff;<br>    <span class="hljs-keyword">private</span> Double costprice;<br>    <span class="hljs-keyword">public</span> Long <span class="hljs-function"><span class="hljs-title">getId</span>(<span class="hljs-params"></span>)</span> &#123;<span class="hljs-keyword">return</span> id;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">setId</span>(<span class="hljs-params">Long id</span>)</span> &#123;<span class="hljs-built_in">this</span>.id = id;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">String</span> <span class="hljs-function"><span class="hljs-title">getProductname</span>(<span class="hljs-params"></span>)</span> &#123;<span class="hljs-keyword">return</span> productname;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">setProductname</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> productname</span>)</span> &#123;<span class="hljs-built_in">this</span>.productname = productname == <span class="hljs-literal">null</span> ? <span class="hljs-literal">null</span> : productname.trim();&#125;<br>    <span class="hljs-keyword">public</span> Long <span class="hljs-function"><span class="hljs-title">getDirId</span>(<span class="hljs-params"></span>)</span> &#123;<span class="hljs-keyword">return</span> dirId;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">setDirId</span>(<span class="hljs-params">Long dirId</span>)</span> &#123;<span class="hljs-built_in">this</span>.dirId = dirId;&#125;<br>    <span class="hljs-keyword">public</span> Double <span class="hljs-function"><span class="hljs-title">getSaleprice</span>(<span class="hljs-params"></span>)</span> &#123;<span class="hljs-keyword">return</span> saleprice;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">setSaleprice</span>(<span class="hljs-params">Double saleprice</span>)</span> &#123;<span class="hljs-built_in">this</span>.saleprice = saleprice;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">String</span> <span class="hljs-function"><span class="hljs-title">getSupplier</span>(<span class="hljs-params"></span>)</span> &#123;<span class="hljs-keyword">return</span> supplier;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">setSupplier</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> supplier</span>)</span> &#123;<span class="hljs-built_in">this</span>.supplier = supplier == <span class="hljs-literal">null</span> ? <span class="hljs-literal">null</span> : supplier.trim();&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">String</span> <span class="hljs-function"><span class="hljs-title">getBrand</span>(<span class="hljs-params"></span>)</span> &#123;<span class="hljs-keyword">return</span> brand;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">setBrand</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> brand</span>)</span> &#123;<span class="hljs-built_in">this</span>.brand = brand == <span class="hljs-literal">null</span> ? <span class="hljs-literal">null</span> : brand.trim();&#125;<br>    <span class="hljs-keyword">public</span> Double <span class="hljs-function"><span class="hljs-title">getCutoff</span>(<span class="hljs-params"></span>)</span> &#123;<span class="hljs-keyword">return</span> cutoff;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">setCutoff</span>(<span class="hljs-params">Double cutoff</span>)</span> &#123;<span class="hljs-built_in">this</span>.cutoff = cutoff;&#125;<br>    <span class="hljs-keyword">public</span> Double <span class="hljs-function"><span class="hljs-title">getCostprice</span>(<span class="hljs-params"></span>)</span> &#123;<span class="hljs-keyword">return</span> costprice;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">setCostprice</span>(<span class="hljs-params">Double costprice</span>)</span> &#123;<span class="hljs-built_in">this</span>.costprice = costprice;&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ProductMapper.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> cn.kongwei_liao.mapper;<br><span class="hljs-keyword">import</span> cn.kongwei_liao.domain.Product;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">ProductMapper</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">deleteByPrimaryKey</span><span class="hljs-params">(Long id)</span></span>;<br>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">insert</span><span class="hljs-params">(Product record)</span></span>;<br>    <span class="hljs-function">Product <span class="hljs-title">selectByPrimaryKey</span><span class="hljs-params">(Long id)</span></span>;<br>    <span class="hljs-function">List&lt;Product&gt; <span class="hljs-title">selectAll</span><span class="hljs-params">()</span></span>;<br>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">updateByPrimaryKey</span><span class="hljs-params">(Product record)</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>ProductMapper.xml</p><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">mapper</span> <span class="hljs-meta-keyword">PUBLIC</span> <span class="hljs-meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="hljs-meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;cn.kongwei_liao.mapper.ProductMapper&quot;</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;BaseResultMap&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;cn.kongwei_liao.domain.Product&quot;</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;id&quot;</span> <span class="hljs-attr">jdbcType</span>=<span class="hljs-string">&quot;BIGINT&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;id&quot;</span> /&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;productName&quot;</span> <span class="hljs-attr">jdbcType</span>=<span class="hljs-string">&quot;VARCHAR&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;productname&quot;</span> /&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;dir_id&quot;</span> <span class="hljs-attr">jdbcType</span>=<span class="hljs-string">&quot;BIGINT&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;dirId&quot;</span> /&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;salePrice&quot;</span> <span class="hljs-attr">jdbcType</span>=<span class="hljs-string">&quot;DOUBLE&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;saleprice&quot;</span> /&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;supplier&quot;</span> <span class="hljs-attr">jdbcType</span>=<span class="hljs-string">&quot;VARCHAR&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;supplier&quot;</span> /&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;brand&quot;</span> <span class="hljs-attr">jdbcType</span>=<span class="hljs-string">&quot;VARCHAR&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;brand&quot;</span> /&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;cutoff&quot;</span> <span class="hljs-attr">jdbcType</span>=<span class="hljs-string">&quot;DOUBLE&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;cutoff&quot;</span> /&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;costPrice&quot;</span> <span class="hljs-attr">jdbcType</span>=<span class="hljs-string">&quot;DOUBLE&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;costprice&quot;</span> /&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">delete</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;deleteByPrimaryKey&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;java.lang.Long&quot;</span>&gt;</span></span><br><span class="xml">    delete from product</span><br><span class="xml">    where id = #</span><span class="hljs-template-variable">&#123;id,jdbcType=BIGINT&#125;</span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">delete</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;insert&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;cn.kongwei_liao.domain.Product&quot;</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">selectKey</span> <span class="hljs-attr">keyProperty</span>=<span class="hljs-string">&quot;id&quot;</span> <span class="hljs-attr">order</span>=<span class="hljs-string">&quot;BEFORE&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;java.lang.Long&quot;</span>&gt;</span></span><br><span class="xml">      SELECT LAST_INSERT_ID()</span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">selectKey</span>&gt;</span></span><br><span class="xml">    insert into product (id, productName, dir_id, </span><br><span class="xml">      salePrice, supplier, brand, </span><br><span class="xml">      cutoff, costPrice)</span><br><span class="xml">    values (#</span><span class="hljs-template-variable">&#123;id,jdbcType=BIGINT&#125;</span><span class="xml">, #</span><span class="hljs-template-variable">&#123;productname,jdbcType=VARCHAR&#125;</span><span class="xml">, #</span><span class="hljs-template-variable">&#123;dirId,jdbcType=BIGINT&#125;</span><span class="xml">, </span><br><span class="xml">      #</span><span class="hljs-template-variable">&#123;saleprice,jdbcType=DOUBLE&#125;</span><span class="xml">, #</span><span class="hljs-template-variable">&#123;supplier,jdbcType=VARCHAR&#125;</span><span class="xml">, #</span><span class="hljs-template-variable">&#123;brand,jdbcType=VARCHAR&#125;</span><span class="xml">, </span><br><span class="xml">      #</span><span class="hljs-template-variable">&#123;cutoff,jdbcType=DOUBLE&#125;</span><span class="xml">, #</span><span class="hljs-template-variable">&#123;costprice,jdbcType=DOUBLE&#125;</span><span class="xml">)</span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">update</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;updateByPrimaryKey&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;cn.kongwei_liao.domain.Product&quot;</span>&gt;</span></span><br><span class="xml">    update product</span><br><span class="xml">    set productName = #</span><span class="hljs-template-variable">&#123;productname,jdbcType=VARCHAR&#125;</span><span class="xml">,</span><br><span class="xml">      dir_id = #</span><span class="hljs-template-variable">&#123;dirId,jdbcType=BIGINT&#125;</span><span class="xml">,</span><br><span class="xml">      salePrice = #</span><span class="hljs-template-variable">&#123;saleprice,jdbcType=DOUBLE&#125;</span><span class="xml">,</span><br><span class="xml">      supplier = #</span><span class="hljs-template-variable">&#123;supplier,jdbcType=VARCHAR&#125;</span><span class="xml">,</span><br><span class="xml">      brand = #</span><span class="hljs-template-variable">&#123;brand,jdbcType=VARCHAR&#125;</span><span class="xml">,</span><br><span class="xml">      cutoff = #</span><span class="hljs-template-variable">&#123;cutoff,jdbcType=DOUBLE&#125;</span><span class="xml">,</span><br><span class="xml">      costPrice = #</span><span class="hljs-template-variable">&#123;costprice,jdbcType=DOUBLE&#125;</span><br><span class="xml">    where id = #</span><span class="hljs-template-variable">&#123;id,jdbcType=BIGINT&#125;</span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">update</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;selectByPrimaryKey&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;java.lang.Long&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;BaseResultMap&quot;</span>&gt;</span></span><br><span class="xml">    select id, productName, dir_id, salePrice, supplier, brand, cutoff, costPrice</span><br><span class="xml">    from product</span><br><span class="xml">    where id = #</span><span class="hljs-template-variable">&#123;id,jdbcType=BIGINT&#125;</span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;selectAll&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;BaseResultMap&quot;</span>&gt;</span></span><br><span class="xml">    select id, productName, dir_id, salePrice, supplier, brand, cutoff, costPrice</span><br><span class="xml">    from product</span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p>ç”Ÿæˆä»£ç åæ­£å¸¸æ“ä½œå³å¯(æ³¨:æµ‹è¯•è¯·åŠ ä¸ŠMyBatis.xmlæ–‡ä»¶)</p><h4 id="2ã€ä½¿ç”¨ç»†èŠ‚"><a href="#2ã€ä½¿ç”¨ç»†èŠ‚" class="headerlink" title="2ã€ä½¿ç”¨ç»†èŠ‚"></a>2ã€ä½¿ç”¨ç»†èŠ‚</h4><h5 id="2-1ã€é…ç½®å¤šä¸ªè¡¨å’Œæ‰€æœ‰è¡¨"><a href="#2-1ã€é…ç½®å¤šä¸ªè¡¨å’Œæ‰€æœ‰è¡¨" class="headerlink" title="2.1ã€é…ç½®å¤šä¸ªè¡¨å’Œæ‰€æœ‰è¡¨"></a>2.1ã€é…ç½®å¤šä¸ªè¡¨å’Œæ‰€æœ‰è¡¨</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- </span><br><span class="hljs-comment"> &lt;table tableName=&quot;user&quot; domainObjectName=&quot;User&quot;&gt;</span><br><span class="hljs-comment">     &lt;generatedKey column=&quot;id&quot; sqlStatement=&quot;MySql&quot; /&gt;</span><br><span class="hljs-comment"> &lt;/table&gt;</span><br><span class="hljs-comment"> &lt;table tableName=&quot;t_employee&quot; domainObjectName=&quot;Employee&quot;&gt;</span><br><span class="hljs-comment">     &lt;generatedKey column=&quot;id&quot; sqlStatement=&quot;MySql&quot; /&gt;</span><br><span class="hljs-comment"> &lt;/table&gt;</span><br><span class="hljs-comment">--&gt;</span><br> <span class="hljs-comment">&lt;!--æŠŠæ‰€æœ‰çš„è¡¨å…¨éƒ¨éƒ½ç”Ÿæˆï¼ˆä¸å»ºè®®çš„åšæ³•ï¼‰:</span><br><span class="hljs-comment">  æ³¨æ„:domainæ˜¯æ ¹æ®è¡¨åå­—æ¥çš„,é©¼å³°å¼å‘½å,åˆ›å»ºè¡¨çš„æ—¶å€™,å¯èƒ½ä¸è¦å†™t_user==&gt;user</span><br><span class="hljs-comment"> --&gt;</span><br> <span class="hljs-tag">&lt;<span class="hljs-name">table</span> <span class="hljs-attr">tableName</span>=<span class="hljs-string">&quot;%&quot;</span> &gt;</span><br>     <span class="hljs-tag">&lt;<span class="hljs-name">generatedKey</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;id&quot;</span> <span class="hljs-attr">sqlStatement</span>=<span class="hljs-string">&quot;MySql&quot;</span> /&gt;</span><br> <span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span><br></code></pre></td></tr></table></figure><h5 id="2-2ã€è‡ªå®šä¹‰é…ç½®è·¯å¾„ï¼ˆä¸å»ºè®®ä¿®æ”¹ï¼‰"><a href="#2-2ã€è‡ªå®šä¹‰é…ç½®è·¯å¾„ï¼ˆä¸å»ºè®®ä¿®æ”¹ï¼‰" class="headerlink" title="2.2ã€è‡ªå®šä¹‰é…ç½®è·¯å¾„ï¼ˆä¸å»ºè®®ä¿®æ”¹ï¼‰"></a>2.2ã€è‡ªå®šä¹‰é…ç½®è·¯å¾„ï¼ˆä¸å»ºè®®ä¿®æ”¹ï¼‰</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis.generator<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-generator-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.3.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>      <span class="hljs-comment">&lt;!-- é»˜è®¤æ˜¯classpathçš„generatorConfig.xml --&gt;</span><br>      <span class="hljs-comment">&lt;!-- è‡ªå®šä¹‰é…ç½®æ–‡ä»¶è·¯å¾„ --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">configurationFile</span>&gt;</span>src/main/resources/testGeneratorCofig.xml<span class="hljs-tag">&lt;/<span class="hljs-name">configurationFile</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--æ‰§è¡Œçš„å†…å®¹è¾“å‡ºåˆ°æ§åˆ¶å°--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">verbose</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">verbose</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- é‡å†™ï¼Œæœ‰å°±è¦†ç›– --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">overwrite</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">overwrite</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="MyBatisæ‹¦æˆªå™¨"><a href="#MyBatisæ‹¦æˆªå™¨" class="headerlink" title="MyBatisæ‹¦æˆªå™¨"></a>MyBatisæ‹¦æˆªå™¨</h3><p>å’±ä»¬åšMyBatisä¹Ÿæä¾›äº†ä¸€ç§æ’ä»¶æœºåˆ¶ï¼Œå®é™…ä¸Šæ˜¯æ‹¦æˆªå™¨çš„æœºåˆ¶ã€‚MyBatis å…è®¸ä½ åœ¨å·²æ˜ å°„è¯­å¥æ‰§è¡Œè¿‡ç¨‹ä¸­çš„æŸä¸€ç‚¹è¿›è¡Œæ‹¦æˆªè°ƒç”¨ã€‚å¯¹äºæ‹¦æˆªå™¨ï¼ŒMybatisä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªInterceptoræ¥å£ï¼Œé€šè¿‡å®ç°è¯¥æ¥å£å°±å¯ä»¥å®šä¹‰æˆ‘ä»¬è‡ªå·±çš„æ‹¦æˆªå™¨ã€‚</p><p>é€šç”¨æ‹¦æˆªå™¨æ­¥éª¤ï¼š</p><p>1ï¼‰åˆ›å»ºä¸€ä¸ªæ‹¦æˆªå™¨ç±»ï¼šå®ç°æ¥å£Interceptor</p><p>2ï¼‰å®ç°æ‹¦æˆªé€»è¾‘ï¼šå¤å†™ä¸‰ä¸ªæ–¹æ³•</p><p>3ï¼‰é…ç½®æ‹¦æˆªå™¨ç”Ÿæ•ˆï¼šé…ç½®åˆ°ä¸»é…ç½®æ–‡ä»¶</p><h4 id="1ã€åˆ›å»ºå¹¶å®ç°æ‹¦æˆªå™¨"><a href="#1ã€åˆ›å»ºå¹¶å®ç°æ‹¦æˆªå™¨" class="headerlink" title="1ã€åˆ›å»ºå¹¶å®ç°æ‹¦æˆªå™¨"></a>1ã€åˆ›å»ºå¹¶å®ç°æ‹¦æˆªå™¨</h4><h5 id="1-1ã€åˆ›å»ºæ‹¦æˆªå™¨"><a href="#1-1ã€åˆ›å»ºæ‹¦æˆªå™¨" class="headerlink" title="1.1ã€åˆ›å»ºæ‹¦æˆªå™¨"></a>1.1ã€åˆ›å»ºæ‹¦æˆªå™¨</h5><p>MyBatisä¸­åˆ›å»ºæ‹¦æˆªå™¨å¿…éœ€è¦æœ‰ä¸¤ä¸ªå…ƒç´ </p><p>å…ƒç´ 1ï¼šå®ç°org.apache.ibatis.plugin.Interceptoræ¥å£</p><p>å…ƒç´ 2ï¼šå®ç°æ‹¦æˆªå™¨ç­¾å(è¿™ä¸ªç­¾åæ¯”è¾ƒå¤æ‚ï¼Œå’±ä»¬åé¢å†å•ç‹¬ä»‹ç»)</p><p>HelloInterceptor.java</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">package cn.kongwei_liao.interceptor;<br><br><span class="hljs-keyword">import</span> java.lang.reflect.<span class="hljs-keyword">Method</span>;<br><span class="hljs-keyword">import</span> java.<span class="hljs-keyword">sql</span>.<span class="hljs-keyword">Statement</span>;<br><span class="hljs-keyword">import</span> java.util.Properties;<br><br><span class="hljs-keyword">import</span> org.apache.ibatis.executor.resultset.ResultSetHandler;<br><span class="hljs-keyword">import</span> org.apache.ibatis.plugin.Interceptor;<br><span class="hljs-keyword">import</span> org.apache.ibatis.plugin.Intercepts;<br><span class="hljs-keyword">import</span> org.apache.ibatis.plugin.Invocation;<br><span class="hljs-keyword">import</span> org.apache.ibatis.plugin.Plugin;<br><span class="hljs-keyword">import</span> org.apache.ibatis.plugin.Signature;<br><br>//ä¸‹é¢é…ç½®æ–¹æ³•ç­¾å(å¯ä»¥æ˜¯å¤šä¸ª)<br>@Intercepts(&#123;<br>@Signature(<br><span class="hljs-keyword">type</span>=ResultSetHandler.<span class="hljs-keyword">class</span>, //ä¸€ä¸ªç»“æœé›†å¤„ç†çš„æ¥å£<br><span class="hljs-keyword">method</span> = &quot;handleResultSets&quot;, //é™¤å­˜å‚¨è¿‡ç¨‹ åŠè¿”å›å€¼ç±»å‹ä¸º<span class="hljs-keyword">Cursor</span>ä»¥å¤–çš„æŸ¥è¯¢æ–¹æ³•ä¸­è¢«è°ƒç”¨ <br>args=&#123;<span class="hljs-keyword">Statement</span>.<span class="hljs-keyword">class</span>&#125; //è¿™ä¸ªæ–¹æ³•ä¸­å¿…éœ€ä¼ çš„å€¼<br>)<br>&#125;)<br><span class="hljs-built_in">public</span> <span class="hljs-keyword">class</span> HelloInterceptor implements Interceptor &#123;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * è¿™ä¸ªæ–¹æ³•å°±æ˜¯è¿è¡Œæ—¶çš„æ‹¦æˆªæ–¹æ³•(invocationä¸­æœ‰å¾ˆå¤šæœ‰ç”¨çš„ä¿¡æ¯)</span><br><span class="hljs-comment"> */</span><br>@Override<br><span class="hljs-built_in">public</span> <span class="hljs-keyword">Object</span> intercept(Invocation invocation) throws Throwable &#123;<br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(&quot;æ‰§è¡Œåˆ°äº†intercept...&quot;);<br><span class="hljs-keyword">Object</span> target = invocation.getTarget();//è·å–å½“å‰è¢«æ‹¦æˆªçš„å¯¹è±¡ <br><span class="hljs-keyword">Method</span> <span class="hljs-keyword">method</span> = invocation.getMethod();//è¢«æ‹¦æˆªçš„æ–¹æ³•<br><span class="hljs-keyword">Object</span>[] args = invocation.getArgs(); //æ–¹æ³•ä¸­çš„å‚æ•°<br>//proceedï¼šå®é™…ä¸Šæ‰§è¡Œäº† <span class="hljs-keyword">method</span>.invoke(target,args);<br><span class="hljs-keyword">Object</span> result = invocation.proceed();<br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(result);<br><span class="hljs-keyword">return</span> result;<br>&#125;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ–¹æ³•ä¸­å‚æ•°targetå°±æ˜¯æ‹¦æˆªå™¨è¦æ‹¦æˆªçš„å¯¹è±¡ </span><br><span class="hljs-comment"> * è°ƒç”¨æ—¶æœº:åˆ›å»ºè¢«æ‹¦æˆªçš„æ¥å£å®ç°ç±»æ—¶è¢«è°ƒç”¨</span><br><span class="hljs-comment"> * </span><br><span class="hljs-comment"> */</span><br>@Override<br><span class="hljs-built_in">public</span> <span class="hljs-keyword">Object</span> plugin(<span class="hljs-keyword">Object</span> target) &#123;<br><span class="hljs-keyword">return</span> Plugin.wrap(target, this);<br>&#125;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * ç”¨æ¥ä¼ é€’æ’ä»¶çš„å‚æ•°ï¼Œå¯ä»¥é€šè¿‡å‚æ•°æ”¹å˜ æ’ä»¶çš„è¡Œä¸º</span><br><span class="hljs-comment"> * è¿™ä¸ªå‚æ•°éœ€è¦åœ¨ mybatis.xmlä¸­è¿›è¡Œé…ç½®</span><br><span class="hljs-comment"> *  è°ƒç”¨ æ—¶æœº:æ‹¦æˆªå™¨åˆå§‹åŒ–çš„æ—¶å€™è¿™é‡Œå°±å¯ä»¥æ‹¿åˆ°å€¼</span><br><span class="hljs-comment"> */</span><br>@Override<br><span class="hljs-built_in">public</span> <span class="hljs-type">void</span> setProperties(Properties properties) &#123;<br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(properties.getProperty(&quot;prop1&quot;));<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="1-2ã€é…ç½®æ‹¦æˆªå™¨"><a href="#1-2ã€é…ç½®æ‹¦æˆªå™¨" class="headerlink" title="1.2ã€é…ç½®æ‹¦æˆªå™¨"></a>1.2ã€é…ç½®æ‹¦æˆªå™¨</h5><p>Mybatis.xml</p><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">configuration</span> <span class="hljs-meta-keyword">PUBLIC</span> <span class="hljs-meta-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="xml">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;</span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">properties</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;db.properties&quot;</span> /&gt;</span></span><br><span class="xml"></span><br><span class="xml"><span class="hljs-comment">&lt;!-- é…ç½®æ’ä»¶ --&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">plugin</span> <span class="hljs-attr">interceptor</span>=<span class="hljs-string">&quot;cn.zhao.interceptor.HelloInterceptor&quot;</span>&gt;</span></span><br><span class="xml"><span class="hljs-comment">&lt;!-- è¿™é‡Œé…ç½®çš„å°±æ˜¯å‚æ•° --&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;prop1&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;value1&quot;</span>/&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;prop2&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;value2&quot;</span>/&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span></span><br><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">environments</span> <span class="hljs-attr">default</span>=<span class="hljs-string">&quot;development&quot;</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">environment</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;development&quot;</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">transactionManager</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dataSource</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driver&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$</span></span></span><span class="hljs-template-variable">&#123;db.driver&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>/&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$</span></span></span><span class="hljs-template-variable">&#123;db.url&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>/&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$</span></span></span><span class="hljs-template-variable">&#123;db.username&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>/&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$</span></span></span><span class="hljs-template-variable">&#123;db.password&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>/&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">dataSource</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">environment</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">environments</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">mappers</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;cn/zhao/mapping/UserMapper.xml&quot;</span>/&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">mappers</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h5 id="1-3ã€æµ‹è¯•"><a href="#1-3ã€æµ‹è¯•" class="headerlink" title="1.3ã€æµ‹è¯•"></a>1.3ã€æµ‹è¯•</h5><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">@Test<br><span class="hljs-built_in">public</span> <span class="hljs-type">void</span> testSearch() throws <span class="hljs-keyword">Exception</span> &#123;<br>SqlSession <span class="hljs-keyword">session</span> = MyBatisUtils.openSession();<br>UserMapper mapper = <span class="hljs-keyword">session</span>.getMapper(UserMapper.<span class="hljs-keyword">class</span>);<br>List&lt;<span class="hljs-keyword">User</span>&gt; users = mapper.selectAll();<br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(users);<br><br><span class="hljs-keyword">session</span>.<span class="hljs-keyword">commit</span>();<br><span class="hljs-keyword">session</span>.<span class="hljs-keyword">close</span>();<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="1-4ã€ç»“æœï¼ˆæŸ¥è¯¢çš„æ—¶å€™å¯ä»¥æ‰¾åˆ°ç›¸åº”çš„æ‹¦æˆªå™¨äº†ï¼‰"><a href="#1-4ã€ç»“æœï¼ˆæŸ¥è¯¢çš„æ—¶å€™å¯ä»¥æ‰¾åˆ°ç›¸åº”çš„æ‹¦æˆªå™¨äº†ï¼‰" class="headerlink" title="1.4ã€ç»“æœï¼ˆæŸ¥è¯¢çš„æ—¶å€™å¯ä»¥æ‰¾åˆ°ç›¸åº”çš„æ‹¦æˆªå™¨äº†ï¼‰"></a>1.4ã€ç»“æœï¼ˆæŸ¥è¯¢çš„æ—¶å€™å¯ä»¥æ‰¾åˆ°ç›¸åº”çš„æ‹¦æˆªå™¨äº†ï¼‰</h5><p><strong>value1</strong></p><p>log4j:WARN No appenders could be found for logger (org.apache.ibatis.logging.LogFactory).</p><p>log4j:WARN Please initialize the log4j system properly.</p><p>log4j:WARN See <a href="http://logging.apache.org/log4j/1.2/faq.html#noconfig">http://logging.apache.org/log4j/1.2/faq.html#noconfig</a> for more info.</p><p><strong>æ‰§è¡Œåˆ°äº†interceptâ€¦</strong></p><p>[User [id=2, name=xxxxxxxx], User [id=3, name=yyyyyyyyyyyyy], User [id=4, name=yyyyyyyyyyyyy], User [id=5, name=yyyyyyyyyyyyy]]</p><h4 id="2ã€æ‹¦æˆªå™¨ä¸­çš„æ–¹æ³•"><a href="#2ã€æ‹¦æˆªå™¨ä¸­çš„æ–¹æ³•" class="headerlink" title="2ã€æ‹¦æˆªå™¨ä¸­çš„æ–¹æ³•"></a>2ã€æ‹¦æˆªå™¨ä¸­çš„æ–¹æ³•</h4><h5 id="2-1ã€setProperties-Properties-properties"><a href="#2-1ã€setProperties-Properties-properties" class="headerlink" title="2.1ã€setProperties(Properties properties)"></a>2.1ã€setProperties(Properties properties)</h5><p>è¿™ä¸ªæ–¹æ³•ä¸»è¦æ˜¯å¯ä»¥æ‹¿åˆ°é…ç½®æ–‡ä»¶çš„å‚æ•°ï¼Œæˆ‘ä»¬æ ¹æ®è¿™äº›å‚æ•°è¿›è¡Œç›¸åº”çš„æ“ä½œ</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- é…ç½®æ’ä»¶ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">plugin</span> <span class="hljs-attr">interceptor</span>=<span class="hljs-string">&quot;cn.zhao.interceptor.HelloInterceptor&quot;</span>&gt;</span><br><span class="hljs-comment">&lt;!-- è¿™é‡Œé…ç½®çš„å°±æ˜¯å‚æ•° --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;prop1&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;MySql&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;prop2&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;Oracle&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span><br></code></pre></td></tr></table></figure><p>é€šè¿‡ç›¸åº”çš„ä»£ç å°±å¯ä»¥å¾—åˆ°ä¸Šé¢çš„å‚æ•°ï¼Œå½“æ‹¦æˆªå™¨åˆå§‹åŒ–çš„æ—¶å€™å¯ä»¥æ‹¿åˆ°å€¼ã€‚</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">@Override<br>public void ser<span class="hljs-constructor">Properties(Properties <span class="hljs-params">properties</span>)</span>&#123;<br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(properties.get<span class="hljs-constructor">Property(<span class="hljs-string">&quot;prop1&quot;</span>)</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="2-2ã€Object-plugin-Object-target"><a href="#2-2ã€Object-plugin-Object-target" class="headerlink" title="2.2ã€Object plugin(Object target)"></a>2.2ã€Object plugin(Object target)</h5><p>é‡Œé¢çš„targetå°±æ˜¯æ‹¦æˆªå™¨è¦æ‹¦æˆªçš„å¯¹è±¡ï¼Œåˆ›å»ºè¢«è¿æ¥çš„æ¥å£å®ç°ç±»æ—¶è¢«è°ƒç”¨ï¼Œè¿™ä¸ªæ–¹æ³•å®ç°å¾ˆç®€å•ï¼Œç›´æ¥è°ƒç”¨å³å¯ã€‚</p><p>Plugin.wrapæ–¹æ³•ä¼šè‡ªåŠ¨åˆ¤æ–­æ‹¦æˆªå™¨çš„ç­¾åå’Œè¢«æ‹¦æˆªå¯¹è±¡ã€æ¥å£æ˜¯å¦åŒ¹é…ï¼Œåªæœ‰åŒ¹é…çš„æƒ…å†µä¸‹æ‰ä¼šä½¿ç”¨åŠ¨æ€ä»£ç†æ‹¦æˆªç›®æ ‡å¯¹è±¡ï¼Œè¿™ä¸ªæ–¹æ³•ä¸éœ€è¦åšä»»ä½•çš„é€»è¾‘åˆ¤æ–­ã€‚</p><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs aspectj"><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-function">Object <span class="hljs-title">plugin</span><span class="hljs-params">(Object <span class="hljs-keyword">target</span>)</span></span>&#123;<br><span class="hljs-function"><span class="hljs-keyword">return</span> Plugin.<span class="hljs-title">wrap</span><span class="hljs-params">(<span class="hljs-keyword">target</span>,<span class="hljs-keyword">this</span>)</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="2-3ã€Object-intercept-Invocation-invocation-throws-Throwable"><a href="#2-3ã€Object-intercept-Invocation-invocation-throws-Throwable" class="headerlink" title="2.3ã€Object intercept(Invocation invocation) throws Throwable"></a>2.3ã€Object intercept(Invocation invocation) throws Throwable</h5><p>è¿™ä¸ªç®—æ˜¯æ ¸å¿ƒæ–¹æ³•ï¼Œå®ƒå¯ä»¥æ‹¿åˆ°è¢«æ‹¦æˆªçš„å¯¹è±¡ï¼Œæ–¹æ³•ï¼Œå‚æ•°ç­‰ç­‰ï¼Œæˆ‘ä»¬ä¿®æ”¹ç»“æœï¼Œåˆ›å»ºåŠŸèƒ½ä¹Ÿä¸€èˆ¬æ˜¯åœ¨è¿™ä¸ªæ–¹æ³•ä¸­å®Œæˆã€‚</p><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs processing">@Override<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">Object</span> intercept(Invocation invocation)<span class="hljs-keyword">throws</span> Throwable&#123;<br><span class="hljs-keyword">Object</span> target = invocation.getTarget();<span class="hljs-comment">//è·å¾—å½“å‰è¢«æ‹¦æˆªçš„å¯¹è±¡</span><br>Method method = invocation.getMethod();<span class="hljs-comment">//è¢«æ‹¦æˆªçš„æ–¹æ³•</span><br><span class="hljs-keyword">Object</span>[] args = invocation.getArgs();<span class="hljs-comment">//æ–¹æ³•ä¸­çš„å‚æ•°</span><br><span class="hljs-comment">//proceedï¼šå®é™…ä¸Šæ‰§è¡Œäº†method.invoke(target, args);</span><br><span class="hljs-keyword">Object</span> result = invocation.proceed();<br>System.out.<span class="hljs-built_in">println</span>(result);<br><span class="hljs-keyword">return</span> result;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="3ã€æ‹¦æˆªå™¨çš„ç­¾åé…ç½®è®¤è¯†"><a href="#3ã€æ‹¦æˆªå™¨çš„ç­¾åé…ç½®è®¤è¯†" class="headerlink" title="3ã€æ‹¦æˆªå™¨çš„ç­¾åé…ç½®è®¤è¯†"></a>3ã€æ‹¦æˆªå™¨çš„ç­¾åé…ç½®è®¤è¯†</h4><p><img src="/2021/02/15/MyBatis-%E9%AB%98%E7%BA%A7/image-20191213013118657.png" alt="image-20191213013118657"></p><p>ç­¾åæŒ‡çš„å°±æ˜¯å’±ä»¬é…ç½®æ‹¦æˆªå™¨ä¸Šé¢çš„æ³¨è§£ï¼Œè¿™ä¸ªæ³¨è§£æ˜¯å†™æ‹¦æˆªå™¨çš„æ—¶å€™å¿…éœ€è¦é…ç½®çš„,å…¶å®å°±æ˜¯æŠ“ä½è¿™äº›æ‹¦æˆªå™¨çš„æ—¶æœºã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥ä»‹ç»ä¸€ä¸‹è¿™ä¸ªç­¾åï¼š</p><p>åŸºæœ¬æ ¼å¼:</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@Intercepts</span>(&#123;<br><span class="hljs-variable">@Signature</span>(<br>type=ç­¾åç±»å‹.class,<br>method = <span class="hljs-string">&quot;è¿™ä¸ªç±»å‹å¯¹åº”çš„æ–¹æ³•&quot;</span>,<br>args=&#123;å‚æ•°&#125;<br>),<br>... <span class="hljs-comment">//æ³¨:è¿™ä¸ªç­¾åæ˜¯å¯ä»¥ç›´æ¥é…ç½®å¤šä¸ªçš„</span><br>&#125;)<br></code></pre></td></tr></table></figure><p>ç­¾åç±»å‹åˆ†åˆ«æœ‰ï¼š <code>Executor.class</code>,<code>ResultSetHandler.class</code>,<code>ParameterHandler.class</code>,<code>StatementHandler.class</code> è¿™å››ç§æ–¹å¼ ï¼Œæ¯ç§æ–¹å¼å¯¹åº”ä¸åŒçš„methodæ–¹æ³•ï¼Œæ¯ä¸ªæ–¹æ³•çš„å‚æ•°åˆä¸ä¸€æ ·(è¿™é‡Œæ–¹æ³•ä¸­çš„å‚æ•°æ–¹æ³•éƒ½æ˜¯å¯¹åº”ä¸Šçš„ï¼Œæ ¹æ®ç›¸åº”çš„è¦æ±‚åŠ ä¸Šå³å¯)</p><h5 id="3-1ã€Executoræ¥å£"><a href="#3-1ã€Executoræ¥å£" class="headerlink" title="3.1ã€Executoræ¥å£"></a>3.1ã€Executoræ¥å£</h5><p>å¯¹åº”çš„Method</p><p>updateï¼šä¼šåœ¨æ‰€æœ‰çš„insert,update,deleteæ‰§è¡Œæ—¶è¢«è°ƒç”¨</p><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs oxygene">@Signature(<br><span class="hljs-keyword">type</span>=Executor.class,<br><span class="hljs-function"><span class="hljs-keyword">method</span> = &quot;<span class="hljs-title">update</span>&quot;,</span><br><span class="hljs-function"><span class="hljs-title">args</span>=<span class="hljs-comment">&#123;MappedStatement.class,Object.class&#125;</span></span><br><span class="hljs-function">)</span><br></code></pre></td></tr></table></figure><p>query:ä¼šåœ¨æ‰€æœ‰selectæŸ¥è¯¢æ–¹æ³•è°ƒç”¨æ—¶è¢«æ‰§è¡Œ(è¿™ä¸ªæ˜¯æœ€å¸¸ç”¨çš„è¢«æ‹¦æˆªçš„æ–¹æ³•)</p><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs oxygene">@Signature(<br><span class="hljs-keyword">type</span>=Executor.class,<br><span class="hljs-function"><span class="hljs-keyword">method</span> = &quot;<span class="hljs-title">query</span>&quot;,</span><br><span class="hljs-function"><span class="hljs-title">args</span>=<span class="hljs-comment">&#123;MappedStatement.class,Object.class,RowBounds.class,ResultHandler.class&#125;</span></span><br><span class="hljs-function">)</span><br></code></pre></td></tr></table></figure><p>queryCursorï¼šè¿”å›å€¼ç±»å‹ä¸ºCursoræ—¶è¢«è°ƒç”¨</p><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs oxygene">@Signature(<br><span class="hljs-keyword">type</span>=Executor.class,<br><span class="hljs-function"><span class="hljs-keyword">method</span> = &quot;<span class="hljs-title">queryCursor</span>&quot;,</span><br><span class="hljs-function"><span class="hljs-title">args</span>=<span class="hljs-comment">&#123;MappedStatement.class,Object.class,RowBounds.class,ResultHandler.class&#125;</span></span><br><span class="hljs-function">)</span><br></code></pre></td></tr></table></figure><p>flushStatements:åœ¨SqlSessionæ–¹æ³•è°ƒç”¨ flushStatementsæ–¹æ³•æ—¶è°ƒç”¨</p><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs oxygene">@Signature(<br><span class="hljs-keyword">type</span>=Executor.class,<br><span class="hljs-function"><span class="hljs-keyword">method</span> = &quot;<span class="hljs-title">flushStatements</span>&quot;,</span><br><span class="hljs-function"><span class="hljs-title">args</span>=<span class="hljs-comment">&#123;&#125;</span></span><br><span class="hljs-function">)</span><br></code></pre></td></tr></table></figure><p>åé¢å‡ ä¸ªå’Œä¸Šé¢çš„flushStatementsä½¿ç”¨æ–¹å¼ä¸€æ ·ï¼Œåªæ˜¯æ”¹æ–¹æ³•åï¼Œè°ƒç”¨æ—¶æœºä¸ä¸€æ ·ï¼Œç”¨å¾—éƒ½ä¸å¤š<br>commitï¼šåœ¨SqlSessionæ–¹æ³•è°ƒç”¨ commitæ–¹æ³•æ—¶è°ƒç”¨<br>rollbackåœ¨SqlSessionæ–¹æ³•è°ƒç”¨ rollbackæ–¹æ³•æ—¶è°ƒç”¨<br>closeï¼šå»¶æ—¶åŠ è½½æ‰§è¡ŒæŸ¥è¯¢æ–¹æ³•å‰è¢«æ‰§è¡Œ</p><h5 id="3-2ã€ResultSetHandleræ¥å£"><a href="#3-2ã€ResultSetHandleræ¥å£" class="headerlink" title="3.2ã€ResultSetHandleræ¥å£"></a>3.2ã€ResultSetHandleræ¥å£</h5><p>å¯¹åº”çš„Method<br>handleResultSetsï¼šé™¤å­˜å‚¨è¿‡ç¨‹åŠè¿”å›å€¼ç±»å‹ä¸ºCursorä»¥å¤–çš„æŸ¥è¯¢æ–¹æ³•ä¸­è¢«è°ƒç”¨<br>å¯¹äºæ‹¦æˆªå¤„ç†æŸ¥è¯¢ç»“æœéå¸¸æœ‰ç”¨(è¢«è°ƒç”¨çš„ä½ç½®åœ¨å¤„ç†äºŒçº§ç¼“å­˜ä¹‹å‰)</p><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs oxygene">@Signature(<br><span class="hljs-keyword">type</span>=ResultSetHandler.class,<br><span class="hljs-function"><span class="hljs-keyword">method</span> = &quot;<span class="hljs-title">handleResultSets</span>&quot;,</span><br><span class="hljs-function"><span class="hljs-title">args</span>=<span class="hljs-comment">&#123;Statement.class&#125;</span></span><br><span class="hljs-function">)</span><br></code></pre></td></tr></table></figure><p>handleOutputParametersï¼šåªåœ¨ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹å¤„ç†å‡ºå‚æ—¶è¢«è°ƒç”¨(ç”¨å¤„ä¸å¤§)</p><h5 id="3-3ã€ParameterHandleræ¥å£"><a href="#3-3ã€ParameterHandleræ¥å£" class="headerlink" title="3.3ã€ParameterHandleræ¥å£"></a>3.3ã€ParameterHandleræ¥å£</h5><p>å¯¹åº”çš„Method<br>getParameterObject:åªåœ¨æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹å¤„ç†å‚æ•°çš„æ—¶å€™è°ƒç”¨</p><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs oxygene">@Signature(<br><span class="hljs-keyword">type</span>=ParameterHandler.class,<br><span class="hljs-function"><span class="hljs-keyword">method</span> = &quot;<span class="hljs-title">getParameterObject</span>&quot;,</span><br><span class="hljs-function"><span class="hljs-title">args</span>=<span class="hljs-comment">&#123;&#125;</span></span><br><span class="hljs-function">)</span><br></code></pre></td></tr></table></figure><p>setParametersï¼šæ‰€æœ‰æ•°æ®åº“æ–¹æ³•è®¾ç½®SQLå‚æ•°æ—¶è¢«è°ƒç”¨  #{id}   ?</p><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs oxygene">@Signature(<br><span class="hljs-keyword">type</span>=ParameterHandler.class,<br><span class="hljs-function"><span class="hljs-keyword">method</span> = &quot;<span class="hljs-title">setParameters</span>&quot;,</span><br><span class="hljs-function"><span class="hljs-title">args</span>=<span class="hljs-comment">&#123;PreparedStatement.class&#125;</span></span><br><span class="hljs-function">)</span><br></code></pre></td></tr></table></figure><h5 id="3-4ã€StatementHandler"><a href="#3-4ã€StatementHandler" class="headerlink" title="3.4ã€StatementHandler"></a>3.4ã€StatementHandler</h5><p>å¯¹åº”çš„Method<br>prepareï¼šåœ¨æ•°æ®åº“æ‰§è¡Œå‰è¢«è°ƒç”¨  </p><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs oxygene">@Signature(<br><span class="hljs-keyword">type</span>=StatementHandler.class,<br><span class="hljs-function"><span class="hljs-keyword">method</span> = &quot;<span class="hljs-title">prepare</span>&quot;,</span><br><span class="hljs-function"><span class="hljs-title">args</span>=<span class="hljs-comment">&#123;Connection.class,Integer.class&#125;</span></span><br><span class="hljs-function">)</span><br></code></pre></td></tr></table></figure><p>Parameterize:åœ¨prepareæ–¹æ³•ä¹‹åæ‰§è¡Œï¼Œç”¨äºå¤„ç†å‚æ•°ä¿¡æ¯</p><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs oxygene">@Signature(<br><span class="hljs-keyword">type</span>=StatementHandler.class,<br><span class="hljs-function"><span class="hljs-keyword">method</span> = &quot;<span class="hljs-title">Parameterize</span>&quot;,</span><br><span class="hljs-function"><span class="hljs-title">args</span>=<span class="hljs-comment">&#123;Statement.class&#125;</span></span><br><span class="hljs-function">)</span><br></code></pre></td></tr></table></figure><p>query:æ‰§è¡Œselectæ–¹æ³•æ—¶è°ƒç”¨ </p><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs oxygene">@Signature(<br><span class="hljs-keyword">type</span>=StatementHandler.class,<br><span class="hljs-function"><span class="hljs-keyword">method</span> = &quot;<span class="hljs-title">prepare</span>&quot;,</span><br><span class="hljs-function"><span class="hljs-title">args</span>=<span class="hljs-comment">&#123;Statement.class,ResultHandler.class&#125;</span></span><br><span class="hljs-function">)</span><br></code></pre></td></tr></table></figure><h3 id="MyBatisåˆ†é¡µæ’ä»¶çš„ä½¿ç”¨"><a href="#MyBatisåˆ†é¡µæ’ä»¶çš„ä½¿ç”¨" class="headerlink" title="MyBatisåˆ†é¡µæ’ä»¶çš„ä½¿ç”¨"></a>MyBatisåˆ†é¡µæ’ä»¶çš„ä½¿ç”¨</h3><h4 id="1ã€ä¸ºä»€ä¹ˆè¦ä½¿ç”¨åˆ†é¡µæ’ä»¶"><a href="#1ã€ä¸ºä»€ä¹ˆè¦ä½¿ç”¨åˆ†é¡µæ’ä»¶" class="headerlink" title="1ã€ä¸ºä»€ä¹ˆè¦ä½¿ç”¨åˆ†é¡µæ’ä»¶"></a>1ã€ä¸ºä»€ä¹ˆè¦ä½¿ç”¨åˆ†é¡µæ’ä»¶</h4><p>è¦åšåˆ†é¡µæ—¶ï¼ŒåŸç†å¿…é¡»åœ¨sqlä¸­å†™å…¥limitï¼Œå…¶å®è¿™ä¸ªè¿‡ç¨‹å¯ä»¥ä½¿ç”¨æ‹¦æˆªå™¨æ‹¦æˆªä¸‹æ¥åŠ¨æ€åŠ å…¥ã€‚</p><h4 id="2ã€å¼•å…¥åˆ†é¡µæ’ä»¶"><a href="#2ã€å¼•å…¥åˆ†é¡µæ’ä»¶" class="headerlink" title="2ã€å¼•å…¥åˆ†é¡µæ’ä»¶"></a>2ã€å¼•å…¥åˆ†é¡µæ’ä»¶</h4><p>éMavené¡¹ç›®ï¼Œéœ€è¦å¯¼å…¥jaråŒ…</p><p><img src="/2021/02/15/MyBatis-%E9%AB%98%E7%BA%A7/image-20191213014541386.png" alt="image-20191213014541386"></p><p>æ˜¯Mavené¡¹ç›®ï¼Œåœ¨pom.xmlä¸­æ·»åŠ ä¾èµ–</p><h4 id="3ã€é…ç½®æ‹¦æˆªå™¨æ’ä»¶"><a href="#3ã€é…ç½®æ‹¦æˆªå™¨æ’ä»¶" class="headerlink" title="3ã€é…ç½®æ‹¦æˆªå™¨æ’ä»¶"></a>3ã€é…ç½®æ‹¦æˆªå™¨æ’ä»¶</h4><p>åœ¨ MyBatis é…ç½® xml ä¸­é…ç½®æ‹¦æˆªå™¨æ’ä»¶</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.github.pagehelper<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>pagehelper<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.0.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>åœ¨ Spring é…ç½®æ–‡ä»¶ä¸­é…ç½®æ‹¦æˆªå™¨æ’ä»¶</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;sqlSessionFactory&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span><br>  <span class="hljs-comment">&lt;!-- æ³¨æ„å…¶ä»–é…ç½® --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;plugins&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">array</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.github.pagehelper.PageInterceptor&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">array</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure><p>æ²¡æœ‰springç¯å¢ƒçš„æ—¶å€™:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span> <span class="hljs-attr">interceptor</span>=<span class="hljs-string">&quot;com.github.pagehelper.PageInterceptor&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="4ã€å®ç°è¿‡ç¨‹"><a href="#4ã€å®ç°è¿‡ç¨‹" class="headerlink" title="4ã€å®ç°è¿‡ç¨‹"></a>4ã€å®ç°è¿‡ç¨‹</h4><p>ä½¿ç”¨PageHelper.startPage é™æ€æ–¹æ³•è°ƒç”¨startPage ï¼š<br>ç‰¹ç‚¹ï¼š</p><ol><li>é™æ€æ–¹æ³•ï¼Œä¼ é€’ä¸¤ä¸ªå‚æ•°ï¼ˆå½“å‰é¡µç ï¼Œæ¯é¡µæŸ¥è¯¢æ¡æ•°ï¼‰</li><li>ä½¿ç”¨pageHelper åˆ†é¡µçš„æ—¶å€™ï¼Œä¸å†å…³æ³¨åˆ†é¡µè¯­å¥ï¼ŒæŸ¥è¯¢å…¨éƒ¨çš„è¯­å¥</li><li>è‡ªåŠ¨çš„å¯¹PageHelper.startPage æ–¹æ³•ä¸‹çš„ç¬¬ä¸€ä¸ªsql æŸ¥è¯¢è¿›è¡Œåˆ†é¡µ<br>PageHelper.startPage(1,5);<br>//ç´§è·Ÿç€çš„ç¬¬ä¸€ä¸ªselect æ–¹æ³•ä¼šè¢«åˆ†é¡µ<br>List<Country> list = countryMapper.findAll();</Country></li></ol><p>ä¹Ÿå°±æ˜¯è¯´å†Serviceå±‚PageHelper.startPage(1,5)ï¼›è¯­å¥åä¸€å®šæ˜¯ç´§è·ŸæŸ¥è¯¢è¯­å¥ã€‚</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">public PageInfo find<span class="hljs-constructor">Page(<span class="hljs-params">int</span> <span class="hljs-params">page</span>,<span class="hljs-params">int</span> <span class="hljs-params">pageSize</span>)</span>&#123;<br>  <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">PageHelper</span>.</span></span>start<span class="hljs-constructor">Page(<span class="hljs-params">page</span>,<span class="hljs-params">pageSize</span>)</span>;<br>  List&lt;Company&gt; List=companyDao.select<span class="hljs-constructor">All()</span>;<br>  PageInfo pageInfo = <span class="hljs-keyword">new</span> <span class="hljs-constructor">PageInfo(<span class="hljs-params">list</span>)</span>;<br>  return pageInfo;<br> &#125;<br></code></pre></td></tr></table></figure><p>è¿”å›çš„ä¿¡æ¯å°±æ˜¯pageInfoå¯¹è±¡ï¼Œè¯¥ç±»æ˜¯æ’ä»¶é‡Œçš„ç±»ï¼Œè¿™ä¸ªç±»é‡Œé¢çš„å±æ€§è¿˜æ˜¯å€¼å¾—çœ‹ä¸€çœ‹</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> PageInfo&lt;T&gt; <span class="hljs-keyword">implements</span> Serializable &#123;<br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">long</span> serialVersionUID = <span class="hljs-number">1</span>L;<br><span class="hljs-comment">//å½“å‰é¡µ</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> pageNum;<br><span class="hljs-comment">//æ¯é¡µçš„æ•°é‡</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> pageSize;<br><span class="hljs-comment">//å½“å‰é¡µçš„æ•°é‡</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> <span class="hljs-keyword">size</span>;<br><span class="hljs-comment">//ç”±äºstartRow å’ŒendRow ä¸å¸¸ç”¨ï¼Œè¿™é‡Œè¯´ä¸ªå…·ä½“çš„ç”¨æ³•</span><br><span class="hljs-comment">//å¯ä»¥åœ¨é¡µé¢ä¸­&quot;æ˜¾ç¤ºstartRow åˆ°endRow å…±size æ¡æ•°æ®&quot;</span><br><span class="hljs-comment">//å½“å‰é¡µé¢ç¬¬ä¸€ä¸ªå…ƒç´ åœ¨æ•°æ®åº“ä¸­çš„è¡Œå·</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> startRow;<br><span class="hljs-comment">//å½“å‰é¡µé¢æœ€åä¸€ä¸ªå…ƒç´ åœ¨æ•°æ®åº“ä¸­çš„è¡Œå·</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> endRow;<br><span class="hljs-comment">//æ€»è®°å½•æ•°</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">long</span> total;<br><span class="hljs-comment">//æ€»é¡µæ•°</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> pages;<br><span class="hljs-comment">//ç»“æœé›†</span><br><span class="hljs-keyword">private</span> List&lt;T&gt; list;<br><span class="hljs-comment">//å‰ä¸€é¡µ</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> prePage;<br><span class="hljs-comment">//ä¸‹ä¸€é¡µ</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> nextPage;<br><span class="hljs-comment">//æ˜¯å¦ä¸ºç¬¬ä¸€é¡µ</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">boolean</span> isFirstPage = <span class="hljs-keyword">false</span>;<br><span class="hljs-comment">//æ˜¯å¦ä¸ºæœ€åä¸€é¡µ</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">boolean</span> isLastPage = <span class="hljs-keyword">false</span>;<br><span class="hljs-comment">//æ˜¯å¦æœ‰å‰ä¸€é¡µ</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">boolean</span> hasPreviousPage = <span class="hljs-keyword">false</span>;<br><span class="hljs-comment">//æ˜¯å¦æœ‰ä¸‹ä¸€é¡µ</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">boolean</span> hasNextPage = <span class="hljs-keyword">false</span>;<br><span class="hljs-comment">//å¯¼èˆªé¡µç æ•°</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> navigatePages;<br><span class="hljs-comment">//æ‰€æœ‰å¯¼èˆªé¡µå·</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span>[] navigatepageNums;<br><span class="hljs-comment">//å¯¼èˆªæ¡ä¸Šçš„ç¬¬ä¸€é¡µ</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> navigateFirstPage;<br><span class="hljs-comment">//å¯¼èˆªæ¡ä¸Šçš„æœ€åä¸€é¡µ</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> navigateLastPage;<br>&#125;<br></code></pre></td></tr></table></figure><p> åœ¨jspé¡µé¢ä¸­çš„å–å€¼æ ¹æ®PageInfoä¸­çš„getæ–¹æ³•ï¼Œä½¿ç”¨ELè¡¨è¾¾å¼å–å‡ºä¿å­˜çš„å€¼ã€‚</p><h4 id="5ã€æµ‹è¯•"><a href="#5ã€æµ‹è¯•" class="headerlink" title="5ã€æµ‹è¯•"></a>5ã€æµ‹è¯•</h4><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">@<span class="hljs-constructor">RunWith(SpringJUnit4ClassRunner.<span class="hljs-params">class</span>)</span><br>@<span class="hljs-constructor">ContextConfiguration( <span class="hljs-params">locations</span> = <span class="hljs-string">&quot;classpath:applicationContext.xml&quot;</span>)</span><br>public <span class="hljs-keyword">class</span> PageHalperTest &#123;<br>    @Autowired<br>    StaffMapper staffMapper;<br><br>    @Test<br>    public void <span class="hljs-constructor">TestPageHelper()</span>&#123;<br>        <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">PageHelper</span>.</span></span>start<span class="hljs-constructor">Page(1,5)</span>;<br>        List&lt;Staff&gt; users = staffMapper.select<span class="hljs-constructor">All()</span>;<br>        PageInfo pageInfo=<span class="hljs-keyword">new</span> <span class="hljs-constructor">PageInfo(<span class="hljs-params">users</span>)</span>;<br>        <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(pageInfo);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>//ç¬¬ä¸€ç§ï¼ŒMapperæ¥å£æ–¹å¼çš„è°ƒç”¨ï¼Œæ¨èè¿™ç§ä½¿ç”¨æ–¹å¼ã€‚<br>PageHelper.startPage(1, 3);<br>List&lt;User&gt; users = userMapper.selectAll();</p><p><img src="/2021/02/15/MyBatis-%E9%AB%98%E7%BA%A7/image-20191213015127810.png" alt="image-20191213015127810"></p><h4 id="5ã€æ€»ç»“"><a href="#5ã€æ€»ç»“" class="headerlink" title="5ã€æ€»ç»“"></a>5ã€æ€»ç»“</h4><p>MyBatisä¸­æˆ‘ä»¬å¯ä»¥é…ç½®ç›¸åº”çš„æ’ä»¶ï¼Œè€Œè¿™ä¸ªæ’ä»¶æ˜¯ä½¿ç”¨MyBatisçš„æ‹¦æˆªå™¨å®Œæˆçš„ã€‚</p><p>MyBatisæ’ä»¶å¿…éœ€è¦å®ç°org.apache.ibatis.plugin.Interceptorï¼Œå¹¶ä¸”è¦å»å®ç°æ‹¦æˆªå™¨çš„ç­¾åï¼Œæˆ‘ä»¬éœ€è¦æ¸…æ¥šæ¥å£ä¸­å‡ ä¸ªæ–¹æ³•çš„è¿è¡Œæ—¶æœºã€‚</p><p>å¯¹åº”æ‹¦æˆªå™¨çš„ç­¾åé…ç½®ï¼Œå°±æ˜¯å¯¹äºMyBatiså†…éƒ¨çš„ä¸€äº›æ–¹æ³•çš„æ‹¦æˆªã€‚å¤§å®¶åœ¨ä»¥åå¦‚æœé‡åˆ°ï¼Œéœ€è¦çµæ´»çš„æ€è€ƒåº”è¯¥ç”¨å“ªä¸€ç§ç­¾åè¿›è¡Œæ‹¦æˆªã€‚</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title></title>
    <link href="/2021/02/15/JDBC%E7%B1%BB%E5%9E%8B%E4%B8%8EJava%E7%B1%BB%E5%9E%8B%E5%AF%B9%E7%85%A7/"/>
    <url>/2021/02/15/JDBC%E7%B1%BB%E5%9E%8B%E4%B8%8EJava%E7%B1%BB%E5%9E%8B%E5%AF%B9%E7%85%A7/</url>
    
    <content type="html"><![CDATA[<table><thead><tr><th align="left"><strong>JDBC ç±»å‹</strong></th><th align="left"><strong>Java ç±»å‹</strong></th></tr></thead><tbody><tr><td align="left"><code>CHAR</code></td><td align="left"><code>String</code></td></tr><tr><td align="left"><code>VARCHAR</code></td><td align="left"><code>String</code></td></tr><tr><td align="left"><code>LONGVARCHAR</code></td><td align="left"><code>String</code></td></tr><tr><td align="left"><code>NUMERIC</code></td><td align="left"><code>java.math.BigDecimal</code></td></tr><tr><td align="left"><code>DECIMAL</code></td><td align="left"><code>java.math.BigDecimal</code></td></tr><tr><td align="left"><code>BIT</code></td><td align="left"><code>boolean</code></td></tr><tr><td align="left"><code>TINYINT</code></td><td align="left"><code>byte</code></td></tr><tr><td align="left"><code>SMALLINT</code></td><td align="left"><code>short</code></td></tr><tr><td align="left"><code>INTEGER</code></td><td align="left"><code>int</code></td></tr><tr><td align="left"><code>BIGINT</code></td><td align="left"><code>long</code></td></tr><tr><td align="left"><code>REAL</code></td><td align="left"><code>float</code></td></tr><tr><td align="left"><code>FLOAT</code></td><td align="left"><code>double</code></td></tr><tr><td align="left"><code>DOUBLE</code></td><td align="left"><code>double</code></td></tr><tr><td align="left"><code>BINARY</code></td><td align="left"><code>byte[]</code></td></tr><tr><td align="left"><code>VARBINARY</code></td><td align="left"><code>byte[]</code></td></tr><tr><td align="left"><code>LONGVARBINARY</code></td><td align="left"><code>byte[]</code></td></tr><tr><td align="left"><code>DATE</code></td><td align="left"><code>java.sql.Date</code></td></tr><tr><td align="left"><code>TIME</code></td><td align="left"><code>java.sql.Time</code></td></tr><tr><td align="left"><code>TIMESTAMP</code></td><td align="left"><code>java.sql.Timestamp</code></td></tr></tbody></table>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title></title>
    <link href="/2021/02/15/JavaCollectionsFramework/"/>
    <url>/2021/02/15/JavaCollectionsFramework/</url>
    
    <content type="html"><![CDATA[<h1 id="Collection"><a href="#Collection" class="headerlink" title="Collection"></a>Collection</h1><h2 id="ä¸€ã€é›†åˆæ¡†æ¶å›¾"><a href="#ä¸€ã€é›†åˆæ¡†æ¶å›¾" class="headerlink" title="ä¸€ã€é›†åˆæ¡†æ¶å›¾"></a>ä¸€ã€é›†åˆæ¡†æ¶å›¾</h2><p><img src="/2021/02/15/JavaCollectionsFramework/249993-20161122112853268-1919394058.gif"></p><p><img src="/2021/02/15/JavaCollectionsFramework/249993-20161122113410534-705560500.jpg"></p><blockquote><p>è¯´æ˜ï¼šå¯¹äºä»¥ä¸Šçš„æ¡†æ¶å›¾æœ‰å¦‚ä¸‹å‡ ç‚¹è¯´æ˜</p><ol><li><p>æ‰€æœ‰é›†åˆç±»éƒ½ä½äºjava.utilåŒ…ä¸‹ã€‚Javaçš„é›†åˆç±»ä¸»è¦ç”±ä¸¤ä¸ªæ¥å£æ´¾ç”Ÿè€Œå‡ºï¼šCollectionå’ŒMapï¼ŒCollectionå’ŒMapæ˜¯Javaé›†åˆæ¡†æ¶çš„æ ¹æ¥å£ï¼Œè¿™ä¸¤ä¸ªæ¥å£åˆåŒ…å«äº†ä¸€äº›å­æ¥å£æˆ–å®ç°ç±»ã€‚</p></li><li><p>é›†åˆæ¥å£ï¼š6ä¸ªæ¥å£ï¼ˆçŸ­è™šçº¿è¡¨ç¤ºï¼‰ï¼Œè¡¨ç¤ºä¸åŒé›†åˆç±»å‹ï¼Œæ˜¯é›†åˆæ¡†æ¶çš„åŸºç¡€ã€‚</p></li><li><p>æŠ½è±¡ç±»ï¼š5ä¸ªæŠ½è±¡ç±»ï¼ˆé•¿è™šçº¿è¡¨ç¤ºï¼‰ï¼Œå¯¹é›†åˆæ¥å£çš„éƒ¨åˆ†å®ç°ã€‚å¯æ‰©å±•ä¸ºè‡ªå®šä¹‰é›†åˆç±»ã€‚</p></li><li><p>å®ç°ç±»ï¼š8ä¸ªå®ç°ç±»ï¼ˆå®çº¿è¡¨ç¤ºï¼‰ï¼Œå¯¹æ¥å£çš„å…·ä½“å®ç°ã€‚</p></li><li><p>Collection æ¥å£æ˜¯ä¸€ç»„å…è®¸é‡å¤çš„å¯¹è±¡ã€‚</p></li><li><p>Set æ¥å£ç»§æ‰¿ Collectionï¼Œé›†åˆå…ƒç´ ä¸é‡å¤ã€‚</p></li><li><p>List æ¥å£ç»§æ‰¿ Collectionï¼Œå…è®¸é‡å¤ï¼Œç»´æŠ¤å…ƒç´ æ’å…¥é¡ºåºã€‚</p></li><li><p>Mapæ¥å£æ˜¯é”®ï¼å€¼å¯¹è±¡ï¼Œä¸Collectionæ¥å£æ²¡æœ‰ä»€ä¹ˆå…³ç³»ã€‚</p></li><li><p>Setã€Listå’ŒMapå¯ä»¥çœ‹åšé›†åˆçš„ä¸‰å¤§ç±»ï¼š</p><p>Listé›†åˆæ˜¯æœ‰åºé›†åˆï¼Œé›†åˆä¸­çš„å…ƒç´ å¯ä»¥é‡å¤ï¼Œè®¿é—®é›†åˆä¸­çš„å…ƒç´ å¯ä»¥æ ¹æ®å…ƒç´ çš„ç´¢å¼•æ¥è®¿é—®ã€‚<br>Seté›†åˆæ˜¯æ— åºé›†åˆï¼Œé›†åˆä¸­çš„å…ƒç´ ä¸å¯ä»¥é‡å¤ï¼Œè®¿é—®é›†åˆä¸­çš„å…ƒç´ åªèƒ½æ ¹æ®å…ƒç´ æœ¬èº«æ¥è®¿é—®ï¼ˆä¹Ÿæ˜¯é›†åˆé‡Œå…ƒç´ ä¸å…è®¸é‡å¤çš„åŸå› ï¼‰ã€‚<br>Mapé›†åˆä¸­ä¿å­˜Key-valueå¯¹å½¢å¼çš„å…ƒç´ ï¼Œè®¿é—®æ—¶åªèƒ½æ ¹æ®æ¯é¡¹å…ƒç´ çš„keyæ¥è®¿é—®å…¶valueã€‚</p></li></ol></blockquote><h2 id="äºŒã€æ€»ä½“åˆ†æ"><a href="#äºŒã€æ€»ä½“åˆ†æ" class="headerlink" title="äºŒã€æ€»ä½“åˆ†æ"></a>äºŒã€æ€»ä½“åˆ†æ</h2><p><img src="/2021/02/15/JavaCollectionsFramework/249993-20170119151138921-1550766941.jpg"></p><p>ä»ä¸Šé¢çš„æ¡†æ¶å›¾ä¸­å¾ˆå®¹æ˜“çœ‹å‡ºæœ‰ä¸¤ä¸ªä¸»å¹²ï¼š<code>Collection</code>å’Œ<code>Map</code>ã€‚</p><ol><li>Collectionæ˜¯ä¸€ä¸ªæ¥å£ï¼Œé«˜åº¦æŠ½è±¡çš„é›†åˆï¼ŒåŒ…å«äº†é›†åˆçš„åŸºæœ¬æ“ä½œå’Œå±æ€§ã€‚CollectionåˆåŒ…å«äº†Listå’ŒSetä¸¤å¤§åˆ†æ”¯ã€‚<ul><li>Listæ˜¯ä¸€ä¸ªæœ‰åºçš„é˜Ÿåˆ—ï¼Œæ¯ä¸€ä¸ªå…ƒç´ éƒ½æœ‰å®ƒçš„ç´¢å¼•ã€‚ç¬¬ä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•å€¼æ˜¯0ã€‚Listçš„å®ç°ç±»æœ‰LinkedList, ArrayList, Vector, Stackã€‚</li><li>Setæ˜¯ä¸€ä¸ªä¸å…è®¸æœ‰é‡å¤å…ƒç´ çš„é›†åˆã€‚Setçš„å®ç°ç±»æœ‰HashSetå’ŒTreeSetã€‚HashSetä¾èµ–äºHashMapï¼Œå®ƒå®é™…ä¸Šæ˜¯é€šè¿‡HashMapå®ç°çš„ï¼›TreeSetä¾èµ–äºTreeMapï¼Œå®ƒå®é™…ä¸Šæ˜¯é€šè¿‡TreeMapå®ç°çš„ã€‚</li></ul></li><li>Mapæ˜¯ä¸€ä¸ªæ˜ å°„æ¥å£ï¼Œå³key-valueé”®å€¼å¯¹ã€‚Mapä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ åŒ…å«â€œä¸€ä¸ªkeyâ€å’Œâ€œkeyå¯¹åº”çš„valueâ€ã€‚AbstractMapæ˜¯ä¸ªæŠ½è±¡ç±»ï¼Œå®ƒå®ç°äº†Mapæ¥å£ä¸­çš„å¤§éƒ¨åˆ†APIã€‚è€ŒHashMapï¼ŒTreeMapï¼ŒWeakHashMapéƒ½æ˜¯ç»§æ‰¿äºAbstractMapã€‚Hashtableè™½ç„¶ç»§æ‰¿äºDictionaryï¼Œä½†å®ƒå®ç°äº†Mapæ¥å£ã€‚</li><li>æ¥ä¸‹æ¥ï¼Œå†çœ‹Iteratorã€‚å®ƒæ˜¯éå†é›†åˆçš„å·¥å…·ï¼Œå³æˆ‘ä»¬é€šå¸¸é€šè¿‡Iteratorè¿­ä»£å™¨æ¥éå†é›†åˆã€‚æˆ‘ä»¬è¯´Collectionä¾èµ–äºIteratorï¼Œæ˜¯å› ä¸ºCollectionçš„å®ç°ç±»éƒ½è¦å®ç°iterator()å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªIteratorå¯¹è±¡ã€‚ListIteratoræ˜¯ä¸“é—¨ä¸ºéå†Listè€Œå­˜åœ¨çš„ã€‚</li><li>å†çœ‹Enumerationï¼Œå®ƒæ˜¯JDK 1.0å¼•å…¥çš„æŠ½è±¡ç±»ã€‚ä½œç”¨å’ŒIteratorä¸€æ ·ï¼Œä¹Ÿæ˜¯éå†é›†åˆï¼›ä½†æ˜¯Enumerationçš„åŠŸèƒ½è¦æ¯”Iteratorå°‘ã€‚åœ¨ä¸Šé¢çš„æ¡†å›¾ä¸­ï¼ŒEnumerationåªèƒ½åœ¨Hashtable, Vector, Stackä¸­ä½¿ç”¨ã€‚</li><li>æœ€åï¼Œçœ‹Arrayså’ŒCollectionsã€‚å®ƒä»¬æ˜¯æ“ä½œæ•°ç»„ã€é›†åˆçš„ä¸¤ä¸ªå·¥å…·ç±»ã€‚</li></ol><h2 id="ä¸‰ã€Collectionæ¥å£"><a href="#ä¸‰ã€Collectionæ¥å£" class="headerlink" title="ä¸‰ã€Collectionæ¥å£"></a>ä¸‰ã€Collectionæ¥å£</h2><p>Collectionæ¥å£æ˜¯å¤„ç†å¯¹è±¡é›†åˆçš„æ ¹æ¥å£ï¼Œå…¶ä¸­å®šä¹‰äº†å¾ˆå¤šå¯¹å…ƒç´ è¿›è¡Œæ“ä½œçš„æ–¹æ³•ã€‚Collectionæ¥å£æœ‰ä¸¤ä¸ªä¸»è¦çš„å­æ¥å£Listå’ŒSetï¼Œæ³¨æ„Mapä¸æ˜¯Collectionçš„å­æ¥å£ï¼Œè¿™ä¸ªè¦ç‰¢è®°ã€‚</p><p><img src="/2021/02/15/JavaCollectionsFramework/image-20200419221637399.png" alt="image-20200419221637399"></p><p>å…¶ä¸­ï¼Œæœ‰å‡ ä¸ªæ¯”è¾ƒå¸¸ç”¨çš„æ–¹æ³•ï¼Œæ¯”å¦‚æ–¹æ³•add()æ·»åŠ ä¸€ä¸ªå…ƒç´ åˆ°é›†åˆä¸­ï¼ŒaddAll()å°†æŒ‡å®šé›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ æ·»åŠ åˆ°é›†åˆä¸­ï¼Œcontains()æ–¹æ³•æ£€æµ‹é›†åˆä¸­æ˜¯å¦åŒ…å«æŒ‡å®šçš„å…ƒç´ ï¼ŒtoArray()æ–¹æ³•è¿”å›ä¸€ä¸ªè¡¨ç¤ºé›†åˆçš„æ•°ç»„ã€‚</p><p>å¦å¤–ï¼ŒCollectionä¸­æœ‰ä¸€ä¸ªiterator()å‡½æ•°ï¼Œå®ƒçš„ä½œç”¨æ˜¯è¿”å›ä¸€ä¸ªIteratoræ¥å£ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬é€šè¿‡Iteratorè¿­ä»£å™¨æ¥éå†é›†åˆã€‚ListIteratoræ˜¯Listæ¥å£æ‰€ç‰¹æœ‰çš„ï¼Œåœ¨Listæ¥å£ä¸­ï¼Œé€šè¿‡ListIterator()è¿”å›ä¸€ä¸ªListIteratorå¯¹è±¡ã€‚</p><h3 id="1ã€Collectionå­æ¥å£List"><a href="#1ã€Collectionå­æ¥å£List" class="headerlink" title="1ã€Collectionå­æ¥å£List"></a>1ã€Collectionå­æ¥å£List</h3><p><img src="/2021/02/15/JavaCollectionsFramework/image-20200419222504675.png" alt="image-20200419231037188"></p><p>Listé›†åˆä»£è¡¨ä¸€ä¸ªæœ‰åºé›†åˆï¼Œé›†åˆä¸­æ¯ä¸ªå…ƒç´ éƒ½æœ‰å…¶å¯¹åº”çš„é¡ºåºç´¢å¼•ã€‚Listé›†åˆå…è®¸ä½¿ç”¨é‡å¤å…ƒç´ ï¼Œå¯ä»¥é€šè¿‡ç´¢å¼•æ¥è®¿é—®æŒ‡å®šä½ç½®çš„é›†åˆå…ƒç´ ã€‚</p><p>Listæ¥å£ç»§æ‰¿äºCollectionæ¥å£ï¼Œå®ƒå¯ä»¥å®šä¹‰ä¸€ä¸ªå…è®¸é‡å¤çš„æœ‰åºé›†åˆã€‚å› ä¸ºListä¸­çš„å…ƒç´ æ˜¯æœ‰åºçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨ç´¢å¼•ï¼ˆå…ƒç´ åœ¨Listä¸­çš„ä½ç½®ï¼Œç±»ä¼¼äºæ•°ç»„ä¸‹æ ‡ï¼‰æ¥è®¿é—®Listä¸­çš„å…ƒç´ ï¼Œè¿™ç±»ä¼¼äºJavaçš„æ•°ç»„ã€‚</p><p>Listæ¥å£ä¸ºCollectionç›´æ¥æ¥å£ã€‚Listæ‰€ä»£è¡¨çš„æ˜¯æœ‰åºçš„Collectionï¼Œå³å®ƒç”¨æŸç§ç‰¹å®šçš„æ’å…¥é¡ºåºæ¥ç»´æŠ¤å…ƒç´ é¡ºåºã€‚ç”¨æˆ·å¯ä»¥å¯¹åˆ—è¡¨ä¸­æ¯ä¸ªå…ƒç´ çš„æ’å…¥ä½ç½®è¿›è¡Œç²¾ç¡®åœ°æ§åˆ¶ï¼ŒåŒæ—¶å¯ä»¥æ ¹æ®å…ƒç´ çš„æ•´æ•°ç´¢å¼•ï¼ˆåœ¨åˆ—è¡¨ä¸­çš„ä½ç½®ï¼‰è®¿é—®å…ƒç´ ï¼Œå¹¶æœç´¢åˆ—è¡¨ä¸­çš„å…ƒç´ ã€‚å®ç°Listæ¥å£çš„é›†åˆä¸»è¦æœ‰ï¼šArrayListã€LinkedListã€Vectorã€Stackã€‚</p><h4 id="1-1ã€ArrayList"><a href="#1-1ã€ArrayList" class="headerlink" title="1.1ã€ArrayList"></a>1.1ã€ArrayList</h4><p>ArrayListæ˜¯ä¸€ä¸ªåŠ¨æ€æ•°ç»„ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬æœ€å¸¸ç”¨çš„é›†åˆã€‚å®ƒå…è®¸ä»»ä½•ç¬¦åˆè§„åˆ™çš„å…ƒç´ æ’å…¥ç”šè‡³åŒ…æ‹¬nullã€‚æ¯ä¸€ä¸ªArrayListéƒ½æœ‰ä¸€ä¸ªåˆå§‹å®¹é‡ï¼ˆ10ï¼‰ï¼Œè¯¥å®¹é‡ä»£è¡¨äº†æ•°ç»„çš„å¤§å°ã€‚éšç€å®¹å™¨ä¸­çš„å…ƒç´ ä¸æ–­å¢åŠ ï¼Œå®¹å™¨çš„å¤§å°ä¹Ÿä¼šéšç€å¢åŠ ã€‚åœ¨æ¯æ¬¡å‘å®¹å™¨ä¸­å¢åŠ å…ƒç´ çš„åŒæ—¶éƒ½ä¼šè¿›è¡Œå®¹é‡æ£€æŸ¥ï¼Œå½“å¿«æº¢å‡ºæ—¶ï¼Œå°±ä¼šè¿›è¡Œæ‰©å®¹æ“ä½œã€‚æ‰€ä»¥å¦‚æœæˆ‘ä»¬æ˜ç¡®æ‰€æ’å…¥å…ƒç´ çš„å¤šå°‘ï¼Œæœ€å¥½æŒ‡å®šä¸€ä¸ªåˆå§‹å®¹é‡å€¼ï¼Œé¿å…è¿‡å¤šçš„è¿›è¡Œæ‰©å®¹æ“ä½œè€Œæµªè´¹æ—¶é—´ã€æ•ˆç‡ã€‚</p><p>sizeã€isEmptyã€getã€setã€iterator å’Œ listIterator æ“ä½œéƒ½ä»¥å›ºå®šæ—¶é—´è¿è¡Œã€‚add æ“ä½œä»¥åˆ†æ‘Šçš„å›ºå®šæ—¶é—´è¿è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ·»åŠ  n ä¸ªå…ƒç´ éœ€è¦ O(n) æ—¶é—´ï¼ˆç”±äºè¦è€ƒè™‘åˆ°æ‰©å®¹ï¼Œæ‰€ä»¥è¿™ä¸åªæ˜¯æ·»åŠ å…ƒç´ ä¼šå¸¦æ¥åˆ†æ‘Šå›ºå®šæ—¶é—´å¼€é”€é‚£æ ·ç®€å•ï¼‰ã€‚</p><p>ArrayListæ“…é•¿äºéšæœºè®¿é—®ã€‚åŒæ—¶ArrayListæ˜¯éåŒæ­¥çš„ã€‚</p><h4 id="1-2ã€LinkedList"><a href="#1-2ã€LinkedList" class="headerlink" title="1.2ã€LinkedList"></a>1.2ã€LinkedList</h4><p>åŒæ ·å®ç°Listæ¥å£çš„LinkedListä¸ArrayListä¸åŒï¼ŒArrayListæ˜¯ä¸€ä¸ªåŠ¨æ€æ•°ç»„ï¼Œè€ŒLinkedListæ˜¯ä¸€ä¸ªåŒå‘é“¾è¡¨ã€‚æ‰€ä»¥å®ƒé™¤äº†æœ‰ArrayListçš„åŸºæœ¬æ“ä½œæ–¹æ³•å¤–è¿˜é¢å¤–æä¾›äº†getï¼Œremoveï¼Œinsertæ–¹æ³•åœ¨LinkedListçš„é¦–éƒ¨æˆ–å°¾éƒ¨ã€‚</p><p>ç”±äºå®ç°çš„æ–¹å¼ä¸åŒï¼ŒLinkedListä¸èƒ½éšæœºè®¿é—®ï¼Œå®ƒæ‰€æœ‰çš„æ“ä½œéƒ½æ˜¯è¦æŒ‰ç…§åŒé‡é“¾è¡¨çš„éœ€è¦æ‰§è¡Œã€‚åœ¨åˆ—è¡¨ä¸­ç´¢å¼•çš„æ“ä½œå°†ä»å¼€å¤´æˆ–ç»“å°¾éå†åˆ—è¡¨ï¼ˆä»é è¿‘æŒ‡å®šç´¢å¼•çš„ä¸€ç«¯ï¼‰ã€‚è¿™æ ·åšçš„å¥½å¤„å°±æ˜¯å¯ä»¥é€šè¿‡è¾ƒä½çš„ä»£ä»·åœ¨Listä¸­è¿›è¡Œæ’å…¥å’Œåˆ é™¤æ“ä½œã€‚</p><p>ä¸ArrayListä¸€æ ·ï¼ŒLinkedListä¹Ÿæ˜¯éåŒæ­¥çš„ã€‚å¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ä¸€ä¸ªListï¼Œåˆ™å¿…é¡»è‡ªå·±å®ç°è®¿é—®åŒæ­¥ã€‚ä¸€ç§è§£å†³æ–¹æ³•æ˜¯åœ¨åˆ›å»ºListæ—¶æ„é€ ä¸€ä¸ªåŒæ­¥çš„Listï¼š List list = Collections.synchronizedList(new LinkedList(â€¦));</p><h4 id="1-3ã€Vector"><a href="#1-3ã€Vector" class="headerlink" title="1.3ã€Vector"></a>1.3ã€Vector</h4><p>ä¸ArrayListç›¸ä¼¼ï¼Œä½†æ˜¯Vectoræ˜¯åŒæ­¥çš„ã€‚æ‰€ä»¥è¯´Vectoræ˜¯çº¿ç¨‹å®‰å…¨çš„åŠ¨æ€æ•°ç»„ã€‚å®ƒçš„æ“ä½œä¸ArrayListå‡ ä¹ä¸€æ ·ã€‚</p><h4 id="1-4ã€Stack"><a href="#1-4ã€Stack" class="headerlink" title="1.4ã€Stack"></a>1.4ã€Stack</h4><p>Stackç»§æ‰¿è‡ªVectorï¼Œå®ç°ä¸€ä¸ªåè¿›å…ˆå‡ºçš„å †æ ˆã€‚Stackæä¾›5ä¸ªé¢å¤–çš„æ–¹æ³•ä½¿å¾—Vectorå¾—ä»¥è¢«å½“ä½œå †æ ˆä½¿ç”¨ã€‚åŸºæœ¬çš„pushå’Œpop æ–¹æ³•ï¼Œè¿˜æœ‰peekæ–¹æ³•å¾—åˆ°æ ˆé¡¶çš„å…ƒç´ ï¼Œemptyæ–¹æ³•æµ‹è¯•å †æ ˆæ˜¯å¦ä¸ºç©ºï¼Œsearchæ–¹æ³•æ£€æµ‹ä¸€ä¸ªå…ƒç´ åœ¨å †æ ˆä¸­çš„ä½ç½®ã€‚Stackåˆšåˆ›å»ºåæ˜¯ç©ºæ ˆã€‚</p><h3 id="2ã€Collectionå­æ¥å£Set"><a href="#2ã€Collectionå­æ¥å£Set" class="headerlink" title="2ã€Collectionå­æ¥å£Set"></a>2ã€Collectionå­æ¥å£Set</h3><p>Setæ˜¯ä¸€ç§ä¸åŒ…æ‹¬é‡å¤å…ƒç´ çš„Collectionã€‚å®ƒç»´æŒå®ƒè‡ªå·±çš„å†…éƒ¨æ’åºï¼Œæ‰€ä»¥éšæœºè®¿é—®æ²¡æœ‰ä»»ä½•æ„ä¹‰ã€‚ä¸Listä¸€æ ·ï¼Œå®ƒåŒæ ·å…è®¸nullçš„å­˜åœ¨ä½†æ˜¯ä»…æœ‰ä¸€ä¸ªã€‚ç”±äºSetæ¥å£çš„ç‰¹æ®Šæ€§ï¼Œæ‰€æœ‰ä¼ å…¥Seté›†åˆä¸­çš„å…ƒç´ éƒ½å¿…é¡»ä¸åŒï¼ŒåŒæ—¶è¦æ³¨æ„ä»»ä½•å¯å˜å¯¹è±¡ï¼Œå¦‚æœåœ¨å¯¹é›†åˆä¸­å…ƒç´ è¿›è¡Œæ“ä½œæ—¶ï¼Œå¯¼è‡´e1.equals(e2)==trueï¼Œåˆ™å¿…å®šä¼šäº§ç”ŸæŸäº›é—®é¢˜ã€‚Setæ¥å£æœ‰ä¸‰ä¸ªå…·ä½“å®ç°ç±»ï¼Œåˆ†åˆ«æ˜¯æ•£åˆ—é›†HashSetã€é“¾å¼æ•£åˆ—é›†LinkedHashSetå’Œæ ‘å½¢é›†TreeSetã€‚</p><p>Setæ˜¯ä¸€ç§ä¸åŒ…å«é‡å¤çš„å…ƒç´ çš„Collectionï¼Œæ— åºï¼Œå³ä»»æ„çš„ä¸¤ä¸ªå…ƒç´ e1å’Œe2éƒ½æœ‰e1.equals(e2)=falseï¼ŒSetæœ€å¤šæœ‰ä¸€ä¸ªnullå…ƒç´ ã€‚éœ€è¦æ³¨æ„çš„æ˜¯:è™½ç„¶Setä¸­å…ƒç´ æ²¡æœ‰é¡ºåºï¼Œä½†æ˜¯å…ƒç´ åœ¨setä¸­çš„ä½ç½®æ˜¯ç”±è¯¥å…ƒç´ çš„HashCodeå†³å®šçš„ï¼Œå…¶å…·ä½“ä½ç½®å…¶å®æ˜¯å›ºå®šçš„ã€‚</p><p>æ­¤å¤–éœ€è¦è¯´æ˜ä¸€ç‚¹ï¼Œåœ¨setæ¥å£ä¸­çš„ä¸é‡å¤æ˜¯æœ‰ç‰¹æ®Šè¦æ±‚çš„ã€‚<br>ä¸¾ä¸€ä¸ªä¾‹å­:å¯¹è±¡Aå’Œå¯¹è±¡Bï¼Œæœ¬æ¥æ˜¯ä¸åŒçš„ä¸¤ä¸ªå¯¹è±¡ï¼Œæ­£å¸¸æƒ…å†µä¸‹å®ƒä»¬æ˜¯èƒ½å¤Ÿæ”¾å…¥åˆ°Seté‡Œé¢çš„ï¼Œä½†æ˜¯å¦‚æœå¯¹è±¡Aå’ŒBçš„éƒ½é‡å†™äº†hashcodeå’Œequalsæ–¹æ³•ï¼Œå¹¶ä¸”é‡å†™åçš„hashcodeå’Œequalsæ–¹æ³•æ˜¯ç›¸åŒçš„è¯ã€‚é‚£ä¹ˆAå’ŒBæ˜¯ä¸èƒ½åŒæ—¶æ”¾å…¥åˆ°Seté›†åˆä¸­å»çš„ï¼Œä¹Ÿå°±æ˜¯Seté›†åˆä¸­çš„å»é‡å’Œhashcodeä¸equalsæ–¹æ³•ç›´æ¥ç›¸å…³ã€‚ </p><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs processing"><span class="hljs-keyword">public</span> class Test&#123; <br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> main(<span class="hljs-keyword">String</span>[] args) &#123; <br>     Set&lt;<span class="hljs-keyword">String</span>&gt; <span class="hljs-built_in">set</span>=<span class="hljs-keyword">new</span> HashSet&lt;<span class="hljs-keyword">String</span>&gt;(); <br>     <span class="hljs-built_in">set</span>.<span class="hljs-built_in">add</span>(<span class="hljs-string">&quot;Hello&quot;</span>); <br>     <span class="hljs-built_in">set</span>.<span class="hljs-built_in">add</span>(<span class="hljs-string">&quot;world&quot;</span>); <br>     <span class="hljs-built_in">set</span>.<span class="hljs-built_in">add</span>(<span class="hljs-string">&quot;Hello&quot;</span>); <br>     System.out.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;é›†åˆçš„å°ºå¯¸ä¸º:&quot;</span>+<span class="hljs-built_in">set</span>.<span class="hljs-built_in">size</span>()); <span class="hljs-comment">//é›†åˆçš„å°ºå¯¸ä¸º:2</span><br>     System.out.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;é›†åˆä¸­çš„å…ƒç´ ä¸º:&quot;</span>+<span class="hljs-built_in">set</span>.toString()); <span class="hljs-comment">//é›†åˆä¸­çš„å…ƒç´ ä¸º:[world, Hello]</span><br>     <br>     Set&lt;<span class="hljs-keyword">String</span>&gt; books = <span class="hljs-keyword">new</span> HashSet&lt;<span class="hljs-keyword">String</span>&gt;();<br>     <span class="hljs-comment">//æ·»åŠ ä¸€ä¸ªå­—ç¬¦ä¸²å¯¹è±¡</span><br>     books.<span class="hljs-built_in">add</span>(<span class="hljs-keyword">new</span> <span class="hljs-keyword">String</span>(<span class="hljs-string">&quot;Struts2æƒå¨æŒ‡å—&quot;</span>));<br>     <span class="hljs-comment">//å†æ¬¡æ·»åŠ ä¸€ä¸ªå­—ç¬¦ä¸²å¯¹è±¡ï¼Œ</span><br>     <span class="hljs-comment">//å› ä¸ºä¸¤ä¸ªå­—ç¬¦ä¸²å¯¹è±¡é€šè¿‡equalsæ–¹æ³•æ¯”è¾ƒç›¸ç­‰ï¼Œæ‰€ä»¥æ·»åŠ å¤±è´¥ï¼Œè¿”å›false</span><br>     <span class="hljs-built_in">boolean</span> result = books.<span class="hljs-built_in">add</span>(<span class="hljs-keyword">new</span> <span class="hljs-keyword">String</span>(<span class="hljs-string">&quot;Struts2æƒå¨æŒ‡å—&quot;</span>));<br>     System.out.<span class="hljs-built_in">println</span>(result);  <br>     <span class="hljs-comment">//ä¸‹é¢è¾“å‡ºçœ‹åˆ°é›†åˆåªæœ‰ä¸€ä¸ªå…ƒç´ </span><br>     System.out.<span class="hljs-built_in">println</span>(books);  <span class="hljs-comment">//[Struts2æƒå¨æŒ‡å—]</span><br>  &#125; <br>&#125; <br></code></pre></td></tr></table></figure><blockquote><p>åˆ†æï¼š</p><p>ç”±äºStringç±»ä¸­é‡å†™äº†hashcodeå’Œequalsæ–¹æ³•ï¼Œç”¨æ¥æ¯”è¾ƒæŒ‡å‘çš„å­—ç¬¦ä¸²å¯¹è±¡æ‰€å­˜å‚¨çš„å­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰ã€‚æ‰€ä»¥è¿™é‡Œçš„ç¬¬äºŒä¸ªHelloæ˜¯åŠ ä¸è¿›å»çš„ã€‚</p><p>ç¨‹åºä¸­ï¼Œbooké›†åˆä¸¤æ¬¡æ·»åŠ çš„å­—ç¬¦ä¸²å¯¹è±¡æ˜æ˜¾ä¸æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ˆç¨‹åºé€šè¿‡newå…³é”®å­—æ¥åˆ›å»ºå­—ç¬¦ä¸²å¯¹è±¡ï¼‰ï¼Œå½“ä½¿ç”¨==è¿ç®—ç¬¦åˆ¤æ–­è¿”å›falseï¼Œä½¿ç”¨equalsæ–¹æ³•æ¯”è¾ƒè¿”å›trueï¼Œæ‰€ä»¥ä¸èƒ½æ·»åŠ åˆ°Seté›†åˆä¸­ï¼Œæœ€ååªèƒ½è¾“å‡ºä¸€ä¸ªå…ƒç´ ã€‚</p></blockquote><h4 id="2-1ã€HashSet"><a href="#2-1ã€HashSet" class="headerlink" title="2.1ã€HashSet"></a>2.1ã€HashSet</h4><p>HashSet æ˜¯ä¸€ä¸ª<strong>æ²¡æœ‰é‡å¤</strong>å…ƒç´ çš„é›†åˆã€‚å®ƒæ˜¯ç”±<strong>HashMapå®ç°çš„</strong>ï¼Œ<strong>ä¸ä¿è¯å…ƒç´ çš„é¡ºåº(è¿™é‡Œæ‰€è¯´çš„æ²¡æœ‰é¡ºåºæ˜¯æŒ‡ï¼šå…ƒç´ æ’å…¥çš„é¡ºåºä¸è¾“å‡ºçš„é¡ºåºä¸ä¸€è‡´)ï¼Œè€Œä¸”HashSetå…è®¸ä½¿ç”¨null å…ƒç´ </strong>ã€‚HashSetæ˜¯<strong>éåŒæ­¥çš„ï¼Œ</strong>å¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ä¸€ä¸ªå“ˆå¸Œsetï¼Œè€Œå…¶ä¸­è‡³å°‘ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†è¯¥setï¼Œé‚£ä¹ˆå®ƒå¿…é¡»ä¿æŒå¤–éƒ¨åŒæ­¥ã€‚ HashSetæŒ‰Hashç®—æ³•æ¥å­˜å‚¨é›†åˆçš„å…ƒç´ ï¼Œå› æ­¤å…·æœ‰å¾ˆå¥½çš„å­˜å–å’ŒæŸ¥æ‰¾æ€§èƒ½ã€‚</p><p>HashSetçš„å®ç°æ–¹å¼å¤§è‡´å¦‚ä¸‹ï¼Œé€šè¿‡ä¸€ä¸ªHashMapå­˜å‚¨å…ƒç´ ï¼Œå…ƒç´ æ˜¯å­˜æ”¾åœ¨HashMapçš„Keyä¸­ï¼Œè€ŒValueç»Ÿä¸€ä½¿ç”¨ä¸€ä¸ªObjectå¯¹è±¡ã€‚</p><p>HashSetä½¿ç”¨å’Œç†è§£ä¸­å®¹æ˜“å‡ºç°çš„è¯¯åŒº:</p><ol><li>HashSetä¸­å­˜æ”¾nullå€¼<br> HashSetä¸­æ˜¯å…è®¸å­˜å…¥nullå€¼çš„ï¼Œä½†æ˜¯åœ¨HashSetä¸­ä»…ä»…èƒ½å¤Ÿå­˜å…¥ä¸€ä¸ªnullå€¼ã€‚</li><li>HashSetä¸­å­˜å‚¨å…ƒç´ çš„ä½ç½®æ˜¯å›ºå®šçš„<br> HashSetä¸­å­˜å‚¨çš„å…ƒç´ çš„æ˜¯æ— åºçš„ï¼Œè¿™ä¸ªæ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œä½†æ˜¯ç”±äºHashSetåº•å±‚æ˜¯åŸºäºHashç®—æ³•å®ç°çš„ï¼Œä½¿ç”¨äº†hashcodeï¼Œæ‰€ä»¥HashSetä¸­ç›¸åº”çš„å…ƒç´ çš„ä½ç½®æ˜¯å›ºå®šçš„ã€‚</li><li>å¿…é¡»å°å¿ƒæ“ä½œå¯å˜å¯¹è±¡ï¼ˆMutable Objectï¼‰ã€‚å¦‚æœä¸€ä¸ªSetä¸­çš„å¯å˜å…ƒç´ æ”¹å˜äº†è‡ªèº«çŠ¶æ€å¯¼è‡´Object.equals(Object)=trueå°†å¯¼è‡´ä¸€äº›é—®é¢˜ã€‚</li></ol><h4 id="2-2ã€LinkedHashSet"><a href="#2-2ã€LinkedHashSet" class="headerlink" title="2.2ã€LinkedHashSet"></a>2.2ã€LinkedHashSet</h4><p>LinkedHashSetç»§æ‰¿è‡ªHashSetï¼Œå…¶åº•å±‚æ˜¯åŸºäºLinkedHashMapæ¥å®ç°çš„ï¼Œæœ‰åºï¼ŒéåŒæ­¥ã€‚LinkedHashSeté›†åˆåŒæ ·æ˜¯æ ¹æ®å…ƒç´ çš„hashCodeå€¼æ¥å†³å®šå…ƒç´ çš„å­˜å‚¨ä½ç½®ï¼Œä½†æ˜¯å®ƒåŒæ—¶ä½¿ç”¨é“¾è¡¨ç»´æŠ¤å…ƒç´ çš„æ¬¡åºã€‚è¿™æ ·ä½¿å¾—å…ƒç´ çœ‹èµ·æ¥åƒæ˜¯ä»¥æ’å…¥é¡ºåºä¿å­˜çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå½“éå†è¯¥é›†åˆæ—¶å€™ï¼ŒLinkedHashSetå°†ä¼šä»¥å…ƒç´ çš„æ·»åŠ é¡ºåºè®¿é—®é›†åˆçš„å…ƒç´ ã€‚</p><h4 id="2-3ã€TreeSet"><a href="#2-3ã€TreeSet" class="headerlink" title="2.3ã€TreeSet"></a>2.3ã€TreeSet</h4><p>TreeSetæ˜¯ä¸€ä¸ªæœ‰åºé›†åˆï¼Œå…¶åº•å±‚æ˜¯åŸºäºTreeMapå®ç°çš„ï¼Œéçº¿ç¨‹å®‰å…¨ã€‚TreeSetå¯ä»¥ç¡®ä¿é›†åˆå…ƒç´ å¤„äºæ’åºçŠ¶æ€ã€‚TreeSetæ”¯æŒä¸¤ç§æ’åºæ–¹å¼ï¼Œè‡ªç„¶æ’åºå’Œå®šåˆ¶æ’åºï¼Œå…¶ä¸­è‡ªç„¶æ’åºä¸ºé»˜è®¤çš„æ’åºæ–¹å¼ã€‚å½“æˆ‘ä»¬æ„é€ TreeSetæ—¶ï¼Œè‹¥ä½¿ç”¨ä¸å¸¦å‚æ•°çš„æ„é€ å‡½æ•°ï¼Œåˆ™TreeSetçš„ä½¿ç”¨è‡ªç„¶æ¯”è¾ƒå™¨ï¼›è‹¥ç”¨æˆ·éœ€è¦ä½¿ç”¨è‡ªå®šä¹‰çš„æ¯”è¾ƒå™¨ï¼Œåˆ™éœ€è¦ä½¿ç”¨å¸¦æ¯”è¾ƒå™¨çš„å‚æ•°ã€‚</p><p>æ³¨æ„ï¼šTreeSeté›†åˆä¸æ˜¯é€šè¿‡hashcodeå’Œequalså‡½æ•°æ¥æ¯”è¾ƒå…ƒç´ çš„.å®ƒæ˜¯é€šè¿‡compareæˆ–è€…comparaeToå‡½æ•°æ¥åˆ¤æ–­å…ƒç´ æ˜¯å¦ç›¸ç­‰.compareå‡½æ•°é€šè¿‡åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡çš„idï¼Œç›¸åŒçš„idåˆ¤æ–­ä¸ºé‡å¤å…ƒç´ ï¼Œä¸ä¼šè¢«åŠ å…¥åˆ°é›†åˆä¸­ã€‚</p><h2 id="Mapæ¥å£"><a href="#Mapæ¥å£" class="headerlink" title="Mapæ¥å£"></a>Mapæ¥å£</h2><p>Mapä¸Listã€Setæ¥å£ä¸åŒï¼Œå®ƒæ˜¯ç”±ä¸€ç³»åˆ—é”®å€¼å¯¹ç»„æˆçš„é›†åˆï¼Œæä¾›äº†keyåˆ°Valueçš„æ˜ å°„ã€‚åŒæ—¶å®ƒä¹Ÿæ²¡æœ‰ç»§æ‰¿Collectionã€‚åœ¨Mapä¸­å®ƒä¿è¯äº†keyä¸valueä¹‹é—´çš„ä¸€ä¸€å¯¹åº”å…³ç³»ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªkeyå¯¹åº”ä¸€ä¸ªvalueï¼Œæ‰€ä»¥å®ƒä¸èƒ½å­˜åœ¨ç›¸åŒçš„keyå€¼ï¼Œå½“ç„¶valueå€¼å¯ä»¥ç›¸åŒã€‚</p><h3 id="1-HashMap"><a href="#1-HashMap" class="headerlink" title="1.HashMap"></a>1.HashMap</h3><p>ä»¥å“ˆå¸Œè¡¨æ•°æ®ç»“æ„å®ç°ï¼ŒæŸ¥æ‰¾å¯¹è±¡æ—¶é€šè¿‡å“ˆå¸Œå‡½æ•°è®¡ç®—å…¶ä½ç½®ï¼Œå®ƒæ˜¯ä¸ºå¿«é€ŸæŸ¥è¯¢è€Œè®¾è®¡çš„ï¼Œå…¶å†…éƒ¨å®šä¹‰äº†ä¸€ä¸ªhashè¡¨æ•°ç»„ï¼ˆEntry[] tableï¼‰ï¼Œå…ƒç´ ä¼šé€šè¿‡å“ˆå¸Œè½¬æ¢å‡½æ•°å°†å…ƒç´ çš„å“ˆå¸Œåœ°å€è½¬æ¢æˆæ•°ç»„ä¸­å­˜æ”¾çš„ç´¢å¼•ï¼Œå¦‚æœæœ‰å†²çªï¼Œåˆ™ä½¿ç”¨æ•£åˆ—é“¾è¡¨çš„å½¢å¼å°†æ‰€æœ‰ç›¸åŒå“ˆå¸Œåœ°å€çš„å…ƒç´ ä¸²èµ·æ¥ï¼Œå¯èƒ½é€šè¿‡æŸ¥çœ‹HashMap.Entryçš„æºç å®ƒæ˜¯ä¸€ä¸ªå•é“¾è¡¨ç»“æ„ã€‚</p><h3 id="2-LinkedHashMap"><a href="#2-LinkedHashMap" class="headerlink" title="2.LinkedHashMap"></a>2.LinkedHashMap</h3><p>LinkedHashMapæ˜¯HashMapçš„ä¸€ä¸ªå­ç±»ï¼Œå®ƒä¿ç•™æ’å…¥çš„é¡ºåºï¼Œå¦‚æœéœ€è¦è¾“å‡ºçš„é¡ºåºå’Œè¾“å…¥æ—¶çš„ç›¸åŒï¼Œé‚£ä¹ˆå°±é€‰ç”¨LinkedHashMapã€‚</p><p>LinkedHashMapæ˜¯Mapæ¥å£çš„å“ˆå¸Œè¡¨å’Œé“¾æ¥åˆ—è¡¨å®ç°ï¼Œå…·æœ‰å¯é¢„çŸ¥çš„è¿­ä»£é¡ºåºã€‚æ­¤å®ç°æä¾›æ‰€æœ‰å¯é€‰çš„æ˜ å°„æ“ä½œï¼Œå¹¶å…è®¸ä½¿ç”¨nullå€¼å’Œnullé”®ã€‚æ­¤ç±»ä¸ä¿è¯æ˜ å°„çš„é¡ºåºï¼Œç‰¹åˆ«æ˜¯å®ƒä¸ä¿è¯è¯¥é¡ºåºæ’ä¹…ä¸å˜ã€‚</p><p>LinkedHashMapå®ç°ä¸HashMapçš„ä¸åŒä¹‹å¤„åœ¨äºï¼Œåè€…ç»´æŠ¤ç€ä¸€ä¸ªè¿è¡Œäºæ‰€æœ‰æ¡ç›®çš„åŒé‡é“¾æ¥åˆ—è¡¨ã€‚æ­¤é“¾æ¥åˆ—è¡¨å®šä¹‰äº†è¿­ä»£é¡ºåºï¼Œè¯¥è¿­ä»£é¡ºåºå¯ä»¥æ˜¯æ’å…¥é¡ºåºæˆ–è€…æ˜¯è®¿é—®é¡ºåºã€‚</p><p>æ ¹æ®é“¾è¡¨ä¸­å…ƒç´ çš„é¡ºåºå¯ä»¥åˆ†ä¸ºï¼šæŒ‰æ’å…¥é¡ºåºçš„é“¾è¡¨ï¼Œå’ŒæŒ‰è®¿é—®é¡ºåº(è°ƒç”¨getæ–¹æ³•)çš„é“¾è¡¨ã€‚é»˜è®¤æ˜¯æŒ‰æ’å…¥é¡ºåºæ’åºï¼Œå¦‚æœæŒ‡å®šæŒ‰è®¿é—®é¡ºåºæ’åºï¼Œé‚£ä¹ˆè°ƒç”¨getæ–¹æ³•åï¼Œä¼šå°†è¿™æ¬¡è®¿é—®çš„å…ƒç´ ç§»è‡³é“¾è¡¨å°¾éƒ¨ï¼Œä¸æ–­è®¿é—®å¯ä»¥å½¢æˆæŒ‰è®¿é—®é¡ºåºæ’åºçš„é“¾è¡¨ã€‚</p><p>æ³¨æ„ï¼Œæ­¤å®ç°ä¸æ˜¯åŒæ­¥çš„ã€‚å¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®é“¾æ¥çš„å“ˆå¸Œæ˜ å°„ï¼Œè€Œå…¶ä¸­è‡³å°‘ä¸€ä¸ªçº¿ç¨‹ä»ç»“æ„ä¸Šä¿®æ”¹äº†è¯¥æ˜ å°„ï¼Œåˆ™å®ƒå¿…é¡»ä¿æŒå¤–éƒ¨åŒæ­¥ã€‚</p><p>ç”±äºLinkedHashMapéœ€è¦ç»´æŠ¤å…ƒç´ çš„æ’å…¥é¡ºåºï¼Œå› æ­¤æ€§èƒ½ç•¥ä½äºHashMapçš„æ€§èƒ½ï¼Œä½†åœ¨è¿­ä»£è®¿é—®Mapé‡Œçš„å…¨éƒ¨å…ƒç´ æ—¶å°†æœ‰å¾ˆå¥½çš„æ€§èƒ½ï¼Œå› ä¸ºå®ƒä»¥é“¾è¡¨æ¥ç»´æŠ¤å†…éƒ¨é¡ºåºã€‚</p><h3 id="3-TreeMap"><a href="#3-TreeMap" class="headerlink" title="3.TreeMap"></a>3.TreeMap</h3><p>TreeMap æ˜¯ä¸€ä¸ªæœ‰åºçš„key-valueé›†åˆï¼ŒéåŒæ­¥ï¼ŒåŸºäºçº¢é»‘æ ‘ï¼ˆRed-Black treeï¼‰å®ç°ï¼Œæ¯ä¸€ä¸ªkey-valueèŠ‚ç‚¹ä½œä¸ºçº¢é»‘æ ‘çš„ä¸€ä¸ªèŠ‚ç‚¹ã€‚TreeMapå­˜å‚¨æ—¶ä¼šè¿›è¡Œæ’åºçš„ï¼Œä¼šæ ¹æ®keyæ¥å¯¹key-valueé”®å€¼å¯¹è¿›è¡Œæ’åºï¼Œå…¶ä¸­æ’åºæ–¹å¼ä¹Ÿæ˜¯åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§æ˜¯è‡ªç„¶æ’åºï¼Œä¸€ç§æ˜¯å®šåˆ¶æ’åºï¼Œå…·ä½“å–å†³äºä½¿ç”¨çš„æ„é€ æ–¹æ³•ã€‚</p><p>è‡ªç„¶æ’åºï¼šTreeMapä¸­æ‰€æœ‰çš„keyå¿…é¡»å®ç°Comparableæ¥å£ï¼Œå¹¶ä¸”æ‰€æœ‰çš„keyéƒ½åº”è¯¥æ˜¯åŒä¸€ä¸ªç±»çš„å¯¹è±¡ï¼Œå¦åˆ™ä¼šæŠ¥ClassCastExceptionå¼‚å¸¸ã€‚</p><p>å®šåˆ¶æ’åºï¼šå®šä¹‰TreeMapæ—¶ï¼Œåˆ›å»ºä¸€ä¸ªcomparatorå¯¹è±¡ï¼Œè¯¥å¯¹è±¡å¯¹æ‰€æœ‰çš„treeMapä¸­æ‰€æœ‰çš„keyå€¼è¿›è¡Œæ’åºï¼Œé‡‡ç”¨å®šåˆ¶æ’åºçš„æ—¶å€™ä¸éœ€è¦TreeMapä¸­æ‰€æœ‰çš„keyå¿…é¡»å®ç°Comparableæ¥å£ã€‚</p><p>TreeMapåˆ¤æ–­ä¸¤ä¸ªå…ƒç´ ç›¸ç­‰çš„æ ‡å‡†ï¼šä¸¤ä¸ªkeyé€šè¿‡compareTo()æ–¹æ³•è¿”å›0ï¼Œåˆ™è®¤ä¸ºè¿™ä¸¤ä¸ªkeyç›¸ç­‰ã€‚</p><p>å¦‚æœä½¿ç”¨è‡ªå®šä¹‰çš„ç±»æ¥ä½œä¸ºTreeMapä¸­çš„keyå€¼ï¼Œä¸”æƒ³è®©TreeMapèƒ½å¤Ÿè‰¯å¥½çš„å·¥ä½œï¼Œåˆ™å¿…é¡»é‡å†™è‡ªå®šä¹‰ç±»ä¸­çš„equals()æ–¹æ³•ï¼ŒTreeMapä¸­åˆ¤æ–­ç›¸ç­‰çš„æ ‡å‡†æ˜¯ï¼šä¸¤ä¸ªkeyé€šè¿‡equals()æ–¹æ³•è¿”å›ä¸ºtrueï¼Œå¹¶ä¸”é€šè¿‡compareTo()æ–¹æ³•æ¯”è¾ƒåº”è¯¥è¿”å›ä¸º0ã€‚</p><p><img src="/2021/02/15/JavaCollectionsFramework/image-20200419223344332.png" alt="image-20200419223344332"></p><h2 id="Iteratorä¸ListIterator"><a href="#Iteratorä¸ListIterator" class="headerlink" title="Iteratorä¸ListIterator"></a>Iteratorä¸ListIterator</h2><h3 id="1-Iterator"><a href="#1-Iterator" class="headerlink" title="1.Iterator"></a>1.Iterator</h3><p>Iteratorçš„å®šä¹‰å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Iterator</span>&lt;<span class="hljs-title">E</span>&gt; </span>&#123;&#125;<br></code></pre></td></tr></table></figure><p>Iteratoræ˜¯ä¸€ä¸ªæ¥å£ï¼Œå®ƒæ˜¯é›†åˆçš„è¿­ä»£å™¨ã€‚é›†åˆå¯ä»¥é€šè¿‡Iteratorå»éå†é›†åˆä¸­çš„å…ƒç´ ã€‚Iteratoræä¾›çš„APIæ¥å£å¦‚ä¸‹ï¼š</p><p>boolean hasNext()ï¼šåˆ¤æ–­é›†åˆé‡Œæ˜¯å¦å­˜åœ¨ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚å¦‚æœæœ‰ï¼ŒhasNext()æ–¹æ³•è¿”å› trueã€‚<br>Object next()ï¼šè¿”å›é›†åˆé‡Œä¸‹ä¸€ä¸ªå…ƒç´ ã€‚<br>void remove()ï¼šåˆ é™¤é›†åˆé‡Œä¸Šä¸€æ¬¡nextæ–¹æ³•è¿”å›çš„å…ƒç´ ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">IteratorExample</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        ArrayList&lt;String&gt; a = <span class="hljs-keyword">new</span> ArrayList&lt;String&gt;();<br>        a.add(<span class="hljs-string">&quot;aaa&quot;</span>);<br>        a.add(<span class="hljs-string">&quot;bbb&quot;</span>);<br>        a.add(<span class="hljs-string">&quot;ccc&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;Before iterate : &quot;</span> + a);<br>        Iterator&lt;String&gt; it = a.iterator();<br>        <span class="hljs-keyword">while</span> (it.hasNext()) &#123;<br>            String t = it.next();<br>            <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;bbb&quot;</span>.equals(t)) &#123;<br>                it.remove();<br>            &#125;<br>        &#125;<br>        System.out.println(<span class="hljs-string">&quot;After iterate : &quot;</span> + a);<br>    &#125;<br>&#125;<br><span class="hljs-comment">//Before iterate : [aaa, bbb, ccc]</span><br><span class="hljs-comment">//After iterate : [aaa, ccc] </span><br></code></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼š</p><p>ï¼ˆ1ï¼‰Iteratoråªèƒ½å•å‘ç§»åŠ¨ã€‚</p><p>ï¼ˆ2ï¼‰Iterator.remove()æ˜¯å”¯ä¸€å®‰å…¨çš„æ–¹å¼æ¥åœ¨è¿­ä»£è¿‡ç¨‹ä¸­ä¿®æ”¹é›†åˆï¼›å¦‚æœåœ¨è¿­ä»£è¿‡ç¨‹ä¸­ä»¥ä»»ä½•å…¶å®ƒçš„æ–¹å¼ä¿®æ”¹äº†åŸºæœ¬é›†åˆå°†ä¼šäº§ç”ŸæœªçŸ¥çš„è¡Œä¸ºã€‚è€Œä¸”æ¯è°ƒç”¨ä¸€æ¬¡next()æ–¹æ³•ï¼Œremove()æ–¹æ³•åªèƒ½è¢«è°ƒç”¨ä¸€æ¬¡ï¼Œå¦‚æœè¿åè¿™ä¸ªè§„åˆ™å°†æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚</p></blockquote><h3 id="2-ListIterator"><a href="#2-ListIterator" class="headerlink" title="2.ListIterator"></a><strong>2.ListIterator</strong></h3><p>ListIteratoræ˜¯ä¸€ä¸ªåŠŸèƒ½æ›´åŠ å¼ºå¤§çš„è¿­ä»£å™¨, å®ƒç»§æ‰¿äºIteratoræ¥å£,åªèƒ½ç”¨äºå„ç§Listç±»å‹çš„è®¿é—®ã€‚å¯ä»¥é€šè¿‡è°ƒç”¨listIterator()æ–¹æ³•äº§ç”Ÿä¸€ä¸ªæŒ‡å‘Listå¼€å§‹å¤„çš„ListIterator, è¿˜å¯ä»¥è°ƒç”¨listIterator(n)æ–¹æ³•åˆ›å»ºä¸€ä¸ªä¸€å¼€å§‹å°±æŒ‡å‘åˆ—è¡¨ç´¢å¼•ä¸ºnçš„å…ƒç´ å¤„çš„ListIterator.</p><p>ListIteratoræ¥å£å®šä¹‰å¦‚ä¸‹:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">ListIterator</span>&lt;<span class="hljs-title">E</span>&gt; <span class="hljs-keyword">extends</span> <span class="hljs-title">Iterator</span>&lt;<span class="hljs-title">E</span>&gt; </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">boolean</span> <span class="hljs-title">hasNext</span><span class="hljs-params">()</span></span>;<br>    <span class="hljs-function">E <span class="hljs-title">next</span><span class="hljs-params">()</span></span>;<br>    <span class="hljs-function"><span class="hljs-keyword">boolean</span> <span class="hljs-title">hasPrevious</span><span class="hljs-params">()</span></span>;<br>    <span class="hljs-function">E <span class="hljs-title">previous</span><span class="hljs-params">()</span></span>;<br>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">nextIndex</span><span class="hljs-params">()</span></span>;<br>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">previousIndex</span><span class="hljs-params">()</span></span>;<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">remove</span><span class="hljs-params">()</span></span>;<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">set</span><span class="hljs-params">(E e)</span></span>;<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">add</span><span class="hljs-params">(E e)</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç”±ä»¥ä¸Šå®šä¹‰æˆ‘ä»¬å¯ä»¥æ¨å‡ºListIteratorå¯ä»¥:</p><ol><li>åŒå‘ç§»åŠ¨ï¼ˆå‘å‰/å‘åéå†ï¼‰ï¼›</li><li>äº§ç”Ÿç›¸å¯¹äºè¿­ä»£å™¨åœ¨åˆ—è¡¨ä¸­æŒ‡å‘çš„å½“å‰ä½ç½®çš„å‰ä¸€ä¸ªå’Œåä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•ï¼›</li><li>å¯ä»¥ä½¿ç”¨set()æ–¹æ³•æ›¿æ¢å®ƒè®¿é—®è¿‡çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼›</li><li>å¯ä»¥ä½¿ç”¨add()æ–¹æ³•åœ¨next()æ–¹æ³•è¿”å›çš„å…ƒç´ ä¹‹å‰æˆ–previous()æ–¹æ³•è¿”å›çš„å…ƒç´ ä¹‹åæ’å…¥ä¸€ä¸ªå…ƒç´ ã€‚</li></ol><p>ä½¿ç”¨ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ListIteratorExample</span> </span>&#123;<br> <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        ArrayList&lt;String&gt; a = <span class="hljs-keyword">new</span> ArrayList&lt;String&gt;();<br>        a.add(<span class="hljs-string">&quot;aaa&quot;</span>);<br>        a.add(<span class="hljs-string">&quot;bbb&quot;</span>);<br>        a.add(<span class="hljs-string">&quot;ccc&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;Before iterate : &quot;</span> + a);<br>        ListIterator&lt;String&gt; it = a.listIterator();<br>        <span class="hljs-keyword">while</span> (it.hasNext()) &#123;<br>            System.out.println(it.next() + <span class="hljs-string">&quot;, &quot;</span> + it.previousIndex() + <span class="hljs-string">&quot;, &quot;</span> + it.nextIndex());<br>        &#125;<br>        <span class="hljs-keyword">while</span> (it.hasPrevious()) &#123;<br>            System.out.print(it.previous() + <span class="hljs-string">&quot; &quot;</span>);<br>        &#125;<br>        System.out.println();<br>        it = a.listIterator(<span class="hljs-number">1</span>);<br>        <span class="hljs-keyword">while</span> (it.hasNext()) &#123;<br>            String t = it.next();<br>            System.out.println(t);<br>            <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;ccc&quot;</span>.equals(t)) &#123;<br>                it.set(<span class="hljs-string">&quot;nnn&quot;</span>);<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                it.add(<span class="hljs-string">&quot;kkk&quot;</span>);<br>            &#125;<br>        &#125;<br>        System.out.println(<span class="hljs-string">&quot;After iterate : &quot;</span> + a);<br>    &#125;<br>&#125;<br><span class="hljs-comment">/*</span><br><span class="hljs-comment">Before iterate : [aaa, bbb, ccc]</span><br><span class="hljs-comment">aaa, 0, 1</span><br><span class="hljs-comment">bbb, 1, 2</span><br><span class="hljs-comment">ccc, 2, 3</span><br><span class="hljs-comment">ccc bbb aaa </span><br><span class="hljs-comment">bbb</span><br><span class="hljs-comment">ccc</span><br><span class="hljs-comment">After iterate : [aaa, bbb, kkk, nnn]*/</span><br></code></pre></td></tr></table></figure><h2 id="å¼‚åŒç‚¹"><a href="#å¼‚åŒç‚¹" class="headerlink" title="å¼‚åŒç‚¹"></a>å¼‚åŒç‚¹</h2><h3 id="1-ArrayListå’ŒLinkedList"><a href="#1-ArrayListå’ŒLinkedList" class="headerlink" title="1.ArrayListå’ŒLinkedList"></a>1.ArrayListå’ŒLinkedList</h3><p>ï¼ˆ1ï¼‰ArrayListæ˜¯å®ç°äº†åŸºäºåŠ¨æ€æ•°ç»„çš„æ•°æ®ç»“æ„ï¼ŒLinkedListåŸºäºé“¾è¡¨çš„æ•°æ®ç»“æ„ã€‚<br>ï¼ˆ2ï¼‰å¯¹äºéšæœºè®¿é—®getå’Œsetï¼ŒArrayListç»å¯¹ä¼˜äºLinkedListï¼Œå› ä¸ºLinkedListè¦ç§»åŠ¨æŒ‡é’ˆã€‚<br>ï¼ˆ3ï¼‰å¯¹äºæ–°å¢å’Œåˆ é™¤æ“ä½œaddå’Œremoveï¼ŒLinedListæ¯”è¾ƒå ä¼˜åŠ¿ï¼Œå› ä¸ºArrayListè¦ç§»åŠ¨æ•°æ®ã€‚<br>è¿™ä¸€ç‚¹è¦çœ‹å®é™…æƒ…å†µçš„ã€‚è‹¥åªå¯¹å•æ¡æ•°æ®æ’å…¥æˆ–åˆ é™¤ï¼ŒArrayListçš„é€Ÿåº¦åè€Œä¼˜äºLinkedListã€‚ä½†è‹¥æ˜¯æ‰¹é‡éšæœºçš„æ’å…¥åˆ é™¤æ•°æ®ï¼ŒLinkedListçš„é€Ÿåº¦å¤§å¤§ä¼˜äºArrayList. å› ä¸ºArrayListæ¯æ’å…¥ä¸€æ¡æ•°æ®ï¼Œè¦ç§»åŠ¨æ’å…¥ç‚¹åŠä¹‹åçš„æ‰€æœ‰æ•°æ®ã€‚</p><h3 id="2-HashTableä¸HashMap"><a href="#2-HashTableä¸HashMap" class="headerlink" title="2.HashTableä¸HashMap"></a>2.HashTableä¸HashMap</h3><p><strong>ç›¸åŒç‚¹ï¼š</strong></p><ol><li>éƒ½å®ç°äº†Mapã€Cloneableã€java.io.Serializableæ¥å£ã€‚</li><li>éƒ½æ˜¯å­˜å‚¨â€é”®å€¼å¯¹(key-value)â€çš„æ•£åˆ—è¡¨ï¼Œè€Œä¸”éƒ½æ˜¯é‡‡ç”¨æ‹‰é“¾æ³•å®ç°çš„ã€‚</li></ol><p><strong>ä¸åŒç‚¹ï¼š</strong></p><ol><li><p>å†å²åŸå› :HashTableæ˜¯åŸºäºé™ˆæ—§çš„Dictionaryç±»çš„ï¼ŒHashMapæ˜¯Java 1.2å¼•è¿›çš„Mapæ¥å£çš„ä¸€ä¸ªå®ç° ã€‚</p></li><li><p>åŒæ­¥æ€§:HashTableæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä¹Ÿå°±æ˜¯è¯´æ˜¯åŒæ­¥çš„ï¼Œè€ŒHashMapæ˜¯çº¿ç¨‹åºä¸å®‰å…¨çš„ï¼Œä¸æ˜¯åŒæ­¥çš„ ã€‚</p></li><li><p>å¯¹nullå€¼çš„å¤„ç†ï¼šHashMapçš„keyã€valueéƒ½å¯ä¸ºnullï¼ŒHashTableçš„keyã€valueéƒ½ä¸å¯ä¸ºnull ã€‚</p></li><li><p>åŸºç±»ä¸åŒï¼šHashMapç»§æ‰¿äºAbstractMapï¼Œè€ŒHashtableç»§æ‰¿äºDictionaryã€‚</p><blockquote><p>Dictionaryæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®ƒç›´æ¥ç»§æ‰¿äºObjectç±»ï¼Œæ²¡æœ‰å®ç°ä»»ä½•æ¥å£ã€‚Dictionaryç±»æ˜¯JDK 1.0çš„å¼•å…¥çš„ã€‚è™½ç„¶Dictionaryä¹Ÿæ”¯æŒâ€œæ·»åŠ key-valueé”®å€¼å¯¹â€ã€â€œè·å–valueâ€ã€â€œè·å–å¤§å°â€ç­‰åŸºæœ¬æ“ä½œï¼Œä½†å®ƒçš„APIå‡½æ•°æ¯”Mapå°‘ï¼›è€Œä¸”Dictionaryä¸€èˆ¬æ˜¯é€šè¿‡Enumeration(æšä¸¾ç±»)å»éå†ï¼ŒMapåˆ™æ˜¯é€šè¿‡Iterator(è¿­ä»£Må™¨)å»éå†ã€‚ ç„¶è€Œç”±äºHashtableä¹Ÿå®ç°äº†Mapæ¥å£ï¼Œæ‰€ä»¥ï¼Œå®ƒå³æ”¯æŒEnumerationéå†ï¼Œä¹Ÿæ”¯æŒIteratoréå†ã€‚</p><p>AbstractMapæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®ƒå®ç°äº†Mapæ¥å£çš„ç»å¤§éƒ¨åˆ†APIå‡½æ•°ï¼›ä¸ºMapçš„å…·ä½“å®ç°ç±»æä¾›äº†æå¤§çš„ä¾¿åˆ©ã€‚å®ƒæ˜¯JDK 1.2æ–°å¢çš„ç±»ã€‚</p></blockquote></li><li><p>æ”¯æŒçš„éå†ç§ç±»ä¸åŒï¼šHashMapåªæ”¯æŒIterator(è¿­ä»£å™¨)éå†ã€‚è€ŒHashtableæ”¯æŒIterator(è¿­ä»£å™¨)å’ŒEnumeration(æšä¸¾å™¨)ä¸¤ç§æ–¹å¼éå†ã€‚ </p></li></ol><h3 id="3-HashMapã€Hashtableã€LinkedHashMapå’ŒTreeMapæ¯”è¾ƒ"><a href="#3-HashMapã€Hashtableã€LinkedHashMapå’ŒTreeMapæ¯”è¾ƒ" class="headerlink" title="3.HashMapã€Hashtableã€LinkedHashMapå’ŒTreeMapæ¯”è¾ƒ"></a>3.HashMapã€Hashtableã€LinkedHashMapå’ŒTreeMapæ¯”è¾ƒ</h3><p>Hashmap æ˜¯ä¸€ä¸ªæœ€å¸¸ç”¨çš„Mapï¼Œå®ƒæ ¹æ®é”®çš„HashCode å€¼å­˜å‚¨æ•°æ®ï¼Œæ ¹æ®é”®å¯ä»¥ç›´æ¥è·å–å®ƒçš„å€¼ï¼Œå…·æœ‰å¾ˆå¿«çš„è®¿é—®é€Ÿåº¦ã€‚éå†æ—¶ï¼Œå–å¾—æ•°æ®çš„é¡ºåºæ˜¯å®Œå…¨éšæœºçš„ã€‚HashMapæœ€å¤šåªå…è®¸ä¸€æ¡è®°å½•çš„é”®ä¸ºNull;å…è®¸å¤šæ¡è®°å½•çš„å€¼ä¸ºNull;HashMapä¸æ”¯æŒçº¿ç¨‹çš„åŒæ­¥ï¼Œå³ä»»ä¸€æ—¶åˆ»å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶å†™HashMap;å¯èƒ½ä¼šå¯¼è‡´æ•°æ®çš„ä¸ä¸€è‡´ã€‚å¦‚æœéœ€è¦åŒæ­¥ï¼Œå¯ä»¥ç”¨Collectionsçš„synchronizedMapæ–¹æ³•ä½¿HashMapå…·æœ‰åŒæ­¥çš„èƒ½åŠ›ã€‚</p><p>Hashtable ä¸ HashMapç±»ä¼¼ï¼Œä¸åŒçš„æ˜¯:å®ƒä¸å…è®¸è®°å½•çš„é”®æˆ–è€…å€¼ä¸ºç©º;å®ƒæ”¯æŒçº¿ç¨‹çš„åŒæ­¥ï¼Œå³ä»»ä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å†™Hashtableï¼Œå› æ­¤ä¹Ÿå¯¼è‡´äº†Hashtaleåœ¨å†™å…¥æ—¶ä¼šæ¯”è¾ƒæ…¢ã€‚</p><p>LinkedHashMapä¿å­˜äº†è®°å½•çš„æ’å…¥é¡ºåºï¼Œåœ¨ç”¨Iteratoréå†LinkedHashMapæ—¶ï¼Œå…ˆå¾—åˆ°çš„è®°å½•è‚¯å®šæ˜¯å…ˆæ’å…¥çš„ï¼Œä¹Ÿå¯ä»¥åœ¨æ„é€ æ—¶ç”¨å¸¦å‚æ•°ï¼ŒæŒ‰ç…§åº”ç”¨æ¬¡æ•°æ’åºã€‚åœ¨éå†çš„æ—¶å€™ä¼šæ¯”HashMapæ…¢ï¼Œä¸è¿‡æœ‰ç§æƒ…å†µä¾‹å¤–ï¼Œå½“HashMapå®¹é‡å¾ˆå¤§ï¼Œå®é™…æ•°æ®è¾ƒå°‘æ—¶ï¼Œéå†èµ·æ¥å¯èƒ½ä¼šæ¯”LinkedHashMapæ…¢ï¼Œå› ä¸ºLinkedHashMapçš„éå†é€Ÿåº¦åªå’Œå®é™…æ•°æ®æœ‰å…³ï¼Œå’Œå®¹é‡æ— å…³ï¼Œè€ŒHashMapçš„éå†é€Ÿåº¦å’Œä»–çš„å®¹é‡æœ‰å…³ã€‚å¦‚æœéœ€è¦è¾“å‡ºçš„é¡ºåºå’Œè¾“å…¥çš„ç›¸åŒï¼Œé‚£ä¹ˆç”¨LinkedHashMapå¯ä»¥å®ç°ï¼Œå®ƒè¿˜å¯ä»¥æŒ‰è¯»å–é¡ºåºæ¥æ’åˆ—ï¼Œåƒè¿æ¥æ± ä¸­å¯ä»¥åº”ç”¨ã€‚LinkedHashMapå®ç°ä¸HashMapçš„ä¸åŒä¹‹å¤„åœ¨äºï¼Œåè€…ç»´æŠ¤ç€ä¸€ä¸ªè¿è¡Œäºæ‰€æœ‰æ¡ç›®çš„åŒé‡é“¾è¡¨ã€‚æ­¤é“¾æ¥åˆ—è¡¨å®šä¹‰äº†è¿­ä»£é¡ºåºï¼Œè¯¥è¿­ä»£é¡ºåºå¯ä»¥æ˜¯æ’å…¥é¡ºåºæˆ–è€…æ˜¯è®¿é—®é¡ºåºã€‚å¯¹äºLinkedHashMapè€Œè¨€ï¼Œå®ƒç»§æ‰¿ä¸HashMapã€åº•å±‚ä½¿ç”¨å“ˆå¸Œè¡¨ä¸åŒå‘é“¾è¡¨æ¥ä¿å­˜æ‰€æœ‰å…ƒç´ ã€‚å…¶åŸºæœ¬æ“ä½œä¸çˆ¶ç±»HashMapç›¸ä¼¼ï¼Œå®ƒé€šè¿‡é‡å†™çˆ¶ç±»ç›¸å…³çš„æ–¹æ³•ï¼Œæ¥å®ç°è‡ªå·±çš„é“¾æ¥åˆ—è¡¨ç‰¹æ€§ã€‚</p><p>TreeMapå®ç°SortMapæ¥å£ï¼Œå†…éƒ¨å®ç°æ˜¯çº¢é»‘æ ‘ã€‚èƒ½å¤ŸæŠŠå®ƒä¿å­˜çš„è®°å½•æ ¹æ®é”®æ’åºï¼Œé»˜è®¤æ˜¯æŒ‰é”®å€¼çš„å‡åºæ’åºï¼Œä¹Ÿå¯ä»¥æŒ‡å®šæ’åºçš„æ¯”è¾ƒå™¨ï¼Œå½“ç”¨Iterator éå†TreeMapæ—¶ï¼Œå¾—åˆ°çš„è®°å½•æ˜¯æ’è¿‡åºçš„ã€‚TreeMapä¸å…è®¸keyçš„å€¼ä¸ºnullã€‚éåŒæ­¥çš„ã€‚</p><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ç”¨çš„æœ€å¤šçš„æ˜¯HashMapï¼ŒHashMapé‡Œé¢å­˜å…¥çš„é”®å€¼å¯¹åœ¨å–å‡ºçš„æ—¶å€™æ˜¯éšæœºçš„ï¼Œå®ƒæ ¹æ®é”®çš„HashCodeå€¼å­˜å‚¨æ•°æ®ï¼Œæ ¹æ®é”®å¯ä»¥ç›´æ¥è·å–å®ƒçš„å€¼ï¼Œå…·æœ‰å¾ˆå¿«çš„è®¿é—®é€Ÿåº¦ã€‚åœ¨Map ä¸­æ’å…¥ã€åˆ é™¤å’Œå®šä½å…ƒç´ ï¼ŒHashMap æ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚</p><p>TreeMapå–å‡ºæ¥çš„æ˜¯æ’åºåçš„é”®å€¼å¯¹ã€‚ä½†å¦‚æœæ‚¨è¦æŒ‰è‡ªç„¶é¡ºåºæˆ–è‡ªå®šä¹‰é¡ºåºéå†é”®ï¼Œé‚£ä¹ˆTreeMapä¼šæ›´å¥½ã€‚</p><p>LinkedHashMap æ˜¯HashMapçš„ä¸€ä¸ªå­ç±»ï¼Œå¦‚æœéœ€è¦è¾“å‡ºçš„é¡ºåºå’Œè¾“å…¥çš„ç›¸åŒï¼Œé‚£ä¹ˆç”¨LinkedHashMapå¯ä»¥å®ç°ï¼Œå®ƒè¿˜å¯ä»¥æŒ‰è¯»å–é¡ºåºæ¥æ’åˆ—ï¼Œåƒè¿æ¥æ± ä¸­å¯ä»¥åº”ç”¨ã€‚ </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.HashMap;<br><span class="hljs-keyword">import</span> java.util.Iterator;<br><span class="hljs-keyword">import</span> java.util.LinkedHashMap;<br><span class="hljs-keyword">import</span> java.util.TreeMap;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MapTest</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        <span class="hljs-comment">//HashMap</span><br>        HashMap&lt;String,String&gt; hashMap = <span class="hljs-keyword">new</span> HashMap();<br>        hashMap.put(<span class="hljs-string">&quot;4&quot;</span>, <span class="hljs-string">&quot;d&quot;</span>);<br>        hashMap.put(<span class="hljs-string">&quot;3&quot;</span>, <span class="hljs-string">&quot;c&quot;</span>);<br>        hashMap.put(<span class="hljs-string">&quot;2&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>);<br>        hashMap.put(<span class="hljs-string">&quot;1&quot;</span>, <span class="hljs-string">&quot;a&quot;</span>);<br><br>        Iterator&lt;String&gt; iteratorHashMap = hashMap.keySet().iterator();<br><br>        System.out.println(<span class="hljs-string">&quot;HashMap--&gt;&quot;</span>);<br><br>        <span class="hljs-keyword">while</span> (iteratorHashMap.hasNext())&#123;<br>            Object key1 = iteratorHashMap.next();<br>            System.out.println(key1 + <span class="hljs-string">&quot;--&quot;</span> + hashMap.get(key1));<br>        &#125;<br><br>        <span class="hljs-comment">//LinkedHashMap</span><br>        LinkedHashMap&lt;String,String&gt; linkedHashMap = <span class="hljs-keyword">new</span> LinkedHashMap();<br>        linkedHashMap.put(<span class="hljs-string">&quot;4&quot;</span>, <span class="hljs-string">&quot;d&quot;</span>);<br>        linkedHashMap.put(<span class="hljs-string">&quot;3&quot;</span>, <span class="hljs-string">&quot;c&quot;</span>);<br>        linkedHashMap.put(<span class="hljs-string">&quot;2&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>);<br>        linkedHashMap.put(<span class="hljs-string">&quot;1&quot;</span>, <span class="hljs-string">&quot;a&quot;</span>);<br><br>        Iterator&lt;String&gt; iteratorLinkedHashMap = linkedHashMap.keySet().iterator();<br>        System.out.println(<span class="hljs-string">&quot;LinkedHashMap--&gt;&quot;</span>);<br>        <span class="hljs-keyword">while</span> (iteratorLinkedHashMap.hasNext())&#123;<br>            Object key2 = iteratorLinkedHashMap.next();<br>            System.out.println(key2 + <span class="hljs-string">&quot;--&quot;</span> + linkedHashMap.get(key2));<br>        &#125;<br><br>        <span class="hljs-comment">//TreeMap</span><br>        TreeMap&lt;String,String&gt; treeMap = <span class="hljs-keyword">new</span> TreeMap();<br>        treeMap.put(<span class="hljs-string">&quot;4&quot;</span>, <span class="hljs-string">&quot;d&quot;</span>);<br>        treeMap.put(<span class="hljs-string">&quot;3&quot;</span>, <span class="hljs-string">&quot;c&quot;</span>);<br>        treeMap.put(<span class="hljs-string">&quot;2&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>);<br>        treeMap.put(<span class="hljs-string">&quot;1&quot;</span>, <span class="hljs-string">&quot;a&quot;</span>);<br>        <br>        Iterator&lt;String&gt; iteratorTreeMap = treeMap.keySet().iterator();<br>        System.out.println(<span class="hljs-string">&quot;TreeMap--&gt;&quot;</span>);<br>        <span class="hljs-keyword">while</span> (iteratorTreeMap.hasNext())&#123;<br>            Object key3 = iteratorTreeMap.next();<br>            System.out.println(key3 + <span class="hljs-string">&quot;--&quot;</span> + treeMap.get(key3));<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-comment">/*HashMap--&gt;</span><br><span class="hljs-comment">3--c</span><br><span class="hljs-comment">2--b</span><br><span class="hljs-comment">1--a</span><br><span class="hljs-comment">4--d</span><br><span class="hljs-comment">LinkedHashMap--&gt;</span><br><span class="hljs-comment">4--d</span><br><span class="hljs-comment">3--c</span><br><span class="hljs-comment">2--b</span><br><span class="hljs-comment">1--a</span><br><span class="hljs-comment">TreeMap--&gt;</span><br><span class="hljs-comment">1--a</span><br><span class="hljs-comment">2--b</span><br><span class="hljs-comment">3--c</span><br><span class="hljs-comment">4--d*/</span><br></code></pre></td></tr></table></figure><h3 id="4-HashSetã€LinkedHashSetã€TreeSetæ¯”è¾ƒ"><a href="#4-HashSetã€LinkedHashSetã€TreeSetæ¯”è¾ƒ" class="headerlink" title="4.HashSetã€LinkedHashSetã€TreeSetæ¯”è¾ƒ"></a><strong>4.HashSetã€LinkedHashSetã€TreeSetæ¯”è¾ƒ</strong></h3><p><strong>1ã€Setæ¥å£</strong><br>Set<strong>ä¸å…è®¸åŒ…å«ç›¸åŒçš„å…ƒç´ </strong>ï¼Œå¦‚æœè¯•å›¾æŠŠä¸¤ä¸ªç›¸åŒå…ƒç´ åŠ å…¥åŒä¸€ä¸ªé›†åˆä¸­ï¼Œaddæ–¹æ³•è¿”å›falseã€‚<br>Setåˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡ç›¸åŒä¸æ˜¯ä½¿ç”¨==è¿ç®—ç¬¦ï¼Œè€Œæ˜¯<strong>æ ¹æ®equalsæ–¹æ³•</strong>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦ä¸¤ä¸ªå¯¹è±¡ç”¨equalsæ–¹æ³•æ¯”è¾ƒè¿”å›trueï¼ŒSetå°±ä¸ä¼šæ¥å—è¿™ä¸¤ä¸ªå¯¹è±¡ã€‚</p><p><strong>2ã€HashSet</strong><br>HashSetæœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š<br>-&gt; ä¸èƒ½ä¿è¯å…ƒç´ çš„æ’åˆ—é¡ºåºï¼Œé¡ºåºæœ‰å¯èƒ½å‘ç”Ÿå˜åŒ–ã€‚<br>-&gt; ä¸æ˜¯åŒæ­¥çš„ã€‚<br>-&gt; é›†åˆå…ƒç´ å¯ä»¥æ˜¯nullï¼Œä½†åªèƒ½æ”¾å…¥ä¸€ä¸ªnullã€‚<br>  å½“å‘HashSetç»“åˆä¸­å­˜å…¥ä¸€ä¸ªå…ƒç´ æ—¶ï¼ŒHashSetä¼šè°ƒç”¨è¯¥å¯¹è±¡çš„hashCode()æ–¹æ³•æ¥å¾—åˆ°è¯¥å¯¹è±¡çš„hashCodeå€¼ï¼Œç„¶åæ ¹æ® hashCodeå€¼æ¥å†³å®šè¯¥å¯¹è±¡åœ¨HashSetä¸­å­˜å‚¨ä½ç½®ã€‚ç®€å•çš„è¯´ï¼ŒHashSeté›†åˆåˆ¤æ–­ä¸¤ä¸ªå…ƒç´ ç›¸ç­‰çš„æ ‡å‡†æ˜¯ä¸¤ä¸ªå¯¹è±¡é€šè¿‡equalsæ–¹æ³•æ¯”è¾ƒç›¸ç­‰ï¼Œå¹¶ä¸”ä¸¤ä¸ªå¯¹è±¡çš„hashCode()æ–¹æ³•è¿”å›å€¼ä¹Ÿç›¸ç­‰ã€‚<br>  æ³¨æ„ï¼Œå¦‚æœè¦æŠŠä¸€ä¸ªå¯¹è±¡æ”¾å…¥HashSetä¸­ï¼Œé‡å†™è¯¥å¯¹è±¡å¯¹åº”ç±»çš„equalsæ–¹æ³•ï¼Œä¹Ÿåº”è¯¥é‡å†™å…¶hashCode()æ–¹æ³•ã€‚å…¶è§„åˆ™æ˜¯å¦‚æœä¸¤ä¸ªå¯¹è±¡é€šè¿‡equalsæ–¹æ³•æ¯”è¾ƒè¿”å›trueæ—¶ï¼Œå…¶hashCodeä¹Ÿåº”è¯¥ç›¸åŒã€‚å¦å¤–ï¼Œå¯¹è±¡ä¸­ç”¨ä½œequalsæ¯”è¾ƒæ ‡å‡†çš„å±æ€§ï¼Œéƒ½åº”è¯¥ç”¨æ¥è®¡ç®— hashCodeçš„å€¼ã€‚</p><p><strong>3ã€LinkedHashSet</strong><br>  LinkedHashSeté›†åˆåŒæ ·æ˜¯<strong>æ ¹æ®å…ƒç´ çš„hashCodeå€¼æ¥å†³å®šå…ƒç´ çš„å­˜å‚¨ä½ç½®</strong>ï¼Œä½†æ˜¯å®ƒåŒæ—¶ä½¿ç”¨é“¾è¡¨ç»´æŠ¤å…ƒç´ çš„æ¬¡åºã€‚è¿™æ ·ä½¿å¾—å…ƒç´ çœ‹èµ·æ¥åƒæ˜¯ä»¥æ’å…¥é¡ºåºä¿å­˜çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå½“éå†è¯¥é›†åˆæ—¶å€™ï¼ŒLinkedHashSetå°†ä¼šä»¥å…ƒç´ çš„æ·»åŠ é¡ºåºè®¿é—®é›†åˆçš„å…ƒç´ ã€‚<br>  LinkedHashSetåœ¨è¿­ä»£è®¿é—®Setä¸­çš„å…¨éƒ¨å…ƒç´ æ—¶ï¼Œ<strong>æ€§èƒ½æ¯”HashSetå¥½ï¼Œä½†æ˜¯æ’å…¥æ—¶æ€§èƒ½ç¨å¾®é€Šè‰²äºHashSetã€‚</strong></p><p><strong>4ã€TreeSetç±»</strong><br>  TreeSetæ˜¯SortedSetæ¥å£çš„å”¯ä¸€å®ç°ç±»ï¼ŒTreeSetå¯ä»¥ç¡®ä¿é›†åˆå…ƒç´ å¤„äºæ’åºçŠ¶æ€ã€‚TreeSetæ”¯æŒä¸¤ç§æ’åºæ–¹å¼ï¼Œè‡ªç„¶æ’åºå’Œå®šåˆ¶æ’åºï¼Œå…¶ä¸­è‡ªç„¶æ’åºä¸ºé»˜è®¤çš„æ’åºæ–¹å¼ã€‚å‘TreeSetä¸­åŠ å…¥çš„åº”è¯¥æ˜¯åŒä¸€ä¸ªç±»çš„å¯¹è±¡ã€‚<br>  TreeSetåˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡ä¸ç›¸ç­‰çš„æ–¹å¼æ˜¯ä¸¤ä¸ªå¯¹è±¡é€šè¿‡equalsæ–¹æ³•è¿”å›falseï¼Œæˆ–è€…é€šè¿‡CompareToæ–¹æ³•æ¯”è¾ƒæ²¡æœ‰è¿”å›0ã€‚<br>è‡ªç„¶æ’åº<br>  è‡ªç„¶æ’åºä½¿ç”¨è¦æ’åºå…ƒç´ çš„CompareToï¼ˆObject objï¼‰æ–¹æ³•æ¥æ¯”è¾ƒå…ƒç´ ä¹‹é—´å¤§å°å…³ç³»ï¼Œç„¶åå°†å…ƒç´ æŒ‰ç…§å‡åºæ’åˆ—ã€‚<br>  Javaæä¾›äº†ä¸€ä¸ªComparableæ¥å£ï¼Œè¯¥æ¥å£é‡Œå®šä¹‰äº†ä¸€ä¸ªcompareTo(Object obj)æ–¹æ³•ï¼Œè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªæ•´æ•°å€¼ï¼Œå®ç°äº†è¯¥æ¥å£çš„å¯¹è±¡å°±å¯ä»¥æ¯”è¾ƒå¤§å°ã€‚obj1.compareTo(obj2)æ–¹æ³•å¦‚æœè¿”å›0ï¼Œåˆ™è¯´æ˜è¢«æ¯”è¾ƒçš„ä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰ï¼Œå¦‚æœè¿”å›ä¸€ä¸ªæ­£æ•°ï¼Œåˆ™è¡¨æ˜obj1å¤§äºobj2ï¼Œå¦‚æœæ˜¯è´Ÿæ•°ï¼Œåˆ™è¡¨æ˜obj1å°äºobj2ã€‚å¦‚æœæˆ‘ä»¬å°†ä¸¤ä¸ªå¯¹è±¡çš„equalsæ–¹æ³•æ€»æ˜¯è¿”å›trueï¼Œåˆ™è¿™ä¸¤ä¸ªå¯¹è±¡çš„compareToæ–¹æ³•è¿”å›åº”è¯¥è¿”å›0ã€‚<br>å®šåˆ¶æ’åº<br>  è‡ªç„¶æ’åºæ˜¯æ ¹æ®é›†åˆå…ƒç´ çš„å¤§å°ï¼Œä»¥å‡åºæ’åˆ—ï¼Œå¦‚æœè¦å®šåˆ¶æ’åºï¼Œåº”è¯¥ä½¿ç”¨Comparatoræ¥å£ï¼Œå®ç° int compare(T o1,T o2)æ–¹æ³•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.test;  <br>  <br><span class="hljs-keyword">import</span> java.util.HashSet;  <br><span class="hljs-keyword">import</span> java.util.LinkedHashSet;  <br><span class="hljs-keyword">import</span> java.util.TreeSet;  <br>  <br><span class="hljs-comment">/**  </span><br><span class="hljs-comment"> * <span class="hljs-doctag">@description</span> å‡ ä¸ªsetçš„æ¯”è¾ƒ  </span><br><span class="hljs-comment"> *    HashSetï¼šå“ˆå¸Œè¡¨æ˜¯é€šè¿‡ä½¿ç”¨ç§°ä¸ºæ•£åˆ—æ³•çš„æœºåˆ¶æ¥å­˜å‚¨ä¿¡æ¯çš„ï¼Œå…ƒç´ å¹¶æ²¡æœ‰ä»¥æŸç§ç‰¹å®šé¡ºåºæ¥å­˜æ”¾ï¼›  </span><br><span class="hljs-comment"> *    LinkedHashSetï¼šä»¥å…ƒç´ æ’å…¥çš„é¡ºåºæ¥ç»´æŠ¤é›†åˆçš„é“¾æ¥è¡¨ï¼Œå…è®¸ä»¥æ’å…¥çš„é¡ºåºåœ¨é›†åˆä¸­è¿­ä»£ï¼›  </span><br><span class="hljs-comment"> *    TreeSetï¼šæä¾›ä¸€ä¸ªä½¿ç”¨æ ‘ç»“æ„å­˜å‚¨Setæ¥å£çš„å®ç°ï¼Œå¯¹è±¡ä»¥å‡åºé¡ºåºå­˜å‚¨ï¼Œè®¿é—®å’Œéå†çš„æ—¶é—´å¾ˆå¿«ã€‚  </span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> Zhou-Jingxian  </span><br><span class="hljs-comment"> *  </span><br><span class="hljs-comment"> */</span>  <br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SetDemo</span> </span>&#123;  <br>  <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;  <br>  <br>        HashSet&lt;String&gt; hs = <span class="hljs-keyword">new</span> HashSet&lt;String&gt;();  <br>        hs.add(<span class="hljs-string">&quot;B&quot;</span>);  <br>        hs.add(<span class="hljs-string">&quot;A&quot;</span>);  <br>        hs.add(<span class="hljs-string">&quot;D&quot;</span>);  <br>        hs.add(<span class="hljs-string">&quot;E&quot;</span>);  <br>        hs.add(<span class="hljs-string">&quot;C&quot;</span>);  <br>        hs.add(<span class="hljs-string">&quot;F&quot;</span>);  <br>        System.out.println(<span class="hljs-string">&quot;HashSet é¡ºåº:\n&quot;</span>+hs);  <br>          <br>        LinkedHashSet&lt;String&gt; lhs = <span class="hljs-keyword">new</span> LinkedHashSet&lt;String&gt;();  <br>        lhs.add(<span class="hljs-string">&quot;B&quot;</span>);  <br>        lhs.add(<span class="hljs-string">&quot;A&quot;</span>);  <br>        lhs.add(<span class="hljs-string">&quot;D&quot;</span>);  <br>        lhs.add(<span class="hljs-string">&quot;E&quot;</span>);  <br>        lhs.add(<span class="hljs-string">&quot;C&quot;</span>);  <br>        lhs.add(<span class="hljs-string">&quot;F&quot;</span>);  <br>        System.out.println(<span class="hljs-string">&quot;LinkedHashSet é¡ºåº:\n&quot;</span>+lhs);  <br>          <br>        TreeSet&lt;String&gt; ts = <span class="hljs-keyword">new</span> TreeSet&lt;String&gt;();  <br>        ts.add(<span class="hljs-string">&quot;B&quot;</span>);  <br>        ts.add(<span class="hljs-string">&quot;A&quot;</span>);  <br>        ts.add(<span class="hljs-string">&quot;D&quot;</span>);  <br>        ts.add(<span class="hljs-string">&quot;E&quot;</span>);  <br>        ts.add(<span class="hljs-string">&quot;C&quot;</span>);  <br>        ts.add(<span class="hljs-string">&quot;F&quot;</span>);  <br>        System.out.println(<span class="hljs-string">&quot;TreeSet é¡ºåº:\n&quot;</span>+ts);  <br>    &#125;  <br>&#125;<br><span class="hljs-comment">/*</span><br><span class="hljs-comment">HashSet é¡ºåº:[D, E, F, A, B, C]</span><br><span class="hljs-comment">LinkedHashSet é¡ºåº:[B, A, D, E, C, F]</span><br><span class="hljs-comment">TreeSet é¡ºåº:[A, B, C, D, E, F]</span><br><span class="hljs-comment">*/</span><br></code></pre></td></tr></table></figure><h3 id="5ã€Iteratorå’ŒListIteratoråŒºåˆ«"><a href="#5ã€Iteratorå’ŒListIteratoråŒºåˆ«" class="headerlink" title="5ã€Iteratorå’ŒListIteratoråŒºåˆ«"></a><strong>5ã€Iteratorå’ŒListIteratoråŒºåˆ«</strong></h3><p>æˆ‘ä»¬åœ¨ä½¿ç”¨Listï¼ŒSetçš„æ—¶å€™ï¼Œä¸ºäº†å®ç°å¯¹å…¶æ•°æ®çš„éå†ï¼Œæˆ‘ä»¬ç»å¸¸ä½¿ç”¨åˆ°äº†Iterator(è¿­ä»£å™¨)ã€‚ä½¿ç”¨è¿­ä»£å™¨ï¼Œä½ ä¸éœ€è¦å¹²æ¶‰å…¶éå†çš„è¿‡ç¨‹ï¼Œåªéœ€è¦æ¯æ¬¡å–å‡ºä¸€ä¸ªä½ æƒ³è¦çš„æ•°æ®è¿›è¡Œå¤„ç†å°±å¯ä»¥äº†ã€‚ä½†æ˜¯åœ¨ä½¿ç”¨çš„æ—¶å€™ä¹Ÿæ˜¯æœ‰ä¸åŒçš„ã€‚Listå’ŒSetéƒ½æœ‰iterator()æ¥å–å¾—å…¶è¿­ä»£å™¨ã€‚å¯¹Listæ¥è¯´ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡listIterator()å–å¾—å…¶è¿­ä»£å™¨ï¼Œä¸¤ç§è¿­ä»£å™¨åœ¨æœ‰äº›æ—¶å€™æ˜¯ä¸èƒ½é€šç”¨çš„ï¼ŒIteratorå’ŒListIteratorä¸»è¦åŒºåˆ«åœ¨ä»¥ä¸‹æ–¹é¢ï¼š</p><p>ï¼ˆ1ï¼‰ListIteratoræœ‰add()æ–¹æ³•ï¼Œå¯ä»¥å‘Listä¸­æ·»åŠ å¯¹è±¡ï¼Œè€ŒIteratorä¸èƒ½</p><p>ï¼ˆ2ï¼‰ListIteratorå’ŒIteratoréƒ½æœ‰hasNext()å’Œnext()æ–¹æ³•ï¼Œå¯ä»¥å®ç°é¡ºåºå‘åéå†ï¼Œä½†æ˜¯ListIteratoræœ‰hasPrevious()å’Œprevious()æ–¹æ³•ï¼Œå¯ä»¥å®ç°é€†å‘ï¼ˆé¡ºåºå‘å‰ï¼‰éå†ã€‚Iteratorå°±ä¸å¯ä»¥ã€‚</p><p>ï¼ˆ3ï¼‰ListIteratorå¯ä»¥å®šä½å½“å‰çš„ç´¢å¼•ä½ç½®ï¼ŒnextIndex()å’ŒpreviousIndex()å¯ä»¥å®ç°ã€‚Iteratoræ²¡æœ‰æ­¤åŠŸèƒ½ã€‚</p><p>ï¼ˆ4ï¼‰éƒ½å¯å®ç°åˆ é™¤å¯¹è±¡ï¼Œä½†æ˜¯ListIteratorå¯ä»¥å®ç°å¯¹è±¡çš„ä¿®æ”¹ï¼Œset()æ–¹æ³•å¯ä»¥å®ç°ã€‚Iieratorä»…èƒ½éå†ï¼Œä¸èƒ½ä¿®æ”¹ã€‚</p><p>å› ä¸ºListIteratorçš„è¿™äº›åŠŸèƒ½ï¼Œå¯ä»¥å®ç°å¯¹LinkedListç­‰Listæ•°æ®ç»“æ„çš„æ“ä½œã€‚å…¶å®ï¼Œæ•°ç»„å¯¹è±¡ä¹Ÿå¯ä»¥ç”¨è¿­ä»£å™¨æ¥å®ç°ã€‚</p><h3 id="6ã€Collection-å’Œ-CollectionsåŒºåˆ«"><a href="#6ã€Collection-å’Œ-CollectionsåŒºåˆ«" class="headerlink" title="6ã€Collection å’Œ CollectionsåŒºåˆ«"></a>6ã€Collection å’Œ CollectionsåŒºåˆ«</h3><p>ï¼ˆ1ï¼‰java.util.Collection æ˜¯ä¸€ä¸ªé›†åˆæ¥å£ï¼ˆé›†åˆç±»çš„ä¸€ä¸ªé¡¶çº§æ¥å£ï¼‰ã€‚å®ƒæä¾›äº†å¯¹é›†åˆå¯¹è±¡è¿›è¡ŒåŸºæœ¬æ“ä½œçš„é€šç”¨æ¥å£æ–¹æ³•ã€‚Collectionæ¥å£åœ¨Java ç±»åº“ä¸­æœ‰å¾ˆå¤šå…·ä½“çš„å®ç°ã€‚Collectionæ¥å£çš„æ„ä¹‰æ˜¯ä¸ºå„ç§å…·ä½“çš„é›†åˆæä¾›äº†æœ€å¤§åŒ–çš„ç»Ÿä¸€æ“ä½œæ–¹å¼ï¼Œå…¶ç›´æ¥ç»§æ‰¿æ¥å£æœ‰Listä¸Setã€‚</p><blockquote><p> Collection<br>        â”œâ€”â€”List<br>        â”‚â”œâ€”â€”LinkedList<br>        â”‚â”œâ€”â€”ArrayList<br>        â”‚â””â€”â€”Vector<br>        â”‚ã€€â””â€”Stack<br>        â””â€”â€”Set </p></blockquote><p>ï¼ˆ2ï¼‰java.util.Collections æ˜¯ä¸€ä¸ªåŒ…è£…ç±»ï¼ˆå·¥å…·ç±»/å¸®åŠ©ç±»ï¼‰ã€‚å®ƒåŒ…å«æœ‰å„ç§æœ‰å…³é›†åˆæ“ä½œçš„<strong>é™æ€å¤šæ€æ–¹æ³•</strong>ã€‚æ­¤ç±»<strong>ä¸èƒ½å®ä¾‹åŒ–</strong>ï¼Œå°±åƒä¸€ä¸ªå·¥å…·ç±»ï¼Œç”¨äºå¯¹é›†åˆä¸­å…ƒç´ è¿›è¡Œæ’åºã€æœç´¢ä»¥åŠçº¿ç¨‹å®‰å…¨ç­‰å„ç§æ“ä½œï¼ŒæœåŠ¡äºJavaçš„Collectionæ¡†æ¶ã€‚</p><p>ä»£ç ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.ArrayList; <br><span class="hljs-keyword">import</span> java.util.Collections; <br><span class="hljs-keyword">import</span> java.util.List; <br>  <br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestCollections</span> </span>&#123; <br>      <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String args[])</span> </span>&#123; <br>        <span class="hljs-comment">//æ³¨æ„Listæ˜¯å®ç°Collectionæ¥å£çš„ </span><br>        List list = <span class="hljs-keyword">new</span> ArrayList(); <br>        <span class="hljs-keyword">double</span> array[] = &#123; <span class="hljs-number">112</span>, <span class="hljs-number">111</span>, <span class="hljs-number">23</span>, <span class="hljs-number">456</span>, <span class="hljs-number">231</span> &#125;; <br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; array.length; i++) &#123; <br>            list.add(<span class="hljs-keyword">new</span> Double(array[i])); <br>        &#125; <br>        Collections.sort(list); <br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; array.length; i++) &#123; <br>            System.out.println(list.get(i)); <br>        &#125; <br>        <span class="hljs-comment">// ç»“æœï¼š23.0 111.0 112.0 231.0 456.0 </span><br>    &#125; <br>&#125;<br></code></pre></td></tr></table></figure><p>Mapè·Ÿcollectionåº”è¯¥æ˜¯å¹³çº§ï¼Œæ²¡æœ‰ä¾èµ–å…³ç³»</p><p>å¹¶ä¸”å°‘äº†QUEUEè¿™ä¸ªæ•°æ®ç»“æ„ã€</p><p>è¿™ä¸ªå›¾å¯¹å—ï¼Ÿæˆ‘çœ‹ä»jdk1.5å¼€å§‹ï¼Œæºä»£ç å°±æ˜¯è¿™æ ·äº†ï¼š<br>public interface Collection<E> extends Iterable<E> {<br>}<br>å¤§å®¶å¯ä»¥çœ‹ä¸€ä¸‹ã€‚<br>jdk1.4çš„æºä»£ç å¦‚ä¸‹ï¼Œ1.4è¿˜çæœ‰å¼•å…¥iterable<br>public interface Collection {<br>}</E></E></p><p>å…¶ä»–å†…å®¹å¯ä»¥å‚è€ƒï¼Œå­¦ä¹ ä¸€ä¸‹ã€‚ä½†ç±»å›¾è§‰å¾—æœ‰é—®é¢˜çš„ã€‚</p><p>Mapä¸­çš„values æ˜¯ä»¥Collectionç±»å‹å­˜å‚¨çš„</p><p>ç±»å›¾çš„å®çº¿ä¸‰è§’æ˜¯æ³›åŒ–å…³ç³»ï¼Œè™šçº¿ä¸‰è§’æ˜¯å®ç°æ¥å£å…³ç³»ï¼Œç±»å›¾æœ‰ç‚¹é—®é¢˜</p><p>LinkedListè¿˜æœ‰insertæ–¹æ³•ï¼Ÿ</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title></title>
    <link href="/2021/02/15/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BB%83%E4%B9%A0%EF%BC%88%E4%BA%8C%EF%BC%89/"/>
    <url>/2021/02/15/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BB%83%E4%B9%A0%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<p>é—®é¢˜åŠæè¿°ï¼š<br> â€“1.å­¦ç”Ÿè¡¨<br> Student(SID,Sname,Sage,Ssex) â€“SID å­¦ç”Ÿç¼–å·,Sname å­¦ç”Ÿå§“å,Sage å‡ºç”Ÿå¹´æœˆ,Ssex å­¦ç”Ÿæ€§åˆ«<br> â€“2.è¯¾ç¨‹è¡¨<br> Course(CID,Cname,TID) â€“CID â€“è¯¾ç¨‹ç¼–å·,Cname è¯¾ç¨‹åç§°,TID æ•™å¸ˆç¼–å·<br> â€“3.æ•™å¸ˆè¡¨<br> Teacher(TID,Tname) â€“TID æ•™å¸ˆç¼–å·,Tname æ•™å¸ˆå§“å<br> â€“4.æˆç»©è¡¨<br> SC(SID,CID,score) â€“SID å­¦ç”Ÿç¼–å·,CID è¯¾ç¨‹ç¼–å·,score åˆ†æ•°</p><p> â€“åˆ›å»ºæµ‹è¯•æ•°æ®</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> Student(SID <span class="hljs-type">varchar</span>(<span class="hljs-number">10</span>),Sname <span class="hljs-type">varchar</span>(<span class="hljs-number">10</span>),Sage <span class="hljs-type">date</span>,Ssex <span class="hljs-type">varchar</span>(<span class="hljs-number">10</span>));<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> Student <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;01&#x27;</span> , <span class="hljs-string">&#x27;èµµé›·&#x27;</span> , <span class="hljs-string">&#x27;1990-01-01&#x27;</span> , <span class="hljs-string">&#x27;ç”·&#x27;</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> Student <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;02&#x27;</span> , <span class="hljs-string">&#x27;é’±ç”µ&#x27;</span> , <span class="hljs-string">&#x27;1990-12-21&#x27;</span> , <span class="hljs-string">&#x27;ç”·&#x27;</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> Student <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;03&#x27;</span> , <span class="hljs-string">&#x27;å­™é£&#x27;</span> , <span class="hljs-string">&#x27;1990-05-20&#x27;</span> , <span class="hljs-string">&#x27;ç”·&#x27;</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> Student <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;04&#x27;</span> , <span class="hljs-string">&#x27;æäº‘&#x27;</span> , <span class="hljs-string">&#x27;1990-08-06&#x27;</span> , <span class="hljs-string">&#x27;ç”·&#x27;</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> Student <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;05&#x27;</span> , <span class="hljs-string">&#x27;å‘¨æ¢…&#x27;</span> , <span class="hljs-string">&#x27;1991-12-01&#x27;</span> , <span class="hljs-string">&#x27;å¥³&#x27;</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> Student <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;06&#x27;</span> , <span class="hljs-string">&#x27;å´å…°&#x27;</span> , <span class="hljs-string">&#x27;1992-03-01&#x27;</span> , <span class="hljs-string">&#x27;å¥³&#x27;</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> Student <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;07&#x27;</span> , <span class="hljs-string">&#x27;éƒ‘ç«¹&#x27;</span> , <span class="hljs-string">&#x27;1989-07-01&#x27;</span> , <span class="hljs-string">&#x27;å¥³&#x27;</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> Student <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;08&#x27;</span> , <span class="hljs-string">&#x27;ç‹èŠ&#x27;</span> , <span class="hljs-string">&#x27;1990-01-20&#x27;</span> , <span class="hljs-string">&#x27;å¥³&#x27;</span>);<br></code></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> Course(CID <span class="hljs-type">varchar</span>(<span class="hljs-number">10</span>),Cname <span class="hljs-type">varchar</span>(<span class="hljs-number">10</span>),TID <span class="hljs-type">varchar</span>(<span class="hljs-number">10</span>));<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> Course <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;01&#x27;</span> , <span class="hljs-string">&#x27;è¯­æ–‡&#x27;</span> , <span class="hljs-string">&#x27;02&#x27;</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> Course <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;02&#x27;</span> , <span class="hljs-string">&#x27;æ•°å­¦&#x27;</span> , <span class="hljs-string">&#x27;01&#x27;</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> Course <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;03&#x27;</span> , <span class="hljs-string">&#x27;è‹±è¯­&#x27;</span> , <span class="hljs-string">&#x27;03&#x27;</span>);<br></code></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> Teacher(TID <span class="hljs-type">varchar</span>(<span class="hljs-number">10</span>),Tname <span class="hljs-type">varchar</span>(<span class="hljs-number">10</span>));<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> Teacher <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;01&#x27;</span> , <span class="hljs-string">&#x27;å¼ ä¸‰&#x27;</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> Teacher <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;02&#x27;</span> , <span class="hljs-string">&#x27;æå››&#x27;</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> Teacher <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;03&#x27;</span> , <span class="hljs-string">&#x27;ç‹äº”&#x27;</span>);<br></code></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> SC(SID <span class="hljs-type">varchar</span>(<span class="hljs-number">10</span>),CID <span class="hljs-type">varchar</span>(<span class="hljs-number">10</span>),score <span class="hljs-type">decimal</span>(<span class="hljs-number">18</span>,<span class="hljs-number">1</span>));<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> SC <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;01&#x27;</span> , <span class="hljs-string">&#x27;01&#x27;</span> , <span class="hljs-number">80</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> SC <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;01&#x27;</span> , <span class="hljs-string">&#x27;02&#x27;</span> , <span class="hljs-number">90</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> SC <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;01&#x27;</span> , <span class="hljs-string">&#x27;03&#x27;</span> , <span class="hljs-number">99</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> SC <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;02&#x27;</span> , <span class="hljs-string">&#x27;01&#x27;</span> , <span class="hljs-number">70</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> SC <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;02&#x27;</span> , <span class="hljs-string">&#x27;02&#x27;</span> , <span class="hljs-number">60</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> SC <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;02&#x27;</span> , <span class="hljs-string">&#x27;03&#x27;</span> , <span class="hljs-number">80</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> SC <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;03&#x27;</span> , <span class="hljs-string">&#x27;01&#x27;</span> , <span class="hljs-number">80</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> SC <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;03&#x27;</span> , <span class="hljs-string">&#x27;02&#x27;</span> , <span class="hljs-number">80</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> SC <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;03&#x27;</span> , <span class="hljs-string">&#x27;03&#x27;</span> , <span class="hljs-number">80</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> SC <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;04&#x27;</span> , <span class="hljs-string">&#x27;01&#x27;</span> , <span class="hljs-number">50</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> SC <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;04&#x27;</span> , <span class="hljs-string">&#x27;02&#x27;</span> , <span class="hljs-number">30</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> SC <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;04&#x27;</span> , <span class="hljs-string">&#x27;03&#x27;</span> , <span class="hljs-number">20</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> SC <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;05&#x27;</span> , <span class="hljs-string">&#x27;01&#x27;</span> , <span class="hljs-number">76</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> SC <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;05&#x27;</span> , <span class="hljs-string">&#x27;02&#x27;</span> , <span class="hljs-number">87</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> SC <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;06&#x27;</span> , <span class="hljs-string">&#x27;01&#x27;</span> , <span class="hljs-number">31</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> SC <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;06&#x27;</span> , <span class="hljs-string">&#x27;03&#x27;</span> , <span class="hljs-number">34</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> SC <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;07&#x27;</span> , <span class="hljs-string">&#x27;02&#x27;</span> , <span class="hljs-number">89</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> SC <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;07&#x27;</span> , <span class="hljs-string">&#x27;03&#x27;</span> , <span class="hljs-number">98</span>);<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title></title>
    <link href="/2021/02/15/%E5%B2%9B%E5%B1%BF%E6%95%B0%E9%87%8F/"/>
    <url>/2021/02/15/%E5%B2%9B%E5%B1%BF%E6%95%B0%E9%87%8F/</url>
    
    <content type="html"><![CDATA[<h1 id="200ã€å²›å±¿æ•°é‡"><a href="#200ã€å²›å±¿æ•°é‡" class="headerlink" title="200ã€å²›å±¿æ•°é‡"></a>200ã€å²›å±¿æ•°é‡</h1><p><code>å¹¿åº¦ä¼˜å…ˆæœç´¢</code>ã€<code>æ·±åº¦ä¼˜å…ˆæœç´¢</code>ã€<code>å¹¶æŸ¥é›†</code></p><h2 id="æ·±åº¦ä¼˜å…ˆæœç´¢æ±‚è§£"><a href="#æ·±åº¦ä¼˜å…ˆæœç´¢æ±‚è§£" class="headerlink" title="æ·±åº¦ä¼˜å…ˆæœç´¢æ±‚è§£"></a>æ·±åº¦ä¼˜å…ˆæœç´¢æ±‚è§£</h2><p>æˆ‘ä»¬å¯ä»¥å°†äºŒç»´ç½‘æ ¼çœ‹æˆä¸€ä¸ªæ— å‘å›¾ï¼Œç«–ç›´æˆ–æ°´å¹³ç›¸é‚»çš„ 11 ä¹‹é—´æœ‰è¾¹ç›¸è¿ã€‚</p><p>ä¸ºäº†æ±‚å‡ºå²›å±¿çš„æ•°é‡ï¼Œæˆ‘ä»¬å¯ä»¥æ‰«ææ•´ä¸ªäºŒç»´ç½‘æ ¼ã€‚å¦‚æœä¸€ä¸ªä½ç½®ä¸º 11ï¼Œåˆ™ä»¥å…¶ä¸ºèµ·å§‹èŠ‚ç‚¹å¼€å§‹è¿›è¡Œæ·±åº¦ä¼˜å…ˆæœç´¢ã€‚åœ¨æ·±åº¦ä¼˜å…ˆæœç´¢çš„è¿‡ç¨‹ä¸­ï¼Œæ¯ä¸ªæœç´¢åˆ°çš„ 11 éƒ½ä¼šè¢«é‡æ–°æ ‡è®°ä¸º 00ã€‚</p><p>æœ€ç»ˆå²›å±¿çš„æ•°é‡å°±æ˜¯æˆ‘ä»¬è¿›è¡Œæ·±åº¦ä¼˜å…ˆæœç´¢çš„æ¬¡æ•°ã€‚</p><p><img src="/2021/02/15/%E5%B2%9B%E5%B1%BF%E6%95%B0%E9%87%8F/DFS.gif" alt="CYhQBcBWPF"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(<span class="hljs-keyword">char</span>[][] grid, <span class="hljs-keyword">int</span> r, <span class="hljs-keyword">int</span> c)</span> </span>&#123;<br>        <span class="hljs-keyword">int</span> nr = grid.length;<br>        <span class="hljs-keyword">int</span> nc = grid[<span class="hljs-number">0</span>].length;<br><br>        <span class="hljs-keyword">if</span> (r &lt; <span class="hljs-number">0</span> || c &lt; <span class="hljs-number">0</span> || r &gt;= nr || c &gt;= nc || grid[r][c] == <span class="hljs-string">&#x27;0&#x27;</span>) &#123;<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br><br>        grid[r][c] = <span class="hljs-string">&#x27;0&#x27;</span>;<br>        dfs(grid, r - <span class="hljs-number">1</span>, c);<br>        dfs(grid, r + <span class="hljs-number">1</span>, c);<br>        dfs(grid, r, c - <span class="hljs-number">1</span>);<br>        dfs(grid, r, c + <span class="hljs-number">1</span>);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">numIslands</span><span class="hljs-params">(<span class="hljs-keyword">char</span>[][] grid)</span> </span>&#123;<br>        <span class="hljs-keyword">if</span> (grid == <span class="hljs-keyword">null</span> || grid.length == <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>        &#125;<br><br>        <span class="hljs-keyword">int</span> nr = grid.length;<br>        <span class="hljs-keyword">int</span> nc = grid[<span class="hljs-number">0</span>].length;<br>        <span class="hljs-keyword">int</span> num_islands = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> r = <span class="hljs-number">0</span>; r &lt; nr; ++r) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> c = <span class="hljs-number">0</span>; c &lt; nc; ++c) &#123;<br>                <span class="hljs-keyword">if</span> (grid[r][c] == <span class="hljs-string">&#x27;1&#x27;</span>) &#123;<br>                    ++num_islands;<br>                    dfs(grid, r, c);<br>                &#125;<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-keyword">return</span> num_islands;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>å¤æ‚åº¦åˆ†æ</strong></p><ul><li><p>æ—¶é—´å¤æ‚åº¦ï¼šO(MN)ï¼Œå…¶ä¸­ M å’Œ N åˆ†åˆ«ä¸ºè¡Œæ•°å’Œåˆ—æ•°ã€‚</p></li><li><p>ç©ºé—´å¤æ‚åº¦ï¼šO(MN)ï¼Œåœ¨æœ€åæƒ…å†µä¸‹ï¼Œæ•´ä¸ªç½‘æ ¼å‡ä¸ºé™†åœ°ï¼Œæ·±åº¦ä¼˜å…ˆæœç´¢çš„æ·±åº¦è¾¾åˆ° MNã€‚</p></li></ul><h2 id="å¹¿åº¦ä¼˜å…ˆæœç´¢æ±‚è§£"><a href="#å¹¿åº¦ä¼˜å…ˆæœç´¢æ±‚è§£" class="headerlink" title="å¹¿åº¦ä¼˜å…ˆæœç´¢æ±‚è§£"></a>å¹¿åº¦ä¼˜å…ˆæœç´¢æ±‚è§£</h2><p>åŒæ ·åœ°ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨å¹¿åº¦ä¼˜å…ˆæœç´¢ä»£æ›¿æ·±åº¦ä¼˜å…ˆæœç´¢ã€‚</p><p>ä¸ºäº†æ±‚å‡ºå²›å±¿çš„æ•°é‡ï¼Œæˆ‘ä»¬å¯ä»¥æ‰«ææ•´ä¸ªäºŒç»´ç½‘æ ¼ã€‚å¦‚æœä¸€ä¸ªä½ç½®ä¸º 11ï¼Œåˆ™å°†å…¶åŠ å…¥é˜Ÿåˆ—ï¼Œå¼€å§‹è¿›è¡Œå¹¿åº¦ä¼˜å…ˆæœç´¢ã€‚åœ¨å¹¿åº¦ä¼˜å…ˆæœç´¢çš„è¿‡ç¨‹ä¸­ï¼Œæ¯ä¸ªæœç´¢åˆ°çš„ 11 éƒ½ä¼šè¢«é‡æ–°æ ‡è®°ä¸º 00ã€‚ç›´åˆ°é˜Ÿåˆ—ä¸ºç©ºï¼Œæœç´¢ç»“æŸã€‚</p><p>æœ€ç»ˆå²›å±¿çš„æ•°é‡å°±æ˜¯æˆ‘ä»¬è¿›è¡Œå¹¿åº¦ä¼˜å…ˆæœç´¢çš„æ¬¡æ•°ã€‚</p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs maxima">class Solution &#123;<br>    public int numIslands(char[][] <span class="hljs-built_in">grid</span>) &#123;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">grid</span> == null || <span class="hljs-built_in">grid</span>.<span class="hljs-built_in">length</span> == <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-built_in">return</span> <span class="hljs-number">0</span>;<br>        &#125;<br><br>        int nr = <span class="hljs-built_in">grid</span>.<span class="hljs-built_in">length</span>;<br>        int nc = <span class="hljs-built_in">grid</span>[<span class="hljs-number">0</span>].<span class="hljs-built_in">length</span>;<br>        int num_islands = <span class="hljs-number">0</span>;<br><br>        <span class="hljs-keyword">for</span> (int r = <span class="hljs-number">0</span>; r &lt; nr; ++r) &#123;<br>            <span class="hljs-keyword">for</span> (int c = <span class="hljs-number">0</span>; c &lt; nc; ++c) &#123;<br>                <span class="hljs-keyword">if</span> (<span class="hljs-built_in">grid</span>[r][c] == &#x27;<span class="hljs-number">1</span>&#x27;) &#123;<br>                    ++num_islands;<br>                    <span class="hljs-built_in">grid</span>[r][c] = &#x27;<span class="hljs-number">0</span>&#x27;;<br>                    Queue&lt;Integer&gt; <span class="hljs-built_in">neighbors</span> = <span class="hljs-built_in">new</span> LinkedList&lt;&gt;();<br>                    <span class="hljs-built_in">neighbors</span>.add(r * nc + c);<br>                    <span class="hljs-keyword">while</span> (!<span class="hljs-built_in">neighbors</span>.isEmpty()) &#123;<br>                        int id = <span class="hljs-built_in">neighbors</span>.<span class="hljs-built_in">remove</span>();<br>                        int <span class="hljs-built_in">row</span> = id / nc;<br>                        int <span class="hljs-built_in">col</span> = id <span class="hljs-symbol">%</span> nc;<br>                        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">row</span> - <span class="hljs-number">1</span> &gt;= <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-built_in">grid</span>[<span class="hljs-built_in">row</span>-<span class="hljs-number">1</span>][<span class="hljs-built_in">col</span>] == &#x27;<span class="hljs-number">1</span>&#x27;) &#123;<br>                            <span class="hljs-built_in">neighbors</span>.add((<span class="hljs-built_in">row</span>-<span class="hljs-number">1</span>) * nc + <span class="hljs-built_in">col</span>);<br>                            <span class="hljs-built_in">grid</span>[<span class="hljs-built_in">row</span>-<span class="hljs-number">1</span>][<span class="hljs-built_in">col</span>] = &#x27;<span class="hljs-number">0</span>&#x27;;<br>                        &#125;<br>                        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">row</span> + <span class="hljs-number">1</span> &lt; nr &amp;&amp; <span class="hljs-built_in">grid</span>[<span class="hljs-built_in">row</span>+<span class="hljs-number">1</span>][<span class="hljs-built_in">col</span>] == &#x27;<span class="hljs-number">1</span>&#x27;) &#123;<br>                            <span class="hljs-built_in">neighbors</span>.add((<span class="hljs-built_in">row</span>+<span class="hljs-number">1</span>) * nc + <span class="hljs-built_in">col</span>);<br>                            <span class="hljs-built_in">grid</span>[<span class="hljs-built_in">row</span>+<span class="hljs-number">1</span>][<span class="hljs-built_in">col</span>] = &#x27;<span class="hljs-number">0</span>&#x27;;<br>                        &#125;<br>                        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">col</span> - <span class="hljs-number">1</span> &gt;= <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-built_in">grid</span>[<span class="hljs-built_in">row</span>][<span class="hljs-built_in">col</span>-<span class="hljs-number">1</span>] == &#x27;<span class="hljs-number">1</span>&#x27;) &#123;<br>                            <span class="hljs-built_in">neighbors</span>.add(<span class="hljs-built_in">row</span> * nc + <span class="hljs-built_in">col</span>-<span class="hljs-number">1</span>);<br>                            <span class="hljs-built_in">grid</span>[<span class="hljs-built_in">row</span>][<span class="hljs-built_in">col</span>-<span class="hljs-number">1</span>] = &#x27;<span class="hljs-number">0</span>&#x27;;<br>                        &#125;<br>                        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">col</span> + <span class="hljs-number">1</span> &lt; nc &amp;&amp; <span class="hljs-built_in">grid</span>[<span class="hljs-built_in">row</span>][<span class="hljs-built_in">col</span>+<span class="hljs-number">1</span>] == &#x27;<span class="hljs-number">1</span>&#x27;) &#123;<br>                            <span class="hljs-built_in">neighbors</span>.add(<span class="hljs-built_in">row</span> * nc + <span class="hljs-built_in">col</span>+<span class="hljs-number">1</span>);<br>                            <span class="hljs-built_in">grid</span>[<span class="hljs-built_in">row</span>][<span class="hljs-built_in">col</span>+<span class="hljs-number">1</span>] = &#x27;<span class="hljs-number">0</span>&#x27;;<br>                        &#125;<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-built_in">return</span> num_islands;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>å¤æ‚åº¦åˆ†æ</strong></p><ul><li><p>æ—¶é—´å¤æ‚åº¦ï¼šO(MN)ï¼Œå…¶ä¸­ M å’Œ N åˆ†åˆ«ä¸ºè¡Œæ•°å’Œåˆ—æ•°ã€‚</p></li><li><p>ç©ºé—´å¤æ‚åº¦ï¼šO(min(M,N))ï¼Œåœ¨æœ€åæƒ…å†µä¸‹ï¼Œæ•´ä¸ªç½‘æ ¼å‡ä¸ºé™†åœ°ï¼Œé˜Ÿåˆ—çš„å¤§å°å¯ä»¥è¾¾åˆ° min(M,N)ã€‚</p></li></ul><h2 id="å¹¶æŸ¥é›†æ±‚è§£"><a href="#å¹¶æŸ¥é›†æ±‚è§£" class="headerlink" title="å¹¶æŸ¥é›†æ±‚è§£"></a>å¹¶æŸ¥é›†æ±‚è§£</h2><p>åŒæ ·åœ°ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨å¹¶æŸ¥é›†ä»£æ›¿æœç´¢ã€‚</p><p>ä¸ºäº†æ±‚å‡ºå²›å±¿çš„æ•°é‡ï¼Œæˆ‘ä»¬å¯ä»¥æ‰«ææ•´ä¸ªäºŒç»´ç½‘æ ¼ã€‚å¦‚æœä¸€ä¸ªä½ç½®ä¸º 11ï¼Œåˆ™å°†å…¶ä¸ç›¸é‚»å››ä¸ªæ–¹å‘ä¸Šçš„ 11 åœ¨å¹¶æŸ¥é›†ä¸­è¿›è¡Œåˆå¹¶ã€‚</p><p>æœ€ç»ˆå²›å±¿çš„æ•°é‡å°±æ˜¯å¹¶æŸ¥é›†ä¸­è¿é€šåˆ†é‡çš„æ•°ç›®ã€‚</p><p><img src="/2021/02/15/%E5%B2%9B%E5%B1%BF%E6%95%B0%E9%87%8F/ddmxKaScd6.gif" alt="ddmxKaScd6"></p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> &#123;</span><br>    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UnionFind</span> &#123;</span><br>        <span class="hljs-keyword">int</span> count;<br>        <span class="hljs-keyword">int</span>[] parent;<br>        <span class="hljs-keyword">int</span>[] rank;<br><br>        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">UnionFind</span><span class="hljs-params">(<span class="hljs-keyword">char</span>[][] grid)</span> </span>&#123;<br>            count = <span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">int</span> m = grid.length;<br>            <span class="hljs-keyword">int</span> n = grid[<span class="hljs-number">0</span>].length;<br>            parent = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[m * n];<br>            rank = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[m * n];<br>            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; m; ++i) &#123;<br>                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; n; ++j) &#123;<br>                    <span class="hljs-keyword">if</span> (grid[i][j] == <span class="hljs-string">&#x27;1&#x27;</span>) &#123;<br>                        parent[i * n + j] = i * n + j;<br>                        ++count;<br>                    &#125;<br>                    rank[i * n + j] = <span class="hljs-number">0</span>;<br>                &#125;<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">find</span><span class="hljs-params">(<span class="hljs-keyword">int</span> i)</span> </span>&#123;<br>            <span class="hljs-keyword">if</span> (parent[i] != i) parent[i] = <span class="hljs-built_in">find</span>(parent[i]);<br>            <span class="hljs-keyword">return</span> parent[i];<br>        &#125;<br><br>        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">union</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x, <span class="hljs-keyword">int</span> y)</span> </span>&#123;<br>            <span class="hljs-keyword">int</span> rootx = <span class="hljs-built_in">find</span>(x);<br>            <span class="hljs-keyword">int</span> rooty = <span class="hljs-built_in">find</span>(y);<br>            <span class="hljs-keyword">if</span> (rootx != rooty) &#123;<br>                <span class="hljs-keyword">if</span> (rank[rootx] &gt; rank[rooty]) &#123;<br>                    parent[rooty] = rootx;<br>                &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (rank[rootx] &lt; rank[rooty]) &#123;<br>                    parent[rootx] = rooty;<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    parent[rooty] = rootx;<br>                    rank[rootx] += <span class="hljs-number">1</span>;<br>                &#125;<br>                --count;<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getCount</span><span class="hljs-params">()</span> </span>&#123;<br>            <span class="hljs-keyword">return</span> count;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">numIslands</span><span class="hljs-params">(<span class="hljs-keyword">char</span>[][] grid)</span> </span>&#123;<br>        <span class="hljs-keyword">if</span> (grid == null || grid.length == <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>        &#125;<br><br>        <span class="hljs-keyword">int</span> nr = grid.length;<br>        <span class="hljs-keyword">int</span> nc = grid[<span class="hljs-number">0</span>].length;<br>        <span class="hljs-keyword">int</span> num_islands = <span class="hljs-number">0</span>;<br>        UnionFind uf = <span class="hljs-keyword">new</span> UnionFind(grid);<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> r = <span class="hljs-number">0</span>; r &lt; nr; ++r) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> c = <span class="hljs-number">0</span>; c &lt; nc; ++c) &#123;<br>                <span class="hljs-keyword">if</span> (grid[r][c] == <span class="hljs-string">&#x27;1&#x27;</span>) &#123;<br>                    grid[r][c] = <span class="hljs-string">&#x27;0&#x27;</span>;<br>                    <span class="hljs-keyword">if</span> (r - <span class="hljs-number">1</span> &gt;= <span class="hljs-number">0</span> &amp;&amp; grid[r<span class="hljs-number">-1</span>][c] == <span class="hljs-string">&#x27;1&#x27;</span>) &#123;<br>                        uf.<span class="hljs-keyword">union</span>(r * nc + c, (r<span class="hljs-number">-1</span>) * nc + c);<br>                    &#125;<br>                    <span class="hljs-keyword">if</span> (r + <span class="hljs-number">1</span> &lt; nr &amp;&amp; grid[r+<span class="hljs-number">1</span>][c] == <span class="hljs-string">&#x27;1&#x27;</span>) &#123;<br>                        uf.<span class="hljs-keyword">union</span>(r * nc + c, (r+<span class="hljs-number">1</span>) * nc + c);<br>                    &#125;<br>                    <span class="hljs-keyword">if</span> (c - <span class="hljs-number">1</span> &gt;= <span class="hljs-number">0</span> &amp;&amp; grid[r][c<span class="hljs-number">-1</span>] == <span class="hljs-string">&#x27;1&#x27;</span>) &#123;<br>                        uf.<span class="hljs-keyword">union</span>(r * nc + c, r * nc + c - <span class="hljs-number">1</span>);<br>                    &#125;<br>                    <span class="hljs-keyword">if</span> (c + <span class="hljs-number">1</span> &lt; nc &amp;&amp; grid[r][c+<span class="hljs-number">1</span>] == <span class="hljs-string">&#x27;1&#x27;</span>) &#123;<br>                        uf.<span class="hljs-keyword">union</span>(r * nc + c, r * nc + c + <span class="hljs-number">1</span>);<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-keyword">return</span> uf.getCount();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>å¤æ‚åº¦åˆ†æ</strong></p><p>æ—¶é—´å¤æ‚åº¦ï¼šO(MNâˆ—Î±(MN))ï¼Œå…¶ä¸­ M å’Œ N åˆ†åˆ«ä¸ºè¡Œæ•°å’Œåˆ—æ•°ã€‚æ³¨æ„å½“ä½¿ç”¨è·¯å¾„å‹ç¼©ï¼ˆè§ find å‡½æ•°ï¼‰å’ŒæŒ‰ç§©åˆå¹¶ï¼ˆè§æ•°ç»„ rankï¼‰å®ç°å¹¶æŸ¥é›†æ—¶ï¼Œå•æ¬¡æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸º Î±(MN)ï¼Œå…¶ä¸­Î±(x) ä¸ºåé˜¿å…‹æ›¼å‡½æ•°ï¼Œå½“è‡ªå˜é‡ x çš„å€¼åœ¨äººç±»å¯è§‚æµ‹çš„èŒƒå›´å†…ï¼ˆå®‡å®™ä¸­ç²’å­çš„æ•°é‡ï¼‰æ—¶ï¼Œå‡½æ•° Î±(x) çš„å€¼ä¸ä¼šè¶…è¿‡ 5ï¼Œå› æ­¤ä¹Ÿå¯ä»¥çœ‹æˆæ˜¯å¸¸æ•°æ—¶é—´å¤æ‚åº¦ã€‚</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(MN)ï¼Œè¿™æ˜¯å¹¶æŸ¥é›†éœ€è¦ä½¿ç”¨çš„ç©ºé—´ã€‚</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title></title>
    <link href="/2021/02/15/%E7%BC%96%E7%A0%81%E6%A0%BC%E5%BC%8F/"/>
    <url>/2021/02/15/%E7%BC%96%E7%A0%81%E6%A0%BC%E5%BC%8F/</url>
    
    <content type="html"><![CDATA[<h1 id="unicodeã€codepointã€UTF"><a href="#unicodeã€codepointã€UTF" class="headerlink" title="unicodeã€codepointã€UTF"></a>unicodeã€codepointã€UTF</h1><h2 id="unicode"><a href="#unicode" class="headerlink" title="unicode"></a>unicode</h2><blockquote><p>unicodeæ˜¯è®¡ç®—æœºç§‘å­¦é¢†åŸŸé‡Œçš„ä¸€é¡¹ä¸šç•Œæ ‡å‡†ï¼ŒåŒ…æ‹¬å­—ç¬¦é›†ã€ç¼–ç æ–¹æ¡ˆç­‰ã€‚è®¡ç®—æœºé‡‡ç”¨å…«æ¯”ç‰¹ä¸€ä¸ªå­—èŠ‚ï¼Œä¸€ä¸ªå­—èŠ‚æœ€å¤§æ•´æ•°æ˜¯255ï¼Œè¿˜è¦è¡¨ç¤ºä¸­æ–‡ä¸€ä¸ªå­—èŠ‚ä¹Ÿæ˜¯ä¸å¤Ÿçš„ï¼Œè‡³å°‘éœ€è¦ä¸¤ä¸ªå­—èŠ‚ï¼Œä¸ºäº†ç»Ÿä¸€æ‰€æœ‰çš„æ–‡å­—ç¼–ç ï¼Œunicodeä¸ºæ¯ç§è¯­è¨€ä¸­çš„æ¯ä¸ªå­—ç¬¦è®¾å®šäº†ç»Ÿä¸€å¹¶ä¸”å”¯ä¸€çš„äºŒè¿›åˆ¶ç¼–ç ï¼Œé€šå¸¸ç”¨ä¸¤ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œæ‰€ä»¥unicodeæ¯ä¸ªå¹³é¢å¯ä»¥ç»„åˆå‡º65535ç§ä¸åŒçš„å­—ç¬¦ï¼Œä¸€å…±17ä¸ªå¹³é¢ã€‚</p></blockquote><p>ç”±äºè‹±æ–‡ç¬¦å·åªéœ€è¦ç”¨åˆ°ä½8ä½ï¼Œæ‰€ä»¥å…¶é«˜8ä½æ°¸è¿œæ˜¯0ï¼Œå› æ­¤ä¿å­˜è‹±æ–‡æ–‡æœ¬æ—¶ä¼šå¤šæµªè´¹ä¸€å€çš„ç©ºé—´ã€‚</p><p>æ¯”å¦‚æ±‰å­â€œæ±‰â€çš„unicodeï¼Œåœ¨javaä¸­è¾“å‡º</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs csharp">System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;\u5B57&quot;</span>);<br></code></pre></td></tr></table></figure><h2 id="UTF-8"><a href="#UTF-8" class="headerlink" title="UTF-8"></a>UTF-8</h2><p>unicodeåœ¨è®¡ç®—æœºä¸­å¦‚ä½•å­˜å‚¨å‘¢ï¼Œå°±æ˜¯ç”¨unicodeå­—ç¬¦é›†è½¬æ¢æ ¼å¼ï¼Œå³æˆ‘ä»¬å¸¸è§çš„UTF-8ã€UTF-16ç­‰ã€‚</p><p>UTF-8å°±æ˜¯ä»¥å­—èŠ‚ä¸ºå•ä½å¯¹unicodeè¿›è¡Œç¼–ç ï¼Œå¯¹ä¸åŒèŒƒå›´çš„å­—ç¬¦ä½¿ç”¨ä¸åŒé•¿åº¦çš„ç¼–ç ã€‚</p><table><thead><tr><th>Unicode</th><th>Utf-8</th></tr></thead><tbody><tr><td>000000-00007F</td><td>0xxxxxxx</td></tr><tr><td>000080-0007FF</td><td>110xxxxx 10xxxxxx</td></tr><tr><td>000800-00FFFF</td><td>1110xxxx 10xxxxxx 10xxxxxx</td></tr><tr><td>010000-10FFFF</td><td>11110xxx10xxxxxx10xxxxxx10xxxxxx</td></tr></tbody></table><p>Javaä¸­çš„Stringå¯¹è±¡å°±æ˜¯ä¸€ä¸ªunicodeç¼–ç çš„å­—ç¬¦ä¸²ã€‚</p><p>javaä¸­æƒ³çŸ¥é“ä¸€ä¸ªå­—ç¬¦çš„unicodeç¼–ç æˆ‘ä»¬å¯ä»¥é€šè¿‡Integer.toHexString()æ–¹æ³•</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-built_in">String</span> str = <span class="hljs-string">&quot;a&quot;</span>;<span class="hljs-comment">//String str = &quot;ç¼–&quot;;</span><br><span class="hljs-built_in">StringBuffer</span> sb = <span class="hljs-keyword">new</span> <span class="hljs-built_in">StringBuffer</span>();<br>char [] source_char = str.toCharArray();<br>System.out.println(source_char.length);<span class="hljs-comment">//1</span><br>System.out.println(source_char[<span class="hljs-number">0</span>]);<span class="hljs-comment">//a    ç¼–</span><br><span class="hljs-built_in">String</span> unicode = <span class="hljs-keyword">null</span>;<br><span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i=<span class="hljs-number">0</span>;i&lt;source_char.length;i++) &#123;<br>    unicode = Integer.toHexString(source_char[i]);<br>    System.out.println(unicode);<span class="hljs-comment">//a:61   ç¼–ï¼š7f16</span><br>    <span class="hljs-keyword">if</span> (unicode.length() &lt;= <span class="hljs-number">2</span>) &#123;<br>        unicode = <span class="hljs-string">&quot;00&quot;</span> + unicode;<br>    &#125;<br>    sb.append(<span class="hljs-string">&quot;\\u&quot;</span> + unicode);<br>&#125;<br>System.out.println(sb);<span class="hljs-comment">//a:\u0061  ç¼–ï¼š\u7f16</span><br></code></pre></td></tr></table></figure><p>å¯¹åº”çš„utf-8ç¼–ç æ˜¯ä»€ä¹ˆå‘¢?</p><p>7f16åœ¨0800-FFFFä¹‹é—´ï¼Œæ‰€ä»¥è¦ç”¨3å­—èŠ‚æ¨¡æ¿ï¼š1110xxxx 10xxxxxx 10xxxxxxã€‚<br>7f16å†™æˆäºŒè¿›åˆ¶æ˜¯ï¼š0111 1111 0001 0110<br>æŒ‰ä¸‰å­—èŠ‚æ¨¡æ¿åˆ†æ®µæ–¹æ³•åˆ†ä¸º0111 111100 010110ï¼Œä»£æ›¿æ¨¡æ¿ä¸­çš„xï¼Œå¾—åˆ°11100111 10111100 10010110ï¼Œå³â€œç¼–â€å¯¹åº”çš„utf-8çš„ç¼–ç æ˜¯e7 bc 96ï¼Œå 3ä¸ªå­—èŠ‚</p><h2 id="codepoint"><a href="#codepoint" class="headerlink" title="codepoint"></a>codepoint</h2><p>unicodeçš„èŒƒå›´ä»000000 - 10FFFFï¼Œcharçš„èŒƒå›´åªèƒ½æ˜¯åœ¨\u0000åˆ°\uffffï¼Œä¹Ÿå°±æ˜¯æ ‡å‡†çš„ 2 å­—èŠ‚å½¢å¼é€šå¸¸ç§°ä½œ UCS-2ï¼Œåœ¨Javaä¸­ï¼Œcharç±»å‹ç”¨UTF-16ç¼–ç æè¿°ä¸€ä¸ªä»£ç å•å…ƒï¼Œä½†unicodeå¤§äº0x10000çš„éƒ¨åˆ†å¦‚ä½•ç”¨charè¡¨ç¤ºå‘¢ï¼Œæ¯”å¦‚ä¸€äº›emojiï¼šğŸ˜€</p><p>javaçš„charç±»å‹å ä¸¤ä¸ªå­—èŠ‚ï¼Œæƒ³è¦è¡¨ç¤ºğŸ˜€è¿™ä¸ªè¡¨æƒ…å°±éœ€è¦2ä¸ªcharï¼Œçœ‹å¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-built_in">String</span> testCode = <span class="hljs-string">&quot;ab\uD83D\uDE03cd&quot;</span>;<br><span class="hljs-built_in">int</span> length = testCode.length();<span class="hljs-comment">//length=6</span><br><span class="hljs-built_in">int</span> count = testCode.codePointCount(<span class="hljs-number">0</span>, testCode.length());<span class="hljs-comment">//count=5</span><br></code></pre></td></tr></table></figure><p>ç¬¬ä¸‰ä¸ªå’Œç¬¬å››ä¸ªå­—ç¬¦åˆèµ·æ¥ä»£è¡¨ğŸ˜€ï¼Œæ˜¯ä¸€ä¸ªä»£ç ç‚¹ï¼Œå¦‚æœæˆ‘ä»¬æƒ³å–åˆ°æ¯ä¸ªä»£ç ç‚¹åšä¸€äº›åˆ¤æ–­å¯ä»¥è¿™ä¹ˆå†™ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java">String testCode = <span class="hljs-string">&quot;ab\uD83D\uDE03cd&quot;</span>;<br><span class="hljs-keyword">int</span> length = testCode.length();<span class="hljs-comment">//length=6</span><br><br>System.out.println(testCode);<span class="hljs-comment">//abğŸ˜ƒcd</span><br><span class="hljs-keyword">int</span> cpCount = testCode.codePointCount(<span class="hljs-number">0</span>, testCode.length());<span class="hljs-comment">//cpCount=5</span><br><br><span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> index = <span class="hljs-number">0</span>; index &lt; cpCount; ++index) &#123;<br>    <span class="hljs-comment">//è¿™é‡Œçš„iæ˜¯å­—ç¬¦çš„ä½ç½®</span><br>    <span class="hljs-keyword">int</span> i = testCode.offsetByCodePoints(<span class="hljs-number">0</span>, index);<br>    <span class="hljs-keyword">int</span> codepoint = testCode.codePointAt(i);<br>    System.out.println(<span class="hljs-string">&quot;i: &quot;</span>+i+<span class="hljs-string">&quot; index: &quot;</span>+index+<span class="hljs-string">&quot; codePoint: &quot;</span>+codepoint);<br>    <span class="hljs-comment">/*è¾“å‡º</span><br><span class="hljs-comment">        i:0 index: 0 codePoint: 97</span><br><span class="hljs-comment">        i:1 index: 1 codePoint: 98</span><br><span class="hljs-comment">        i:2 index: 2 codePoint: 128515</span><br><span class="hljs-comment">        i:4 index: 3 codePoint: 99</span><br><span class="hljs-comment">        i:5 index: 4 codePoint: 100*/</span><br>&#125;<br><br><span class="hljs-keyword">int</span>[] abc = testCode.chars().toArray();<br><span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>;i&lt;abc.length;i++)&#123;<br>System.out.println(abc[i]);<span class="hljs-comment">//[97,98,55357,56835,99,100]</span><br>&#125;<br>abc = testCode.codePoints().toArray();<br><span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>;i&lt;abc.length;i++)&#123;<br>System.out.println(abc[i]);<span class="hljs-comment">//[97,98,128515,99,100]</span><br>&#125;<br></code></pre></td></tr></table></figure><p>codePointIndexå’Œcharçš„indexçš„åŒºåˆ«:</p><p>æŒ‰ç…§codePointindexå–å­—ç¬¦ï¼Œ0å–åˆ°aï¼Œ1å–åˆ°bï¼Œ2å–åˆ°\uD83D\uDE03ä¹Ÿå°±æ˜¯ğŸ˜€ï¼Œ3å–åˆ°cï¼Œ4å–åˆ°dï¼›<br>æŒ‰ç…§Stringçš„indexå–å­—ç¬¦ï¼Œ0å–åˆ°aï¼Œ1å–åˆ°bï¼Œ2å–åˆ°\uD83Dï¼Œ3å–åˆ°\uDE03ï¼Œ4å–åˆ°cï¼Œ5å–åˆ°dã€‚</p><p>å–åˆ°codePointå°±å¯ä»¥æŒ‰ç…§unicodeå€¼è¿›è¡Œå­—ç¬¦çš„è¿‡æ»¤ç­‰æ“ä½œã€‚</p><p>å¦‚æœæœ‰ä¸ªéœ€æ±‚æ˜¯æ—¢å¯ä»¥æŒ‰ç…§unicodeå€¼è¿‡æ»¤å­—ç¬¦ï¼Œä¹Ÿèƒ½æŒ‰ç…§æ­£åˆ™è¡¨è¾¾å¼è¿‡æ»¤å­—ç¬¦ï¼Œå¹¶ä¸”è¿˜æœ‰ç™½åå•ï¼Œåº”è¯¥å¦‚ä½•å®ç°å‘¢ã€‚</p><p>å…¶å®unicodeè¿‡æ»¤å’Œæ­£åˆ™è¡¨è¾¾å¼è¿‡æ»¤å¹¶ä¸å†²çªï¼Œè‡ªå·±å®ç°è‡ªå·±çš„è¿‡æ»¤å°±å¥½äº†ï¼Œå¦‚æœéœ€æ±‚åŠ å…¥äº†è¿‡æ»¤ç™½åå•å°±ä¼šå¤æ‚ä¸€äº›ï¼Œä¸èƒ½ç›´æ¥è¿‡æ»¤ï¼Œéœ€è¦å…ˆæ£€éªŒæ˜¯å¦æ˜¯ç™½åå•çš„indexã€‚</p><p>æˆ‘çš„æ€è·¯æ˜¯è®°å½•ç™½åå•charçš„indexï¼Œæ­£åˆ™è¡¨è¾¾å¼æˆ–å…¶ä»–è¿‡æ»¤æ–¹å¼å¯ä»¥è·å¾—è¿è§„charçš„indexï¼Œunicodeé»‘åå•çš„codepointIndexå¯ä»¥è½¬æ¢æˆcharçš„indexï¼Œåœ¨è·å–codePontçš„indexæ—¶å¯ä»¥åˆ¤æ–­å½“å‰å­—ç¬¦æ˜¯å•charå­—ç¬¦è¿˜æ˜¯åŒcharå­—ç¬¦ï¼ŒåŒcharå­—ç¬¦éœ€è¦æ·»åŠ 2ä¸ªä¸‹æ ‡ï¼Œæ–¹æ³•å¦‚ä¸‹</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-comment">//å–åˆ°unicodeå€¼           </span><br><span class="hljs-built_in">int</span> codepoint = testCode.codePointAt(i);<br><span class="hljs-comment">//å°†unicodeå€¼è½¬æ¢æˆcharæ•°ç»„</span><br><span class="hljs-built_in">char</span>[] chars = Character.toChars(codepoint);<br>charIndexs.<span class="hljs-keyword">add</span>(pointIndex);<br><span class="hljs-keyword">if</span> (chars.length &gt; <span class="hljs-number">1</span>) &#123;<br><span class="hljs-comment">//è¡¨ç¤ºä¸æ˜¯å•charå­—ç¬¦ï¼Œè®°å½•indexæ—¶åŒæ—¶æ·»åŠ i+1</span><br>charIndexs.<span class="hljs-keyword">add</span>(pointIndex + <span class="hljs-number">1</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>//ä¾‹<br>String str = â€œab\uD83D\uDE03æ±‰å­—â€;<br>æƒ³å¤„ç†emojiï¼Œé‚£è®°å½•çš„ä¸‹æ ‡å°±æ˜¯2ã€3ï¼Œæœ€åå’Œç™½åå•ä¸‹æ ‡æ¯”è¾ƒåç»Ÿä¸€åˆ é™¤</p><h4 id="å¦‚ä½•åŒºåˆ«charæ˜¯ä¸€å¯¹è¿˜æ˜¯å•ä¸ª"><a href="#å¦‚ä½•åŒºåˆ«charæ˜¯ä¸€å¯¹è¿˜æ˜¯å•ä¸ª" class="headerlink" title="å¦‚ä½•åŒºåˆ«charæ˜¯ä¸€å¯¹è¿˜æ˜¯å•ä¸ª"></a>å¦‚ä½•åŒºåˆ«charæ˜¯ä¸€å¯¹è¿˜æ˜¯å•ä¸ª</h4><p>å°±ä¹‹å‰çš„ä¾‹å­ab\uD83D\uDE03cdï¼Œæ¢ç§å†™æ³•\u0061\u0062\uD83D\uDE0\u0063\u0064<br>ç¨‹åºæ˜¯å¦‚ä½•å°†\uD83D\uDE03è§£ææˆä¸€ä¸ªå­—ç¬¦çš„å‘¢ã€‚è¿™å°±éœ€è¦Surrogateè¿™ä¸ªæ¦‚å¿µï¼Œæ¥è‡ªUTF-16ã€‚</p><p>UTF-16æ˜¯16bitæœ€å¤šç¼–ç 65536ï¼Œé‚£å¤§äº65536å¦‚ä½•ç¼–ç ï¼ŸUnicode æ ‡å‡†åˆ¶å®šç»„æƒ³å‡ºçš„åŠæ³•æ˜¯ï¼Œä»è¿™65536ä¸ªç¼–ç é‡Œï¼Œæ‹¿å‡º2048ä¸ªï¼Œè§„å®šä»–ä»¬æ˜¯ã€ŒSurrogatesã€ï¼Œè®©ä»–ä»¬ä¸¤ä¸ªä¸ºä¸€ç»„ï¼Œæ¥ä»£è¡¨ç¼–å·å¤§äº65536çš„é‚£äº›å­—ç¬¦ã€‚<br>ç¼–å·ä¸º U+D800 è‡³ U+DBFF çš„è§„å®šä¸ºã€ŒHigh Surrogatesã€ï¼Œå…±1024ä¸ªã€‚<br>ç¼–å·ä¸º U+DC00 è‡³ U+DFFF çš„è§„å®šä¸ºã€ŒLow Surrogatesã€ï¼Œä¹Ÿæ˜¯1024ä¸ªã€‚<br>ä»–ä»¬ç»„åˆå‡ºç°ï¼Œå°±åˆå¯ä»¥å¤šè¡¨ç¤º1048576ä¸­å­—ç¬¦ã€‚</p><p>çœ‹ä¸€ä¸‹String.codePointAtè¿™ä¸ªæ–¹æ³•ï¼Œ</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">codePointAtImpl</span><span class="hljs-params">(<span class="hljs-keyword">char</span>[] a, <span class="hljs-keyword">int</span> index, <span class="hljs-keyword">int</span> limit)</span> </span>&#123;<br>    <span class="hljs-keyword">char</span> c1 = a[index];<br>    <span class="hljs-keyword">if</span> (isHighSurrogate(c1) &amp;&amp; ++index &lt; limit) &#123;<br>        <span class="hljs-keyword">char</span> c2 = a[index];<br>        <span class="hljs-keyword">if</span> (isLowSurrogate(c2)) &#123;<br>            <span class="hljs-keyword">return</span> toCodePoint(c1, c2);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> c1;<br>&#125;<br></code></pre></td></tr></table></figure><p>å…¶ä¸­æœ‰ä¸¤ä¸ªæ–¹æ³•isHighSurrogateã€isLowSurrogateã€‚<br>ç¬¬ä¸€ä¸ªæ–¹æ³•åˆ¤æ–­æ˜¯å¦ä¸ºé«˜ä»£ç†é¡¹ä»£ç å•å…ƒï¼Œå³åœ¨â€™\uD800â€™ä¸â€™\uDBFFâ€™ä¹‹é—´ï¼Œ<br>ç¬¬äºŒä¸ªæ–¹æ³•åˆ¤æ–­æ˜¯å¦ä¸ºä½ä»£ç†é¡¹ä»£ç å•å…ƒï¼Œå³åœ¨â€™\uDC00â€™ä¸â€™\uDFFFâ€™ä¹‹é—´ã€‚</p><p>codePointAtImplæ–¹æ³•åˆ¤æ–­å½“å‰charæ˜¯é«˜ä»£ç†é¡¹ä»£ç å•å…ƒï¼Œä¸‹ä¸€ä¸ªæ˜¯ä½ä»£ç†é¡¹ä»£ç å•å…ƒï¼Œåˆ™è¿™ä¸¤ä¸ªcharæ˜¯ä¸€ä¸ªcodepointã€‚</p><p>å†æ¥çœ‹ä¸€ä¸‹unicodeè½¬UTF-16çš„æ–¹æ³•</p><blockquote><p>å¦‚æœU&lt;0x10000ï¼ŒUçš„UTF-16ç¼–ç å°±æ˜¯Uå¯¹åº”çš„16ä½æ— ç¬¦å·æ•´æ•°ï¼ˆä¸ºä¹¦å†™ç®€ä¾¿ï¼Œä¸‹æ–‡å°†16ä½æ— ç¬¦å·æ•´æ•°è®°ä½œWORDï¼‰ã€‚<br>å¦‚æœUâ‰¥0x10000ï¼Œæˆ‘ä»¬å…ˆè®¡ç®—Uâ€™=U-0x10000ï¼Œç„¶åå°†Uâ€™å†™æˆäºŒè¿›åˆ¶å½¢å¼ï¼šyyyy yyyy yyxx xxxx xxxxï¼ŒUçš„UTF-16ç¼–ç ï¼ˆäºŒè¿›åˆ¶ï¼‰å°±æ˜¯ï¼š110110yyyyyyyyyy 110111xxxxxxxxxxã€‚</p></blockquote><p>è¿˜æ˜¯ä»¥U+1F603è¿™ä¸ªğŸ˜ƒä¸ºä¾‹å­ï¼ŒUâ€™=U-0x10000=F603<br>å†™æˆ2è¿›åˆ¶å°±æ˜¯1111011000000011ï¼Œä¸è¶³20ä½å‰é¢è¡¥0ï¼Œ<br>å˜æˆ0000111101-1000000011ï¼Œæ›¿æ¢yå’Œxå°±æ˜¯1101100000111101ï¼Œ1101111000000011ï¼Œæœ€åUTF-16ç¼–ç å°±æ˜¯[d83dï¼Œde03] å’Œä¸Šé¢ä¸€æ ·ã€‚</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2021/02/15/hello-world/"/>
    <url>/2021/02/15/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>WindowsæŠ€å·§:ç¬”è®°æœ¬çš„ç”µæ± çŠ¶æ€</title>
    <link href="/2020/01/05/Windows%E6%8A%80%E5%B7%A7-%E7%AC%94%E8%AE%B0%E6%9C%AC%E7%9A%84%E7%94%B5%E6%B1%A0%E7%8A%B6%E6%80%81/"/>
    <url>/2020/01/05/Windows%E6%8A%80%E5%B7%A7-%E7%AC%94%E8%AE%B0%E6%9C%AC%E7%9A%84%E7%94%B5%E6%B1%A0%E7%8A%B6%E6%80%81/</url>
    
    <content type="html"><![CDATA[<h4 id="ä½¿ç”¨powercfgæŸ¥è¯¢ç¬”è®°æœ¬ç”µè„‘ç”µæ± çŠ¶æ€"><a href="#ä½¿ç”¨powercfgæŸ¥è¯¢ç¬”è®°æœ¬ç”µè„‘ç”µæ± çŠ¶æ€" class="headerlink" title="ä½¿ç”¨powercfgæŸ¥è¯¢ç¬”è®°æœ¬ç”µè„‘ç”µæ± çŠ¶æ€"></a>ä½¿ç”¨powercfgæŸ¥è¯¢ç¬”è®°æœ¬ç”µè„‘ç”µæ± çŠ¶æ€</h4><p>ç®¡ç†å‘˜èº«ä»½è¿è¡Œcmd</p><p>1ã€é”®å…¥powercfg -energyï¼Œç¨‹åºå°†ä¼šè‡ªåŠ¨å¼€å§‹å¯¹ç³»ç»Ÿçš„60ç§’çŠ¶æ€è·Ÿè¸ªï¼Œå¹¶åˆ†ææ‰€è·å¾—çš„æ•°æ®ç„¶åç»™å‡ºæŠ¥å‘Šï¼Œè¿™ä¸ªè¿‡ç¨‹æœ€å¥½ä¸è¦æ“ä½œç”µè„‘</p><p><img src="/2020/01/05/Windows%E6%8A%80%E5%B7%A7-%E7%AC%94%E8%AE%B0%E6%9C%AC%E7%9A%84%E7%94%B5%E6%B1%A0%E7%8A%B6%E6%80%81/image-20200105183628739.png" alt="image-20200105183628739"></p><p>å®Œæˆåˆ†æåï¼Œç”ŸæˆHTMLæŠ¥å‘Šï¼Œæç¤ºæŠ¥å‘Šä½ç½®ï¼Œæ‰¾åˆ°æŠ¥å‘Šä½ç½®æ‰“å¼€æŸ¥çœ‹ï¼š</p><p><img src="/2020/01/05/Windows%E6%8A%80%E5%B7%A7-%E7%AC%94%E8%AE%B0%E6%9C%AC%E7%9A%84%E7%94%B5%E6%B1%A0%E7%8A%B6%E6%80%81/image-20200105184023940.png" alt="image-20200105184023940"></p><p>2ã€é”®å…¥powercfg /batteryreportï¼Œç³»ç»Ÿä¼šåœ¨æŒ‡å®šè·¯å¾„å½¢æˆç”µæ± ä½¿ç”¨æŠ¥å‘Šï¼Œæ‰“å¼€æŸ¥çœ‹ç”µæ± ä½¿ç”¨æŠ¥å‘Šï¼š</p><p><img src="/2020/01/05/Windows%E6%8A%80%E5%B7%A7-%E7%AC%94%E8%AE%B0%E6%9C%AC%E7%9A%84%E7%94%B5%E6%B1%A0%E7%8A%B6%E6%80%81/image-20200105184403519.png" alt="image-20200105184403519"></p>]]></content>
    
    
    <categories>
      
      <category>Windows</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ä½¿ç”¨æŠ€å·§</tag>
      
      <tag>ç”µæ± çŠ¶æ€</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>JSP</title>
    <link href="/2020/01/04/JSP/"/>
    <url>/2020/01/04/JSP/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>SVN</title>
    <link href="/2019/12/10/SVN/"/>
    <url>/2019/12/10/SVN/</url>
    
    <content type="html"><![CDATA[<h3 id="1ã€SVNç‰ˆæœ¬æ§åˆ¶"><a href="#1ã€SVNç‰ˆæœ¬æ§åˆ¶" class="headerlink" title="1ã€SVNç‰ˆæœ¬æ§åˆ¶"></a>1ã€SVNç‰ˆæœ¬æ§åˆ¶</h3><p>Subversion(SVN) æ˜¯ä¸€ä¸ªå¼€æºçš„ç‰ˆæœ¬æ§åˆ¶ç³»çµ±, ä¹Ÿå°±æ˜¯è¯´ Subversion ç®¡ç†ç€éšæ—¶é—´æ”¹å˜çš„æ•°æ®ã€‚ è¿™äº›æ•°æ®æ”¾ç½®åœ¨ä¸€ä¸ªä¸­å¤®èµ„æ–™æ¡£æ¡ˆåº“(repository) ä¸­ã€‚ è¿™ä¸ªæ¡£æ¡ˆåº“å¾ˆåƒä¸€ä¸ªæ™®é€šçš„æ–‡ä»¶æœåŠ¡å™¨, ä¸è¿‡å®ƒä¼šè®°ä½æ¯ä¸€æ¬¡æ–‡ä»¶çš„å˜åŠ¨ã€‚ è¿™æ ·ä½ å°±å¯ä»¥æŠŠæ¡£æ¡ˆæ¢å¤åˆ°æ—§çš„ç‰ˆæœ¬, æˆ–æ˜¯æµè§ˆæ–‡ä»¶çš„å˜åŠ¨å†å²ã€‚</p><h4 id="1-1ã€å¼•å…¥ï¼šä¸ºä»€ä¹ˆéœ€è¦å¼•å…¥ç‰ˆæœ¬æ§åˆ¶"><a href="#1-1ã€å¼•å…¥ï¼šä¸ºä»€ä¹ˆéœ€è¦å¼•å…¥ç‰ˆæœ¬æ§åˆ¶" class="headerlink" title="1.1ã€å¼•å…¥ï¼šä¸ºä»€ä¹ˆéœ€è¦å¼•å…¥ç‰ˆæœ¬æ§åˆ¶"></a>1.1ã€å¼•å…¥ï¼šä¸ºä»€ä¹ˆéœ€è¦å¼•å…¥ç‰ˆæœ¬æ§åˆ¶</h4><h5 id="1-1-1ã€é—®é¢˜"><a href="#1-1-1ã€é—®é¢˜" class="headerlink" title="1.1.1ã€é—®é¢˜"></a>1.1.1ã€é—®é¢˜</h5><p>åœ¨è½¯ä»¶å¼€å‘ä¸­, ç»å¸¸ä¼šæœ‰ä¸‹é¢è¿™äº›é—®é¢˜</p><ol><li><p>å¦‚ä½•ç¡®ä¿ç”µè„‘æ•…éšœæˆ–å¼€å‘äººå‘˜ç¦»èŒçš„æƒ…å†µä¸‹, èµ„æ–™ä¸ä¼šä¸¢å¤±?</p></li><li><p>å¤šäººå¼€å‘åŒä¸€ä¸ªé¡¹ç›®, ä»£ç å¦‚ä½•åˆå¹¶åˆ°ä¸€èµ·?</p></li><li><p>å¦‚ä½•è¿½æº¯ä»£ç çš„å†å²çŠ¶æ€? å°†æ¯ä¸€ä¸ªç‰ˆæœ¬å‹ç¼©æ”¾åˆ°ç½‘ç›˜ä¸Šå—?</p></li><li><p>å¦‚ä½•æ§åˆ¶ä»£ç çš„è®¿é—®æƒé™? ä¾‹å¦‚é¡¹ç›®æ ¸å¿ƒç®—æ³•ä¸èƒ½è®©æ–°ç¨‹åºå‘˜ä¿®æ”¹, å¦‚ä½•åš?</p></li></ol><p>ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿå°±æ˜¯è§£å†³è¿™äº›é—®é¢˜çš„ç­”æ¡ˆ</p><h5 id="1-1-2ã€å¸¸ç”¨çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ"><a href="#1-1-2ã€å¸¸ç”¨çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ" class="headerlink" title="1.1.2ã€å¸¸ç”¨çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ"></a>1.1.2ã€å¸¸ç”¨çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ</h5><p>æœ‰ SVN, Gitç­‰</p><h5 id="1-1-3ã€SVN-çš„ä¸€äº›æ¦‚å¿µï¼š"><a href="#1-1-3ã€SVN-çš„ä¸€äº›æ¦‚å¿µï¼š" class="headerlink" title="1.1.3ã€SVN çš„ä¸€äº›æ¦‚å¿µï¼š"></a>1.1.3ã€SVN çš„ä¸€äº›æ¦‚å¿µï¼š</h5><ul><li>**repositoryï¼ˆæºä»£ç åº“ï¼‰:**æºä»£ç ç»Ÿä¸€å­˜æ”¾çš„åœ°æ–¹</li><li>**Checkoutï¼ˆæå–ï¼‰:**å½“ä½ æ‰‹ä¸Šæ²¡æœ‰æºä»£ç çš„æ—¶å€™ï¼Œä½ éœ€è¦ä»repository checkoutä¸€ä»½</li><li>**Commitï¼ˆæäº¤ï¼‰:**å½“ä½ å·²ç»ä¿®æ”¹äº†ä»£ç ï¼Œä½ å°±éœ€è¦Commitåˆ°repository</li><li>**Update (æ›´æ–°):**å½“ä½ å·²ç»Checkoutäº†ä¸€ä»½æºä»£ç ï¼Œ Updateä¸€ä¸‹ä½ å°±å¯ä»¥å’ŒRepositoryä¸Šçš„æºä»£ç åŒæ­¥ï¼Œä½ æ‰‹ä¸Šçš„ä»£ç å°±ä¼šæœ‰æœ€æ–°çš„å˜æ›´</li></ul><p>æ—¥å¸¸å¼€å‘è¿‡ç¨‹å…¶å®å°±æ˜¯è¿™æ ·çš„ï¼ˆå‡è®¾ä½ å·²ç»Checkoutå¹¶ä¸”å·²ç»å·¥ä½œäº†å‡ å¤©ï¼‰ï¼šUpdate(è·å¾—æœ€æ–°çš„ä»£ç ) â€“&gt;ä½œå‡ºè‡ªå·±çš„ä¿®æ”¹å¹¶è°ƒè¯•æˆåŠŸ â€“&gt; Commit(å¤§å®¶å°±å¯ä»¥çœ‹åˆ°ä½ çš„ä¿®æ”¹äº†) ã€‚</p><p>å¦‚æœä¸¤ä¸ªç¨‹åºå‘˜åŒæ—¶ä¿®æ”¹äº†åŒä¸€ä¸ªæ–‡ä»¶å‘¢, SVN å¯ä»¥åˆå¹¶è¿™ä¸¤ä¸ªç¨‹åºå‘˜çš„æ”¹åŠ¨ï¼Œå®é™…ä¸ŠSVNç®¡ç†æºä»£ç æ˜¯ä»¥è¡Œä¸ºå•ä½çš„ï¼Œå°±æ˜¯è¯´ä¸¤ä¸ªç¨‹åºå‘˜åªè¦ä¸æ˜¯ä¿®æ”¹äº†åŒä¸€è¡Œç¨‹åºï¼ŒSVNéƒ½ä¼šè‡ªåŠ¨åˆå¹¶ä¸¤ç§ä¿®æ”¹ã€‚å¦‚æœæ˜¯åŒä¸€è¡Œï¼ŒSVN ä¼šæç¤ºæ–‡ä»¶ Conflict, å†²çªï¼Œéœ€è¦æ‰‹åŠ¨ç¡®è®¤ã€‚</p><h4 id="1-2ã€SVN-çš„ä¸»è¦åŠŸèƒ½"><a href="#1-2ã€SVN-çš„ä¸»è¦åŠŸèƒ½" class="headerlink" title="1.2ã€SVN çš„ä¸»è¦åŠŸèƒ½"></a>1.2ã€SVN çš„ä¸»è¦åŠŸèƒ½</h4><p>ï¼ˆ1ï¼‰ç›®å½•ç‰ˆæœ¬æ§åˆ¶</p><p>CVS åªèƒ½è·Ÿè¸ªå•ä¸ªæ–‡ä»¶çš„å†å², ä¸è¿‡ Subversion å®ä½œäº†ä¸€ä¸ª â€œè™šæ‹Ÿâ€ çš„ç‰ˆæœ¬æ§ç®¡æ–‡ä»¶ç³»ç»Ÿ, èƒ½å¤Ÿä¾æ—¶é—´è·Ÿè¸ªæ•´ä¸ªç›®å½•çš„å˜åŠ¨ã€‚ ç›®å½•å’Œæ–‡ä»¶éƒ½èƒ½è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ã€‚</p><p>ï¼ˆ2ï¼‰çœŸå®çš„ç‰ˆæœ¬å†å²</p><p>è‡ªä»CVSé™åˆ¶äº†æ–‡ä»¶çš„ç‰ˆæœ¬è®°å½•ï¼ŒCVSå¹¶ä¸æ”¯æŒé‚£äº›å¯èƒ½å‘ç”Ÿåœ¨æ–‡ä»¶ä¸Šï¼Œä½†ä¼šå½±å“æ‰€åœ¨ç›®å½•å†…å®¹çš„æ“ä½œï¼Œå¦‚åŒå¤åˆ¶å’Œé‡å‘½åã€‚é™¤æ­¤ä¹‹å¤–ï¼Œåœ¨CVSé‡Œä½ ä¸èƒ½ç”¨æ‹¥æœ‰åŒæ ·åå­—ä½†æ˜¯æ²¡æœ‰ç»§æ‰¿è€ç‰ˆæœ¬å†å²æˆ–è€…æ ¹æœ¬æ²¡æœ‰å…³ç³»çš„æ–‡ä»¶æ›¿æ¢ä¸€ä¸ªå·²ç»çº³å…¥ç³»ç»Ÿçš„æ–‡ä»¶ã€‚åœ¨Subversionä¸­ï¼Œä½ å¯ä»¥å¢åŠ ï¼ˆaddï¼‰ã€åˆ é™¤ï¼ˆdeleteï¼‰ã€å¤åˆ¶ï¼ˆcopyï¼‰å’Œé‡å‘½åï¼ˆrenameï¼‰ï¼Œæ— è®ºæ˜¯æ–‡ä»¶è¿˜æ˜¯ç›®å½•ã€‚æ‰€æœ‰çš„æ–°åŠ çš„æ–‡ä»¶éƒ½ä»ä¸€ä¸ªæ–°çš„ã€å¹²å‡€çš„ç‰ˆæœ¬å¼€å§‹ã€‚</p><p>ï¼ˆ3ï¼‰è‡ªåŠ¨æäº¤</p><p>ä¸€ä¸ªæäº¤åŠ¨ä½œï¼Œä¸æ˜¯å…¨éƒ¨æ›´æ–°åˆ°äº†æ¡£æ¡ˆåº“ä¸­ï¼Œå°±æ˜¯ä¸å®Œå…¨æ›´æ–°ã€‚è¿™å…è®¸å¼€å‘äººå‘˜ä»¥é€»è¾‘åŒºé—´å»ºç«‹å¹¶æäº¤å˜åŠ¨ï¼Œä»¥é˜²æ­¢å½“éƒ¨åˆ†æäº¤æˆåŠŸæ—¶å‡ºç°çš„é—®é¢˜ã€‚</p><p>ï¼ˆ4ï¼‰çº³å…¥ç‰ˆæœ¬æ§ç®¡çš„å…ƒæ•°æ®</p><p>æ¯ä¸€ä¸ªæ–‡ä»¶ä¸ç›®å½•éƒ½é™„æœ‰ä¸€çµ„å±æ€§å…³é”®å­—å¹¶å’Œå±æ€§å€¼ç›¸å…³è”ã€‚ä½ å¯ä»¥åˆ›å»º, å¹¶å„²å­˜ä»»ä½•ä½ æƒ³è¦çš„Key/Valueå¯¹ã€‚ å±æ€§æ˜¯éšç€æ—¶é—´æ¥ä½œç‰ˆæœ¬æ§ç®¡çš„,å°±åƒæ–‡ä»¶å…§å®¹ä¸€æ ·ã€‚</p><p>ï¼ˆ5ï¼‰é€‰æ‹©ä¸åŒçš„ç½‘ç»œå±‚</p><p>Subversion æœ‰æŠ½è±¡çš„æ¡£æ¡ˆåº“å­˜å–æ¦‚å¿µ, å¯ä»¥è®©äººå¾ˆå®¹æ˜“åœ°å®ä½œæ–°çš„ç½‘ç»œæœºåˆ¶ã€‚ Subversion å¯ä»¥ä½œä¸ºä¸€ä¸ªæ‰©å±•æ¨¡å—åµŒå…¥åˆ°Apache HTTP æœåŠ¡å™¨ä¸­ã€‚è¿™ä¸ªä¸ºSubversionæä¾›äº†éå¸¸å…ˆè¿›çš„ç¨³å®šæ€§å’ŒååŒå·¥ä½œèƒ½åŠ›ï¼Œé™¤æ­¤ä¹‹å¤–è¿˜æä¾›äº†è®¸å¤šé‡è¦åŠŸèƒ½: ä¸¾ä¾‹æ¥è¯´, æœ‰èº«ä»½è®¤è¯, æˆæƒ, åœ¨çº¿å‹ç¼©, ä»¥åŠæ–‡ä»¶åº“æµè§ˆç­‰ç­‰ã€‚è¿˜æœ‰ä¸€ä¸ªè½»é‡çº§çš„ç‹¬ç«‹SubversionæœåŠ¡å™¨ï¼Œ ä½¿ç”¨çš„æ˜¯è‡ªå®šä¹‰çš„é€šä¿¡åè®®, å¯ä»¥å¾ˆå®¹æ˜“åœ°é€šè¿‡ ssh ä»¥ tunnel æ–¹å¼ä½¿ç”¨ã€‚</p><p>ï¼ˆ6ï¼‰ä¸€è‡´çš„æ•°æ®å¤„ç†æ–¹å¼</p><p>Subversion ä½¿ç”¨äºŒè¿›åˆ¶å·®å¼‚ç®—æ³•æ¥å¼‚è¡¨ç¤ºæ–‡ä»¶çš„å·®å¼‚, å®ƒå¯¹æ–‡å­—(äººç±»å¯ç†è§£çš„)ä¸äºŒè¿›åˆ¶æ–‡ä»¶(äººç±»æ— æ³•ç†è§£çš„) ä¸¤ç±»çš„æ–‡ä»¶éƒ½ä¸€è§†åŒä»ã€‚ è¿™ä¸¤ç±»çš„æ–‡ä»¶éƒ½åŒæ ·åœ°ä»¥å‹ç¼©å½¢å¼å‚¨å­˜åœ¨æ¡£æ¡ˆåº“ä¸­, è€Œä¸”æ–‡ä»¶å·®å¼‚æ˜¯ä»¥ä¸¤ä¸ªæ–¹å‘åœ¨ç½‘ç»œä¸Šä¼ è¾“çš„ã€‚</p><p>ï¼ˆ7ï¼‰æœ‰æ•ˆçš„åˆ†æ”¯(branch)ä¸æ ‡ç­¾(tag)</p><p>åœ¨åˆ†æ”¯ä¸æ ‡ç­¾ä¸Šçš„æ¶ˆè€—å¹¶ä¸å¿…ä¸€å®šè¦ä¸é¡¹ç›®å¤§å°æˆæ­£æ¯”ã€‚ Subversion å»ºç«‹åˆ†æ”¯ä¸æ ‡ç­¾çš„æ–¹æ³•, å°±åªæ˜¯å¤åˆ¶è¯¥é¡¹ç›®, ä½¿ç”¨çš„æ–¹æ³•å°±ç±»ä¼¼äºç¡¬è¿æ¥ï¼ˆhard-linkï¼‰ã€‚ æ‰€ä»¥è¿™äº›æ“ä½œåªä¼šèŠ±è´¹å¾ˆå°, è€Œä¸”æ˜¯å›ºå®šçš„æ—¶é—´ã€‚</p><p>ï¼ˆ8ï¼‰Hackability</p><p>Subversionæ²¡æœ‰ä»»ä½•çš„å†å²åŒ…è¢±; å®ƒä¸»è¦æ˜¯ä¸€ç¾¤å…±ç”¨çš„ C ç¨‹åºåº“, å…·æœ‰å®šä¹‰å®Œå–„çš„APIã€‚è¿™ä½¿å¾— Subversion ä¾¿äºç»´æŠ¤, å¹¶ä¸”å¯è¢«å…¶å®ƒåº”ç”¨ç¨‹åºä¸ç¨‹åºè¯­è¨€ä½¿ç”¨ã€‚</p><h4 id="1-3ã€å®‰è£…SVNä»“åº“"><a href="#1-3ã€å®‰è£…SVNä»“åº“" class="headerlink" title="1.3ã€å®‰è£…SVNä»“åº“"></a>1.3ã€å®‰è£…SVNä»“åº“</h4><h5 id="1-3-1ã€å®‰è£…SVNæœåŠ¡å™¨"><a href="#1-3-1ã€å®‰è£…SVNæœåŠ¡å™¨" class="headerlink" title="1.3.1ã€å®‰è£…SVNæœåŠ¡å™¨"></a>1.3.1ã€å®‰è£…SVNæœåŠ¡å™¨</h5><p>å®‰è£…VisualSVN Server<a href="https://www.visualsvn.com/server/download/">ä¸‹è½½åœ°å€</a></p><p><img src="/2019/12/10/SVN/image-20191210163958278.png" alt="image-20191210163958278"></p><p>ä¸‹è½½å®Œæ¯•åç‚¹å‡»å®‰è£…ï¼ŒåŒæ„ç”¨æˆ·åè®®</p><p><img src="/2019/12/10/SVN/image-20191210164356133.png" alt="image-20191210164356133"></p><p><img src="/2019/12/10/SVN/image-20191210164554790.png" alt="image-20191210164554790"></p><p><img src="/2019/12/10/SVN/image-20191210164635265.png" alt="image-20191210164635265"></p><p>ç‚¹å‡»ä¸‹ä¸€æ­¥å¯èƒ½å‡ºç°å¦‚ä¸‹çŠ¶å†µï¼ŒåŸå› æ˜¯ï¼šç”±äºå„ç§åŸå› å¯¼è‡´HTTPSåè®®é»˜è®¤ä½¿ç”¨çš„443ç«¯å£è¢«å ç”¨ï¼Œå¯ä»¥æ¢ç”¨å…¶å®ƒç«¯å£ã€è§£å†³443ç«¯å£çš„äº‰ç”¨æˆ–è€…æ¢ç”¨å…¶å®ƒå¦‚HTTPåè®®ç­‰ã€‚è¿™é‡Œç›´æ¥ä½¿ç”¨HTTPSåè®®æ¢ç”¨8443ç«¯å£ã€‚</p><p><img src="/2019/12/10/SVN/image-20191210165143514.png" alt="image-20191210165143514"></p><p><img src="/2019/12/10/SVN/image-20191210165416069.png" alt="image-20191210165416069"></p><p><img src="/2019/12/10/SVN/image-20191210165507110.png" alt="image-20191210165507110"></p><p><img src="/2019/12/10/SVN/image-20191210165547214.png" alt="image-20191210165547214"></p><h5 id="1-3-2ã€æ–°å»ºä»“åº“"><a href="#1-3-2ã€æ–°å»ºä»“åº“" class="headerlink" title="1.3.2ã€æ–°å»ºä»“åº“"></a>1.3.2ã€æ–°å»ºä»“åº“</h5><p><code>Trunkï¼š</code> å­˜æ”¾å¼€å‘çš„ä¸»çº¿ï¼Œå›¢é˜Ÿæˆå‘˜åœ¨å¼€å‘çš„æ—¶å€™ä¸€ç›´è¦ç”¨è¿™ä¸ªåº“ä¸­çš„å†…å®¹</p><p><code>Branchesï¼š</code>å­˜æ”¾æ”¯çº¿å‰¯æœ¬ï¼šå½“é¡¹ç›®ç¨³å®šä»¥åï¼Œå…ˆå‘å¸ƒåˆ°tagsä¸‹ï¼Œå¦‚æœå‘ç°äº†bugï¼Œå†ä»tagsä¸‹æ£€å‡ºåˆ°branchesä¸‹ã€‚åœ¨è¯¥ç‰ˆæœ¬ä¸‹è¿›è¡Œbugçš„ä¿®å¤ï¼ŒæŠŠä¿®å¤å®Œæ¯•çš„ç¨³å®šçš„ç‰ˆæœ¬é‡æ–°å‘å¸ƒåˆ°tagsä¸‹ã€‚</p><p><code>Tagsï¼š</code>å­˜æ”¾æ ‡ç­¾å‰¯æœ¬ï¼Œä¹Ÿå°±æ˜¯å­˜æ”¾ç¨³å®šç‰ˆæœ¬</p><p><img src="/2019/12/10/SVN/image-20191210091559139.png" alt="image-20191210091559139"></p><h5 id="1-3-3ã€æ–°å»ºç”¨æˆ·-amp-ç»„"><a href="#1-3-3ã€æ–°å»ºç”¨æˆ·-amp-ç»„" class="headerlink" title="1.3.3ã€æ–°å»ºç”¨æˆ·&amp;ç»„"></a>1.3.3ã€æ–°å»ºç”¨æˆ·&amp;ç»„</h5><p><img src="/2019/12/10/SVN/image-20191210165818343.png" alt="image-20191210165818343"></p><p><img src="/2019/12/10/SVN/image-20191210165916450.png" alt="image-20191210165916450"></p><h5 id="1-3-4ã€é…ç½®æƒé™"><a href="#1-3-4ã€é…ç½®æƒé™" class="headerlink" title="1.3.4ã€é…ç½®æƒé™"></a>1.3.4ã€é…ç½®æƒé™</h5><p><img src="/2019/12/10/SVN/image-20191210170115155.png" alt="image-20191210170115155"></p><h5 id="1-3-5ã€è®¿é—®ä»“åº“ç®€å•æµ‹è¯•"><a href="#1-3-5ã€è®¿é—®ä»“åº“ç®€å•æµ‹è¯•" class="headerlink" title="1.3.5ã€è®¿é—®ä»“åº“ç®€å•æµ‹è¯•"></a>1.3.5ã€è®¿é—®ä»“åº“ç®€å•æµ‹è¯•</h5><p><img src="/2019/12/10/SVN/image-20191210170602059.png" alt="image-20191210170602059"></p><p>è®¿é—®ç»“æœå¦‚ä¸‹ï¼š</p><p><img src="/2019/12/10/SVN/image-20191210170652117.png" alt="image-20191210170652117"></p><h5 id="1-3-6ã€Linuxç³»ç»Ÿç‰ˆæœ¬å®‰è£…é…ç½®"><a href="#1-3-6ã€Linuxç³»ç»Ÿç‰ˆæœ¬å®‰è£…é…ç½®" class="headerlink" title="1.3.6ã€Linuxç³»ç»Ÿç‰ˆæœ¬å®‰è£…é…ç½®"></a><a href="https://www.runoob.com/svn/svn-tutorial.html">1.3.6ã€Linuxç³»ç»Ÿç‰ˆæœ¬å®‰è£…é…ç½®</a></h5><p>å¤§å¤šæ•° GNU/Linux å‘è¡Œç‰ˆç³»ç»Ÿè‡ªå¸¦äº†Subversion ï¼Œæ‰€ä»¥å®ƒå¾ˆæœ‰å¯èƒ½å·²ç»å®‰è£…åœ¨ä½ çš„ç³»ç»Ÿä¸Šäº†ã€‚å¯ä»¥ä½¿ç”¨ä¸‹é¢å‘½ä»¤æ£€æŸ¥æ˜¯å¦å®‰è£…äº†ã€‚</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">svn <span class="hljs-comment">--version</span><br></code></pre></td></tr></table></figure><p>å¦‚æœ Subversion å®¢æˆ·ç«¯æ²¡æœ‰å®‰è£…ï¼Œå‘½ä»¤å°†æŠ¥å‘Šsvnå‘½ä»¤æ‰¾ä¸åˆ°çš„é”™è¯¯ã€‚</p><figure class="highlight d"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs d">[kongwei<span class="hljs-keyword">@centos6</span> ~]$ svn --<span class="hljs-keyword">version</span><br>bash: svn: command not found<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>yum install subversion å‘½ä»¤</code>æˆ–<code>apt-get install subversionå‘½ä»¤</code>è¿›è¡Œå®‰è£…ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs csharp">[<span class="hljs-meta">kongwei@centos6 root</span>]$ su -<br>å¯†ç ï¼š<br>[<span class="hljs-meta">root@centos6 ~</span>]<span class="hljs-meta"># yum install subversion</span><br>å·²åŠ è½½æ’ä»¶ï¼šfastestmirror, security<br>è®¾ç½®å®‰è£…è¿›ç¨‹<br>Loading mirror speeds <span class="hljs-keyword">from</span> cached hostfile<br> * <span class="hljs-keyword">base</span>: mirrors.aliyun.com<br> * epel: mirrors.neusoft.edu.cn<br> * extras: mirrors.zju.edu.cn<br> * updates: mirrors.aliyun.com<br>è§£å†³ä¾èµ–å…³ç³»<br>--&amp;gt; æ‰§è¡Œäº‹åŠ¡æ£€æŸ¥<br>...<br></code></pre></td></tr></table></figure><p>å®‰è£…æˆåŠŸä¹‹åï¼Œæ‰§è¡Œ svn â€“version å‘½ä»¤ã€‚</p><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs gcode">[root@ce<span class="hljs-symbol">ntos6</span> ~]<span class="hljs-attr"># svn --version</span><br><span class="hljs-attr">svnï¼Œç‰ˆæœ¬ 1</span><span class="hljs-number">.6</span><span class="hljs-number">.11</span> <span class="hljs-comment">(r934486)</span><br>   ç¼–è¯‘äº Aug <span class="hljs-number">17</span> <span class="hljs-number">2015</span>ï¼Œ<span class="hljs-number">08</span>:<span class="hljs-number">37</span>:<span class="hljs-number">43</span><br></code></pre></td></tr></table></figure><p>è‡³æ­¤ï¼Œcentosä¸‹çš„SVNå®‰è£…å®Œæˆã€‚</p><p>é¦–å…ˆï¼Œåœ¨æœåŠ¡ç«¯è¿›è¡ŒSVNç‰ˆæœ¬åº“çš„ç›¸å…³é…ç½®</p><p>æ‰‹åŠ¨æ–°å»ºç‰ˆæœ¬åº“ç›®å½•</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">mkdir <span class="hljs-regexp">/opt/</span>svn<br></code></pre></td></tr></table></figure><p>åˆ©ç”¨svnå‘½ä»¤åˆ›å»ºç‰ˆæœ¬åº“</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">svnadmin create <span class="hljs-regexp">/opt/</span>svn/kongwei<br></code></pre></td></tr></table></figure><p>åˆ›å»ºå®Œç‰ˆæœ¬åº“åä¼šåœ¨/opt/svn/kongwei/confç›®å½• å»ºç«‹é»˜è®¤é…ç½®æ–‡ä»¶ï¼ŒåŒ…æ‹¬svnserve.confã€passwdã€authz é…ç½®ç›¸å…³ç”¨æˆ·å’Œæƒé™ã€‚</p><p>ä½¿ç”¨å‘½ä»¤svnserveå¯åŠ¨æœåŠ¡</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">svnserve -d -r ç›®å½• <span class="hljs-comment">--listen-port ç«¯å£å·</span><br></code></pre></td></tr></table></figure><ul><li><p><strong>-r:</strong> é…ç½®æ–¹å¼å†³å®šäº†ç‰ˆæœ¬åº“è®¿é—®æ–¹å¼ã€‚</p></li><li><p><strong>â€“listen-port:</strong> æŒ‡å®šSVNç›‘å¬ç«¯å£ï¼Œä¸åŠ æ­¤å‚æ•°ï¼Œ<code>SVNé»˜è®¤ç›‘å¬3690</code></p></li><li><p>ç”±äº-r é…ç½®æ–¹å¼çš„ä¸ä¸€æ ·ï¼ŒSVNå¯åŠ¨å°±å¯ä»¥æœ‰ä¸¤ç§ä¸åŒçš„è®¿é—®æ–¹å¼</p></li><li><p>æ–¹å¼ä¸€ï¼š-rç›´æ¥æŒ‡å®šåˆ°ç‰ˆæœ¬åº“(ç§°ä¹‹ä¸º<code>å•åº“svnserveæ–¹å¼</code>)</p></li><li><p>```<br>svnserve -d -r /opt/svn/kongwei</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><br>- åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸€ä¸ªsvnserveåªèƒ½ä¸ºä¸€ä¸ªç‰ˆæœ¬åº“å·¥ä½œã€‚<br><br>- authzé…ç½®æ–‡ä»¶ä¸­å¯¹ç‰ˆæœ¬åº“æƒé™çš„é…ç½®åº”è¿™æ ·å†™ï¼š<br><br>- ```<br>  [groups]<br>  <span class="hljs-attribute">admin</span>=user1<br>  <span class="hljs-attribute">dev</span>=user2<br>  [/]<br>  @<span class="hljs-attribute">admin</span>=rw<br>  <span class="hljs-attribute">user2</span>=r<br></code></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨ç±»ä¼¼è¿™æ ·çš„URLï¼šsvn://192.168.0.1/ã€€å³å¯è®¿é—®runoobç‰ˆæœ¬åº“</p></li><li><p>æ–¹å¼äºŒï¼šæŒ‡å®šåˆ°ç‰ˆæœ¬åº“çš„ä¸Šçº§ç›®å½•(ç§°ä¹‹ä¸º<code>å¤šåº“svnserveæ–¹å¼</code>)</p></li><li><p>```<br>svnserve -d -r /opt/svn</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><br>- è¿™ç§æƒ…å†µï¼Œä¸€ä¸ªsvnserveå¯ä»¥ä¸ºå¤šä¸ªç‰ˆæœ¬åº“å·¥ä½œ<br><br>- é…ç½®æ–‡ä»¶ï¼š<br><br>- è¿›å…¥/opt/svn/kongwei/confç›®å½• ä¿®æ”¹é»˜è®¤é…ç½®æ–‡ä»¶é…ç½®ï¼ŒåŒ…æ‹¬svnserve.confã€passwdã€authz é…ç½®ç›¸å…³ç”¨æˆ·å’Œæƒé™ã€‚<br><br>- authzé…ç½®æ–‡ä»¶ä¸­å¯¹ç‰ˆæœ¬åº“æƒé™çš„é…ç½®åº”è¿™æ ·å†™ï¼š<br><br>- ```<br>  [groups]<br>  <span class="hljs-attribute">admin</span>=user1<br>  <span class="hljs-attribute">dev</span>=user2<br>  [runoob:/]<br>  @<span class="hljs-attribute">admin</span>=rw<br>  <span class="hljs-attribute">user2</span>=r<br>  <br>  [kongwei01:/]<br>  @<span class="hljs-attribute">admin</span>=rw<br>  <span class="hljs-attribute">user2</span>=r<br></code></pre></td></tr></table></figure></li><li><p>å¦‚æœæ­¤æ—¶ä½ è¿˜ç”¨[/]ï¼Œåˆ™è¡¨ç¤ºæ‰€æœ‰åº“çš„æ ¹ç›®å½•ï¼ŒåŒç†ï¼Œ[/src]è¡¨ç¤ºæ‰€æœ‰åº“çš„æ ¹ç›®å½•ä¸‹çš„srcç›®å½•ã€‚</p></li><li><p>ä½¿ç”¨ç±»ä¼¼è¿™æ ·çš„URLï¼šsvn://192.168.0.1/kongweiå³å¯è®¿é—®kongweiç‰ˆæœ¬åº“ã€‚</p></li></ul><h4 id="1-4ã€SVNå®¢æˆ·ç«¯-Tortoisesvnçš„ä½¿ç”¨"><a href="#1-4ã€SVNå®¢æˆ·ç«¯-Tortoisesvnçš„ä½¿ç”¨" class="headerlink" title="1.4ã€SVNå®¢æˆ·ç«¯-Tortoisesvnçš„ä½¿ç”¨"></a>1.4ã€SVNå®¢æˆ·ç«¯-Tortoisesvnçš„ä½¿ç”¨</h4><p><a href="https://www.runoob.com/svn/svn-life-cycle.html">ç”Ÿå‘½å‘¨æœŸ</a>ï¼š</p><p>åˆ›å»ºç‰ˆæœ¬åº“â€“ã€‹æ£€å‡ºâ€“ã€‹æ›´æ–°â€“ã€‹æ‰§è¡Œå˜æ›´â€“ã€‹å¤æŸ¥å˜åŒ–â€“ã€‹ä¿®å¤é”™è¯¯â€“ã€‹è§£å†³å†²çªâ€“ã€‹æäº¤æ›´æ”¹ã€‚</p><p>è¿™é‡Œæœ‰å‡ ä¸ªæ¦‚å¿µè¦å¿…é¡»æŒæ¡ï¼š</p><p><code>checkout</code>â€”&gt;å°†SVNä»“åº“çš„ä»£ç æ‹·è´åˆ°æœ¬åœ°ï¼Œæ¯”å¦‚ä½ ç°åœ¨å‚ä¸ä¸€ä¸ªå›¢é˜Ÿé¡¹ç›®ï¼Œé¡¹ç›®ä»£ç åœ¨ä½ ä¹‹å‰è‚¯å®šå·²ç»å†™äº†å¾ˆå¤šäº†ï¼Œä½ å¯ä»¥é€šè¿‡checkouté¡¹ç›®ä»£ç ï¼Œè·å¾—æ•´ä¸ªé¡¹ç›®ã€‚</p><p><code>update</code>â€”&gt;åœ¨ä½ å†™ä»£ç çš„è¿‡ç¨‹ä¸­ï¼ŒåŒäº‹å¾ˆå¯èƒ½å·²ç»æäº¤è¿‡ä»£ç åˆ°SVNæœåŠ¡å™¨ï¼Œè€Œä½ æœ¬åœ°é¡¹ç›®æ˜¾ç„¶æ²¡æœ‰åŒäº‹æ–°æäº¤çš„ä»£ç ï¼Œä½ å¯ä»¥é€šè¿‡update SVNè·å¾—SVNæœ€æ–°çš„ä»£ç ã€‚å³æ›´æ–°æœ¬åœ°ä»£ç ä¸SVNæœåŠ¡å™¨ä¸Šæœ€æ–°çš„ç‰ˆæœ¬ä¸€è‡´ï¼Œåªè¦åœ¨éœ€è¦æ›´æ–°çš„æ–‡ä»¶å¤¹ä¸Šç‚¹å‡»å³é”®æˆ–è€…åœ¨æ–‡ä»¶ä¸‹ç©ºç™½å¤„ç‚¹å‡»å³é”®ï¼Œé€‰æ‹©â€SVN Updateâ€ (è·å–æŒ‡å®šç‰ˆæœ¬ä¸­çš„å†…å®¹ï¼Œç‚¹å‡»å³é”®æ‰§è¡ŒSVNèœå•ä¸­çš„â€œUpdate to reversionâ€œ)ï¼Œå°±å¯ä»¥äº†ã€‚</p><p><code>commit</code>â€”&gt;å½“ä½ å®Œæˆä¸€éƒ¨åˆ†å¼€å‘åï¼Œä½ å¯ä»¥é€šè¿‡commitæäº¤ä»£ç åˆ°SVNæœåŠ¡å™¨ï¼Œè¿™æ ·åˆ«äººå°±å¯ä»¥è·å¾—ä½ å†™çš„ä»£ç ï¼Œè®°å¾—å…ˆupdateå†commitã€‚</p><h5 id="1-4-1ã€å®‰è£…svnå®¢æˆ·ç«¯"><a href="#1-4-1ã€å®‰è£…svnå®¢æˆ·ç«¯" class="headerlink" title="1.4.1ã€å®‰è£…svnå®¢æˆ·ç«¯"></a>1.4.1ã€å®‰è£…svnå®¢æˆ·ç«¯</h5><p><a href="https://tortoisesvn.net/downloads.zh.html">TortoiseSVNåŠå…¶ä¸­æ–‡è¯­è¨€åŒ…çš„ä¸‹è½½è·¯å¾„</a></p><p><img src="/2019/12/10/SVN/image-20191210171050514.png" alt="image-20191210171050514"></p><p>TortoiseSVN æ˜¯é€šè¿‡å³é”®èœå•ä¸ Windows èµ„æºç®¡ç†å™¨é›†æˆï¼Œæ²¡æœ‰è‡ªå·±çš„çª—å£ç•Œé¢</p><h5 id="1-4-2ã€å®‰è£…TortoiseSVNä¸­æ–‡è¯­è¨€åŒ…"><a href="#1-4-2ã€å®‰è£…TortoiseSVNä¸­æ–‡è¯­è¨€åŒ…" class="headerlink" title="1.4.2ã€å®‰è£…TortoiseSVNä¸­æ–‡è¯­è¨€åŒ…"></a>1.4.2ã€å®‰è£…TortoiseSVNä¸­æ–‡è¯­è¨€åŒ…</h5><p>è¿è¡ŒLanguagePack_1.6.16.21511-x64-zh_CN.msiæ±‰åŒ–</p><p>æ¡Œé¢ç©ºç™½çš„åœ°æ–¹ç‚¹å‡»å³é”®ï¼Œsvnï¼Œè®¾ç½®</p><p><img src="/2019/12/10/SVN/image-20191210092535433.png" alt="image-20191210092535433"></p><h5 id="1-4-3ã€æ–‡ä»¶å¯¼å…¥"><a href="#1-4-3ã€æ–‡ä»¶å¯¼å…¥" class="headerlink" title="1.4.3ã€æ–‡ä»¶å¯¼å…¥"></a>1.4.3ã€æ–‡ä»¶å¯¼å…¥</h5><p>è¿›å…¥æ¬²å¯¼å…¥æ–‡ä»¶çš„æ–‡ä»¶å¤¹å³é”®</p><p><img src="/2019/12/10/SVN/image-20191210200520012.png" alt="image-20191210200520012"></p><p>é”®å…¥è¦è®¿é—®çš„ä»“åº“åœ°å€ï¼š</p><p><img src="/2019/12/10/SVN/image-20191210200656780.png" alt="image-20191210200656780"></p><p>æŠŠæ–‡ä»¶æ·»åŠ åˆ°SVNåº“ä¸­è¿›è¡Œç®¡ç†ï¼š</p><p><img src="/2019/12/10/SVN/image-20191210200827528.png" alt="image-20191210200827528"></p><h5 id="1-4-4ã€æ£€å‡ºæ–‡ä»¶"><a href="#1-4-4ã€æ£€å‡ºæ–‡ä»¶" class="headerlink" title="1.4.4ã€æ£€å‡ºæ–‡ä»¶"></a>1.4.4ã€æ£€å‡ºæ–‡ä»¶</h5><p><code>checkout</code>â€”&gt;å°†SVNä»“åº“çš„ä»£ç æ‹·è´åˆ°æœ¬åœ°ï¼Œæ¯”å¦‚ä½ ç°åœ¨å‚ä¸ä¸€ä¸ªå›¢é˜Ÿé¡¹ç›®ï¼Œé¡¹ç›®ä»£ç åœ¨ä½ ä¹‹å‰è‚¯å®šå·²ç»å†™äº†å¾ˆå¤šäº†ï¼Œä½ å¯ä»¥é€šè¿‡checkouté¡¹ç›®ä»£ç ï¼Œè·å¾—æ•´ä¸ªé¡¹ç›®ã€‚</p><p>åœ¨æŸä¸ªæ–‡ä»¶å¤¹ä½ç½®ï¼Œç›´æ¥å³é”®æ£€å‡º</p><p><img src="/2019/12/10/SVN/image-20191210173332323.png" alt="image-20191210173332323"></p><p><img src="/2019/12/10/SVN/image-20191210173447183.png" alt="image-20191210173447183"></p><p><img src="/2019/12/10/SVN/image-20191210093213531.png" alt="image-20191210173537683"></p><p>æ‰§è¡Œå®Œä¸Šè¿°æ“ä½œä»¥ådemoä»“åº“é‡Œçš„å†…å®¹å°±è¢«ä¸‹è½½åˆ°äº†user1ä¸­ã€‚</p><p>æ³¨æ„ï¼š**.svn**è¿™ä¸ªéšè—ç›®å½•è®°å½•ç€ä¸¤é¡¹å…³é”®çš„ä¿¡æ¯: å·¥ä½œæ–‡ä»¶çš„åŸºå‡†ç‰ˆæœ¬å’Œä¸€ä¸ªæœ¬åœ°å‰¯æœ¬æœ€åæ›´æ–°çš„æ—¶é—´æˆ³ã€‚åƒä¸‡ä¸è¦æ‰‹å·¥ä¿®æ”¹æˆ–åˆ é™¤è¿™ä¸ª .svnéšè—ç›®å½•å’Œé‡Œé¢çš„æ–‡ä»¶ï¼ï¼ï¼ </p><p>å¦åˆ™å°†ä¼šå¯¼è‡´ä½ æœ¬åœ°çš„å·¥ä½œæ‹·è´ ï¼ˆé™æ€è§†å›¾ï¼‰è¢«ç ´åï¼Œæ— æ³•å†è¿›è¡Œæ“ä½œã€‚</p><h5 id="1-4-5ã€åˆ›å»ºæ–°æ–‡ä»¶"><a href="#1-4-5ã€åˆ›å»ºæ–°æ–‡ä»¶" class="headerlink" title="1.4.5ã€åˆ›å»ºæ–°æ–‡ä»¶"></a>1.4.5ã€åˆ›å»ºæ–°æ–‡ä»¶</h5><p>æ–°å»ºä¸€ä¸ªtxtæ–‡ä»¶ï¼Œâ€œæ–°å»ºæ–‡æœ¬æ–‡æ¡£.txtâ€</p><p>æˆ‘ä»¬åˆ©ç”¨svnæŠŠ â€æ–°å»ºæ–‡æœ¬æ–‡æ¡£.txt â€œ æ·»åŠ åˆ°ç‰ˆæœ¬æ§åˆ¶</p><p>å…ˆè¦æ ‡è®°æ–‡ä»¶çŠ¶æ€ï¼š</p><p><img src="/2019/12/10/SVN/image-20191210174443095.png" alt="image-20191210174443095"></p><p>æ·»åŠ å®Œæ¯•å</p><p><img src="/2019/12/10/SVN/image-20191210192304365.png" alt="image-20191210192304365"></p><p>åˆ©ç”¨svn Commitä¸Šä¼ åˆ°æœåŠ¡å™¨</p><p><img src="/2019/12/10/SVN/image-20191210192450630.png" alt="image-20191210192450630"></p><p><img src="/2019/12/10/SVN/image-20191210192622829.png" alt="image-20191210192622829"></p><h5 id="1-4-6ã€ä¿®æ”¹-â€œæ–°å»ºæ–‡æœ¬æ–‡æ¡£-txtæ–‡ä»¶â€"><a href="#1-4-6ã€ä¿®æ”¹-â€œæ–°å»ºæ–‡æœ¬æ–‡æ¡£-txtæ–‡ä»¶â€" class="headerlink" title="1.4.6ã€ä¿®æ”¹  â€œæ–°å»ºæ–‡æœ¬æ–‡æ¡£.txtæ–‡ä»¶â€"></a>1.4.6ã€ä¿®æ”¹  â€œæ–°å»ºæ–‡æœ¬æ–‡æ¡£.txtæ–‡ä»¶â€</h5><p>åœ¨user2ä¸­åˆ©ç”¨ä¸Šé¢çš„çŸ¥è¯†ï¼Œåˆ›å»ºä»“åº“æ£€å‡ºæ–‡ä»¶ã€‚è¿™æ ·ï¼Œuser2çš„æœ¬åœ°ä»“åº“ä¸­ä¹Ÿæœ‰ â€œæ–°å»ºæ–‡æœ¬æ–‡æ¡£.txtæ–‡ä»¶â€äº†ã€‚</p><p><img src="/2019/12/10/SVN/image-20191210193009385.png" alt="image-20191210193009385"></p><p>æˆ‘ä»¬åœ¨User2ä¸­ä¿®æ”¹ â€œæ–°å»ºæ–‡æœ¬æ–‡æ¡£.txtæ–‡ä»¶â€</p><p>è¿™æ—¶æˆ‘ä»¬å‘ç° user2ä¸­çš„a.txt æ–‡ä»¶çš„å›¾æ ‡å‘ç”Ÿäº†å˜åŒ–ï¼š</p><p><img src="/2019/12/10/SVN/image-20191210193217711.png" alt="image-20191210193217711"></p><p>æˆ‘ä»¬åœ¨user2å†æ‰§è¡Œcommitæ“ä½œï¼š</p><p><img src="/2019/12/10/SVN/image-20191210193442560.png" alt="image-20191210193442560"></p><p>æˆ‘ä»¬åœ¨user1æ‰§è¡Œupdateæ“ä½œï¼š</p><p><img src="/2019/12/10/SVN/image-20191210193730368.png" alt="image-20191210193730368"></p><p>æˆ‘ä»¬å¯ä»¥åœ¨user1æ–‡ä»¶å¤¹çœ‹åˆ°ä¿®æ”¹åçš„   â€æ–°å»ºæ–‡æœ¬æ–‡æ¡£.txtâ€œ   æ–‡ä»¶äº†ã€‚</p><p><img src="/2019/12/10/SVN/image-20191210193848021.png" alt="image-20191210193848021"></p><h5 id="1-4-7ã€åˆ é™¤æ–‡ä»¶"><a href="#1-4-7ã€åˆ é™¤æ–‡ä»¶" class="headerlink" title="1.4.7ã€åˆ é™¤æ–‡ä»¶"></a>1.4.7ã€åˆ é™¤æ–‡ä»¶</h5><p>ä¸ä»…ä»…æ˜¯æœ¬åœ°åˆ é™¤æ–‡ä»¶ï¼Œè€Œæ˜¯è®©æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶åŒæ­¥åˆ é™¤ã€‚</p><p>æˆ‘ä»¬å…ˆæŠŠuser1 ä¸­çš„   â€æ–°å»ºæ–‡æœ¬æ–‡æ¡£.txtâ€œ   åˆ é™¤ï¼Œç„¶åæ‰§è¡Œcommitæ“ä½œã€‚</p><p><img src="/2019/12/10/SVN/image-20191210194238244.png" alt="image-20191210194238244"></p><p>æ³¨æ„æ“ä½œçŠ¶æ€æ˜¯<strong>missing</strong>ï¼Œå’Œæ–°å¢ä¸€æ ·æˆ‘ä»¬éœ€è¦<strong>ä¿®æ”¹å®ƒçš„çŠ¶æ€</strong></p><p><img src="/2019/12/10/SVN/image-20191210194426104.png" alt="image-20191210194426104"></p><p><img src="/2019/12/10/SVN/image-20191210194714364.png" alt="image-20191210194714364"></p><p>ç„¶åå†è¿›è¡Œç¡®è®¤æäº¤ã€‚</p><p>æ­¤æ—¶æˆ‘ä»¬åœ¨å›åˆ°user2ä¸­æ›´æ–°é¡¹ç›®ï¼š</p><p><img src="/2019/12/10/SVN/image-20191210194946765.png" alt="image-20191210194946765"></p><p>â€æ–°å»ºæ–‡æœ¬æ–‡æ¡£.txtâ€œ    æ–‡ä»¶ä¸€åŒè¢«åˆ é™¤ã€‚</p><h5 id="1-4-8ã€æ¢å¤è¢«åˆ é™¤çš„æ–‡ä»¶"><a href="#1-4-8ã€æ¢å¤è¢«åˆ é™¤çš„æ–‡ä»¶" class="headerlink" title="1.4.8ã€æ¢å¤è¢«åˆ é™¤çš„æ–‡ä»¶"></a>1.4.8ã€æ¢å¤è¢«åˆ é™¤çš„æ–‡ä»¶</h5><p>ä½¿ç”¨ç‰ˆæœ¬æ§åˆ¶å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ˜“çš„æ¢å¤è¢«è¯¯åˆ çš„æ–‡ä»¶</p><p>åœ¨User1 ä¸­é€‰æ‹©<strong>æ›´æ–°è‡³ç‰ˆæœ¬</strong>â€¦</p><p><img src="/2019/12/10/SVN/image-20191210195258450.png" alt="image-20191210195258450"></p><p>å¦‚æœæˆ‘ä»¬è®°ä¸æ¸…ç‰ˆæœ¬ï¼Œå¯ä»¥é€šè¿‡<strong>æ—¥å¿—è¿›è¡ŒæŸ¥è¯¢</strong>ï¼Œæ‰¾åˆ°éœ€è¦æ¢å¤å†å²ç‰ˆæœ¬ï¼š</p><p><img src="/2019/12/10/SVN/image-20191210195513070.png" alt="image-20191210195513070"></p><p><img src="/2019/12/10/SVN/image-20191210195723374.png" alt="image-20191210195723374"></p><h5 id="1-4-9ã€åˆ†æ”¯"><a href="#1-4-9ã€åˆ†æ”¯" class="headerlink" title="1.4.9ã€åˆ†æ”¯"></a>1.4.9ã€åˆ†æ”¯</h5><p>é¡¹ç›®ä¸­ä¸ºä½•è¦åˆ›å»ºåˆ†æ”¯ï¼ŒåŠåˆå¹¶ï¼Ÿ</p><p>æ¯”å¦‚æˆ‘ç°åœ¨é¡¹ç›®æ‰€æœ‰çš„æ–‡ä»¶æ”¾åœ¨ä¸»å¹²ä¸Š(trunk)ä¸­ï¼Œç”±äºéœ€æ±‚çš„å˜æ›´ï¼Œéœ€è¦å¢åŠ æ–°çš„éœ€æ±‚ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸»å¹²ä¸Šè¿˜è¦ç»§ç»­å¾€ä¸‹å¼€å‘ï¼Œåœ¨æ­¤æˆ‘ä»¬å¯ä»¥æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œæ¥åšå¢åŠ æ–°çš„éœ€æ±‚é‚£ä¸€å—ï¼Œä¸»å¹²ä¸Šç»§ç»­å¼€å‘ï¼Œç­‰åˆ†æ”¯ä¸Šä»£ç æ²¡æœ‰é—®é¢˜çš„æ—¶å€™ï¼Œå†åˆå¹¶åˆ°ä¸»å¹²ä¸Šæ¥ã€‚</p><p>åˆ›å»ºåˆ†æ”¯çš„æœ€å¤§çš„ç›®çš„å°±æ˜¯è·Ÿä¸»çº¿è¿›è¡Œå¹¶è¡Œå¼€å‘æ—¶å€™ä¸å½±å“ä¸»çº¿çš„å¼€å‘ã€‚</p><p><strong>å¦‚ä½•æ“ä½œï¼Ÿ</strong></p><p>å‡å¦‚æˆ‘æœ¬åœ°æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹SVNDemoä¸‹æœ‰2ä¸ªæ–‡ä»¶å¤¹trunk(å­˜æ”¾ä¸»å¹²ä¸Šçš„ä»£ç )å’Œbranch(å­˜æ”¾åˆ†æ”¯ä¸Šçš„ä»£ç )ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="/2019/12/10/SVN/image-20191210210727941.png" alt="image-20191210210727941"></p><p><strong>1ã€å…ˆæå–ä¸»å¹²ä»£ç åˆ°trunkæ–‡ä»¶å¤¹</strong></p><p><img src="/2019/12/10/SVN/image-20191210211058403.png" alt="image-20191210211058403"></p><p><img src="/2019/12/10/SVN/image-20191210211203767.png" alt="image-20191210211203767"></p><p><strong>2ã€æ–°å»ºåˆ†æ”¯</strong></p><p> ä»trunkï¼ˆä¸»å¹²ä¸Šï¼‰åˆ›å»ºåˆ†æ”¯(branch)æ­¥éª¤å¦‚ä¸‹ï¼š</p><p>å³é”®trunk â€“&gt; branch/Tag å¦‚ä¸‹å›¾ï¼š</p><p><img src="/2019/12/10/SVN/image-20191210211522739.png" alt="image-20191210211522739"></p><p>å¼¹å‡ºå¯¹è¯æ¡†ï¼Œå¡«å…¥æ–°åˆ†æ”¯è·¯å¾„ï¼š</p><p><img src="/2019/12/10/SVN/image-20191210211712652.png" alt="image-20191210211712652"></p><p>ç¡®è®¤ï¼š</p><p><img src="/2019/12/10/SVN/image-20191210211828529.png" alt="image-20191210211828529"></p><p>æŸ¥çœ‹ï¼š</p><p>åœ¨VisualSVN ServalæœåŠ¡å™¨ä¸Šæ–°å¢NewBranchï¼Œæ˜¯ä»å¦‚ä¸ŠæœåŠ¡å™¨Ant_Nestä¸Šçš„æ–‡ä»¶æ‹·è´ä¸€ä»½çš„</p><p><img src="/2019/12/10/SVN/image-20191210212044298.png" alt="image-20191210212044298"></p><p><strong>3ã€ç°åœ¨æˆ‘ä»¬å¯ä»¥å†æ¥çœ‹çœ‹æœ¬åœ°branchæ–‡ä»¶å¤¹äº†ï¼Œæˆ‘ç°åœ¨ç›´æ¥è¿›å…¥branchæ–‡ä»¶ä¸‹</strong></p><p>å³é”® â€“&gt; Chenckoutä¸‹ï¼Œå°±å¯ä»¥æŠŠNewBranchä¸‹çš„æ‰€æœ‰æ–‡ä»¶æå–å‡ºæ¥äº†ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="/2019/12/10/SVN/image-20191210212502331.png" alt="image-20191210212502331"></p><p><img src="/2019/12/10/SVN/image-20191210212635660.png" alt="image-20191210212635660"></p><p>å¯¹æœ¬åœ°branchæ–‡ä»¶å¤¹ å³é”®â€“&gt; updateå³å¯ï¼Œå°±å¯ä»¥æ›´æ–°åˆ°åˆ†æ”¯ä»£ç </p><p><strong>4ã€åˆå¹¶åˆ†æ”¯åˆ°ä¸»å¹²</strong></p><p>æ¯”å¦‚æˆ‘ç°åœ¨å¯¹branchåˆ†æ”¯ä¸Šæ–°å¢    â€œæ–°å»ºæ–‡æœ¬æ–‡æ¡£.txtâ€   æ–‡ä»¶ï¼Œç„¶åæäº¤ä¸Šå»ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="/2019/12/10/SVN/image-20191210213302464.png" alt="image-20191210213302464"></p><p>æˆ‘ç°åœ¨æƒ³æŠŠåˆ†æ”¯ä¸Šçš„ä»£ç    â€œæ–°å»ºæ–‡æœ¬æ–‡æ¡£.txtâ€   åˆå¹¶åˆ°ä¸»å¹²ä¸Štrunkï¼Œç°åœ¨è¦æ€ä¹ˆåˆå¹¶å‘¢ï¼Ÿæ­¥éª¤å¦‚ä¸‹ï¼š</p><p>å›åˆ°æˆ‘ä»¬åˆšåˆšçš„ä¸»å¹²ï¼ˆtrunkï¼‰æ–‡ä»¶å¤¹ä¸‹ï¼Œé¼ æ ‡å³é”®è¯¥æ–‡ä»¶å¤¹ â€“&gt; TortoiseSVN â€“&gt; Merge å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="/2019/12/10/SVN/image-20191210213501736.png" alt="image-20191210213501736"></p><p>å¼¹çª—ï¼š</p><p><img src="/2019/12/10/SVN/image-20191210213814603.png" alt="image-20191210213814603"></p><p><img src="/2019/12/10/SVN/image-20191210214037444.png" alt="image-20191210214037444"></p><p><img src="/2019/12/10/SVN/image-20191210214129993.png" alt="image-20191210214129993"></p><p>å› ä¸ºæœåŠ¡ç«¯çš„<strong>å†å²åˆ›å»ºä¸»å¹²å’Œåˆ†æ”¯ä¸å½“ï¼ŒäºŒè€…äº§ç”Ÿä¸Šä¸‹çº§å…³ç³»</strong>ï¼Œåœ¨ä¿®æ”¹åˆ†æ”¯å†…å®¹å¹¶æäº¤åï¼Œå¦‚æœæ²¡æœ‰æ›´æ–°ä¸»å¹²å°±è¿›è¡Œåˆå¹¶æ“ä½œå°±ä¼šäº§ç”Ÿå¦‚ä¸‹çš„æ ‘å†²çªï¼š</p><p><img src="/2019/12/10/SVN/image-20191210214902189.png" alt="image-20191210214902189"></p><p><img src="/2019/12/10/SVN/image-20191210215345663.png" alt="image-20191210215345663"></p><p><strong>6ã€åˆå¹¶ä¸»å¹²åˆ°åˆ†æ”¯</strong></p><p>å¦‚æœä¸»å¹²ä¸Šæœ‰ä¸€äº›æ›´æ–°ï¼Œæ¯”å¦‚è¯´jaråŒ…æ›´æ–°ç­‰ç­‰ï¼Œé‚£ä¹ˆè¿™äº›è¦æ›´æ–°åˆ°åˆ†æ”¯ä¸Šå»ï¼Œå¦‚ä½•æ“ä½œå‘¢ï¼Ÿæ¯”å¦‚æˆ‘ç°åœ¨åœ¨ä¸»å¹²ä¸Šæ–°å»ºä¸€ä¸ª  â€æ–°å»ºæ–‡æœ¬æ–‡æ¡£(2).txtâ€œ  æ–‡ä»¶ï¼Œæ¯”å¦‚å¦‚ä¸‹ï¼š</p><p>trunkæ·»åŠ å¹¶æäº¤æ–‡ä»¶    â€æ–°å»ºæ–‡æœ¬æ–‡æ¡£(2).txtâ€œ  </p><p><img src="/2019/12/10/SVN/image-20191210215614630.png" alt="image-20191210215614630"></p><p>å½“å‰åˆ†æ”¯ç›®å½•å†…å®¹å¦‚ä¸‹ï¼š</p><p><img src="/2019/12/10/SVN/image-20191210215853622.png" alt="image-20191210215853622"></p><p>åœ¨åˆ†æ”¯ç‚¹å‡»branch â€“&gt; å³é”®TortoiseSVN â€“&gt; Merge å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="/2019/12/10/SVN/image-20191210220049308.png" alt="image-20191210220049308"></p><p><img src="/2019/12/10/SVN/image-20191210220527393.png" alt="image-20191210220527393"></p><h5 id="1-4-10ã€è§£å†³å†²çª"><a href="#1-4-10ã€è§£å†³å†²çª" class="headerlink" title="1.4.10ã€è§£å†³å†²çª"></a>1.4.10ã€è§£å†³å†²çª</h5><p>ä¸ºä»€ä¹ˆä¼šäº§ç”Ÿå†²çªä»£ç å‘¢ï¼ŸåŸå› å¾ˆç®€å•å°±æ˜¯å› ä¸ºä¸åŒçš„äººï¼ŒåŒæ—¶ä¿®æ”¹äº†åŒä¸€ä¸ªæ–‡ä»¶çš„åŒä¸€ä¸ªåœ°æ–¹ï¼Œè¿™æ—¶å€™ï¼Œä»–æäº¤äº†ï¼Œæˆ‘æ²¡æœ‰æäº¤ï¼Œæˆ‘å°±æäº¤ä¸äº†ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬è¦è¿›è¡Œå…ˆæ›´æ–°ï¼Œç„¶ååœ¨è¿›è¡Œæäº¤å³å¯ï¼Œé‚£å¦‚æœäº§ç”Ÿå†²çªï¼Œä¼šç”Ÿæˆå¦‚ä¸Š3ä¸ªæ–‡ä»¶ã€‚ </p><p>æ¡ˆä¾‹ï¼š</p><p>äº§ç”Ÿå†²çªSVNDemoæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºuser1å’Œuser2æ–‡ä»¶å¤¹ï¼Œä¸¤ä¸ªæ–‡ä»¶å¤¹<strong>æ£€å‡ºï¼ˆcheckoutï¼‰</strong>åŒä¸€é¡¹ç›®ï¼Œå„è‡ªä¿®æ”¹åŒä¸€æ–‡ä»¶çš„å†…å®¹ï¼Œå„è‡ªæäº¤å‰éƒ½ä¸æ›´æ–°å†…å®¹ï¼š</p><p><img src="/2019/12/10/SVN/image-20191210223120590.png" alt="image-20191210223120590"></p><p>user1å…ˆæäº¤ï¼š</p><p><img src="/2019/12/10/SVN/image-20191210223416362.png" alt="image-20191210223416362"></p><p>user2åœ¨æäº¤ï¼šäº§ç”Ÿå†²çª</p><p><img src="/2019/12/10/SVN/image-20191210223513139.png" alt="image-20191210223513139"></p><p><img src="/2019/12/10/SVN/image-20191210224145486.png" alt="image-20191210224145486"></p><p><img src="/2019/12/10/SVN/image-20191210224550424.png" alt="image-20191210224550424"></p><p>å¯¹äºæ¯ä¸ªå†²çªçš„æ–‡ä»¶Subversionåœ¨ä½ çš„ç›®å½•ä¸‹æ”¾ç½®äº†ä¸‰ä¸ªæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š<strong>ï¼ˆåç¼€.r14å’Œ.r15ä¸ºç‰ˆæœ¬åŒºåˆ«ï¼‰</strong></p><p><img src="/2019/12/10/SVN/image-20191210225655087.png" alt="image-20191210225655087"></p><p>è§£å†³æ–¹æ¡ˆï¼š</p><p>1ã€ä½¿ç”¨revert(å›æ»š)æ“ä½œï¼Œè¯¥æ“ä½œè¡¨ç¤ºç”¨æˆ·æ”¾å¼ƒè‡ªå·±çš„æ›´æ–°ä»£ç ï¼Œç„¶åç›´æ¥æäº¤ï¼Œè¿™ä¸ªæ—¶å€™ä½ çš„ä»£ç å°±ä¼šä½¿æœåŠ¡å™¨ä¸Šæœ€æ–°çš„ä»£ç ï¼Œå³Aç”¨æˆ·æäº¤çš„æ–°ä»£ç ï¼Œä½ çš„ä»£ç ä¸ä¼šè¢«æäº¤ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="/2019/12/10/SVN/image-20191210230932749.png" alt="image-20191210230932749"></p><p><img src="/2019/12/10/SVN/image-20191210231033429.png" alt="image-20191210231033429"></p><p>2ã€é€‰æ‹©æ–‡ä»¶-&gt;å³é”®Editconfictsï¼šè¿™ç§æ–¹æ³•éœ€è¦<strong>å†²çªåŒæ–¹ç»è¿‡åå•†</strong>ä¹‹åå°†ä»£ç æ›´æ”¹ç»Ÿä¸€ä¹‹åå†æäº¤ã€‚ä¸ä»…è§£å†³äº†å†²çªè€Œä¸”è¿˜ä¿è¯äº†ä»£ç æ˜¯æ­£ç¡®çš„ï¼Œå› ä¸ºåªæœ‰ä¸€æ–¹çš„ä»£ç è¢«æäº¤ï¼š</p><p><img src="/2019/12/10/SVN/image-20191210232141891.png" alt="image-20191210232141891"></p><p><img src="/2019/12/10/SVN/image-20191210232352963.png" alt="image-20191210232352963"></p><p>çŠ¶æ€ç”±<strong>å†²çª</strong>å˜æˆ<strong>ä¿®æ”¹ï¼š</strong></p><p><img src="/2019/12/10/SVN/image-20191210232538468.png" alt="image-20191210232538468"></p><h5 id="1-4-11ã€å°ç»“"><a href="#1-4-11ã€å°ç»“" class="headerlink" title="1.4.11ã€å°ç»“"></a>1.4.11ã€å°ç»“</h5><p>SVNç®€å•ä½¿ç”¨: SVNåŸºæœ¬æ“ä½œ</p><p>å·¥ä½œä¸­æœ€å¸¸ç”¨çš„ SVN æ“ä½œ</p><ul><li>â€‹    æ£€å‡º â€“ SVN Checkout : ç¬¬ä¸€æ¬¡ä» SVN æœåŠ¡å™¨ä¸‹è½½ç‰ˆæœ¬åº“æ•°æ®</li><li>â€‹    æ›´æ–° â€“ SVN Update : å®¢æˆ·ç«¯ä» SVN æœåŠ¡å™¨ä¸‹è½½æœ€æ–°çš„ç‰ˆæœ¬</li><li>â€‹    æäº¤ â€“ SVN Commit : å®¢æˆ·ç«¯å°†æ”¹åŠ¢ä¸Šä¼ åˆ° SVN æœåŠ¡å™¨</li><li>â€‹    å¢åŠ  â€“ Add : å°†æ–°æ–‡ä»¶æˆ’æ–‡ä»¶å¤¹çº³å…¥ SVN æ§åˆ¶ä¹‹ä¸‹</li><li>â€‹    è¿˜åŸ â€“ Revert : æ”¾å¼ƒæœ¬åœ°ä¿®æ”¹, å°†æ•°æ®æ¢å¤åˆ°ä¹‹å‰çš„ç‰ˆæœ¬çŠ¶æ€</li></ul><h3 id="2ã€Eclipseä¸­ä½¿ç”¨SVN"><a href="#2ã€Eclipseä¸­ä½¿ç”¨SVN" class="headerlink" title="2ã€Eclipseä¸­ä½¿ç”¨SVN"></a>2ã€Eclipseä¸­ä½¿ç”¨SVN</h3><p>åœ¨Eclipseä¸­é€šè¿‡æ’ä»¶ä½¿ç”¨SVN</p><p><strong>æ’ä»¶å®‰è£…ï¼š</strong></p><p>æŠŠæ–‡ä»¶æ·»åŠ åˆ°Eclipseçš„dropinsæ–‡ä»¶å¤¹ä¸­ï¼Œé‡å¯Eclipseå³å¯</p><p><img src="/2019/12/10/SVN/image-20191210095204957.png" alt="image-20191210095204957"></p><p><strong>åœ¨çº¿å®‰è£…ï¼š</strong></p><p>ä¹Ÿå¯ä½¿ç”¨åœ¨çº¿å®‰è£…çš„æ–¹å¼ä¸ºEclipseæ·»åŠ SVNæ’ä»¶</p><p>æ‰“å¼€Eclipse-&gt;Help-&gt;Install New Softwareâ€¦</p><p><img src="/2019/12/10/SVN/image-20191210095441246.png" alt="image-20191210095441246"></p><p>å…¶ä¸­<strong><a href="http://subclipse.tigris.org/update_1.10.x">http://subclipse.tigris.org/update_1.10.x</a></strong>æ˜¯æœ€æ–°ç‰ˆæœ¬çš„SVNæ’ä»¶çš„ä¸‹è½½ç«™ç‚¹ã€subclipseæ˜¯Eclipseçš„SVNæ’ä»¶ã€‘ã€‚</p><p><img src="/2019/12/10/SVN/image-20191210095540977.png" alt="image-20191210095540977"></p><p>ä¸‹ä¸€æ­¥</p><p><img src="/2019/12/10/SVN/image-20191210095618932.png" alt="image-20191210095618932"></p><p>ä¸‹ä¸€æ­¥ é€‰æ‹©åŒæ„å®‰è£…</p><p><img src="/2019/12/10/SVN/image-20191210095746998.png" alt="image-20191210095746998"></p><p>ç‚¹å‡»ã€Finishã€‘æŒ‰é’®å¼€å§‹å®‰è£…SVNæ’ä»¶</p><p>å®‰è£…è¿‡ç¨‹ä¸­å¼¹å‡ºè­¦å‘Šæ¡†ï¼Œä¸ç”¨ç†ä¼šï¼Œç›´æ¥ç‚¹å‡»ã€OKã€‘æŒ‰é’®ç»§ç»­å®‰è£…</p><p>å®‰è£…å®Œæˆä¹‹åéœ€è¦é‡å¯Eclipseï¼Œç‚¹å‡»ã€Yesã€‘æŒ‰é’®é‡å¯Eclipseå³å¯ã€‚</p><p><strong>æŸ¥çœ‹å®‰è£…å¥½çš„SVNæ’ä»¶</strong></p><p><img src="/2019/12/10/SVN/image-20191210100828986.png" alt="image-20191210100828986"></p><h4 id="2-1ã€é¡¹ç›®æ·»åŠ åˆ°SVNä¸­"><a href="#2-1ã€é¡¹ç›®æ·»åŠ åˆ°SVNä¸­" class="headerlink" title="2.1ã€é¡¹ç›®æ·»åŠ åˆ°SVNä¸­"></a>2.1ã€é¡¹ç›®æ·»åŠ åˆ°SVNä¸­</h4><h5 id="2-1-1ã€æ–°å»ºé¡¹ç›®ï¼Œå¦‚ä¸‹æ“ä½œï¼š"><a href="#2-1-1ã€æ–°å»ºé¡¹ç›®ï¼Œå¦‚ä¸‹æ“ä½œï¼š" class="headerlink" title="2.1.1ã€æ–°å»ºé¡¹ç›®ï¼Œå¦‚ä¸‹æ“ä½œï¼š"></a>2.1.1ã€æ–°å»ºé¡¹ç›®ï¼Œå¦‚ä¸‹æ“ä½œï¼š</h5><p><img src="/2019/12/10/SVN/image-20191210101011113.png" alt="image-20191210101011113"></p><h5 id="2-1-2ã€é€‰æ‹©SVN"><a href="#2-1-2ã€é€‰æ‹©SVN" class="headerlink" title="2.1.2ã€é€‰æ‹©SVN"></a>2.1.2ã€é€‰æ‹©SVN</h5><p><img src="/2019/12/10/SVN/image-20191210101134344.png" alt="image-20191210101134344"></p><h5 id="2-1-3ã€é€‰æ‹©SVNä»“åº“åœ°å€çš„ä½ç½®ï¼š"><a href="#2-1-3ã€é€‰æ‹©SVNä»“åº“åœ°å€çš„ä½ç½®ï¼š" class="headerlink" title="2.1.3ã€é€‰æ‹©SVNä»“åº“åœ°å€çš„ä½ç½®ï¼š"></a>2.1.3ã€é€‰æ‹©SVNä»“åº“åœ°å€çš„ä½ç½®ï¼š</h5><p><img src="/2019/12/10/SVN/image-20191210101228328.png" alt="image-20191210101228328"></p><p><img src="/2019/12/10/SVN/image-20191210101303735.png" alt="image-20191210101303735"></p><p><img src="/2019/12/10/SVN/image-20191210101339503.png" alt="image-20191210101339503"></p><p>è¾“å…¥ç”¨æˆ·åå¯†ç ï¼Œç¡®å®šå¯¼å…¥å®Œæˆã€‚</p><h4 id="2-2ã€æäº¤ä»£ç åˆ°SVNé¡¹ç›®"><a href="#2-2ã€æäº¤ä»£ç åˆ°SVNé¡¹ç›®" class="headerlink" title="2.2ã€æäº¤ä»£ç åˆ°SVNé¡¹ç›®"></a>2.2ã€æäº¤ä»£ç åˆ°SVNé¡¹ç›®</h4><p>ç°åœ¨æˆ‘ä»¬åªæ˜¯æŠŠé¡¹ç›®å’ŒSVNè¿›è¡Œäº†å…³è”ï¼Œæ‰€æœ‰çš„é¡¹ç›®æ–‡ä»¶å¹¶æ²¡æœ‰ä¸Šä¼ åˆ°æœåŠ¡å™¨ã€‚</p><p><img src="/2019/12/10/SVN/image-20191210101503691.png" alt="image-20191210101503691"></p><p>å¿½ç•¥.classæ–‡ä»¶å’Œclassesæ–‡ä»¶å¤¹ä¸æäº¤</p><p><img src="/2019/12/10/SVN/image-20191210101537605.png" alt="image-20191210101537605"></p><p>æäº¤é¡¹ç›®ï¼Œå¯ä»¥çœ‹åˆ°classesæ–‡ä»¶å¹¶ä¸åœ¨å…¶</p><p><img src="/2019/12/10/SVN/image-20191210101634177.png" alt="image-20191210101634177"></p><p>æäº¤ä¹‹åï¼Œå¯ä»¥åˆ°é¡¹ç›®å›¾æ ‡å·²ç»å‘ç”Ÿäº†å˜åŒ–</p><p><img src="/2019/12/10/SVN/image-20191210101739951.png" alt="image-20191210101739951"></p><h4 id="2-3ã€æŠŠSVNé¡¹ç›®æ£€å‡ºåˆ°Eclipse"><a href="#2-3ã€æŠŠSVNé¡¹ç›®æ£€å‡ºåˆ°Eclipse" class="headerlink" title="2.3ã€æŠŠSVNé¡¹ç›®æ£€å‡ºåˆ°Eclipse"></a>2.3ã€æŠŠSVNé¡¹ç›®æ£€å‡ºåˆ°Eclipse</h4><p>æˆ‘ä»¬æ–°åˆ°å…¬å¸ï¼Œå¾€å¾€å·²ç»æœ‰å¼€å‘å¥½äº†çš„é¡¹ç›®ï¼Œæˆ‘ä»¬è¦åŠ å…¥ï¼Œå°±éœ€è¦ç”¨<strong>é¡¹ç›®çš„æ£€å‡ºçš„æ–¹å¼æ¥æ–°å»ºé¡¹ç›®</strong>ã€‚<br>æ“ä½œå¦‚ä¸‹ï¼šåœ¨åˆ›å»ºé¡¹ç›®çš„æ—¶å€™ï¼Œé€‰æ‹©ä»svnä¸Šæ£€å‡ºé¡¹ç›®</p><p><img src="/2019/12/10/SVN/image-20191210102113334.png" alt="image-20191210102113334"></p><p>ç°æœ‰èµ„æºåº“çš„ä½ç½®</p><p><img src="/2019/12/10/SVN/image-20191210102145794.png" alt="image-20191210102145794"></p><p>é€‰æ‹©ä¹‹å‰æäº¤çš„é¡¹ç›®è·¯å¾„</p><p><img src="/2019/12/10/SVN/image-20191210102230164.png" alt="image-20191210102230164"></p><p>æŒ‡å®šé¡¹ç›®åï¼š</p><p><img src="/2019/12/10/SVN/image-20191210102303893.png" alt="image-20191210102303893"></p><p>æ£€å‡ºé¡¹ç›®åˆ°Eclipseä¸­</p><p><img src="/2019/12/10/SVN/image-20191210102340569.png" alt="image-20191210102340569"></p><h4 id="2-4ã€å°ç»“"><a href="#2-4ã€å°ç»“" class="headerlink" title="2.4ã€å°ç»“"></a>2.4ã€å°ç»“</h4><p>äº†è§£é¡¹ç›®ç®¡ç†é¡¹ç›®æ„å»ºå’Œç‰ˆæœ¬æ§åˆ¶è¿™äº›å·¥ç¨‹è½¯ä»¶</p><p>ç†è§£ SVN çš„åŸºæœ¬åŠŸèƒ½, æŒæ¡ Tortoise SVN çš„ä½¿ç”¨ï¼ŒæŒæ¡Eclipseçš„SVNæ’ä»¶ä½¿ç”¨</p><p>åœ¨ä¼ä¸šä¸­åº”ç”¨ï¼šé¡¹ç›®ç»ç†ä¼šå‘ä¸€ä¸ªwordæ–‡æ¡£</p><p>â€‹    1ã€ svnçš„ä»“åº“çš„åœ°å€</p><p>â€‹    2ã€ ä½¿ç”¨svnçš„ç”¨æˆ·åå’Œå¯†ç </p><p>â€‹    3ã€ æŠŠsvnä¸Šçš„é¡¹ç›®å¯¼å…¥åˆ°Elicpseä¸­</p><p>â€‹    4ã€ åšè‡ªå·±çš„æ¨¡å—ï¼ŒæŠŠè‡ªå·±å†™çš„ä¸œè¥¿ä¸Šä¼ åˆ°svnä¸Š</p><p>â€‹    5ã€ ç‰ˆæœ¬çš„å¯¹æ¯”ï¼Œåˆå¹¶ç‰ˆæœ¬</p><h3 id="3ã€IDEAä¸­ä½¿ç”¨SVN"><a href="#3ã€IDEAä¸­ä½¿ç”¨SVN" class="headerlink" title="3ã€IDEAä¸­ä½¿ç”¨SVN"></a>3ã€IDEAä¸­ä½¿ç”¨SVN</h3><p>ç¡®ä¿å·²ç»å»ºç«‹äº†SVNæœåŠ¡å’Œå®‰è£…äº†SVNå®¢æˆ·ç«¯ï¼Œç„¶ååšå¦‚ä¸‹é…ç½®ï¼š</p><p><img src="/2019/12/10/SVN/image-20191210205848204.png" alt="image-20191210205848204"></p>]]></content>
    
    
    
    <tags>
      
      <tag>ç‰ˆæœ¬æ§åˆ¶</tag>
      
      <tag>SVN</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>JavaScript</title>
    <link href="/2019/12/10/JavaScript/"/>
    <url>/2019/12/10/JavaScript/</url>
    
    <content type="html"><![CDATA[<h3 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a>JavaScript</h3><p>JavaScript ä½œç”¨ï¼šè¢«æ•°ç™¾ä¸‡è®¡çš„ç½‘é¡µç”¨æ¥<code>æ”¹è¿›è®¾è®¡</code>ã€<code>éªŒè¯è¡¨å•</code>ã€<code>æ£€æµ‹æµè§ˆå™¨</code>ã€<code>åˆ›å»ºcookies</code>ï¼ˆjsä¹Ÿå¯åˆ›å»ºcookieï¼Œåœ¨æµè§ˆå™¨é‡Œé¢åˆ›å»º)ï¼Œä»¥åŠæ›´å¤šçš„å…¶å®ƒåº”ç”¨ã€‚å‰èº«æ˜¯Livescriptï¼Œæ˜¯<code>åŸºäºå¯¹è±¡</code>å’Œ<code>äº‹ä»¶é©±åŠ¨</code>ï¼Œå¹¶<code>å…·å®‰å…¨æ€§</code>çš„<code>ç½‘ç»œè„šæœ¬è¯­è¨€</code>ã€‚</p><p>åŸºäº<strong>å¯¹è±¡</strong>ï¼Œ<strong>è§£é‡Š</strong>æ‰§è¡Œï¼Œæ— éœ€<strong>ç¼–è¯‘</strong>çš„<strong>åŠ¨æ€</strong>è¯­è¨€ã€‚</p><h3 id="JavaScriptè„šæœ¬åœ¨é¡µé¢ä¸­çš„å¼•å…¥ï¼š"><a href="#JavaScriptè„šæœ¬åœ¨é¡µé¢ä¸­çš„å¼•å…¥ï¼š" class="headerlink" title="JavaScriptè„šæœ¬åœ¨é¡µé¢ä¸­çš„å¼•å…¥ï¼š"></a>JavaScriptè„šæœ¬åœ¨é¡µé¢ä¸­çš„å¼•å…¥ï¼š</h3><h4 id="1ã€æ ‡ç­¾å†…éƒ¨ä½¿ç”¨ï¼š"><a href="#1ã€æ ‡ç­¾å†…éƒ¨ä½¿ç”¨ï¼š" class="headerlink" title="1ã€æ ‡ç­¾å†…éƒ¨ä½¿ç”¨ï¼š"></a>1ã€æ ‡ç­¾å†…éƒ¨ä½¿ç”¨ï¼š</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- ä¸‹é¢ä»£ç &quot;javascript:alert&quot;ä¸­javascriptä¸åŒºåˆ†å¤§å°å†™ä¹Ÿèƒ½å¤Ÿæ‰§è¡ŒæˆåŠŸï¼Œè€Œalertå¿…é¡»å°å†™ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:alert(&#x27;Javascriptçš„alertå¼¹çª—&#x27;)&quot;</span>&gt;</span>ç‚¹å‡»href=&quot;javascript:alert()&quot;å¼¹çª—<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="/2019/12/10/JavaScript/image-20200104170131949.png" alt="image-20200104170131949"></p><h4 id="2ã€HTMLé¡µé¢å†…åµŒå…¥jsè„šæœ¬"><a href="#2ã€HTMLé¡µé¢å†…åµŒå…¥jsè„šæœ¬" class="headerlink" title="2ã€HTMLé¡µé¢å†…åµŒå…¥jsè„šæœ¬:"></a>2ã€HTMLé¡µé¢å†…åµŒå…¥jsè„šæœ¬:</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="javascript"><span class="hljs-comment">//scriptæ ‡ç­¾ä¹‹é—´ç¼–å†™JavaScriptä»£ç </span></span><br><span class="javascript">alert(<span class="hljs-string">&quot;JavaScriptå†…éƒ¨å¼•å…¥&quot;</span>);</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="/2019/12/10/JavaScript/image-20200104170634796.png" alt="image-20200104170634796"></p><h4 id="3ã€åœ¨é¡µé¢ä¸­å¼•å…¥å¤–éƒ¨çš„jsè„šæœ¬æ–‡ä»¶ï¼š"><a href="#3ã€åœ¨é¡µé¢ä¸­å¼•å…¥å¤–éƒ¨çš„jsè„šæœ¬æ–‡ä»¶ï¼š" class="headerlink" title="3ã€åœ¨é¡µé¢ä¸­å¼•å…¥å¤–éƒ¨çš„jsè„šæœ¬æ–‡ä»¶ï¼š"></a>3ã€åœ¨é¡µé¢ä¸­å¼•å…¥å¤–éƒ¨çš„jsè„šæœ¬æ–‡ä»¶ï¼š</h4><p>è´£ä»»åˆ†ç¦»ï¼Œå¯ä»¥è®©å¾ˆå¤šé¡µé¢éƒ½èƒ½å¤Ÿä½¿ç”¨è¿™ä¸ªjsæ–‡ä»¶ï¼š</p><p>HelloJS.jsæ–‡ä»¶ï¼š</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">alert(<span class="hljs-string">&quot;åœ¨HTMLé¡µé¢ä¸­å¼•å…¥å¤–éƒ¨JavaScriptæ–‡ä»¶&quot;</span>)<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><p>index.htmlæ–‡ä»¶ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;js/HelloJS.js&quot;</span>&gt;</span><br>/*<br> * æ³¨æ„ï¼šåœ¨ä¸€ä¸ªscriptæ ‡ç­¾é‡Œâ€œå†…éƒ¨ç¼–å†™JavaScriptä»£ç â€æˆ–â€œå¼•å…¥å¤–éƒ¨JavaScriptæ–‡ä»¶â€<br> * ä¸¤ç§æ–¹å¼åªèƒ½æ‹©å…¶ä¸€ï¼Œè‹¥ä¸¤ç§æ–¹å¼åŒæ—¶å­˜åœ¨çš„è¯ï¼Œä»…å¤–éƒ¨å¼•å…¥çš„JavaScriptæ–‡ä»¶æœ‰æ•ˆã€‚<br> * åœ¨HBuilderä¸­å¾ˆäººæ€§åŒ–çš„ç»™å¼€å‘äººå‘˜åšå‡ºæç¤ºï¼š<br> * å¼•å…¥å¤–éƒ¨jsæ–‡ä»¶åï¼Œè¯¥æ ‡ç­¾å†…ç¼–å†™çš„jsä»£ç æ²¡æœ‰å…³é”®å­—æç¤ºåŠå…³é”®å­—é¢œè‰²<br> */<br><span class="javascript">alert(<span class="hljs-string">&quot;JavaScriptå†…éƒ¨å¼•å…¥&quot;</span>);</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="/2019/12/10/JavaScript/image-20200104192358313.png" alt="image-20200104192358313"></p><h3 id="å¼•å…¥JavaScriptåœ¨HTMLé¡µé¢ä»£ç ä½ç½®çš„æ¡ˆä¾‹åˆ†æï¼š"><a href="#å¼•å…¥JavaScriptåœ¨HTMLé¡µé¢ä»£ç ä½ç½®çš„æ¡ˆä¾‹åˆ†æï¼š" class="headerlink" title="å¼•å…¥JavaScriptåœ¨HTMLé¡µé¢ä»£ç ä½ç½®çš„æ¡ˆä¾‹åˆ†æï¼š"></a>å¼•å…¥JavaScriptåœ¨HTMLé¡µé¢ä»£ç ä½ç½®çš„æ¡ˆä¾‹åˆ†æï¼š</h3><h4 id="1ã€åœ¨-lt-div-id-â€mydivâ€-gt-å‰åå¼•å…¥jsæ–‡ä»¶"><a href="#1ã€åœ¨-lt-div-id-â€mydivâ€-gt-å‰åå¼•å…¥jsæ–‡ä»¶" class="headerlink" title="1ã€åœ¨&lt;div id=â€mydivâ€&gt;å‰åå¼•å…¥jsæ–‡ä»¶"></a>1ã€åœ¨&lt;div id=â€mydivâ€&gt;å‰åå¼•å…¥jsæ–‡ä»¶</h4><p>åœ¨ä¹‹å‰å¼•å…¥æ•ˆæœï¼š</p><p><img src="/2019/12/10/JavaScript/image-20200104201128074.png" alt="image-20200104201128074"></p><p>åœ¨ä¹‹åå¼•å…¥jsæ–‡ä»¶çš„æ•ˆæœï¼š</p><p><img src="/2019/12/10/JavaScript/image-20200104201221225.png" alt="image-20200104201221225"></p><p>æ€»ç»“ï¼š</p><p>ã€‚ã€‚ã€‚</p><h4 id="2ã€æŠŠjsä»£ç æ”¾åˆ°window-onloadå‡½æ•°é‡Œ"><a href="#2ã€æŠŠjsä»£ç æ”¾åˆ°window-onloadå‡½æ•°é‡Œ" class="headerlink" title="2ã€æŠŠjsä»£ç æ”¾åˆ°window.onloadå‡½æ•°é‡Œ"></a>2ã€æŠŠjsä»£ç æ”¾åˆ°window.onloadå‡½æ•°é‡Œ</h4><p><img src="/2019/12/10/JavaScript/image-20200104200928485.png" alt="image-20200104200928485"></p><p>æ€»ç»“ï¼šwindow.onloadå‡½æ•°æ˜¯æµè§ˆå™¨åŠ è½½å®Œæ•´ä¸ªé¡µé¢åè°ƒç”¨çš„å‡½æ•°ï¼Œfunction(){}æ˜¯åŒ¿åå‡½æ•°ã€‚</p><h3 id="JavaScriptå˜é‡"><a href="#JavaScriptå˜é‡" class="headerlink" title="JavaScriptå˜é‡"></a>JavaScriptå˜é‡</h3><p>1ã€å¤§å°å†™æ•æ„Ÿï¼Œå˜é‡åå­—æ¯ä¸‹åˆ’çº¿å¼€å¤´ï¼›</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs actionscript"><span class="hljs-keyword">var</span> å˜é‡å=å˜é‡å€¼ï¼›<br></code></pre></td></tr></table></figure><p>2ã€å£°æ˜çš„å˜é‡ç±»å‹ï¼šNumberæ•°å­—ç±»å‹ï¼ŒBoolean å¸ƒå°”ç±»å‹ï¼ŒString å­—ç¬¦ä¸²ç±»å‹ç­‰ï¼›</p><blockquote><ol><li>Numberï¼š<ol><li>æ•´å‹ï¼š10è¿›åˆ¶ã€8è¿›åˆ¶(0â€¦)ã€16è¿›åˆ¶(0xâ€¦)ï¼›</li><li>ç‰¹æ®Šæ•°å€¼ï¼šNaNã€Infinity(é™¤æ•°ä¸º0)ï¼Œå…¶å¯¹åº”çš„åˆ¤æ–­å‡½æ•°ä¸ºisNaN()å’ŒisFinite()ã€‚</li></ol></li><li>Boolean: true æˆ– false<ul><li>â€œâ€ã€nullã€undefinedå’Œ0ç­‰ï¼Œè¡¨ç¤ºfalseã€‚</li></ul></li><li>Stringï¼šjsä¸­æ²¡æœ‰charå‹<ul><li>â€œa book of JavaScriptâ€ ã€ â€˜aâ€™ ã€ â€œaâ€ å’Œ â€œâ€ ç­‰éƒ½è¡¨ç¤ºå­—ç¬¦ä¸²ã€‚</li></ul></li></ol></blockquote><p>3ã€typeof å˜é‡åï¼šå–åˆ°å˜é‡çš„ç±»å‹ï¼›</p><p><img src="/2019/12/10/JavaScript/image-20200104203115668.png" alt="image-20200104203115668"></p><p>4ã€å…¨å±€å˜é‡ä¸å±€éƒ¨å˜é‡ï¼š</p><table><thead><tr><th>å…¨å±€å˜é‡</th><th>å±€éƒ¨å˜é‡</th></tr></thead><tbody><tr><td>&lt;script language=â€javascriptâ€&gt;<br>       var msg = â€œå…¨å±€å˜é‡â€;<br>       function show()<br>       {<br>              msg = â€œéå±€éƒ¨å˜é‡â€;<br>       }<br>       show();<br>       alert(msg);//æ‰“å°è¾“å‡ºâ€éå±€éƒ¨å˜é‡â€œ<br>&lt;/script&gt;</td><td>&lt;script language=â€javascriptâ€&gt;<br>       var msg = â€œå…¨å±€å˜é‡â€;<br>       function show()<br>       {<br>              var msg; <br>              msg = â€œå±€éƒ¨å˜é‡â€;<br>       }<br>       show();<br>       alert(msg);//æ‰“å°è¾“å‡ºâ€å…¨å±€å˜é‡â€œ<br>&lt;/script&gt;</td></tr></tbody></table><h3 id="JavaScriptè¿ç®—ç¬¦"><a href="#JavaScriptè¿ç®—ç¬¦" class="headerlink" title="JavaScriptè¿ç®—ç¬¦"></a>JavaScriptè¿ç®—ç¬¦</h3><table><thead><tr><th>è¿ç®—ç¬¦åˆ†ç±»</th><th></th></tr></thead><tbody><tr><td>ç®—æ•°è¿ç®—ç¬¦</td><td>+ã€-ã€*ã€/ã€%ã€++ã€â€“</td></tr><tr><td>èµ‹å€¼è¿ç®—ç¬¦</td><td>=ã€+=ã€-=ã€*=ã€/=ã€%=</td></tr><tr><td>æ¯”è¾ƒè¿ç®—ç¬¦</td><td>&gt;ã€&lt;ã€&gt;=ã€&lt;=ã€==ã€!=</td></tr><tr><td>é€»è¾‘è¿ç®—ç¬¦</td><td>&amp;&amp;ã€||ã€!</td></tr><tr><td>æµç¨‹æ§åˆ¶</td><td>ifã€whileã€for</td></tr></tbody></table><table><thead><tr><th>==å’Œ===çš„åŒºåˆ«</th><th></th></tr></thead><tbody><tr><td>==</td><td>åªæ¯”è¾ƒä¸¤ä¸ªå˜é‡çš„å€¼</td></tr><tr><td>===</td><td>å…ˆæ¯”è¾ƒä¸¤ä¸ªå˜é‡çš„ç±»å‹ï¼Œå†æ¯”è¾ƒä¸¤ä¸ªå˜é‡çš„å€¼</td></tr></tbody></table><table><thead><tr><th>||  è¿ç®—ç¬¦</th><th></th></tr></thead><tbody><tr><td>||</td><td>è¿”å›ç¬¬ä¸€ä¸ªä¸ºtrueçš„å€¼(0,null,undefined,â€â€ç­‰è¡¨ç¤ºçš„æ˜¯false)</td></tr></tbody></table><h3 id="JavaScriptå‡½æ•°"><a href="#JavaScriptå‡½æ•°" class="headerlink" title="JavaScriptå‡½æ•°"></a>JavaScriptå‡½æ•°</h3><p>å°†è„šæœ¬ç¼–å†™ä¸ºå‡½æ•°ï¼Œå°±å¯ä»¥é¿å…é¡µé¢è½½å…¥æ—¶æ‰§è¡Œè¯¥è„šæœ¬ï¼Œå®ç°ä»£ç å¤ç”¨ã€‚</p><h4 id="1ã€å‡½æ•°å®šä¹‰æ ¼å¼ï¼š"><a href="#1ã€å‡½æ•°å®šä¹‰æ ¼å¼ï¼š" class="headerlink" title="1ã€å‡½æ•°å®šä¹‰æ ¼å¼ï¼š"></a>1ã€å‡½æ•°å®šä¹‰æ ¼å¼ï¼š</h4><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-keyword">function</span> <span class="hljs-title">å‡½æ•°åï¼ˆ[å‚æ•°åˆ—è¡¨]ï¼‰</span><br>&#123;<br>ç¨‹åºä»£ç <br>[<span class="hljs-keyword">return</span> <span class="hljs-type">è¡¨è¾¾å¼</span>;]//æ²¡æœ‰è¿”å›å€¼å¾—è¯ï¼Œé»˜è®¤è¿”å›undefined<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="2ã€å‡½æ•°è°ƒç”¨æ ¼å¼ï¼š"><a href="#2ã€å‡½æ•°è°ƒç”¨æ ¼å¼ï¼š" class="headerlink" title="2ã€å‡½æ•°è°ƒç”¨æ ¼å¼ï¼š"></a>2ã€å‡½æ•°è°ƒç”¨æ ¼å¼ï¼š</h4><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gcode">å‡½æ•°å<span class="hljs-comment">(å‚æ•°1,å‚æ•°2...)</span>;<br>var å˜é‡å=å‡½æ•°å<span class="hljs-comment">(å‚æ•°1,å‚æ•°2...)</span>;<br></code></pre></td></tr></table></figure><h4 id="3ã€åŒ¿åå‡½æ•°ï¼š"><a href="#3ã€åŒ¿åå‡½æ•°ï¼š" class="headerlink" title="3ã€åŒ¿åå‡½æ•°ï¼š"></a>3ã€åŒ¿åå‡½æ•°ï¼š</h4><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs abnf">var say = function()&#123;<br>alert(<span class="hljs-string">&quot;hello ä½ å¥½!&quot;</span>)<span class="hljs-comment">;</span><br>&#125;<span class="hljs-comment">;</span><br>var hello = say<span class="hljs-comment">;</span><br>hello()<span class="hljs-comment">;</span><br>say()<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><h4 id="4ã€ç³»ç»Ÿå‡½æ•°-global-ï¼š"><a href="#4ã€ç³»ç»Ÿå‡½æ•°-global-ï¼š" class="headerlink" title="4ã€ç³»ç»Ÿå‡½æ•°(global)ï¼š"></a>4ã€ç³»ç»Ÿå‡½æ•°(global)ï¼š</h4><p>ç³»ç»Ÿå‡½æ•°ï¼šå°±æ˜¯javascriptä¸­ä¸ºæˆ‘ä»¬å†…ç½®çš„ä¸€ç³»åˆ—å‡½æ•°ï¼Œæˆ‘ä»¬æ‰¾åˆ°è¿™äº›å‡½æ•°ï¼Œä¸éœ€è¦å®šä¹‰å°±å¯å°±å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œç³»ç»Ÿå‡½æ•°å°±æ˜¯è¿™ä¸ªglobalå¯¹è±¡çš„æ–¹æ³•ã€‚</p><p><img src="/2019/12/10/JavaScript/Snipaste_2019-11-26_17-17-57.png"></p><p>å…¨å±€å‡½æ•°çš„ä½¿ç”¨ï¼š</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs perl">//<span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">/encodeURI()--ç¼–ç  decodeURI()--è§£ç /</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span>/<br>var url = <span class="hljs-string">&quot;http://ç™¾åº¦.com&quot;</span>;<br>var urlEncode = encodeURI(url);<br><br>console.debug(urlEncode);<br>// http:<span class="hljs-regexp">//</span>%E7%99%BE%E5%BA%A6.com<br><br>console.debug(decodeURI(urlEncode));<br>// http:<span class="hljs-regexp">//</span>ç™¾åº¦.com<br><br>//<span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span>encodeURIComponent()ç¼–ç  decodeURIComponent()è§£ç ï¼Œä¸€èˆ¬ç”¨ä¸åˆ°//<span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span>/<br>var url = <span class="hljs-string">&quot;http://ç™¾åº¦.com&quot;</span>;<br>var urlEncode = encodeURIComponent(url);<br><br>console.debug(urlEncode);<br>// http%<span class="hljs-number">3</span>A%<span class="hljs-number">2</span>F%<span class="hljs-number">2</span>F%E7%99%BE%E5%BA%A6.com<br><br>console.debug(decodeURIComponent(urlEncode));<br>// http:<span class="hljs-regexp">//</span>ç™¾åº¦.com<br><br>//<span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//is</span>NaN()//<span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><br>console.debug(isNaN(<span class="hljs-string">&quot;45&quot;</span>));<span class="hljs-regexp">//</span>false<br>console.debug(isNaN(<span class="hljs-number">45</span>));<span class="hljs-regexp">//</span>false<br>console.debug(isNaN(<span class="hljs-string">&quot;abc&quot;</span>));<span class="hljs-regexp">//</span>true<br><br>//<span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">/parseInt(var)/</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><br>var num = <span class="hljs-string">&quot;45.6&quot;</span>;<br>console.debug(typeof num); <span class="hljs-regexp">//s</span>tring<br>num = parseInt(num); <span class="hljs-regexp">//</span>æŠŠstring è½¬æ¢æˆnum<br>console.debug(typeof num); <span class="hljs-regexp">//num</span>ber<br>console.debug(num);<span class="hljs-regexp">//</span><span class="hljs-number">45</span><br><br>var num = <span class="hljs-string">&quot;45abc.6&quot;</span>;<br>num = parseInt(num); <span class="hljs-regexp">//</span>æŠŠstring è½¬æ¢æˆnum<br>console.debug(num);<span class="hljs-regexp">//</span><span class="hljs-number">45</span><br><br>var num = <span class="hljs-string">&quot;n45abc.6&quot;</span>;<br>num = parseInt(num); <span class="hljs-regexp">//</span>æŠŠstring è½¬æ¢æˆ<br>console.debug(num);<span class="hljs-regexp">//</span>NAN<br><br>//<span class="hljs-keyword">eval</span>()è®¡ç®—JavaScriptå­—ç¬¦ä¸²ï¼Œå¹¶å°†å…¶ä½œä¸ºè„šæœ¬æ‰§è¡Œ<br>/*<br> *å¼ºå¤§ä¹‹å¤„ï¼šé‡Œé¢æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ”¾åˆ°<span class="hljs-keyword">eval</span>å¯ä»¥ç›´æ¥è¿è¡Œï¼›<br> *ç”¨é€”ï¼šä»¥åæˆ‘ä»¬åœ¨åå°ä¼ ä¸€ä¸ªæ•°æ®è¿‡æ¥ï¼Œè¿™ä¸ªæ•°æ®å¾ˆå¤šæ—¶å€™æ˜¯ç‰¹æ®Šçš„æ ¼å¼ï¼Œjsonæ ¼å¼ï¼Œéœ€è¦ä½¿ç”¨<span class="hljs-keyword">eval</span>è¿™ä¸ªå‡½æ•°å»è§£æä¸€ä¸‹(åé¢å­¦ä¹ )<br> */<br><span class="hljs-keyword">eval</span>(<span class="hljs-string">&quot;alert(2+1)&quot;</span>);<br><br></code></pre></td></tr></table></figure><p>å…¨å±€å±æ€§ï¼š</p><table><thead><tr><th><strong>æ–¹æ³•</strong></th><th><strong>æè¿°</strong></th><th><strong>FF</strong></th><th><strong>IE</strong></th></tr></thead><tbody><tr><td>Infinity</td><td>ä»£è¡¨æ­£çš„æ— ç©·å¤§çš„æ•°å€¼ã€‚</td><td>1</td><td>4</td></tr><tr><td>NaNï¼ˆNot A Numberï¼‰</td><td>æŒ‡ç¤ºæŸä¸ªå€¼æ˜¯ä¸æ˜¯æ•°å­—å€¼ã€‚</td><td>1</td><td>4</td></tr><tr><td>undefined</td><td>æŒ‡ç¤ºæœªå®šä¹‰çš„å€¼ã€‚</td><td>1</td><td>5.5</td></tr></tbody></table><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">var</span> t<span class="hljs-number">1</span>=<span class="hljs-number">1</span>.<span class="hljs-number">18531825858153872539188692653618536</span>E+<span class="hljs-number">10308</span>;<br><span class="hljs-attribute">console</span>.debug(t<span class="hljs-number">1</span>);//Infinity<br><br><span class="hljs-attribute">var</span> t<span class="hljs-number">2</span>=<span class="hljs-string">&quot;hello&quot;</span>;<br><span class="hljs-attribute">console</span>.debug(t<span class="hljs-number">2</span>);//NaN<br><br><span class="hljs-attribute">var</span> t<span class="hljs-number">3</span>;<br><span class="hljs-attribute">console</span>.debug(t<span class="hljs-number">3</span>);//undefined<br></code></pre></td></tr></table></figure><h3 id="JavaScriptç®€å•å¯¹è±¡"><a href="#JavaScriptç®€å•å¯¹è±¡" class="headerlink" title="JavaScriptç®€å•å¯¹è±¡"></a>JavaScriptç®€å•å¯¹è±¡</h3><p>ä¸€èˆ¬å°†å¯¹è±¡åçš„é¦–å­—æ¯å¤§å†™ï¼Œè€Œå‡½æ•°åçš„é¦–å­—æ¯ä¸€èˆ¬å°å†™ã€‚è¿™å¹¶éæ˜¯å¼ºåˆ¶çš„ï¼Œè€Œæ˜¯ä¸ºåŒºåˆ†JSå¯¹è±¡å’ŒJSå‡½æ•°çš„å»ºè®®ã€‚</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-keyword">function</span> Person()&#123;<span class="hljs-regexp">//</span>ä¸€ä¸ªåä¸ºPersonçš„å¯¹è±¡&#125;<br><span class="hljs-regexp">//</span>å¯¹è±¡æ·»åŠ å±æ€§<br>var person=new Person();<br>person.name=<span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>;<br>person.age=<span class="hljs-number">18</span>;<br>console.debug(person);<span class="hljs-regexp">//</span>Person&#123;name=<span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>,age=<span class="hljs-number">18</span>&#125;<br><span class="hljs-regexp">//</span>ç»™å¯¹è±¡æ·»åŠ æ–¹æ³•<br>person.hello=<span class="hljs-keyword">function</span>()&#123;<br>alert(<span class="hljs-string">&quot;hello&quot;</span>);<br>&#125;<br>person.hello();<span class="hljs-regexp">//</span>æ‰§è¡Œ<br><br><span class="hljs-keyword">function</span> person()&#123;<span class="hljs-regexp">//</span>ä¸€ä¸ªåä¸ºpersonçš„å‡½æ•°&#125;<br></code></pre></td></tr></table></figure><p><img src="/2019/12/10/JavaScript/image-20200104205646103.png" alt="image-20200104205646103"></p><p>æ„é€ å‡½æ•°ä¸this</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Person</span>(<span class="hljs-params">name,age</span>)</span>&#123;<span class="hljs-comment">//å¯¹è±¡</span><br><span class="hljs-comment">//å¯¹è±¡æ·»åŠ å±æ€§</span><br><span class="hljs-built_in">this</span>.name=<span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>;<br><span class="hljs-built_in">this</span>.age=<span class="hljs-number">18</span>;<br><span class="hljs-built_in">console</span>.debug(<span class="hljs-built_in">this</span>);<span class="hljs-comment">//Person&#123;name=&quot;å¼ ä¸‰&quot;,age=18&#125;</span><br><span class="hljs-comment">//ç»™å¯¹è±¡æ·»åŠ æ–¹æ³•</span><br><span class="hljs-built_in">this</span>.hello=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;<br>alert(<span class="hljs-string">&quot;hello&quot;</span>);<br>&#125;<br><span class="hljs-built_in">this</span>.hello();<span class="hljs-comment">//æ‰§è¡Œ</span><br>&#125;<br><span class="hljs-keyword">var</span> person=<span class="hljs-keyword">new</span> Person();<br>person.hello();<br></code></pre></td></tr></table></figure><p><img src="/2019/12/10/JavaScript/image-20200104210924900.png" alt="image-20200104210924900"></p><h3 id="å€¼ä¼ é€’å’Œå¼•ç”¨ä¼ é€’"><a href="#å€¼ä¼ é€’å’Œå¼•ç”¨ä¼ é€’" class="headerlink" title="å€¼ä¼ é€’å’Œå¼•ç”¨ä¼ é€’"></a>å€¼ä¼ é€’å’Œå¼•ç”¨ä¼ é€’</h3><h4 id="1ã€å€¼ä¼ é€’ï¼š"><a href="#1ã€å€¼ä¼ é€’ï¼š" class="headerlink" title="1ã€å€¼ä¼ é€’ï¼š"></a>1ã€å€¼ä¼ é€’ï¼š</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">language</span>=<span class="hljs-string">&quot;javascript&quot;</span>&gt;</span><br><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">changeValue</span>(<span class="hljs-params">x</span>)</span>&#123;</span><br>x = 5;<br>&#125;<br><span class="javascript"><span class="hljs-keyword">var</span> x = <span class="hljs-number">3</span>;</span><br>changeValue(x);<br><span class="javascript">alert(x);<span class="hljs-comment">//3å€¼ä¼ é€’</span></span><br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="2ã€å¼•ç”¨ä¼ é€’ï¼š"><a href="#2ã€å¼•ç”¨ä¼ é€’ï¼š" class="headerlink" title="2ã€å¼•ç”¨ä¼ é€’ï¼š"></a>2ã€å¼•ç”¨ä¼ é€’ï¼š</h4><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs xquery"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">language</span>=<span class="hljs-string">&quot;javascript&quot;</span>&gt;</span></span><br><span class="xml">function Person(name,age)</span><span class="xquery">&#123;</span><br><span class="xquery">this.age = age;</span><br><span class="xquery">this<span class="hljs-built_in">.name</span> =<span class="hljs-built_in"> name</span>;</span><br><span class="xquery">&#125;</span><br><span class="xml">function change(p1)</span><span class="xquery">&#123;</span><br><span class="xquery">p1<span class="hljs-built_in">.name</span> = <span class="hljs-string">&quot;æå››&quot;</span>;</span><br><span class="xquery">&#125;</span><span class="xml"> </span><br><span class="xml">var person1 = new Person(&quot;å¼ ä¸‰&quot;,18);</span><br><span class="xml">change(person1); //ä¼ é€’åœ°å€</span><br><span class="xml">    console.debug(person1);//Person </span><span class="xquery">&#123; age=<span class="hljs-number">18</span>,<span class="hljs-built_in"> name</span>=<span class="hljs-string">&quot;æå››&quot;</span>&#125;</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h3 id="JavaScriptç»§æ‰¿"><a href="#JavaScriptç»§æ‰¿" class="headerlink" title="JavaScriptç»§æ‰¿"></a>JavaScriptç»§æ‰¿</h3><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs haxe"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ClassA</span></span>(name)&#123;<br><span class="hljs-built_in">this</span>.name = name;<br><span class="hljs-built_in">this</span>.sayHello = <span class="hljs-function"><span class="hljs-keyword">function</span></span>()&#123;<br>alert(<span class="hljs-string">&quot;hello,&quot;</span>+name);<br>&#125;;<br>&#125;<br><br><span class="hljs-comment">//ç»§æ‰¿</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ClassB</span></span>(name)&#123;<br><span class="hljs-built_in">this</span>.<span class="hljs-keyword">new</span><span class="hljs-type">Method</span> = ClassA;<br><span class="hljs-built_in">this</span>.<span class="hljs-keyword">new</span><span class="hljs-type">Method</span>(name);<span class="hljs-comment">//ç›¸ç­‰äº ClassA(name)</span><br>&#125;<br><br><span class="hljs-keyword">var</span> obj = <span class="hljs-keyword">new</span> <span class="hljs-type">ClassA</span>(<span class="hljs-string">&quot;å°æ˜&quot;</span>);<br>obj.sayHello();<br><br><span class="hljs-keyword">var</span> obj = <span class="hljs-keyword">new</span> <span class="hljs-type">ClassB</span>(<span class="hljs-string">&quot;å°å¼ &quot;</span>);<br>obj.sayHello();<br></code></pre></td></tr></table></figure><h3 id="Java-Scriptæœ¬åœ°å¯¹è±¡"><a href="#Java-Scriptæœ¬åœ°å¯¹è±¡" class="headerlink" title="Java Scriptæœ¬åœ°å¯¹è±¡"></a>Java Scriptæœ¬åœ°å¯¹è±¡</h3><p>è¯¦æŸ¥APIæ–‡æ¡£ï¼šArrayï¼ŒBooleanï¼ŒDateï¼ŒMathï¼ŒNumberï¼ŒStringï¼ŒGlobal(å†…ç½®å‡½æ•°)ï¼›</p><p>JSå’ŒJavaä¸€æ ·ï¼Œæœ‰ä¸€ä¸ªé¡¶å±‚å¯¹è±¡Objectï¼›</p><h4 id="Objectï¼š"><a href="#Objectï¼š" class="headerlink" title="Objectï¼š"></a>Objectï¼š</h4><p>ä¸»è¦å±æ€§ï¼š</p><ul><li>constructor-å¯¹è±¡çš„æ„é€ å‡½æ•°</li><li>prototype-ä½¿æ‚¨æœ‰èƒ½åŠ›å‘å¯¹è±¡æ·»åŠ å±æ€§å’Œæ–¹æ³•ï¼ˆåŸç±»å‹ï¼‰</li></ul><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-keyword">function</span> <span class="hljs-constructor">Person(<span class="hljs-params">name</span>,<span class="hljs-params">age</span>)</span>&#123;<br>this.name=name;<br>this.age=age;<br>&#125;<br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Person</span>.</span></span>prototype.say=<span class="hljs-keyword">function</span><span class="hljs-literal">()</span>&#123;<br>alert(<span class="hljs-string">&quot;prototype&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿ç”¨ï¼šæœ‰ä¸€ä¸ªDateç±»ï¼Œä½†æ˜¯Dateæ‰“å°çš„æ•ˆæœä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„æƒ³è¦çš„æ•ˆæœï¼Œä½†æ˜¯Dateç±»é‡Œé¢ æ²¡æœ‰formatæ–¹æ³•ï¼Œé‚£æˆ‘ä»¬å°±å¯ä»¥ç»™ä»–æ·»åŠ ä¸€ä¸ªåŸå‹çš„æ–¹æ³•:</p><figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs qml"><span class="hljs-built_in">Date</span>.prototype.format=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;<br><span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getFullYear()+<span class="hljs-string">&quot;-&quot;</span>+(<span class="hljs-keyword">this</span>.getMonth()+<span class="hljs-number">1</span>)+<span class="hljs-string">&quot;-&quot;</span>+<span class="hljs-keyword">this</span>.getDate()<br>+<span class="hljs-string">&quot; &quot;</span>+<span class="hljs-keyword">this</span>.getHours()+<span class="hljs-string">&quot;:&quot;</span>+<span class="hljs-keyword">this</span>.getMinutes()+<span class="hljs-string">&quot;:&quot;</span>+<span class="hljs-keyword">this</span>.getSeconds();<br>&#125;<br><span class="hljs-keyword">var</span> <span class="hljs-built_in">date</span>=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();<br><span class="hljs-built_in">console</span>.debug(<span class="hljs-built_in">date</span>.format());<br></code></pre></td></tr></table></figure><h4 id="Booleanï¼š"><a href="#Booleanï¼š" class="headerlink" title="Booleanï¼š"></a>Booleanï¼š</h4><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs arcade"><span class="hljs-keyword">var</span> x = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Boolean</span>(<span class="hljs-literal">true</span>);<span class="hljs-comment">//ä¸ç”¨</span><br><span class="hljs-keyword">var</span> x = <span class="hljs-literal">true</span>;<span class="hljs-comment">//æ¨èçš„ä½¿ç”¨</span><br></code></pre></td></tr></table></figure><h4 id="Dateï¼š"><a href="#Dateï¼š" class="headerlink" title="Dateï¼š"></a>Dateï¼š</h4><table><thead><tr><th>æ–¹æ³•</th><th>æè¿°</th><th>FF</th><th>IE</th></tr></thead><tbody><tr><td>Date()</td><td>ï¼ˆç¤¼æ‹œå¹´æœˆæ—¥æ—¶åˆ†ç§’ï¼‰è¿”å›å½“æ—¥çš„æ—¥æœŸå’Œæ—¶é—´ã€‚</td><td>1</td><td>3</td></tr><tr><td>getDate()</td><td>ï¼ˆæ—¥ï¼‰ä» Date å¯¹è±¡è¿”å›ä¸€ä¸ªæœˆä¸­çš„æŸä¸€å¤© (1 ~ 31)ã€‚</td><td>1</td><td>3</td></tr><tr><td>getDay()</td><td>ï¼ˆç¤¼æ‹œï¼‰ä» Date å¯¹è±¡è¿”å›ä¸€å‘¨ä¸­çš„æŸä¸€å¤© (0 ~ 6)ã€‚</td><td>1</td><td>3</td></tr><tr><td>getMonth()</td><td>ï¼ˆæœˆï¼‰ä» Date å¯¹è±¡è¿”å›æœˆä»½ (0 ~ 11)ã€‚</td><td>1</td><td>3</td></tr><tr><td>getFullYear()</td><td>ï¼ˆå¹´ï¼‰ä» Date å¯¹è±¡ä»¥å››ä½æ•°å­—è¿”å›å¹´ä»½ã€‚</td><td>1</td><td>4</td></tr><tr><td>getYear()</td><td>ï¼ˆå¹´ï¼‰è¯·ä½¿ç”¨ getFullYear() æ–¹æ³•ä»£æ›¿ã€‚</td><td>1</td><td>3</td></tr><tr><td>getHours()</td><td>ï¼ˆæ—¶ï¼‰è¿”å› Date å¯¹è±¡çš„å°æ—¶ (0 ~ 23)ã€‚</td><td>1</td><td>3</td></tr><tr><td>getMinutes()</td><td>ï¼ˆåˆ†ï¼‰è¿”å› Date å¯¹è±¡çš„åˆ†é’Ÿ (0 ~ 59)ã€‚</td><td>1</td><td>3</td></tr><tr><td>getSeconds()</td><td>ï¼ˆç§’ï¼‰è¿”å› Date å¯¹è±¡çš„ç§’æ•° (0 ~ 59)ã€‚</td><td>1</td><td>3</td></tr><tr><td>getMilliseconds()</td><td>ï¼ˆæ¯«ç§’ï¼‰è¿”å› Date å¯¹è±¡çš„æ¯«ç§’(0 ~ 999)ã€‚</td><td>1</td><td>4</td></tr><tr><td>getTime()</td><td>è¿”å›ï¼ˆUnixçºªå…ƒæ—¶é—´ï¼‰1970 å¹´ 1 æœˆ 1 æ—¥è‡³ä»Šçš„æ¯«ç§’æ•°ã€‚</td><td>1</td><td>3</td></tr><tr><td>parse()</td><td>è¿”å›1970å¹´1æœˆ1æ—¥åˆå¤œåˆ°æŒ‡å®šæ—¥æœŸï¼ˆå­—ç¬¦ä¸²ï¼‰çš„æ¯«ç§’æ•°ã€‚</td><td>1</td><td>3</td></tr><tr><td>setDate()</td><td>è®¾ç½® Date å¯¹è±¡ä¸­æœˆçš„æŸä¸€å¤© (1 ~ 31)ã€‚</td><td>1</td><td>3</td></tr><tr><td>setMonth()</td><td>è®¾ç½® Date å¯¹è±¡ä¸­æœˆä»½ (0 ~ 11)ã€‚</td><td>1</td><td>3</td></tr><tr><td>setFullYear()</td><td>è®¾ç½® Date å¯¹è±¡ä¸­çš„å¹´ä»½ï¼ˆå››ä½æ•°å­—ï¼‰ã€‚</td><td>1</td><td>4</td></tr><tr><td>setYear()</td><td>è¯·ä½¿ç”¨ setFullYear() æ–¹æ³•ä»£æ›¿ã€‚</td><td>1</td><td>3</td></tr><tr><td>setHours()</td><td>è®¾ç½® Date å¯¹è±¡ä¸­çš„å°æ—¶ (0 ~ 23)ã€‚</td><td>1</td><td>3</td></tr><tr><td>setMinutes()</td><td>è®¾ç½® Date å¯¹è±¡ä¸­çš„åˆ†é’Ÿ (0 ~ 59)ã€‚</td><td>1</td><td>3</td></tr><tr><td>setSeconds()</td><td>è®¾ç½® Date å¯¹è±¡ä¸­çš„ç§’é’Ÿ (0 ~ 59)ã€‚</td><td>1</td><td>3</td></tr><tr><td>setMilliseconds()</td><td>è®¾ç½® Date å¯¹è±¡ä¸­çš„æ¯«ç§’ (0 ~ 999)ã€‚</td><td>1</td><td>4</td></tr><tr><td>setTime()</td><td>ä»¥æ¯«ç§’è®¾ç½® Date å¯¹è±¡ã€‚</td><td>1</td><td>3</td></tr></tbody></table><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs excel"><span class="hljs-built_in">var</span> myDate = new <span class="hljs-built_in">Date</span>();<br>console.debug(myDate);<br><br><span class="hljs-built_in">var</span> <span class="hljs-built_in">year</span> = myDate.getFullYear(); //å¹´<br><span class="hljs-built_in">var</span> <span class="hljs-built_in">month</span> = myDate.getMonth() + <span class="hljs-number">1</span>;//æœˆ <span class="hljs-number">0</span>-<span class="hljs-number">11</span><br><span class="hljs-built_in">var</span> <span class="hljs-built_in">date</span> = myDate.getDate();//æ—¥<br><span class="hljs-built_in">var</span> <span class="hljs-built_in">day</span> = myDate.getDay() + <span class="hljs-number">1</span>;//ç¤¼æ‹œ <span class="hljs-number">0</span>-<span class="hljs-number">6</span><br><span class="hljs-built_in">var</span> <span class="hljs-built_in">hour</span> = myDate.getHours(); //æ—¶<br><span class="hljs-built_in">var</span> <span class="hljs-built_in">minute</span> = myDate.getMinutes();//åˆ†<br><span class="hljs-built_in">var</span> <span class="hljs-built_in">second</span> = myDate.getSeconds();//æ¯«ç§’<br><span class="hljs-built_in">var</span> milliseconds = mydate.getMilliseconds();<br>console.debug(<span class="hljs-built_in">year</span>+<span class="hljs-string">&quot;-&quot;</span> +<span class="hljs-built_in">month</span> +<span class="hljs-string">&quot;-&quot;</span>+<span class="hljs-built_in">date</span>+<span class="hljs-string">&quot; &quot;</span>+<span class="hljs-built_in">hour</span>+<span class="hljs-string">&quot;:&quot;</span>+<span class="hljs-built_in">minute</span>+<span class="hljs-string">&quot;:&quot;</span>+<span class="hljs-built_in">second</span>);<br></code></pre></td></tr></table></figure><h4 id="Mathï¼š"><a href="#Mathï¼š" class="headerlink" title="Mathï¼š"></a>Mathï¼š</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//ceil å‘ä¸Šèˆå…¥(ä¸‹é¢çš„å€¼éƒ½æ˜¯6)</span><br><span class="hljs-built_in">console</span>.debug(<span class="hljs-built_in">Math</span>.ceil(<span class="hljs-number">5.1</span>));<br><span class="hljs-built_in">console</span>.debug(<span class="hljs-built_in">Math</span>.ceil(<span class="hljs-number">5.01</span>));<br><span class="hljs-built_in">console</span>.debug(<span class="hljs-built_in">Math</span>.ceil(<span class="hljs-number">5.8</span>));<br><span class="hljs-built_in">console</span>.debug(<span class="hljs-string">&quot;-------------------------------&quot;</span>);<br><br><span class="hljs-comment">//ceil å‘ä¸‹èˆå…¥(ä¸‹é¢çš„å€¼éƒ½æ˜¯5)</span><br><span class="hljs-built_in">console</span>.debug(<span class="hljs-built_in">Math</span>.floor(<span class="hljs-number">5.1</span>));<br><span class="hljs-built_in">console</span>.debug(<span class="hljs-built_in">Math</span>.floor(<span class="hljs-number">5.01</span>));<br><span class="hljs-built_in">console</span>.debug(<span class="hljs-built_in">Math</span>.floor(<span class="hljs-number">5.8</span>));<br><span class="hljs-built_in">console</span>.debug(<span class="hljs-string">&quot;-------------------------------&quot;</span>);<br><br><span class="hljs-comment">//æŠŠæ•°å››èˆäº”å…¥ä¸ºæœ€æ¥è¿‘çš„æ•´æ•°</span><br><span class="hljs-built_in">console</span>.debug(<span class="hljs-built_in">Math</span>.round(<span class="hljs-number">5.1</span>));  <span class="hljs-comment">//5</span><br><span class="hljs-built_in">console</span>.debug(<span class="hljs-built_in">Math</span>.round(<span class="hljs-number">5.01</span>)); <span class="hljs-comment">//5</span><br><span class="hljs-built_in">console</span>.debug(<span class="hljs-built_in">Math</span>.round(<span class="hljs-number">5.8</span>));  <span class="hljs-comment">//6</span><br><span class="hljs-built_in">console</span>.debug(<span class="hljs-string">&quot;-------------------------------&quot;</span>);<br><br><span class="hljs-comment">//å¾—åˆ°æœ€å¤§çš„å€¼</span><br><span class="hljs-built_in">document</span>.write(<span class="hljs-built_in">Math</span>.max(<span class="hljs-number">5</span>,<span class="hljs-number">7</span>));  <span class="hljs-comment">//7</span><br><span class="hljs-built_in">document</span>.write(<span class="hljs-built_in">Math</span>.max(-<span class="hljs-number">3</span>,<span class="hljs-number">5</span>));  <span class="hljs-comment">//5</span><br><span class="hljs-built_in">document</span>.write(<span class="hljs-built_in">Math</span>.max(-<span class="hljs-number">3</span>,-<span class="hljs-number">5</span>));  <span class="hljs-comment">//-3</span><br><span class="hljs-built_in">document</span>.write(<span class="hljs-built_in">Math</span>.max(<span class="hljs-number">7.25</span>,<span class="hljs-number">7.30</span>)); <span class="hljs-comment">//7.3</span><br><span class="hljs-built_in">console</span>.debug(<span class="hljs-built_in">Math</span>.max(<span class="hljs-number">5</span>,<span class="hljs-number">7</span>,<span class="hljs-number">3</span>,<span class="hljs-number">56</span>,-<span class="hljs-number">4</span>)); <span class="hljs-comment">//56</span><br><span class="hljs-built_in">console</span>.debug(<span class="hljs-string">&quot;-------------------------------&quot;</span>);<br><br><span class="hljs-comment">//å¾—åˆ°æœ€å°çš„å€¼</span><br><span class="hljs-built_in">Math</span>.min(<span class="hljs-number">4</span>,<span class="hljs-number">56</span>); <span class="hljs-comment">//4</span><br><span class="hljs-built_in">console</span>.debug(<span class="hljs-string">&quot;-------------------------------&quot;</span>);<br><br><span class="hljs-comment">//äº§ç”Ÿéšæœºæ•° 0.0 ~ 1.0 ä¹‹é—´çš„ä¸€ä¸ªä¼ªéšæœºæ•°ã€‚</span><br><span class="hljs-built_in">Math</span>.random();<br></code></pre></td></tr></table></figure><p>Numberï¼š</p><blockquote><p>MIN_VALVE                      å¯è¡¨ç¤ºçš„æœ€å°å€¼</p><p>NaN                                  éæ•°å€¼</p><p>NEGATIVE_INFINITY        è´Ÿæ— ç©·å¤§ï¼Œæº¢å‡ºæ—¶è¿”å›è¯¥å€¼</p><p>POSITIVE_INFINITY          æ­£æ— ç©·å¤§ï¼Œæº¢å‡ºæ—¶è¿”å›æ”¹åˆ¶</p></blockquote><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs arcade"><span class="hljs-keyword">var</span> myNumber1=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Number</span>(<span class="hljs-number">123</span>);<br><span class="hljs-keyword">var</span> myNumber2=<span class="hljs-number">123</span>;<span class="hljs-comment">//æ¨è</span><br></code></pre></td></tr></table></figure><p>Stringï¼š</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-built_in">var</span> <span class="hljs-built_in">str</span> = <span class="hljs-string">&quot;abcde&quot;</span>;<br>console.debug(<span class="hljs-built_in">str</span>.length);<span class="hljs-comment">//5</span><br><br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * substr(begin,length)</span><br><span class="hljs-comment"> * substr:æˆªå–å­—ç¬¦ä¸²(è¿”å›è¿™æˆªå–åçš„å­—ç¬¦ä¸²ï¼ŒåŸæ¥çš„ä¸å˜)</span><br><span class="hljs-comment"> *  ç¬¬ä¸€ä¸ªå‚æ•°ï¼šä»å“ªå¼€å§‹(ä»0å¼€å§‹ç®—)</span><br><span class="hljs-comment"> *  ç¬¬äºŒä¸ªå‚æ•°ï¼šæˆªå–å¤šå°‘ä¸ª(å¦‚æœæ²¡æœ‰è¿™ä¸ªå‚æ•°ï¼Œå°±å…¨éƒ¨æˆªå–)</span><br><span class="hljs-comment"> */</span> <br><span class="hljs-built_in">var</span> <span class="hljs-built_in">str</span>=<span class="hljs-string">&quot;Hello world!&quot;</span>;<br>console.debug(<span class="hljs-built_in">str</span>.substr(<span class="hljs-number">3</span>));  <span class="hljs-comment">// lo world!</span><br>console.debug(<span class="hljs-built_in">str</span>.substr(<span class="hljs-number">3</span>,<span class="hljs-number">2</span>)); <span class="hljs-comment">//lo</span><br><br>substring(begin,end)<br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * substring:æˆªå–å­—ç¬¦ä¸²(è¿”å›è¿™æˆªå–åçš„å­—ç¬¦ä¸²ï¼ŒåŸæ¥çš„ä¸å˜)</span><br><span class="hljs-comment"> *  ç¬¬ä¸€ä¸ªå‚æ•°ï¼šä»å“ªå¼€å§‹(ä»0å¼€å§‹ç®—)</span><br><span class="hljs-comment"> *  ç¬¬äºŒä¸ªå‚æ•°ï¼šä»å“ªç»“æŸ(å¦‚æœæ²¡æœ‰è¿™ä¸ªå‚æ•°ï¼Œå°±ä½¿ç”¨æˆªå–)</span><br><span class="hljs-comment"> */</span><br><span class="hljs-built_in">var</span> <span class="hljs-built_in">str</span>=<span class="hljs-string">&quot;Hello world!&quot;</span>;<br>console.debug(<span class="hljs-built_in">str</span>.substring(<span class="hljs-number">3</span>));  <span class="hljs-comment">// lo world!</span><br>console.debug(<span class="hljs-built_in">str</span>.substring(<span class="hljs-number">1</span>,<span class="hljs-number">3</span>)); <span class="hljs-comment">//el</span><br><br><span class="hljs-comment">//concat(str1,str2)</span><br><span class="hljs-built_in">var</span> str1 = <span class="hljs-string">&quot;hello&quot;</span>;<br><span class="hljs-built_in">var</span> str2 = <span class="hljs-string">&quot;world&quot;</span>;<br><span class="hljs-built_in">var</span> str3 = str1.concat(str2);<br>console.debug(str3);<span class="hljs-comment">//helloworld</span><br><br><span class="hljs-comment">//split(&quot;åˆ†éš”ç¬¦&quot;)</span><br><span class="hljs-built_in">var</span> str1 = <span class="hljs-string">&quot;å¼ ä¸‰,æå››,åå¸&quot;</span>;<br>console.debug(str1.split(<span class="hljs-string">&quot;,&quot;</span>));<span class="hljs-comment">// [&quot;å¼ ä¸‰&quot;, &quot;æå››&quot;, &quot;åå¸&quot;]</span><br><br><span class="hljs-comment">//charCodeAt(index)è¿”å›æŒ‡å®šä½ç½®çš„unicodeç </span><br><span class="hljs-built_in">var</span> str1 = <span class="hljs-string">&quot;abcde&quot;</span>;<br>console.debug(str1.charCodeAt(<span class="hljs-number">0</span>));<span class="hljs-comment">//å–åˆ°å¯¹åº”ç´¢å¼•å¤„çš„unicodeç </span><br></code></pre></td></tr></table></figure><p>Globalï¼ˆå…¨å±€å¯¹è±¡ï¼‰</p><h4 id="Arrayï¼š"><a href="#Arrayï¼š" class="headerlink" title="Arrayï¼š"></a>Arrayï¼š</h4><h5 id="æ•°ç»„å£°æ˜"><a href="#æ•°ç»„å£°æ˜" class="headerlink" title="æ•°ç»„å£°æ˜"></a>æ•°ç»„å£°æ˜</h5><p>æ³¨æ„ï¼šJSåŒä¸€ä¸ªæ•°ç»„é‡Œé¢ï¼Œä»€ä¹ˆéƒ½å¯ä»¥è£…ï¼Œæ²¡æœ‰æ•°æ®ç±»å‹é™åˆ¶</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//ç¬¬ä¸€ç§å£°æ˜æ–¹æ³•</span><br><span class="hljs-keyword">var</span> arr1 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>();<br>arr1[<span class="hljs-number">0</span>] = <span class="hljs-string">&quot;å¤§å¨ƒ&quot;</span>;<br>arr1[<span class="hljs-number">1</span>] = <span class="hljs-string">&quot;äºŒå¨ƒ&quot;</span>;<br>arr1[<span class="hljs-number">2</span>] = <span class="hljs-string">&quot;ä¸‰å¨ƒ&quot;</span>;<br>arr1[<span class="hljs-number">3</span>] = <span class="hljs-string">&quot;å››å¨ƒ&quot;</span>;<br>arr1[<span class="hljs-number">7</span>] = <span class="hljs-string">&quot;è‘«èŠ¦å¦¹&quot;</span>;<br><span class="hljs-built_in">console</span>.debug(arr1);<br><br><span class="hljs-comment">//ç¬¬äºŒç§å£°æ˜æ–¹æ³•(å…ˆç¡®å®šæ•°ç»„çš„é•¿åº¦)</span><br><span class="hljs-keyword">var</span> arr2 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(<span class="hljs-number">5</span>);<br>arr2[<span class="hljs-number">0</span>] = <span class="hljs-string">&quot;å¤§åŠ›å¨ƒ&quot;</span>;<br>arr2[<span class="hljs-number">7</span>] = <span class="hljs-string">&quot;è‘«èŠ¦å¦¹&quot;</span>;<br><span class="hljs-built_in">console</span>.debug(arr2);<br><br><span class="hljs-comment">//ç¬¬ä¸‰ç§å£°æ˜æ–¹æ³•(ç›´æ¥åœ¨é‡Œè¦å…ˆåŠ ä¸Šæ•°æ®)</span><br><span class="hljs-keyword">var</span> arr3 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(<span class="hljs-string">&quot;å¤§å¨ƒ&quot;</span>,<span class="hljs-number">5</span>,<span class="hljs-string">&quot;ä¸‰å¨ƒ&quot;</span>,<span class="hljs-number">8</span>);<br><span class="hljs-built_in">console</span>.debug(arr3);<br><br><span class="hljs-comment">//ç¬¬å››ç§å£°æ˜æ–¹æ³•(å»ºè®®)</span><br><span class="hljs-keyword">var</span> arr4 = [<span class="hljs-string">&quot;å¤§å¨ƒ&quot;</span>,<span class="hljs-string">&quot;äºŒå¨ƒ&quot;</span>,<span class="hljs-string">&quot;ä¸‰å¨ƒ&quot;</span>,<span class="hljs-string">&quot;ä¸ƒå¨ƒ&quot;</span>];<br><span class="hljs-built_in">console</span>.debug(arr4);<br></code></pre></td></tr></table></figure><h5 id="æ•°ç»„çš„ç±»ä¸æ–¹æ³•"><a href="#æ•°ç»„çš„ç±»ä¸æ–¹æ³•" class="headerlink" title="æ•°ç»„çš„ç±»ä¸æ–¹æ³•"></a>æ•°ç»„çš„ç±»ä¸æ–¹æ³•</h5><p>var arr = new Aarry();é€šè¿‡æ„é€ æ–¹æ³• åˆ›å»ºå¯¹è±¡;</p><p>length : æ‹¿åˆ°æ•°ç»„çš„é•¿åº¦;</p><p>join(â€œ$â€) : å°†æ•°ç»„è½¬åŒ–æˆå­—ç¬¦ä¸²;   </p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs elixir">var arr = [<span class="hljs-string">&quot;å¤§å¨ƒ&quot;</span>,<span class="hljs-string">&quot;äºŒå¨ƒ&quot;</span>,<span class="hljs-string">&quot;ä¸‰å¨ƒ&quot;</span>,<span class="hljs-string">&quot;ä¸ƒå¨ƒ&quot;</span>];<br>console.debug(arr.join(<span class="hljs-string">&quot;$&quot;</span>));  <span class="hljs-regexp">//</span>å¤§å¨ƒ<span class="hljs-variable">$äºŒ</span>å¨ƒ<span class="hljs-variable">$ä¸‰</span>å¨ƒ<span class="hljs-variable">$ä¸ƒ</span>å¨ƒ(é»˜è®¤ç”¨ï¼Œéš”å¼€)<br></code></pre></td></tr></table></figure><p>splice() æ–¹æ³•ç”¨äºæ’å…¥ã€åˆ é™¤æˆ–æ›¿æ¢æ•°ç»„çš„å…ƒç´ ;</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs awk">var arr = [<span class="hljs-string">&quot;å¤§å¨ƒ&quot;</span>,<span class="hljs-string">&quot;äºŒå¨ƒ&quot;</span>,<span class="hljs-string">&quot;ä¸‰å¨ƒ&quot;</span>,<span class="hljs-string">&quot;å››å¨ƒ&quot;</span>,<span class="hljs-string">&quot;ä¸ƒå¨ƒ&quot;</span>];<br>/**<br> *splice()å‚æ•°ä»‹ç»<br> * <span class="hljs-number">1</span>.start:ä»å“ªä¸ªä½ç½®å¼€å§‹(å¿…éœ€)<br> * <span class="hljs-number">2</span>.deletecount:åˆ é™¤å‡ ä¸ªå…ƒç´ (å¿…éœ€)<br> * <span class="hljs-number">3</span>.itemsï¼šæ·»åŠ çš„å…ƒç´ <br> */<br><span class="hljs-regexp">//</span>arr.splice(<span class="hljs-number">3</span>,<span class="hljs-number">1</span>); <span class="hljs-regexp">//</span>åˆ é™¤äº†å››å¨ƒ<br><span class="hljs-regexp">//</span>arr.splice(<span class="hljs-number">4</span>,<span class="hljs-number">0</span>,<span class="hljs-string">&quot;äº”å¨ƒ&quot;</span>,<span class="hljs-string">&quot;å…­å¨ƒ&quot;</span>); <span class="hljs-regexp">//</span>æ·»åŠ <br>arr.splice(<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&quot;æ°´å¨ƒ&quot;</span>); <span class="hljs-regexp">//</span>ä¿®æ”¹<br>console.debug(arr);<br></code></pre></td></tr></table></figure><h5 id="forâ€¦inâ€¦ï¼šArrayæ•°ç»„éå†"><a href="#forâ€¦inâ€¦ï¼šArrayæ•°ç»„éå†" class="headerlink" title="forâ€¦inâ€¦ï¼šArrayæ•°ç»„éå†"></a>forâ€¦inâ€¦ï¼šArrayæ•°ç»„éå†</h5><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs inform7">var <span class="hljs-keyword">person</span> = &#123;&#125;;<br><span class="hljs-keyword">person</span>.name = <span class="hljs-string">&quot;å¼ å±±&quot;</span>;<br><span class="hljs-keyword">person</span>.age = 34;<br><span class="hljs-keyword">person</span>.<span class="hljs-keyword">say</span> = function()&#123;&#125;;<br><span class="hljs-keyword">person</span><span class="hljs-comment">[&quot;sex&quot;]</span> = &#x27;ç”·&#x27;;<br>// <span class="hljs-keyword">person</span>.name ä¸ <span class="hljs-keyword">person</span><span class="hljs-comment">[&quot;name&quot;]</span> æ˜¯ä¸€å›äº‹<br><br>console.debug(<span class="hljs-keyword">person</span>);<br><br>//keyçš„å€¼æ˜¯å±æ€§<br>for(var key in <span class="hljs-keyword">person</span>)&#123;<br>console.debug(key);<br>console.debug(<span class="hljs-keyword">person</span><span class="hljs-comment">[key]</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="/2019/12/10/JavaScript/image-20200104221037046.png" alt="image-20200104221037046"></p><h3 id="BOMæµè§ˆå™¨å¯¹è±¡æ¨¡å‹"><a href="#BOMæµè§ˆå™¨å¯¹è±¡æ¨¡å‹" class="headerlink" title="BOMæµè§ˆå™¨å¯¹è±¡æ¨¡å‹"></a>BOMæµè§ˆå™¨å¯¹è±¡æ¨¡å‹</h3><p>BOMæ˜¯browser object modelçš„ç¼©å†™ï¼Œç®€ç§°æµè§ˆå™¨å¯¹è±¡æ¨¡å‹ï¼Œè¿™ä¸ªBOMæœ‰å¦‚ä¸‹å†…å®¹:</p><ul><li>ä½¿ç”¨é¢å‘å¯¹è±¡çš„æ€æƒ³æ¥æŠ½è±¡æµè§ˆå™¨ç›¸å…³ç»„ä»¶</li><li>æ‰“å¼€ä¸€ä¸ªwindowä»£è¡¨ä¸€ä¸ªçª—å£<ul><li>â€‹    çª—å£é‡Œé¢ä½¿ç”¨locationè¡¨ç¤ºåœ°å€æ </li><li>â€‹    çª—å£çš„å†å²è®°å½•ä½¿ç”¨historyæ¥è¡¨ç¤º</li><li>â€‹    æµè§ˆå™¨çš„ä¿¡æ¯ä½¿ç”¨navigatoræ¥è¡¨ç¤º</li><li>â€‹    çª—å£é‡Œé¢çš„å†…å®¹ä½¿ç”¨documentæ¥è¡¨ç¤º</li></ul></li><li>çª—å£ä¸­çš„æ¡†æ¶ä½¿ç”¨framesæ¥è¡¨ç¤º</li></ul><p>â‘ ã€documentå’Œwindowæœ‰æ²¡æœ‰å…³ç³»ï¼Ÿ</p><p>æœ‰å…³ç³»ï¼Œåº”è¯¥å…ˆæ‰¾åˆ°windowï¼Œåœ¨èƒ½æ‰¾åˆ°documentï¼Œè€Œwindowæ˜¯é¡¶çº§å¯¹è±¡ï¼Œå¯ä»¥é»˜è®¤ä¸å†™</p><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript"><span class="hljs-built_in">console</span>.debug(<span class="hljs-built_in">document</span>);<span class="hljs-regexp">//</span>å¯ä»¥æ‹¿åˆ°<span class="hljs-built_in">document</span>å¯¹è±¡<br><span class="hljs-built_in">console</span>.debug(<span class="hljs-built_in">window</span>.<span class="hljs-built_in">document</span>);<span class="hljs-regexp">//</span>å’Œå‰é¢ä¸€æ ·ï¼Œ<span class="hljs-built_in">window</span>æ˜¯é¡¶çº§å¯¹è±¡ï¼Œé»˜è®¤ä¸å†™<br></code></pre></td></tr></table></figure><p>â‘¡ã€é“¾æ¥å¯¹è±¡ document.links</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript"><span class="hljs-built_in">console</span>.debug(<span class="hljs-built_in">window</span>.<span class="hljs-built_in">document</span>.links);<span class="hljs-regexp">//</span>é“¾æ¥å¯¹è±¡<br><span class="hljs-built_in">console</span>.debug(<span class="hljs-built_in">window</span>.<span class="hljs-built_in">document</span>.links[<span class="hljs-number">0</span>]);<span class="hljs-regexp">//</span>å–åˆ°ç¬¬ä¸€ä¸ªå¯¹è±¡<br></code></pre></td></tr></table></figure><p>ä»£ç å¦‚ä¸‹ï¼š</p><p><img src="/2019/12/10/JavaScript/image-20200104223935479.png" alt="image-20200104223935479"></p><p>â‘¢ã€é”šè®°é“¾æ¥å¯¹è±¡ document.anchors</p><p>ä»£ç å¦‚ä¸‹ï¼š</p><p><img src="/2019/12/10/JavaScript/image-20200104224427016.png" alt="image-20200104224427016"></p><p>â‘£è¡¨å•å¯¹è±¡ document.forms</p><p>ä»£ç å¦‚ä¸‹ï¼š</p><p><img src="/2019/12/10/JavaScript/image-20200104224807906.png" alt="image-20200104224807906"></p><h3 id="Windowå¯¹è±¡"><a href="#Windowå¯¹è±¡" class="headerlink" title="Windowå¯¹è±¡"></a>Windowå¯¹è±¡</h3><h4 id="1ã€æ¶ˆæ¯æœºåˆ¶"><a href="#1ã€æ¶ˆæ¯æœºåˆ¶" class="headerlink" title="1ã€æ¶ˆæ¯æœºåˆ¶"></a>1ã€æ¶ˆæ¯æœºåˆ¶</h4><p>JavaScriptä¸‰å¤§æ¶ˆæ¯äº¤äº’æœºåˆ¶ï¼š</p><p>â‘ alert(â€˜ä¿¡æ¯â€™)ï¼šæ¶ˆæ¯æ¡†</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">alert(<span class="hljs-string">&quot;Helloï¼&quot;</span>)<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><p>â‘¡prompt(â€˜æç¤ºä¿¡æ¯â€™,é»˜è®¤å€¼)ï¼š æ˜¾ç¤ºå¯æç¤ºçš„ç”¨æˆ·è¾“å…¥æ¡†ï¼Œè®©ç”¨æˆ·è¾“å…¥</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs arcade"><span class="hljs-keyword">var</span> inputText = prompt(<span class="hljs-string">&quot;è¯·è¾“å…¥ä½ çš„åå­—&quot;</span>,<span class="hljs-string">&quot;å¦‚:å­™æ‚Ÿç©º&quot;</span>);<br><span class="hljs-built_in">Console</span>.debug(inputText);<br></code></pre></td></tr></table></figure><p>â‘¢confirm( ) ï¼š ç¡®è®¤æ¡†</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> flag = <span class="hljs-built_in">window</span>.confirm(<span class="hljs-string">&quot;ä½ ç¡®å®šè¦åˆ é™¤æ•°æ®&quot;</span>);<br><span class="hljs-built_in">console</span>.debug(flag);<br>&lt;a href=<span class="hljs-string">&quot;http://www.baidu.com&quot;</span> onclick=<span class="hljs-string">&quot;javascript: return confirm(&#x27;äº²,ä½ ç¡®å®šåˆ é™¤å—?&#x27;)&quot;</span>&gt;åˆ é™¤&lt;/a&gt;<br></code></pre></td></tr></table></figure><h4 id="2ã€æ‰“å¼€ä¸å…³é—­çª—å£"><a href="#2ã€æ‰“å¼€ä¸å…³é—­çª—å£" class="headerlink" title="2ã€æ‰“å¼€ä¸å…³é—­çª—å£"></a>2ã€æ‰“å¼€ä¸å…³é—­çª—å£</h4><p>window.open()æ–¹æ³•ï¼šæ‰“å¼€ä¸€ä¸ªæ–°çª—å£</p><hr><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">window</span>.<span class="hljs-keyword">open</span>(&quot;http://kongwei-liao.cn/&quot;);<br></code></pre></td></tr></table></figure><p>è°ƒç”¨ç¤ºä¾‹ï¼š</p><p><img src="/2019/12/10/JavaScript/image-20200105102501714.png" alt="image-20200105102501714"></p><hr><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">window</span>.<span class="hljs-keyword">open</span>(&quot;http://kongwei-liao.cn/&quot;, &quot;_blank&quot;,&quot;&quot;);<br></code></pre></td></tr></table></figure><p>ç¬¬ä¸€ä¸ªå‚æ•°ï¼šè¦æ‰“å¼€çš„ç½‘é¡µurlï¼Œå¯ä»¥æ˜¯ç›¸å¯¹è·¯å¾„;</p><p>ç¬¬äºŒä¸ªå‚æ•°ï¼šæ‰“å¼€çª—å£çš„ç›®æ ‡ï¼Œé™¤äº†è‡ªå®šä¹‰åç§°ä»¥å¤–ï¼Œè¿˜åŒ…æ‹¬ <strong>_self</strong>, <strong>_parent</strong>, <strong>_top</strong>ä»¥åŠ <strong>_blank</strong>å‡ ä¸ªç‰¹æ®Šå€¼ï¼Œé»˜è®¤å€¼æ˜¯<strong>_blank</strong>;</p><p>ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šæ˜¯ä¸€ä¸ªä½¿ç”¨,ç»„æˆçš„å­—ç¬¦ä¸²ï¼Œç”¨äºæè¿°æ‰“å¼€çª—å£çš„ç‰¹æ€§ï¼Œæ¯”å¦‚å¤§å°ã€æ˜¯å¦æœ‰å·¥å…·æ ç­‰ã€‚</p><p>è°ƒç”¨ç¤ºä¾‹ï¼š</p><p><img src="/2019/12/10/JavaScript/image-20200105103522659.png" alt="image-20200105103522659"></p><p><img src="/2019/12/10/JavaScript/image-20200105103704575.png" alt="image-20200105103704575"></p><hr><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">window.open<span class="hljs-params">(&quot;http://www.baidu.com&quot;,&quot;_blank&quot;,&quot;<span class="hljs-attr">toolbar</span>=yes, <span class="hljs-attr">location</span>=yes, <span class="hljs-attr">directories</span>=no, <span class="hljs-attr">status</span>=no, <span class="hljs-attr">menubar</span>=yes, <span class="hljs-attr">scrollbars</span>=yes, <span class="hljs-attr">resizable</span>=no, <span class="hljs-attr">copyhistory</span>=yes, <span class="hljs-attr">width</span>=400, <span class="hljs-attr">height</span>=400&quot;)</span>;<br></code></pre></td></tr></table></figure><p>â‘ ã€å¯ä»¥ä¿®æ”¹å‚æ•° toolbar / width /heightçš„å€¼ï¼š</p><p>è°ƒç”¨ç¤ºä¾‹ï¼š</p><p><img src="/2019/12/10/JavaScript/image-20200105104308765.png" alt="image-20200105104308765"></p><p>â‘¡ã€æŠŠå‚æ•°å…¨éƒ¨æ”¹æˆ no ï¼Œæ²¡æœ‰å›é€€åŠŸèƒ½ï¼Œæ— æ³•è°ƒæ•´çª—å£å¤§å°ï¼Œæ²¡æœ‰æ»šåŠ¨æ¡ï¼šâ€˜</p><p>æ³¨æ„ï¼šéƒ¨åˆ†æµè§ˆå™¨å¯èƒ½å¹¶ä¸ä¸¥æ ¼æŒ‰ç…§å‚æ•°çš„è®¾ç½®æ‰§è¡Œï¼Œå¦‚Chromeç­‰ã€‚</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">window.open<span class="hljs-params">(&quot;http://www.baidu.com&quot;,&quot;_blank&quot;,&quot;<span class="hljs-attr">toolbar</span>=no, <span class="hljs-attr">location</span>=no, <span class="hljs-attr">directories</span>=no, <span class="hljs-attr">status</span>=no,<span class="hljs-attr">menubar</span>=no, <span class="hljs-attr">scrollbars</span>=no, <span class="hljs-attr">resizable</span>=no, <span class="hljs-attr">copyhistory</span>=no, <span class="hljs-attr">width</span>=400, <span class="hljs-attr">height</span>=400&quot;)</span>;<br></code></pre></td></tr></table></figure><p>è°ƒç”¨ç¤ºä¾‹ï¼š</p><p><img src="/2019/12/10/JavaScript/image-20200105104858431.png" alt="image-20200105104858431"></p><h4 id="3ã€çª—å£å¤§å°ä¸ä½ç½®ï¼ˆäº†è§£ï¼‰"><a href="#3ã€çª—å£å¤§å°ä¸ä½ç½®ï¼ˆäº†è§£ï¼‰" class="headerlink" title="3ã€çª—å£å¤§å°ä¸ä½ç½®ï¼ˆäº†è§£ï¼‰"></a>3ã€çª—å£å¤§å°ä¸ä½ç½®ï¼ˆäº†è§£ï¼‰</h4><p>åªæœ‰IEæ”¯æŒï¼Œç”¨å¤„ä¸å¤§ä»…ä½œäº†è§£å†…å®¹</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">move<span class="hljs-constructor">By(<span class="hljs-params">dx</span>, <span class="hljs-params">dy</span>)</span>;<span class="hljs-comment">//ç§»åŠ¨åç§»é‡</span><br>move<span class="hljs-constructor">To(<span class="hljs-params">x</span>, <span class="hljs-params">y</span>)</span>;<span class="hljs-comment">//ç§»åŠ¨åˆ°æŒ‡å®šåº§æ ‡</span><br>resize<span class="hljs-constructor">By(<span class="hljs-params">dw</span>, <span class="hljs-params">dh</span>)</span>;<span class="hljs-comment">//çª—å£å¤§å°æ”¹å˜</span><br>resize<span class="hljs-constructor">To(<span class="hljs-params">w</span>, <span class="hljs-params">h</span>)</span>;<span class="hljs-comment">//çª—å£å¤§å°æ”¹å˜</span><br></code></pre></td></tr></table></figure><p>ä¾‹ï¼š</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-section">&lt;body&gt;</span><br><span class="hljs-section">&lt;script type=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="hljs-attribute">window</span>.moveBy(<span class="hljs-number">10</span>, <span class="hljs-number">20</span>);//å¾€å³ç§»<span class="hljs-number">10</span>ä¸ªåƒç´ ï¼Œå¾€ä¸‹ç§»<span class="hljs-number">20</span>ä¸ªåƒç´ <br><span class="hljs-attribute">window</span>.resizeTo(<span class="hljs-number">800</span>, <span class="hljs-number">500</span>);//æŠŠçª—å£å¤§å°å˜æˆå®½<span class="hljs-number">150</span>ï¼Œé«˜<span class="hljs-number">300</span>åƒç´ <br><span class="hljs-attribute">window</span>.resizeBy(<span class="hljs-number">150</span>, <span class="hljs-number">0</span>);//æ”¹å˜çª—å£çš„å®½å˜ä¸º<span class="hljs-number">150</span>ï¼Œé«˜åº¦ä¸å˜<br><span class="hljs-attribute">window</span>.moveTo(<span class="hljs-number">20</span>, <span class="hljs-number">30</span>);//ç§°åˆ°å±å¹•å·¦ä¸Šè§’ï¼Œå±å¹•åæ ‡ (<span class="hljs-number">0</span>,<span class="hljs-number">0</span>)<br><span class="hljs-attribute">window</span>.open(<span class="hljs-string">&quot;http://www.baidu.com&quot;</span>,<span class="hljs-string">&quot;_blank&quot;</span>,<span class="hljs-string">&quot;toolbar=no, location=no, directories=no, status=no,menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=400, height=400&quot;</span>);<br><span class="hljs-section">&lt;/script&gt;</span><br><span class="hljs-section">&lt;/body&gt;</span><br></code></pre></td></tr></table></figure><p><img src="/2019/12/10/JavaScript/image-20200105110159145.png" alt="image-20200105110159145"></p><p>IEæµè§ˆå™¨è·å–çª—å£åæ ‡ï¼š</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-keyword">screenLeft </span>-è·å¾—çª—å£æ‰€åœ¨Xåæ ‡å€¼<br><span class="hljs-keyword">screenTop </span>-è·å¾—çª—å£Yåæ ‡å€¼<br></code></pre></td></tr></table></figure><p>Mozillaç­‰å…¶å®ƒæµè§ˆå™¨è·å–çª—å£åæ ‡ï¼š</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-keyword">screenX </span>-è·å¾—çª—å£æ‰€åœ¨Xåæ ‡å€¼<br><span class="hljs-keyword">screenY </span>-è·å¾—çª—å£Yåæ ‡å€¼<br></code></pre></td></tr></table></figure><p>//å…¼å®¹æµè§ˆå™¨æœ€ä½³æ–¹æ³•</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">var</span> x = <span class="hljs-built_in">window</span>.screenX || <span class="hljs-built_in">window</span>.screenLeft;<br><span class="hljs-keyword">var</span> y = <span class="hljs-built_in">window</span>.screenY || <span class="hljs-built_in">window</span>.screenTop;<br>alert(<span class="hljs-string">&quot;Xåæ ‡=&quot;</span> + x + <span class="hljs-string">&quot;, Yåæ ‡=&quot;</span> + y);<br></code></pre></td></tr></table></figure><p><img src="/2019/12/10/JavaScript/image-20200105110538770.png" alt="image-20200105110538770"></p><h4 id="4ã€historyå†å²å¯¹è±¡ï¼ˆäº†è§£ï¼‰"><a href="#4ã€historyå†å²å¯¹è±¡ï¼ˆäº†è§£ï¼‰" class="headerlink" title="4ã€historyå†å²å¯¹è±¡ï¼ˆäº†è§£ï¼‰"></a>4ã€historyå†å²å¯¹è±¡ï¼ˆäº†è§£ï¼‰</h4><p>â‘ ã€history.back()å‡½æ•°ï¼Œåè·³;</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:window.history.back()&quot;</span>&gt;</span>å‘åè·³<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br></code></pre></td></tr></table></figure><p>è¿ç”¨åœºæ™¯ï¼š</p><p><img src="/2019/12/10/JavaScript/clip_image010.png"></p><p>â‘¡ã€history.forward()å‡½æ•°ï¼Œå‰è·³;</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:window.history.forward()&quot;</span>&gt;</span>å‘å‰è·³<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="/2019/12/10/JavaScript/hucnO3g2Ks.gif" alt="gif"></p><p>â‘¢ã€history.go(index)å‡½æ•°ï¼Œåœ¨æµè§ˆå™¨å†å²è®°å½•ä¸­è·³è½¬ï¼Œæ­£æ•°ä¸ºå‰è·³ï¼Œè´Ÿæ•°ä¸ºåè·³</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">history.go(<span class="hljs-number">1</span>);<span class="hljs-regexp">//</span>å‘å‰è·³ä¸€ä¸ªé¡µé¢ï¼Œgo(<span class="hljs-number">2</span>)å‘å‰è·³ä¸¤ä¸ªé¡µé¢<br>history.go(-<span class="hljs-number">1</span>);<span class="hljs-regexp">//</span>å‘åè·³ä¸€ä¸ªé¡µé¢<br></code></pre></td></tr></table></figure><h4 id="5ã€locationä½ç½®å¯¹è±¡"><a href="#5ã€locationä½ç½®å¯¹è±¡" class="headerlink" title="5ã€locationä½ç½®å¯¹è±¡"></a>5ã€locationä½ç½®å¯¹è±¡</h4><p>windowå¯¹è±¡çš„locationå±æ€§ï¼Œä¿æŠ¤äº†è¯¥çª—å£æ‰€è£…è½½æ–‡æ¡£çš„åœ°å€:locationåŒ…å«çš„å¸¸ç”¨å±æ€§:</p><ol><li><p>hostname: æ–‡æ¡£æ‰€åœ¨åœ°å€çš„ä¸»æœºå(ç°åœ¨çœ‹ä¸åˆ°ï¼Œæ˜¯é™æ€é¡µé¢ï¼Œå¦‚æœåœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œï¼Œå°±å¯ä»¥çœ‹åˆ°)</p></li><li><p>href: æ–‡æ¡£æ‰€åœ¨åœ°å€çš„URLåœ°å€(ä½¿ç”¨æœ€å¤š)</p></li><li><p>host: æ–‡æ¡£æ‰€åœ¨åœ°å€çš„ä¸»æœºåœ°å€(å¦‚æœåœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œï¼Œå°±å¯ä»¥çœ‹åˆ°)</p></li><li><p>port: æ–‡æ¡£æ‰€åœ¨åœ°å€çš„æœåŠ¡ç«¯ç«¯å£(å¦‚æœåœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œï¼Œå°±å¯ä»¥çœ‹åˆ°)</p></li><li><p>pathname: æ–‡æ¡£æ‰€åœ¨åœ°å€çš„æ–‡ä»¶åœ°å€</p></li><li><p>protocol: è£…è½½è¯¥æ–‡æ¡£ä½¿ç”¨çš„åè®®</p></li></ol><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs stata"><span class="hljs-keyword">var</span> <span class="hljs-keyword">loc</span> = <span class="hljs-keyword">window</span>.location;<br><span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> name <span class="hljs-keyword">in</span> <span class="hljs-keyword">loc</span>)&#123;<br>  console.debug(name,<span class="hljs-keyword">loc</span>[name]);<span class="hljs-comment">//æŸ¥çœ‹å¯¹è±¡ä¿¡æ¯(äº†è§£å†…å®¹)</span><br>&#125;<br></code></pre></td></tr></table></figure><p><img src="/2019/12/10/JavaScript/image-20200105114339798.png" alt="image-20200105114339798"></p><p>//è·³è½¬åˆ°æŸä¸€ä¸ªé¡µé¢</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">//</span>JSä»£ç <br><span class="hljs-keyword">function</span> jump()&#123;<br>window.location.href = <span class="hljs-string">&quot;www.baidu.com&quot;</span>; <br>&#125;<br><span class="hljs-regexp">//</span>HTMLä»£ç <br>&lt;button onclick=<span class="hljs-string">&quot;jump()&quot;</span>&gt;è·³è½¬åˆ°ç™¾åº¦&lt;/button&gt;<br></code></pre></td></tr></table></figure><p><img src="/2019/12/10/JavaScript/NMlmArjNdm.gif" alt="as"></p><h4 id="6ã€navigatoræµè§ˆå™¨çš„ä¿¡æ¯å¯¹è±¡ï¼ˆäº†è§£ï¼‰"><a href="#6ã€navigatoræµè§ˆå™¨çš„ä¿¡æ¯å¯¹è±¡ï¼ˆäº†è§£ï¼‰" class="headerlink" title="6ã€navigatoræµè§ˆå™¨çš„ä¿¡æ¯å¯¹è±¡ï¼ˆäº†è§£ï¼‰"></a>6ã€navigatoræµè§ˆå™¨çš„ä¿¡æ¯å¯¹è±¡ï¼ˆäº†è§£ï¼‰</h4><p>navigatoræµè§ˆå™¨çš„ä¿¡æ¯å¯¹è±¡ï¼Œä¼šæ‹¿åˆ°æµè§ˆå™¨çš„ä¸€äº›ä¿¡æ¯ï¼Œå¦‚ä¸‹</p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs maxima"><span class="hljs-keyword">for</span>(<span class="hljs-built_in">var</span> <span class="hljs-built_in">key</span> <span class="hljs-keyword">in</span> navigator)&#123;<br>console.debug(<span class="hljs-built_in">key</span>.navigator[<span class="hljs-built_in">key</span>]);<br>&#125;<br></code></pre></td></tr></table></figure><table><thead><tr><th>å±æ€§åç§°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>appCodeName</td><td>äº§å“åç§°</td></tr><tr><td>appName</td><td>åº”ç”¨åç§°</td></tr><tr><td>appVersion</td><td>ç‰ˆæœ¬å·</td></tr><tr><td>cookieEnabled</td><td>æ˜¯å¦å…è®¸ä½¿ç”¨cookie</td></tr><tr><td>language</td><td>è¯­è¨€</td></tr><tr><td>oscpu</td><td>æ“ä½œç³»ç»Ÿåç§°</td></tr><tr><td>platform</td><td>æ“ä½œç³»ç»Ÿå¹³å°</td></tr><tr><td>product</td><td>äº§å“ä»£å·æˆ–åç§°ï¼Œæ¯”å¦‚Gecko</td></tr><tr><td>productSub</td><td>äº§å“å‘å¸ƒæ—¥æœŸ20100701</td></tr><tr><td></td><td>å®¢æˆ·ç«¯è¯¦ç»†ä¿¡æ¯</td></tr></tbody></table><p>æ¯”å¦‚ï¼ŒuserAgentï¼šMozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.119 Safari/537.36</p><p><img src="/2019/12/10/JavaScript/image-20200105115750159.png" alt="image-20200105115750159"></p><h4 id="7ã€documetå¯¹è±¡"><a href="#7ã€documetå¯¹è±¡" class="headerlink" title="7ã€documetå¯¹è±¡"></a>7ã€documetå¯¹è±¡</h4><p><img src="/2019/12/10/JavaScript/clip_image007.png" alt="img"></p><p>documentå¯¹è±¡åˆšæ‰ä¸Šé¢æˆ‘ä»¬å­¦ä¹ äº†å‡ ä¸ª ï¼š</p><ul><li><p>document.forms è¡¨å•å¯¹è±¡ </p></li><li><p>document.links è¿æ¥å¯¹è±¡</p></li><li><p>document.anchorsæç‚¹å¯¹è±¡</p></li><li><p>document.images å›¾ç‰‡å¯¹è±¡</p></li></ul><p>é™¤äº†ä¸Šé¢è¿™äº›ï¼Œè¿˜æœ‰å…¶ä»–å±æ€§ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£ä¸€ä¸‹ï¼š</p><p>â‘ ã€document.titleï¼šæ˜¾ç¤ºæˆ–ä¿®æ”¹é¡µé¢æ ‡é¢˜</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>ZhanSan<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="javascript"><span class="hljs-built_in">document</span>.title=<span class="hljs-string">&quot;Kongwei_Liao&quot;</span>;<span class="hljs-comment">//ä¿®æ”¹é¡µé¢æ ‡é¢˜</span></span><br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="/2019/12/10/JavaScript/image-20200105164259759.png" alt="image-20200105164259759"></p><p>â‘¡ã€document.bgColorï¼šæ”¹å˜é¡µé¢èƒŒæ™¯è‰² </p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">document.bgColor</span>=<span class="hljs-string">&quot;darkcyan&quot;</span><span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><p><img src="/2019/12/10/JavaScript/image-20200105164916091.png" alt="image-20200105164916091"></p><p>â‘¢ã€document.write()ï¼šæ˜¾ç¤ºåˆ°é¡µé¢ä¸Š</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">document.write(<span class="hljs-string">&quot;Kongwei_Liao&quot;</span>)<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><p><img src="/2019/12/10/JavaScript/image-20200105165805894.png" alt="image-20200105165805894"></p><p>document.write()ï¼šåŸæ–‡å†™å…¥HTMLæ–‡æ¡£ï¼Œå³å†™å…¥HTMLæ ‡ç­¾äº¦å¯ã€‚å¦‚ä¸‹é¢&lt;br/&gt;æ¢è¡Œæ ‡ç­¾ï¼š</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript">document.<span class="hljs-built_in">write</span>(<span class="hljs-string">&quot;1*1&lt;br/&gt;&quot;</span>) document.<span class="hljs-built_in">write</span>(<span class="hljs-string">&quot;1*1&quot;</span>);<br></code></pre></td></tr></table></figure><h3 id="å®šæ—¶å™¨-æŒæ¡"><a href="#å®šæ—¶å™¨-æŒæ¡" class="headerlink" title="å®šæ—¶å™¨(æŒæ¡)"></a>å®šæ—¶å™¨(æŒæ¡)</h3><p>å®šæ—¶å™¨åœ¨jsæ˜¯å¾ˆé‡è¦çš„åŠŸèƒ½ï¼Œjsé‡Œé¢å¾ˆå¤šåŠ¨ç”»æ•ˆæœéƒ½ç¦»ä¸å¼€å®šæ—¶å™¨ï¼›</p><p>å®šæ—¶å™¨åˆ†ä¸¤ç§ï¼š</p><h4 id="1ã€ç¬¬ä¸€ç§ï¼Œä¸€æ¬¡æ€§å®šæ—¶å™¨"><a href="#1ã€ç¬¬ä¸€ç§ï¼Œä¸€æ¬¡æ€§å®šæ—¶å™¨" class="headerlink" title="1ã€ç¬¬ä¸€ç§ï¼Œä¸€æ¬¡æ€§å®šæ—¶å™¨"></a>1ã€ç¬¬ä¸€ç§ï¼Œä¸€æ¬¡æ€§å®šæ—¶å™¨</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">setTimeout</span><span class="hljs-params">()</span></span>:è®¾ç½®å®šæ—¶å™¨ï¼Œåˆ°äº†å¤šå°‘æ—¶é—´åæ‰§è¡Œ(åªæ‰§è¡Œä¸€æ¬¡)--å®šæ—¶ç‚¸å¼¹<br><span class="hljs-function"><span class="hljs-title">clearTimeout</span><span class="hljs-params">()</span></span>:å–æ¶ˆå®šæ—¶å™¨<br></code></pre></td></tr></table></figure><p>//è®¾ç½®å®šæ—¶å™¨</p><p><strong>ç¬¬ä¸€ç§å†™æ³•:5ç§’é’Ÿè°ƒæ•´åˆ°ä¸€ä¸ªé¡µé¢</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//5ç§’é’Ÿè·³è½¬åˆ°ç™¾åº¦</span><br><span class="hljs-keyword">var</span> timer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;<br>  <span class="hljs-built_in">window</span>.location.href = <span class="hljs-string">&quot;http://www.baidu.com&quot;</span>;<br>&#125;,<span class="hljs-number">5000</span>);<br><br><span class="hljs-comment">//æ¸…é™¤å®šæ—¶å™¨</span><br><span class="hljs-built_in">clearTimeout</span>(timer);<br></code></pre></td></tr></table></figure><p><strong>ç¬¬äºŒç§å†™æ³•:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> timer = <span class="hljs-built_in">setTimeout</span>(jump,<span class="hljs-number">5000</span>);<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">jump</span>(<span class="hljs-params"></span>)</span>&#123;<br>  location.href = <span class="hljs-string">&quot;http://www.baidu.com&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="/2019/12/10/JavaScript/o2u6xl2deg.gif"></p><p><img src="/2019/12/10/JavaScript/qPOt4QLAqY.gif"></p><h4 id="2ã€ç¬¬äºŒç§ï¼Œå‘¨æœŸæ€§å®šæ—¶å™¨"><a href="#2ã€ç¬¬äºŒç§ï¼Œå‘¨æœŸæ€§å®šæ—¶å™¨" class="headerlink" title="2ã€ç¬¬äºŒç§ï¼Œå‘¨æœŸæ€§å®šæ—¶å™¨"></a>2ã€ç¬¬äºŒç§ï¼Œå‘¨æœŸæ€§å®šæ—¶å™¨</h4><p>setInterval()ï¼šå‘¨æœŸæ€§å®šæ—¶å™¨ï¼Œæ¯éš”å¤šé•¿æ—¶é—´æ‰§è¡Œ(ä¸æ–­æ‰§è¡Œ)</p><p>clearInterval() ï¼šå–æ¶ˆå®šæ—¶å™¨</p><p>//æ¯éš”å¤šé•¿æ—¶é—´æ‰§è¡Œ(ä¸æ–­æ‰§è¡Œ)            //ç¬¬ä¸€ä¸ªå‚æ•°ï¼šæ‰§è¡Œçš„æ–¹æ³•            //ç¬¬äºŒå‚æ•°ï¼šæ—¶é—´(æ¯«ç§’)</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;timerSpan&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;color: burlywood;&quot;</span>&gt;</span>5<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>ç§’é’Ÿåè·³è½¬åˆ°å¦å¤–ä¸€ä¸ªé¡µé¢<br><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;å®šæ—¶å™¨æ¸…é™¤&quot;</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;clearTime()&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;js/HelloJS.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs routeros">var <span class="hljs-attribute">timeVal</span>=5;<br>var <span class="hljs-attribute">timer</span>=setInterval(function()&#123;<br><span class="hljs-attribute">timeVal</span>=timeVal-1;<br><span class="hljs-keyword">if</span>(timeVal%<span class="hljs-attribute">5</span>==0)&#123;<br>window.open(<span class="hljs-string">&quot;http://www.baidu.com/&quot;</span>);<br><span class="hljs-attribute">timeVal</span>=5;<br>document.getElementById(<span class="hljs-string">&quot;timerSpan&quot;</span>).<span class="hljs-attribute">innerHTML</span>=timeVal;<br>&#125;<span class="hljs-keyword">else</span>&#123;<br>document.getElementById(<span class="hljs-string">&quot;timerSpan&quot;</span>).<span class="hljs-attribute">innerHTML</span>=timeVal;<br>&#125;<br>&#125;,1000);<br>function clearTime()&#123;<br>clearInterval(timer);<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="/2019/12/10/JavaScript/pdjXclhnT9.gif"></p><h3 id="DOMæ–‡æ¡£å¯¹è±¡æ¨¡å‹"><a href="#DOMæ–‡æ¡£å¯¹è±¡æ¨¡å‹" class="headerlink" title="DOMæ–‡æ¡£å¯¹è±¡æ¨¡å‹"></a>DOMæ–‡æ¡£å¯¹è±¡æ¨¡å‹</h3><p>DOM(Document Object Model)ï¼šæ–‡æ¡£å¯¹è±¡æ¨¡å‹ã€‚</p><p>ç›´ç™½çš„è®²å°±æ˜¯Javaç¨‹åºè§£æç»“æ„åŒ–æ–‡æ¡£çš„æ—¶å€™ï¼Œåœ¨å†…å­˜ä¸­ç”Ÿæˆçš„åŒ…å«å½“å‰ç»“æ„åŒ–æ–‡æ¡£æ‰€æœ‰å†…å®¹çš„ä¸€ä¸ªå¯¹è±¡æ¨¡å‹ã€‚æ‰€ä»¥è¯´DOMå¹¶ä¸æ˜¯ä¸€é—¨æŠ€æœ¯ï¼Œè€Œæ˜¯ä¸€é—¨æ€æƒ³ï¼Œæˆ–è€…æ›´æ˜ç¡®çš„è®²æ˜¯ä¸€é—¨è®¿é—®ç»“æ„åŒ–æ–‡æ¡£çš„ä¸€ç§æ–¹å¼ã€‚</p><p>HTMLå°±æ˜¯ä¸€ä¸ªæ–‡æ¡£ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡Javaè¯­è¨€å»è§£æå®ƒï¼ŒJavaæ˜¯é¢å‘å¯¹è±¡çš„è¯­è¨€ï¼Œå¯ä»¥æŠŠHTMLé‡Œé¢çš„æ¯ä¸€ä¸ªå…ƒç´ è§£ææˆä¸€ä¸ªä¸€ä¸ªçš„å¯¹è±¡ï¼›å› ä¸ºåªè¦å°è£…æˆå¯¹è±¡ï¼Œåœ¨ç¨‹åºé‡Œé¢å°±å¯ä»¥æ‹¿åˆ°è¿™äº›å†…å®¹;</p><ul><li>D   Document  æ–‡æ¡£(HTMLæ–‡æ¡£)</li><li>O  Object  å¯¹è±¡(Javaå¯¹è±¡)</li><li>M  Model  æ¨¡å‹ï¼ˆè¯»å–æ–‡æ¡£å…ƒç´ ï¼Œå°è£…æˆä¸ªä¸ªå¯¹è±¡ï¼Œè¿™æ¯ä¸ªå¯¹è±¡å°±ç›¸å½“äºè¯¥æ–‡æ¡£çš„ä¸€ä¸ªæ¨¡å‹ï¼‰</li></ul><p>ç›´ç™½çš„è®²ï¼Œä¸€ä¸ªå®ä½“æ–‡ä»¶è¦åœ¨å†…å­˜ä¸­å½¢æˆè¿™ä¹ˆä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸­é—´è‚¯å®šéœ€è¦ä¸€äº›ä»£ç çš„è½¬æ¢æ“ä½œï¼Œè€Œåœ¨æ­¤æˆ‘ä»¬ç§°å‘¼ä¸º<code>DOMè§£æå™¨</code>ã€‚DOMè§£æå™¨çš„ä½œç”¨å°±æ˜¯å®Œæˆ<code>ç»“æ„åŒ–æ–‡æ¡£</code>å’Œ<code>DOMæ ‘ä¹‹é—´çš„è½¬æ¢å…³ç³»</code>ã€‚</p><p><img src="/2019/12/10/JavaScript/image-20200105191450615.png" alt="image-20200105191450615"></p><h4 id="1ã€ç»“ç‚¹ã€å…ƒç´ å’Œè§£æ"><a href="#1ã€ç»“ç‚¹ã€å…ƒç´ å’Œè§£æ" class="headerlink" title="1ã€ç»“ç‚¹ã€å…ƒç´ å’Œè§£æ"></a>1ã€ç»“ç‚¹ã€å…ƒç´ å’Œè§£æ</h4><p>1.èŠ‚ç‚¹</p><ul><li>ç”±ç»“æ„å›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæ•´ä¸ªæ–‡æ¡£å°±æ˜¯ä¸€ä¸ªæ–‡æ¡£èŠ‚ç‚¹ã€‚ <strong>Document</strong></li><li>è€Œæ¯ä¸€ä¸ªHTMLæ ‡ç­¾éƒ½æ˜¯ä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹ã€‚ Element</li><li>æ ‡ç­¾ä¸­çš„æ–‡å­—åˆ™æ˜¯æ–‡æœ¬èŠ‚ç‚¹ã€‚ Text</li><li>æ ‡ç­¾çš„å±æ€§æ˜¯å±æ€§èŠ‚ç‚¹ã€‚ Attribute</li><li>ä¸€åˆ‡éƒ½æ˜¯èŠ‚ç‚¹â€¦â€¦ Node</li></ul><p>å…ƒç´ ä¸€å®šæ˜¯èŠ‚ç‚¹ï¼Œä½†èŠ‚ç‚¹ä¸ä¸€å®šæ˜¯å…ƒç´ ï¼Œé€šè¿‡å…ƒç´ å¯ä»¥å¾ˆæ–¹ä¾¿çš„å¾—åˆ°å±æ€§é›†åˆè€Œä½¿ç”¨Nodeåˆ™éœ€è¦å»éå†</p><p>æ³¨æ„ï¼šæœ€æ–°çš„è§„èŒƒä¸­å±æ€§èŠ‚ç‚¹å·²è¢«ç§»é™¤ï¼Œä¸å†ä½œä¸ºèŠ‚ç‚¹å‡ºç°ï¼Œå…·ä½“å‚è€ƒã€ŠMDN_NodeTypeã€‹</p><p>2.è§£æ</p><p>XMLè§£æï¼šæˆ‘ä»¬ä»¥å‰è§£æxmlçš„æ—¶å€™ï¼Œç¬¬ä¸€æ­¥æ‹¿åˆ°documentå¯¹è±¡ã€‚</p><p>HTMLè§£æï¼šå®ƒæ„å»ºäº†ä¸€ä¸ªdocumentå¯¹è±¡ï¼Œå¹¶ä¸”è®©å®ƒè¢«windowå¯¹è±¡çš„å±æ€§å¼•ç”¨æ‰€æŒ‡å‘ï¼Œhtmlå·²ç»å¸®æˆ‘ä»¬å°è£…å¥½äº†ï¼Œæˆ‘ç›´æ¥ä½¿ç”¨å°±æ˜¯ã€‚â€”-window.document(ç®€å†™å°±æ˜¯document)</p><p>æ•´ä¸ªæ–‡æ¡£å°±æ˜¯Documentï¼Œæ•´ä¸ªæ–‡æ¡£éƒ½æ˜¯èŠ‚ç‚¹ï¼Œæ–‡æ¡£ä¸­çš„æ ‡ç­¾å°±æ˜¯å…ƒç´ èŠ‚ç‚¹ï¼ˆElementï¼‰ï¼Œæ ‡ç­¾çš„å†…å®¹å°±æ˜¯æ–‡æœ¬èŠ‚ç‚¹ï¼ˆTextï¼‰ï¼Œæ ‡ç­¾çš„å±æ€§å°±æ˜¯å±æ€§èŠ‚ç‚¹ï¼ˆAttributeï¼‰<strong>ã€‚</strong>Domçš„æ ¸å¿ƒå°±æ˜¯æ“ä½œè¿™ä¸‰ç§èŠ‚ç‚¹ï¼Œä»¥åŠå…ƒç´ èŠ‚ç‚¹ä¹‹é—´å±‚æ¬¡å…³ç³»ã€‚</p><h4 id="2ã€Documentå¯¹è±¡"><a href="#2ã€Documentå¯¹è±¡" class="headerlink" title="2ã€Documentå¯¹è±¡"></a>2ã€Documentå¯¹è±¡</h4><p>æ¯ä¸ªè½½å…¥æµè§ˆå™¨çš„HTMLæ–‡æ¡£éƒ½ä¼šæˆä¸ºDocumentå¯¹è±¡ï¼Œä½¿ç”¨Documentå¯¹è±¡ä½¿æˆ‘ä»¬å¯ä»¥ä»è„šæœ¬ä¸­å¯¹HTMLé¡µé¢å†…çš„æ‰€æœ‰å…ƒç´ è¿›è¡Œè®¿é—®</p><p>APIï¼š</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">getElementById</span><span class="hljs-params">()</span></span><span class="hljs-comment">//é€šè¿‡æ ‡ç­¾å…ƒç´ çš„IDè·å–åˆ°æ ‡ç­¾å¯¹è±¡</span><br><span class="hljs-function"><span class="hljs-title">getElementsByName</span><span class="hljs-params">()</span></span><span class="hljs-comment">//é€šè¿‡æ ‡ç­¾å…ƒç´ çš„nameå±æ€§è·å–åˆ°æ ‡ç­¾å¯¹è±¡ï¼Œè¿”å›çš„æ˜¯æ•°ç»„</span><br><span class="hljs-function"><span class="hljs-title">getElementsByTagName</span><span class="hljs-params">()</span></span><span class="hljs-comment">//é€šè¿‡æ ‡ç­¾åç§°è·å–åˆ°æ ‡ç­¾å¯¹è±¡ï¼Œè¿”å›çš„æ˜¯æ•°ç»„</span><br><br>å±æ€§ï¼š<br>document<span class="hljs-selector-class">.body</span><span class="hljs-comment">//è·å–documentæ ‡ç­¾çš„bodyå…ƒç´ </span><br>document<span class="hljs-selector-class">.body</span><span class="hljs-selector-class">.clientWidth</span><span class="hljs-comment">//è·å–é¡µé¢çš„å®½åº¦</span><br>document<span class="hljs-selector-class">.body</span><span class="hljs-selector-class">.heightWidth</span><span class="hljs-comment">//è·å–bodyå…ƒç´ çš„é«˜åº¦ï¼Œé¡µé¢å†…å®¹å†³å®šé«˜åº¦</span><br>document<span class="hljs-selector-class">.documentElement</span><span class="hljs-comment">//è·å–æ–‡æ¡£å…ƒç´ </span><br>document<span class="hljs-selector-class">.documentElement</span>.clientWidth<span class="hljs-comment">//è·å–æ–‡æ¡£å…ƒç´ çš„å®½åº¦</span><br>document<span class="hljs-selector-class">.documentElement</span>.heightWidth<span class="hljs-comment">//è·å–æ–‡æ¡£å…ƒç´ çš„é«˜åº¦ï¼Œå½“å‰é¡µé¢é«˜åº¦</span><br></code></pre></td></tr></table></figure><p><img src="/2019/12/10/JavaScript/image-20200105202324290.png" alt="image-20200105202324290"></p><p><img src="/2019/12/10/JavaScript/image-20200105202219644.png" alt="image-20200105202219644"></p><p><img src="/2019/12/10/JavaScript/image-20200105202253052.png" alt="image-20200105202253052"></p><h4 id="3ã€å…ƒç´ èŠ‚ç‚¹"><a href="#3ã€å…ƒç´ èŠ‚ç‚¹" class="headerlink" title="3ã€å…ƒç´ èŠ‚ç‚¹"></a>3ã€å…ƒç´ èŠ‚ç‚¹</h4><p>HTML DOM Elementå¯¹è±¡å³èŠ‚ç‚¹ï¼ŒElementæ˜¯å¯¹Nodeæ‰©å±•</p><p>APIï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs awk">hasChildNodes()<span class="hljs-regexp">//</span>å½“childNodesåŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªèŠ‚ç‚¹æ—¶ï¼Œè¿”å›Boolean<br>insertBefore(newnode, refnode)<span class="hljs-regexp">//</span>åœ¨childNodesä¸­çš„refnodeä¹‹å‰æ’å…¥newnodeï¼Œè¿”å›Node<br>createElement()<span class="hljs-regexp">//</span>åˆ›å»ºæ–°çš„å…ƒç´ <br><br>å±æ€§ï¼š<br>parentNode<span class="hljs-regexp">//</span>çˆ¶èŠ‚ç‚¹ï¼Œè¿”å›Node<br>firstChild<span class="hljs-regexp">//</span>åˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¿”å›Node<br>lastChild<span class="hljs-regexp">//</span>åˆ—è¡¨ä¸­çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¿”å›Node<br>childNodes<span class="hljs-regexp">//</span>æ‰€æœ‰å­èŠ‚ç‚¹çš„åˆ—è¡¨ï¼Œè¿”å›NodeList<br>previousSibling<span class="hljs-regexp">//</span>ä¸Šä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹ï¼Œè¿”å›Node<br>nextSibling<span class="hljs-regexp">//</span>ä¸‹ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹ï¼Œè¿”å›Node<br>nodeName<span class="hljs-regexp">//</span>èŠ‚ç‚¹åç§°ï¼Œè¿”å›String<br>nodeValue<span class="hljs-regexp">//</span>èŠ‚ç‚¹å€¼ï¼Œè¿”å›String<br>nodeType<span class="hljs-regexp">//</span>èŠ‚ç‚¹ç±»å‹ï¼Œè¿”å›Number<br></code></pre></td></tr></table></figure><p>ä»£ç å®ä¾‹ï¼š</p><p>éœ€æ±‚1ï¼šèŠ‚ç‚¹å±‚çº§å…³ç³»æ“ä½œï¼ŒèŠ‚ç‚¹ä¸­ç©ºæ ¼å’Œæ¢è¡Œè¢«è®¤ä¸ºæ˜¯æ–‡æœ¬å…ƒç´ ï¼›</p><p>éœ€æ±‚2ï¼šè·å–èŠ‚ç‚¹ä¿¡æ¯ï¼›</p><p><img src="/2019/12/10/JavaScript/image-20200105204018249.png" alt="image-20200105204018249"></p><h4 id="4ã€å±æ€§ç»“ç‚¹"><a href="#4ã€å±æ€§ç»“ç‚¹" class="headerlink" title="4ã€å±æ€§ç»“ç‚¹"></a>4ã€å±æ€§ç»“ç‚¹</h4><p>APIï¼š</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">getAttributeNode</span><span class="hljs-params">()</span></span><span class="hljs-comment">//è·å–æŒ‡å®šåç§°çš„å±æ€§</span><br><span class="hljs-function"><span class="hljs-title">setAttribute</span><span class="hljs-params">()</span></span><span class="hljs-comment">//è®¾ç½®å±æ€§</span><br><span class="hljs-function"><span class="hljs-title">getAttribute</span><span class="hljs-params">()</span></span><span class="hljs-comment">//è·å–å±æ€§å€¼</span><br>attributes<span class="hljs-comment">//ä¸€ä¸ªå…ƒç´ çš„å±æ€§å¯¹è±¡ï¼Œè¿”å›NamedNodeMap</span><br></code></pre></td></tr></table></figure><p>ä»£ç ç¤ºä¾‹ï¼š</p><p>éœ€æ±‚1ï¼šè·å–å±æ€§èŠ‚ç‚¹ä¿¡æ¯</p><p>éœ€æ±‚2ï¼šè·å–å±æ€§å€¼ã€æ·»åŠ æˆ–è€…ä¿®æ”¹å±æ€§å€¼ï¼Œå¯ä»¥é€šè¿‡ï¼šå¯¹è±¡.valueã€å¯¹è±¡[å±æ€§å]ã€getAttributeæˆ–è€…setAttribute</p><p>éœ€æ±‚3ï¼šè‡ªå®šä¹‰å±æ€§</p><p>éœ€æ±‚4ï¼šæ·»åŠ å…¶ä»–æ ·å¼</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;d1&quot;</span>&gt;</span>è€å­<br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;d2&quot;</span>&gt;</span>è€å¤§<br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;d3&quot;</span>&gt;</span>è€å¤§å®¶çš„<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;d22&quot;</span>&gt;</span>è€äºŒ<br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;d31&quot;</span>&gt;</span>è€äºŒçš„è€å¤§<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;d32&quot;</span>&gt;</span>è€äºŒçš„è€å°<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;btn1&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;aa&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">checked</span>=<span class="hljs-string">&quot;checked&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;chk&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;aa&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="javascript"><span class="hljs-comment">//éœ€æ±‚1ï¼šè·å–å±æ€§ç»“ç‚¹ä¿¡æ¯ã€‚getAttributeNodeè·å–å±æ€§èŠ‚ç‚¹</span></span><br><span class="javascript"><span class="hljs-built_in">console</span>.debug(<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;btn1&quot;</span>).getAttributeNode(<span class="hljs-string">&quot;id&quot;</span>).nodeName); <span class="hljs-comment">//id</span></span><br><span class="javascript"><span class="hljs-built_in">console</span>.debug(<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;btn1&quot;</span>).getAttributeNode(<span class="hljs-string">&quot;id&quot;</span>).nodeValue); <span class="hljs-comment">//btn1</span></span><br><span class="javascript"><span class="hljs-built_in">console</span>.debug(<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;btn1&quot;</span>).getAttributeNode(<span class="hljs-string">&quot;id&quot;</span>).nodeType); <span class="hljs-comment">//2</span></span><br><br><span class="javascript"><span class="hljs-comment">//éœ€æ±‚2ï¼šè·å–å±æ€§å€¼ã€æ·»åŠ æˆ–è€…ä¿®æ”¹å±æ€§å€¼</span></span><br><span class="javascript"><span class="hljs-keyword">var</span> $btn = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;btn1&quot;</span>);</span><br><span class="javascript"><span class="hljs-built_in">console</span>.debug($btn.value);</span><br><span class="javascript"><span class="hljs-built_in">console</span>.debug($btn[<span class="hljs-string">&#x27;value&#x27;</span>]);</span><br><span class="javascript"><span class="hljs-built_in">console</span>.debug($btn.getAttribute(<span class="hljs-string">&#x27;value&#x27;</span>));</span><br><span class="javascript"><span class="hljs-comment">//è‡ªå¸¦å±æ€§ä¿®æ”¹ä¿®æ”¹</span></span><br><span class="javascript">$btn.value = <span class="hljs-string">&#x27;bb&#x27;</span>;</span><br><span class="javascript"><span class="hljs-built_in">console</span>.debug($btn.value);</span><br><span class="javascript">$btn[<span class="hljs-string">&#x27;value&#x27;</span>] = <span class="hljs-string">&#x27;cc&#x27;</span>;</span><br><span class="javascript"><span class="hljs-built_in">console</span>.debug($btn.value);<span class="hljs-comment">//è·å–å±æ€§</span></span><br><span class="javascript">$btn.setAttribute(<span class="hljs-string">&#x27;value&#x27;</span>, <span class="hljs-string">&#x27;dd&#x27;</span>);</span><br><span class="javascript"><span class="hljs-built_in">console</span>.debug($btn.getAttribute(<span class="hljs-string">&#x27;value&#x27;</span>));</span><br><br><span class="javascript"><span class="hljs-comment">//éœ€æ±‚3ï¼šè‡ªå®šä¹‰å±æ€§</span></span><br><span class="javascript">$btn.value1 = <span class="hljs-string">&#x27;ee&#x27;</span>;</span><br><span class="javascript"><span class="hljs-built_in">console</span>.debug($btn.value1);</span><br><span class="javascript">$btn[<span class="hljs-string">&#x27;value1&#x27;</span>]=<span class="hljs-string">&#x27;ff&#x27;</span>;</span><br><span class="javascript"><span class="hljs-built_in">console</span>.debug($btn.value1);</span><br><span class="javascript">$btn.setAttribute(<span class="hljs-string">&#x27;value1&#x27;</span>, <span class="hljs-string">&#x27;è‡ªå®šä¹‰å±æ€§&#x27;</span>);</span><br><span class="javascript"><span class="hljs-built_in">console</span>.debug($btn.getAttribute(<span class="hljs-string">&#x27;value1&#x27;</span>));</span><br><br><span class="javascript"><span class="hljs-comment">//éœ€æ±‚4ï¼šæ·»åŠ å…¶ä»–æ ·å¼</span></span><br><span class="javascript"><span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;d1&#x27;</span>).className = <span class="hljs-string">&#x27;className&#x27;</span>; <span class="hljs-comment">//æ·»åŠ æ ·å¼</span></span><br><span class="javascript"><span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;d1&#x27;</span>).style.backgroundColor = <span class="hljs-string">&#x27;green&#x27;</span>;</span><br><span class="javascript"><span class="hljs-comment">//åŒæ ·é’ˆå¯¹readonly...ä¹‹ç±»çš„éƒ½å¯ä»¥è¿™æ ·æ“ä½œ</span></span><br><span class="javascript"><span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;chk&quot;</span>).checked = <span class="hljs-literal">false</span>; </span><br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="/2019/12/10/JavaScript/image-20200105205937175.png" alt="image-20200105205937175"></p><h4 id="5ã€æ–‡æœ¬ç»“ç‚¹"><a href="#5ã€æ–‡æœ¬ç»“ç‚¹" class="headerlink" title="5ã€æ–‡æœ¬ç»“ç‚¹"></a>5ã€æ–‡æœ¬ç»“ç‚¹</h4><p>APIï¼š</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">appendChild(<span class="hljs-keyword">node</span><span class="hljs-title">)//å°†node</span>æ·»åŠ åˆ°childNodesçš„æœ«å°¾ï¼Œè¿”å›<span class="hljs-keyword">Node</span><span class="hljs-title"></span><br><span class="hljs-title">replaceChild</span>(newnode, oldnode)//å°†childNodesä¸­çš„oldnodeæ›¿æ¢æˆnewnodeï¼Œè¿”å›<span class="hljs-keyword">Node</span><span class="hljs-title"></span><br><span class="hljs-title">removeChild</span>(<span class="hljs-keyword">node</span><span class="hljs-title">)//ä»childNodes</span>ä¸­åˆ é™¤<span class="hljs-keyword">node</span><span class="hljs-title">ï¼Œè¿”å›Node</span><br><br>innerHTML//è®¾ç½®æˆ–è€…è·å–å¸¦æœ‰æ ‡ç­¾çš„å…ƒç´ <br>innerText//è®¾ç½®æˆ–è€…è·å–æ ‡ç­¾ä¸­çš„çº¯æ–‡æœ¬<br></code></pre></td></tr></table></figure><p>ä»£ç ç¤ºä¾‹ï¼š</p><p>éœ€æ±‚1ï¼šè·å–æ–‡æœ¬èŠ‚ç‚¹ä¿¡æ¯</p><p>éœ€æ±‚2ï¼šé’ˆå¯¹æ–‡æœ¬èŠ‚ç‚¹çš„CRUD</p><p>éœ€æ±‚3ï¼šæ·»åŠ ä¸€ä¸ªæ–°å…ƒç´ </p><p>éœ€æ±‚4ï¼šæ›¿æ¢å…ƒç´ ï¼Œç§»é™¤å…ƒç´ </p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;d1&quot;</span>&gt;</span>è€å­<br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;d2&quot;</span>&gt;</span>è€å¤§<br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;d3&quot;</span>&gt;</span>è€å¤§å®¶çš„<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;d22&quot;</span>&gt;</span>è€äºŒ<br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;d31&quot;</span>&gt;</span>è€äºŒçš„è€å¤§<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;d32&quot;</span>&gt;</span>è€äºŒçš„è€å°<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;btn1&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;aa&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">checked</span>=<span class="hljs-string">&quot;checked&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;chk&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;aa&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="javascript"><span class="hljs-comment">//éœ€æ±‚1ï¼š è·å–æ–‡æœ¬èŠ‚ç‚¹ä¿¡æ¯</span></span><br><span class="javascript"><span class="hljs-built_in">console</span>.debug(<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;d1&quot;</span>).firstChild.nodeName); <span class="hljs-comment">//#text</span></span><br><span class="javascript"><span class="hljs-built_in">console</span>.debug(<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;d1&quot;</span>).firstChild.nodeValue); <span class="hljs-comment">//è€å­</span></span><br><span class="javascript"><span class="hljs-built_in">console</span>.debug(<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;d1&quot;</span>).firstChild.nodeType); <span class="hljs-comment">//3</span></span><br><br><span class="javascript"><span class="hljs-comment">//éœ€æ±‚2ï¼š é’ˆå¯¹æ–‡æœ¬èŠ‚ç‚¹çš„CRUD</span></span><br><span class="javascript"><span class="hljs-keyword">var</span> $txtNode = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;d1&quot;</span>);</span><br><span class="javascript"><span class="hljs-comment">//1ã€innerHTML</span></span><br><span class="javascript"><span class="hljs-built_in">console</span>.debug($txtNode.innerHTML);</span><br><span class="handlebars"><span class="xml">$txtNode.innerHTML = &quot;<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&#x27;d3&#x27;</span>&gt;</span>ä¿®æ”¹æ–‡æœ¬èŠ‚ç‚¹<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>&quot;;</span></span><br><span class="javascript"><span class="hljs-built_in">console</span>.debug($txtNode.innerHTML);</span><br><span class="javascript"><span class="hljs-comment">//2ã€innerText</span></span><br><span class="javascript"><span class="hljs-built_in">console</span>.debug($txtNode.innerText);</span><br><span class="handlebars"><span class="xml">$txtNode.innerText = &quot;<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&#x27;d3&#x27;</span>&gt;</span>ä¿®æ”¹æ–‡æœ¬èŠ‚ç‚¹<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>&quot;;</span></span><br><span class="javascript"><span class="hljs-built_in">console</span>.debug($txtNode.innerText);</span><br><br><span class="javascript"><span class="hljs-comment">//éœ€æ±‚3ï¼š æ·»åŠ ä¸€ä¸ªæ–°å…ƒç´ </span></span><br><span class="javascript"><span class="hljs-keyword">var</span> $d1 = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;d1&#x27;</span>); <span class="hljs-comment">//çˆ¶èŠ‚ç‚¹</span></span><br><span class="javascript"><span class="hljs-comment">//åˆ›å»ºæ–°èŠ‚ç‚¹å¹¶å®Œå–„æ–°çš„å…ƒç´ èŠ‚ç‚¹ä¸­çš„å†…å®¹</span></span><br><span class="javascript"><span class="hljs-keyword">var</span> $newNode = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">&quot;div&quot;</span>);</span><br><span class="javascript">$newNode.setAttribute(<span class="hljs-string">&quot;id&quot;</span>,<span class="hljs-string">&quot;d2&quot;</span>)</span><br><span class="javascript">$newNode.innerText = <span class="hljs-string">&#x27;æ–°èŠ‚ç‚¹&#x27;</span>;</span><br><span class="javascript">$d1.appendChild($newNode); <span class="hljs-comment">//å°†æ–°èŠ‚ç‚¹æ·»åŠ è¿›çˆ¶èŠ‚ç‚¹ä¸­</span></span><br><br><span class="javascript"><span class="hljs-comment">//éœ€æ±‚4ï¼š æ›¿æ¢å…ƒç´ ï¼Œ ç§»é™¤å…ƒç´ </span></span><br><span class="javascript"><span class="hljs-keyword">var</span> $d2 = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;d2&#x27;</span>);</span><br><span class="javascript"><span class="hljs-keyword">var</span> $s1 = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">&#x27;span&#x27;</span>);</span><br><span class="javascript">$s1.innerHTML = <span class="hljs-string">&#x27;æˆ‘æ˜¯spanæ ‡ç­¾&#x27;</span>;</span><br>$d1.replaceChild($s1,$d2);<br><br><span class="javascript"><span class="hljs-comment">//ç§»é™¤å…ƒç´ </span></span><br>$d1.removeChild($s1);<br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="/2019/12/10/JavaScript/image-20200105211842944.png" alt="image-20200105211842944"></p><h3 id="Eventå¯¹è±¡"><a href="#Eventå¯¹è±¡" class="headerlink" title="Eventå¯¹è±¡"></a>Eventå¯¹è±¡</h3><p>Event å¯¹è±¡ä»£è¡¨äº‹ä»¶çš„çŠ¶æ€ï¼Œæ¯”å¦‚äº‹ä»¶åœ¨å…¶ä¸­å‘ç”Ÿçš„å…ƒç´ ã€é”®ç›˜æŒ‰é”®çš„çŠ¶æ€ã€é¼ æ ‡çš„ä½ç½®ã€é¼ æ ‡æŒ‰é’®çš„çŠ¶æ€ã€‚</p><p>äº‹ä»¶é€šå¸¸ä¸å‡½æ•°ç»“åˆä½¿ç”¨ï¼Œå‡½æ•°ä¸ä¼šåœ¨äº‹ä»¶å‘ç”Ÿå‰è¢«æ‰§è¡Œï¼</p><p>æ³¨å†Œäº‹ä»¶é€šå¸¸æœ‰ä¸‰ç§æ–¹å¼ï¼š</p><ol><li>å…ƒç´ ä¸Šç›´æ¥æ³¨å†Œ</li><li>å…ƒç´ .äº‹ä»¶åç§°</li><li>addEventListenerå’ŒattachEvent</li></ol><p>API</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs awk">onabort<span class="hljs-regexp">//</span>ç”¨æˆ·ç»ˆæ­¢é¡µé¢åŠ è½½ã€‚<br>onblur<span class="hljs-regexp">//</span>ç”¨æˆ·ç¦»å¼€å¯¹è±¡ã€‚å¤±å»ç„¦ç‚¹<br>onchange<span class="hljs-regexp">//</span>ç”¨æˆ·æ”¹å˜å¯¹è±¡çš„å€¼ã€‚<br>onclick<span class="hljs-regexp">//</span>ç”¨æˆ·ç‚¹å‡»å¯¹è±¡ã€‚<br>ondblclick<span class="hljs-regexp">//</span>ç”¨æˆ·åŒå‡»å¯¹è±¡ã€‚<br>onfocusï¼ˆå’Œonblurç›¸åï¼‰<span class="hljs-regexp">//</span>ç”¨æˆ·æ¿€æ´»å¯¹è±¡ã€‚<br>onkeydown<span class="hljs-regexp">//</span>æŒ‰ä¸‹é”®ç›˜ã€‚<br>onkeypress<span class="hljs-regexp">//</span>æŒ‰å‹é”®ç›˜ã€‚<br>onkeyup<span class="hljs-regexp">//</span>æ¾å¼€é”®ç›˜ã€‚<br>onload<span class="hljs-regexp">//</span>é¡µé¢å®ŒæˆåŠ è½½ã€‚æ³¨é‡Šï¼šåœ¨ Netscape ä¸­ï¼Œå½“é¡µé¢åŠ è½½æ—¶ä¼šå‘ç”Ÿè¯¥äº‹ä»¶ã€‚<br>onmousedown<span class="hljs-regexp">//</span>ç”¨æˆ·æŒ‰é¼ æ ‡æŒ‰é’®ã€‚<br>onmousemove<span class="hljs-regexp">//</span>é¼ æ ‡æŒ‡é’ˆåœ¨å¯¹è±¡ä¸Šç§»åŠ¨ã€‚<br>onmouseover<span class="hljs-regexp">//</span>é¼ æ ‡æŒ‡é’ˆç§»åŠ¨åˆ°å¯¹è±¡ä¸Šã€‚<br>onmouseout<span class="hljs-regexp">//</span>é¼ æ ‡æŒ‡é’ˆç§»å‡ºå¯¹è±¡ã€‚<br>onmouseup<span class="hljs-regexp">//</span>ç”¨æˆ·é‡Šæ”¾é¼ æ ‡æŒ‰é’®ã€‚<br>onreset<span class="hljs-regexp">//</span>ç”¨æˆ·é‡ç½®è¡¨å•ã€‚<br>onselect<span class="hljs-regexp">//</span>ç”¨æˆ·é€‰å–é¡µé¢ä¸Šçš„å†…å®¹ã€‚<br>onsubmit<span class="hljs-regexp">//</span>ç”¨æˆ·æäº¤è¡¨å•ã€‚<br>onunload<span class="hljs-regexp">//</span>ç”¨æˆ·å…³é—­é¡µé¢ã€‚<br></code></pre></td></tr></table></figure><p>ä»£ç ç¤ºä¾‹ï¼š</p><p>1ã€ç›´æ¥åœ¨å…ƒç´ ä¸Šç»‘å®šå¯¹åº”æ–¹æ³•</p><p>ç¼ºç‚¹ï¼šä¸èƒ½è¢«ç§»é™¤ï¼Œä¸èƒ½ç»‘å®šå¤šä¸ª</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs routeros">function <span class="hljs-variable">$btn1</span>() &#123;<br>console.<span class="hljs-builtin-name">debug</span>(<span class="hljs-string">&#x27;æŒ‰é’®ç‚¹å‡»äº‹ä»¶&#x27;</span>);<br>&#125;<br><br>&lt;input <span class="hljs-attribute">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attribute">id</span>=<span class="hljs-string">&quot;btn1&quot;</span> <span class="hljs-attribute">value</span>=<span class="hljs-string">&quot;æŒ‰é’®&quot;</span> <span class="hljs-attribute">onclick</span>=<span class="hljs-string">&quot;<span class="hljs-variable">$btn1</span>();&quot;</span> /&gt;<br></code></pre></td></tr></table></figure><p><img src="/2019/12/10/JavaScript/image-20200107211137322.png" alt="image-20200107211137322"></p><p>2ã€é€šè¿‡å…ƒç´ .äº‹ä»¶åç§°åŠ¨æ€ç»‘å®š</p><p>ç¼ºç‚¹ï¼šä¸èƒ½ç»‘å®šå¤šä¸ª</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs routeros">var <span class="hljs-variable">$btn2</span> = document.getElementById(<span class="hljs-string">&quot;btn2&quot;</span>);<br><span class="hljs-variable">$btn2</span>.onclick = function() &#123;<br>console.<span class="hljs-builtin-name">debug</span>(<span class="hljs-string">&#x27;æŒ‰é’®ç‚¹å‡»äº‹ä»¶ç»‘å®š&#x27;</span>);<br>&#125;<br><br>&lt;input <span class="hljs-attribute">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attribute">id</span>=<span class="hljs-string">&quot;btn2&quot;</span> <span class="hljs-attribute">value</span>=<span class="hljs-string">&quot;æŒ‰é’®&quot;</span> /&gt;<br></code></pre></td></tr></table></figure><p><img src="/2019/12/10/JavaScript/image-20200107203613786.png" alt="image-20200107203613786"></p><p>3ã€ä½¿ç”¨addEventListenerå’ŒattachEventæ³¨å†Œäº‹ä»¶</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">element.add<span class="hljs-constructor">EventListener(<span class="hljs-params">event</span>,<span class="hljs-params">function</span>,<span class="hljs-params">useCapture</span>)</span>;<br>element.remove<span class="hljs-constructor">EventListener(<span class="hljs-params">event</span>,<span class="hljs-params">function</span>,<span class="hljs-params">useCapture</span>)</span>;<br><span class="hljs-comment">//ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯äº‹ä»¶ç±»å‹ï¼ˆå¦‚&quot;click&quot;æˆ–&quot;mousedown&quot;ï¼‰ï¼›æ³¨æ„ï¼Œä¸èƒ½æœ‰å¦‚&quot;onclick&quot;çš„&quot;on&quot;å‰ç¼€</span><br><span class="hljs-comment">//ç¬¬äºŒä¸ªå‚æ•°æ˜¯äº‹ä»¶è§¦å‘åè°ƒç”¨çš„å‡½æ•°ï¼›</span><br><span class="hljs-comment">//ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ä¸ªå¸ƒå°”å€¼ç”¨äºæè¿°äº‹ä»¶æ˜¯ å†’æ³¡ è¿˜æ˜¯ æ•è· ï¼Œè¯¥å‚æ•°æ˜¯å¯é€‰çš„ã€‚</span><br><br><span class="hljs-comment">//IE8ä»¥åŠIEæ›´æ—©çš„ç‰ˆæœ¬ï¼ŒOpera7.0ä»¥åŠå…¶æ—©æœŸç‰ˆæœ¬ä¸æ”¯æŒä¸Šé¢çš„æ–¹æ³•ã€‚ä½†æ˜¯ï¼Œå¯¹äºè¿™ç±»æµè§ˆå™¨ç‰ˆæœ¬å¯ä»¥ä½¿ç”¨</span><br>element.attach<span class="hljs-constructor">Event(<span class="hljs-params">event</span>,<span class="hljs-params">function</span>)</span>;<br>element.detach<span class="hljs-constructor">Event(<span class="hljs-params">event</span>,<span class="hljs-params">function</span>)</span>;<br></code></pre></td></tr></table></figure><p><strong>äº‹ä»¶å†’æ³¡æˆ–äº‹ä»¶æ•è·ï¼Ÿ</strong></p><p>äº‹ä»¶ä¼ é€’æœ‰ä¸¤ç§æ–¹å¼ï¼šå†’æ³¡å’Œæ•è·ã€‚</p><p>äº‹ä»¶ä¼ é€’å®šä¹‰äº†å…ƒç´ äº‹ä»¶è§¦å‘é¡ºåºï¼Œå¦‚æœå°†&lt;p&gt;å…ƒç´ æ’å…¥åˆ°&lt;div&gt;å…ƒç´ ä¸­ï¼Œç”¨æˆ·ç‚¹å‡»&lt;p&gt;å…ƒç´ ï¼Œå“ªä¸€ä¸ªå…ƒç´ çš„â€clickâ€äº‹ä»¶å…ˆè¢«è§¦å‘å‘¢ï¼Ÿ</p><p>åœ¨<code>å†’æ³¡</code>ä¸­ï¼Œå†…éƒ¨å…ƒç´ çš„äº‹ä»¶ä¼šå…ˆè¢«è§¦å‘ï¼Œç„¶åå†è§¦å‘å¤–éƒ¨å…ƒç´ ï¼Œå³:&lt;p&gt;å…ƒç´ çš„ç‚¹å‡»äº‹ä»¶å…ˆè¢«è§¦å‘ï¼Œç„¶åä¼šè§¦å‘&lt;div&gt;å…ƒç´ çš„ç‚¹å‡»äº‹ä»¶ï¼›</p><p>åœ¨<code>æ•è·</code>ä¸­ï¼Œå¤–éƒ¨å…ƒç´ çš„äº‹ä»¶ä¼šå…ˆè¢«è§¦å‘ï¼Œç„¶åå†è§¦å‘å¤–éƒ¨å…ƒç´ ï¼Œå³:&lt;div&gt;å…ƒç´ çš„ç‚¹å‡»äº‹ä»¶å…ˆè¢«è§¦å‘ï¼Œç„¶åä¼šè§¦å‘&lt;p&gt;å…ƒç´ çš„ç‚¹å‡»äº‹ä»¶ï¼›</p><p>addEventListener()æ–¹æ³•å¯ä»¥æŒ‡å®šâ€useCaptureâ€å‚æ•°æ¥è®¾ç½®ä¼ é€’ç±»å‹ï¼šé»˜è®¤å€¼falseå³å†’æ³¡æ–¹å¼ï¼Œå€¼ä¸ºtureæ—¶ï¼Œäº‹ä»¶ä½¿ç”¨æ•è·ä¼ é€’ã€‚</p><p>ä»£ç ç¤ºä¾‹</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;mydiv&quot;</span>&gt;</span><br>mydiv<br><span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;myp&quot;</span>&gt;</span><br>myp<span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$btn1</span>(<span class="hljs-params"></span>)</span>&#123;</span><br><span class="javascript"><span class="hljs-built_in">console</span>.debug(<span class="hljs-string">&quot;æŒ‰é’®ç‚¹å‡»äº‹ä»¶ç»‘å®š&quot;</span>);</span><br>&#125;<br><span class="javascript"><span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;myp&quot;</span>).addEventListener(<span class="hljs-string">&quot;click&quot;</span>,$btn1());</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="/2019/12/10/JavaScript/y1T5rk2mk1.gif"></p><p>è·¨æµè§ˆå™¨çš„è§£å†³ï¼š</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">var x=document.get<span class="hljs-constructor">ElementById(<span class="hljs-string">&quot;myBtn&quot;</span>)</span>;<br><span class="hljs-keyword">if</span>(x.addEventListener)&#123;<span class="hljs-comment">//æ‰€æœ‰ä¸»æµæµè§ˆå™¨ï¼Œé™¤IE8åŠå…¶æ—©æœŸç‰ˆæœ¬</span><br>x.add<span class="hljs-constructor">EventListener(<span class="hljs-string">&quot;click&quot;</span>,<span class="hljs-params">myFunction</span>)</span>;<br>&#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(x.attachEvent)&#123;<span class="hljs-comment">//IE8åŠæ›´æ—©ç‰ˆæœ¬</span><br>x.attach<span class="hljs-constructor">Event(<span class="hljs-string">&quot;onclick&quot;</span>,<span class="hljs-params">myFunction</span>)</span>;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-keyword">if</span>(<span class="hljs-variable">$btn2</span>.addEventListener) &#123; <br><span class="hljs-comment">//éIEçš„æ“ä½œ</span><br><span class="hljs-variable">$btn2</span>.addEventListener(<span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>console.debug(<span class="hljs-string">&#x27;æ‰€æœ‰æµè§ˆå™¨&#x27;</span>);<br>&#125;)<br><span class="hljs-variable">$btn2</span>.addEventListener(<span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>console.debug(<span class="hljs-string">&#x27;æ‰€æœ‰æµè§ˆå™¨2&#x27;</span>);<br>&#125;)<br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-variable">$btn2</span>.attachEvent) &#123;<br><span class="hljs-variable">$btn2</span>.attachEvent(<span class="hljs-string">&#x27;onclick&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123; <br><span class="hljs-comment">//å¦‚æœæ˜¯é’ˆå¯¹IEæµè§ˆå™¨çš„ï¼Œé‚£ä¹ˆéœ€è¦ä½¿ç”¨onclick</span><br>console.debug(<span class="hljs-string">&#x27;IE8ä¹‹å‰&#x27;</span>);<br>&#125;)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="JavaScriptå°æ¸¸æˆ"><a href="#JavaScriptå°æ¸¸æˆ" class="headerlink" title="JavaScriptå°æ¸¸æˆ"></a>JavaScriptå°æ¸¸æˆ</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/css&quot;</span>&gt;</span><br>.game &#123;<br><span class="css"><span class="hljs-attribute">width</span>: <span class="hljs-number">40px</span>;</span><br><span class="css"><span class="hljs-attribute">height</span>: <span class="hljs-number">40px</span>;</span><br><span class="css"><span class="hljs-attribute">background-color</span>: red;</span><br><span class="css"><span class="hljs-attribute">color</span>: white;</span><br><span class="css"><span class="hljs-comment">/* æ°´å¹³å±…ä¸­*/</span></span><br><span class="css"><span class="hljs-attribute">text-align</span>: center;</span><br><span class="css"><span class="hljs-comment">/*å‚ç›´å±…ä¸­*/</span></span><br><span class="css"><span class="hljs-attribute">line-height</span>: <span class="hljs-number">40px</span>;</span><br><span class="css"><span class="hljs-attribute">position</span>: absolute;</span><br>&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;btn1&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;å¼€å§‹&quot;</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;startGame()&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;btn2&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;ç»“æŸ&quot;</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;stopGame()&quot;</span> /&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;score&quot;</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>åˆ†<br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;game&quot;</span>&gt;</span>A<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="javascript"><span class="hljs-keyword">var</span> $newDivs = []; <span class="hljs-comment">//ä½¿ç”¨è¿™ä¸ªæ•°ç»„ç®¡ç†å·²ç»ç”Ÿæˆçš„æ–°çš„å…ƒç´ </span></span><br><br><span class="javascript"><span class="hljs-comment">//1.é¡µé¢ä¸Šç”Ÿæˆéšæœºå­—ç¬¦å—</span></span><br><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createEle</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript"><span class="hljs-comment">//1.1 åˆ›å»ºæ–°çš„å…ƒç´ æ·»åŠ è¿›é¡µé¢</span></span><br><span class="javascript"><span class="hljs-keyword">var</span> $root = <span class="hljs-built_in">document</span>.body;</span><br><span class="javascript"><span class="hljs-comment">//1.2 åˆ›å»ºæ–°å…ƒç´ </span></span><br><span class="javascript"><span class="hljs-keyword">var</span> $newDiv = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">&quot;div&quot;</span>);</span><br><span class="javascript"><span class="hljs-comment">//1.3 A-Zé”®ç›˜ç çš„èŒƒå›´åœ¨65-90 éšæœºç”Ÿæˆè¿™ä¸ªåŒºé—´ä¸­çš„å€¼ï¼Œæ·»åŠ åˆ°æ–°å…ƒç´ ä¸­</span></span><br><span class="javascript"><span class="hljs-comment">// å–æ•´ï¼ˆéšæœºæ•°*å–å€¼èŒƒå›´ï¼‰+èµ·å§‹å€¼</span></span><br><span class="javascript">$newDiv.innerHTML = <span class="hljs-built_in">String</span>.fromCharCode(<span class="hljs-built_in">parseInt</span>(<span class="hljs-built_in">Math</span>.random() * <span class="hljs-number">26</span>) + <span class="hljs-number">65</span>);</span><br><span class="javascript">$newDiv.className = <span class="hljs-string">&#x27;game&#x27;</span>;</span><br><span class="javascript">$newDiv.style.top = <span class="hljs-string">&quot;0px&quot;</span>;</span><br><span class="javascript"><span class="hljs-keyword">var</span> $width = <span class="hljs-built_in">document</span>.documentElement.clientWidth - <span class="hljs-number">120</span> * <span class="hljs-number">2</span>;</span><br><span class="javascript">$newDiv.style.left = <span class="hljs-built_in">Math</span>.random() * $width + <span class="hljs-number">120</span> + <span class="hljs-string">&quot;px&quot;</span>;</span><br><span class="javascript"><span class="hljs-built_in">console</span>.debug(<span class="hljs-built_in">Math</span>.random() * $width + <span class="hljs-number">120</span> + <span class="hljs-string">&quot;px&quot;</span>);</span><br><br><span class="javascript"><span class="hljs-comment">//1.4 å°†æ–°å…ƒç´ æ·»åŠ åˆ°çˆ¶èŠ‚ç‚¹ä¸­</span></span><br>$root.appendChild($newDiv);<br><span class="javascript">$newDivs.push($newDiv); <span class="hljs-comment">//æ·»åŠ è¿›æ•°ç»„</span></span><br>&#125;<br><br><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">startGame</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">$timer1 = <span class="hljs-built_in">setInterval</span>(createEle, <span class="hljs-number">800</span>);</span><br>&#125;<br><br><span class="javascript"><span class="hljs-comment">//3.ç§»åŠ¨å­—ç¬¦å—  é—®é¢˜ï¼šå½“å­—ç¬¦å—æ¶ˆå¤±åœ¨å¯è§èŒƒå›´ä¹‹å†…çš„æ—¶å€™ï¼Œä»ç„¶åœ¨ä¿®æ”¹topå€¼</span></span><br><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">moveDiv</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript"><span class="hljs-comment">//1.è·å–å­—ç¬¦å—å¯¹è±¡</span></span><br><span class="javascript"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; $newDivs.length; i++) &#123;</span><br><span class="javascript"><span class="hljs-keyword">var</span> $newDiv = $newDivs[i]; <span class="hljs-comment">//æ–°ç”Ÿå¯¹è±¡</span></span><br><span class="javascript"><span class="hljs-comment">//ä¸ºæ–°ç”Ÿå¯¹è±¡é€’å¢topå€¼</span></span><br><span class="javascript"><span class="hljs-keyword">var</span> $top = <span class="hljs-built_in">parseInt</span>($newDiv.style.top) + <span class="hljs-number">5</span>;</span><br><span class="javascript"><span class="hljs-keyword">var</span> $height = <span class="hljs-built_in">document</span>.documentElement.clientHeight;</span><br>if ($top &gt;= $height) &#123;<br><span class="javascript"><span class="hljs-built_in">document</span>.body.removeChild($newDiv); <span class="hljs-comment">//ç§»é™¤æ–°ç”Ÿå…ƒç´ </span></span><br>$newDivs.splice(i, 1);<br><span class="javascript">&#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="javascript">$newDiv.style.top = $top + <span class="hljs-string">&quot;px&quot;</span>;</span><br>&#125;<br>&#125;<br>&#125;<br><br><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">startGame</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">$timer1 = <span class="hljs-built_in">setInterval</span>(createEle, <span class="hljs-number">800</span>);</span><br><span class="javascript">$timer2 = <span class="hljs-built_in">setInterval</span>(moveDiv, <span class="hljs-number">100</span>);</span><br>&#125;<br><br><span class="javascript"><span class="hljs-comment">//4.æ¶ˆé™¤å­—ç¬¦</span></span><br><span class="javascript"><span class="hljs-built_in">document</span>.onkeyup = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>&#123;</span><br><span class="javascript"><span class="hljs-comment">//1.è·å–å½“å‰æŒ‰ä¸‹çš„é”®ç›˜ç </span></span><br><span class="javascript"><span class="hljs-keyword">var</span> $code = <span class="hljs-built_in">String</span>.fromCharCode(e.keyCode);</span><br><span class="javascript"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; $newDivs.length; i++) &#123;</span><br><span class="javascript"><span class="hljs-keyword">var</span> $res = $newDivs[i].innerHTML;</span><br>if ($code == $res) &#123;<br><span class="javascript"><span class="hljs-built_in">document</span>.body.removeChild($newDivs[i]); <span class="hljs-comment">//ç§»é™¤æ–°ç”Ÿå…ƒç´ </span></span><br>$newDivs.splice(i, 1);<br><span class="javascript"><span class="hljs-keyword">break</span>;</span><br>&#125;<br>&#125;<br>&#125;<br><br><span class="javascript"><span class="hljs-comment">//5.åœæ­¢</span></span><br><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">stopGame</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript"><span class="hljs-built_in">clearInterval</span>($timer1);</span><br><span class="javascript"><span class="hljs-built_in">clearInterval</span>($timer2);</span><br>&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰ç«¯å¼€å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>JavaScript</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Spring</title>
    <link href="/2019/11/28/Spring/"/>
    <url>/2019/11/28/Spring/</url>
    
    <content type="html"><![CDATA[<h3 id="Spring4"><a href="#Spring4" class="headerlink" title="Spring4"></a>Spring4</h3><p>Springæ¡†æ¶ç®€åŒ–JavaEEçš„å¼€å‘æµç¨‹ï¼Œè§£å†³ä¼ä¸šçº§åº”ç”¨å¼€å‘å¼€å‘å¤æ‚æ€§éš¾é¢˜ï¼Œæå‡JavaEEè½¯ä»¶å¼€å‘æ•ˆç‡ã€‚Springå¯¹å¤§éƒ¨åˆ†å¸¸ç”¨åŠŸèƒ½è¿›è¡Œäº†å°è£…ï¼Œæ¯”å¦‚ç®¡ç†JavaBeanï¼ŒåŒ…å«åˆ›å»ºåŠé”€æ¯ï¼Œè¿˜æä¾›äº†åŸºäºWebçš„SpringMVCåˆ†å±‚æ¶æ„ï¼Œæ”¯æŒæ•°æ®åº“æ“ä½œï¼Œå®‰å…¨éªŒè¯ç­‰åŠŸèƒ½ã€‚è¿™äº›åŠŸèƒ½çš„å®ç°è¦ä¾èµ–<code>DI(Dependency Injection)</code>å’Œ<code>AOP(Aspect Oriented Programming)</code>ä¸¤å‘˜å¤§å°†ï¼Œæˆ‘ä»¬éœ€æŒæ¡Springä¸­çš„è¿™ä¸¤ä¸ªæ ¸å¿ƒæŠ€æœ¯ï¼Œå¹¶åœ¨å®é™…çš„è½¯ä»¶å¼€å‘ä¸­å¾—ä»¥è¿ç”¨ã€‚</p><p>Springæ¡†æ¶å°±æ˜¯å®ç°äº†AOPåŠŸèƒ½çš„DIå®¹å™¨ï¼Œåœ¨DIå®¹å™¨åŸºç¡€ä¸ŠåŠ å…¥AOPå°±å¯ä»¥ä¸ä»…åšåˆ°æ¾è€¦åˆå¼€å‘ï¼Œè¿˜å…·æœ‰é¢å‘åˆ‡é¢ç¼–ç¨‹çš„åŠŸèƒ½ã€‚</p><h5 id="1-2ã€ä¸‰å±‚æ¶æ„çš„ç†è§£"><a href="#1-2ã€ä¸‰å±‚æ¶æ„çš„ç†è§£" class="headerlink" title="1.2ã€ä¸‰å±‚æ¶æ„çš„ç†è§£"></a>1.2ã€ä¸‰å±‚æ¶æ„çš„ç†è§£</h5><p>è¡¨ç°å±‚ &gt;&gt; ä¸šåŠ¡å±‚ &gt;&gt; æŒä¹…å±‚</p><table><thead><tr><th>å±‚</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>è¡¨ç°å±‚(Web)</td><td>jsp/servletç­‰å°±æ˜¯è¡¨ç°å±‚</td></tr><tr><td>ä¸šåŠ¡å±‚(service)</td><td>å¤„ç†ç›¸åº”çš„ä¸šåŠ¡ï¼Œç”±è¡¨ç°å±‚è°ƒç”¨</td></tr><tr><td>æŒä¹…å±‚(dao)</td><td>åšæ•°æ®çš„æŒä¹…åŒ–(ç°åœ¨å’±ä»¬æ“ä½œæ•°æ®åº“å°±æ˜¯å®ŒæˆæŒä¹…åŒ–çš„åŠŸèƒ½)  JDBCï¼ŒSpringJDBC,Hibernate,MyBatis</td></tr></tbody></table><p><img src="/2019/11/28/Spring/Spring.png"></p><p>å‘½åè§„èŒƒï¼š</p><ol><li>daoå±‚ï¼š<ul><li>daoæ¥å£(daoåŒ….): IXxxDAO         IEmployeeDAO</li><li>daoå®ç°(dao.implåŒ….): XxxDAOImpl      EmployeeDAOImpl</li></ul></li><li>serviceå±‚ï¼š<ul><li>serviceçš„åŒ…ä¸daoçš„åŒ…åº”è¯¥åœ¨åŒä¸€å±‚</li><li>serviceæ¥å£(serviceåŒ….): IXxxService     IEmployeeService</li><li>serviceå®ç°(service.implåŒ….): XxxServiceImpl  EmployeeServiceImpl</li></ul></li></ol><p>ä¸€èˆ¬é¡¹ç›®çš„ç›®å½•ç»“æ„ï¼šä¸€ä¸ªdomainåŒ…ï¼Œä¸€ä¸ªdaoåŒ…ï¼Œä¸€ä¸ªserviceåŒ…ï¼Œä¸€ä¸ªcontrolleråŒ…ã€‚</p><p>controllerè°ƒç”¨serviceï¼Œserviceè°ƒç”¨dao</p><h5 id><a href="#" class="headerlink" title></a></h5><p>æ¨¡æ‹Ÿå®Œæˆè¿‡å»çš„ä»Servletå‘ä¸‹è°ƒç”¨çš„è¿‡ç¨‹ï¼Œé€šè¿‡mainæ–¹æ³•åˆ›å»ºServletè¿›è¡Œæµ‹è¯•</p><p>æ­¥éª¤:  æ–°å»ºJavaWebé¡¹ç›®ã€åˆ›å»ºåŒ…ç»“æ„ã€å†™ä»£ç ã€è®¿é—®æµ‹è¯•</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-comment">//Controllerå±‚</span><br>public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>&#123;<br><span class="hljs-comment">// éœ€è¦è°ƒç”¨serviceä¸šåŠ¡å±‚æ–¹æ³•</span><br><span class="hljs-type">IUserService</span> userService = <span class="hljs-keyword">new</span> <span class="hljs-type">UserServiceImpl</span>();<br><span class="hljs-keyword">protected</span> void service(<span class="hljs-type">HttpServletRequest</span> request, <span class="hljs-type">HttpServletResponse</span> response) &#123;<br><span class="hljs-comment">//è°ƒç”¨Serviceå±‚æ–¹æ³•</span><br><span class="hljs-type">List</span>&lt;<span class="hljs-type">User</span>&gt; list = userService.listUser();<br>        ... ...<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs haxe"><span class="hljs-comment">//Serviceå±‚</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserServiceImpl</span> <span class="hljs-keyword"><span class="hljs-keyword">implements</span> <span class="hljs-type">IUserService</span></span> </span>&#123;<br><span class="hljs-comment">// éœ€è¦è°ƒç”¨daoå±‚æ–¹æ³•</span><br>    <span class="hljs-keyword">private</span> IUserDao userDao = <span class="hljs-keyword">new</span> <span class="hljs-type">UserDaoImp</span>();<br><span class="hljs-keyword">public</span> List&lt;User&gt; listUser() &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.userDao.listUser();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//Daoå±‚</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserDaoImp</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">IUserDao</span> </span>&#123;<br><span class="hljs-meta">@Override</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title">listUser</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// ç”±daoå±‚æ•°æ®åº“è®¿é—®æ“ä½œ</span><br>    System.out.println(<span class="hljs-string">&quot;æ¨¡æ‹Ÿæ•°æ®åº“æŸ¥è¯¢å¾—åˆ°æ•°æ® &quot;</span>);<br>... ...<br><span class="hljs-keyword">return</span> list;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="Springè¿›å…¥æ­£é¢˜"><a href="#Springè¿›å…¥æ­£é¢˜" class="headerlink" title="Springè¿›å…¥æ­£é¢˜"></a>Springè¿›å…¥æ­£é¢˜</h4><h5 id="åœ¨æ²¡æœ‰Springæ¡†æ¶ä¹‹å‰ï¼ŒJavaå¼€å‘ä¸­ä¼šé‡åˆ°çš„éš¾é¢˜ï¼š"><a href="#åœ¨æ²¡æœ‰Springæ¡†æ¶ä¹‹å‰ï¼ŒJavaå¼€å‘ä¸­ä¼šé‡åˆ°çš„éš¾é¢˜ï¼š" class="headerlink" title="åœ¨æ²¡æœ‰Springæ¡†æ¶ä¹‹å‰ï¼ŒJavaå¼€å‘ä¸­ä¼šé‡åˆ°çš„éš¾é¢˜ï¼š"></a>åœ¨æ²¡æœ‰Springæ¡†æ¶ä¹‹å‰ï¼ŒJavaå¼€å‘ä¸­ä¼šé‡åˆ°çš„éš¾é¢˜ï¼š</h5><p>1ã€ä»£ç è€¦åˆåº¦é«˜</p><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs haxe"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserServiceImpl</span> </span>&#123;<br><span class="hljs-comment">//å¦‚æœæ¥å£å’Œå®ç°ç±»åœ¨åŒä¸€åœ°æ–¹å­˜åœ¨ï¼Œé‚£ä¹ˆå°±æ˜¯é«˜è€¦åˆã€‚</span><br><span class="hljs-keyword">private</span> IUserDao userDao = <span class="hljs-keyword">new</span> <span class="hljs-type">UserDaoImpl</span>();<br>&#125;<br></code></pre></td></tr></table></figure><p>UserServiceé™¤äº†å®Œæˆä¸šåŠ¡é€»è¾‘åŠŸèƒ½çš„å®ç°ï¼Œè¿˜éœ€è¦æŠŠæ•°æ®é€šè¿‡UserDaoè¿›è¡ŒæŒä¹…åŒ–ï¼Œæ‰€ä»¥ç§°UserServiceä¾èµ–äºUserDaoæ¥å®Œæˆå¥¹çš„å·¥ä½œï¼Œå¦‚æœUserServiceç¦»å¼€äº†UserDaoä¾¿æ— æ³•å·¥ä½œï¼›</p><p>2ã€å¯¹è±¡é—´ä¾èµ–å…³ç³»ç¹ç</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-symbol">UserServlet</span> &#123;<br>  <span class="hljs-keyword">private</span> IUserService service;<span class="hljs-comment">//ä¾èµ–UserService</span><br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-symbol">UserService</span>&#123;<br>   <span class="hljs-keyword">private</span> IUserDao dao;<span class="hljs-comment">//ä¾èµ–UserDao</span><br>&#125;<br></code></pre></td></tr></table></figure><p>é€šè¿‡ä»£ç æ¥<code>åˆ›å»ºå¯¹è±¡</code>åŠ<code>ç®¡ç†è¿™äº›å¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»</code>æ˜¯ç›¸å½“éº»çƒ¦çš„ä¸€ä»¶äº‹ã€‚  </p><p>3ã€äº‹åŠ¡æ§åˆ¶ç¹ç</p><p>å®é™…å¼€å‘ä¸­ï¼ŒæŸä¸€ä¸ªä¸šåŠ¡é€»è¾‘å¯èƒ½ä¼šç‰µæ¶‰å¤šä¸ªæ“ä½œï¼ˆå¤šä¸ªsqlï¼‰ï¼Œäº‹åŠ¡å¼€å¯åœ¨ service å±‚ï¼Œæ˜¯æå¥½çš„ã€‚</p><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs lasso">UserService&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> save(<span class="hljs-params">...</span>)&#123;<br>  å¼€å¯äº‹åŠ¡<span class="hljs-params">...</span><br>      dao.save(<span class="hljs-params">...</span>);<br>      å…³é—­äº‹åŠ¡<span class="hljs-params">...</span><br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> update(<span class="hljs-params">...</span>)&#123;<br>  å¼€å¯äº‹åŠ¡<span class="hljs-params">...</span><br>      dao.update(<span class="hljs-params">...</span>);<br>      å…³é—­äº‹åŠ¡<span class="hljs-params">...</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ¶‰åŠåˆ°äº‹åŠ¡å¤„ç†çš„åœ°æ–¹ï¼Œæ¯æ¬¡é€šè¿‡ä»£ç æ¥å®ç°è¿™äº›äº‹åŠ¡çš„å¼€å¯å’Œå…³é—­ï¼Œå¯¼è‡´ä»£ç é‡å¤å¼€å‘æ•ˆç‡ä½ä¸‹ã€‚  </p><h5 id="2-2ã€Springæ¡†æ¶çš„å‡ºç°è§£å†³äº†ä¸Šè¿°é—®é¢˜"><a href="#2-2ã€Springæ¡†æ¶çš„å‡ºç°è§£å†³äº†ä¸Šè¿°é—®é¢˜" class="headerlink" title="2.2ã€Springæ¡†æ¶çš„å‡ºç°è§£å†³äº†ä¸Šè¿°é—®é¢˜"></a>2.2ã€Springæ¡†æ¶çš„å‡ºç°è§£å†³äº†ä¸Šè¿°é—®é¢˜</h5><p><code>é™ä½è€¦åˆåº¦</code>ï¼Œ<code>æé«˜ç¨‹åºçš„å¯é‡ç”¨æ€§</code>ï¼Œ<code>æé«˜å¼€å‘çš„æ•ˆç‡</code>ï¼Œ<code>ç®€åŒ–è‡ƒè‚¿çš„ä»£ç </code></p><img src="/2019/11/28/Spring/image-20191228163850907.png" alt="image-20191228163850907" style="zoom:150%;"><h4 id="3ã€Springæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#3ã€Springæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="3ã€Springæ˜¯ä»€ä¹ˆï¼Ÿ"></a>3ã€Springæ˜¯ä»€ä¹ˆï¼Ÿ</h4><p>æ¡†æ¶ï¼Œé€šå¸¸æŒ‡çš„æ˜¯ä¸ºäº†å®ç°æŸä¸ªä¸šç•Œæ ‡å‡†æˆ–å®Œæˆç‰¹å®šåŸºæœ¬ä»»åŠ¡çš„è½¯ä»¶ç»„ä»¶è§„èŒƒï¼Œä¹ŸæŒ‡ä¸ºäº†å®ç°æŸä¸ªè½¯ä»¶ç»„ä»¶è§„èŒƒæ—¶ï¼Œæä¾›è§„èŒƒæ‰€è¦æ±‚ä¹‹åŸºç¡€åŠŸèƒ½çš„è½¯ä»¶äº§å“ã€‚</p><p>æ¡†æ¶å°±æ˜¯åˆ¶å®šä¸€å¥—è§„èŒƒæˆ–è€…è§„åˆ™ï¼ˆæ€æƒ³ï¼‰ï¼Œå¤§å®¶ï¼ˆç¨‹åºå‘˜ï¼‰åœ¨è¯¥è§„èŒƒä¸‹å·¥ä½œã€‚æˆ–è€…è¯´ä½¿ç”¨åˆ«äººæ­å¥½çš„èˆå°æ¥åšç¼–å‰§å’Œè¡¨æ¼”ã€‚</p><p>Springæ˜¯ä¸€ä¸ªå¼€æ”¾æºä»£ç çš„è®¾è®¡å±‚é¢æ¡†æ¶ï¼Œä»–è§£å†³çš„æ˜¯ä¸šåŠ¡é€»è¾‘å±‚å’Œå…¶ä»–å„å±‚çš„æ¾è€¦åˆé—®é¢˜ï¼Œä»»ä½•Javaåº”ç”¨éƒ½å¯ä»¥ä»Springä¸­å—ç›Šã€‚ç®€å•æ¥è¯´ï¼ŒSpringæ˜¯ä¸€ä¸ªåˆ†å±‚çš„JavaSE/EEfull-stack(ä¸€ç«™å¼) è½»é‡çº§å¼€æºæ¡†æ¶ã€‚</p><p>Springæ˜¯å…¨é¢çš„å’Œæ¨¡å—åŒ–çš„ã€‚Springæœ‰åˆ†å±‚çš„ä½“ç³»ç»“æ„ï¼Œä½ å¯ä»¥é€‰æ‹©ä½¿ç”¨Springæ¥ç®€å•åŒ–JDBCçš„ä½¿ç”¨ï¼Œæˆ–ç”¨æ¥ç®¡ç†æ‰€æœ‰çš„ä¸šåŠ¡å¯¹è±¡ã€‚</p><h4 id="4ã€Springæ ¸å¿ƒ"><a href="#4ã€Springæ ¸å¿ƒ" class="headerlink" title="4ã€Springæ ¸å¿ƒ"></a>4ã€Springæ ¸å¿ƒ</h4><h5 id="4-1ã€IOCæ§åˆ¶åè½¬"><a href="#4-1ã€IOCæ§åˆ¶åè½¬" class="headerlink" title="4.1ã€IOCæ§åˆ¶åè½¬"></a>4.1ã€IOCæ§åˆ¶åè½¬</h5><p><code>IOC(Inverse Of Control)æ§åˆ¶åè½¬</code>ï¼š</p><p>æ‰€è°“æ§åˆ¶åè½¬å°±æ˜¯æŠŠå¯¹è±¡ï¼ˆbeanï¼‰åˆ›å»ºå’Œç»´æŠ¤å¯¹è±¡ï¼ˆbeanï¼‰ä¹‹é—´çš„å…³ç³»çš„æƒåˆ©è½¬ç§»åˆ°Springå®¹å™¨ä¸­å»äº†ï¼ˆapplicationContext.xmlï¼‰è€Œç¨‹åºæœ¬èº«ä¸åœ¨ç»´æŠ¤äº†ã€‚</p><p>ç›®çš„æ˜¯å°†è°ƒç”¨è€…å’Œè¢«è°ƒç”¨è€…åˆ†ç¦»ï¼Œå°†ç±»ä¸ç±»ä¹‹é—´çš„å…³ç³»è§£è€¦ï¼Œæ˜¯ä¸€ç§è®¾è®¡æ€æƒ³ã€‚  </p><p><code>DI(Dependency Injection)ä¾èµ–æ³¨å…¥</code>ï¼š</p><p><strong>å®é™…ä¸ŠDIå’ŒIOCæ˜¯åŒä¸€ä¸ªæ¦‚å¿µ</strong>ï¼Œä¾èµ–æ³¨å…¥å’Œæ§åˆ¶åè½¬æ˜¯å¯¹åŒä¸€ä»¶äº‹æƒ…çš„ä¸åŒæè¿°<strong>ã€‚</strong>å› ä¸ºåœ¨applicationContext.xmlé…ç½®æ–‡ä»¶ä¸­beanå’Œbeanä¹‹é—´é€šè¿‡refæ¥ç»´æŠ¤çš„æ—¶å€™æ˜¯ç›¸äº’ä¾èµ–çš„ï¼Œæ‰€ä»¥åˆå«åšä¾èµ–æ³¨å…¥ï¼Œä¹Ÿå°±æ˜¯æ§åˆ¶åè½¬ã€‚  </p><p>åœ¨æ²¡æœ‰Springæ¡†æ¶æ—¶ï¼Œå¦‚æœåœ¨A.javaç±»ä¸­ä½¿ç”¨B.javaç±»ï¼Œåˆ™å¿…é¡»åœ¨A.javaç±»ä¸­å®ä¾‹åŒ–å‡ºB.javaç±»å¯¹è±¡ï¼Œå¦‚æ­¤ä¾¿é€ æˆäº†Aå’ŒBç±»çš„ç´§è€¦åˆï¼ŒAç±»å®Œå…¨ä¾èµ–äºBç±»çš„åŠŸèƒ½å®ç°ï¼Œè¿™æ ·çš„æƒ…å†µå°±æ˜¯å…¸å‹çš„â€œä¾µå…¥å¼å¼€å‘â€ã€‚éšç€è½¯ä»¶ä¸šåŠ¡å¤æ‚åº¦çš„æå‡ï¼Œå½“åŸæœ‰çš„Bç±»ä¸èƒ½æ»¡è¶³Açš„åŠŸèƒ½å®ç°æ—¶ï¼Œå°±éœ€è¦åˆ›å»ºæ›´ä¸ºé«˜çº§çš„BExt.javaç±»ï¼Œç»“æœå°±é€ æˆäº†éœ€è¦æŠŠAä¸­æ‰€æœ‰å®ä¾‹åŒ–B.javaç±»çš„ä»£ç æ›¿æ¢æˆnew BExt() ä»£ç ã€‚äº§ç”Ÿçš„æºä»£ç çš„å¤§å¹…æ”¹åŠ¨ï¼Œä¸åˆ©äºè½¯ä»¶è¿è¡Œçš„ç¨³å®šï¼Œå¹¶ä¸ç¬¦åˆå•†ä¸šè½¯ä»¶çš„å¼€å‘æµç¨‹ï¼ŒSpringçš„DIå°±å¯ä»¥è§£å†³è¿™æ ·çš„æƒ…å†µã€‚</p><p>å…¶è§£å†³åŠæ³•å°±æ˜¯ä½¿ç”¨<code>åå°„æŠ€æœ¯</code>ï¼Œæ¥åŠ¨æ€çš„å¯¹ä¸€ä¸ªç±»ä¸­çš„å±æ€§è¿›è¡Œåå°„å¤åˆ¶ã€‚è¿™æ ·çš„åŠŸèƒ½Springå½¢æˆäº†ä¸€ä¸ªæ¨¡å—ï¼Œæ¨¡å—çš„åŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œå¹¶ä¸”SpringæŠŠè¿™ç§æœºåˆ¶è¿›è¡Œå‘½åï¼Œå«åšä¾èµ–æ³¨å…¥ã€‚</p><p>DIä¾§é‡äºå®ç°ï¼ŒAç±»ä¾èµ–äºBç±»ï¼ŒBç±»çš„å¯¹è±¡ç”±å®¹å™¨åˆ›å»ºï¼Œå®¹å™¨åœ¨å¯¹Aç±»ä¸­çš„Bç±»å±æ€§è¿›è¡Œå¯¹è±¡å€¼çš„æ³¨å…¥ã€‚DIåœ¨Javaåº•å±‚æŠ€æœ¯åŸç†å°±æ˜¯â€œåå°„â€ï¼Œä½¿ç”¨åå°„æŠ€æœ¯å¯¹æŸä¸€ä¸ªç±»ä¸­çš„å±æ€§è¿›è¡ŒåŠ¨æ€èµ‹å€¼ï¼Œæ¥è¾¾åˆ°Aç±»ä¸Bç±»ä¹‹é—´çš„è§£è€¦ã€‚</p><p>Springçš„DIå…¶å®å°±æ˜¯å¯¹JavaBeançš„å±æ€§ä½¿ç”¨åå°„æŠ€æœ¯è¿›è¡Œèµ‹å€¼ã€‚å½“æœ‰è®¸å¤šJavaBeanéœ€è¦è¿™æ ·æ“ä½œæ—¶ï¼Œè¿™äº›JavaBeançš„ç®¡ç†å°±æˆäº†é—®é¢˜ï¼Œæœ‰çš„éœ€è¦å…³è”æœ‰çš„ä¸éœ€è¦å…³è”ï¼Œä½†æ‰€æœ‰çš„è¿™äº›JavaBeançš„åˆ›å»ºï¼Œé”€æ¯éƒ½è¦åŒä¸€è°ƒåº¦ï¼Œç”±Springæ¡†æ¶å¤„ç†ä»–ä»¬çš„ç”Ÿå‘½å‘¨æœŸã€‚ä¸ºäº†æ–¹ä¾¿è¿™ç§ç®¡ç†ï¼ŒSpringæ¡†æ¶æä¾›äº†DIå®¹å™¨ï¼Œå¯¹JavaBeanç»Ÿä¸€ç»„ç»‡ï¼Œä¾¿äºåæœŸç»´æŠ¤ã€‚</p><p>æ€»ç»“ï¼šå¯¹è±¡çš„å…³ç³»ä¾èµ–äºå®¹å™¨æ³¨å…¥ï¼Œç”±å®¹å™¨ç®¡ç†ï¼Œè€Œå¯¹è±¡è‡ªå·±ä¸éœ€è¦ç®¡ç†ã€‚</p><img src="/2019/11/28/Spring/image-20191228164413418.png" alt="image-20191228164413418" style="zoom:200%;"><h5 id="4-2ã€AOPé¢å‘åˆ‡é¢"><a href="#4-2ã€AOPé¢å‘åˆ‡é¢" class="headerlink" title="4.2ã€AOPé¢å‘åˆ‡é¢"></a>4.2ã€AOPé¢å‘åˆ‡é¢</h5><p><code>AOPä¸ºAspect Oriented Programmingçš„ç¼©å†™</code>ï¼Œæ„ä¸ºï¼š</p><p><strong>é¢å‘åˆ‡é¢ç¼–ç¨‹</strong>ï¼Œé€šè¿‡<code>é¢„ç¼–è¯‘æ–¹å¼</code>å’Œ<code>è¿è¡ŒæœŸåŠ¨æ€ä»£ç†</code>å®ç°ç¨‹åºåŠŸèƒ½çš„ç»Ÿä¸€ç»´æŠ¤çš„ä¸€ç§æŠ€æœ¯ã€‚AOPæ˜¯OOPçš„å»¶ç»­ï¼Œæ˜¯è½¯ä»¶å¼€å‘ä¸­çš„ä¸€ä¸ªçƒ­ç‚¹ï¼Œä¹Ÿæ˜¯Springæ¡†æ¶ä¸­çš„ä¸€ä¸ªé‡è¦å†…å®¹ï¼Œæ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„ä¸€ç§è¡ç”ŸèŒƒå‹ã€‚åˆ©ç”¨AOPå¯ä»¥å¯¹ä¸šåŠ¡é€»è¾‘çš„å„ä¸ªéƒ¨åˆ†è¿›è¡Œéš”ç¦»ï¼Œä»è€Œä½¿å¾—ä¸šåŠ¡é€»è¾‘å„éƒ¨åˆ†ä¹‹é—´çš„è€¦åˆåº¦é™ä½ï¼Œæé«˜ç¨‹åºçš„å¯é‡ç”¨æ€§ï¼ŒåŒæ—¶æé«˜äº†å¼€å‘çš„æ•ˆç‡ã€‚</p><p>AOPé‡‡å–<code>æ¨ªå‘æŠ½å–</code>æœºåˆ¶ï¼Œå–ä»£äº†ä¼ ç»Ÿ<code>çºµå‘ç»§æ‰¿</code>ä½“ç³»é‡å¤æ€§ä»£ç ï¼›</p><p>AOPå¯ä»¥ç”¨äºï¼šæ—¥å¿—è®°å½•ï¼Œæ€§èƒ½ç»Ÿè®¡ï¼Œå®‰å…¨æ§åˆ¶ï¼Œäº‹åŠ¡å¤„ç†ï¼Œå¼‚å¸¸å¤„ç†å’Œç¼“å­˜ç­‰ç­‰ï¼›</p><p>Spring AOPä½¿ç”¨çº¯Javaå®ç°ï¼Œä¸éœ€è¦ä¸“é—¨çš„ç¼–è¯‘è¿‡ç¨‹å’Œç±»åŠ è½½å™¨ï¼Œåœ¨è¿è¡ŒæœŸé€šè¿‡ä»£ç†æ–¹å¼å‘ç›®æ ‡ç±»ç»‡å…¥å¢å¼ºä»£ç </p><p>AspectJæ˜¯ä¸€ä¸ªåŸºäºJavaè¯­è¨€çš„AOPæ¡†æ¶ï¼ŒSpring2.0å¼€å§‹ï¼ŒSpring AOPå¼•å…¥å¯¹Aspectçš„æ”¯æŒï¼ŒAspectJæ‰©å±•äº†Javaè¯­è¨€ï¼Œæä¾›äº†ä¸€ä¸ªä¸“é—¨çš„ç¼–è¯‘å™¨ï¼Œåœ¨ç¼–è¯‘æ—¶æä¾›æ¨ªå‘ä»£ç çš„ç»‡å…¥</p><p>æ€»ç»“ï¼šSpringä½¿ç”¨AOPçš„åŠŸèƒ½å®Œæˆå„ç§å…±ç”¨çš„æ¨¡æ¿åŠŸèƒ½<strong>ï¼Œ</strong>ä½¿å¾—æˆ‘ä»¬çš„ä¸šåŠ¡ä»£ç ä¸å…¶å®ƒä»£ç åˆ†å¼€ï¼ŒSpringæ˜¯ä¸€ä¸ªè½»é‡çº§æ§åˆ¶åè½¬(IoC)å’Œé¢å‘åˆ‡é¢(AOP)çš„<code>å®¹å™¨æ¡†æ¶</code>ã€‚</p><h4 id="5ã€Springå…¥é—¨æ¡ˆä¾‹"><a href="#5ã€Springå…¥é—¨æ¡ˆä¾‹" class="headerlink" title="5ã€Springå…¥é—¨æ¡ˆä¾‹"></a>5ã€Springå…¥é—¨æ¡ˆä¾‹</h4><h5 id="5-1ã€å¼•å…¥æ­¥éª¤"><a href="#5-1ã€å¼•å…¥æ­¥éª¤" class="headerlink" title="5.1ã€å¼•å…¥æ­¥éª¤"></a>5.1ã€å¼•å…¥æ­¥éª¤</h5><ol><li><p>åˆ›å»ºä¸€ä¸ªå·¥ç¨‹ï¼Œç”¨æ¥æ¼”ç¤ºSpringçš„å…¥é—¨æ¡ˆä¾‹ï¼›</p></li><li><p>ä½¿ç”¨Springçš„åŠŸèƒ½ï¼Œéœ€è¦å¯¼å…¥Springç›¸å…³çš„åŒ…ï¼›</p></li><li><p>åˆ›å»ºç”±Springç®¡ç†çš„ç±»å¯¹è±¡ï¼›</p></li><li><p>åˆ›å»ºé…ç½®æ–‡ä»¶ï¼Œé…ç½®beanå¯¹è±¡ï¼ŒSpringé€šè¿‡è§£æé…ç½®æ–‡ä»¶ï¼Œè·å–å¯¹è±¡ä¿¡æ¯ï¼›</p></li><li><p>è¿™é‡Œæˆ‘ä»¬å…ˆé€šè¿‡å•å…ƒæµ‹è¯•çš„æ–¹æ³•è¿è¡Œï¼Œä¹‹åæˆ‘ä»¬ä¼šå­¦ä¹ Springçš„æµ‹è¯•æ¨¡å—ã€‚</p></li></ol><h5 id="5-2ã€å¯¼åŒ…"><a href="#5-2ã€å¯¼åŒ…" class="headerlink" title="5.2ã€å¯¼åŒ…"></a>5.2ã€å¯¼åŒ…</h5><p>spring-framework-4.1.2.RELEASE</p><p><img src="/2019/11/28/Spring/Snipaste_2019-11-27_09-40-42.png"></p><p><strong>1ã€æ ¸å¿ƒåŸºç¡€åŒ…ï¼š</strong></p><p><img src="/2019/11/28/Spring/image-20191213221515169.png" alt="image-20191213221515169"></p><p><strong>2ã€æ—¥å¿—åŒ…</strong></p><p><img src="/2019/11/28/Spring/Snipaste_2019-11-27_09-42-35.png"></p><p>ç›®å‰å°±å…ˆå¯¼å…¥æ ¸å¿ƒåŒ…(core)å’ŒbeansåŒ…ã€æœ€å°é…ç½®åŒ…ã€‘</p><p><img src="/2019/11/28/Spring/Snipaste_2019-11-27_09-44-16.png"></p><p>å¯¼åŒ…çš„æ—¶å€™æ³¨æ„ï¼Œç°åœ¨ä½¿ç”¨Springï¼Œè¦å®Œæˆæœ€å°å¯¼åŒ…ï¼Œå³ï¼šéœ€è¦ä»€ä¹ˆjaråŒ…ï¼Œæˆ‘ä»¬å°±å¯¼å…¥å“ªä¸€ä¸ªjaråŒ…ï¼Œè¿™ä¸ªå¯¹å’±ä»¬è®¤è¯†æ¡†æ¶çš„åŒ…æ˜¯éå¸¸æœ‰å¸®åŠ©çš„ã€‚ä¸ç„¶ä»¥åç”±äºå‡ºç°é—®é¢˜è‡ªå·±éƒ½ä¸çŸ¥é“åº”è¯¥æ€ä¹ˆè§£å†³ã€‚</p><h5 id="5-3ã€å‡†å¤‡å¯¹è±¡ç±»"><a href="#5-3ã€å‡†å¤‡å¯¹è±¡ç±»" class="headerlink" title="5.3ã€å‡†å¤‡å¯¹è±¡ç±»"></a>5.3ã€å‡†å¤‡å¯¹è±¡ç±»</h5><p>åœ¨domainåŒ…ä¸­åˆ›å»ºæ–°çš„å®ä½“ç±»ï¼Œäº¦å³Javabeanï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs haxe"><span class="hljs-comment">//User.java</span><br><span class="hljs-keyword">package</span> cn.kongwei_liao.spring.Domain;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">String</span> name;<br>    <span class="hljs-keyword">private</span> Integer age;<br><span class="hljs-comment">//çœç•¥äº†getterå’Œsetteræ–¹æ³•</span><br>&#125;<br></code></pre></td></tr></table></figure><h5 id="5-4ã€XMLé…ç½®æ–‡ä»¶"><a href="#5-4ã€XMLé…ç½®æ–‡ä»¶" class="headerlink" title="5.4ã€XMLé…ç½®æ–‡ä»¶"></a>5.4ã€XMLé…ç½®æ–‡ä»¶</h5><p>Springé€šè¿‡è¿™ä¸ªé…ç½®æ–‡ä»¶è§£æå¯¹è±¡ä¿¡æ¯ï¼Œæ­¤Springé…ç½®æ–‡ä»¶çš„åç§°å’Œæ”¾ç½®çš„ä½ç½®æ²¡æœ‰å›ºå®šè¦æ±‚ã€‚</p><p>ä½†æ˜¯,å»ºè®®é…ç½®æ–‡ä»¶å‘½ä¸º: <strong>applicationContext.xml</strong>ï¼Œ æ”¾åˆ°<code>Resourceså±æ€§çš„ç›®å½•</code>ä¸‹ã€‚</p><p>è¯¥é…ç½®æ–‡ä»¶çš„åŸºæœ¬ä¿¡æ¯å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag"><span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag"><span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><br><span class="hljs-tag"><span class="hljs-string">http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span><br><br>  <span class="hljs-comment">&lt;!--ç›®å‰ç°åœ¨ä¸Šé¢åŸºæœ¬é…ç½®é‡ŒåŠ å…¥å¦‚ä¸‹ä¸€æ¡ï¼Œåœ¨&lt;beans&gt;ä¸­--&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;user&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;cn.kongwei_liao.spring.Domain.User&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure><p>æˆ–ä½¿ç”¨è‹±æ–‡æ–‡æ¡£ä¸­çš„é…ç½®ï¼š</p><p><img src="/2019/11/28/Spring/app.xml.png"></p><p>å¼•å…¥çº¦æŸï¼šXMLcatalogï¼Œä½ç½®ï¼šspring-framework-3.2.0.RELEASE\schema\beansç›®å½•ä¸‹</p><h5 id="5-5ã€ä»£ç æµ‹è¯•"><a href="#5-5ã€ä»£ç æµ‹è¯•" class="headerlink" title="5.5ã€ä»£ç æµ‹è¯•"></a>5.5ã€ä»£ç æµ‹è¯•</h5><p>æˆ‘ä»¬ç¬¬ä¸€æ­¥æ˜¯è¦å¯åŠ¨æ¡†æ¶ï¼Œè€Œå¯åŠ¨æ¡†æ¶åˆ™éœ€è¦æ‹¿åˆ°Springçš„æ ¸å¿ƒå¯¹è±¡ï¼›</p><p>ç¬¬ä¸€ä¸ªæ ¸å¿ƒå¯¹è±¡æ˜¯<strong>BeanFactory</strong> : é¡¾åæ€ä¹‰ï¼Œè¿™æ˜¯ä¸€ä¸ªåˆ›å»ºBeançš„å·¥å‚</p><p>å› æ­¤ï¼šæˆ‘ä»¬çš„ç¬¬ä¸€æ­¥è¯»å–é…ç½®æ–‡ä»¶ï¼Œæ‹¿åˆ°BeanFactoryå·¥å‚</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">public <span class="hljs-keyword">class</span> testHelloSpring &#123;<br>    @Test<br>    public void test<span class="hljs-constructor">Hello()</span>&#123;<br>    <br>        <span class="hljs-comment">//ç¬¬ä¸€æ­¥ï¼šè¯»å–èµ„æºæ–‡ä»¶</span><br>        <span class="hljs-comment">//String xmlPath=&quot;...&quot;;</span><br>        Resource resource = <span class="hljs-keyword">new</span> <span class="hljs-constructor">ClassPathResource(<span class="hljs-string">&quot;applicationContext.xml&quot;</span>)</span>;<br>        <br>        <span class="hljs-comment">//ç¬¬äºŒæ­¥ï¼šæ‹¿åˆ°æ ¸å¿ƒå¯¹è±¡ BeanFactory</span><br>        <span class="hljs-comment">//BeanFactory factory = new XmlBeanFactory(xmlPath);</span><br>        BeanFactory factory = <span class="hljs-keyword">new</span> <span class="hljs-constructor">XmlBeanFactory(<span class="hljs-params">resource</span>)</span>;<br>        <br>        <span class="hljs-comment">//ç¬¬ä¸‰æ­¥ï¼šä»å·¥å‚ä¸­æ‹¿åˆ°ä¸€ä¸ªBeanå¯¹è±¡</span><br>        User user = (User)factory.get<span class="hljs-constructor">Bean(<span class="hljs-string">&quot;user&quot;</span>)</span>;<br>        <br>        user.set<span class="hljs-constructor">Name(<span class="hljs-string">&quot;å·¥å‚è´¢æºå¹¿è¿›&quot;</span>)</span>;<br>        user.set<span class="hljs-constructor">Age(8)</span>;<br>        <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(user);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="5-6ã€æ¡ˆä¾‹å°ç»“"><a href="#5-6ã€æ¡ˆä¾‹å°ç»“" class="headerlink" title="5.6ã€æ¡ˆä¾‹å°ç»“"></a>5.6ã€æ¡ˆä¾‹å°ç»“</h5><ol><li><p>åˆ©ç”¨ Springå®¹å™¨ï¼Œå¸®åŠ©æˆ‘ä»¬åˆ›å»ºç®¡ç†å¯¹è±¡ï¼›</p></li><li><p>éœ€è¦å¯¼å…¥ Spring ç›¸å…³çš„jaråŒ…ï¼›</p></li><li><p>éœ€è¦åˆ›å»ºå¹¶é…ç½®applicationContext.xmlæ–‡ä»¶ï¼›</p></li><li><p>Springé€šè¿‡è§£æé…ç½®æ–‡ä»¶ï¼Œæ‹¿åˆ°æ ¸å¿ƒå¯¹è±¡BeanFactoryï¼Œå¸®æˆ‘ä»¬åˆ›å»ºç®¡ç†å¯¹è±¡ã€‚</p></li></ol><h4 id="6ã€SpringåŸç†åˆ†æ"><a href="#6ã€SpringåŸç†åˆ†æ" class="headerlink" title="6ã€SpringåŸç†åˆ†æ"></a>6ã€SpringåŸç†åˆ†æ</h4><p>é€šè¿‡ä¹‹å‰çš„Springå…¥é—¨æ¡ˆä¾‹ï¼ŒçŸ¥é“çš„Springçš„æ ¸å¿ƒå°±æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œå®ƒä¼šæ ¹æ®é…ç½®åˆ›å»ºç›¸åº”çš„bean(å¯¹è±¡)ï¼Œé‚£å®ƒçš„å…·ä½“å®ç°åŸç†æ˜¯æ€æ ·çš„å‘¢ï¼Ÿå°±éœ€è¦æˆ‘ä»¬æ¥åœ¨å­¦ä¹ ä¸€ä¸‹<code>Springçš„æ ¸å¿ƒæ¥å£BeanFactory</code>å’Œ<code>ApplicationContext</code>ï¼Œå¹¶äº†è§£ä¸€ä¸‹Springåˆ›å»ºå¯¹è±¡çš„åŸç†ã€‚</p><p><img src="/2019/11/28/Spring/image-20191228165021684.png" alt="image-20191228165021684"></p><h5 id="6-1ã€æ ¸å¿ƒæ¥å£BeanFactory"><a href="#6-1ã€æ ¸å¿ƒæ¥å£BeanFactory" class="headerlink" title="6.1ã€æ ¸å¿ƒæ¥å£BeanFactory"></a>6.1ã€æ ¸å¿ƒæ¥å£BeanFactory</h5><p>SpringIoCå®¹å™¨ï¼š<strong>BeanFactory(com.springframework.beans.factory.BeanFactory)æ˜¯Springæ¡†æ¶æœ€æ ¸å¿ƒçš„ä¸€ä¸ªæ¥å£</strong>ï¼Œspringä½¿ç”¨BeanFactoryæ¥<strong>å®ä¾‹åŒ–ã€é…ç½®å’Œç®¡ç†Beanå¯¹è±¡</strong>ï¼Œä½†æ˜¯å®ƒåªæ˜¯ä¸€ä¸ªæ¥å£ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªgetBean()æ–¹æ³•ã€‚</p><h6 id="6-1-1ã€ä½¿ç”¨BeanFactory"><a href="#6-1-1ã€ä½¿ç”¨BeanFactory" class="headerlink" title="6.1.1ã€ä½¿ç”¨BeanFactory"></a>6.1.1ã€ä½¿ç”¨BeanFactory</h6><p>æ–¹å¼ä¸€ï¼šé€šè¿‡idç›´æ¥æ‹¿åˆ°ç›¸åº”çš„Beanå¯¹è±¡ï¼ˆå¸¸è§æ–¹æ³•ï¼‰</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-comment">//é€šè¿‡applicationContext.xmlé…ç½®æ–‡ä»¶ä¸­é…ç½®çš„beançš„idæ‹¿åˆ°å¯¹è±¡</span><br>MyBean bean = (MyBean)factory.get<span class="hljs-constructor">Bean(<span class="hljs-string">&quot;myBean&quot;</span>)</span>;<br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(bean);<br></code></pre></td></tr></table></figure><p>æ–¹å¼äºŒï¼šé€šè¿‡idä¸å¯¹è±¡çš„classæ‹¿åˆ°Beanå¯¹è±¡ï¼Œå¥½å¤„ï¼šä¸éœ€è¦å¼ºè½¬</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-comment">//é€šè¿‡idä¸å¯¹è±¡çš„classæ‹¿åˆ°beanå¯¹è±¡</span><br>MyBean bean = factory.get<span class="hljs-constructor">Bean(<span class="hljs-string">&quot;myBean&quot;</span>,MyBean.<span class="hljs-params">class</span>)</span>;<br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(bean);<br></code></pre></td></tr></table></figure><p>æ–¹å¼ä¸‰ï¼šé€šè¿‡classæ‹¿åˆ°Beanå¯¹è±¡  </p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-comment">//é€šè¿‡idä¸å¯¹è±¡çš„classæ‹¿åˆ°beanå¯¹è±¡</span><br>MyBean bean = factory.get<span class="hljs-constructor">Bean(MyBean.<span class="hljs-params">class</span>)</span>;<br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(bean);<br><span class="hljs-comment">//é™åˆ¶ï¼šè¿™ä¸ªclassç±»åœ¨é…ç½®ä¸­åªèƒ½å‡ºç°ä¸€æ¬¡</span><br><span class="hljs-comment">//å¼‚å¸¸ï¼šorg.springframework.beans.factory.NoUniqueBeanDefinitionException</span><br></code></pre></td></tr></table></figure><h6 id="6-1-2ã€é€šè¿‡classæ‹¿åˆ°Beanå¯¹è±¡çš„é™åˆ¶"><a href="#6-1-2ã€é€šè¿‡classæ‹¿åˆ°Beanå¯¹è±¡çš„é™åˆ¶" class="headerlink" title="6.1.2ã€é€šè¿‡classæ‹¿åˆ°Beanå¯¹è±¡çš„é™åˆ¶"></a>6.1.2ã€é€šè¿‡classæ‹¿åˆ°Beanå¯¹è±¡çš„é™åˆ¶</h6><p>å¦‚æœæ˜¯ä»¥ä¸‹æƒ…å†µï¼Œæ–¹å¼ä¸‰ä¼šå‡ºé”™ï¼Œè€Œæ–¹å¼ä¸€ä¸æ–¹å¼äºŒä¸ä¼šå‡ºé”™ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><br><span class="hljs-tag"><span class="hljs-string">http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span><br><span class="hljs-comment">&lt;!-- ä¸åŒçš„beané…ç½®ä¸­ä¸èƒ½å­˜åœ¨classç›¸åŒçš„æƒ…å†µ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;User&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;cn.kongwei_liao.spring.domain.User&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;User1&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;cn.kongwei_liao.spring.domain.User&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure><p>æ€è€ƒä¸€ä¸‹ï¼Œä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿ</p><p>æ–¹å¼ä¸‰çš„é”™è¯¯æç¤ºï¼šSpringæ‰¾åˆ°ä¸¤ä¸ªå¯¹è±¡Userå’ŒUser1ï¼Œä¸¤è€…éƒ½å±äºUserInfo.classçš„å¯¹è±¡ã€‚Springå¹¶<code>ä¸ç¡®å®š</code>åº”è¯¥è·å–å“ªä¸€ä¸ªï¼Œæ‰€ä»¥å‡ºç°äº†å¼‚å¸¸ã€‚</p><ul><li><p>æ–¹å¼ä¸€ï¼šæ ¹æ®idæ‹¿ï¼Œå¯ä»¥<code>ç¡®å®š</code></p></li><li><p>æ–¹å¼äºŒï¼šä¹Ÿæ˜¯æ ¹æ®idæ‹¿ï¼Œå¯ä»¥<code>ç¡®å®š</code>(ä¸éœ€è¦å¼ºè½¬)</p></li><li><p>æ–¹å¼ä¸‰ï¼šæ ¹æ®ç±»å‹ï¼Œç°åœ¨æœ‰ä¸¤ä¸ªç±»å‹ç›¸ç­‰ï¼Œæ— æ³•ç¡®å®š(æŠ¥é”™)</p></li></ul><p>ä»¥åå¤§å®¶ä¼šå‘ç°ï¼ŒåŒ…æ‹¬BeanFactoryè¿™ä¸ªå¯¹è±¡éƒ½æ˜¯Springè‡ªå·±åˆ›å»ºçš„ï¼Œè€Œä¸éœ€è¦æˆ‘ä»¬è‡ªå·±ä½¿ç”¨è¿™ä¸‰ç§æ–¹å¼æ‰‹åŠ¨åˆ›å»ºï¼Œä½†æ˜¯åœ¨Springå†…éƒ¨æ˜¯é€šè¿‡è¿™äº›æ–¹å¼å»æ‹¿åˆ°Beançš„ã€‚</p><h5 id="6-2ã€ApplicationContext"><a href="#6-2ã€ApplicationContext" class="headerlink" title="6.2ã€ApplicationContext"></a>6.2ã€ApplicationContext</h5><p>åº”ç”¨ä¸Šä¸‹æ–‡ï¼šApplicationContext(com.springframework.context.ApplicationContext)</p><p>å»ºç«‹åœ¨BeanFactoryåŸºç¡€ä¹‹ä¸Šï¼Œæä¾›äº†æ›´å¤šé¢å‘åº”ç”¨çš„åŠŸèƒ½ï¼Œå®ƒæä¾›äº†å›½é™…åŒ–æ”¯æŒå’Œæ¡†æ¶äº‹ä»¶ä½“ç³»ï¼Œæ›´æ˜“äºåˆ›å»ºå®é™…åº”ç”¨ã€‚</p><p>å¯¹äºäºŒè€…çš„ç”¨é€”ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œç®€å•çš„åˆ’åˆ†:</p><ul><li><p>BeanFactoryæ˜¯Springæ¡†æ¶çš„åŸºç¡€è®¾æ–½ï¼Œ<code>é¢å‘Springæœ¬èº«</code>ï¼›</p></li><li><p>ApplicationContext<code>é¢å‘ä½¿ç”¨Springæ¡†æ¶çš„å¼€å‘è€…</code>ã€‚</p></li></ul><p>åº”ç”¨ä¸Šä¸‹æ–‡ApplicationContextæ˜¯å»ºç«‹åœ¨BeanFactoryåŸºç¡€ä¸Šçš„ä¸€ç§æ›´é«˜å±‚æ¬¡çš„Spring IoCå®¹å™¨ï¼Œå…¶é™¤äº†å…·æœ‰æ™®é€šBeanFactoryçš„å…¨éƒ¨åŠŸèƒ½ä»¥å¤–ï¼Œè¿˜åŠ å…¥äº†ä»¥ä¸‹åŠŸèƒ½ï¼š</p><ul><li><p>æä¾›äº†I18Nçš„æ”¯æŒï¼›</p></li><li><p>æä¾›äº†èµ„æºè®¿é—®ï¼›</p></li><li><p>æä¾›äº†è½½å…¥æ–‡ä»¶èµ„æºçš„é€šç”¨æ–¹æ³•ï¼›</p></li><li><p>æä¾›äº†å‘é€äº‹ä»¶çš„åŠŸèƒ½ã€‚</p></li></ul><p>å‡ ä¹æ‰€æœ‰çš„åº”ç”¨åœºåˆéƒ½å¯ä»¥ç›´æ¥ä½¿ç”¨ApplicationContextï¼Œè€Œéåº•å±‚çš„BcanFactoryã€‚</p><h6 id="6-2-1ã€ä½¿ç”¨ApplicationContext"><a href="#6-2-1ã€ä½¿ç”¨ApplicationContext" class="headerlink" title="6.2.1ã€ä½¿ç”¨ApplicationContext"></a>6.2.1ã€ä½¿ç”¨ApplicationContext</h6><p>ä½¿ç”¨ä¸€ä¸ªApplicationContextæ¥å®Œæˆæ‹¿åˆ°Beançš„åŠŸèƒ½ï¼š</p><p>è¦ä½¿ç”¨ApplicationContextçš„åŠŸèƒ½ï¼Œå¿…éœ€è¦å¯¼å…¥ç›¸åº”çš„jaråŒ…</p><p><code>spring-context-4.1.2.RELEASE.jar</code> ä¸ <code>spring-expression-4.1.2.RELEASE.jar</code></p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">//æ‹¿åˆ°æ ¸å¿ƒå¯¹è±¡ ApplicationContext<br>//ClassPathXmlApplicationContext ç”¨äºåŠ è½½classpathï¼ˆç±»è·¯å¾„ã€srcï¼‰ä¸‹çš„xml<br>//FileSystemXmlApplicationContext ç”¨äºåŠ è½½æŒ‡å®šç›˜ç¬¦ä¸‹çš„xml<br>ApplicationContext context = new ClassPathXmlApplicationContext(<span class="hljs-string">&quot;applicationContext.xml&quot;</span>);<br><br><span class="hljs-keyword">User</span> <span class="hljs-title">bean</span> = (User) context.getBean(<span class="hljs-string">&quot;User&quot;</span>);<br>System.out.println(bean);<br></code></pre></td></tr></table></figure><h5 id="6-3ã€ApplicationContextä¸BeanFactoryçš„åŒºåˆ«-é¢è¯•é¢˜"><a href="#6-3ã€ApplicationContextä¸BeanFactoryçš„åŒºåˆ«-é¢è¯•é¢˜" class="headerlink" title="6.3ã€ApplicationContextä¸BeanFactoryçš„åŒºåˆ« ( é¢è¯•é¢˜ )"></a>6.3ã€ApplicationContextä¸BeanFactoryçš„åŒºåˆ« ( é¢è¯•é¢˜ )</h5><p>è§£é‡Šï¼šApplicationContextæ˜¯BeanFactoryçš„å­æ¥å£ï¼Œæ‹¥æœ‰æ›´å¤šçš„åŠŸèƒ½ä¸æ–¹æ³•ï¼›</p><p>é‡ç‚¹ï¼šApplicationContextå¯¹beanæ˜¯åœ¨è¯»å–çš„æ—¶å€™å°±åˆ›å»ºBeanå¯¹è±¡ï¼›</p><p>è€ŒBeanFactoryæ˜¯åœ¨ä½¿ç”¨çš„æ—¶å€™æ‰è¿›è¡Œå¯¹è±¡çš„åˆ›å»º ( æ‡’åŠ è½½ )</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-comment">//è¿™å¥ä»£ç å·²ç»åˆ›å»ºBeanï¼ˆApplicationContextå³æ—¶åŠ è½½ï¼‰</span><br>ApplicationContext context = <span class="hljs-keyword">new</span> <span class="hljs-constructor">ClassPathXmlApplicationContext(<span class="hljs-string">&quot;applicationContext.xml&quot;</span>)</span>; <br><br><span class="hljs-comment">//ä¸‹é¢è¿™å¥è¿˜æ²¡æœ‰åˆ›å»ºï¼ˆBeanFactoryæ‡’åŠ è½½ï¼‰ ä½¿ç”¨çš„æ—¶å€™æ‰åŠ è½½</span><br><span class="hljs-comment">//è¯»å–èµ„æºæ–‡ä»¶</span><br>ClassPathResource resource = <span class="hljs-keyword">new</span> <span class="hljs-constructor">ClassPathResource(<span class="hljs-string">&quot;applicationContext.xml&quot;</span>)</span>;<br><span class="hljs-comment">//åˆ›å»ºBeanFactory</span><br>BeanFactory beanFactory = <span class="hljs-keyword">new</span> <span class="hljs-constructor">XmlBeanFactory(<span class="hljs-params">resource</span>)</span>;<br>UserDao userDao1 = (UserDao)beanFactory.get<span class="hljs-constructor">Bean(<span class="hljs-string">&quot;userDao&quot;</span>)</span>;<span class="hljs-comment">//éœ€è¦æ—¶æ‰åŠ è½½</span><br></code></pre></td></tr></table></figure><p><strong>æ‰©å±•</strong>ï¼šæˆ‘ä»¬åœ¨ä½¿ç”¨ApplicationContextçš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡é…ç½®è®©å®ƒä¹Ÿå˜æˆä¸BeanFactoryä¸€æ ·çš„æ‡’åŠ è½½ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- è®©å…¶ä¸­ä¸€ä¸ªBeanå˜æˆæ‡’åŠ è½½ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;myBean&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;cn.kongwei_liao.spring.MyBean&quot;</span> <span class="hljs-attr">lazy-init</span>=<span class="hljs-string">&quot;true&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="7ã€BeanFactoryæ¨¡æ‹Ÿå®ç°"><a href="#7ã€BeanFactoryæ¨¡æ‹Ÿå®ç°" class="headerlink" title="7ã€BeanFactoryæ¨¡æ‹Ÿå®ç°"></a>7ã€BeanFactoryæ¨¡æ‹Ÿå®ç°</h4><p>æ¨¡æ‹Ÿæ­¥éª¤ï¼š</p><ol><li>ä½¿ç”¨ç®€å•å·¥å‚æ¨¡å¼æ¥å¤„ç†beanå®¹å™¨ã€‚</li><li>è§£æxmlæ–‡ä»¶ï¼Œè·å–é…ç½®ä¸­çš„å…ƒç´ ä¿¡æ¯ã€‚</li><li>åˆ©ç”¨åå°„è·å®ä¾‹åŒ–é…ç½®ä¿¡æ¯ä¸­çš„å¯¹è±¡ã€‚</li><li>å¦‚æœæœ‰å¯¹è±¡æ³¨å…¥ï¼Œä½¿ç”¨invoke()æ–¹æ³•ã€‚</li><li>å®ä¾‹åŒ–çš„å¯¹è±¡æ”¾å…¥beanå®¹å™¨ä¸­ï¼Œå¹¶æä¾›getBeanæ–¹æ³•ã€‚</li></ol><p>ç®€åŒ–ç‰ˆçš„BeanFactoryä»£ç ï¼š</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">public <span class="hljs-keyword">class</span> BeanFactory &#123;<br>     <br>    <span class="hljs-comment">//beanå®¹å™¨</span><br><span class="hljs-keyword">private</span> Map&lt;String, Object&gt; contianer = <span class="hljs-keyword">new</span> HashMap&lt;String, Object&gt;<span class="hljs-literal">()</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * &lt;p&gt;Discription:é€šè¿‡beançš„idåœ¨å®¹å™¨ä¸­è·å–beanå¯¹è±¡&lt;/p&gt;</span><br><span class="hljs-comment">     * @param beanName beançš„å”¯ä¸€æ ‡è¯†id</span><br><span class="hljs-comment">     */</span><br>    public Object get<span class="hljs-constructor">Bean(String <span class="hljs-params">beanName</span>)</span> &#123;<br>        Object obj = contianer.get(beanName);<br>        return obj;<br>    &#125;<br>     <br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * &lt;p&gt;Discription:beanå·¥å‚çš„åˆå§‹åŒ–&lt;/p&gt;</span><br><span class="hljs-comment">     * @param xml xmlé…ç½®æ–‡ä»¶è·¯å¾„</span><br><span class="hljs-comment">     */</span><br>    public void init(String xml) &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">// è¯»å–æŒ‡å®šçš„é…ç½®æ–‡ä»¶</span><br>            SAXReader reader = <span class="hljs-keyword">new</span> <span class="hljs-constructor">SAXReader()</span>;<br>            ClassLoader classLoader = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Thread</span>.</span></span>current<span class="hljs-constructor">Thread()</span>.get<span class="hljs-constructor">ContextClassLoader()</span>;<br>            <span class="hljs-comment">// ä»classç›®å½•ä¸‹è·å–æŒ‡å®šçš„xmlæ–‡ä»¶</span><br>            Document doc = reader.read(classLoader.get<span class="hljs-constructor">ResourceAsStream(<span class="hljs-params">xml</span>)</span>);<br>            Element root = doc.get<span class="hljs-constructor">RootElement()</span>;<br>            Iterator iter = root.element<span class="hljs-constructor">Iterator()</span>;<br><br>            <span class="hljs-keyword">while</span> (iter.has<span class="hljs-constructor">Next()</span>) &#123;<br>                Element ele = (Element) iter.next<span class="hljs-literal">()</span>;<br>                <span class="hljs-comment">// è·å–beançš„å±æ€§idå’Œclass</span><br>                String id = ele.attribute<span class="hljs-constructor">Value(<span class="hljs-string">&quot;id&quot;</span>)</span>;<br>                String beanClassName = ele.attribute<span class="hljs-constructor">Value(<span class="hljs-string">&quot;class&quot;</span>)</span>;<br>                <span class="hljs-comment">// åˆ©ç”¨Javaåå°„æœºåˆ¶ï¼Œé€šè¿‡classçš„åç§°è·å–Classå¯¹è±¡</span><br>                Class&lt;?&gt; bean = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Class</span>.</span></span><span class="hljs-keyword">for</span><span class="hljs-constructor">Name(<span class="hljs-params">beanClassName</span>)</span>;<br>                <span class="hljs-comment">// è·å–å¯¹åº”classçš„ä¿¡æ¯</span><br>                java.beans.BeanInfo info = java.beans.<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Introspector</span>.</span></span>get<span class="hljs-constructor">BeanInfo(<span class="hljs-params">bean</span>)</span>;<br>                <span class="hljs-comment">// è·å–å…¶å±æ€§æè¿°</span><br>                java.beans.PropertyDescriptor pds<span class="hljs-literal">[]</span> = info.get<span class="hljs-constructor">PropertyDescriptors()</span>;<br>                <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªå¯¹è±¡</span><br>                Object obj = bean.<span class="hljs-keyword">new</span><span class="hljs-constructor">Instance()</span>;<br>                <span class="hljs-comment">// éå†è¯¥beançš„propertyå±æ€§</span><br>                Iterator&lt;Element&gt; iterator = ele.element<span class="hljs-constructor">Iterator(<span class="hljs-string">&quot;property&quot;</span>)</span>;<br>                <span class="hljs-keyword">while</span>(iterator.has<span class="hljs-constructor">Next()</span>)&#123;<br>                    Element propElem = iterator.next<span class="hljs-literal">()</span>;<br>                    String propertyName = propElem.attribute<span class="hljs-constructor">Value(<span class="hljs-string">&quot;name&quot;</span>)</span>;<br>                    <span class="hljs-comment">// è·å–è¯¥propertyçš„å­å…ƒç´ valueçš„å€¼</span><br>                    String value = propElem.attribute<span class="hljs-constructor">Value(<span class="hljs-string">&quot;value&quot;</span>)</span>;<br>                    <span class="hljs-comment">// åˆ©ç”¨Javaçš„åå°„æœºåˆ¶è°ƒç”¨å¯¹è±¡çš„æŸä¸ªsetæ–¹æ³•ï¼Œå¹¶å°†å€¼è®¾è¿›å»</span><br>                    <span class="hljs-keyword">for</span> (PropertyDescriptor pd : pds) &#123;<br>                        <span class="hljs-keyword">if</span> (pd.get<span class="hljs-constructor">Name()</span>.equals(propertyName)) &#123;<br>                            pd.get<span class="hljs-constructor">WriteMethod()</span>.invoke(obj, value);<br>                        &#125;<br>                    &#125;<br>                &#125;<br>                <span class="hljs-comment">// å°†å¯¹è±¡æ”¾å…¥beanMapä¸­ï¼Œå…¶ä¸­keyä¸ºidå€¼ï¼Œvalueä¸ºå¯¹è±¡</span><br>                contianer.put(id, obj);<br>            &#125;<br>        &#125; catch (Exception e) &#123;<br>            <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(e.<span class="hljs-keyword">to</span><span class="hljs-constructor">String()</span>);<br>        &#125;<br>    &#125; <br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç ç®€å•çš„æ¨¡æ‹Ÿå®ç°äº†BeanFactoryçš„åŠŸèƒ½ï¼ŒSpringæ¡†æ¶é‡Œé¢çš„ä»£ç è¦æ¯”æˆ‘ä»¬è¿™ä¸ªå¤æ‚çš„å¤šï¼Œå› ä¸ºè¦è€ƒè™‘åˆ°å®‰å…¨æ€§ã€ç¨³å®šæ€§ã€å¼‚å¸¸ç­‰ç­‰å› ç´ ï¼Œä½†æ˜¯åŸç†éƒ½ä¸€æ ·ã€‚</p><p><strong>æ¨¡æ‹Ÿæ¡ˆä¾‹æ€»ç»“ï¼š</strong></p><ul><li>Springé€šè¿‡ xmlé…ç½®æ–‡ä»¶ + domè§£æ + åå°„ + å·¥å‚æ–¹æ³• å®ç°å¯¹è±¡çš„åˆ›å»ºã€‚</li><li>BeanFactory çš„æœ¬è´¨å°±æ˜¯ä¸€ä¸ªBeanå·¥å‚ï¼Œå†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªå¯¹è±¡å®¹å™¨ã€‚</li><li>Applicationcontext ç»§æ‰¿äº†BeanFactory æ¥å£å¯¹å¤–å¼€æ”¾ï¼ˆæ¨èä½¿ç”¨ï¼‰ã€‚</li></ul><h4 id="8ã€é…ç½®æ–‡ä»¶è¯¦è§£"><a href="#8ã€é…ç½®æ–‡ä»¶è¯¦è§£" class="headerlink" title="8ã€é…ç½®æ–‡ä»¶è¯¦è§£"></a>8ã€é…ç½®æ–‡ä»¶è¯¦è§£</h4><h5 id="8-1ã€åŸºæœ¬é…ç½®"><a href="#8-1ã€åŸºæœ¬é…ç½®" class="headerlink" title="8.1ã€åŸºæœ¬é…ç½®"></a>8.1ã€åŸºæœ¬é…ç½®</h5><p>æˆ‘ä»¬å·²ç»æ¼”ç¤ºäº†Springæ¡†æ¶ç®¡ç†å¯¹è±¡çš„åŸºæœ¬é…ç½®ï¼Œå¹¶äº†è§£åˆ°<code>Springçš„åŸç†æ˜¯ä¸€ä¸ªè§£æxmlé…ç½®æ ‡ç­¾çš„å®¹å™¨å·¥å‚</code>ï¼Œç°åœ¨æˆ‘ä»¬æ¥è¯¦ç»†äº†è§£ä¸€ä¸‹å¸¸ç”¨çš„æ ‡ç­¾ã€‚</p><p>ä»–ä»¬åŒ…æ‹¬beanæ ‡ç­¾ã€ä½œç”¨åŸŸæ ‡ç­¾å’Œå£°æ˜å‘¨æœŸæ ‡ç­¾ç­‰ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- æœ€åŸºæœ¬çš„é…ç½® id/name class --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;user1&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;cn.kongwei_liao.domain.User&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span> <br></code></pre></td></tr></table></figure><p>beanæ ‡ç­¾ç”¨äºæè¿°éœ€è¦è¢«Springçš„DIå®¹å™¨ç®¡ç†çš„å¯¹è±¡ï¼š</p><ul><li><p>idå±æ€§ï¼šæ ‡è¯†é…ç½®çš„beanï¼Œå”¯ä¸€ä¸”ä¸èƒ½æœ‰ç‰¹æ®Šç¬¦å·ã€Spring3.2å‰ã€‘ï¼›</p></li><li><p>nameå±æ€§ï¼šç”±äºå†å²é—ç•™å’ŒidåŠŸèƒ½ç›¸åŒï¼Œå»ºè®®ä½¿ç”¨idï¼Œå¯ä»¥ä½¿ç”¨ç‰¹æ®Šç¬¦å·ï¼ŒSpring3.2åä¸åŒºåˆ†idï¼Œnameï¼›</p></li><li><p>classå±æ€§ï¼šé…ç½®beançš„å®Œå…¨é™å®šåï¼Œè™½æ˜¯å…¨é™å®šåä½†æ˜¯æ²¡æœ‰åç¼€ï¼›</p></li><li><p>scopeå±æ€§ï¼š<br>é€šè¿‡scopeå±æ€§ï¼ŒæŒ‡å®šBeançš„ä½œç”¨èŒƒå›´ï¼Œå–å€¼é€šå¸¸æœ‰ä¸€ä¸‹å‡ ç§:</p><ul><li><p><code>singleton</code>ï¼šé»˜è®¤å€¼ï¼Œå•ä¾‹</p><p>singleton å¯¹è±¡åœ¨å®¹å™¨èµ·åŠ¨çš„æ—¶å€™åˆ›å»ºï¼Œå¹¶ä¸”åªåˆ›å»ºä¸€æ¬¡ï¼Œå®¹å™¨ä¸­åªæœ‰ä¸€ä¸ªè¯¥å¯¹è±¡ï¼›</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">&lt;bean <span class="hljs-attribute">id</span>=<span class="hljs-string">&quot;user&quot;</span> <span class="hljs-attribute">class</span>=<span class="hljs-string">&quot;cn.itsource.spring.domain.User&quot;</span> <span class="hljs-attribute">scope</span>=<span class="hljs-string">&quot;singleton&quot;</span>&gt;&lt;/bean&gt; <br></code></pre></td></tr></table></figure></li><li><p><code>prototype</code>ï¼šå¤šå®ä¾‹</p><p>prototype å¯¹è±¡åœ¨æ¯æ¬¡ä»å®¹å™¨ä¸­è°ƒç”¨æ—¶æ‰åˆ›å»ºï¼Œæ¯æ¬¡éƒ½æ˜¯è¿”å›ä¸€ä¸ªæ–°çš„å®ä¾‹ï¼ˆç›¸å½“äºnew XxxBean()ï¼‰</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">&lt;bean <span class="hljs-attribute">id</span>=<span class="hljs-string">&quot;user&quot;</span> <span class="hljs-attribute">class</span>=<span class="hljs-string">&quot;cn.kongwei_liao.spring.domain.User&quot;</span> <span class="hljs-attribute">scope</span>=<span class="hljs-string">&quot;prototype&quot;</span>&gt;&lt;/bean&gt; <br></code></pre></td></tr></table></figure><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-built_in">public</span> <span class="hljs-type">void</span> fun4() throws <span class="hljs-keyword">Exception</span> &#123;<br>ApplicationContext ac = <span class="hljs-built_in">new</span> ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);<br>  <span class="hljs-keyword">User</span> user1 = (<span class="hljs-keyword">User</span>) ac.getBean(&quot;user&quot;);<br>  <span class="hljs-keyword">User</span> user2 = (<span class="hljs-keyword">User</span>) ac.getBean(&quot;user&quot;);<br>  <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(user1==user2);<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><code>request</code>ï¼šWebåº”ç”¨ä¸Šä¸‹æ–‡ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œå­˜æ”¾åˆ°requeståŸŸä¸­</p></li><li><p><code>session</code>ï¼šWebåº”ç”¨ä¸Šä¸‹æ–‡ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œå­˜æ”¾åˆ°sessionåŸŸä¸­</p></li><li><p><code>globalSession</code>ï¼šWebåº”ç”¨ä¸Šä¸‹æ–‡ä¸­ï¼Œä¸€èˆ¬ç”¨äºPortletåº”ç”¨ç¯å¢ƒ</p></li></ul></li></ul><h5 id="8-2ã€Beançš„ç§ç±»"><a href="#8-2ã€Beançš„ç§ç±»" class="headerlink" title="8.2ã€Beançš„ç§ç±»"></a>8.2ã€Beançš„ç§ç±»</h5><p>l æ™®é€šbeanï¼šä¹‹å‰æ“ä½œçš„éƒ½æ˜¯æ™®é€šbeanã€‚&lt;bean id=â€â€ class=â€Aâ€&gt; ï¼Œspringç›´æ¥åˆ›å»ºAå®ä¾‹ï¼Œå¹¶è¿”å›</p><p>l FactoryBeanï¼šæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„beanï¼Œå…·æœ‰å·¥å‚ç”Ÿæˆå¯¹è±¡èƒ½åŠ›ï¼Œåªèƒ½ç”Ÿæˆç‰¹å®šçš„å¯¹è±¡ã€‚</p><p>â€‹    beanå¿…é¡»ä½¿ç”¨ FactoryBeanæ¥å£ï¼Œæ­¤æ¥å£æä¾›æ–¹æ³• getObject() ç”¨äºè·å¾—ç‰¹å®šbeanã€‚</p><p>â€‹    &lt;bean id=â€â€ class=â€FBâ€&gt; å…ˆåˆ›å»ºFBå®ä¾‹ï¼Œä½¿ç”¨è°ƒç”¨getObject()æ–¹æ³•ï¼Œå¹¶è¿”å›æ–¹æ³•çš„è¿”å›å€¼</p><p>â€‹        FB fb = new FB();</p><p>â€‹        return fb.getObject();</p><p>l BeanFactory å’Œ FactoryBean å¯¹æ¯”ï¼Ÿ</p><p>â€‹    BeanFactoryï¼šå·¥å‚ï¼Œç”¨äºç”Ÿæˆä»»æ„beanã€‚</p><p>â€‹    FactoryBeanï¼šç‰¹æ®Šbeanï¼Œç”¨äºç”Ÿæˆå¦ä¸€ä¸ªç‰¹å®šçš„beanã€‚ä¾‹å¦‚ï¼šProxyFactoryBean ï¼Œæ­¤å·¥å‚beanç”¨äºç”Ÿäº§ä»£ç†ã€‚&lt;bean id=â€â€ class=â€â€¦.ProxyFactoryBeanâ€&gt; è·å¾—ä»£ç†å¯¹è±¡å®ä¾‹ã€‚AOPä½¿ç”¨</p><h5 id="8-2ã€ç”Ÿå‘½å‘¨æœŸé…ç½®"><a href="#8-2ã€ç”Ÿå‘½å‘¨æœŸé…ç½®" class="headerlink" title="8.2ã€ç”Ÿå‘½å‘¨æœŸé…ç½®"></a>8.2ã€ç”Ÿå‘½å‘¨æœŸé…ç½®</h5><p>ç”Ÿå‘½å‘¨æœŸï¼šæ„é€  -&gt; åˆå§‹åŒ–-&gt; è¿è¡Œ-&gt; é”€æ¯</p><p><strong>æ³¨ï¼šé…ç½®å¤šä¾‹çš„æƒ…å†µä¸‹ï¼Œä¸ä¼šæ‰§è¡Œé”€æ¯</strong></p><p><strong>1ã€ä¿®æ”¹Userç±»ï¼šæ·»åŠ init å’Œ destroy æ–¹æ³•</strong></p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-built_in">public</span> <span class="hljs-keyword">class</span> <span class="hljs-keyword">User</span> &#123;<br><span class="hljs-built_in">public</span> <span class="hljs-type">void</span> init()&#123;<br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(&quot;åˆå§‹åŒ–æ–¹æ³•&quot;);<br>&#125;<br><span class="hljs-built_in">public</span> <span class="hljs-type">void</span> destroy()&#123;<br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(&quot;é”€æ¯&quot;);<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>2ã€é…ç½®ä¿¡æ¯</strong></p><p>singleton å•ä¾‹æ¨¡å¼ï¼ˆé»˜è®¤æ˜¯å•ä¾‹æ¨¡å¼ï¼‰ï¼š</p><figure class="highlight ocaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ocaml">&lt;bean id=<span class="hljs-string">&quot;user&quot;</span> <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;cn.kongwei_liao.spring.domain.User&quot;</span> init-<span class="hljs-keyword">method</span>=<span class="hljs-string">&quot;init&quot;</span> destroy-<span class="hljs-keyword">method</span>=<span class="hljs-string">&quot;destroy&quot;</span> &gt;<br>&lt;/bean&gt;<br></code></pre></td></tr></table></figure><p>prototype å¤šå®ä¾‹ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">&lt;bean <span class="hljs-attribute">id</span>=<span class="hljs-string">&quot;User&quot;</span> <span class="hljs-attribute">class</span>=<span class="hljs-string">&quot;cn.kongwei_liao.spring.Domain.User&quot;</span> <span class="hljs-attribute">init-method</span>=<span class="hljs-string">&quot;init&quot;</span> <span class="hljs-attribute">destroy-method</span>=<span class="hljs-string">&quot;destroy&quot;</span> <span class="hljs-attribute">scope</span>=<span class="hljs-string">&quot;prototype&quot;</span>&gt;&lt;/bean&gt;<br></code></pre></td></tr></table></figure><p><strong>3ã€æµ‹è¯•æ–¹æ³•</strong></p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">@Test<br>public void test<span class="hljs-constructor">GetBean()</span> throws Exception &#123;<br>ApplicationContext context = <span class="hljs-keyword">new</span> <span class="hljs-constructor">ClassPathXmlApplicationContext(<span class="hljs-string">&quot;applicationContext.xml&quot;</span>)</span>;<br>User bean = (User) context.get<span class="hljs-constructor">Bean(<span class="hljs-string">&quot;User&quot;</span>)</span>;<br>bean.set<span class="hljs-constructor">Name(<span class="hljs-string">&quot;Kongwei_Liao&quot;</span>)</span>;<br>    bean.set<span class="hljs-constructor">Age(22)</span>;<br>    <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(bean.get<span class="hljs-constructor">Name()</span>);<br>    <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(bean);<br>    <br><span class="hljs-comment">//ApplicationContextæ¥å£æ²¡æœ‰å®šä¹‰registerShutdownHookæ–¹æ³•</span><br>context.register<span class="hljs-constructor">ShutdownHook()</span>;<span class="hljs-comment">//å…³é—­springå®¹å™¨</span><br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(<span class="hljs-string">&quot;?&quot;</span>+bean.get<span class="hljs-constructor">Name()</span>);<br>User bean1 = (User)context.get<span class="hljs-constructor">Bean(<span class="hljs-string">&quot;User&quot;</span>)</span>;<br>    bean1.set<span class="hljs-constructor">Name(<span class="hljs-string">&quot;Jie_Liu&quot;</span>)</span>;<br>    <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(bean1.get<span class="hljs-constructor">Name()</span>);<br>    <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(bean.get<span class="hljs-constructor">Name()</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>4ã€ç»“æœ</strong></p><p>æ³¨ï¼šæ‰“å°çš„åŒ…è·¯å¾„åï¼Œå› ä¸ºæ–‡æ¡£çš„å†…å®¹åæœŸæ”¹åŠ¨ant_nestä¸ºkongwei_liaoã€‚</p><p>singleton å•ä¾‹æ¨¡å¼ç»“æœï¼š</p><p><img src="/2019/11/28/Spring/Snipaste_2019-11-27_16-37-51.png"></p><p>prototype å¤šå®ä¾‹ï¼š</p><p><img src="/2019/11/28/Spring/Snipaste_2019-11-27_17-16-15.png"></p><p>å°ç»“:</p><ul><li>åŠ è½½å®¹å™¨ -&gt; åˆ›å»ºå¯¹è±¡ -&gt; åˆå§‹åŒ–-&gt; è¿è¡Œ-&gt; é”€æ¯ï¼›</li><li>åˆå§‹åŒ–åˆåˆ†BeanFactoryå’ŒApplicationContextä¸¤ç±»ï¼›</li><li>init-method=â€initâ€ åˆå§‹åŒ–å¯¹è±¡åè°ƒç”¨çš„æ–¹æ³•ï¼›</li><li>destroy-method=â€destroyâ€ å…³é—­å®¹å™¨å‰è°ƒç”¨çš„æ–¹æ³•ã€‚</li></ul><h5 id="8-4ã€BeanPostProcessor-åå¤„ç†Bean"><a href="#8-4ã€BeanPostProcessor-åå¤„ç†Bean" class="headerlink" title="8.4ã€BeanPostProcessor åå¤„ç†Bean"></a>8.4ã€BeanPostProcessor åå¤„ç†Bean</h5><p>spring æä¾›ä¸€ç§æœºåˆ¶ï¼Œåªè¦å®ç°æ­¤æ¥å£BeanPostProcessorï¼Œå¹¶å°†å®ç°ç±»æä¾›ç»™springå®¹å™¨ï¼Œspringå®¹å™¨å°†è‡ªåŠ¨æ‰§è¡Œï¼Œåœ¨åˆå§‹åŒ–æ–¹æ³•å‰æ‰§è¡Œbefore()ï¼Œåœ¨åˆå§‹åŒ–æ–¹æ³•åæ‰§è¡Œafter() ã€‚</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-built_in">public</span> <span class="hljs-keyword">class</span> MyBeanPostProcessor implements BeanPostProcessor &#123;<br><br>@Override<br><span class="hljs-built_in">public</span> <span class="hljs-keyword">Object</span> postProcessBeforeInitialization(<span class="hljs-keyword">Object</span> bean, String beanName) throws BeansException &#123;<br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(&quot;å‰æ–¹æ³• ï¼š &quot; + beanName);<br><span class="hljs-keyword">return</span> bean;<br>&#125;<br><br>@Override<br><span class="hljs-built_in">public</span> <span class="hljs-keyword">Object</span> postProcessAfterInitialization(final <span class="hljs-keyword">Object</span> bean, String beanName) throws BeansException &#123;<br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(&quot;åæ–¹æ³• ï¼š &quot; + beanName);<br>// bean ç›®æ ‡å¯¹è±¡<br>// ç”Ÿæˆ jdk ä»£ç†<br><span class="hljs-keyword">return</span> Proxy.newProxyInstance(<br>MyBeanPostProcessor.<span class="hljs-keyword">class</span>.getClassLoader(), <br>bean.getClass().getInterfaces(), <br><span class="hljs-built_in">new</span> InvocationHandler()&#123;<br>@Override<br><span class="hljs-built_in">public</span> <span class="hljs-keyword">Object</span> invoke(<span class="hljs-keyword">Object</span> proxy, <span class="hljs-keyword">Method</span> <span class="hljs-keyword">method</span>, <span class="hljs-keyword">Object</span>[] args) throws Throwable &#123;<br><br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(&quot;------å¼€å¯äº‹åŠ¡&quot;);<br><br>//æ‰§è¡Œç›®æ ‡æ–¹æ³•<br><span class="hljs-keyword">Object</span> obj = <span class="hljs-keyword">method</span>.invoke(bean, args);<br><br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(&quot;------æäº¤äº‹åŠ¡&quot;);<br><span class="hljs-keyword">return</span> obj;<br>&#125;&#125;);<br>&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- å°†åå¤„ç†çš„å®ç°ç±»æ³¨å†Œç»™spring --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;cn.kongwei_liao.e_lifecycle.MyBeanPostProcessor&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">é—®é¢˜1ï¼šåå¤„ç†beanä½œç”¨æŸä¸€ä¸ªç›®æ ‡ç±»ï¼Œè¿˜æ˜¯æ‰€æœ‰ç›®æ ‡ç±»ï¼Ÿæ‰€æœ‰</span><br><span class="hljs-comment">é—®é¢˜2ï¼šå¦‚ä½•åªä½œç”¨ä¸€ä¸ªï¼Ÿé€šè¿‡â€œå‚æ•°2â€beanNameè¿›è¡Œæ§åˆ¶</span><br><span class="hljs-comment">--&gt;</span><br></code></pre></td></tr></table></figure><h5 id="8-3ã€é…ç½®æ–‡ä»¶æ€»ç»“"><a href="#8-3ã€é…ç½®æ–‡ä»¶æ€»ç»“" class="headerlink" title="8.3ã€é…ç½®æ–‡ä»¶æ€»ç»“"></a>8.3ã€é…ç½®æ–‡ä»¶æ€»ç»“</h5><p>beanæ ‡ç­¾ç”¨äºæè¿°éœ€è¦è¢«springå®¹å™¨ç®¡ç†çš„å¯¹è±¡ï¼›</p><p><strong>ä¸€èˆ¬æˆ‘ä»¬è‡ªå·±ä¸ä¼šæ¥é…ç½®scopeå’Œ ç”Ÿå‘½å‘¨æœŸï¼Œè€Œè¿™ä¸ªåŸºæœ¬ä¸Šç”±Springè‡ªèº«æ¥ä½¿ç”¨ï¼›</strong></p><p>ä¾‹å¦‚åœ¨Springæ“ä½œè¿æ¥æ± çš„æ—¶å€™ï¼Œå®ƒä¼šåœ¨DateSourceé”€æ¯çš„æ—¶å€™æ‰§è¡Œã€‚</p><h4 id="9ã€Springå•å…ƒæµ‹è¯•"><a href="#9ã€Springå•å…ƒæµ‹è¯•" class="headerlink" title="9ã€Springå•å…ƒæµ‹è¯•"></a>9ã€Springå•å…ƒæµ‹è¯•</h4><p>ä¹‹å‰çš„æµ‹è¯•ï¼Œæˆ‘ä»¬æ˜¯é€šè¿‡Junitæˆ–è€…mainæ–¹æ³•ï¼Œå…¶å®åœ¨ä½¿ç”¨Springæ¡†æ¶çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„æ˜¯Springæä¾›çš„æµ‹è¯•æ¨¡å—ã€‚å¯ä»¥ç®€åŒ–å¾ˆå¤šæ“ä½œã€‚</p><h5 id="9-1ã€Spring-Testæµ‹è¯•åŸç†"><a href="#9-1ã€Spring-Testæµ‹è¯•åŸç†" class="headerlink" title="9.1ã€Spring Testæµ‹è¯•åŸç†"></a>9.1ã€Spring Testæµ‹è¯•åŸç†</h5><p>Springæµ‹è¯•ä¸»è¦æ˜¯Spring-junitï¼Œè¿™ä¸ªæ˜¯Springè‡ªå·±ä¸“é—¨å†™çš„ä¸€å¥—æµ‹è¯•æ¡†æ¶åŠŸèƒ½ã€‚</p><p><img src="/2019/11/28/Spring/Snipaste_2019-11-27_15-25-56.png"></p><h5 id="9-2ã€ä½¿ç”¨æ­¥éª¤"><a href="#9-2ã€ä½¿ç”¨æ­¥éª¤" class="headerlink" title="9.2ã€ä½¿ç”¨æ­¥éª¤"></a>9.2ã€ä½¿ç”¨æ­¥éª¤</h5><p>1ã€å¯¼å…¥Spring-Testä¾èµ–åŒ… </p><p>2ã€æ·»åŠ æ³¨è§£</p><p>@RunWith()ã€@ContextConfiguration å’Œ @Autowired</p><p>åœ¨æµ‹è¯•ç±»ä¸Šæ‰“ @RunWith() æ³¨è§£<strong>ï¼Œ</strong>åˆ›å»ºå®¹å™¨;</p><p>åœ¨æ‰“ä¸Š@ContextConfiguration()æ³¨è§£ï¼ŒæŒ‡å®šåˆ›å»ºå®¹å™¨çš„æ—¶å€™ä½¿ç”¨å“ªä¸ªé…ç½®æ–‡ä»¶ï¼›</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@RunWith</span>(SpringJUnit4ClassRunner.class)<br><span class="hljs-variable">@ContextConfiguration</span>(<span class="hljs-string">&quot;classpath:applicationContext.xml&quot;</span>)<br></code></pre></td></tr></table></figure><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-comment">//åŠ è½½Springçš„é…ç½®æ–‡ä»¶ï¼Œæœ‰ä»¥ä¸‹å†™æ³•ï¼š</span><br><span class="hljs-variable">@ContextConfiguration</span>(<span class="hljs-string">&quot;bean.xml&quot;</span>)  ä¼šåŠ è½½å½“å‰åŒ…ä¸‹çš„bean.xmlæ–‡ä»¶<br><span class="hljs-variable">@ContextConfiguration</span>(<span class="hljs-string">&quot;classpath:bean.xml&quot;</span>)  åŠ è½½å½“å‰srcä¸‹çš„bean.xmlæ–‡ä»¶ ã€æ¨èä½¿ç”¨ã€‘<br><span class="hljs-variable">@ContextConfiguration</span>(<span class="hljs-string">&quot;/bean.xml&quot;</span>)  åŠ è½½å½“å‰srcä¸‹çš„bean.xmlæ–‡ä»¶<br><span class="hljs-variable">@ContextConfiguration</span>  åŠ è½½å½“å‰æµ‹è¯•ç±»ä¸‹çš„é…ç½®æ–‡ä»¶ï¼Œæ–‡ä»¶å‘½åå¿…é¡»æ˜¯ã€ç±»å-Context.xmlã€‘<br></code></pre></td></tr></table></figure><p>é€šè¿‡æˆå‘˜å˜é‡çš„æ–¹å¼ï¼ŒæŒ‡å®šè¦æµ‹è¯•çš„å¯¹è±¡ã€‚</p><p><strong>æ‰“ä¸Š@Autowired æ³¨è§£ï¼Œå°†ä¼šåœ¨Springå®¹å™¨é‡ŒæŸ¥æ‰¾è¯¥å¯¹è±¡ï¼Œå¹¶å°†Springé‡Œçš„å¯¹è±¡æ³¨å…¥åˆ°æŒ‡å®šçš„ä½ç½®ã€‚</strong></p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">@Autowired<br>private <span class="hljs-keyword">User</span> <span class="hljs-title">user</span>;<br></code></pre></td></tr></table></figure><p>3ã€è¿è¡Œæµ‹è¯•</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@RunWith</span>(SpringJUnit4ClassRunner.class)<br><span class="hljs-variable">@ContextConfiguration</span>(<span class="hljs-string">&quot;classpath:spring-context.xml&quot;</span>)<br>public class Spring4Test &#123;<br><br><span class="hljs-variable">@Autowired</span><br>private User user;<br><br><span class="hljs-variable">@Test</span><br>public void springTest() throws Exception &#123;<br><span class="hljs-selector-tag">user</span><span class="hljs-selector-class">.setName</span>(<span class="hljs-string">&quot;Spring æµ‹è¯•&quot;</span>);<br><span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(user.getName());<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å¦‚æœé…ç½®æ–‡ä»¶ä¸­ï¼Œé…ç½®äº†ä¸¤ä¸ªåŒä¸€classç±»å‹çš„beanï¼Œç”¨@Qualifier(â€œUserâ€)é™å®š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">&lt;bean <span class="hljs-attribute">id</span>=<span class="hljs-string">&quot;User&quot;</span> <span class="hljs-attribute">class</span>=<span class="hljs-string">&quot;cn.ant_nest.spring.Domain.User&quot;</span> <span class="hljs-attribute">init-method</span>=<span class="hljs-string">&quot;init&quot;</span> <span class="hljs-attribute">destroy-method</span>=<span class="hljs-string">&quot;destroy&quot;</span>&gt;&lt;/bean&gt;<br>&lt;bean <span class="hljs-attribute">id</span>=<span class="hljs-string">&quot;User1&quot;</span> <span class="hljs-attribute">class</span>=<span class="hljs-string">&quot;cn.ant_nest.spring.Domain.User&quot;</span>&gt;&lt;/bean&gt;<br></code></pre></td></tr></table></figure><p><img src="/2019/11/28/Spring/Snipaste_2019-11-27_16-56-30.png"></p><p>å°ç»“ï¼š</p><ol><li>é€šè¿‡ @RunWithå’Œ @ContextConfigurationï¼Œ æˆ‘ä»¬å¯ä»¥æŒ‡å®šSpringç®¡ç†æµ‹è¯•ç±»ï¼Œè‡ªåŠ¨åŠ è½½é…ç½®æ–‡ä»¶ï¼Œæ‰§è¡Œç›¸å…³çš„æµ‹è¯•ã€‚</li><li>æ¡†æ¶æ•´åˆçš„æ—¶å€™å¦‚æœSpringçš„é…ç½®æ–‡ä»¶ä¸èƒ½è¯»å–ï¼Œé‚£ä¹ˆæ•´ä¸ªé¡¹ç›®æ˜¯è·‘ä¸èµ·æ¥çš„ï¼Œè€ŒSpringçš„æµ‹è¯•å¯ä»¥è®©æˆ‘ä»¬åœ¨ä¸å¯åŠ¨æœåŠ¡å™¨çš„æƒ…å†µä¸‹ï¼Œè‡ªåŠ¨è¯»å–ç›¸åº”çš„é…ç½®æ–‡ä»¶ã€‚</li></ol><h4 id="10ã€ä¾èµ–æ³¨å…¥"><a href="#10ã€ä¾èµ–æ³¨å…¥" class="headerlink" title="10ã€ä¾èµ–æ³¨å…¥"></a>10ã€ä¾èµ–æ³¨å…¥</h4><p>ç°åœ¨ï¼Œæˆ‘ä»¬æ¨¡æ‹Ÿä½¿ç”¨Springå®ŒæˆServiceè°ƒç”¨daoçš„è¿‡ç¨‹ã€‚</p><p>è¿™é‡Œæ¶‰åŠåˆ°äº†ä¸€ä¸ªæ€ç»´çš„è½¬å˜ï¼ˆå³å°†åˆ›å»ºäº¤ç»™Springï¼‰</p><p>Springä¸­çš„å¯¹è±¡éƒ½æ˜¯ç”±Springæ¥ç»Ÿä¸€ç®¡ç†ï¼Œä½†æ˜¯åœ¨å¯¹è±¡ä¸­è¿˜å­˜åœ¨å±æ€§ï¼Œè¿™äº›å±æ€§å®é™…ä¸Šå¼•ç”¨çš„ä¹Ÿæ˜¯åˆ«çš„å¯¹è±¡ï¼Œé‚£ä¹ˆè¿™äº›å¯¹è±¡ä¹Ÿæ˜¯ç”±Springæ¥ç®¡ç†çš„ã€‚</p><p>æˆ‘ä»¬é€šè¿‡Springç»™å¯¹è±¡çš„å±æ€§èµ‹å€¼ï¼Œè¿™ç§°ä¸ºå±æ€§ä¾èµ–æ³¨å…¥ã€‚</p><h5 id="10-1ã€ç®€å•å®ç°"><a href="#10-1ã€ç®€å•å®ç°" class="headerlink" title="10.1ã€ç®€å•å®ç°"></a>10.1ã€ç®€å•å®ç°</h5><p>æ­¥éª¤åˆ†æï¼š</p><p>Spring Junit Test â€” UserServiceImpl(IUserService) â€”- UserDaoImpl(IUserDao)</p><ul><li>æŠŠUserServiceImpï¼ŒUserDaoImpläº¤ç»™Springç®¡ç†</li><li>ç»™UserServiceImplæ³¨å…¥dao</li><li>æä¾›setteræ–¹æ³•</li><li>åšé…ç½®<ul><li>name -&gt; ç±»ä¸­çš„å±æ€§åç§°(setName)</li><li>ref -&gt; å¼•ç”¨çš„å“ªä¸€ä¸ªBeançš„id</li></ul></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//daoå±‚</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserDaoImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">IUserDao</span> </span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title">listUser</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-comment">//ç”±daoå±‚æ•°æ®åº“æŸ¥è¯¢</span><br>        System.out.println(<span class="hljs-string">&quot;æ¨¡æ‹Ÿæ•°æ®åº“æŸ¥è¯¢æ•°æ®&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">add</span><span class="hljs-params">(User user)</span> </span>&#123;<br>        System.out.println(user.getName());<br>        System.out.println(user.getAge());<br>        System.out.println(<span class="hljs-string">&quot;æ¨¡æ‹Ÿæ•°æ®åº“æ’å…¥æ•°æ®&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//serviceå±‚</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">IUserService</span></span>&#123;<br><br><span class="hljs-keyword">private</span> IUserDao userDao;<br><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setUserDao</span><span class="hljs-params">(IUserDao userDao)</span> </span>&#123;<br><span class="hljs-keyword">this</span>.userDao = userDao;<br>&#125; <br><br><span class="hljs-meta">@Override</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">add</span><span class="hljs-params">(User user)</span> </span>&#123;<br><span class="hljs-comment">// è°ƒç”¨daoå±‚æ–¹æ³• æ·»åŠ ç”¨æˆ·</span><br>userDao.add(user);<br>&#125;<br>&#125;<br><br><span class="hljs-comment">//testï¼š</span><br><span class="hljs-meta">@RunWith(SpringJUnit4ClassRunner.class)</span><br><span class="hljs-meta">@ContextConfiguration(&quot;classpath:applicationContext.xml&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Spring4Test</span> </span>&#123;<br><br><span class="hljs-meta">@Autowired</span><br><span class="hljs-keyword">private</span> IUserService userService;<br><br><span class="hljs-meta">@Test</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testName</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;<br>userService.add(<span class="hljs-keyword">new</span> User(<span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>,<span class="hljs-number">1</span>));<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs django"><span class="xml"><span class="hljs-comment">&lt;!--applicationContext.xml--&gt;</span></span><br><span class="xml"><span class="hljs-comment">&lt;!-- æŒä¹…å±‚  --&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userDao&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;cn.kongwei_liao.spring.dao.impl.UserDaoImpl&quot;</span> <span class="hljs-attr">scope</span>=<span class="hljs-string">&quot;prototype&quot;</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span></span><br><br><span class="xml"><span class="hljs-comment">&lt;!-- ä¸šåŠ¡å±‚ --&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userService&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;cn.kongwei_liao.spring.service.impl.UserServiceImpl&quot;</span> <span class="hljs-attr">scope</span>=<span class="hljs-string">&quot;prototype&quot;</span></span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;userDao&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;userDao&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span> åé¢çš„å†…å®¹</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p>beanå±æ€§çš„ä¾èµ–æ³¨å…¥â€”-æ‰‹åŠ¨è£…é…å’Œè‡ªåŠ¨è£…é…</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs lua">&lt;!<span class="hljs-comment">-- æ„é€ æ–¹æ³•æ³¨å…¥ </span><br>* &lt;constructor-<span class="hljs-built_in">arg</span>&gt; ç”¨äºé…ç½®æ„é€ æ–¹æ³•ä¸€ä¸ªå‚æ•°argument<br>name ï¼šå‚æ•°çš„åç§°<br>valueï¼šè®¾ç½®æ™®é€šæ•°æ®<br>refï¼šå¼•ç”¨æ•°æ®ï¼Œä¸€èˆ¬æ˜¯å¦ä¸€ä¸ªbean idå€¼<br><br>index ï¼šå‚æ•°çš„ç´¢å¼•å·ï¼Œä»<span class="hljs-number">0</span>å¼€å§‹ ã€‚å¦‚æœåªæœ‰ç´¢å¼•ï¼ŒåŒ¹é…åˆ°äº†å¤šä¸ªæ„é€ æ–¹æ³•æ—¶ï¼Œé»˜è®¤ä½¿ç”¨ç¬¬ä¸€ä¸ªã€‚<br><span class="hljs-built_in">type</span> ï¼šç¡®å®šå‚æ•°ç±»å‹<br>ä¾‹å¦‚ï¼šä½¿ç”¨åç§°name<br>&lt;constructor-<span class="hljs-built_in">arg</span> name=<span class="hljs-string">&quot;username&quot;</span> value=<span class="hljs-string">&quot;jack&quot;</span>&gt;&lt;/constructor-<span class="hljs-built_in">arg</span>&gt;<br>&lt;constructor-<span class="hljs-built_in">arg</span> name=<span class="hljs-string">&quot;age&quot;</span> value=<span class="hljs-string">&quot;18&quot;</span>&gt;&lt;/constructor-<span class="hljs-built_in">arg</span>&gt;<br>ä¾‹å¦‚<span class="hljs-number">2</span>ï¼šã€ç±»å‹<span class="hljs-built_in">type</span> å’Œ  ç´¢å¼• indexã€‘<br>&lt;constructor-<span class="hljs-built_in">arg</span> index=<span class="hljs-string">&quot;0&quot;</span> <span class="hljs-built_in">type</span>=<span class="hljs-string">&quot;java.lang.String&quot;</span> value=<span class="hljs-string">&quot;1&quot;</span>&gt;&lt;/constructor-<span class="hljs-built_in">arg</span>&gt;<br>&lt;constructor-<span class="hljs-built_in">arg</span> index=<span class="hljs-string">&quot;1&quot;</span> <span class="hljs-built_in">type</span>=<span class="hljs-string">&quot;java.lang.Integer&quot;</span> value=<span class="hljs-string">&quot;2&quot;</span>&gt;&lt;/constructor-<span class="hljs-built_in">arg</span>&gt;<br><span class="hljs-comment">--&gt;</span><br>&lt;bean id=<span class="hljs-string">&quot;userId&quot;</span> class=<span class="hljs-string">&quot;com.kongwei_liao.domain.User&quot;</span> &gt;<br>&lt;constructor-<span class="hljs-built_in">arg</span> index=<span class="hljs-string">&quot;0&quot;</span> <span class="hljs-built_in">type</span>=<span class="hljs-string">&quot;java.lang.String&quot;</span> value=<span class="hljs-string">&quot;1&quot;</span>&gt;&lt;/constructor-<span class="hljs-built_in">arg</span>&gt;<br>&lt;constructor-<span class="hljs-built_in">arg</span> index=<span class="hljs-string">&quot;1&quot;</span> <span class="hljs-built_in">type</span>=<span class="hljs-string">&quot;java.lang.Integer&quot;</span> value=<span class="hljs-string">&quot;2&quot;</span>&gt;&lt;/constructor-<span class="hljs-built_in">arg</span>&gt;<br>&lt;/bean&gt;<br></code></pre></td></tr></table></figure><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs applescript">&lt;!<span class="hljs-comment">-- setteræ–¹æ³•æ³¨å…¥ </span><br>* æ™®é€šæ•°æ® <br>&lt;<span class="hljs-keyword">property</span> <span class="hljs-built_in">name</span>=<span class="hljs-string">&quot;&quot;</span> value=<span class="hljs-string">&quot;å€¼&quot;</span>&gt;<br>ç­‰æ•ˆ<br>&lt;<span class="hljs-keyword">property</span> <span class="hljs-built_in">name</span>=<span class="hljs-string">&quot;&quot;</span>&gt;<br>&lt;value&gt;å€¼<br>* å¼•ç”¨æ•°æ®<br>&lt;<span class="hljs-keyword">property</span> <span class="hljs-built_in">name</span>=<span class="hljs-string">&quot;&quot;</span> <span class="hljs-keyword">ref</span>=<span class="hljs-string">&quot;å¦ä¸€ä¸ªbean&quot;</span>&gt;<br>ç­‰æ•ˆ<br>&lt;<span class="hljs-keyword">property</span> <span class="hljs-built_in">name</span>=<span class="hljs-string">&quot;&quot;</span>&gt;<br>&lt;<span class="hljs-keyword">ref</span> bean=<span class="hljs-string">&quot;å¦ä¸€ä¸ªbean&quot;</span>/&gt;<br><br><span class="hljs-comment">--&gt;</span><br>&lt;bean <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;personId&quot;</span> <span class="hljs-built_in">class</span>=<span class="hljs-string">&quot;cn.kongwei_liao.domain.Person&quot;</span>&gt;<br>&lt;<span class="hljs-keyword">property</span> <span class="hljs-built_in">name</span>=<span class="hljs-string">&quot;pname&quot;</span> value=<span class="hljs-string">&quot;é˜³å¿—&quot;</span>&gt;&lt;/<span class="hljs-keyword">property</span>&gt;<br>&lt;<span class="hljs-keyword">property</span> <span class="hljs-built_in">name</span>=<span class="hljs-string">&quot;age&quot;</span>&gt;<br>&lt;value&gt;<span class="hljs-number">1234</span>&lt;/value&gt;<br>&lt;/<span class="hljs-keyword">property</span>&gt;<br><br>&lt;<span class="hljs-keyword">property</span> <span class="hljs-built_in">name</span>=<span class="hljs-string">&quot;homeAddr&quot;</span> <span class="hljs-keyword">ref</span>=<span class="hljs-string">&quot;homeAddrId&quot;</span>&gt;&lt;/<span class="hljs-keyword">property</span>&gt;<br>&lt;<span class="hljs-keyword">property</span> <span class="hljs-built_in">name</span>=<span class="hljs-string">&quot;companyAddr&quot;</span>&gt;<br>&lt;<span class="hljs-keyword">ref</span> bean=<span class="hljs-string">&quot;companyAddrId&quot;</span>/&gt;<br>&lt;/<span class="hljs-keyword">property</span>&gt;<br>&lt;/bean&gt;<br><br>&lt;bean <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;homeAddrId&quot;</span> <span class="hljs-built_in">class</span>=<span class="hljs-string">&quot;cn.kongwei_liao.domain.Address&quot;</span>&gt;<br>&lt;<span class="hljs-keyword">property</span> <span class="hljs-built_in">name</span>=<span class="hljs-string">&quot;addr&quot;</span> value=<span class="hljs-string">&quot;é˜œå—&quot;</span>&gt;&lt;/<span class="hljs-keyword">property</span>&gt;<br>&lt;<span class="hljs-keyword">property</span> <span class="hljs-built_in">name</span>=<span class="hljs-string">&quot;tel&quot;</span> value=<span class="hljs-string">&quot;911&quot;</span>&gt;&lt;/<span class="hljs-keyword">property</span>&gt;<br>&lt;/bean&gt;<br>&lt;bean <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;companyAddrId&quot;</span> <span class="hljs-built_in">class</span>=<span class="hljs-string">&quot;cn.kongwei_liao.domain.Address&quot;</span>&gt;<br>&lt;<span class="hljs-keyword">property</span> <span class="hljs-built_in">name</span>=<span class="hljs-string">&quot;addr&quot;</span> value=<span class="hljs-string">&quot;åŒ—äº¬å…«å®å±±&quot;</span>&gt;&lt;/<span class="hljs-keyword">property</span>&gt;<br>&lt;<span class="hljs-keyword">property</span> <span class="hljs-built_in">name</span>=<span class="hljs-string">&quot;tel&quot;</span> value=<span class="hljs-string">&quot;120&quot;</span>&gt;&lt;/<span class="hljs-keyword">property</span>&gt;<br>&lt;/bean&gt;<br></code></pre></td></tr></table></figure><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs applescript">&lt;!<span class="hljs-comment">-- äº†è§£å†…å®¹ï¼šPå‘½åç©ºé—´ï¼Œå¯¹â€œsetteræ–¹æ³•æ³¨å…¥â€è¿›è¡Œç®€åŒ–</span><br>æ›¿æ¢&lt;<span class="hljs-keyword">property</span> <span class="hljs-built_in">name</span>=<span class="hljs-string">&quot;å±æ€§å&quot;</span>&gt;ï¼Œè€Œæ˜¯åœ¨&lt;bean p:å±æ€§å-<span class="hljs-keyword">ref</span>=<span class="hljs-string">&quot;å¼•ç”¨å€¼&quot;</span>&gt;<br>på‘½åç©ºé—´ä½¿ç”¨å‰æï¼Œå¿…é¡»æ·»åŠ å‘½åç©ºé—´ï¼šxmlns:p=<span class="hljs-string">&quot;http://www.springframework.org/schema/p&quot;</span><br><span class="hljs-comment">--&gt;</span><br>&lt;bean <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;personId&quot;</span> <span class="hljs-built_in">class</span>=<span class="hljs-string">&quot;com.itheima.f_xml.c_p.Person&quot;</span> <br>p:pname=<span class="hljs-string">&quot;ç¦¹å¤ªç’&quot;</span> p:age=<span class="hljs-string">&quot;22&quot;</span> <br>p:homeAddr-<span class="hljs-keyword">ref</span>=<span class="hljs-string">&quot;homeAddrId&quot;</span> p:companyAddr-<span class="hljs-keyword">ref</span>=<span class="hljs-string">&quot;companyAddrId&quot;</span>&gt;<br>&lt;/bean&gt;<br><br>&lt;bean <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;homeAddrId&quot;</span> <span class="hljs-built_in">class</span>=<span class="hljs-string">&quot;cn.kongwei_liao.domain.Address&quot;</span><br>p:addr=<span class="hljs-string">&quot;DG&quot;</span> p:tel=<span class="hljs-string">&quot;ä¸œè&quot;</span>&gt;<br>&lt;/bean&gt;<br>&lt;bean <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;companyAddrId&quot;</span> <span class="hljs-built_in">class</span>=<span class="hljs-string">&quot;cn.kongwei_liao.domain.Address&quot;</span><br>p:addr=<span class="hljs-string">&quot;DG&quot;</span> p:tel=<span class="hljs-string">&quot;å²›å›½&quot;</span>&gt;<br>&lt;/bean&gt;<br></code></pre></td></tr></table></figure><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="xml"><span class="hljs-comment">&lt;!-- äº†è§£å†…å®¹ï¼šSpring ELè¡¨è¾¾å¼</span></span><br><span class="xml">å¯¹<span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span>è¿›è¡Œç»Ÿä¸€ç¼–ç¨‹ï¼Œæ‰€æœ‰çš„å†…å®¹éƒ½ä½¿ç”¨value</span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;#</span></span></span><span class="hljs-template-variable">&#123;è¡¨è¾¾å¼&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span></span><br><span class="xml">#</span><span class="hljs-template-variable">&#123;123&#125;</span><span class="xml">ã€#</span><span class="hljs-template-variable">&#123;&#x27;jack&#x27;&#125;</span><span class="xml"> ï¼š æ•°å­—ã€å­—ç¬¦ä¸²</span><br><span class="xml">#</span><span class="hljs-template-variable">&#123;beanId&#125;</span><span class="xml">ï¼šå¦ä¸€ä¸ªbeanå¼•ç”¨</span><br><span class="xml">#</span><span class="hljs-template-variable">&#123;beanId.propName&#125;</span><span class="xml">ï¼šæ“ä½œæ•°æ®</span><br><span class="xml">#</span><span class="hljs-template-variable">&#123;beanId.toString()&#125;</span><span class="xml">ï¼šæ‰§è¡Œæ–¹æ³•</span><br><span class="xml">#</span><span class="hljs-template-variable">&#123;T(ç±»).å­—æ®µ|æ–¹æ³•&#125;</span><span class="xml">ï¼šé™æ€æ–¹æ³•æˆ–å­—æ®µ</span><br><span class="xml">--&gt;</span><br><span class="xml"><span class="hljs-comment">&lt;!-- </span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;cname&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;#</span></span></span><span class="hljs-template-variable">&#123;&#x27;jack&#x27;&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;cname&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;#</span></span></span><span class="hljs-template-variable">&#123;customerId.cname.toUpperCase()&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span></span><br><span class="xml">é€šè¿‡å¦ä¸€ä¸ªbeanï¼Œè·å¾—å±æ€§ï¼Œè°ƒç”¨çš„æ–¹æ³•</span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;cname&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;#</span></span></span><span class="hljs-template-variable">&#123;customerId.cname?.toUpperCase()&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span></span><br><span class="xml">?.  å¦‚æœå¯¹è±¡ä¸ä¸ºnullï¼Œå°†è°ƒç”¨æ–¹æ³•</span><br><span class="xml">--&gt;</span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;customerId&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;cn.kongwei_liao.domain.Customer&quot;</span> &gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;cname&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;#</span></span></span><span class="hljs-template-variable">&#123;customerId.cname?.toUpperCase()&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;pi&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;#</span></span></span><span class="hljs-template-variable">&#123;T(java.lang.<span class="hljs-keyword">Math</span>).PI&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span></span><br></code></pre></td></tr></table></figure><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs xquery">&lt;!-- <br>é›†åˆçš„æ³¨å…¥éƒ½æ˜¯ç»™<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span>æ·»åŠ å­æ ‡ç­¾</span><br><span class="xml">æ•°ç»„ï¼š</span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">array</span>&gt;</span></span><br><span class="xml">Listï¼š</span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">list</span>&gt;</span></span><br><span class="xml">Setï¼š</span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">set</span>&gt;</span></span><br><span class="xml">Mapï¼š</span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">map</span>&gt;</span> ï¼Œmapå­˜æ”¾k/v é”®å€¼å¯¹ï¼Œä½¿ç”¨</span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">entry</span>&gt;</span>æè¿°</span><br><span class="xml">Propertiesï¼š</span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">props</span>&gt;</span>  </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">prop</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">prop</span>&gt;</span></span><span class="xml">  ã€ã€‘</span><br><span class="xml"></span><br><span class="xml">æ™®é€šæ•°æ®ï¼š</span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span></span><br><span class="xml">å¼•ç”¨æ•°æ®ï¼š</span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ref</span>&gt;</span></span><br><span class="xml">--&gt;</span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;collDataId&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;cn.kongwei_liao.domain.CollData&quot;</span> &gt;</span></span><br><span class="xml"></span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;arrayData&quot;</span>&gt;</span></span><br><span class="xml"></span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">array</span>&gt;</span></span><br><span class="xml"></span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>DS<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span></span><br><span class="xml"></span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>DZD<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span></span><br><span class="xml"></span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>å±Œä¸<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span></span><br><span class="xml"></span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>å±Œä¸­å±Œ<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">array</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span></span><br><span class="xml"></span><br><span class="xml"></span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;listData&quot;</span>&gt;</span></span><br><span class="xml"></span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">list</span>&gt;</span></span><br><span class="xml"></span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>äºåµ©æ¥ <span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span></span><br><span class="xml"></span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>æ›¾å«<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span></span><br><span class="xml"></span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>æ¨ç…œ<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span></span><br><span class="xml"></span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>æ›¾å°è´¤<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">list</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span></span><br><span class="xml"></span><br><span class="xml"></span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;setData&quot;</span>&gt;</span></span><br><span class="xml"></span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">set</span>&gt;</span></span><br><span class="xml"></span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>åœå°<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span></span><br><span class="xml"></span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>è–„çº¸<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span></span><br><span class="xml"></span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>å…³ç³»<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">set</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span></span><br><span class="xml"></span><br><span class="xml"></span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;mapData&quot;</span>&gt;</span></span><br><span class="xml"></span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">map</span>&gt;</span></span><br><span class="xml"></span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">entry</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;jack&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;æ°å…‹&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">entry</span>&gt;</span></span><br><span class="xml"></span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">entry</span>&gt;</span></span><br><span class="xml"></span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span></span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>rose<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span></span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">key</span>&gt;</span></span><br><span class="xml"></span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>è‚‰ä¸<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">entry</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">map</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span></span><br><span class="xml"></span><br><span class="xml"></span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;propsData&quot;</span>&gt;</span></span><br><span class="xml"></span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">props</span>&gt;</span></span><br><span class="xml"></span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">prop</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;é«˜å¯Œå¸…&quot;</span>&gt;</span>å«<span class="hljs-tag">&lt;/<span class="hljs-name">prop</span>&gt;</span></span><br><span class="xml"></span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">prop</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;ç™½å¯Œç¾&quot;</span>&gt;</span>å¬²<span class="hljs-tag">&lt;/<span class="hljs-name">prop</span>&gt;</span></span><br><span class="xml"></span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">prop</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;ç”·å±Œä¸&quot;</span>&gt;</span>æŒŠ<span class="hljs-tag">&lt;/<span class="hljs-name">prop</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">props</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h5 id="10-2ã€å°ç»“"><a href="#10-2ã€å°ç»“" class="headerlink" title="10.2ã€å°ç»“"></a>10.2ã€å°ç»“</h5><p>Spring ä¾èµ–æ³¨å…¥ï¼Œæ˜¯é€šè¿‡åå°„è·å–å¯¹è±¡çš„setteræ–¹æ³•å®ç°çš„ã€‚æ‰€ä»¥æˆ‘ä»¬é€šè¿‡xmlé…ç½®å®ç°ä¾èµ–æ³¨å…¥ï¼Œå¿…é¡»ä¸ºæˆ‘ä»¬çš„ç±»æ·»åŠ ä¾èµ–ç±»çš„æä¾›setteræ–¹æ³•ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">setUserDao</span>(<span class="hljs-params">IUserDao userDao</span>)</span> &#123;<br><span class="hljs-built_in">this</span>.userDao = userDao;<br>&#125; <br></code></pre></td></tr></table></figure><p>åé¢æˆ‘ä»¬è¿˜ä¼šå­¦ä¹ å…¶ä»–çš„ ä¾èµ–æ³¨å…¥å¤æ‚å¯¹è±¡çš„æ–¹æ³•ã€‚</p><h4 id="11ã€Springå…¨æ³¨è§£å®ç°ä¸‰å±‚ä¾èµ–æ³¨å…¥"><a href="#11ã€Springå…¨æ³¨è§£å®ç°ä¸‰å±‚ä¾èµ–æ³¨å…¥" class="headerlink" title="11ã€Springå…¨æ³¨è§£å®ç°ä¸‰å±‚ä¾èµ–æ³¨å…¥"></a>11ã€Springå…¨æ³¨è§£å®ç°ä¸‰å±‚ä¾èµ–æ³¨å…¥</h4><p>åœ¨Javaä¸­å†™Xmlé…ç½®Beanè¿˜æ˜¯æ¯”è¾ƒéº»çƒ¦ï¼Œå› æ­¤ï¼ŒSpringè¿˜æä¾›äº†ä½¿ç”¨æ³¨è§£æ¥é…ç½®çš„æ–‡ä»¶ã€‚æˆ‘ä»¬å¯ä»¥æ¥çœ‹ä¸€ä¸‹ï¼Œæ³¨è§£æ˜¯æ€ä¹ˆæ¥é…ç½®è¿™ä¸ªXmlçš„</p><ol><li>ä¿®æ”¹xmlæ–‡ä»¶ï¼Œå¼•å…¥æ–°çš„çº¦æŸ</li><li>æŒ‡å®šéœ€è¦æ‰«æçš„åŒ…ï¼Œé‡Œé¢æœ‰è¦äº¤ç»™Springç®¡ç†çš„ç±»</li><li>ä¿®æ”¹ç±»ï¼Œåœ¨ç±»ä¸Šé¢åŠ ä¸Šæ³¨è§£ï¼Œè®©Spring å¯ä»¥æ‰«æåˆ°</li></ol><p>1ã€ä¿®æ”¹XMLé…ç½®contextå‘½åç©ºé—´ï¼Œè®©Springæ‰«æç±»ä¸æ”¯æŒæ³¨è§£</p><p><img src="/2019/11/28/Spring/image-20191228191254644.png" alt="image-20191228191254644"></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag"><span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag"><span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/context&quot;</span></span><br><span class="hljs-tag"><span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;</span></span><br><span class="hljs-tag"><span class="hljs-string">http://www.springframework.org/schema/beans</span></span><br><span class="hljs-tag"><span class="hljs-string">http://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class="hljs-tag"><span class="hljs-string">http://www.springframework.org/schema/context</span></span><br><span class="hljs-tag"><span class="hljs-string">http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- é…ç½®è®©Springæ‰«æç±»ä¸æ”¯æŒæ³¨è§£--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">&quot;cn.kongwei_liao.*&quot;</span> /&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure><p>2ã€åœ¨ç±»é‡Œé¢åŠ ä¸Šæ³¨è§£</p><blockquote><p>@Component  æ™®é€šä»“åº“ï¼ˆdomainå±‚ï¼‰å–ä»£&lt;bean class=â€â€&gt;</p><p>@Component(â€œidâ€) å–ä»£ &lt;bean id=â€â€ class=â€â€&gt;</p><p>WEBå¼€å‘ï¼Œæä¾›äº†3ä¸ª@Componentæ³¨è§£è¡ç”Ÿæ³¨è§£ï¼ˆåŠŸèƒ½ä¸€æ ·ï¼‰ï¼Œ&lt;bean class=â€â€&gt;</p><ol><li>@Repository  ä»“åº“ï¼ˆå…¶å®å°±æ˜¯daoå±‚ï¼‰</li><li>@Service    ï¼ˆserviceå±‚ï¼‰</li><li>@Controller  æ§åˆ¶å±‚(servletã€action)</li></ol></blockquote><p>3ã€ä¾èµ–æ³¨å…¥</p><blockquote><p>ä¾èµ–æ³¨å…¥ï¼Œç»™ç§æœ‰å­—æ®µè®¾ç½®ï¼Œä¹Ÿå¯ä»¥ç»™setteræ–¹æ³•è®¾ç½®</p><p>â€‹    æ™®é€šå€¼ï¼š@Value(â€œâ€)</p><p>â€‹    å¼•ç”¨å€¼ï¼š</p><p>â€‹        æ–¹å¼1ï¼šæŒ‰ç…§ã€ç±»å‹ã€‘æ³¨å…¥</p><p>â€‹            @Autowired</p><p>â€‹        æ–¹å¼2ï¼šæŒ‰ç…§ã€åç§°ã€‘æ³¨å…¥1</p><p>â€‹            @Autowired</p><p>â€‹            @Qualifier(â€œåç§°â€)</p><p>â€‹        æ–¹å¼3ï¼šæŒ‰ç…§ã€åç§°ã€‘æ³¨å…¥2</p><p>â€‹            @Resource(â€œåç§°â€)</p></blockquote><p>4ã€ç”Ÿå‘½å‘¨æœŸ</p><blockquote><p>åˆå§‹åŒ–ï¼š@PostConstruct</p><p>é”€æ¯ï¼š@PreDestroy</p></blockquote><p>5ã€ä½œç”¨åŸŸ</p><blockquote><p>@Scope(â€œprototypeâ€) å¤šä¾‹</p></blockquote><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs perl">//æ™®é€šä»“åº“ï¼Œåº”è¯¥å°±æ˜¯ï¼ˆå®ä½“ç±»ï¼‰é‚£ä¸€å±‚äº†<br><span class="hljs-keyword">package</span> cn.kongwei_liao.spring.domain;<br><br>import org.springframework.stereotype.Component;<br><br>@Component<br>public class User &#123;<br>    private String name;<br>    private Integer age;<br><br>    public User()&#123;&#125;;<br>    public User(String name, <span class="hljs-keyword">int</span> age) &#123;<br>        setName(name);<br>        setAge(age);<br>    &#125;<br><br>    public String getName() &#123;<span class="hljs-keyword">return</span> name;&#125;<br>    public void setName(String name) &#123;this.name = name;&#125;<br>    public Integer getAge() &#123;<span class="hljs-keyword">return</span> age;&#125;<br>    public void setAge(Integer age) &#123;this.age = age;&#125;<br><br>    public void init()&#123;System.out.println(<span class="hljs-string">&quot;åˆå§‹åŒ–æ–¹æ³•&quot;</span>);&#125;<br>    public void destroy()&#123;System.out.println(<span class="hljs-string">&quot;é”€æ¯&quot;</span>);&#125;<br>&#125;<br>//<span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><br>@Repository<br>public class UserDaoImpl implements IUserDao&#123;<br>@Override<br>public void add(User user) &#123;<br>System.out.println(<span class="hljs-string">&quot;æˆåŠŸæ·»åŠ &quot;</span>+user.getName()+<span class="hljs-string">&quot;åˆ°æ•°æ®åº“...&quot;</span>);<br>&#125;<br>&#125;<br>//<span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><br>@Service<br>public class UserServiceImpl implements IUserService&#123;<br>@Autowired<br>private IUserDao userDao;<br><br>@Override<br>public void add(User user) &#123;<br>// è°ƒç”¨daoå±‚æ–¹æ³• æ·»åŠ ç”¨æˆ·<br>userDao.add(user);<br>&#125;<br>&#125;<br>//<span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><br>@Controller<br>public class UserServlet extends HttpServlet&#123;<br>@Autowired<br>private IUserService userService;<br><br>public void addUser() &#123;<br>User user = new User(<span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>,<span class="hljs-number">22</span>);<br>// éœ€è¦è°ƒç”¨Serviceæ–¹æ³• æ–°å¢ç”¨æˆ·åˆ°åº“<br>userService.add(user);<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æµ‹è¯•ï¼š</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@RunWith</span>(SpringJUnit4ClassRunner.class)<br><span class="hljs-variable">@ContextConfiguration</span>(<span class="hljs-string">&quot;classpath:applicationContext.xml&quot;</span>)<br>public class Spring4Test &#123;<br><br><span class="hljs-variable">@Autowired</span><br>private UserServlet userServlet;<br><br><span class="hljs-variable">@Test</span><br>public void testName() throws Exception &#123;<br><span class="hljs-selector-tag">userServlet</span><span class="hljs-selector-class">.addUser</span>();<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å°ç»“:</p><p>åˆå­¦ä½¿ç”¨xmlç‰ˆæ‰‹åŠ¨æ³¨å…¥ï¼Œç†Ÿç»ƒä¹‹åå¯ä»¥ä½¿ç”¨xmlè‡ªåŠ¨æ³¨å…¥</p><p>ä»¥åè¶‹åŠ¿ï¼šæ³¨è§£ç‰ˆ</p><p>å¦‚æœæ˜¯æ³¨è§£ç‰ˆï¼Œå°±å…¨éƒ¨ä½¿ç”¨æ³¨è§£ï¼ˆè‡ªå·±å†™ç±»ï¼‰ï¼Œä¸è¦æ··ç”¨ï¼Œå…¶å®ƒæ¡†æ¶å·²ç»å†™å¥½çš„ç±»ä»ç„¶ä½¿ç”¨xmlè¿›è¡Œé…ç½®ï¼Œå¦‚æœæ˜¯xmlç‰ˆï¼Œåœ¨æµ‹è¯•çš„ä½¿ç”¨å¿…é¡»ä½¿ç”¨æ³¨è§£æ³¨å…¥ï¼ˆå› ä¸ºæµ‹è¯•æ¡†æ¶ä½¿ç”¨æ³¨è§£ç‰ˆï¼‰</p><p>åªæœ‰è‡ªå·±å†™çš„ç±»ï¼Œæ‰å¯ä»¥å…¨éƒ¨ç”¨æ³¨è§£ï¼Œåˆ«äººå†™çš„ç±»ä½¿ç”¨æ³¨è§£å¿…é¡»å»ä¿®æ”¹åˆ«äººçš„æºç ï¼Œæ·»åŠ å“åº”çš„æ³¨è§£æ ‡å¿—ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>Spring</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SpringMVC</title>
    <link href="/2019/11/28/SpringMVC/"/>
    <url>/2019/11/28/SpringMVC/</url>
    
    <content type="html"><![CDATA[<h3 id="1ã€SpringMVCæ¦‚è¿°"><a href="#1ã€SpringMVCæ¦‚è¿°" class="headerlink" title="1ã€SpringMVCæ¦‚è¿°"></a>1ã€SpringMVCæ¦‚è¿°</h3><h4 id="1-1ã€ä¸ºä»€ä¹ˆå¼•å…¥SpringMVCï¼Ÿ"><a href="#1-1ã€ä¸ºä»€ä¹ˆå¼•å…¥SpringMVCï¼Ÿ" class="headerlink" title="1.1ã€ä¸ºä»€ä¹ˆå¼•å…¥SpringMVCï¼Ÿ"></a>1.1ã€ä¸ºä»€ä¹ˆå¼•å…¥SpringMVCï¼Ÿ</h4><h5 id="1-1-1ã€ä¼ ç»ŸMVCæ¨¡å¼çš„é—®é¢˜"><a href="#1-1-1ã€ä¼ ç»ŸMVCæ¨¡å¼çš„é—®é¢˜" class="headerlink" title="1.1.1ã€ä¼ ç»ŸMVCæ¨¡å¼çš„é—®é¢˜"></a>1.1.1ã€ä¼ ç»ŸMVCæ¨¡å¼çš„é—®é¢˜</h5><p><strong>1ã€å›é¡¾JSPä¸­æ‰€è®²çš„MVC</strong></p><p>æ•°æ®æ¨¡å‹ï¼ˆModelï¼‰ï¼šè´Ÿè´£å°è£…åº”ç”¨çš„çŠ¶æ€ï¼Œå¹¶å®ç°åº”ç”¨çš„åŠŸèƒ½ã€‚</p><p>è§†å›¾å±•ç°ï¼ˆViewï¼‰ï¼šç•Œé¢ï¼Œè§†å›¾ä»æ¨¡å‹è·å¾—è¦å±•ç¤ºçš„æ•°æ®ï¼Œç„¶åç”¨è‡ªå·±çš„æ–¹å¼å±•ç°ç»™ç”¨æˆ·ã€‚</p><p>æ§åˆ¶å™¨ï¼ˆControllerï¼‰ï¼šç”¨æ¥æ§åˆ¶åº”ç”¨ç¨‹åºçš„æµç¨‹å’Œå¤„ç†è§†å›¾æ‰€å‘å‡ºçš„è¯·æ±‚ã€‚å½“æ§åˆ¶å™¨æ¥æ”¶åˆ°ç”¨æˆ·çš„è¯·æ±‚åï¼Œä¼šå°†ç”¨æˆ·çš„æ•°æ®å’Œæ¨¡å‹çš„æ›´æ–°ç›¸æ˜ å°„ï¼Œä¹Ÿå°±æ˜¯è°ƒç”¨æ¨¡å‹æ¥å®ç°ç”¨æˆ·è¯·æ±‚çš„åŠŸèƒ½ï¼›ç„¶åæ§åˆ¶å™¨ä¼šé€‰æ‹©ç”¨äºå“åº”çš„è§†å›¾ï¼ŒæŠŠæ¨¡å‹æ›´æ–°åçš„æ•°æ®å±•ç¤ºç»™ç”¨æˆ·ã€‚</p><p><img src="/2019/11/28/SpringMVC/Snipaste_2019-11-28_09-21-37.png"></p><p>æœ€å…¸å‹çš„MVCï¼šJSP(view)+Servlet(controller)+JavaBean(dao model)æ¨¡å¼</p><p><strong>2ã€ Jsp + Servlet + JavaBeanå­˜åœ¨é—®é¢˜ï¼š</strong></p><ol><li><p>web.xml å¾ˆè‡ƒè‚¿</p></li><li><p>Servletï¼š</p></li></ol><p>æ¥æ”¶å‚æ•°ï¼šæ¥æ”¶å‚æ•°è¿‡ç¨‹éå¸¸éº»çƒ¦</p><p>è°ƒç”¨ä¸šåŠ¡é€»è¾‘ï¼šservice</p><p>è·³è½¬é¡µé¢ï¼šå®ç°forwardå’Œredirectä¸æ–¹ä¾¿</p><ol start="3"><li>ServletèŒè´£ä¸å•ä¸€ï¼šï¼ˆæ–‡ä»¶ä¸Šä¼ ä¸‹è½½ã€ä»¤ç‰Œã€å­—ç¬¦ç¼–ç ç­‰ç­‰ï¼‰</li></ol><p>Servletåº”åªåšæ ¸å¿ƒåŠŸèƒ½ï¼Œå…¶ä»–çš„åŠŸèƒ½äº¤ç»™æ¡†æ¶åš</p><h5 id="1-1-2ã€è§£å†³æ–¹æ¡ˆ"><a href="#1-1-2ã€è§£å†³æ–¹æ¡ˆ" class="headerlink" title="1.1.2ã€è§£å†³æ–¹æ¡ˆ"></a>1.1.2ã€è§£å†³æ–¹æ¡ˆ</h5><p>é’ˆå¯¹ä»¥ä¸Šé—®é¢˜ï¼Œæˆ‘ä»¬ç°åœ¨é€‰æ‹©SpringMVC æ¡†æ¶è§£å†³ã€‚  </p><h4 id="1-2ã€SpringMVCæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#1-2ã€SpringMVCæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="1.2ã€SpringMVCæ˜¯ä»€ä¹ˆï¼Ÿ"></a>1.2ã€SpringMVCæ˜¯ä»€ä¹ˆï¼Ÿ</h4><h5 id="1-2-1ã€åŸºæœ¬æ¦‚å¿µ"><a href="#1-2-1ã€åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="1.2.1ã€åŸºæœ¬æ¦‚å¿µ"></a>1.2.1ã€åŸºæœ¬æ¦‚å¿µ</h5><p>SpringMVCæ˜¯ä¸€ä¸ªåŸºäºMVCæ¨¡å¼çš„WEBè¡¨ç°å±‚æ¡†æ¶ï¼Œå®ƒè§£å†³WEBå¼€å‘ä¸­å¸¸è§çš„é—®é¢˜(å‚æ•°æ¥æ”¶ã€æ–‡ä»¶ä¸Šä¼ /ä¸‹è½½ã€è¡¨å•éªŒè¯ã€å›½é™…åŒ–ç­‰ç­‰)ï¼Œä½¿ç”¨éå¸¸ç®€å•ï¼ŒSpringMVCä½œä¸ºSpringä¸­çš„ä¸€ä¸ªæ¨¡å—,å¯ä»¥ä¸Springæ— ç¼é›†æˆã€‚</p><p>ç›®å‰å¾ˆå¤šå…¬å¸éƒ½ä½¿ç”¨SpringMVCï¼Œ90%çš„æ‹›è˜å•ä½è¦æ±‚ç†Ÿæ‚‰ä½¿ç”¨SpringMVCã€‚</p><p>å®ƒæ˜¯ä¸€ä¸ªå…¸å‹çš„mvcæ„æ¶ï¼Œå®ƒæ˜¯<code>ä¸€ä¸ªçº¯æ­£çš„servletç³»ç»Ÿ</code>ï¼Œè¿™ä¹Ÿæ˜¯å®ƒç›¸æ¯”å…¶ä»–MVCæ¡†æ¶æ‰€å…·æœ‰çš„ä¼˜åŠ¿ã€‚</p><h5 id="1-2-2ã€æ ¸å¿ƒå‰ç«¯æ§åˆ¶å™¨"><a href="#1-2-2ã€æ ¸å¿ƒå‰ç«¯æ§åˆ¶å™¨" class="headerlink" title="1.2.2ã€æ ¸å¿ƒå‰ç«¯æ§åˆ¶å™¨"></a>1.2.2ã€æ ¸å¿ƒå‰ç«¯æ§åˆ¶å™¨</h5><p>é¡¾åæ€ä¹‰æ ¸å¿ƒæ§åˆ¶å™¨ç”¨äºWebå±‚æ ¸å¿ƒåŠŸèƒ½çš„å¤„ç†ä»¥åŠåœ¨æ‰€æœ‰æ§åˆ¶å™¨æ‰§è¡Œä¹‹å‰ï¼Œæ‰€æœ‰çš„WebMvcæ¡†æ¶éƒ½é‡‡ç”¨äº†è¿™ç§æ–¹å¼ï¼Œ<code>åœ¨SpringMVCä¸­ä½¿ç”¨çš„æ˜¯DispatcherServletä¸ºæ ¸å¿ƒæ§åˆ¶å™¨</code>ã€‚</p><p>DispatcherServletæ ¸å¿ƒæ§åˆ¶å™¨ä¼šæ‹¦æˆªåŒ¹é…çš„è¯·æ±‚ï¼ŒæŠŠæ‹¦æˆªä¸‹æ¥çš„è¯·æ±‚ï¼Œä¾æ®ç›¸åº”çš„è§„åˆ™ã€æ˜ å°„ï¼ˆurl=æ§åˆ¶å™¨ï¼‰ã€‘åˆ†å‘åˆ°ç›®æ ‡Controlleræ¥å¤„ç†ã€‚</p><p><img src="/2019/11/28/SpringMVC/Snipaste_2019-11-28_09-30-21.png"></p><img src="/2019/11/28/SpringMVC/Snipaste_2019-11-28_09-30-58.png" style="zoom:80%;"><h3 id="2ã€SpringMVCå…¥é—¨æ¡ˆä¾‹"><a href="#2ã€SpringMVCå…¥é—¨æ¡ˆä¾‹" class="headerlink" title="2ã€SpringMVCå…¥é—¨æ¡ˆä¾‹"></a>2ã€SpringMVCå…¥é—¨æ¡ˆä¾‹</h3><h4 id="2-1ã€å®ç°æ­¥éª¤"><a href="#2-1ã€å®ç°æ­¥éª¤" class="headerlink" title="2.1ã€å®ç°æ­¥éª¤"></a>2.1ã€å®ç°æ­¥éª¤</h4><p>æˆ‘ä»¬è¦ç”¨SpringMVCï¼Œéœ€è¦å…ˆå‡†å¤‡äº›ä»€ä¹ˆäº‹:</p><ol><li><p>ä½¿ç”¨SpringMVCå¿…é¡»å…ˆä¿è¯ï¼Œä½ çš„é¡¹ç›®æ‹¥æœ‰Springçš„è¿è¡Œç¯å¢ƒã€‚</p></li><li><p>åœ¨æ·»åŠ SpringMVCç›¸å…³jaråŒ…</p><ul><li>spring-webmvc-4.1.2.RELEASE.jar SpringMVCçš„jaræ–‡ä»¶ã€‚</li><li>spring-web-4.1.2.RELEASE.jar   Springå¯¹Webé¡¹ç›®è¿è¡Œçš„æ”¯æŒã€‚</li></ul></li><li><p>åœ¨web.xmlï¼Œé…ç½®æ ¸å¿ƒæ§åˆ¶å™¨</p><p>SpringMVCæ¡†æ¶çš„å¿ƒè„å°±æ˜¯æ ¸å¿ƒæ§åˆ¶å™¨ï¼Œè´Ÿè´£æ‰€æœ‰è¯·æ±‚çš„å…¬å…±åŠŸèƒ½,ä»–å’Œæˆ‘ä»¬ä¹‹å‰çš„æ™®é€šServletä¸€æ ·éœ€è¦åœ¨web.xmlä¸­é…ç½®&lt;servlet-mapping&gt;</p></li><li><p>æ–°å»ºControlleræ§åˆ¶å™¨ï¼Œå¤„ç†è¯·æ±‚ï¼Œè¿›è¡Œå“åº”</p><p>SpringMVCä¸­çš„æ§åˆ¶å™¨æœ‰ä¸€å®šè§„èŒƒï¼Œè¦æ±‚å®ç°Controlleræ¥å£æˆ–å­æ¥å£</p></li><li><p>é…ç½®æˆ‘ä»¬çš„Controlleræ§åˆ¶å™¨</p><p>SpringMVCæ˜¯åŸºäºSpringï¼ŒSpringä¸­çš„æ ¸å¿ƒå°±æ˜¯Iocå®¹å™¨ã€‚SpringMVCä¸­çš„æ§åˆ¶å™¨ä¹Ÿæ˜¯ä¸€ä¸ªä¸€ä¸ª&lt;bean&gt;ï¼Œéœ€è¦åœ¨applicationContext.xmlä¸­è¿›è¡Œé…ç½®</p></li><li><p>æµ‹è¯•è®¿é—®</p></li></ol><h4 id="2-2ã€å…·ä½“å®ç°"><a href="#2-2ã€å…·ä½“å®ç°" class="headerlink" title="2.2ã€å…·ä½“å®ç°"></a>2.2ã€å…·ä½“å®ç°</h4><h5 id="2-2-1ã€åˆ›å»ºWebå·¥ç¨‹"><a href="#2-2-1ã€åˆ›å»ºWebå·¥ç¨‹" class="headerlink" title="2.2.1ã€åˆ›å»ºWebå·¥ç¨‹"></a>2.2.1ã€åˆ›å»ºWebå·¥ç¨‹</h5><h5 id="2-2-2ã€å¯¼å…¥JaråŒ…"><a href="#2-2-2ã€å¯¼å…¥JaråŒ…" class="headerlink" title="2.2.2ã€å¯¼å…¥JaråŒ…"></a>2.2.2ã€å¯¼å…¥JaråŒ…</h5><p>ä»èµ„æ–™ä¸­å¯¼å…¥springMVCç‹¬ç«‹è¿è¡Œçš„jaråŒ…</p><p>ä¸è¦ä½¿ç”¨spring 3.xçš„jarå’Œ4.xçš„jaræ–‡ä»¶æ··ç”¨ï¼Œå±é™©çš„å¾ˆ</p><ul><li><p>   com.springsource.org.apache.commons.logging-1.1.1.jar</p></li><li><p>   spring-beans-4.1.2.RELEASE.jar</p></li><li><p>   spring-context-4.1.2.RELEASE.jar</p></li><li><p>   spring-core-4.1.2.RELEASE.jar</p></li><li><p>   spring-expression-4.1.2.RELEASE.jar</p></li><li><p>   spring-aop-4.1.2.RELEASE.jar</p></li><li><p>   spring ormã€jdbcã€txç›¸å…³jaræ ¹æ®é¡¹ç›®ä½¿ç”¨è‡ªè¡Œæ·»åŠ ;</p></li></ul><p>åŠ å…¥ç›¸å…³SpringMVCç›¸å…³jaråŒ…ã€‚</p><ul><li><p>   spring-web-4.1.2.RELEASE.jar      spring å¯¹webé¡¹ç›®çš„æ”¯æŒã€‚</p></li><li><p>   spring-webmvc-4.1.2.RELEASE.jar     SpringMVCæ ¸å¿ƒåŒ…ã€‚</p></li></ul><h5 id="2-3-3ã€åŠ å…¥é…ç½®æ–‡ä»¶"><a href="#2-3-3ã€åŠ å…¥é…ç½®æ–‡ä»¶" class="headerlink" title="2.3.3ã€åŠ å…¥é…ç½®æ–‡ä»¶"></a>2.3.3ã€åŠ å…¥é…ç½®æ–‡ä»¶</h5><p><strong>1ã€åˆ›å»ºApplicationContext.xml</strong></p><p>SpringMVCæœ¬èº«å°±æ˜¯Springçš„å­é¡¹ç›®ï¼Œå¯¹Springå…¼å®¹æ€§å¾ˆå¥½ï¼Œä¸éœ€è¦åšå¾ˆå¤šé…ç½®ã€‚</p><p>è¿™é‡Œåªé…ç½®ä¸€ä¸ªControlleræ‰«æå°±å¯ä»¥äº†ï¼Œè®©Springå¯¹é¡µé¢æ§åˆ¶å±‚Controllerè¿›è¡Œç®¡ç†ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag"><span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/context&quot;</span></span><br><span class="hljs-tag"><span class="hljs-attr">xmlns:mvc</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/mvc&quot;</span> </span><br><span class="hljs-tag"><span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag"><span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;</span></span><br><span class="hljs-tag"><span class="hljs-string">http://www.springframework.org/schema/beans</span></span><br><span class="hljs-tag"><span class="hljs-string">http://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class="hljs-tag"><span class="hljs-string">http://www.springframework.org/schema/context</span></span><br><span class="hljs-tag"><span class="hljs-string">http://www.springframework.org/schema/context/spring-context.xsd</span></span><br><span class="hljs-tag"><span class="hljs-string">http://www.springframework.org/schema/mvc</span></span><br><span class="hljs-tag"><span class="hljs-string">http://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- é…ç½®controlleråŒ…æ‰«æå™¨ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">&quot;cn.kongwei_liao.springmvc.controller&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">context:component-scan</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>2ã€é…ç½®å‰ç«¯æ§åˆ¶å™¨</strong></p><p>Webmvcæ¡†æ¶çš„å¿ƒè„å°±æ˜¯<strong>æ ¸å¿ƒæ§åˆ¶å™¨</strong>ï¼Œè´Ÿè´£æ‰€æœ‰è¯·æ±‚çš„å…¬å…±åŠŸèƒ½ï¼Œç„¶ååœ¨åˆ†å‘ç»™å…·ä½“çš„æ§åˆ¶å™¨ï¼ˆæˆ‘ä»¬ç¼–å†™çš„æ§åˆ¶å™¨ï¼‰ï¼Œå®Œæˆä¸šåŠ¡é€»è¾‘ï¼Œå“åº”è§†å›¾ã€‚</p><p>åœ¨web.xmlä¸­é…ç½®SpringMVCçš„<strong>å‰ç«¯æ§åˆ¶å™¨DispatcherServlet</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- é…ç½®sringmvcå‰ç«¯æ§åˆ¶å™¨ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>DispatcherServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">init-param</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>contextConfigLocation<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>classpath:applicationContext.xml<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">init-param</span>&gt;</span><br><span class="hljs-comment">&lt;!--è‹¥ä¸æ­¢ä¸€ä¸ª&lt;init-param&gt;æ ‡ç­¾ï¼Œç¬¬ä¸€ä¸ªä¼˜å…ˆ--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">load-on-startup</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">load-on-startup</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>DispatcherServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br><span class="hljs-comment">&lt;!-- </span><br><span class="hljs-comment">1. /* :æ‹¦æˆªæ‰€æœ‰.åŒ…æ‹¬é™æ€èµ„æº (ä¸å»ºè®®ä½¿ç”¨)</span><br><span class="hljs-comment">2. .action .do : æ‹¦æˆªä»¥actionå’Œdoç»“å°¾çš„è¯·æ±‚ (ä¸»è¦ç”¨äºåå°ç³»ç»Ÿ.)</span><br><span class="hljs-comment">3. / :æ‹¦æˆªæ‰€æœ‰,ä½†æ˜¯ä¸åŒ…å«jsp...</span><br><span class="hljs-comment">å…¶ä»–é™æ€èµ„æºå¦‚:.css,.jsç­‰       éœ€è¦ç”¨ä¾‹å¤–çš„é…ç½®è¿›è¡Œæ”¾è¡Œ (ä¸»è¦ç”¨äºå‰å°ç³»ç»Ÿ)--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>*.do<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br></code></pre></td></tr></table></figure><h5 id="2-3-4ã€åˆ›å»ºMyController"><a href="#2-3-4ã€åˆ›å»ºMyController" class="headerlink" title="2.3.4ã€åˆ›å»ºMyController"></a>2.3.4ã€åˆ›å»ºMyController</h5><p>SpringMVCä¸­çš„æ§åˆ¶å™¨ä¸ä»¥å‰æˆ‘ä»¬ä»¥å‰å­¦ä¹ çš„servletä½œç”¨ä¸€æ ·ï¼Œå¤„ç†ç”¨æˆ·è¯·æ±‚ï¼Œè°ƒç”¨ä¸šåŠ¡é€»è¾‘ï¼Œè¿”å›ç»“æœè§†å›¾ã€‚</p><p>SpringMVCä¸­çš„æ§åˆ¶å™¨æœ‰ä¸€å®šè§„èŒƒï¼Œè¦ä¹ˆå®ç°æ¥å£ï¼Œè¦ä¹ˆä½¿ç”¨POJOå¯¹è±¡ä¸æ³¨è§£é…åˆä½¿ç”¨ã€‚</p><table><thead><tr><th>è§„èŒƒè¦æ±‚</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>å®ç°Controlleræ¥å£æˆ–å­æ¥å£ã€‚</code>  æ³¨æ„ï¼šå­æ¥å£å¾ˆå¤šå·²ç»è¿‡æ—¶äº†ã€‚</td><td>æ ¸å¿ƒæ–¹æ³•ä¸ºhandleRequest(req,resp)ï¼Œå¤„ç†ç”¨æˆ·è¯·æ±‚</td></tr><tr><td>æ™®é€šçš„ç±»(å¸¸ç”¨çš„å“¦)</td><td>ä½¿ç”¨ä¸€ä¸ªæ™®é€šçš„ç±»ä½œä¸ºæˆ‘ä»¬çš„æ§åˆ¶å™¨ï¼Œæ¯ä¸€ä¸ªæ–¹æ³•å°±æ˜¯ä¸€ä¸ªå¤„ç†å™¨ï¼Œè¿™ç§æ–¹å¼éœ€è¦é…åˆæ³¨è§£æ ‡ç­¾æ‰èƒ½ä½¿ç”¨ã€‚</td></tr></tbody></table><p>è¿™é‡Œä½œä¸ºæ¼”ç¤ºæ¡ˆä¾‹ï¼š</p><p>MyControlleréœ€è¦<code>å®ç°Controlleræ¥å£</code>ï¼Œ<code>é‡å†™handleRquestæ–¹æ³•</code>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyController</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Controller</span> </span>&#123;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> ModelAndView <span class="hljs-title">handleRequest</span><span class="hljs-params">(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="2-3-5ã€åˆ›å»ºModelAndView"><a href="#2-3-5ã€åˆ›å»ºModelAndView" class="headerlink" title="2.3.5ã€åˆ›å»ºModelAndView"></a>2.3.5ã€åˆ›å»ºModelAndView</h5><p>handleRequestæ–¹æ³•çš„ä¸¤ä¸ªå‚æ•°ä¸æˆ‘ä»¬ä»¥å‰çš„Servletä¸­serviceæ–¹æ³•ä¸€æ ·ï¼Œrequestå’Œresponseå¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ä¸ªä¸¤ä¸ªå¯¹è±¡å®Œæˆä¸€æ¬¡è¯·æ±‚çš„æ‰€æœ‰å·¥ä½œï¼Œæ¯”å¦‚ä½ å¯ä»¥ä½¿ç”¨requestæ¥å—å‚æ•°ï¼Œæˆ–è€…ä½¿ç”¨responseé‡å®šå‘ç­‰ç­‰ï¼Œ<strong>æ³¨æ„è¯¥æ–¹æ³•è¿˜æœ‰ä¸€ä¸ªè¿”å›å€¼ModelAndView</strong>ã€‚</p><p>ModelAndViewæ˜¯SpringMVCæ§åˆ¶å™¨ä¸­ç‰¹æœ‰ä¸€ä¸ªå¯¹è±¡ï¼Œ<strong>æè¿°ä¸€æ¬¡è¯·æ±‚å“åº”çš„ æ•°æ®ï¼ˆModelï¼‰å’Œ è§†å›¾ï¼ˆViewï¼‰</strong>ã€‚</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">@Override<br>public ModelAndView handle<span class="hljs-constructor">Request(HttpServletRequest <span class="hljs-params">request</span>, HttpServletResponse <span class="hljs-params">response</span>)</span> throws Exception &#123;<br><span class="hljs-comment">// å¤„ç†è¯·æ±‚ï¼š æ¥æ”¶å‚æ•°  ä¸šåŠ¡è°ƒç”¨  é¡µé¢è·³è½¬</span><br><br><span class="hljs-comment">// åˆ›å»º ModelAndView å¯¹è±¡</span><br>ModelAndView mav = <span class="hljs-keyword">new</span> <span class="hljs-constructor">ModelAndView()</span>;<br><br><span class="hljs-comment">// æ·»åŠ æ¨¡å‹æ•°æ®</span><br>mav.add<span class="hljs-constructor">Object(<span class="hljs-string">&quot;message&quot;</span>,<span class="hljs-string">&quot;&lt;h2&gt;Hello SpringMVC!&lt;/h2&gt;&quot;</span>)</span>;<br><br><span class="hljs-comment">// è®¾ç½®è§†å›¾è·¯å¾„</span><br>mav.set<span class="hljs-constructor">ViewName(<span class="hljs-string">&quot;index.jsp&quot;</span>)</span>;<br><br>return mav;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="2-3-6ã€é…ç½®æˆ‘ä»¬çš„æ§åˆ¶å™¨"><a href="#2-3-6ã€é…ç½®æˆ‘ä»¬çš„æ§åˆ¶å™¨" class="headerlink" title="2.3.6ã€é…ç½®æˆ‘ä»¬çš„æ§åˆ¶å™¨"></a>2.3.6ã€é…ç½®æˆ‘ä»¬çš„æ§åˆ¶å™¨</h5><p>**name: ** /hello.do ä¸º<code>æ§åˆ¶å™¨çš„è®¿é—®è·¯å¾„</code></p><p><strong>class:</strong>  cn.kongwei_liao.springmvc.controller.MyController<code>æ§åˆ¶å™¨ç±»çš„å…¨é™å®šå</code></p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">&lt;bean <span class="hljs-attribute">name</span>=<span class="hljs-string">&quot;/index.do&quot;</span> <span class="hljs-attribute">class</span>=<span class="hljs-string">&quot;cn.kongwei_liao.springmvc.controller.MyController&quot;</span>&gt;&lt;/bean&gt;<br></code></pre></td></tr></table></figure><h5 id="2-3-7ã€JSPé¡µé¢"><a href="#2-3-7ã€JSPé¡µé¢" class="headerlink" title="2.3.7ã€JSPé¡µé¢"></a>2.3.7ã€JSPé¡µé¢</h5><p>å’Œæˆ‘ä»¬ä¹‹å‰çš„jspé¡µé¢ä¸€æ ·ï¼Œé‡Œé¢æ¥æ”¶ä¸€ä¸‹Controller ä¼ é€’è¿‡æ¥çš„æ•°æ®</p><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Hello World!<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="xml">$</span><span class="hljs-template-variable">&#123;message&#125;</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h5 id="2-3-8ã€å¯åŠ¨é¡¹ç›®"><a href="#2-3-8ã€å¯åŠ¨é¡¹ç›®" class="headerlink" title="2.3.8ã€å¯åŠ¨é¡¹ç›®"></a>2.3.8ã€å¯åŠ¨é¡¹ç›®</h5><ol><li>å¯åŠ¨TomcatæŠ¥é”™ï¼ˆï¼Ÿï¼Ÿï¼Ÿæ˜¯å¦æ˜¯TomcatæŠ¥é”™å­˜ç–‘ï¼‰</li></ol><p>é”™è¯¯ä¿¡æ¯å¦‚ä¸‹ï¼š</p><p><img src="/2019/11/28/SpringMVC/clip_image002.jpg" alt="img"></p><p><img src="/2019/11/28/SpringMVC/Snipaste_2019-11-28_15-40-56.png"></p><p><img src="/2019/11/28/SpringMVC/Snipaste_2019-11-28_15-31-47.png"></p><p>æ²¡æ‰¾åˆ°<code>/WEB-INF/springmvc-servlet.xml</code>æ–‡ä»¶ORæ²¡æ‰¾åˆ°<code>/WEB-INF/DispatcherServlet-servlet.xml</code>æ–‡ä»¶ï¼Œå› ä¸ºåœ¨å¯åŠ¨TomcatæœåŠ¡å™¨çš„æ—¶å€™ä¼šåˆå§‹åŒ–SpringMVCä¸­çš„DispatcherServletï¼Œè€Œè¿™ä¸ªDispatcherServletä¼šæ ¹æ®é…ç½®æ–‡ä»¶åˆå§‹åŒ–Springå®¹å™¨ï¼Œé»˜è®¤é…ç½®æ–‡ä»¶è·¯å¾„ä¸ºï¼š**/WEB-INF/&lt;servlet-name&gt;-servlet.xml**ï¼ˆï¼Ÿï¼Ÿï¼Ÿè§£é‡Šå­˜ç–‘ï¼‰</p><p><img src="/2019/11/28/SpringMVC/clip_image004.jpg" alt="img"></p><ol start="2"><li>è§£å†³é—®é¢˜æ–¹å¼ï¼š</li></ol><p>1.å¯ä»¥æŠŠæˆ‘ä»¬çš„é…ç½®æ–‡ä»¶æ›´åä¸ºDispatcherServlet-servlet.xmlï¼Œç„¶åæ‹·è´åˆ°WEB-INFä¸­ã€‚</p><p><img src="/2019/11/28/SpringMVC/Snipaste_2019-11-28_15-43-48.png" alt="img"></p><p>2.ä¸€èˆ¬springçš„é…ç½®æ–‡ä»¶éƒ½åœ¨æ”¾åœ¨srcä¸­æˆ–è€…Resourcesæ–‡ä»¶å¤¹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹é…ç½®å‘Šè¯‰SpringMVCæˆ‘ä»¬çš„é…ç½®æ–‡ä»¶è·¯å¾„ã€‚<strong>ï¼ˆå¸¸è§åšæ³•ï¼‰</strong></p><p><img src="/2019/11/28/SpringMVC/Snipaste_2019-11-28_15-48-33.png" alt="img"></p><h5 id="2-3-9ã€æµ‹è¯•"><a href="#2-3-9ã€æµ‹è¯•" class="headerlink" title="2.3.9ã€æµ‹è¯•"></a>2.3.9ã€æµ‹è¯•</h5><p><img src="/2019/11/28/SpringMVC/Snipaste_2019-11-28_15-50-54.png"></p><h4 id="2-4ã€å°ç»“"><a href="#2-4ã€å°ç»“" class="headerlink" title="2.4ã€å°ç»“"></a>2.4ã€å°ç»“</h4><p>ä»¥ä¸Šæˆ‘ä»¬ï¼Œå®ç°äº†ä¸€ä¸ªä½¿ç”¨SpringMVCè¯·æ±‚å“åº”è¿‡ç¨‹ã€‚</p><p>æˆ‘ä»¬è‡ªå·±<strong>åˆ›å»ºäº†MyControllerç”¨äºæ¥æ”¶è¯·æ±‚å¹¶å¤„ç†</strong>ï¼Œé€šè¿‡<strong>ModelAndViewä¼ é€’äº†æ•°æ®åˆ°æˆ‘ä»¬çš„index.jsp</strong>ï¼Œ</p><p>è¿™ä¸ª<strong>jspå°†è§†å›¾é¡µé¢å“åº”ç»™ç”¨æˆ·</strong>ã€‚</p><p>å¦å¤–ï¼Œéœ€è¦æ³¨æ„çš„äº‹ï¼šé…ç½®æ–‡ä»¶æ—¶ä¸€å®šè¦ç»†å¿ƒ</p><p>æˆ‘ä»¬åœ¨web.xml ä¸­é…ç½®äº†å‰ç«¯æ§åˆ¶å™¨ï¼Œå¹¶æŒ‡å®šäº†Springçš„applicationContext.xml é…ç½®æ–‡ä»¶çš„ä½ç½®ã€‚</p><p><strong>åœ¨applicationContext.xmlï¼Œé€šè¿‡&lt;bean&gt;æ ‡ç­¾ï¼Œé…ç½®äº†æˆ‘ä»¬çš„Controllerã€‚</strong></p><h3 id="3ã€SpringMVCæ‰§è¡Œæµç¨‹"><a href="#3ã€SpringMVCæ‰§è¡Œæµç¨‹" class="headerlink" title="3ã€SpringMVCæ‰§è¡Œæµç¨‹"></a>3ã€SpringMVCæ‰§è¡Œæµç¨‹</h3><h4 id="3-1ã€å¼•å…¥"><a href="#3-1ã€å¼•å…¥" class="headerlink" title="3.1ã€å¼•å…¥"></a>3.1ã€å¼•å…¥</h4><p>åˆšåˆšæˆ‘ä»¬å®ç°äº†ä¸€ä¸ªä½¿ç”¨SpringMVCè¯·æ±‚å“åº”è¿‡ç¨‹ã€‚é‚£ä¸ºä»€ä¹ˆå¯ä»¥è¿™æ ·ç”¨å‘¢ï¼ŸSpringMVCçš„å®ç°åŸç†åˆæ˜¯æ€æ ·çš„å‘¢ï¼Ÿæˆ‘ä»¬éœ€è¦åˆ†æä¸€ä¸‹springMVCçš„æ¶æ„å›¾</p><h4 id="3-2ã€SpringMVCæ¡†æ¶ç»“æ„"><a href="#3-2ã€SpringMVCæ¡†æ¶ç»“æ„" class="headerlink" title="3.2ã€SpringMVCæ¡†æ¶ç»“æ„***"></a>3.2ã€SpringMVCæ¡†æ¶ç»“æ„***</h4><p><img src="/2019/11/28/SpringMVC/Snipaste_2019-11-28_10-29-33.png"></p><p><code>æ§åˆ¶å™¨(Controller) = å¤„ç†å™¨(Handler)</code></p><h4 id="3-3ã€SpringMVCå·¥ä½œæµç¨‹"><a href="#3-3ã€SpringMVCå·¥ä½œæµç¨‹" class="headerlink" title="3.3ã€SpringMVCå·¥ä½œæµç¨‹"></a>3.3ã€SpringMVCå·¥ä½œæµç¨‹</h4><h5 id="3-3-1ã€è¯¦ç»†æè¿°"><a href="#3-3-1ã€è¯¦ç»†æè¿°" class="headerlink" title="3.3.1ã€è¯¦ç»†æè¿°"></a>3.3.1ã€è¯¦ç»†æè¿°</h5><p>1.ç”¨æˆ·å‘é€è¯·æ±‚è‡³<code>å‰ç«¯æ§åˆ¶å™¨DispatcherServlet</code></p><p>2.DispatcherServletæ”¶åˆ°è¯·æ±‚è°ƒç”¨<code>HandlerMappingå¤„ç†å™¨æ˜ å°„å™¨</code>ã€‚</p><p>3.å¤„ç†å™¨æ˜ å°„å™¨æ ¹æ®è¯·æ±‚urlæ‰¾åˆ°å…·ä½“çš„å¤„ç†å™¨ï¼Œç”Ÿæˆå¤„ç†å™¨å¯¹è±¡åŠå¤„ç†å™¨æ‹¦æˆªå™¨(å¦‚æœæœ‰åˆ™ç”Ÿæˆ)ä¸€å¹¶è¿”å›ç»™DispatcherServletã€‚</p><p>4.DispatcherServleté€šè¿‡<code>HandlerAdapterå¤„ç†å™¨é€‚é…å™¨</code>è°ƒç”¨å¤„ç†å™¨</p><p>5.æ‰§è¡Œå¤„ç†å™¨(Controllerï¼Œä¹Ÿå«åç«¯æ§åˆ¶å™¨)ã€‚</p><p>6.Controlleræ‰§è¡Œå®Œæˆè¿”å›<code>ModelAndView</code></p><p>7.HandlerAdapterå°†Controlleræ‰§è¡Œç»“æœModelAndViewè¿”å›ç»™DispatcherServlet</p><p>8.DispatcherServletå°†ModelAndViewä¼ ç»™<code>ViewResloverè§†å›¾è§£æå™¨</code></p><p>9.ViewResloverè§£æåè¿”å›å…·ä½“View</p><p>10.DispatcherServletå¯¹Viewè¿›è¡Œæ¸²æŸ“è§†å›¾ï¼ˆå³å°†æ¨¡å‹æ•°æ®å¡«å……è‡³è§†å›¾ä¸­ï¼‰ã€‚</p><p>11.DispatcherServletå“åº”ç”¨æˆ·ã€‚</p><h5 id="3-3-2ã€ç®€æ˜“ç‰ˆæœ¬â€“é¢è¯•å›ç­”"><a href="#3-3-2ã€ç®€æ˜“ç‰ˆæœ¬â€“é¢è¯•å›ç­”" class="headerlink" title="3.3.2ã€ç®€æ˜“ç‰ˆæœ¬â€“é¢è¯•å›ç­”"></a>3.3.2ã€ç®€æ˜“ç‰ˆæœ¬â€“é¢è¯•å›ç­”</h5><ol><li><p>å®¢æˆ·ç«¯è¯·æ±‚æäº¤åˆ°DispatcherServlet</p></li><li><p>ç”±DispatcherServletæ§åˆ¶å™¨æŸ¥è¯¢HandlerMappingï¼Œæ‰¾åˆ°å¤„ç†è¯·æ±‚çš„Controllerã€‚</p></li><li><p>DispatcherServletå°†è¯·æ±‚è½¬å‘ç»™åˆ°Controllerã€‚</p></li><li><p>Controllerè°ƒç”¨ä¸šåŠ¡é€»è¾‘å¤„ç†åï¼Œè¿”å›ModelAndView</p></li><li><p>DispatcherServletæŸ¥è¯¢ViewResolverè§†å›¾è§£æå™¨ï¼Œæ‰¾åˆ°ModelAndViewæŒ‡å®šçš„è§†å›¾ã€‚</p></li><li><p>è§†å›¾è´Ÿè´£å°†å¡«å……äº†æ•°æ®çš„ç»“æœå“åº”åˆ°å®¢æˆ·ç«¯ã€‚</p></li></ol><h4 id="3-4ã€SpringMVCæ ¸å¿ƒå¯¹è±¡"><a href="#3-4ã€SpringMVCæ ¸å¿ƒå¯¹è±¡" class="headerlink" title="3.4ã€SpringMVCæ ¸å¿ƒå¯¹è±¡"></a>3.4ã€SpringMVCæ ¸å¿ƒå¯¹è±¡</h4><h5 id="3-4-1ã€DispatcherServletï¼šå‰ç«¯æ§åˆ¶å™¨"><a href="#3-4-1ã€DispatcherServletï¼šå‰ç«¯æ§åˆ¶å™¨" class="headerlink" title="3.4.1ã€DispatcherServletï¼šå‰ç«¯æ§åˆ¶å™¨"></a>3.4.1ã€DispatcherServletï¼šå‰ç«¯æ§åˆ¶å™¨</h5><p>ç”¨æˆ·è¯·æ±‚åˆ°è¾¾å‰ç«¯æ§åˆ¶å™¨ï¼Œå®ƒå°±ç›¸å½“äºmvcæ¨¡å¼ä¸­çš„Cï¼Œ<code>DispatcherServletæ˜¯æ•´ä¸ªæµç¨‹æ§åˆ¶çš„ä¸­å¿ƒï¼Œç”±å®ƒè°ƒç”¨å…¶å®ƒç»„ä»¶å¤„ç†ç”¨æˆ·çš„è¯·æ±‚</code>ï¼ŒDispatcherServletçš„å­˜åœ¨é™ä½äº†ç»„ä»¶ä¹‹é—´çš„è€¦åˆæ€§ã€‚</p><h5 id="3-4-2ã€HandlerMappingï¼šå¤„ç†å™¨æ˜ å°„å™¨"><a href="#3-4-2ã€HandlerMappingï¼šå¤„ç†å™¨æ˜ å°„å™¨" class="headerlink" title="3.4.2ã€HandlerMappingï¼šå¤„ç†å™¨æ˜ å°„å™¨"></a>3.4.2ã€HandlerMappingï¼šå¤„ç†å™¨æ˜ å°„å™¨</h5><p><code>HandlerMappingè´Ÿè´£æ ¹æ®ç”¨æˆ·è¯·æ±‚urlæ‰¾åˆ°æœ€åˆé€‚çš„å¤„ç†å™¨Handler.</code><br>æˆ‘ä»¬åˆšæ‰æ˜¯é€šè¿‡<strong>é…ç½®æ–‡ä»¶çš„æ–¹å¼</strong>ï¼š<br>å¤„ç†å™¨æ˜ å°„å™¨é€šè¿‡&lt;bean name=â€/xxxâ€&gt;æ³¨å†Œçš„æ§åˆ¶å™¨ã€‚æ§åˆ¶å™¨éœ€è¦å®ç°Controlleræ¥å£ã€‚<br>ä¹Ÿå¯ä»¥é€šè¿‡<strong>æ³¨è§£çš„æ–¹å¼</strong>å»å®ç°ï¼Œ<br>ç­‰ä¸€ä¸‹æˆ‘ä»¬ä»‹ç»å®ŒSpringMVCçš„æ ¸å¿ƒå¯¹è±¡åï¼Œä¼šå¸¦ç€å¤§å®¶é€šè¿‡å…¨æ³¨è§£çš„æ–¹å¼å®ç°ä¸€ä¸ªControllerã€‚</p><h5 id="3-4-3ã€HandlerAdapterï¼šå¤„ç†å™¨é€‚é…å™¨"><a href="#3-4-3ã€HandlerAdapterï¼šå¤„ç†å™¨é€‚é…å™¨" class="headerlink" title="3.4.3ã€HandlerAdapterï¼šå¤„ç†å™¨é€‚é…å™¨"></a>3.4.3ã€HandlerAdapterï¼šå¤„ç†å™¨é€‚é…å™¨</h5><p>æ”¯æŒå¤šç§ç±»å‹çš„å¤„ç†å™¨ï¼Œå¦‚ä½•æ‰§è¡Œæˆ‘ä»¬çš„æ§åˆ¶å™¨ï¼ˆControlleræœ‰å¤šç§ä¸åŒå®ç°æ–¹å¼ï¼‰ã€‚<br>SpringMVCçš„å¸¸ç”¨çš„å¤„ç†å™¨é€‚é…å™¨æœ‰ï¼š<br><code>HttpRequestHandlerAdapter</code> å¤„ç†å®ç°äº†<code>HttpRequestHandleræ¥å£</code>å¯¹åº”çš„å¤„ç†å™¨ã€‚<br><code>SimpleControllerHandlerAdapter</code> å¤„ç†å®ç°äº†<code>Controlleræ¥å£</code>å¯¹åº”çš„æ§åˆ¶å™¨ã€‚<br>è¯´æ˜ï¼š<br>ç›´æ¥é…ç½®å¤„ç†å™¨æ˜ å°„å™¨å’Œå¤„ç†å™¨é€‚é…å™¨æ¯”è¾ƒéº»çƒ¦ï¼ŒSpringMVC 3.2ä»¥ä¸Šä¼šè‡ªåŠ¨åŠ è½½é»˜è®¤çš„æ˜ å°„å™¨RequestMappingHandlerMappingå’Œ é»˜è®¤çš„é€‚é…å™¨RequestMappingHandlerAdapterã€‚</p><h5 id="3-4-4ã€Handlerï¼šå¤„ç†å™¨"><a href="#3-4-4ã€Handlerï¼šå¤„ç†å™¨" class="headerlink" title="3.4.4ã€Handlerï¼šå¤„ç†å™¨"></a>3.4.4ã€Handlerï¼šå¤„ç†å™¨</h5><p><code>Handleræ˜¯ç»§DispatcherServletå‰ç«¯æ§åˆ¶å™¨çš„åç«¯æ§åˆ¶å™¨</code>ï¼Œåœ¨DispatcherServletçš„æ§åˆ¶ä¸‹Handlerå¯¹å…·ä½“çš„ç”¨æˆ·è¯·æ±‚è¿›è¡Œå¤„ç†ã€‚<br>ç”±äºHandleræ¶‰åŠåˆ°å…·ä½“çš„ç”¨æˆ·ä¸šåŠ¡è¯·æ±‚ï¼Œæ‰€ä»¥ä¸€èˆ¬æƒ…å†µéœ€è¦ç¨‹åºå‘˜æ ¹æ®ä¸šåŠ¡éœ€æ±‚å¼€å‘Handlerã€‚<br>æˆ‘ä»¬åˆšæ‰åˆ›å»ºçš„ MyController å°±æ˜¯ä¸€ä¸ªå¤„ç†å™¨ã€‚</p><h5 id="3-4-5ã€ViewResolverï¼šè§†å›¾è§£æå™¨"><a href="#3-4-5ã€ViewResolverï¼šè§†å›¾è§£æå™¨" class="headerlink" title="3.4.5ã€ViewResolverï¼šè§†å›¾è§£æå™¨"></a>3.4.5ã€ViewResolverï¼šè§†å›¾è§£æå™¨</h5><p>View Resolverè´Ÿè´£å°†å¤„ç†ç»“æœç”ŸæˆViewè§†å›¾ï¼ŒViewResolveré¦–å…ˆæ ¹æ®é€»è¾‘è§†å›¾åè§£ææˆç‰©ç†è§†å›¾åå³å…·ä½“çš„é¡µé¢åœ°å€ï¼Œå†ç”ŸæˆViewè§†å›¾å¯¹è±¡ï¼Œæœ€åå¯¹Viewè¿›è¡Œæ¸²æŸ“å°†å¤„ç†ç»“æœé€šè¿‡é¡µé¢å±•ç¤ºç»™ç”¨æˆ·ã€‚<br>è§†å›¾è§£æå™¨ä½¿ç”¨SpringMVCæ¡†æ¶é»˜è®¤çš„<code>InternalResourceViewResolver</code>ï¼Œè¿™ä¸ªè§†å›¾è§£æå™¨æ”¯æŒJSPè§†å›¾è§£æã€‚é€šå¸¸æˆ‘ä»¬ä¼šé…ç½®å‰åç¼€æ¥å‡å°‘ä»£ç çš„é‡å¤ã€‚å¯ä»¥ä¿®æ”¹æˆ‘ä»¬çš„å…¥é—¨æ¡ˆä¾‹æ¥çœ‹ä¸€ä¸‹ï¼š<br>åœ¨applicationContext.xmlé…ç½®æ–‡ä»¶ä¸­é…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- é…ç½®è§†å›¾è§£æå™¨ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span>&gt;</span><br><span class="hljs-comment">&lt;!-- æŒ‡å®šè§†å›¾çš„å‰ç¼€ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;prefix&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;/&quot;</span>/&gt;</span><br><span class="hljs-comment">&lt;!-- æŒ‡å®šè§†å›¾çš„åç¼€ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;suffix&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;.jsp&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure><p><code>é€»è¾‘è§†å›¾åéœ€è¦åœ¨Controllerä¸­è¿”å›ModelAndViewæŒ‡å®š</code>ï¼Œæ¯”å¦‚é€»è¾‘è§†å›¾åä¸ºhelloï¼Œåˆ™æœ€ç»ˆè¿”å›çš„jspè§†å›¾åœ°å€æ˜¯ï¼š<code>å‰ç¼€+é€»è¾‘è§†å›¾å+åç¼€</code>ã€å³</p><p>â€œWEB-INF/jsp/hello.jspâ€</p><h5 id="3-4-6ã€Viewï¼šè§†å›¾"><a href="#3-4-6ã€Viewï¼šè§†å›¾" class="headerlink" title="3.4.6ã€Viewï¼šè§†å›¾"></a>3.4.6ã€Viewï¼šè§†å›¾</h5><p>SpringMVCæ¡†æ¶æä¾›äº†å¾ˆå¤šçš„Viewè§†å›¾ç±»å‹çš„æ”¯æŒï¼ŒåŒ…æ‹¬ï¼šjstlViewã€freemarkerViewç­‰ã€‚ç›®å‰æˆ‘ä»¬æœ€å¸¸ç”¨çš„è§†å›¾å°±æ˜¯jspã€‚</p><p>ä¸€èˆ¬æƒ…å†µä¸‹éœ€è¦é€šè¿‡é¡µé¢æ ‡ç­¾æˆ–é¡µé¢æ¨¡ç‰ˆæŠ€æœ¯å°†æ¨¡å‹æ•°æ®é€šè¿‡é¡µé¢å±•ç¤ºç»™ç”¨æˆ·ï¼Œéœ€è¦ç”±ç¨‹åºå‘˜æ ¹æ®ä¸šåŠ¡éœ€æ±‚å¼€å‘å…·ä½“çš„é¡µé¢ã€‚</p><h4 id="3-5ã€å°ç»“"><a href="#3-5ã€å°ç»“" class="headerlink" title="3.5ã€å°ç»“"></a>3.5ã€å°ç»“</h4><p>1ã€åœ¨SpringMVC çš„å…­ä¸ªæ ¸å¿ƒç»„ä»¶ä¸­ï¼ŒDispatcherServletå‰ç«¯æ§åˆ¶å™¨æ˜¯æ•´ä¸ªæµç¨‹æ§åˆ¶çš„ä¸­å¿ƒ<br>2ã€ä¸€èˆ¬æˆ‘ä»¬ç§°ï¼šå¤„ç†å™¨æ˜ å°„å™¨ã€å¤„ç†å™¨é€‚é…å™¨ã€è§†å›¾è§£æå™¨ ä¸ºSpringMVCçš„ä¸‰å¤§ç»„ä»¶ã€‚<br>3ã€éœ€è¦ç”¨æˆ·å¼€å‘çš„ç»„ä»¶æœ‰å¤„ç†å™¨(Controller)ã€è§†å›¾view</p><h3 id="4ã€Controllerå®ç°æ–¹å¼"><a href="#4ã€Controllerå®ç°æ–¹å¼" class="headerlink" title="4ã€Controllerå®ç°æ–¹å¼"></a>4ã€Controllerå®ç°æ–¹å¼</h3><h4 id="4-1ã€å¼•å…¥"><a href="#4-1ã€å¼•å…¥" class="headerlink" title="4.1ã€å¼•å…¥"></a>4.1ã€å¼•å…¥</h4><p>æˆ‘ä»¬åˆšåˆšåœ¨ä»‹ç»çš„SpringMVCçš„æ ¸å¿ƒæ—¶æœ‰æåˆ°ï¼Œå¤„ç†å™¨é€‚é…å™¨å¯ä»¥æ‰§è¡Œçš„Controllerå…¶å®æ˜¯æœ‰ä¸åŒçš„å®ç°æ–¹å¼ï¼Œåœ¨å…¥é—¨æ¡ˆä¾‹ä¸­æˆ‘ä»¬ä¹Ÿæ¼”ç¤ºäº†é€šè¿‡å®ç°Controlleræ¥å£çš„æ–¹å¼ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨çœ‹çœ‹å…¶ä»–å®ç°æ§åˆ¶å™¨çš„æ–¹å¼ï¼Œå¹¶é‡ç‚¹æŒæ¡ä¹Ÿæ˜¯Springæ¨èä½¿ç”¨çš„æ–¹å¼â€“å…¨æ³¨è§£å»å®ç°è‡ªå·±çš„Controllerã€‚</p><h4 id="4-2ã€ä¸‰ç§å®ç°æ–¹å¼"><a href="#4-2ã€ä¸‰ç§å®ç°æ–¹å¼" class="headerlink" title="4.2ã€ä¸‰ç§å®ç°æ–¹å¼"></a>4.2ã€ä¸‰ç§å®ç°æ–¹å¼</h4><h5 id="4-2-1ã€å®ç°Controlleræ¥å£"><a href="#4-2-1ã€å®ç°Controlleræ¥å£" class="headerlink" title="4.2.1ã€å®ç°Controlleræ¥å£"></a>4.2.1ã€å®ç°Controlleræ¥å£</h5><p>å°±æ˜¯æˆ‘ä»¬åˆšæ‰å…¥é—¨æ¡ˆä¾‹æ¼”ç¤ºçš„æ–¹å¼ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//å®ç°Controlleræ¥å£</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Controller01</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Controller</span></span>&#123;<br><span class="hljs-meta">@Override</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> ModelAndView <span class="hljs-title">handleRequest</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;<br>System.out.println(<span class="hljs-keyword">this</span>.getClass());<br><span class="hljs-comment">//æ¨¡å‹æ•°æ®å’Œè§†å›¾å¯¹è±¡</span><br>ModelAndView modelAndView = <span class="hljs-keyword">new</span> ModelAndView();<br>modelAndView.setViewName(<span class="hljs-string">&quot;/WEB-INF/controller.jsp&quot;</span>);<br><span class="hljs-keyword">return</span> modelAndView;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>é…ç½®ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">&lt;bean <span class="hljs-attribute">id</span>=<span class="hljs-string">&quot;/controller01.do&quot;</span> <span class="hljs-attribute">class</span>=<span class="hljs-string">&quot;cn.kongwei_liao.springmvc.controller.ControllerDemo1&quot;</span>&gt;&lt;/bean&gt;<br></code></pre></td></tr></table></figure><h5 id="4-2-2ã€å®ç°HttpRequestHandleræ¥å£"><a href="#4-2-2ã€å®ç°HttpRequestHandleræ¥å£" class="headerlink" title="4.2.2ã€å®ç°HttpRequestHandleræ¥å£"></a>4.2.2ã€å®ç°HttpRequestHandleræ¥å£</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//å®ç°äº†HttpRequestHandleræ¥å£</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Controller02</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">HttpRequestHandler</span></span>&#123;<br><span class="hljs-meta">@Override</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">handleRequest</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br>System.out.println(<span class="hljs-keyword">this</span>.getClass());<br>request.getRequestDispatcher(<span class="hljs-string">&quot;/WEB-INF/controller.jsp&quot;</span>).forward(request, response);<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>é…ç½®ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">&lt;bean <span class="hljs-attribute">id</span>=<span class="hljs-string">&quot;/controller02.do&quot;</span> <span class="hljs-attribute">class</span>=<span class="hljs-string">&quot;cn.itsource.springmvc.controller.ControllerDemo2&quot;</span>&gt;&lt;/bean&gt;<br></code></pre></td></tr></table></figure><h5 id="4-2-3ã€æ™®é€šç±»å’Œæ³¨è§£ï¼ˆå»ºè®®ä½¿ç”¨ï¼‰"><a href="#4-2-3ã€æ™®é€šç±»å’Œæ³¨è§£ï¼ˆå»ºè®®ä½¿ç”¨ï¼‰" class="headerlink" title="4.2.3ã€æ™®é€šç±»å’Œæ³¨è§£ï¼ˆå»ºè®®ä½¿ç”¨ï¼‰***"></a>4.2.3ã€æ™®é€šç±»å’Œæ³¨è§£ï¼ˆå»ºè®®ä½¿ç”¨ï¼‰***</h5><p>SpringMVCä¸­æ§åˆ¶å™¨å»ºè®®ä½¿ç”¨æ³¨è§£æ–¹å¼ï¼Œæ˜¯å®˜æ–¹æ¨èçš„ï¼Œå¤–é¢å…¬å¸ä¹Ÿæ˜¯å¤šä½¿ç”¨æ­¤æ–¹å¼ã€‚<br>è¿™ç§æ–¹å¼åªè¦é…ç½®SpringMVCå¼€å¯æ³¨è§£æ”¯æŒï¼Œç„¶ååœ¨ç±»ä¸Šæ·»åŠ æ³¨è§£å³å¯ã€‚</p><p>å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p><p>ç¬¬ä¸€æ­¥ï¼šSpringMVCå¼€å¯æ”¯æŒæ³¨è§£</p><p>åªè¦åœ¨ Spring é…ç½®æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹æ ‡ç­¾å³å¯å®ç°ï¼šå¤„ç†é€šè¿‡æ³¨è§£æ–¹å¼å®ç°çš„æ§åˆ¶å™¨ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- æ”¯æŒæ³¨è§£ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mvc:annotation-driven</span>/&gt;</span><br><br><span class="hljs-comment">&lt;!-- é…ç½®controlleråŒ…æ‰«æå™¨ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">&quot;cn.ant_nest.springmvc.controller&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">context:component-scan</span>&gt;</span><br></code></pre></td></tr></table></figure><p>è¯´æ˜ï¼š<br>åœ¨Springä¸­ä¸€èˆ¬é‡‡ç”¨<code>@RequestMapping</code>æ³¨è§£æ¥å®Œæˆæ˜ å°„å…³ç³»ï¼Œè¦æƒ³ä½¿@RequestMappingæ³¨è§£ç”Ÿæ•ˆå¿…é¡»å‘ä¸Šä¸‹æ–‡ä¸­æ³¨å†Œ<code>DefaultAnnotationHandlerMapping</code>å’Œä¸€ä¸ª<code>AnnotationMethodHandlerAdapter</code>å®ä¾‹ï¼Œè¿™ä¸¤ä¸ªå®ä¾‹åˆ†åˆ«åœ¨ç±»çº§åˆ«å’Œæ–¹æ³•çº§åˆ«å¤„ç†ã€‚</p><p>è€Œ<code>&lt;mvc:annotation-driven/&gt;</code>é…ç½®å¸®åŠ©æˆ‘ä»¬è‡ªåŠ¨å®Œæˆä¸Šè¿°ä¸¤ä¸ªå®ä¾‹çš„æ³¨å…¥ã€‚</p><p>ç¬¬äºŒæ­¥ï¼šåˆ›å»ºä¸€ä¸ªæ™®é€šJavaç±»<code>ä¸éœ€è¦å®ç°ä»»ä½•æ¥å£</code></p><p>åªéœ€è¦åœ¨ç±»ä¸Šæ·»åŠ @Controlleræ³¨è§£ï¼ŒæŠŠControlleräº¤ç”±Springç®¡ç†ã€‚</p><p>åœ¨æ–¹æ³•ä¸Šé¢æ·»åŠ @RequestMappingæ³¨è§£ï¼Œé‡Œé¢æŒ‡å®šè¯·æ±‚çš„urlã€‚ä½¿å¤„ç†å™¨æ˜ å°„å™¨å¯ä»¥æ‰¾åˆ°å®ƒã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AnnController</span> </span>&#123;<br><br><span class="hljs-meta">@RequestMapping(&quot;/anncon.do&quot;)</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">m01</span><span class="hljs-params">()</span></span>&#123;<br>System.out.println(<span class="hljs-string">&quot;AnnController!&quot;</span>);<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>@RequestMapping</strong> <strong>æ³¨è§£è¯´æ˜ï¼š</strong></p><p>@RequestMapping ä¸­å¸¸ç”¨çš„å±æ€§æœ‰ä»¥ä¸‹å‡ ä¸ª:</p><ol><li><p>value: é»˜è®¤å±æ€§ï¼Œè¯·æ±‚çš„å®é™…è·¯å¾„ï¼Œå¯ä»¥é…ç½®å¤šè·¯å¾„æ˜ å°„</p></li><li><p>method:è¯·æ±‚æ–¹æ³•çš„é™å®šã€‚å¯ä»¥é™å®š GET,POST,DELETE,PUT è¯·æ±‚æ–¹å¼</p></li></ol><p>value çš„ä½¿ç”¨ï¼š</p><p>â‘ ä½¿ç”¨åœ¨æ–¹æ³•ä¸Šï¼Œå¯ä»¥å°† url æ˜ å°„åˆ°æŒ‡å®šçš„æ–¹æ³•</p><p>â‘¡ä½¿ç”¨åœ¨ç±»ä¸Šï¼Œå¦‚æœè¯¥ controller çš„æ˜ å°„è·¯å¾„éƒ½æœ‰å›ºå®šçš„å‰ç¼€</p><p>/user/addUser.do</p><p>/user/deleteUser.do</p><p>/user/updateUser.do</p><p>ä¿®æ”¹ä¸€ä¸‹ AnnController æµ‹è¯•ä¸€ä¸‹</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@Controller</span><br><span class="hljs-variable">@RequestMapping</span>(<span class="hljs-string">&quot;/anncon&quot;</span>)<br>public class AnnController &#123;<br><br><span class="hljs-variable">@RequestMapping</span>(<span class="hljs-string">&quot;/m01.do&quot;</span>)<br>public void m01()&#123;<br><span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(<span class="hljs-string">&quot;Method01 !&quot;</span>);<br>&#125;<br><br>@<span class="hljs-selector-tag">RequestMapping</span>(<span class="hljs-string">&quot;/m02.do&quot;</span>)<br><span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">m02</span>()&#123;<br><span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(<span class="hljs-string">&quot;Method2 !&quot;</span>);<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç„¶åè®¿é—®è·¯å¾„ï¼š<a href="http://localhost:8080/demo/anncon/m01.do">http://localhost:8080/demo/anncon/m01.do</a></p><h4 id="4-3ã€å°ç»“"><a href="#4-3ã€å°ç»“" class="headerlink" title="4.3ã€å°ç»“"></a>4.3ã€å°ç»“</h4><p>å¸¸è§çš„Controllerå®ç°æ–¹å¼æœ‰ä¸‰ç§ï¼Œæˆ‘ä»¬<code>ä¸€èˆ¬é‡‡ç”¨å…¨æ³¨è§£çš„æ–¹å¼</code>ï¼š</p><p>éœ€è¦åœ¨Springé…ç½®æ–‡ä»¶ä¸­å¼€å¯å…¨æ³¨è§£æ”¯æŒï¼Œæ€ä¹ˆå¼€å¯ï¼Ÿ</p><p>ç„¶ååœ¨æˆ‘ä»¬è‡ªå·±çš„Controllerç±»ä¸Šæ·»åŠ @Controllerå’Œ@RequestMappingæ³¨è§£</p><h3 id="5ã€æ¥æ”¶å‚æ•°ï¼Œé¡µé¢è·³è½¬ï¼Œä¼ é€’å¯¹è±¡ï¼ˆServletåŸæ¥åšçš„äº‹æƒ…ï¼‰"><a href="#5ã€æ¥æ”¶å‚æ•°ï¼Œé¡µé¢è·³è½¬ï¼Œä¼ é€’å¯¹è±¡ï¼ˆServletåŸæ¥åšçš„äº‹æƒ…ï¼‰" class="headerlink" title="5ã€æ¥æ”¶å‚æ•°ï¼Œé¡µé¢è·³è½¬ï¼Œä¼ é€’å¯¹è±¡ï¼ˆServletåŸæ¥åšçš„äº‹æƒ…ï¼‰"></a>5ã€æ¥æ”¶å‚æ•°ï¼Œé¡µé¢è·³è½¬ï¼Œä¼ é€’å¯¹è±¡ï¼ˆServletåŸæ¥åšçš„äº‹æƒ…ï¼‰</h3><h4 id="5-1ã€å¼•å…¥"><a href="#5-1ã€å¼•å…¥" class="headerlink" title="5.1ã€å¼•å…¥"></a>5.1ã€å¼•å…¥</h4><p>æˆ‘ä»¬ç”¨è¿‡æ³¨è§£å®ç°äº†ä¸€ä¸ªControllerï¼Œä½†æ˜¯è¿™æ ·ä¸€ä¸ªControlleråˆå¦‚ä½•æ‰èƒ½å®ç°åŸæ¥Servletçš„ä½œç”¨å‘¢? è¦æ€æ ·æ‰èƒ½æ¥æ”¶å‚æ•°ï¼Œå®ç°é¡µé¢è·³è½¬å¹¶ä¸”ä¼ é€’æ•°æ®çš„å‘¢? ä¸‹é¢æˆ‘ä»¬æ¥ä¸€ä¸€ä»‹ç»ã€‚  </p><h4 id="5-2ã€æ¥æ”¶å‚æ•°çš„å››ç§æ–¹å¼"><a href="#5-2ã€æ¥æ”¶å‚æ•°çš„å››ç§æ–¹å¼" class="headerlink" title="5.2ã€æ¥æ”¶å‚æ•°çš„å››ç§æ–¹å¼"></a>5.2ã€æ¥æ”¶å‚æ•°çš„å››ç§æ–¹å¼</h4><h5 id="5-2-1ã€æ¥æ”¶æ™®é€šå‚æ•°"><a href="#5-2-1ã€æ¥æ”¶æ™®é€šå‚æ•°" class="headerlink" title="5.2.1ã€æ¥æ”¶æ™®é€šå‚æ•°"></a>5.2.1ã€æ¥æ”¶æ™®é€šå‚æ•°</h5><p>1ã€å½¢å‚åç§°ä¸ä¼ é€’å‚æ•°ä¸€è‡´</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">@Controller<br><span class="hljs-built_in">public</span> <span class="hljs-keyword">class</span> DataController &#123;<br>// æ™®é€šæ•°æ®æ¥æ”¶<br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * http://localhost:8080/demo/params01.do?name=admin&amp;age=24</span><br><span class="hljs-comment"> */</span><br>@RequestMapping(&quot;/params01.do&quot;)<br><span class="hljs-built_in">public</span> ModelAndView params01(String <span class="hljs-type">name</span>, <span class="hljs-type">Integer</span> age) &#123;<br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(&quot;name:&quot; + <span class="hljs-type">name</span>);<br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(&quot;age:&quot; + age);<br><span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>2ã€å½¢å‚åç§°ä¸ä¼ é€’å‚æ•°ä¸ä¸€è‡´</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * å¦‚æœä¼ è¿‡æ¥çš„åç§°ä¸æ¥æ”¶çš„åç§°ä¸ä¸€è‡´</span><br><span class="hljs-comment"> * http://localhost:8080/demo/params02?name=admin&amp;age=24</span><br><span class="hljs-comment"> */</span><br><span class="hljs-variable">@RequestMapping</span>(<span class="hljs-string">&quot;/params02.do&quot;</span>)<br>public ModelAndView params02(<span class="hljs-variable">@RequestParam</span>(<span class="hljs-string">&quot;name&quot;</span>) String username,Integer age)&#123;<br><span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(<span class="hljs-string">&quot;username:&quot;</span>+username);<br><span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(<span class="hljs-string">&quot;age:&quot;</span>+age);<br><span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">null</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="5-2-2ã€ä½¿ç”¨å¯¹è±¡æ¥æ”¶å‚æ•°"><a href="#5-2-2ã€ä½¿ç”¨å¯¹è±¡æ¥æ”¶å‚æ•°" class="headerlink" title="5.2.2ã€ä½¿ç”¨å¯¹è±¡æ¥æ”¶å‚æ•°"></a>5.2.2ã€ä½¿ç”¨å¯¹è±¡æ¥æ”¶å‚æ•°</h5><p>å‡†å¤‡å¯¹è±¡</p><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs lasso"><span class="hljs-keyword">public</span> class User &#123;<br><span class="hljs-keyword">private</span> Long id;<br><span class="hljs-keyword">private</span> <span class="hljs-built_in">String</span> name;<br><span class="hljs-keyword">private</span> <span class="hljs-built_in">Integer</span> age;<br><span class="hljs-keyword">private</span> <span class="hljs-built_in">Date</span> <span class="hljs-built_in">date</span>;<br><span class="hljs-comment">// å…¶å®ƒçš„getter,setterçœç•¥...</span><br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * http://localhost:8080/anncon/params03.do?name=admin&amp;age=24&amp;date=2018-12-09</span><br><span class="hljs-comment"> * æ³¨æ„ï¼šæ¥æ”¶æ—¥æœŸå¿…éœ€åœ¨</span><br><span class="hljs-comment"> * setæ—¶é—´å‰é…ç½®ï¼š@DateTimeFormat(pattern=&quot;yyyy-MM-dd&quot;)</span><br><span class="hljs-comment"> */</span><br>@RequestMapping(&quot;/params03.do&quot;)<br><span class="hljs-built_in">public</span> ModelAndView params03(<span class="hljs-keyword">User</span> <span class="hljs-keyword">user</span>) &#123;<br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(&quot;name:&quot; + <span class="hljs-keyword">user</span>.getName());<br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(&quot;age:&quot; + <span class="hljs-keyword">user</span>.getAge());<br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(&quot;date:&quot; + <span class="hljs-keyword">user</span>.getDate());<br><span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç‰¹åˆ«æ³¨æ„ï¼šåœ¨å¯¹è±¡éƒ¨åˆ†å’±ä»¬åŠ äº†ä¸€ä¸ªæ—¥æœŸï¼Œè€Œæ—¥æœŸæ ¼å¼çš„æ•°æ®æ¥æ”¶éœ€è¦åŠ ç›¸åº”çš„æ³¨è§£:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@DateTimeFormat</span>(pattern = <span class="hljs-string">&quot;yyyy-MM-dd&quot;</span>)<br><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">setDate</span>(<span class="hljs-params"><span class="hljs-built_in">Date</span> date</span>)</span> &#123;<br><span class="hljs-built_in">this</span>.date = date;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ³¨: @DateTimeFormatè¦ç”Ÿæ•ˆï¼Œåˆ™applicationContext.xml ä¸­ä¸€å®šè¦é…ç½®<strong>æ”¯æŒæ³¨è§£</strong>çš„é€‚é…å™¨å’Œæ˜ å°„å™¨</p><h5 id="5-2-3ã€HttpServletRequestæ¥æ”¶å‚æ•°ï¼ˆä¸å»ºè®®ä½¿ç”¨ï¼‰"><a href="#5-2-3ã€HttpServletRequestæ¥æ”¶å‚æ•°ï¼ˆä¸å»ºè®®ä½¿ç”¨ï¼‰" class="headerlink" title="5.2.3ã€HttpServletRequestæ¥æ”¶å‚æ•°ï¼ˆä¸å»ºè®®ä½¿ç”¨ï¼‰"></a>5.2.3ã€HttpServletRequestæ¥æ”¶å‚æ•°ï¼ˆä¸å»ºè®®ä½¿ç”¨ï¼‰</h5><p>SpringMVCæƒ³è¦æ‹¿Requestï¼ŒSessionï¼ŒResponseç›´æ¥åœ¨å‚æ•°ä¸­å†™å³å¯(å®ƒå¾ˆå¼ºå¤§)</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-comment">// ä½¿ç”¨HttpServletRequestæ¥æ”¶(ä¸å»ºè®®ä½¿ç”¨)</span><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * http://localhost:8080/demo/params04?name=admin&amp;age=24</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@RequestMapping(<span class="hljs-meta-string">&quot;/params04&quot;</span>)</span><br><span class="hljs-keyword">public</span> ModelAndView params04(HttpServletRequest request) &#123;<br>System.<span class="hljs-keyword">out</span>.println(request.getParameter(<span class="hljs-string">&quot;name&quot;</span>));<br>System.<span class="hljs-keyword">out</span>.println(request.getParameter(<span class="hljs-string">&quot;age&quot;</span>));<br><span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="5-2-4ã€URLåœ°å€æå–æ•°æ®ï¼ŒRESTfulé£æ ¼"><a href="#5-2-4ã€URLåœ°å€æå–æ•°æ®ï¼ŒRESTfulé£æ ¼" class="headerlink" title="5.2.4ã€URLåœ°å€æå–æ•°æ®ï¼ŒRESTfulé£æ ¼"></a>5.2.4ã€URLåœ°å€æå–æ•°æ®ï¼ŒRESTfulé£æ ¼</h5><p>ä»€ä¹ˆæ˜¯ RESTful</p><p><img src="/2019/11/28/SpringMVC/clip_image001.jpg" alt="img"></p><p>å½“ä½ åˆ°å…¬å¸è¢«è¦æ±‚å†™ä¸€ä¸ªæ¥å£æ—¶ï¼Œå¾ˆæœ‰å¯èƒ½å°±éœ€è¦æä¾›ä¸€ä¸ªç¬¦åˆRestfulé£æ ¼çš„æ–¹æ³•å®ç°ã€‚</p><p>æˆ‘ä»¬æ¥å¯¹æ¯”ä¼ ç»Ÿå¼€å‘å’Œ RESTful å¼€å‘ url çš„å¯¹æ¯”.</p><p>åŠŸèƒ½           ä¼ ç»Ÿå¼€å‘                                                          RESTful é£æ ¼å¼€å‘</p><p>â€‹                    url                                        æäº¤æ–¹å¼            url                      æäº¤æ–¹å¼</p><p>æ·»åŠ ç”¨æˆ·    /ems/addUser.do                 POST              /ems/user          POST</p><p>åˆ é™¤ç”¨æˆ·    /ems/deleteUser.do?id=1   GET/POST      /ems/user/1      DELETE</p><p>ä¿®æ”¹ç”¨æˆ·    /ems/updateUser.do           POST              /ems/user          PUT</p><p>æŸ¥è¯¢ç”¨æˆ·    /ems/getUser.do?id=1         GET                /ems/user/1       GET</p><p>ä»£ç å®ç°</p><p>æ ¹æ® RESTful é£æ ¼.æˆ‘ä»¬è¯·æ±‚çš„ url æ˜¯: <a href="http://localhost/params05/user/10">http://localhost/params05/user/10</a></p><p><strong>controller</strong> <strong>ä»£ç </strong></p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ¥æ”¶urlä¸­å‚æ•°çš„è¯·æ±‚,æ¥æ”¶ç”¨æˆ·è¯·æ±‚å‚æ•°å€¼ </span><br><span class="hljs-comment"> * http://localhost:8080/demo/params05/user/10</span><br><span class="hljs-comment"> */</span><br><span class="hljs-variable">@RequestMapping</span>(<span class="hljs-string">&quot;/params05/user/&#123;id&#125;&quot;</span>)<br>public ModelAndView params05(<span class="hljs-variable">@PathVariable</span>(<span class="hljs-string">&quot;id&quot;</span>)Long id)&#123;<br><span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(id);<br><span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">null</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¯´æ˜ï¼š</p><p>å°†åŠ¨æ€çš„ id ç”¨ { } æ‹¬èµ·æ¥.</p><p>åœ¨æ–¹æ³•çš„å½¢å‚å‰,ä½¿ç”¨**@PathVariable** æ³¨è§£, å°† url ä¸Šçš„å‚æ•°å°è£…åˆ°å½¢å‚ä¸Šï¼›</p><p>å¦‚æœæ˜¯ä½¿ç”¨domainå¯¹è±¡æ¥æ”¶å‚æ•°è¿™é‡Œæ— éœ€ @pathVariableæ³¨è§£ï¼›</p><p>å¦‚æœæ˜¯<code>å¤šå‚æ•° url</code> åº”ä¸º: /user/{name}/{id}, å¤šä¸ªå‚æ•°ä½¿ç”¨ / éš”å¼€ï¼›</p><p>å¯¹äºå¤šå‚æ•°çš„ urlï¼Œåœ¨æ–¹æ³•çš„å½¢å‚ä¸Šä½¿ç”¨å¤šä¸ªå‚æ•°æ¥æ”¶, æ¯ä¸ªå‚æ•°å‰éƒ½è¦æ·»@PathVariable ã€‚</p><p><strong>web.xml</strong> <strong>ä¿®æ”¹</strong></p><p>å› ä¸ºä¹‹å‰æˆ‘ä»¬é…ç½®çš„å‰ç«¯æ§åˆ¶å™¨æ‹¦æˆªè§„åˆ™æ˜¯*.doï¼Œæ‰€ä»¥ RESTful é£æ ¼çš„è¯·æ±‚æ— æ³•è¿›å…¥ controllerï¼Œå› æ­¤æˆ‘ä»¬å°†æ‹¦æˆªè§„åˆ™ä¿®æ”¹ä¸º / </p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>DispatcherServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br></code></pre></td></tr></table></figure><p>è¯´æ˜ï¼š</p><p>&lt;url-pattern&gt; é…ç½®çš„3ç§æ–¹å¼ </p><table><thead><tr><th>&lt;url-pattern&gt;</th><th>é…ç½®è¯´æ˜</th></tr></thead><tbody><tr><td>/*</td><td>ä¸ç”¨ï¼Œæ‰€æœ‰éƒ½ä¼šæ‹¦æˆªï¼ŒåŒ…æ‹¬jsp</td></tr><tr><td>*.do</td><td>é…ç½®ç®€å•,å¯ä»¥è®¿é—®é™æ€èµ„æº(ä¸æ”¯æŒRESTfulé£æ ¼)</td></tr><tr><td>/</td><td>é…ç½®å¤æ‚ä¸€ç‚¹ï¼Œæ”¯æŒRESTfulé£æ ¼</td></tr></tbody></table><p><strong>Springé…ç½®ï¼šå¯¹é™æ€èµ„æºæ”¾è¡Œ</strong></p><p>å½“æ‹¦æˆªè§„åˆ™ä¿®æ”¹ä¹‹åï¼Œé™æ€èµ„æºï¼ˆ.html, .css, .jsâ€¦ï¼‰ä¹Ÿä¼šè¢«æ‹¦æˆªï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯¹é™æ€èµ„æºæ”¾è¡Œ. </p><p>åœ¨ applicationContext.xml æ–‡ä»¶ä¸­ æ˜ å°„å™¨å’Œé€‚é…å™¨çš„åé¢ è¿›è¡Œæ”¾è¡Œé…ç½®.</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- è‡ªåŠ¨åŠ è½½æ¨èçš„å¤„ç†å™¨æ˜ å°„å™¨å’Œé€‚é…å™¨ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mvc:annotation-driven</span>/&gt;</span><br><br><span class="hljs-comment">&lt;!-- é™æ€èµ„æºæ”¾è¡Œ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mvc:default-servlet-handler</span>/&gt;</span><br></code></pre></td></tr></table></figure><p>ç°åœ¨æˆ‘ä»¬å°±å¯ä»¥æ­£å¸¸è®¿é—®é™æ€èµ„æºäº†ï¼Œå†æ¬¡è®¿é—®<a href="http://localhost:8080/anncon/data.html%E8%AF%95%E8%AF%95">http://localhost:8080/anncon/data.htmlè¯•è¯•</a></p><h5 id="5-2-5ã€å°ç»“"><a href="#5-2-5ã€å°ç»“" class="headerlink" title="5.2.5ã€å°ç»“"></a>5.2.5ã€å°ç»“</h5><p>1.æ¥æ”¶å‚æ•°å¸¸ç”¨æ–¹å¼ï¼ˆæ™®é€šå‚æ•°ï¼Œå¯¹è±¡æ¥æ”¶ï¼ŒURLåœ°å€æå–ï¼‰</p><p>2.å½¢å‚åç§°ä¸ä¸€è‡´ä½¿ç”¨@RequestParam(â€œnameâ€)String username </p><p>3.æ—¥æœŸæ¥æ”¶å‚æ•°æ·»åŠ æ ‡ç­¾@DateTimeFormat(setXxx)</p><p>4.URLåœ°å€æå– /è·¯å¾„/{id} @PathVariable(â€œidâ€)Long id</p><h4 id="5-3ã€é¡µé¢è·³è½¬"><a href="#5-3ã€é¡µé¢è·³è½¬" class="headerlink" title="5.3ã€é¡µé¢è·³è½¬"></a>5.3ã€é¡µé¢è·³è½¬</h4><h5 id="5-3-1ã€è·³è½¬æ–¹å¼"><a href="#5-3-1ã€è·³è½¬æ–¹å¼" class="headerlink" title="5.3.1ã€è·³è½¬æ–¹å¼"></a>5.3.1ã€è·³è½¬æ–¹å¼</h5><p>å’±ä»¬å­¦ä¹ çš„è·³è½¬æ–¹å¼æœ‰ä¸¤ç§: é‡å®šå‘ä¸è¯·æ±‚è½¬å‘</p><table><thead><tr><th></th><th>è¯·æ±‚è½¬å‘(forward)</th><th>é‡å®šå‘(redirect)</th></tr></thead><tbody><tr><td>è®¿é—®WEB-INF</td><td><strong>âˆš</strong></td><td><strong>X</strong></td></tr><tr><td>requestä¼ å‚</td><td><strong>âˆš</strong></td><td><strong>X</strong></td></tr><tr><td>å…¨æ–°è¯·æ±‚(URLå˜åŒ–)</td><td><strong>X</strong></td><td><strong>âˆš</strong></td></tr><tr><td>è®¿é—®å¤–ç½‘</td><td><strong>X</strong></td><td><strong>âˆš</strong></td></tr></tbody></table><p><strong>è¯·æ±‚è½¬å‘(forward)</strong></p><p>ä¸Šé¢4ä¸ªæ¡ˆä¾‹éƒ½æ˜¯è½¬å‘ï¼Œè½¬å‘çš„å€¼éƒ½æ˜¯æ”¾åˆ°requestè¯·æ±‚ä½œç”¨åŸŸï¼Œä¸‹ä¸€ä¸ªé¡µé¢å¯ä»¥å–å‡ºï¼ŒUrlåœ°å€ä¸ä¼šæ”¹å˜</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * ä½¿ç”¨è¯·æ±‚è½¬å‘</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@RequestMapping</span>(<span class="hljs-string">&quot;/path06&quot;</span>)<br><span class="hljs-keyword">public</span> <span class="hljs-built_in">String</span> <span class="hljs-function"><span class="hljs-title">data5</span>(<span class="hljs-params">Model model,HttpSession session</span>)</span>&#123;<br>model.addAttribute(<span class="hljs-string">&quot;test&quot;</span>,<span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>);<span class="hljs-comment">//å¯ä»¥å–å‡ºæ•°æ®</span><br>session.setAttribute(<span class="hljs-string">&quot;testsession&quot;</span>, <span class="hljs-string">&quot;å¼ ä¸‰session&quot;</span>);<span class="hljs-comment">//å¯ä»¥å–å‡ºæ•°æ®</span><br><span class="hljs-keyword">return</span> <span class="hljs-string">&quot;forward:/data.jsp&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>é‡å®šå‘(redirect)</strong></p><p>é‡å®šå‘å°±æ˜¯å‘å‡ºä¸€ä¸ªå…¨æ–°çš„è¯·æ±‚ï¼Œå¦‚æœæŠŠå€¼æ”¾åˆ°requestè¯·æ±‚ï¼Œä¸‹ä¸€ä¸ªé¡µé¢ä¸èƒ½å–å‡º</p><p>å¦‚æœæŠŠå€¼æ”¾åˆ°sessionä¼šè¯è¯·æ±‚ï¼Œä¸‹ä¸€ä¸ªé¡µé¢å¯ä»¥å–å‡º</p><p>Urlåœ°å€ä¼šæ”¹å˜</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * ä½¿ç”¨é‡å®šå‘</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@RequestMapping</span>(<span class="hljs-string">&quot;/path07&quot;</span>)<br><span class="hljs-keyword">public</span> <span class="hljs-built_in">String</span> <span class="hljs-function"><span class="hljs-title">data6</span>(<span class="hljs-params">Model model,HttpSession session</span>)</span>&#123;<br>model.addAttribute(<span class="hljs-string">&quot;test&quot;</span>,<span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>);<span class="hljs-comment">//ä¸å¯ä»¥å–å‡ºæ•°æ®</span><br>session.setAttribute(<span class="hljs-string">&quot;testsession&quot;</span>, <span class="hljs-string">&quot;å¼ ä¸‰session&quot;</span>);<span class="hljs-comment">//å¯ä»¥å–å‡ºæ•°æ®</span><br><span class="hljs-keyword">return</span> <span class="hljs-string">&quot;redirect:/data.jsp&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="5-3-2ã€å‰ç¼€ä½¿ç”¨"><a href="#5-3-2ã€å‰ç¼€ä½¿ç”¨" class="headerlink" title="5.3.2ã€å‰ç¼€ä½¿ç”¨"></a>5.3.2ã€å‰ç¼€ä½¿ç”¨</h5><p>è§†å›¾åè§„åˆ™</p><p>â€‹    ä¸å†™å‰ç¼€é»˜è®¤ä¸º â€œè½¬å‘â€ </p><p>â€‹    è§†å›¾åå­—ç¬¦ä¸²å‰ç¼€:</p><p>â€‹        forward:/xxx.jsp é‡‡ç”¨è½¬å‘ã€‚</p><p>â€‹        redirect:/xxx.jsp é‡‡ç”¨é‡å®šå‘ã€‚</p><p>æˆ‘ä»¬ä¹‹å‰å·²ç»é…ç½®äº†è§†å›¾è§£æå™¨ï¼Œæˆ‘ä»¬å†æ¬¡çœ‹ä¸€ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- é…ç½®è§†å›¾è§£æå™¨ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span>&gt;</span><br><span class="hljs-comment">&lt;!-- æŒ‡å®šè§†å›¾çš„å‰ç¼€ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;prefix&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;/&quot;</span>/&gt;</span><br><span class="hljs-comment">&lt;!-- æŒ‡å®šè§†å›¾çš„åç¼€ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;suffix&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;.jsp&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure><p>æœ‰æ²¡æœ‰å‘ç°ä»€ä¹ˆæ ·çš„é—®é¢˜ï¼Ÿ</p><p>è¯´æ˜ï¼š</p><p><code>ä½¿ç”¨äº†forword æˆ– redirectè·³è½¬é¡µé¢é€šè¿‡è§†å›¾è§£æå™¨æ—¶æ˜¯ä¸ä¼šæ·»åŠ å‰ç¼€å’Œåç¼€çš„ã€‚</code></p><p>ç”¨äºè·³è½¬åˆ°ä¸€äº›ç‰¹æ®Šçš„è·¯å¾„ï¼Œæ¯”å¦‚ï¼š</p><p>é¡µé¢ä¸åœ¨å‰ç¼€è·¯å¾„ä¸­çš„æƒ…å†µï¼ˆæˆ–è€…é¡µé¢è·¯å¾„ä¸æ˜¯ä»¥.jspä¸ºåç¼€ï¼‰</p><h4 id="5-4ã€ä¼ é€’å‚æ•°çš„å››ç§æ–¹å¼"><a href="#5-4ã€ä¼ é€’å‚æ•°çš„å››ç§æ–¹å¼" class="headerlink" title="5.4ã€ä¼ é€’å‚æ•°çš„å››ç§æ–¹å¼"></a>5.4ã€ä¼ é€’å‚æ•°çš„å››ç§æ–¹å¼</h4><h5 id="5-4-1ã€é€šç”¨ModelAndViewæ–¹å¼"><a href="#5-4-1ã€é€šç”¨ModelAndViewæ–¹å¼" class="headerlink" title="5.4.1ã€é€šç”¨ModelAndViewæ–¹å¼"></a>5.4.1ã€é€šç”¨ModelAndViewæ–¹å¼</h5><p>åœ¨ä¹‹å‰çš„å…¥é—¨æ¡ˆä¾‹é‡Œæˆ‘ä»¬å°±çœ‹åˆ°è¿‡äº†ModelAndViewï¼Œä½¿ç”¨ModelAndView å¯ä»¥ä¼ é€’å‚æ•°åˆ°æŒ‡å®šè§†å›¾è·¯å¾„ã€‚æˆ‘ä»¬å†æ¥è¯•ä¸€ä¸‹ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs awk">/**<br> * é€šè¿‡ModelAndView ä¼ é€’æ™®é€šå‚æ•°<br> * http:<span class="hljs-regexp">//</span>localhost:<span class="hljs-number">8080</span><span class="hljs-regexp">/demo/</span>data01<br> * @return<br> */<br>@RequestMapping(<span class="hljs-string">&quot;/data01&quot;</span>)<br>public ModelAndView data01()&#123;<br><span class="hljs-regexp">//</span>åˆ›å»ºModelAndView.ç”¨äºä¿å­˜æ•°æ®å’Œè§†å›¾<br>ModelAndView mav = new ModelAndView();<br><span class="hljs-regexp">//</span>è®¾ç½®æ•°æ®åˆ°æ¨¡å‹ä¸­<br>mav.addObject(<span class="hljs-string">&quot;message&quot;</span>, <span class="hljs-string">&quot;ModelAndView ä¼ é€’æ•°æ®&quot;</span>);<br><span class="hljs-regexp">//</span>è®¾ç½®jspè§†å›¾<br>mav.setViewName(<span class="hljs-string">&quot;view&quot;</span>);<br><span class="hljs-regexp">//</span>è¿”å›æ¨¡å‹è§†å›¾<br>return mav;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥ä¼ é€’JavaBean å¯¹è±¡ï¼š</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * é€šè¿‡ModelAndView ä¼ é€’å¯¹è±¡å‚æ•°</span><br><span class="hljs-comment"> * @return</span><br><span class="hljs-comment"> */</span><br>@<span class="hljs-constructor">RequestMapping(<span class="hljs-string">&quot;/data02&quot;</span>)</span><br>public ModelAndView data02<span class="hljs-literal">()</span>&#123;<br><span class="hljs-comment">//åˆ›å»ºModelAndView.ç”¨äºä¿å­˜æ•°æ®å’Œè§†å›¾</span><br>ModelAndView mav = <span class="hljs-keyword">new</span> <span class="hljs-constructor">ModelAndView()</span>;<br><span class="hljs-comment">//è®¾ç½®æ•°æ®åˆ°æ¨¡å‹ä¸­</span><br>User user = <span class="hljs-keyword">new</span> <span class="hljs-constructor">User()</span>;<br>user.set<span class="hljs-constructor">Name(<span class="hljs-string">&quot;æå››&quot;</span>)</span>;<br>mav.add<span class="hljs-constructor">Object(<span class="hljs-params">user</span>)</span>;<br><br><span class="hljs-comment">//è®¾ç½®jspè§†å›¾</span><br>mav.set<span class="hljs-constructor">ViewName(<span class="hljs-string">&quot;view&quot;</span>)</span>;<br><span class="hljs-comment">//è¿”å›æ¨¡å‹è§†å›¾</span><br>return mav;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¯´æ˜ï¼š<br>æˆ‘ä»¬<code>ä½¿ç”¨addObjectï¼ˆString attributeName,Object attributeValueï¼‰æ–¹æ³•æ·»åŠ è¿”å›çš„æ•°æ®</code>ã€‚<br>å½“ä½¿ç”¨Objectç±»å‹çš„å¯¹è±¡çš„æ—¶å€™ï¼Œå¿…é¡»æŒ‡å®šä¸€ä¸ªåå­—ã€‚<code>ModelAndViewï¼Œä¹Ÿå¯ä»¥æ¥æ”¶æ²¡æœ‰æ˜æ˜¾åå­—çš„å¯¹è±¡</code>ï¼ŒåŸå› åœ¨äºModelAndViewï¼Œå°†è°ƒç”¨<code>springè‡ªå·±å®šä¹‰çš„æ–¹æ³•Conventions.getVariableName()æ¥ä¸ºè¿™ä¸ªmodelç”Ÿæˆä¸€ä¸ªåå­—</code>ã€‚æ˜¾ç„¶ï¼Œ<code>å¯¹modelè€Œè¨€ï¼Œåå­—æ˜¯å¿…é¡»çš„</code>ã€‚<br>Conventions.getVariableName()ç”Ÿæˆåå­—çš„è§„åˆ™æ˜¯<code>ï¼ˆä½¿ç”¨å¯¹è±¡çš„ç±»åçš„å°å†™æ¨¡å¼æ¥ä½œmodelåå­—ï¼Œèƒ½å¤Ÿç”±ELè¡¨è¾¾å¼è®¿é—®ï¼‰</code>ã€‚å½“è¿™ä¸ªmodelæ˜¯é›†åˆæˆ–æ•°ç»„çš„æ—¶å€™ï¼Œä½¿ç”¨é›†åˆçš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„ç±»ååŠ sæ¥ä½œmodelçš„åå­—ã€‚</p><h5 id="5-4-2ã€ä½¿ç”¨Modelæ–¹å¼ï¼ˆå¼ºçƒˆå»ºè®®ä½¿ç”¨ï¼‰"><a href="#5-4-2ã€ä½¿ç”¨Modelæ–¹å¼ï¼ˆå¼ºçƒˆå»ºè®®ä½¿ç”¨ï¼‰" class="headerlink" title="5.4.2ã€ä½¿ç”¨Modelæ–¹å¼ï¼ˆå¼ºçƒˆå»ºè®®ä½¿ç”¨ï¼‰"></a>5.4.2ã€ä½¿ç”¨Modelæ–¹å¼ï¼ˆå¼ºçƒˆå»ºè®®ä½¿ç”¨ï¼‰</h5><p>ä½¿ç”¨ModelAndView éœ€è¦æˆ‘ä»¬è‡ªå·±åˆ›å»ºå¯¹è±¡ï¼Œå…¶å®ä½“è´´çš„SpringMVCæ¡†æ¶å·²ç»ä¸ºæˆ‘ä»¬çš„å‚æ•°ä¼ é€’å‡†å¤‡äº†ä¸“é—¨çš„å¯¹è±¡ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * é€šè¿‡Model ä¼ é€’å‚æ•°</span><br><span class="hljs-comment"> * SpringMVCä¼šè‡ªåŠ¨åˆ›å»ºæ¨¡å‹å¯¹è±¡ä¼ åˆ°æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦å¾€è¿™ä¸ªæ¨¡å‹å¯¹è±¡ä¸­æ·»åŠ æ•°æ®å³å¯</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@return </span>è¿”å›å€¼ä¸ºå­—ç¬¦ä¸²,æˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºå°±æ˜¯ä¸€ä¸ªè§†å›¾çš„åç§°(å†™è·¯å¾„å³å¯)</span><br><span class="hljs-comment"> */</span> <br><span class="hljs-meta">@RequestMapping</span>(<span class="hljs-string">&quot;/data03&quot;</span>)<br><span class="hljs-keyword">public</span> <span class="hljs-built_in">String</span> <span class="hljs-function"><span class="hljs-title">data03</span>(<span class="hljs-params">Model model</span>)</span>&#123;<br><span class="hljs-comment">//æ·»åŠ æ•°æ®</span><br>model.addAttribute(<span class="hljs-string">&quot;message&quot;</span>,<span class="hljs-string">&quot;Model ä¼ é€’æ•°æ®&quot;</span>);<br><br>    <span class="hljs-comment">//æŒ‡å®šè¦è¿”å›çš„è§†å›¾è·¯å¾„</span><br><span class="hljs-keyword">return</span> <span class="hljs-string">&quot;view&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>ModelAndViewä¸ Modelçš„åŒºåˆ«ï¼š</p><p>Modelæ˜¯æ¯æ¬¡è¯·æ±‚ä¸­éƒ½å­˜åœ¨çš„é»˜è®¤å‚æ•°ï¼›</p><p>åˆ©ç”¨å…¶addAttribute()æ–¹æ³•å³å¯å°†æœåŠ¡å™¨çš„å€¼ä¼ é€’åˆ°jspé¡µé¢ä¸­</p><p>ModelAndViewåŒ…å«modelå’Œviewä¸¤éƒ¨åˆ†</p><p>ä½¿ç”¨æ—¶éœ€è¦è‡ªå·±å®ä¾‹åŒ–ï¼Œåˆ©ç”¨ModelMapç”¨æ¥ä¼ å€¼ï¼Œä¹Ÿå¯ä»¥è®¾ç½®viewçš„åç§°</p><p><code>æ— è®ºæ˜¯ModelAndViewè¿˜æ˜¯Modelä¼ é€’çš„å¯¹è±¡æ˜¯å­˜æ”¾åœ¨request Scopeä¸­çš„</code>ï¼Œå¦‚æœéœ€è¦åœ¨sessionåŸŸä¸­ä¼ å€¼ï¼Œå¯ä»¥åƒModelä¸€æ ·åœ¨æ–¹æ³•çš„å‚æ•°é‡Œæ·»åŠ Session å³å¯ä½¿ç”¨ã€‚</p><h5 id="5-4-3ã€HttpServletRequestæ–¹å¼ï¼ˆä¸å»ºè®®ä½¿ç”¨ï¼‰"><a href="#5-4-3ã€HttpServletRequestæ–¹å¼ï¼ˆä¸å»ºè®®ä½¿ç”¨ï¼‰" class="headerlink" title="5.4.3ã€HttpServletRequestæ–¹å¼ï¼ˆä¸å»ºè®®ä½¿ç”¨ï¼‰"></a>5.4.3ã€HttpServletRequestæ–¹å¼ï¼ˆä¸å»ºè®®ä½¿ç”¨ï¼‰</h5><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs aspectj"><span class="hljs-comment">//é€šè¿‡requestå¯¹è±¡è¿›è¡Œæ•°æ®ä¼ é€’(ä¸å»ºè®®ä½¿ç”¨)</span><br><span class="hljs-meta">@RequestMapping</span>(<span class="hljs-string">&quot;/data04&quot;</span>)<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> data04(HttpServletRequest request,HttpServletResponse response) <br><span class="hljs-keyword">throws</span> ServletException, IOException&#123;<br>request.setAttribute(<span class="hljs-string">&quot;message&quot;</span>, <span class="hljs-string">&quot;HttpServletRequest&quot;</span>);<br><span class="hljs-comment">//éœ€è¦è‡ªå·±æŒ‡å®šè·³è½¬é¡µé¢çš„å…¨è·¯å¾„</span><br>request.getRequestDispatcher(<span class="hljs-string">&quot;/WEB-INF/jsp/view.jsp&quot;</span>).forward(request, response);<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="5-4-4ã€è¿”å›å€¼ä¼ å‚ï¼ˆä¸å»ºè®®ä½¿ç”¨ï¼‰"><a href="#5-4-4ã€è¿”å›å€¼ä¼ å‚ï¼ˆä¸å»ºè®®ä½¿ç”¨ï¼‰" class="headerlink" title="5.4.4ã€è¿”å›å€¼ä¼ å‚ï¼ˆä¸å»ºè®®ä½¿ç”¨ï¼‰"></a>5.4.4ã€è¿”å›å€¼ä¼ å‚ï¼ˆä¸å»ºè®®ä½¿ç”¨ï¼‰</h5><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * è¿”å›å€¼å°±æ˜¯æ¨¡å‹æ•°æ®</span><br><span class="hljs-comment"> * SpringMVCä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªModelAndViewå¯¹è±¡ï¼Œå¹¶ä¸”è°ƒç”¨æ·»åŠ æ¨¡å‹ mdv.addObject(&quot;user&quot;, user);</span><br><span class="hljs-comment"> * å¹¶ä¸”è®¿é—®è·¯å¾„å°±æ˜¯è§†å›¾çš„åç§° /data05  mdv.setViewName(&quot;/data05&quot;);</span><br><span class="hljs-comment"> * åœ¨è¿™é‡Œæˆ‘ä»¬çš„è§†å›¾è‚¯å®šæ²¡æœ‰data05çš„è§†å›¾ï¼Œæ‰€ä»¥ä¼šæŠ¥ä¸€ä¸ªé”™</span><br><span class="hljs-comment"> * @return</span><br><span class="hljs-comment"> */</span><br>@RequestMapping(&quot;/data05&quot;)<br><span class="hljs-built_in">public</span> <span class="hljs-keyword">User</span> data05()&#123;<br><span class="hljs-keyword">User</span> <span class="hljs-keyword">user</span> = <span class="hljs-built_in">new</span> <span class="hljs-keyword">User</span>();<br><span class="hljs-keyword">user</span>.setName(&quot;å¼ ä¸‰&quot;);<br><span class="hljs-keyword">return</span> <span class="hljs-keyword">user</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸è¦ä½¿ç”¨è¿™ç§æ–¹å¼ç›´æ¥è¿”å›å¯¹è±¡ï¼Œ<code>è¿™ç§æ–¹å¼åªç”¨åœ¨æˆ‘ä»¬éœ€è¦æŠŠè¿”å›çš„å¯¹è±¡è½¬æ¢ä¸ºJsonæ•°æ®æ—¶</code>ã€‚</p><h4 id="5-5ã€å°ç»“"><a href="#5-5ã€å°ç»“" class="headerlink" title="5.5ã€å°ç»“"></a>5.5ã€å°ç»“</h4><ol><li><p>æ¥æ”¶å’Œä¼ å‚çš„4ç§æ–¹å¼ï¼Œå»ºè®®ä½¿ç”¨Modelæ–¹å¼</p></li><li><p>è·³è½¬æ—¶å¯ä»¥é…ç½®è§†å›¾è§£æå™¨ViewResolverï¼Œç®€åŒ–å’±ä»¬çš„è·³è½¬</p></li><li><p>æ€ä¹ˆä½¿ç”¨ä¸åŒçš„æ–¹å¼(forward/redirect)è¿›è¡Œè·³è½¬ ?</p></li></ol><h3 id="6ã€SpringMVCè¿”å›JSON"><a href="#6ã€SpringMVCè¿”å›JSON" class="headerlink" title="6ã€SpringMVCè¿”å›JSON"></a>6ã€SpringMVCè¿”å›JSON</h3><h4 id="6-1ã€å¼•å…¥"><a href="#6-1ã€å¼•å…¥" class="headerlink" title="6.1ã€å¼•å…¥"></a>6.1ã€å¼•å…¥</h4><h5 id="6-1-1-ä»€ä¹ˆæ˜¯jsonï¼Ÿ"><a href="#6-1-1-ä»€ä¹ˆæ˜¯jsonï¼Ÿ" class="headerlink" title="6.1.1.  ä»€ä¹ˆæ˜¯jsonï¼Ÿ"></a>6.1.1.  ä»€ä¹ˆæ˜¯jsonï¼Ÿ</h5><p>jsonæ˜¯ä¸€ç§è½»é‡çº§çš„å‰ç«¯åç«¯ä»¥åŠç½‘ç»œä¼ è¾“çš„æ•°æ®äº¤æ¢æ ¼å¼ï¼Œå°±æ˜¯ä¸€ä¸²å­—ç¬¦ä¸²ã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨åç«¯å¯ä»¥æŠŠä¸€ä¸ªå¤æ‚å¯¹è±¡ï¼Œé€šè¿‡jsonæ¥è½¬æ¢æˆç‰¹å®šçš„å­—ç¬¦ä¸²ä¼ åˆ°å‰ç«¯å»ã€‚</p><p>ç®€å•çš„ï¼švar json = â€˜{â€œnameâ€:â€å¼ ä¸‰â€ , â€œageâ€:18 }â€™;</p><h5 id="6-1-2-ä¸ºä»€ä¹ˆè¦ç”¨jsonï¼Ÿ"><a href="#6-1-2-ä¸ºä»€ä¹ˆè¦ç”¨jsonï¼Ÿ" class="headerlink" title="6.1.2.  ä¸ºä»€ä¹ˆè¦ç”¨jsonï¼Ÿ"></a>6.1.2.  ä¸ºä»€ä¹ˆè¦ç”¨jsonï¼Ÿ</h5><p>jsonæœ¬æ¥æ˜¯javascripté‡Œçš„å†…å®¹ï¼Œæœ‰æ—¶åç«¯è¦ä¼ å„ç§å„æ ·çš„æ•°æ®æ ¼å¼æ¥é€‚åº”å‰ç«¯ï¼Œæ‰€ä»¥éœ€è¦ç”¨åˆ°jsonæ¥è½¬æ¢ï¼Œç”¨å®ƒæ¥è¡¨ç¤ºå„ç§å„æ ·å¤æ‚çš„æ•°æ®ã€‚ </p><p>æ•°æ®æ ¼å¼æ¯”è¾ƒç®€å•, æ˜“äºè¯»å†™, èƒ½å¤Ÿç›´æ¥ä¸ºæœåŠ¡å™¨ç«¯ä»£ç ä½¿ç”¨, å¤§å¤§ç®€åŒ–äº†æœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯çš„ä»£ç å¼€å‘é‡, ä¸”æ˜“äºç»´æŠ¤ï¼Œè¯­è¨€æ— å…³ã€‚</p><h4 id="6-2ã€å®ç°"><a href="#6-2ã€å®ç°" class="headerlink" title="6.2ã€å®ç°"></a>6.2ã€å®ç°</h4><h5 id="6-2-1ã€æ­¥éª¤åˆ†æ"><a href="#6-2-1ã€æ­¥éª¤åˆ†æ" class="headerlink" title="6.2.1ã€æ­¥éª¤åˆ†æ"></a>6.2.1ã€æ­¥éª¤åˆ†æ</h5><p>è¦æˆ‘ä»¬çš„Controllerè¿”å›ä¸€ä¸ªJsonå­—ç¬¦ä¸²éå¸¸ç®€å•ï¼Œåªéœ€è¦æ·»åŠ ç›¸å…³jaråŒ…ï¼Œå¹¶åœ¨æˆ‘ä»¬çš„æ–¹æ³•ä¸Šæ·»åŠ @ResponseBodyæ³¨è§£å³å¯ã€‚</p><h5 id="6-2-2ã€æ·»åŠ jacksonçš„jaråŒ…"><a href="#6-2-2ã€æ·»åŠ jacksonçš„jaråŒ…" class="headerlink" title="6.2.2ã€æ·»åŠ jacksonçš„jaråŒ…"></a>6.2.2ã€æ·»åŠ jacksonçš„jaråŒ…</h5><p>å¦‚æœéœ€è¦ springMVC æ”¯æŒ jsonï¼Œå¿…é¡»åŠ å…¥ json çš„å¤„ç† jar åŒ…ã€‚</p><p>springmvc å®˜æ–¹ä½¿ç”¨ Jackson è¿™ä¸ª jar åŒ…ï¼š</p><blockquote><p>jackson-annotations-2.5.0.jar</p><p>jackson-core-2.5.0.jar</p><p>jackson-databind-2.5.0.jar</p></blockquote><h5 id="6-2-3ã€JsonController"><a href="#6-2-3ã€JsonController" class="headerlink" title="6.2.3ã€JsonController"></a>6.2.3ã€JsonController</h5><p>åœ¨æ–¹æ³•ä¸Šæ·»åŠ  @ResponseBody  æ³¨è§£ï¼Œæ–¹æ³•è¿”å›çš„å­—ç¬¦ä¸²ä¸åœ¨è¢«ViewResolverè§£æä¸ºè§†å›¾ï¼Œè€Œæ˜¯ç›´æ¥è¿”å›å­—ç¬¦ä¸²ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">JsonController</span> </span>&#123;<br><span class="hljs-meta">@RequestMapping(&quot;/json1&quot;)</span><br><span class="hljs-meta">@ResponseBody</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">json1</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;<br><span class="hljs-keyword">return</span> <span class="hljs-string">&quot;xxx&quot;</span>;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å¦‚æœæ–¹æ³•çš„è¿”å›å€¼æ˜¯å¤æ‚å¯¹è±¡ï¼Œ@ResponseBodyæ³¨è§£ï¼Œä¼šå°† java å¯¹è±¡è§£æä¸º json æ ¼å¼çš„å­—ç¬¦ä¸²è¿”å›</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@RequestMapping</span>(<span class="hljs-string">&quot;/json2&quot;</span>)<br><span class="hljs-variable">@ResponseBody</span><br>public User json3() throws Exception &#123;<br><span class="hljs-comment">//è¿”å›ä¸€ä¸ªjavaBean å¯¹è±¡</span><br><span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">User</span>(<span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>, <span class="hljs-number">20</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>å½“è¿”å›çš„å¯¹è±¡æœ‰Dateæ—¥æœŸæ ¼å¼çš„å±æ€§ï¼š</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@RequestMapping</span>(<span class="hljs-string">&quot;/json03&quot;</span>)<br><span class="hljs-variable">@ResponseBody</span><br>public User json4() throws Exception &#123;<br><span class="hljs-comment">// è¿”å›ä¸€ä¸ªjavaBean å¯¹è±¡</span><br><span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">User</span>(<span class="hljs-string">&quot;æå››&quot;</span>, <span class="hljs-number">20</span>, new Date());<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="/2019/11/28/SpringMVC/Snipaste_2019-11-28_14-28-37.png"></p><p>é»˜è®¤è¿”å›çš„æ—¥æœŸæ ¼å¼ä¸ºæ—¶é—´æˆ³ï¼Œè€Œåœ¨å‰å°æˆ‘ä»¬å¸Œæœ›æ˜¾ç¤ºå‡ºæŒ‡å®šè§„åˆ™çš„æ—¥æœŸå­—ç¬¦ä¸²ã€‚</p><p>è§£å†³ï¼šåœ¨æ—¥æœŸgetå±æ€§å­—æ®µä¸Šï¼Œæ·»åŠ ä¸€ä¸ªæ ¼å¼åŒ–æ³¨è§£</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@JsonFormat</span>(pattern=<span class="hljs-string">&quot;yyyy-MM-dd&quot;</span>,timezone=<span class="hljs-string">&quot;GMT+8&quot;</span>)<br><span class="hljs-keyword">public</span> <span class="hljs-built_in">Date</span> <span class="hljs-function"><span class="hljs-title">getDate</span>(<span class="hljs-params"></span>)</span> &#123;<br><span class="hljs-keyword">return</span> date;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="6-3ã€æ³¨æ„äº‹é¡¹"><a href="#6-3ã€æ³¨æ„äº‹é¡¹" class="headerlink" title="6.3ã€æ³¨æ„äº‹é¡¹"></a>6.3ã€æ³¨æ„äº‹é¡¹</h4><h5 id="6-3-1ã€å¤„ç†æœ‰ä¹±ç çš„é—®é¢˜"><a href="#6-3-1ã€å¤„ç†æœ‰ä¹±ç çš„é—®é¢˜" class="headerlink" title="6.3.1ã€å¤„ç†æœ‰ä¹±ç çš„é—®é¢˜"></a>6.3.1ã€å¤„ç†æœ‰ä¹±ç çš„é—®é¢˜</h5><p>å½“è¿”å›çš„Jsonå­—ç¬¦ä¸²å¯¹åƒä¸­æœ‰ä¸­æ–‡ï¼Œä¼šå‡ºç°ä¹±ç é—®é¢˜ï¼šè¿™æ—¶æˆ‘ä»¬å¯ä»¥ä¸ºSpringMVCçš„é€‚é…å™¨é…ç½®ä¸€ä¸ªå­—ç¬¦è½¬æ¢å™¨ï¼Œè®¾ç½®æ”¯æŒçš„åª’ä½“ç±»å‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">mvc:annotation-driven</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mvc:message-converters</span> <span class="hljs-attr">register-defaults</span>=<span class="hljs-string">&quot;true&quot;</span>&gt;</span><br><span class="hljs-comment">&lt;!-- æ³¨å†Œä¸€ä¸ªè½¬æ¢å™¨ è§£å†³è¿”å›çš„jsonä¹±ç é—®é¢˜ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.springframework.http.converter.StringHttpMessageConverter&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;supportedMediaTypes&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">list</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>text/html;charset=UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>application/json;charset=UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">list</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mvc:message-converters</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mvc:annotation-driven</span>&gt;</span><br></code></pre></td></tr></table></figure><p>æ³¨ï¼šå¦‚æœä¸ä½¿ç”¨æ³¨è§£é©±åŠ¨&lt;mvc:annotation-driven /&gt;ï¼Œé…ç½®åª’ä½“ç±»å‹çš„è¯ï¼Œå°±éœ€è¦ç»™å¤„ç†å™¨é€‚é…å™¨é…ç½®jsonè½¬æ¢å™¨ï¼š</p><p>åœ¨springmvc.xmlé…ç½®æ–‡ä»¶ä¸­ï¼Œéœ€è¦ç»™å¤„ç†å™¨é€‚é…å™¨æ³¨å…¥jsonè½¬æ¢å™¨ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--å¤„ç†å™¨é€‚é…å™¨ --&gt;</span><br>&lt;bean<br>class=&quot;org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter&quot;&gt;<br><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;messageConverters&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">list</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.springframework.http.converter.json.</span></span><br><span class="hljs-tag"><span class="hljs-string">MappingJackson2HttpMessageConverter&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">list</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="6-4ã€å°ç»“"><a href="#6-4ã€å°ç»“" class="headerlink" title="6.4ã€å°ç»“"></a>6.4ã€å°ç»“</h4><p>Jsonæ ¼å¼çš„æ•°æ®ï¼Œæ˜¯ä¸€ç§éå¸¸å¸¸è§ä¸”æœ‰ç”¨çš„æ•°æ®æ ¼å¼ï¼Œä»Šå¤©æˆ‘ä»¬åªæ˜¯ç®€å•çš„å­¦ä¹ äº†é€šè¿‡@ResponseBody æ³¨è§£è¿”å›Jsonæ ¼å¼çš„æ•°æ®ï¼Œå¹¶è§£å†³äº†å“åº”ç±»å‹ä¸åŒ¹é…ï¼Œä¸­æ–‡ä¹±ç ï¼Œæ—¥æœŸè½¬æ¢çš„é—®é¢˜ã€‚åé¢æˆ‘ä»¬å­¦ä¹ äº†Ajaxåè¿˜ä¼šå­¦ä¹ å¦‚æœæ¥æ”¶Jsonæ ¼å¼çš„æ•°æ®ï¼Œå¸Œæœ›å¤§å®¶å¤šå¤šé‡è§†ã€‚</p><h3 id="7ã€SpringMVCæ‹¦æˆªå™¨-æ”¾åˆ°é¡¹ç›®ä¸­åšç™»å½•æ‹¦æˆª"><a href="#7ã€SpringMVCæ‹¦æˆªå™¨-æ”¾åˆ°é¡¹ç›®ä¸­åšç™»å½•æ‹¦æˆª" class="headerlink" title="7ã€SpringMVCæ‹¦æˆªå™¨-æ”¾åˆ°é¡¹ç›®ä¸­åšç™»å½•æ‹¦æˆª"></a>7ã€SpringMVCæ‹¦æˆªå™¨-æ”¾åˆ°é¡¹ç›®ä¸­åšç™»å½•æ‹¦æˆª</h3><h4 id="7-1ã€å¼•å…¥"><a href="#7-1ã€å¼•å…¥" class="headerlink" title="7.1ã€å¼•å…¥"></a>7.1ã€å¼•å…¥</h4><p>æˆ‘ä»¬çš„é¡¹ç›®éœ€è¦å®ç°ç™»å½•æ‹¦æˆªçš„åŠŸèƒ½ï¼Œä¹‹å‰æˆ‘ä»¬å­¦ä¹ Servletçš„æ—¶å€™ï¼Œä¹Ÿä½¿ç”¨è¿‡Filteræ‹¦æˆªå™¨ï¼ŒSpringMVC æä¾›äº†å¤„ç†å™¨æ‹¦æˆªå™¨ç±»ï¼Œå®ƒçš„ä½¿ç”¨æ¯”Filteræ›´æ–¹ä¾¿ï¼Œæ›´å¼ºå¤§ï¼Œç”¨äºå¯¹å¤„ç†å™¨è¿›è¡Œé¢„å¤„ç†å’Œåå¤„ç†ã€‚</p><h4 id="7-2ã€å®ç°"><a href="#7-2ã€å®ç°" class="headerlink" title="7.2ã€å®ç°"></a>7.2ã€å®ç°</h4><p>å®ç°SpringMVCæ‹¦æˆªå™¨éå¸¸ç®€å•ï¼Œæˆ‘ä»¬åªéœ€è¦å®ç°æ‹¦æˆªå™¨æ¥å£ï¼Œå¹¶æŠŠä»–é…ç½®åˆ°SpringMVCçš„é…ç½®æ–‡ä»¶ä¸­å³å¯ã€‚</p><h5 id="7-2-1ã€å®šä¹‰æ‹¦æˆªå™¨"><a href="#7-2-1ã€å®šä¹‰æ‹¦æˆªå™¨" class="headerlink" title="7.2.1ã€å®šä¹‰æ‹¦æˆªå™¨"></a>7.2.1ã€å®šä¹‰æ‹¦æˆªå™¨</h5><p>è‡ªå®šä¹‰ç±»å®ç° <strong>HandlerInterceptor</strong> æ¥å£.è¿”å›å€¼å†³å®šæ˜¯å¦æ”¾è¡Œ.</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-built_in">public</span> <span class="hljs-keyword">class</span> Interceptor1 implements HandlerInterceptor &#123;<br>@Override<br><span class="hljs-built_in">public</span> <span class="hljs-type">boolean</span> preHandle(HttpServletRequest request, HttpServletResponse response, <span class="hljs-keyword">Object</span> <span class="hljs-keyword">handler</span>)<br>throws <span class="hljs-keyword">Exception</span> &#123;<br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(&quot;æ‹¦æˆªå™¨ 1----æ–¹æ³•æ‰§è¡Œä¹‹å‰&quot;);<br><span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;<br>&#125;<br><br>@Override<br><span class="hljs-built_in">public</span> <span class="hljs-type">void</span> postHandle(HttpServletRequest request, HttpServletResponse response, <span class="hljs-keyword">Object</span> <span class="hljs-keyword">handler</span>,<br>ModelAndView modelAndView) throws <span class="hljs-keyword">Exception</span> &#123;<br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(&quot;æ‹¦æˆªå™¨ 1----æ–¹æ³•æ‰§è¡Œä¹‹å&quot;);<br>&#125;<br><br>@Override<br><span class="hljs-built_in">public</span> <span class="hljs-type">void</span> afterCompletion(HttpServletRequest request, HttpServletResponse response, <span class="hljs-keyword">Object</span> <span class="hljs-keyword">handler</span>, <span class="hljs-keyword">Exception</span> ex)<br>throws <span class="hljs-keyword">Exception</span> &#123;<br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(&quot;æ‹¦æˆªå™¨ 1----é¡µé¢æ¸²æŸ“å®Œæˆ&quot;);<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å¤åˆ¶ä¸€ä»½,å‘½åä¸º HandlerInterceptor2,è¾“å‡ºå†…å®¹åšç›¸åº”çš„ä¿®æ”¹.</p><h5 id="7-2-2ã€æ‹¦æˆªå™¨é…ç½®"><a href="#7-2-2ã€æ‹¦æˆªå™¨é…ç½®" class="headerlink" title="7.2.2ã€æ‹¦æˆªå™¨é…ç½®"></a>7.2.2ã€æ‹¦æˆªå™¨é…ç½®</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- é…ç½®æ‹¦æˆªå™¨ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mvc:interceptors</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mvc:interceptor</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mvc:mapping</span> <span class="hljs-attr">path</span>=<span class="hljs-string">&quot;/**&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.istourec.interceptor.Interceptor1&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mvc:interceptor</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">mvc:interceptor</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mvc:mapping</span> <span class="hljs-attr">path</span>=<span class="hljs-string">&quot;/**&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.istourec.interceptor.Interceptor2&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mvc:interceptor</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mvc:interceptors</span>&gt;</span><br></code></pre></td></tr></table></figure><h5 id="7-2-3ã€æ‹¦æˆªå™¨æ‹¦æˆªæµç¨‹"><a href="#7-2-3ã€æ‹¦æˆªå™¨æ‹¦æˆªæµç¨‹" class="headerlink" title="7.2.3ã€æ‹¦æˆªå™¨æ‹¦æˆªæµç¨‹"></a>7.2.3ã€æ‹¦æˆªå™¨æ‹¦æˆªæµç¨‹</h5><ol><li>æ‹¦æˆªå™¨ 1 æ”¾è¡Œ</li></ol><p><img src="/2019/11/28/SpringMVC/clip_image003.jpg" alt="img"></p><ol start="2"><li>æ‹¦æˆªå™¨ 1 ä¸æ”¾è¡Œ</li></ol><p><img src="/2019/11/28/SpringMVC/clip_image005.jpg" alt="img"></p><ol start="3"><li>æ‹¦æˆªå™¨ 2 ä¸æ”¾è¡Œ</li></ol><p><img src="/2019/11/28/SpringMVC/clip_image007.jpg" alt="img"></p><p>è¯´æ˜ï¼š</p><ol><li><p>preHandle æŒ‰æ‹¦æˆªå™¨å®šä¹‰é¡ºåºè°ƒç”¨</p></li><li><p>postHandler æŒ‰æ‹¦æˆªå™¨å®šä¹‰é€†åºè°ƒç”¨</p></li><li><p>afterCompletion æŒ‰æ‹¦æˆªå™¨å®šä¹‰é€†åºè°ƒç”¨</p></li><li><p>postHandler åœ¨æ‹¦æˆªå™¨é“¾å†…æ‰€æœ‰æ‹¦æˆªå™¨è¿”æˆåŠŸè°ƒç”¨</p></li><li><p>afterCompletion åªæœ‰ preHandle è¿”å› true æ‰è°ƒç”¨</p></li></ol><h5 id="7-2-4ã€æŒ‡å®šä¸æ‹¦æˆªæ–¹æ³•"><a href="#7-2-4ã€æŒ‡å®šä¸æ‹¦æˆªæ–¹æ³•" class="headerlink" title="7.2.4ã€æŒ‡å®šä¸æ‹¦æˆªæ–¹æ³•"></a>7.2.4ã€æŒ‡å®šä¸æ‹¦æˆªæ–¹æ³•</h5><p>é€šè¿‡&lt;mvc:exclude-mapping/&gt;æ ‡ç­¾æŒ‡å®šä¸æ‹¦æˆªçš„æ–¹æ³•.ä½†æ˜¯é…ç½®è¿™ä¸ªæ ‡ç­¾ä¹‹å‰,å¿…é¡»é…ç½®&lt;mvc:mapping /&gt;æ ‡ç­¾.</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- é…ç½®æ‹¦æˆªå™¨ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mvc:interceptors</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mvc:interceptor</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mvc:mapping</span> <span class="hljs-attr">path</span>=<span class="hljs-string">&quot;/**&quot;</span> /&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">mvc:exclude-mapping</span> <span class="hljs-attr">path</span>=<span class="hljs-string">&quot;/userList&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.istourec.interceptor.Interceptor1&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mvc:interceptor</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">mvc:interceptor</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mvc:mapping</span> <span class="hljs-attr">path</span>=<span class="hljs-string">&quot;/**&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.istourec.interceptor.Interceptor2&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mvc:interceptor</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mvc:interceptors</span>&gt;</span><br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬è®¿é—® localhost:8082/userList.è§‚å¯Ÿæ‹¦æˆªå™¨æ‰§è¡Œæ•ˆæœ.</p><p><img src="/2019/11/28/SpringMVC/clip_image009.jpg" alt="img"></p><p>ä»…æœ‰æ‹¦æˆªå™¨ 2 æ‰§è¡Œäº†.</p><h4 id="7-3ã€å°ç»“"><a href="#7-3ã€å°ç»“" class="headerlink" title="7.3ã€å°ç»“"></a>7.3ã€å°ç»“</h4><p>ä»¥ä¸Šï¼Œæˆ‘ä»¬å­¦ä¹ äº†æ‹¦æˆªå™¨çš„é…ç½®ä¸æ”¾è¡Œæ–¹å¼ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„ç™»å½•æ‹¦æˆªå¯ä»¥è¿™æ ·æ¥å®ç°ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- é…ç½®æ‹¦æˆªå™¨ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mvc:interceptors</span>&gt;</span><br> <span class="hljs-tag">&lt;<span class="hljs-name">mvc:interceptor</span>&gt;</span><br> <span class="hljs-tag">&lt;<span class="hljs-name">mvc:mapping</span> <span class="hljs-attr">path</span>=<span class="hljs-string">&quot;/**&quot;</span>/&gt;</span><br> <span class="hljs-tag">&lt;<span class="hljs-name">mvc:exclude-mapping</span> <span class="hljs-attr">path</span>=<span class="hljs-string">&quot;/toLogin&quot;</span>/&gt;</span><br> <span class="hljs-tag">&lt;<span class="hljs-name">mvc:exclude-mapping</span> <span class="hljs-attr">path</span>=<span class="hljs-string">&quot;/loginUser&quot;</span>/&gt;</span><br> <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;cn.itsourece.ems.interceptor.MyLogInterceptor&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br> <span class="hljs-tag">&lt;/<span class="hljs-name">mvc:interceptor</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mvc:interceptors</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="8ã€æ–‡ä»¶ä¸Šä¼ -æ”¾åˆ°é¡¹ç›®ä¸­å»åš"><a href="#8ã€æ–‡ä»¶ä¸Šä¼ -æ”¾åˆ°é¡¹ç›®ä¸­å»åš" class="headerlink" title="8ã€æ–‡ä»¶ä¸Šä¼ -æ”¾åˆ°é¡¹ç›®ä¸­å»åš"></a>8ã€æ–‡ä»¶ä¸Šä¼ -æ”¾åˆ°é¡¹ç›®ä¸­å»åš</h3><h4 id="8-1ã€å¼•å…¥"><a href="#8-1ã€å¼•å…¥" class="headerlink" title="8.1ã€å¼•å…¥"></a>8.1ã€å¼•å…¥</h4><p>åŸå§‹çš„Servletæ–‡ä»¶ä¸Šä¼ ï¼Œéœ€è¦å¯¹æäº¤çš„æµå¯¹è±¡è¿›è¡Œå¤åˆ¶çš„è§£æï¼ŒSpringMVC ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªæ–¹ä¾¿çš„è§£æå™¨å¯ä»¥æ–¹ä¾¿çš„å®ç°æ–‡ä»¶ä¸Šä¼ ã€‚å¦‚æœè¦å®ç°æ–‡ä»¶çš„ä¸Šä¼ ,åªè¦åœ¨ spring-mvc.xml ä¸­æ³¨å†Œç›¸åº”çš„ MultipartResolver å³å¯ã€‚</p><h4 id="8-2ã€å®ç°æ­¥éª¤"><a href="#8-2ã€å®ç°æ­¥éª¤" class="headerlink" title="8.2ã€å®ç°æ­¥éª¤"></a>8.2ã€å®ç°æ­¥éª¤</h4><h5 id="8-2-1ã€åŠ å…¥æ–‡ä»¶ä¸Šä¼ æ‰€éœ€ä¾èµ–çš„jaråŒ…"><a href="#8-2-1ã€åŠ å…¥æ–‡ä»¶ä¸Šä¼ æ‰€éœ€ä¾èµ–çš„jaråŒ…" class="headerlink" title="8.2.1ã€åŠ å…¥æ–‡ä»¶ä¸Šä¼ æ‰€éœ€ä¾èµ–çš„jaråŒ…"></a>8.2.1ã€åŠ å…¥æ–‡ä»¶ä¸Šä¼ æ‰€éœ€ä¾èµ–çš„jaråŒ…</h5><p><img src="/2019/11/28/SpringMVC/image-20191128144118730.png" alt="image-20191128144118730"></p><h5 id="8-2-2ã€é…ç½®ä¸Šä¼ è§£æå™¨"><a href="#8-2-2ã€é…ç½®ä¸Šä¼ è§£æå™¨" class="headerlink" title="8.2.2ã€é…ç½®ä¸Šä¼ è§£æå™¨"></a>8.2.2ã€é…ç½®ä¸Šä¼ è§£æå™¨</h5><p>åœ¨ springmvc.xml ä¸­é…ç½®ä¸Šä¼ æ–‡ä»¶çš„è§£æå™¨CommonsMultipartResolver</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- æ–‡ä»¶ä¸Šä¼ è§£æå™¨ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;multipartResolver&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- è®¾ç½®æ–‡ä»¶å¤§å°é™åˆ¶,å•ä½ B --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;maxUploadSize&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;5242880&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure><h5 id="8-2-3ã€é¡µé¢è°ƒæ•´"><a href="#8-2-3ã€é¡µé¢è°ƒæ•´" class="headerlink" title="8.2.3ã€é¡µé¢è°ƒæ•´"></a>8.2.3ã€é¡µé¢è°ƒæ•´</h5><p>ä¿®æ”¹è¡¨å•æäº¤çš„ enctype ä¸º multipart/form-data å¤šéƒ¨åˆ†è¡¨å•.</p><p><img src="/2019/11/28/SpringMVC/image-20191128144301227.png" alt="image-20191128144301227"></p><h5 id="8-2-4ã€ä¸Šä¼ æ–‡ä»¶"><a href="#8-2-4ã€ä¸Šä¼ æ–‡ä»¶" class="headerlink" title="8.2.4ã€ä¸Šä¼ æ–‡ä»¶"></a>8.2.4ã€ä¸Šä¼ æ–‡ä»¶</h5><p>åœ¨ Controller æ–¹æ³•çš„å½¢å‚ä¸­,ä½¿ç”¨ MultipartFile æ¥æ¥æ”¶ä¸Šä¼ çš„æ–‡ä»¶.æ³¨æ„æ–¹æ³•å½¢å‚çš„åç§°è¦ä¸è¡¨å•æäº¤çš„ name ä¿æŒä¸€è‡´</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯</span><br><span class="hljs-comment"> */</span><br>@<span class="hljs-constructor">RequestMapping(<span class="hljs-string">&quot;/update&quot;</span>)</span><br>public String update(User user, MultipartFile file, Model model) throws Exception &#123;<br><span class="hljs-comment">// ----------------------- å‡†å¤‡ä¸Šä¼ å›¾ç‰‡ ----------------------</span><br><span class="hljs-comment">// 1. å‡†å¤‡ä¸Šä¼ çš„æ–‡ä»¶å</span><br>String uuid = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">UUID</span>.</span></span>random<span class="hljs-constructor">UUID()</span>.<span class="hljs-keyword">to</span><span class="hljs-constructor">String()</span>.replace<span class="hljs-constructor">All(<span class="hljs-string">&quot;-&quot;</span>, <span class="hljs-string">&quot;&quot;</span>)</span>;<br>String extension = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">FilenameUtils</span>.</span></span>get<span class="hljs-constructor">Extension(<span class="hljs-params">file</span>.<span class="hljs-params">getOriginalFilename</span>()</span>);<br>String newFileName = uuid + <span class="hljs-string">&quot;.&quot;</span> + extension;<br><span class="hljs-comment">// 2. ä¸Šä¼ æ–‡ä»¶</span><br>String webapp = request.get<span class="hljs-constructor">ServletContext()</span>.get<span class="hljs-constructor">RealPath(<span class="hljs-string">&quot;/uploads/&quot;</span>)</span>;<br>file.transfer<span class="hljs-constructor">To(<span class="hljs-params">new</span> File(<span class="hljs-params">webapp</span> + <span class="hljs-string">&quot;\\&quot;</span> + <span class="hljs-params">newFileName</span>)</span>);<br><span class="hljs-comment">// 3. ç»™ user èµ‹å€¼</span><br>user.set<span class="hljs-constructor">Img(<span class="hljs-params">newFileName</span>)</span>;<br>us.update(user);<br><span class="hljs-comment">// 4. è·å–ä¿®æ”¹åçš„ç”¨æˆ·ä¿¡æ¯,ä¿å­˜åˆ° model ä¸­</span><br>User queryUser = us.select<span class="hljs-constructor">ById(<span class="hljs-params">user</span>.<span class="hljs-params">getUid</span>()</span>);<br>model.add<span class="hljs-constructor">Attribute(<span class="hljs-string">&quot;user&quot;</span>, <span class="hljs-params">queryUser</span>)</span>;<br>return <span class="hljs-string">&quot;success&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="8-2-5ã€å‡†å¤‡æ˜¾ç¤ºé¡µé¢"><a href="#8-2-5ã€å‡†å¤‡æ˜¾ç¤ºé¡µé¢" class="headerlink" title="8.2.5ã€å‡†å¤‡æ˜¾ç¤ºé¡µé¢"></a>8.2.5ã€å‡†å¤‡æ˜¾ç¤ºé¡µé¢</h5><p>é€šè¿‡elè¡¨è¾¾å¼å–å‡ºæŸ¥è¯¢çš„å€¼</p><figure class="highlight erb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs erb"><span class="xml">&lt;%</span><span class="ruby">@ page language=<span class="hljs-string">&quot;java&quot;</span> contentType=<span class="hljs-string">&quot;text/html; charset=utf-8&quot;</span></span><br><span class="ruby">    pageEncoding=<span class="hljs-string">&quot;utf-8&quot;</span></span><span class="xml">%&gt;</span><br><span class="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span> <span class="hljs-meta-keyword">PUBLIC</span> <span class="hljs-meta-string">&quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;</span> <span class="hljs-meta-string">&quot;http://www.w3.org/TR/html4/loose.dtd&quot;</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;Content-Type&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;text/html; charset=utf-8&quot;</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Insert title here<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span> ä¸Šä¼ æˆåŠŸï¼~<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;ä¸Šä¼ çš„å›¾ç‰‡&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;http://localhost:8080/img/ems/$&#123;user.img&#125;&quot;</span> <span class="hljs-attr">width</span>=<span class="hljs-string">100</span> <span class="hljs-attr">height</span>=<span class="hljs-string">100</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h4 id="8-3ã€å°ç»“"><a href="#8-3ã€å°ç»“" class="headerlink" title="8.3ã€å°ç»“"></a>8.3ã€å°ç»“</h4><p>é€šè¿‡é…ç½®ä¸Šä¼ è§£æå™¨CommonsMultipartResolverå®ç°æ–‡ä»¶ä¸Šä¼ ã€‚</p><h3 id="9ã€SpringMVCå°ç»“"><a href="#9ã€SpringMVCå°ç»“" class="headerlink" title="9ã€SpringMVCå°ç»“"></a>9ã€SpringMVCå°ç»“</h3><h4 id="é‡ç‚¹"><a href="#é‡ç‚¹" class="headerlink" title="é‡ç‚¹"></a>é‡ç‚¹</h4><ol><li><p>SpringMVCçš„æ‰§è¡Œæµç¨‹ã€‚</p></li><li><p>é…ç½®æ ¸å¿ƒç»„ä»¶</p></li><li><p>æ¥æ”¶å‚æ•°ã€é¡µé¢è·³è½¬ã€å“åº”æ•°æ®</p></li></ol><h4 id="400-ç±»å‹ä¸åŒ¹é…"><a href="#400-ç±»å‹ä¸åŒ¹é…" class="headerlink" title="400(ç±»å‹ä¸åŒ¹é…)"></a>400(ç±»å‹ä¸åŒ¹é…)</h4><p>å¦‚æœä¼ å‚ç±»å‹ä¸åŒ¹é…ï¼Œåˆ™ä¼šæŠ¥400é”™è¯¯ã€‚å¤§å®¶åœ¨ä¼ å‚çš„æ—¶å€™ä¸€å®šè¦å°å¿ƒæ³¨æ„ï¼Œç‰¹åˆ«å’±ä»¬ä»¥åéƒ½æ˜¯ä½¿ç”¨ajaxæ“ä½œï¼Œé‚£ä¹ˆè¿™ä¸ªæŠ¥é”™éœ€è¦åœ¨å‰ç«¯è°ƒè¯•å·¥å…·(å¦‚firebug)ä¸­å»æŸ¥çœ‹ã€‚</p><h4 id="DateTimeFormat-æ¥æ”¶æ—¥æœŸæ ¼å¼ï¼ˆåˆ†æ¸…æ¥šï¼‰"><a href="#DateTimeFormat-æ¥æ”¶æ—¥æœŸæ ¼å¼ï¼ˆåˆ†æ¸…æ¥šï¼‰" class="headerlink" title="@DateTimeFormat æ¥æ”¶æ—¥æœŸæ ¼å¼ï¼ˆåˆ†æ¸…æ¥šï¼‰"></a>@DateTimeFormat æ¥æ”¶æ—¥æœŸæ ¼å¼ï¼ˆåˆ†æ¸…æ¥šï¼‰</h4><ol><li><p>æ¥æ”¶æ—¥æœŸæ ¼å¼ä½¿ç”¨**@DateTimeFormat(yyyy-MM-dd)**,ç‰¹åˆ«æ³¨æ„åƒä¸‡ä¸è¦æŠŠåå°ä¼ å‚ä¸å‰å°æ¥æ”¶å‚æ•°ææ··æ·†ï¼š</p></li><li><p>åå°-&gt;å‰å°:@JsonFormat(pattern=â€yyyy-MM-dd hh:mm:ssSâ€,timezone=â€GMT+8â€)</p></li><li><p>å‰å°-&gt;åå°:@DateTimeFormat(pattern=â€yyyy-MM-ddâ€)</p></li></ol><h4 id="tomcat6-xï¼Œ7-xä¸­æ–‡ç¼–ç é—®é¢˜"><a href="#tomcat6-xï¼Œ7-xä¸­æ–‡ç¼–ç é—®é¢˜" class="headerlink" title="tomcat6.xï¼Œ7.xä¸­æ–‡ç¼–ç é—®é¢˜"></a>tomcat6.xï¼Œ7.xä¸­æ–‡ç¼–ç é—®é¢˜</h4><p>Getè¯·æ±‚ï¼š</p><p>/conf/server.xml </p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros">&lt;Connector <span class="hljs-attribute">port</span>=<span class="hljs-string">&quot;80&quot;</span> <span class="hljs-attribute">protocol</span>=<span class="hljs-string">&quot;HTTP/1.1&quot;</span> <span class="hljs-attribute">URIEncoding</span>=<span class="hljs-string">&quot;UTF-8&quot;</span><br><span class="hljs-attribute">connectionTimeout</span>=<span class="hljs-string">&quot;20000&quot;</span><br><span class="hljs-attribute">redirectPort</span>=<span class="hljs-string">&quot;8443&quot;</span> /&gt;<br></code></pre></td></tr></table></figure><p>Postè¯·æ±‚ï¼š</p><p>æ³¨æ„ï¼šSpringMVCæ¡†æ¶æœ¬èº«æ²¡æœ‰å¤„ç†è¯·æ±‚ç¼–ç ï¼Œéœ€è¦é…ç½®ä¸€ä¸ªspringå†…ç½®è¯·æ±‚ç¼–ç è¿‡æ»¤å™¨ã€‚</p><p><img src="/2019/11/28/SpringMVC/clip_image0022.jpg" alt="img"></p><p>web.xml </p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- Postè¯·æ±‚ç¼–ç è¿‡æ»¤å™¨ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">filter</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">filter-class</span>&gt;</span><br>org.springframework.web.filter.CharacterEncodingFilter<br><span class="hljs-tag">&lt;/<span class="hljs-name">filter-class</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">init-param</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>encoding<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>utf-8<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">init-param</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">filter-mapping</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/*<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter-mapping</span>&gt;</span><br></code></pre></td></tr></table></figure><p>1.1.5.  å‡ºç°406çŠ¶æ€å¼‚å¸¸ï¼ŒåŠ å…¥jackson jsonå·¥å…·åŒ…</p><p><img src="/2019/11/28/SpringMVC/clip_image0021.jpg" alt="img"></p>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>Spring MVC</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>äº†è§£HTML</title>
    <link href="/2019/11/26/%E4%BA%86%E8%A7%A3HTML/"/>
    <url>/2019/11/26/%E4%BA%86%E8%A7%A3HTML/</url>
    
    <content type="html"><![CDATA[<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><span class="hljs-comment">&lt;!--1ã€å£°æ˜æ–‡æ¡£ç±»å‹--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><span class="hljs-comment">&lt;!--2ã€HTMLé¡µé¢æ ¹å…ƒç´ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><span class="hljs-comment">&lt;!--3ã€åŒ…å«æ–‡æ¡£å…ƒ(mate)æ•°æ®ç­‰--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span>&gt;</span><span class="hljs-comment">&lt;!--4ã€ä¸­æ–‡ç½‘é¡µéœ€è¦ä½¿ç”¨ &lt;meta charset=&quot;utf-8&quot;&gt; å£°æ˜ç¼–ç --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>æµè§ˆå™¨æŠ¬å¤´<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>     <span class="hljs-comment">&lt;!--5ã€æè¿°æ–‡æ¡£æ ‡é¢˜--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">base</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">base</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><span class="hljs-comment">&lt;!--3çš„ç»“æŸæ ‡ç­¾--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><span class="hljs-comment">&lt;!--6ã€åŒ…å«å¯è§çš„é¡µé¢å†…å®¹--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>æ ‡é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>   <span class="hljs-comment">&lt;!--7ã€é¡µé¢æ ‡é¢˜--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ®µè½<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>   <span class="hljs-comment">&lt;!--8ã€é¡µé¢æ®µè½--&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><span class="hljs-comment">&lt;!--6çš„ç»“æŸæ ‡ç­¾--&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><span class="hljs-comment">&lt;!--2çš„ç»“æŸæ ‡ç­¾--&gt;</span><br></code></pre></td></tr></table></figure><p>åœ¨ä¸€ä¸ªä»¥.htmlæˆ–.htmåç¼€çš„æ–‡ä»¶ä¸­å†™å…¥ä¸Šé¢çš„ä»£ç éƒ½æ˜¯å¯è¡Œçš„ï¼Œæ²¡æœ‰åŒºåˆ«ã€‚</p><p>HTMLä¸æ˜¯ç¼–ç¨‹è¯­è¨€ï¼Œæ˜¯æ ‡è®°è¯­è¨€ï¼Œæ˜¯ä¸€å¥—æ ‡ç­¾(markup tag)ï¼Œç”¨æ¥æè¿°ç½‘é¡µã€‚</p><p>HTMLæ–‡æ¡£åŒ…å«HTMLæ ‡ç­¾åŠæ–‡æœ¬å†…å®¹ï¼Œåˆç§°WEBé¡µé¢ã€‚</p><p><img src="/2019/11/26/%E4%BA%86%E8%A7%A3HTML/HDS.png"></p><p>1ã€æ–‡æ¡£ç±»å‹å£°æ˜</p><p>HTML5</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p>HTML 4.01</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">HTML</span> <span class="hljs-meta-keyword">PUBLIC</span> <span class="hljs-meta-string">&quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;</span></span><br><span class="hljs-meta"><span class="hljs-meta-string">&quot;http://www.w3.org/TR/html4/loose.dtd&quot;</span>&gt;</span><br></code></pre></td></tr></table></figure><p>XHTML 1.0</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span> <span class="hljs-meta-keyword">PUBLIC</span> <span class="hljs-meta-string">&quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot;</span></span><br><span class="hljs-meta"><span class="hljs-meta-string">&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;</span>&gt;</span><br></code></pre></td></tr></table></figure><p> æŸ¥çœ‹å®Œæ•´ç½‘é¡µå£°æ˜ç±»å‹ <a href="https://www.runoob.com/tags/tag-doctype.html">DOCTYPE å‚è€ƒæ‰‹å†Œ</a>ã€‚ </p><p>2ã€æ ‡ç­¾</p><p>HTMLæ ‡ç­¾å¤§å°å†™ä¸æ•æ„Ÿï¼Œä½†æ¨èå…¨éƒ¨å°å†™ï¼Œå› æœªæ¥çš„XHTMLå¼ºåˆ¶å…¨éƒ¨å°å†™ã€‚</p><p>æ–‡æ¡£æ ‡é¢˜ï¼š&lt;title&gt;&lt;/title&gt;</p><p>é¡µé¢æ ‡é¢˜ï¼š&lt;h1<del>h6&gt;&lt;/h1</del>h6&gt;</p><p>æ®µè½ï¼š&lt;p&gt;&lt;/p&gt;</p><p>é“¾æ¥ï¼š&lt;a href=â€â€&gt;&lt;/a&gt;</p><p>å›¾åƒï¼š&lt;img src=â€â€ width=â€â€ height=â€â€&gt;&lt;/img&gt;</p><p>ç©ºæ ‡ç­¾ï¼šæ²¡æœ‰å†…å®¹çš„æ ‡ç­¾ï¼Œå¦‚&lt;br&gt;æ¢è¡Œï¼Œ&lt;hr&gt;æ°´å¹³çº¿æ ‡ç­¾</p><p>æ³¨é‡Šï¼š&lt;!â€“æ³¨é‡Šå†…å®¹â€“&gt;</p><p>ç²—ä½“â€œboldâ€ï¼š&lt;b&gt;&lt;/b&gt;</p><p>æ–œä½“â€œitalicâ€ï¼š&lt;i&gt;&lt;/i&gt;</p><p>&lt;strong&gt; æ›¿æ¢&lt;b&gt;æˆ–è€… &lt;em&gt;æ›¿æ¢&lt;i&gt;æ„å‘³ç€ä½ è¦å‘ˆç°çš„æ–‡æœ¬æ˜¯é‡è¦çš„ï¼Œæ‰€ä»¥è¦çªå‡ºæ˜¾ç¤ºã€‚ </p><p>å°å·å­—ï¼š&lt;small&gt;&lt;/small&gt;</p><p>ä¸Šä¸‹æ ‡å­—ï¼š&lt;sup&gt;&lt;\sup&gt;  &lt;sub&gt;&lt;/sub&gt;</p><p>æ’å…¥å­—ï¼š&lt;ins&gt;&lt;/ins&gt;</p><p>åˆ é™¤å­—ï¼š&lt;del&gt;&lt;/del&gt;</p><p>é¢„å®šä¹‰æ ¼å¼æ–‡æœ¬ï¼š&lt;pre&gt;&lt;/pre&gt;</p><p>3ã€å±æ€§</p><p>ç»™HTMLæ ‡ç­¾æä¾›å±æ€§ï¼Œä¸ºæ ‡ç­¾æ·»åŠ é™„åŠ ä¿¡æ¯ï¼Œåœ¨<code>å¼€å§‹æ ‡ç­¾</code>ä¸­æè¿°è¿™äº›å±æ€§ã€‚</p><p>å±æ€§å€¼å§‹ç»ˆç”¨å¼•å·å¼•èµ·ï¼ŒåŒå¼•å·æ˜¯æœ€å¸¸ç”¨çš„ï¼Œç‰¹æ®Šæƒ…å†µä¸‹éœ€è¦å•åŒå¼•å·ä¸€èµ·ä½¿ç”¨ã€‚</p><p>æ¨èå±æ€§å’Œå±æ€§å€¼å°å†™ï¼ŒXHTMLå¼ºåˆ¶è¦æ±‚å°å†™ã€‚</p><p>ä¸‹é¢åˆ—å‡ºäº†é€‚ç”¨äºå¤§å¤šæ•° HTML å…ƒç´ çš„å±æ€§ï¼š</p><table><thead><tr><th align="left">å±æ€§</th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="left">class</td><td align="left">ä¸ºhtmlå…ƒç´ å®šä¹‰ä¸€ä¸ªæˆ–å¤šä¸ªç±»åï¼ˆclassnameï¼‰(ç±»åä»æ ·å¼æ–‡ä»¶å¼•å…¥)</td></tr><tr><td align="left">id</td><td align="left">å®šä¹‰å…ƒç´ çš„å”¯ä¸€id</td></tr><tr><td align="left">style</td><td align="left">è§„å®šå…ƒç´ çš„è¡Œå†…æ ·å¼ï¼ˆinline styleï¼‰</td></tr><tr><td align="left">title</td><td align="left">æè¿°äº†å…ƒç´ çš„é¢å¤–ä¿¡æ¯ (ä½œä¸ºå·¥å…·æ¡ä½¿ç”¨)</td></tr></tbody></table><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;tips&quot;</span>&gt;</span>æœ‰ç”¨çš„æç¤ºéƒ¨åˆ†<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;#tips&quot;</span>&gt;</span>è®¿é—®æœ‰ç”¨çš„æç¤ºéƒ¨åˆ†<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://www.runoob.com/html/html-links.html#tips&quot;</span>&gt;</span>è®¿é—®æœ‰ç”¨çš„æç¤ºéƒ¨åˆ†<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br></code></pre></td></tr></table></figure><p>4ã€&lt;head&gt;æ ‡ç­¾ï¼Œå®šä¹‰æ–‡æ¡£ä¿¡æ¯</p><p>å¯ä»¥æ·»åŠ åœ¨å¤´éƒ¨åŒºåŸŸçš„å…ƒç´ æ ‡ç­¾ä¸º: &lt;title&gt;, &lt;style&gt;, &lt;meta&gt;, &lt;link&gt;, &lt;script&gt;, &lt;noscript&gt;, and &lt;base&gt;. </p><p>&lt;base&gt; æ ‡ç­¾æè¿°äº†åŸºæœ¬çš„é“¾æ¥åœ°å€/é“¾æ¥ç›®æ ‡ï¼Œè¯¥æ ‡ç­¾ä½œä¸ºHTMLæ–‡æ¡£ä¸­æ‰€æœ‰çš„é“¾æ¥æ ‡ç­¾çš„é»˜è®¤é“¾æ¥ </p><p>&lt;link&gt; æ ‡ç­¾å®šä¹‰äº†æ–‡æ¡£ä¸å¤–éƒ¨èµ„æºä¹‹é—´çš„å…³ç³»ã€‚ </p><p>&lt;style&gt; æ ‡ç­¾å®šä¹‰äº†HTMLæ–‡æ¡£çš„æ ·å¼æ–‡ä»¶å¼•ç”¨åœ°å€. </p><p>&lt;mate&gt; META å…ƒç´ é€šå¸¸ç”¨äºæŒ‡å®šç½‘é¡µçš„æè¿°ï¼Œå…³é”®è¯ï¼Œæ–‡ä»¶çš„æœ€åä¿®æ”¹æ—¶é—´ï¼Œä½œè€…ï¼Œå’Œå…¶ä»–å…ƒæ•°æ®ã€‚ </p><p>&lt;script&gt;æ ‡ç­¾ç”¨äºåŠ è½½è„šæœ¬æ–‡ä»¶ï¼Œå¦‚ï¼š JavaScriptã€‚  </p><p>5ã€CSSæ ·å¼</p><p>å†…è”æ ·å¼-HTMLæ ‡ç­¾ä¸­</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;color:blue;margin-left:20px;&quot;</span>&gt;</span>è¿™æ˜¯ä¸€ä¸ªæ®µè½ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br></code></pre></td></tr></table></figure><p>å†…éƒ¨æ ·å¼-&lt;style&gt;æ ‡ç­¾ä¸­</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/css&quot;</span>&gt;</span><br><span class="css"><span class="hljs-selector-tag">body</span> &#123;<span class="hljs-attribute">background-color</span>:yellow;&#125;</span><br><span class="css"><span class="hljs-selector-tag">p</span> &#123;<span class="hljs-attribute">color</span>:blue;&#125;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br></code></pre></td></tr></table></figure><p>å¤–éƒ¨æ ·å¼-ä½¿ç”¨å¤–éƒ¨CSSæ–‡ä»¶</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/css&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;mystyle.css&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br></code></pre></td></tr></table></figure><p>æ ‡é¢˜å¾ˆé‡è¦</p><p>è¯·ç¡®ä¿å°† HTML æ ‡é¢˜ æ ‡ç­¾åªç”¨äºæ ‡é¢˜ã€‚ä¸è¦ä»…ä»…æ˜¯ä¸ºäº†ç”Ÿæˆ<strong>ç²—ä½“</strong>æˆ–<strong>å¤§å·</strong>çš„æ–‡æœ¬è€Œä½¿ç”¨æ ‡é¢˜ã€‚</p><p>æœç´¢å¼•æ“ä½¿ç”¨æ ‡é¢˜ä¸ºæ‚¨çš„ç½‘é¡µçš„ç»“æ„å’Œå†…å®¹ç¼–åˆ¶ç´¢å¼•ã€‚</p><p>å› ä¸ºç”¨æˆ·å¯ä»¥é€šè¿‡æ ‡é¢˜æ¥å¿«é€Ÿæµè§ˆæ‚¨çš„ç½‘é¡µï¼Œæ‰€ä»¥ç”¨æ ‡é¢˜æ¥å‘ˆç°æ–‡æ¡£ç»“æ„æ˜¯å¾ˆé‡è¦çš„ã€‚</p><p>åº”è¯¥å°† h1 ç”¨ä½œä¸»æ ‡é¢˜ï¼ˆæœ€é‡è¦çš„ï¼‰ï¼Œå…¶åæ˜¯ h2ï¼ˆæ¬¡é‡è¦çš„ï¼‰ï¼Œå†å…¶æ¬¡æ˜¯ h3ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p><p>è¯·å§‹ç»ˆå°†æ­£æ–œæ æ·»åŠ åˆ°å­æ–‡ä»¶å¤¹ã€‚å‡å¦‚è¿™æ ·ä¹¦å†™é“¾æ¥ï¼šhref=â€<a href="https://www.runoob.com/html&quot;%EF%BC%8C%E5%B0%B1%E4%BC%9A%E5%90%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%BA%A7%E7%94%9F%E4%B8%A4%E6%AC%A1">https://www.runoob.com/html&quot;ï¼Œå°±ä¼šå‘æœåŠ¡å™¨äº§ç”Ÿä¸¤æ¬¡</a> HTTP è¯·æ±‚ã€‚è¿™æ˜¯å› ä¸ºæœåŠ¡å™¨ä¼šæ·»åŠ æ­£æ–œæ åˆ°è¿™ä¸ªåœ°å€ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªæ–°çš„è¯·æ±‚ï¼Œå°±åƒè¿™æ ·ï¼šhref=â€<a href="https://www.runoob.com/html/&quot;%E3%80%82">https://www.runoob.com/html/&quot;ã€‚</a> </p>]]></content>
    
    
    
    <tags>
      
      <tag>HTML</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Ajax</title>
    <link href="/2019/11/25/Ajax/"/>
    <url>/2019/11/25/Ajax/</url>
    
    <content type="html"><![CDATA[<h3 id="1ã€æµè§ˆå™¨-lt-â€“è¯·æ±‚-å“åº”â€“-gt-æœåŠ¡å™¨"><a href="#1ã€æµè§ˆå™¨-lt-â€“è¯·æ±‚-å“åº”â€“-gt-æœåŠ¡å™¨" class="headerlink" title="1ã€æµè§ˆå™¨&lt;â€“è¯·æ±‚/å“åº”â€“&gt;æœåŠ¡å™¨"></a>1ã€æµè§ˆå™¨&lt;â€“è¯·æ±‚/å“åº”â€“&gt;æœåŠ¡å™¨</h3><p>æ˜¯ä¼ ç»Ÿäº¤äº’æ–¹å¼ï¼š</p><p>å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰ä»æœåŠ¡å™¨åŠ è½½ç½‘é¡µå®Œæ¯•åï¼Œç½‘é¡µä¸­çš„å†…å®¹å¦‚æœéœ€è¦æ›´æ”¹ï¼Œé‚£ä¹ˆå°±å¿…é¡»è®©æµè§ˆå™¨é‡æ–°å‘é€ä¸€æ¬¡è¯·æ±‚åˆ°æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨æ¥æ”¶è¯·æ±‚å¹¶å¤„ç†å®Œæ¯•åä¼šæŠŠä¸€ä¸ªå®Œæ•´çš„ç½‘é¡µè¿”å›ç»™å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰ï¼Œæµè§ˆå™¨æŠŠç½‘é¡µç›´æ¥æ˜¾ç¤ºç»™ç”¨æˆ·;</p><p>ä¼ ç»Ÿäº¤äº’æ–¹å¼çš„é—®é¢˜ï¼š</p><p>æ¯æ¬¡æ“ä½œéƒ½å¿…é¡»è¿”å›æ•´ä¸ªé¡µé¢ï¼Œå¸¦å®½ï¼Œå“åº”é€Ÿåº¦éƒ½æœ‰å½±å“çš„</p><h3 id="2ã€Ajax-lt-â€“è¯·æ±‚-å“åº”â€“-gt-æœåŠ¡å™¨"><a href="#2ã€Ajax-lt-â€“è¯·æ±‚-å“åº”â€“-gt-æœåŠ¡å™¨" class="headerlink" title="2ã€Ajax&lt;â€“è¯·æ±‚/å“åº”â€“&gt;æœåŠ¡å™¨"></a>2ã€Ajax&lt;â€“è¯·æ±‚/å“åº”â€“&gt;æœåŠ¡å™¨</h3><p>Ajaxäº¤äº’æ–¹å¼ï¼š</p><p>å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰ä»æœåŠ¡å™¨åŠ è½½ç½‘é¡µå®Œæ¯•åï¼Œç½‘é¡µä¸­çš„å†…å®¹å¦‚æœéœ€è¦æ›´æ”¹ï¼Œä¸ä½¿ç”¨æµè§ˆå™¨å‘é€è¯·æ±‚ï¼Œè€Œæ˜¯ä½¿ç”¨JavaScriptä¸­çš„XMLHttpRequestï¼ˆåŠAjaxå¯¹è±¡ï¼‰å¯¹è±¡å‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨æ¥æ”¶è¯·æ±‚å¹¶å¤„ç†å®Œæ¯•ååªè¿”å›é¡µé¢éœ€è¦çš„å†…å®¹ï¼ŒXMLHttpRequestå¯¹è±¡æ¥æ”¶æœåŠ¡å™¨è¿”å›çš„å†…å®¹ï¼Œç¨‹åºå‘˜éœ€è¦æ‰‹åŠ¨(javascript)çš„æŠŠå†…å®¹æ›´æ–°åˆ°é¡µé¢ä¸­ï¼›</p><p>Ajaxäº¤äº’æ–¹å¼çš„ä¼˜ç‚¹ï¼š</p><p>åªæ˜¯éƒ¨åˆ†æ•°æ®æ›´æ–°ï¼Œå°±æˆåŠŸå’ŒæœåŠ¡å™¨è¿›è¡Œäº†äº¤äº’ï¼Œå¯ä»¥æé«˜ç”¨æˆ·çš„ä½¿ç”¨ä½“éªŒã€‚</p><p>AjaxæŠ€æœ¯å¸¸è§çš„åœºæ™¯ï¼ˆéœ€è¦å±€éƒ¨åˆ·æ–°ï¼‰ï¼š</p><ol><li>è‡ªåŠ¨æç¤ºå’Œæµè§ˆå™¨åœ°å›¾æœç´¢</li></ol><p>åœ¨2005å¹´ï¼ŒGoogle Suggest ä½¿ç”¨ AJAX åˆ›é€ å‡ºåŠ¨æ€æ€§æå¼ºçš„ web ç•Œé¢ï¼šå½“æ‚¨åœ¨è°·æ­Œçš„æœç´¢æ¡†è¾“å…¥å…³é”®å­—æ—¶ï¼ŒJavaScript ä¼šæŠŠè¿™äº›å­—ç¬¦å‘é€åˆ°æœåŠ¡å™¨ï¼Œç„¶åæœåŠ¡å™¨ä¼šè¿”å›ä¸€ä¸ªæœç´¢å»ºè®®çš„åˆ—è¡¨ã€‚</p><ol start="3"><li>   ç”¨æˆ·åé‡å¤æ£€æŸ¥ï¼š</li></ol><p>ç”¨æˆ·æ³¨å†Œæ—¶ï¼Œæ£€æŸ¥ç”¨æˆ·åæ˜¯å¦å­˜åœ¨ï¼ŒåŠæ—¶ç»™ç”¨æˆ·åé¦ˆï¼›</p><ol start="4"><li>é‚®ç®±æç¤ºï¼š</li></ol><p>WEBç‰ˆé‚®ç®±ç³»ç»Ÿï¼Œå½“æœ‰æ–°é‚®ä»¶åˆ°åº•æœåŠ¡å™¨ï¼Œæµè§ˆå™¨ä¸ç”¨åˆ·æ–°é¡µé¢ä¹ŸçŸ¥é“æ˜¯å¦æœ‰æ–°é‚®ä»¶ï¼›</p><ol start="5"><li>æ— åˆ·æ–°åˆ†é¡µï¼š</li></ol><p>æ˜¾ç¤ºæ•°æ®åˆ—è¡¨ï¼Œç”¨æˆ·ç‚¹å‡»ä¸‹ä¸€é¡µæ•°æ®ï¼Œæ•´ä¸ªé¡µé¢ä¸ä¼šåˆ·æ–°ï¼ŒåªæŠŠä¸‹ä¸€é¡µçš„æ•°æ®æ›´æ–°åˆ°é¡µé¢ä¸­ï¼›</p><ol start="6"><li>   è´­ç‰©è½¦ï¼š</li></ol><p>ç”¨æˆ·ç‚¹å‡»æ·»åŠ åˆ°è´­ç‰©è½¦åï¼Œèƒ½ç»§ç»­è¿›è¡Œå…¶ä»–æ“ä½œï¼Œè€Œè´­ç‰©è½¦çš„æ•°æ®å­˜å‚¨æœåŠ¡å™¨ç«¯ï¼›</p><ol start="7"><li>   ç”¨æˆ·ç™»å½•ï¼š</li></ol><p>ç”¨æˆ·ç™»å½•çš„æ•°æ®é€šè¿‡AJAXä¼ è¾“åˆ°åå°ï¼Œå¦‚æœç™»å½•å¤±è´¥ç›´æ¥åœ¨å½“å‰ç™»å½•é¡µé¢æç¤ºç”¨æˆ·ï¼Œè€Œä¸ç”¨åˆ·æ–°æ•´ä¸ªé¡µé¢ï¼›</p><p>å¦‚æœåº”ç”¨ä¸­çš„é¡µé¢éœ€è¦å±€éƒ¨åˆ·æ–°å¹¶ä¸”éœ€è¦ä¸æœåŠ¡å™¨äº¤äº’ï¼Œé‚£ä¹ˆå°±å¯ä»¥ä½¿ç”¨AJAXï¼›</p><ol start="8"><li><p>   è§†é¢‘ç½‘ç«™</p></li><li><p>   è‚¡ç¥¨ç½‘ç«™(è½®è¯¢)</p></li></ol><p>æµè§ˆå™¨ç½‘ç«™çš„æ—¶å€™ï¼Œç•™å¿ƒè§‚å¯Ÿå¾ˆå¤šé¡µé¢æœªåˆ·æ–°ï¼Œä½†æ˜¯é¡µé¢ä¸­çš„å†…å®¹è¢«æ›´æ”¹äº†ï¼Œè¿™äº›éƒ½æ˜¯AJAXä½¿ç”¨åœºæ™¯ï¼› 99%çš„ç½‘ç«™éƒ½ä¼šç”¨åˆ°Ajax</p><h3 id="3ã€AjaxæŠ€æœ¯æ¦‚è¿°"><a href="#3ã€AjaxæŠ€æœ¯æ¦‚è¿°" class="headerlink" title="3ã€AjaxæŠ€æœ¯æ¦‚è¿°"></a>3ã€AjaxæŠ€æœ¯æ¦‚è¿°</h3><h4 id="3-1ã€æ–°ç“¶è£…æ—§æ°´-js-xml-json"><a href="#3-1ã€æ–°ç“¶è£…æ—§æ°´-js-xml-json" class="headerlink" title="3.1ã€æ–°ç“¶è£…æ—§æ°´(js,xml,json)"></a>3.1ã€æ–°ç“¶è£…æ—§æ°´(js,xml,json)</h4><p>AJAXå³â€œAsynchronous Javascript And XMLâ€ï¼ˆå¼‚æ­¥JavaScriptå’ŒXMLï¼‰ï¼Œæ˜¯æŒ‡ä¸€ç§åˆ›å»ºäº¤äº’å¼ç½‘é¡µåº”ç”¨çš„ç½‘é¡µå¼€å‘æŠ€æœ¯ã€‚</p><p>JavaScriptæ˜¯ä¸€é—¨å‰ç«¯è¯­è¨€ï¼Œè€ŒAJAXæ˜¯ä¸€ç§ç”¨äºåˆ›å»ºå¿«é€ŸåŠ¨æ€ç½‘é¡µçš„æŠ€æœ¯ã€‚</p><p>AJAX ä¸éœ€è¦ä»»ä½•æµè§ˆå™¨æ’ä»¶ï¼Œä½†éœ€è¦ç”¨æˆ·å…è®¸JavaScriptåœ¨æµè§ˆå™¨ä¸Šæ‰§è¡Œã€‚</p><p>Ajaxæ˜¯ä¸€é—¨æŠ€æœ¯ï¼Œå®ƒæä¾›äº†å¼‚æ­¥æ›´æ–°çš„æœºåˆ¶ï¼Œä½¿ç”¨å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨é—´äº¤æ¢æ•°æ®è€Œéæ•´ä¸ªé¡µé¢æ–‡æ¡£ï¼Œå®ç°é¡µé¢çš„å±€éƒ¨æ›´æ–°ã€‚</p><p><img src="/2019/11/25/Ajax/work.png"></p><p>AJAXæ˜¯åŸºäºç°æœ‰çš„Internetæ ‡å‡†ï¼Œå¹¶ä¸”è”åˆä½¿ç”¨å®ƒä»¬ï¼š</p><ul><li>XMLHttpRequest å¯¹è±¡ (å¼‚æ­¥çš„ä¸æœåŠ¡å™¨äº¤æ¢æ•°æ®)</li><li>JavaScript/DOM (ä¿¡æ¯æ˜¾ç¤º/äº¤äº’)</li><li>CSS (ç»™æ•°æ®å®šä¹‰æ ·å¼)</li><li>XML (ä½œä¸ºè½¬æ¢æ•°æ®çš„æ ¼å¼)</li></ul><h4 id="3-3ã€AJAXæ ¸å¿ƒ"><a href="#3-3ã€AJAXæ ¸å¿ƒ" class="headerlink" title="3.3ã€AJAXæ ¸å¿ƒ"></a>3.3ã€AJAXæ ¸å¿ƒ</h4><p>Ajax çš„æ ¸å¿ƒæ˜¯ JavaScript å¯¹è±¡ XMLHttpRequestã€‚ç®€è€Œè¨€ä¹‹ï¼ŒXMLHttpRequest ä½¿æ‚¨å¯ä»¥ä½¿ç”¨ JavaScript å‘æœåŠ¡å™¨è¿›è¡Œè¯·æ±‚å¹¶å¤„ç†å“åº”ã€‚</p><h4 id="3-4ã€åŒæ­¥äº¤äº’å’Œå¼‚æ­¥äº¤äº’"><a href="#3-4ã€åŒæ­¥äº¤äº’å’Œå¼‚æ­¥äº¤äº’" class="headerlink" title="3.4ã€åŒæ­¥äº¤äº’å’Œå¼‚æ­¥äº¤äº’"></a>3.4ã€åŒæ­¥äº¤äº’å’Œå¼‚æ­¥äº¤äº’</h4><p>ä¸¾ä¸ªä¾‹å­ï¼šæ™®é€šB/Sæ¨¡å¼(åŒæ­¥)    AJAXæŠ€æœ¯(å¼‚æ­¥)â€”-</p><p>* åŒæ­¥ï¼šæäº¤è¯·æ±‚-&gt;ç­‰å¾…æœåŠ¡å™¨å¤„ç†-&gt;å¤„ç†å®Œæ¯•è¿”å› è¿™ä¸ªæœŸé—´å®¢æˆ·ç«¯æµè§ˆå™¨ä¸èƒ½å¹²ä»»ä½•äº‹</p><p>* å¼‚æ­¥: è¯·æ±‚é€šè¿‡äº‹ä»¶è§¦å‘-&gt;æœåŠ¡å™¨å¤„ç†ï¼ˆè¿™æ—¶æµè§ˆå™¨ä»ç„¶å¯ä»¥ä½œå…¶ä»–äº‹æƒ…ï¼‰-&gt;å¤„ç†å®Œæ¯•</p><p>åŒæ­¥æ˜¯æŒ‡ï¼šå‘é€æ–¹å‘å‡ºæ•°æ®åï¼Œç­‰æ¥æ”¶æ–¹å‘å›å“åº”ä»¥åæ‰å‘ä¸‹ä¸€ä¸ªæ•°æ®åŒ…çš„é€šè®¯æ–¹å¼ã€‚</p><p>å¼‚æ­¥æ˜¯æŒ‡ï¼šå‘é€æ–¹å‘å‡ºæ•°æ®åï¼Œä¸ç­‰æ¥æ”¶æ–¹å‘å›å“åº”ï¼Œæ¥ç€å‘é€ä¸‹ä¸ªæ•°æ®åŒ…çš„é€šè®¯æ–¹å¼ </p><p>æ˜“æ‡‚çš„ç†è§£:</p><p>å¼‚æ­¥ä¼ è¾“:  ä½ ä¼ è¾“å§ï¼Œæˆ‘å»åšæˆ‘çš„äº‹äº†ï¼Œä¼ è¾“å®Œäº†å‘Šè¯‰æˆ‘ä¸€å£°  </p><p>åŒæ­¥ä¼ è¾“:  ä½ ç°åœ¨ä¼ è¾“ï¼Œæˆ‘è¦äº²çœ¼çœ‹ä½ ä¼ è¾“å®Œæˆï¼Œæ‰å»åšåˆ«çš„äº‹  </p><h3 id="4ã€AjaxæŠ€æœ¯å†…å®¹"><a href="#4ã€AjaxæŠ€æœ¯å†…å®¹" class="headerlink" title="4ã€AjaxæŠ€æœ¯å†…å®¹"></a>4ã€AjaxæŠ€æœ¯å†…å®¹</h3><p>   1ï¼šä¸€ä¸ªäº‹ä»¶ç›‘å¬ onreadystatechange </p><p>   2ï¼š2ä¸ªçŠ¶æ€ status readyState</p><p>   3ï¼šä¸‰ä¸ªæ–¹æ³• openã€sendã€setRequestHeader</p><p>é€šè¿‡è·å–æœåŠ¡å™¨æ—¶é—´æ¡ˆä¾‹æ¢ç´¢Ajax</p><h4 id="4-1ã€åˆ›å»ºwebåŠ¨æ€å·¥ç¨‹"><a href="#4-1ã€åˆ›å»ºwebåŠ¨æ€å·¥ç¨‹" class="headerlink" title="4.1ã€åˆ›å»ºwebåŠ¨æ€å·¥ç¨‹"></a>4.1ã€åˆ›å»ºwebåŠ¨æ€å·¥ç¨‹</h4><h4 id="4-2ã€æ­å»ºåˆæ­¥JSä»£ç "><a href="#4-2ã€æ­å»ºåˆæ­¥JSä»£ç " class="headerlink" title="4.2ã€æ­å»ºåˆæ­¥JSä»£ç "></a>4.2ã€æ­å»ºåˆæ­¥JSä»£ç </h4><figure class="highlight erb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs erb"><span class="xml">&lt;%</span><span class="ruby">@ page contentType=<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="hljs-string">&quot;java&quot;</span> </span><span class="xml">%&gt;</span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span></span><br><span class="xml">        function getTime()&#123;</span><br><span class="xml">            alert(1);</span><br><span class="xml">            console.debug(1);</span><br><span class="xml">        &#125;</span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;mytime&quot;</span>&gt;</span>Ajax Hello World<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;getTime()&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;æ˜¾ç¤ºæœåŠ¡å™¨æ—¶é—´&quot;</span>&gt;</span></span><br><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h4 id="4-3ã€åˆæ­¥çš„Servletä»£ç "><a href="#4-3ã€åˆæ­¥çš„Servletä»£ç " class="headerlink" title="4.3ã€åˆæ­¥çš„Servletä»£ç "></a>4.3ã€åˆæ­¥çš„Servletä»£ç </h4><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-meta">@WebServlet</span>(<span class="hljs-string">&quot;/getTime&quot;</span>)<br>public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GetTimeServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span></span>&#123;<br><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">protected</span> void service(<span class="hljs-type">HttpServletRequest</span> req, <span class="hljs-type">HttpServletResponse</span> resp)<br><span class="hljs-keyword">throws</span> <span class="hljs-type">ServletException</span>, <span class="hljs-type">IOException</span> &#123;<br><span class="hljs-comment">//System.out.println(1/0);</span><br><span class="hljs-type">System</span>.out.println(<span class="hljs-string">&quot;è¿›æ¥æ²¡æœ‰å“Ÿ....&quot;</span>);<br><span class="hljs-type">Date</span> date = <span class="hljs-keyword">new</span> <span class="hljs-type">Date</span>();<br><span class="hljs-comment">//å¾—åˆ°å“åº”å¯¹è±¡</span><br><span class="hljs-type">PrintWriter</span> writer = resp.getWriter();<br>writer.print(date.toLocaleString());<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="4-4ã€åˆ›å»ºXMLHttpRequestå¯¹è±¡"><a href="#4-4ã€åˆ›å»ºXMLHttpRequestå¯¹è±¡" class="headerlink" title="4.4ã€åˆ›å»ºXMLHttpRequestå¯¹è±¡"></a>4.4ã€åˆ›å»ºXMLHttpRequestå¯¹è±¡</h4><p><strong>JavaScriptä¸¥æ ¼åŒºåˆ†å¤§å°å†™ï¼Œå¹¶ä¸”æœ‰æµè§ˆå™¨çš„å…¼å®¹é—®é¢˜</strong></p><p>1ã€æ‰€æœ‰ç°ä»£æµè§ˆå™¨ï¼ˆIE7+ã€Firefoxã€Chromeã€Safari ä»¥åŠ Operaï¼‰å‡å†…å»º XMLHttpRequest å¯¹è±¡ã€‚</p><p>åˆ›å»º XMLHttpRequest å¯¹è±¡çš„è¯­æ³•ï¼š</p><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs haxe"><span class="hljs-keyword">var</span> ajax=<span class="hljs-keyword">new</span> <span class="hljs-type">XMLHttpRequest</span>();<br></code></pre></td></tr></table></figure><p>2ã€è€ç‰ˆæœ¬æµè§ˆå™¨ Internet Explorer ï¼ˆIE6ï¼‰ä½¿ç”¨ ActiveX å¯¹è±¡ï¼š  </p><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs haxe"><span class="hljs-keyword">var</span> ajax=<span class="hljs-keyword">new</span> <span class="hljs-type">ActiveXObject</span>(<span class="hljs-string">&quot;Microsoft.XMLHTTP&quot;</span>);<br></code></pre></td></tr></table></figure><p>3ã€ä¸ºäº†åº”å¯¹æ‰€æœ‰çš„ç°ä»£æµè§ˆå™¨ï¼ŒåŒ…æ‹¬ IE5 å’Œ IE6ï¼Œè¯·æ£€æŸ¥æµè§ˆå™¨æ˜¯å¦æ”¯æŒ XMLHttpRequest å¯¹è±¡ã€‚å¦‚æœæ”¯æŒï¼Œåˆ™åˆ›å»º XMLHttpRequest å¯¹è±¡ã€‚å¦‚æœä¸æ”¯æŒï¼Œåˆ™åˆ›å»º ActiveXObject ï¼š</p><blockquote><p>æ–¹æ³•ä¸€ã€åŠŸèƒ½åˆ¤æ–­</p><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs haxe"><span class="hljs-keyword">var</span> xmlhttp;<br><span class="hljs-keyword">if</span> (window.XMLHttpRequest)<span class="hljs-comment">//åˆ¤æ–­å½“å‰æµè§ˆå™¨æ˜¯å¦æœ‰XMLHttpRequest</span><br>&#123;<br><span class="hljs-comment">// code for IE7+, Firefox, Chrome, Opera, Safari</span><br>xmlhttp=<span class="hljs-keyword">new</span> <span class="hljs-type">XMLHttpRequest</span>();<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<span class="hljs-comment">// code for IE6, IE5</span><br>xmlhttp=<span class="hljs-keyword">new</span> <span class="hljs-type">ActiveXObject</span>(<span class="hljs-string">&quot;Microsoft.XMLHTTP&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>æ–¹æ³•äºŒã€try-catch</p><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs haxe"><span class="hljs-keyword">var</span> ajax;<br><span class="hljs-keyword">try</span> &#123;<br><span class="hljs-comment">//å¦‚æœæ˜¯å…¶å®ƒæµè§ˆå™¨ï¼Œè¿™å¥ä»£ç å¯ä»¥æˆåŠŸ,ajaxå¯¹è±¡å°±æ‹¿åˆ°äº†</span><br>ajax  = <span class="hljs-keyword">new</span> <span class="hljs-type">XMLHttpRequest</span>(); <br>&#125; <span class="hljs-keyword">catch</span> (e) &#123;<br><span class="hljs-comment">//å¦‚æœæ˜¯IEï¼Œä¸Šé¢è‚¯å®šä¼šæŠ¥é”™ï¼Œè¢«æŠ“å–,å°±æ‰§è¡Œä¸‹é¢è¿™å¥ä»£ç (IEæ”¯æŒ)</span><br>ajax = <span class="hljs-keyword">new</span> <span class="hljs-type">ActiveXObject</span>(<span class="hljs-string">&quot;Microsoft.XMLHTTP&quot;</span>); <br>&#125;<br></code></pre></td></tr></table></figure></blockquote><h4 id="4-5ã€Ajaxçš„æ–¹æ³•"><a href="#4-5ã€Ajaxçš„æ–¹æ³•" class="headerlink" title="4.5ã€Ajaxçš„æ–¹æ³•"></a>4.5ã€Ajaxçš„æ–¹æ³•</h4><h5 id="1ã€open-method-url-async"><a href="#1ã€open-method-url-async" class="headerlink" title="1ã€open(method,url,async)"></a><strong>1ã€open(method,url,async)</strong></h5><blockquote><p>åˆ›å»ºè¯·æ±‚ï¼Œå¹¶ä¸”è§„å®šè¯·æ±‚çš„ç±»å‹ã€URL ä»¥åŠæ˜¯å¦å¼‚æ­¥å¤„ç†è¯·æ±‚ã€‚</p><ul><li><p>methodï¼šè¯·æ±‚çš„ç±»å‹ï¼›GET æˆ– POST</p></li><li><p>urlï¼šæ–‡ä»¶åœ¨æœåŠ¡å™¨ä¸Šçš„ä½ç½®ï¼Œæ–‡ä»¶å¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„æ–‡ä»¶ï¼Œæ¯”å¦‚ .txt å’Œ .xmlï¼Œæˆ–è€…æœåŠ¡å™¨è„šæœ¬æ–‡ä»¶ï¼Œæ¯”å¦‚ .asp å’Œ .phpï¼ˆåœ¨ä¼ å›å“åº”ä¹‹å‰ï¼Œèƒ½å¤Ÿåœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œä»»åŠ¡ï¼‰ã€‚</p></li><li><p>asyncï¼štrueï¼ˆå¼‚æ­¥ï¼‰ï¼Œä¸€å®šè¦é€‰æ‹©trueã€‚ falseï¼ˆåŒæ­¥ï¼‰XMLHttpRequest å¯¹è±¡å¦‚æœè¦ç”¨äº AJAX çš„è¯ï¼Œå…¶ open() æ–¹æ³•çš„ async å‚æ•°å¿…é¡»è®¾ç½®ä¸º true</p></li></ul></blockquote><p>å¯¹äº web å¼€å‘äººå‘˜æ¥è¯´ï¼Œå‘é€å¼‚æ­¥è¯·æ±‚æ˜¯ä¸€ä¸ªå·¨å¤§çš„è¿›æ­¥ã€‚å¾ˆå¤šåœ¨æœåŠ¡å™¨æ‰§è¡Œçš„ä»»åŠ¡éƒ½ç›¸å½“è´¹æ—¶ã€‚AJAX å‡ºç°ä¹‹å‰ï¼Œè¿™å¯èƒ½ä¼šå¼•èµ·åº”ç”¨ç¨‹åºæŒ‚èµ·æˆ–åœæ­¢ã€‚</p><p>é€šè¿‡ AJAXï¼ŒJavaScript æ— éœ€ç­‰å¾…æœåŠ¡å™¨çš„å“åº”ï¼Œè€Œæ˜¯ï¼š</p><ul><li>åœ¨ç­‰å¾…æœåŠ¡å™¨å“åº”æ—¶æ‰§è¡Œå…¶ä»–è„šæœ¬</li><li>å½“å“åº”å°±ç»ªåå¯¹å“åº”è¿›è¡Œå¤„ç†</li></ul><blockquote><p>Async=true</p><p>å½“ä½¿ç”¨ async=true æ—¶ï¼Œè¯·è§„å®šåœ¨å“åº”å¤„äº onreadystatechange äº‹ä»¶ä¸­çš„å°±ç»ªçŠ¶æ€æ—¶æ‰§è¡Œçš„å‡½æ•°</p></blockquote><blockquote><p>Async = false</p><p>å¦‚éœ€ä½¿ç”¨ async=falseï¼Œè¯·å°† open() æ–¹æ³•ä¸­çš„ç¬¬ä¸‰ä¸ªå‚æ•°æ”¹ä¸º false</p><p>æˆ‘ä»¬ä¸æ¨èä½¿ç”¨ async=falseï¼Œä½†æ˜¯å¯¹äºä¸€äº›å°å‹çš„è¯·æ±‚ï¼Œä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p><p>è¯·è®°ä½ï¼ŒJavaScript ä¼šç­‰åˆ°æœåŠ¡å™¨å“åº”å°±ç»ªæ‰ç»§ç»­æ‰§è¡Œã€‚å¦‚æœæœåŠ¡å™¨ç¹å¿™æˆ–ç¼“æ…¢ï¼Œåº”ç”¨ç¨‹åºä¼šæŒ‚èµ·æˆ–åœæ­¢ã€‚</p><p><strong>æ³¨æ„ï¼š</strong>å½“æ‚¨ä½¿ç”¨ async=false æ—¶ï¼Œè¯·ä¸è¦ç¼–å†™ onreadystatechange å‡½æ•° - æŠŠä»£ç æ”¾åˆ° send() è¯­å¥åé¢å³å¯</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">xmlhttp.open(<span class="hljs-string">&quot;<span class="hljs-keyword">GET</span>&quot;</span>,<span class="hljs-string">&quot;/try/ajax/ajax_info.txt&quot;</span>,false);<br>xmlhttp.send();<br>document.getElementById(<span class="hljs-string">&quot;myDiv&quot;</span>).innerHTML=xmlhttp.responseText;<br></code></pre></td></tr></table></figure></blockquote><h5 id="2ã€send-string"><a href="#2ã€send-string" class="headerlink" title="2ã€send(string)"></a>2ã€send(string)</h5><blockquote><p>å°†è¯·æ±‚å‘é€åˆ°æœåŠ¡å™¨ã€‚</p><p><code>stringå‚æ•°</code>ï¼šä»…ç”¨äº POST è¯·æ±‚ï¼Œå­—ç¬¦ä¸²å¿…é¡»æ˜¯æœåŠ¡å™¨URLç¼–ç æ ¼å¼</p><p>ä¾‹å¦‚ï¼šâ€param1=value1&amp;param2=value2â€</p></blockquote><h5 id="3ã€setRequestHeader-header-value"><a href="#3ã€setRequestHeader-header-value" class="headerlink" title="3ã€setRequestHeader(header,value)"></a><strong>3ã€setRequestHeader(header,value)</strong></h5><p>å‘è¯·æ±‚æ·»åŠ é¢å¤–çš„ HTTP è¯·æ±‚å¤´ä¿¡æ¯ï¼Œpostæäº¤å¿…é¡»ä½¿ç”¨ã€‚</p><ul><li><p>header: è§„å®šå¤´çš„åç§°</p></li><li><p>value: è§„å®šå¤´çš„å€¼</p></li></ul><p>æ³¨æ„ï¼šè¯¥æ–¹æ³•å¿…é¡»åœ¨openä¸sendä¹‹é—´è°ƒç”¨ï¼› </p><p>åŸå› ï¼š</p><blockquote><p>1ã€openä¹‹åï¼Œopenæ˜¯åˆ›å»ºä¸€ä¸ªè¯·æ±‚ï¼Œæˆ–è€…ç†è§£ä¸ºè¯·æ±‚çš„åŸºæœ¬å‡†å¤‡ï¼Œå¦‚æœæ²¡æœ‰è¯·æ±‚ï¼Œä½•æ¥è®¾ç½®è¯·æ±‚å¤´ä¿¡æ¯ï¼›</p><p>2ã€sendä¹‹å‰ï¼Œsendæ˜¯å‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œè¯·æ±‚ä¼šæŠŠå½“å‰è¯·æ±‚çš„å¤´ä¿¡æ¯è¿›è¡Œå‘é€ï¼Œå‘é€åè®¾ç½®å¤´ä¿¡æ¯æ— æ•ˆï¼›</p></blockquote><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-tag">xhr</span><span class="hljs-selector-class">.setRequestHeader</span>(<span class="hljs-string">&quot;Content-Type&quot;</span>,<span class="hljs-string">&quot;application/x-www-form-urlencoded&quot;</span>);<br></code></pre></td></tr></table></figure><h4 id="4-6ã€Ajaxå±æ€§"><a href="#4-6ã€Ajaxå±æ€§" class="headerlink" title="4.6ã€Ajaxå±æ€§"></a>4.6ã€Ajaxå±æ€§</h4><h5 id="4-6-1ã€readyState"><a href="#4-6-1ã€readyState" class="headerlink" title="4.6.1ã€readyState"></a>4.6.1ã€readyState</h5><p>å­˜æœ‰ XMLHttpRequestå¯¹è±¡çš„è¯·æ±‚çŠ¶æ€ã€‚ä» 0 åˆ° 4 å‘ç”Ÿå˜åŒ–ã€‚</p><blockquote><ul><li><p>0: è¯·æ±‚æœªåˆå§‹åŒ–      æœªåˆ›å»º</p></li><li><p>1: æœåŠ¡å™¨è¿æ¥å·²å»ºç«‹   open()æ–¹æ³•</p></li><li><p>2: è¯·æ±‚å·²æ¥æ”¶      send()æ–¹æ³•</p></li><li><p>3: è¯·æ±‚å¤„ç†ä¸­      æœåŠ¡å™¨å¤„ç†ä¸­</p></li><li><p>4: è¯·æ±‚å·²å®Œæˆï¼Œä¸”å“åº”å·²å°±ç»ª  å“åº”å®Œæ¯•</p></li></ul></blockquote><h5 id="4-6-2ã€HTTPå“åº”çŠ¶æ€-status"><a href="#4-6-2ã€HTTPå“åº”çŠ¶æ€-status" class="headerlink" title="4.6.2ã€HTTPå“åº”çŠ¶æ€ status "></a>4.6.2ã€HTTPå“åº”çŠ¶æ€ <code>status </code></h5><blockquote><ul><li><p>200: â€œOKâ€ è¯·æ±‚æˆåŠŸ</p></li><li><p>404: â€œNOT FOUNDâ€ æ²¡æœ‰æ‰¾åˆ°å¯¹åº”èµ„æº</p></li><li><p>500:â€Server Errorâ€ æœåŠ¡å™¨ç«¯é”™è¯¯</p></li></ul></blockquote><h5 id="4-6-3ã€å“åº”æ•°æ®ç›¸å…³å±æ€§"><a href="#4-6-3ã€å“åº”æ•°æ®ç›¸å…³å±æ€§" class="headerlink" title="4.6.3ã€å“åº”æ•°æ®ç›¸å…³å±æ€§"></a>4.6.3ã€å“åº”æ•°æ®ç›¸å…³å±æ€§</h5><ul><li><p>responseText  è·å¾—å­—ç¬¦ä¸²å½¢å¼çš„å“åº”æ•°æ®ã€‚</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">document.getElementById(<span class="hljs-string">&quot;myDiv&quot;</span>).<span class="hljs-attribute">innerHTML</span>=xhr.responseText;<br></code></pre></td></tr></table></figure></li><li><p>responseXML è·å¾— XML å½¢å¼çš„å“åº”æ•°æ®ã€‚</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-attribute">xmlDoc</span>=xhr.responseXML;<br><span class="hljs-attribute">txt</span>=<span class="hljs-string">&quot;&quot;</span>;<br><span class="hljs-attribute">x</span>=xmlDoc.getElementsByTagName(&quot;ARTIST&quot;);<br><span class="hljs-keyword">for</span> (<span class="hljs-attribute">i</span>=0;i&lt;x.length;i++)<br>&#123;<br>    <span class="hljs-attribute">txt</span>=txt + x[i].childNodes[0].nodeValue + <span class="hljs-string">&quot;&lt;br&gt;&quot;</span>;<br>&#125;<br>document.getElementById(<span class="hljs-string">&quot;myDiv&quot;</span>).<span class="hljs-attribute">innerHTML</span>=txt;<br></code></pre></td></tr></table></figure></li></ul><h5 id="4-6-4ã€onreadystatechangeäº‹ä»¶"><a href="#4-6-4ã€onreadystatechangeäº‹ä»¶" class="headerlink" title="4.6.4ã€onreadystatechangeäº‹ä»¶"></a>4.6.4ã€onreadystatechangeäº‹ä»¶</h5><p>å­˜å‚¨å‡½æ•°ï¼ˆæˆ–å‡½æ•°åï¼‰ï¼Œæ¯å½“ readyState å±æ€§æ”¹å˜æ—¶ï¼Œå°±ä¼šè°ƒç”¨è¯¥å‡½æ•°ã€‚åœ¨ onreadystatechange äº‹ä»¶ä¸­ï¼Œæˆ‘ä»¬è§„å®šå½“æœåŠ¡å™¨å“åº”å·²åšå¥½è¢«å¤„ç†çš„å‡†å¤‡æ—¶æ‰€æ‰§è¡Œçš„ä»»åŠ¡ã€‚å½“ readyState ç­‰äº 4 ä¸”çŠ¶æ€ä¸º 200 æ—¶ï¼Œè¡¨ç¤ºå“åº”å·²å°±ç»ªï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs routeros">xmlhttp.<span class="hljs-attribute">onreadystatechange</span>=function()<br>&#123;<br>    <span class="hljs-keyword">if</span> (xmlhttp.<span class="hljs-attribute">readyState</span>==4 &amp;&amp; xmlhttp.<span class="hljs-attribute">status</span>==200)<br>    &#123;<br>        document.getElementById(<span class="hljs-string">&quot;myDiv&quot;</span>).<span class="hljs-attribute">innerHTML</span>=xmlhttp.responseText;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong> onreadystatechange äº‹ä»¶è¢«è§¦å‘ 4 æ¬¡ï¼ˆ0 - 4ï¼‰, åˆ†åˆ«æ˜¯ï¼š 0-1ã€1-2ã€2-3ã€3-4ï¼Œå¯¹åº”ç€ readyState çš„æ¯ä¸ªå˜åŒ–ã€‚</p><p>ä½¿ç”¨å›è°ƒå‡½æ•°</p><p>å›è°ƒå‡½æ•°æ˜¯ä¸€ç§ä»¥å‚æ•°å½¢å¼ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°çš„å‡½æ•°ã€‚</p><p>å¦‚æœæ‚¨çš„ç½‘ç«™ä¸Šå­˜åœ¨å¤šä¸ª AJAX ä»»åŠ¡ï¼Œé‚£ä¹ˆæ‚¨åº”è¯¥ä¸ºåˆ›å»º XMLHttpRequest å¯¹è±¡ç¼–å†™ä¸€ä¸ªæ ‡å‡†çš„å‡½æ•°ï¼Œå¹¶ä¸ºæ¯ä¸ª AJAX ä»»åŠ¡è°ƒç”¨è¯¥å‡½æ•°ã€‚</p><p>è¯¥å‡½æ•°è°ƒç”¨<code>åº”è¯¥åŒ…å« URL</code> ä»¥åŠ<code>å‘ç”Ÿ onreadystatechange äº‹ä»¶æ—¶æ‰§è¡Œçš„ä»»åŠ¡</code>ï¼ˆæ¯æ¬¡è°ƒç”¨å¯èƒ½ä¸å°½ç›¸åŒï¼‰ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs routeros">function myFunction()<br>&#123;<br>    loadXMLDoc(<span class="hljs-string">&quot;/try/ajax/ajax_info.txt&quot;</span>,function()<br>    &#123;<br>        <span class="hljs-keyword">if</span> (xmlhttp.<span class="hljs-attribute">readyState</span>==4 &amp;&amp; xmlhttp.<span class="hljs-attribute">status</span>==200)<br>        &#123;<br>            document.getElementById(<span class="hljs-string">&quot;myDiv&quot;</span>).<span class="hljs-attribute">innerHTML</span>=xmlhttp.responseText;<br>        &#125;<br>    &#125;);<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="4-7ã€Ajaxæ­£ç¡®çš„ä»£ç æµç¨‹"><a href="#4-7ã€Ajaxæ­£ç¡®çš„ä»£ç æµç¨‹" class="headerlink" title="4.7ã€Ajaxæ­£ç¡®çš„ä»£ç æµç¨‹"></a>4.7ã€Ajaxæ­£ç¡®çš„ä»£ç æµç¨‹</h4><p>ç”±äºæˆ‘ä»¬é‡‡ç”¨çš„æ˜¯å¼‚æ­¥è¯·æ±‚ï¼Œå¼‚æ­¥è¯·æ±‚å‘é€send()å,ä¸ä¼šç­‰å¾…å“åº”ç»“æœçš„è¿”å›ï¼Œè€Œç›´æ¥ç»§ç»­æ‰§è¡Œä¸‹é¢çš„ä»£ç ï¼›å½“æ‰§è¡Œajax.responseTextçš„æ—¶å€™æœ‰å¯èƒ½æœåŠ¡å™¨è¿˜æ²¡æœ‰å“åº”ç»“æœ;</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getTime</span>(<span class="hljs-params"></span>) </span>&#123;<br><span class="hljs-comment">//1ã€è·å–ajaxå¯¹è±¡</span><br>ajax=createAjax();<br><span class="hljs-comment">//éªŒè¯å‡½æ•°æ‰§è¡Œ</span><br><br><span class="hljs-built_in">console</span>.debug(ajax);<br><span class="hljs-comment">//2ã€ä»¥å¼‚æ­¥çš„æ–¹å¼å‘å‡ºgetè¯·æ±‚</span><br>ajax.open(<span class="hljs-string">&quot;GET&quot;</span>,<span class="hljs-string">&quot;/getTime&quot;</span>,<span class="hljs-literal">true</span>);<br><span class="hljs-comment">//3ã€ç›‘å¬ajaxçŠ¶æ€ï¼Œhttpå“åº”çŠ¶æ€</span><br>ajax.onreadystatechange=<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br><span class="hljs-keyword">if</span>(ajax.readyState==<span class="hljs-number">4</span>&amp;&amp;ajax.status==<span class="hljs-number">200</span>)&#123;<br><span class="hljs-comment">//ajaxå·²ç»å¤„ç†å®Œæ¯•å¹¶ä¸”httpå“åº”çŠ¶æ€æ˜¯200</span><br><span class="hljs-keyword">var</span> result=ajax.responseText;<br><span class="hljs-built_in">console</span>.debug(<span class="hljs-string">&quot;result:&quot;</span>+result);<br><span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;mytime&quot;</span>).innerHTML=result;<br>&#125;<br>&#125;<br><span class="hljs-comment">//å‘å‡ºè¯·æ±‚</span><br>ajax.send();<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="4-8ã€Ajax-Getæäº¤IEç¼“å­˜é—®é¢˜"><a href="#4-8ã€Ajax-Getæäº¤IEç¼“å­˜é—®é¢˜" class="headerlink" title="4.8ã€Ajax Getæäº¤IEç¼“å­˜é—®é¢˜"></a>4.8ã€Ajax Getæäº¤IEç¼“å­˜é—®é¢˜</h4><p>åœ¨urlåœ°å€æ·»åŠ éšæœºæ•°æˆ–è€…æ—¶é—´æˆ³</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">ajax.<span class="hljs-keyword">open</span>(<span class="hljs-string">&quot;GET&quot;</span>,<span class="hljs-string">&quot;/getTime?&quot;</span>+<span class="hljs-keyword">new</span> <span class="hljs-constructor">Date()</span>.get<span class="hljs-constructor">Time()</span>,<span class="hljs-literal">true</span>); <br></code></pre></td></tr></table></figure><h3 id="5ã€Ajax-Get"><a href="#5ã€Ajax-Get" class="headerlink" title="5ã€Ajax Get"></a>5ã€Ajax Get</h3><p>æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦é‡å¤æ¡ˆä¾‹åˆ†æ</p><h4 id="5-1ã€é¡µé¢ä»£ç "><a href="#5-1ã€é¡µé¢ä»£ç " class="headerlink" title="5.1ã€é¡µé¢ä»£ç "></a>5.1ã€é¡µé¢ä»£ç </h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;txtUserName&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;txtUserName&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;spanInfo&quot;</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">input</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;btnCheck&quot;</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;checkUserName();&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦å­˜åœ¨&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">input</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="5-2ã€JSä»£ç "><a href="#5-2ã€JSä»£ç " class="headerlink" title="5.2ã€JSä»£ç "></a>5.2ã€JSä»£ç </h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkUserName</span>(<span class="hljs-params"></span>)</span>&#123;<br><span class="hljs-keyword">var</span> xhr;<br><span class="hljs-comment">// 1 åˆ›å»ºajaxå¯¹è±¡</span><br>xhr = createAjax();<br><br><span class="hljs-comment">// 2 open</span><br><span class="hljs-keyword">var</span> userName = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;txtUserName&quot;</span>).value;<br>xhr.open(<span class="hljs-string">&quot;GET&quot;</span>,<span class="hljs-string">&quot;/isExsit?username=&quot;</span> + userName);<br><span class="hljs-comment">//éœ€è¦æ³¨æ„çš„æ˜¯getæ–¹å¼ä¸­æ–‡ä¹±ç çš„é—®é¢˜</span><br><span class="hljs-comment">// ç›‘å¬</span><br>xhr.onreadystatechange = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;<br><span class="hljs-keyword">if</span>(xhr.readyState == <span class="hljs-number">4</span> &amp;&amp; xhr.status == <span class="hljs-number">200</span>)&#123;<br><span class="hljs-keyword">var</span> info = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;spanInfo&quot;</span>);<br><span class="hljs-keyword">if</span>(xhr.responseText == <span class="hljs-string">&quot;true&quot;</span>)<br>info.innerHTML=<span class="hljs-string">&quot;ç”¨æˆ·åå·²å­˜åœ¨&quot;</span>;<br><span class="hljs-keyword">else</span> <br>info.innerHTML=<span class="hljs-string">&quot;å¯ä»¥ç”¨æ­¤ç”¨æˆ·å&quot;</span>;<br>&#125;<br>&#125;<br><span class="hljs-comment">// 3 send</span><br>xhr.send();<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="5-3ã€Servletä»£ç "><a href="#5-3ã€Servletä»£ç " class="headerlink" title="5.3ã€Servletä»£ç "></a>5.3ã€Servletä»£ç </h4><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-meta">@SuppressWarnings</span>(<span class="hljs-string">&quot;serial&quot;</span>)<br><span class="hljs-meta">@WebServlet</span>(<span class="hljs-string">&quot;/isExsit&quot;</span>)<br>public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserNameCheckServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>&#123;<br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">protected</span> void service(<span class="hljs-type">HttpServletRequest</span> req, <span class="hljs-type">HttpServletResponse</span> resp) <span class="hljs-keyword">throws</span> <span class="hljs-type">ServletException</span>, <span class="hljs-type">IOException</span> &#123;<br><span class="hljs-comment">// è·å–å‚æ•°</span><br>req.setCharacterEncoding(<span class="hljs-string">&quot;UTF-8&quot;</span>);<br>resp.setContentType(<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span>);<br><span class="hljs-type">String</span> userName = req.getParameter(<span class="hljs-string">&quot;username&quot;</span>);<br><span class="hljs-type">System</span>.out.println(userName);<br><span class="hljs-comment">// æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦å­˜åœ¨</span><br><span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;ä½ å¥½&quot;</span>.equals(userName))&#123;<br>resp.getWriter().print(<span class="hljs-literal">true</span>);<br><span class="hljs-type">System</span>.out.println(<span class="hljs-string">&quot;true&quot;</span>);<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>resp.getWriter().print(<span class="hljs-literal">false</span>);<br><span class="hljs-type">System</span>.out.println(<span class="hljs-string">&quot;false&quot;</span>);<br>&#125;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="6ã€JSONæ ¼å¼"><a href="#6ã€JSONæ ¼å¼" class="headerlink" title="6ã€JSONæ ¼å¼"></a>6ã€JSONæ ¼å¼</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>    <span class="hljs-attr">&quot;sites&quot;</span>: [<br>    &#123; <span class="hljs-attr">&quot;name&quot;</span>:<span class="hljs-string">&quot;èœé¸Ÿæ•™ç¨‹&quot;</span> , <span class="hljs-attr">&quot;url&quot;</span>:<span class="hljs-string">&quot;www.runoob.com&quot;</span> &#125;, <br>    &#123; <span class="hljs-attr">&quot;name&quot;</span>:<span class="hljs-string">&quot;google&quot;</span> , <span class="hljs-attr">&quot;url&quot;</span>:<span class="hljs-string">&quot;www.google.com&quot;</span> &#125;, <br>    &#123; <span class="hljs-attr">&quot;name&quot;</span>:<span class="hljs-string">&quot;å¾®åš&quot;</span> , <span class="hljs-attr">&quot;url&quot;</span>:<span class="hljs-string">&quot;www.weibo.com&quot;</span> &#125;<br>    ]<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™ä¸ª sites å¯¹è±¡æ˜¯åŒ…å« 3 ä¸ªç«™ç‚¹è®°å½•ï¼ˆå¯¹è±¡ï¼‰çš„æ•°ç»„ã€‚</p><h4 id="6-1ã€ä»€ä¹ˆæ˜¯-JSON-ï¼Ÿ"><a href="#6-1ã€ä»€ä¹ˆæ˜¯-JSON-ï¼Ÿ" class="headerlink" title="6.1ã€ä»€ä¹ˆæ˜¯ JSON ï¼Ÿ"></a>6.1ã€ä»€ä¹ˆæ˜¯ JSON ï¼Ÿ</h4><ul><li>JSON æŒ‡çš„æ˜¯ JavaScript å¯¹è±¡è¡¨ç¤ºæ³•ï¼ˆ<strong>J</strong>ava<strong>S</strong>cript <strong>O</strong>bject <strong>N</strong>otationï¼‰</li><li>JSON æ˜¯è½»é‡çº§çš„æ–‡æœ¬æ•°æ®äº¤æ¢æ ¼å¼ï¼ŒJSONæ˜¯ä¸€ç§ç®€å•çš„æ•°æ®æ ¼å¼ï¼Œæ¯”xmlæ›´è½»å·§</li><li>JSON ç‹¬ç«‹äºè¯­è¨€ï¼šJSON ä½¿ç”¨ Javascriptè¯­æ³•æ¥æè¿°æ•°æ®å¯¹è±¡ï¼Œä½†æ˜¯ JSON ä»ç„¶ç‹¬ç«‹äºè¯­è¨€å’Œå¹³å°ã€‚JSON è§£æå™¨å’Œ JSON åº“æ”¯æŒè®¸å¤šä¸åŒçš„ç¼–ç¨‹è¯­è¨€ã€‚ ç›®å‰éå¸¸å¤šçš„åŠ¨æ€ï¼ˆPHPï¼ŒJSPï¼Œ.NETï¼‰ç¼–ç¨‹è¯­è¨€éƒ½æ”¯æŒJSONã€‚</li><li>JSON å…·æœ‰è‡ªæˆ‘æè¿°æ€§ï¼Œæ›´æ˜“ç†è§£</li></ul><h4 id="6-2ã€mavené¡¹ç›®ä¾èµ–æ·»åŠ "><a href="#6-2ã€mavené¡¹ç›®ä¾èµ–æ·»åŠ " class="headerlink" title="6.2ã€mavené¡¹ç›®ä¾èµ–æ·»åŠ "></a>6.2ã€mavené¡¹ç›®ä¾èµ–æ·»åŠ </h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>net.sf.json-lib<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>json-lib<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.4<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">classifier</span>&gt;</span>jdk15<span class="hljs-tag">&lt;/<span class="hljs-name">classifier</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="6-3ã€XMLå’ŒJSONæ ¼å¼å¯¹æ¯”"><a href="#6-3ã€XMLå’ŒJSONæ ¼å¼å¯¹æ¯”" class="headerlink" title="6.3ã€XMLå’ŒJSONæ ¼å¼å¯¹æ¯”"></a>6.3ã€XMLå’ŒJSONæ ¼å¼å¯¹æ¯”</h4><p>æ‰“å¼€è¿™ä¸ªç½‘å€ï¼Œæ¯”è¾ƒä¸€ä¸‹XMLå’Œjsonï¼š<a href="http://www.bejson.com/xml2json/">http://www.bejson.com/xml2json/</a></p><table><thead><tr><th>xml</th><th>json</th></tr></thead><tbody><tr><td>&lt;?xml version=â€1.0â€ encoding=â€UTF-8â€ ?&gt;<br>    &lt;total&gt;50&lt;/total&gt;<br>    &lt;datas&gt;<br>        &lt;id&gt;1&lt;/id&gt;<br>        &lt;name&gt;lee&lt;/name&gt;<br>        &lt;password&gt;<strong>**\</strong><br>        &lt;email&gt;zs&lt;/email&gt;<br>        &lt;age&gt;19&lt;/age&gt;<br>        &lt;pic&gt;img/pic1.png&lt;/pic&gt;<br>        &lt;dept&gt;ITéƒ¨é—¨&lt;/dept&gt;<br>    &lt;/datas&gt;<br>    &lt;datas&gt;<br>        &lt;id&gt;2&lt;/id&gt;<br>        &lt;name&gt;wang&lt;/name&gt;<br>        &lt;password&gt; ** ** ** &lt;/password&gt;<br>        &lt;email&gt;zs&lt;/email&gt;<br>        &lt;age&gt;19&lt;/age&gt;<br>        &lt;pic&gt;img/pic2.png&lt;/pic&gt;<br>        &lt;dept&gt;ITéƒ¨é—¨&lt;/dept&gt;<br>    &lt;/datas&gt;<br>    &lt;datas&gt;<br>        &lt;id&gt;3&lt;/id&gt;<br>        &lt;name&gt;jackson&lt;/name&gt;<br>        &lt;password&gt;<strong>**\</strong><br>        &lt;email&gt;zs&lt;/email&gt;<br>        &lt;age&gt;19&lt;/age&gt;<br>        &lt;pic&gt;img/pic2.png&lt;/pic&gt;<br>        &lt;dept&gt;ITéƒ¨é—¨&lt;/dept&gt;<br>    &lt;/datas&gt;</td><td>{<br>    â€œtotalâ€: 50,                                                <br>    â€œdatasâ€: [<br>        {<br>            â€œidâ€: 1,<br>            â€œnameâ€: â€œleeâ€,<br>            â€œpasswordâ€: â€œ<strong>**</strong>â€œ,<br>            â€œemailâ€: â€œzsâ€,<br>            â€œageâ€: â€œ19â€,<br>            â€œpicâ€: â€œimg/pic1.pngâ€,<br>            â€œdeptâ€: â€œITéƒ¨é—¨â€<br>        },<br>        {<br>            â€œidâ€: 2,<br>            â€œnameâ€: â€œwangâ€,<br>            â€œpasswordâ€: â€œ<strong>**</strong>â€œ,<br>            â€œemailâ€: â€œzsâ€,<br>            â€œageâ€: â€œ19â€,<br>            â€œpicâ€: â€œimg/pic2.pngâ€,<br>            â€œdeptâ€: â€œITéƒ¨é—¨â€<br>        },<br>        {<br>            â€œidâ€: 3,a<br>            â€œnameâ€: â€œjacksonâ€,<br>            â€œpasswordâ€: â€œ<strong>**</strong>â€œ,<br>            â€œemailâ€: â€œzsâ€,<br>            â€œageâ€: â€œ19â€,<br>            â€œpicâ€: â€œimg/pic2.pngâ€,<br>            â€œdeptâ€: â€œITéƒ¨é—¨â€<br>        }<br>    ]<br>}</td></tr></tbody></table><p>æ¯”è¾ƒåï¼Œå¯ä»¥å‘ç°ï¼Œxmlæ˜¯ä¸€ä¸ªå®Œç¾ä¸»ä¹‰è€…ï¼Œç„¶è€Œå®ƒä¹¦å†™èµ·æ¥ï¼Œè¦æ±‚ä¹Ÿæ˜¯æ¯”è¾ƒè‹›åˆ»çš„æ˜¯å§ï¼Œé‚£ä¹ˆjsonç›¸æ¯”è¾ƒè€Œå·²ï¼Œæ˜¯æ¯”è¾ƒè½»é‡çº§çš„ã€‚</p><p><strong>ä¸ XML ç›¸åŒä¹‹å¤„ï¼š</strong></p><blockquote><p>â‘ ï¼šJSON æ˜¯çº¯æ–‡æœ¬ã€                                    â‘¡ï¼šJSON å…·æœ‰â€è‡ªæˆ‘æè¿°æ€§â€ï¼ˆäººç±»å¯è¯»ï¼‰ã€</p><p>â‘¢ï¼šJSON å…·æœ‰å±‚çº§ç»“æ„ï¼ˆå€¼ä¸­å­˜åœ¨å€¼ï¼‰ã€ â‘£ï¼šJSON å¯é€šè¿‡ JavaScript è¿›è¡Œè§£æã€</p><p>â‘¤ï¼šJSON æ•°æ®å¯ä½¿ç”¨ AJAX è¿›è¡Œä¼ è¾“</p></blockquote><p><strong>ä¸ XML ä¸åŒä¹‹å¤„ï¼š</strong></p><blockquote><p>â‘ ï¼šæ²¡æœ‰ç»“æŸæ ‡ç­¾            â‘¡ï¼šæ›´çŸ­</p><p>â‘¢ï¼šè¯»å†™çš„é€Ÿåº¦æ›´å¿«        â‘£ï¼šèƒ½å¤Ÿä½¿ç”¨å†…å»ºçš„ JavaScript eval() æ–¹æ³•è¿›è¡Œè§£æ</p><p>â‘¤ï¼šä½¿ç”¨æ•°ç»„                    â‘¥ï¼šä¸ä½¿ç”¨ä¿ç•™å­—</p></blockquote><h4 id="6-4ã€ä¸ºä»€ä¹ˆä½¿ç”¨-JSONï¼Ÿ"><a href="#6-4ã€ä¸ºä»€ä¹ˆä½¿ç”¨-JSONï¼Ÿ" class="headerlink" title="6.4ã€ä¸ºä»€ä¹ˆä½¿ç”¨ JSONï¼Ÿ"></a>6.4ã€ä¸ºä»€ä¹ˆä½¿ç”¨ JSONï¼Ÿ</h4><p>å¯¹äº AJAX åº”ç”¨ç¨‹åºæ¥è¯´ï¼ŒJSON æ¯” XML æ›´å¿«æ›´æ˜“ä½¿ç”¨ï¼š</p><p>ä½¿ç”¨ XMLï¼š</p><blockquote><ol><li>è¯»å– XML æ–‡æ¡£</li><li>ä½¿ç”¨ XML DOM æ¥å¾ªç¯éå†æ–‡æ¡£</li><li>è¯»å–å€¼å¹¶å­˜å‚¨åœ¨å˜é‡ä¸­</li></ol></blockquote><p>ä½¿ç”¨ JSONï¼š</p><blockquote><ol><li>è¯»å– JSON å­—ç¬¦ä¸²</li><li>ç”¨ eval() å¤„ç† JSON å­—ç¬¦ä¸²</li></ol></blockquote><h4 id="6-5ã€æ ‡å‡†jsonå­—ç¬¦ä¸²çš„æ ¼å¼"><a href="#6-5ã€æ ‡å‡†jsonå­—ç¬¦ä¸²çš„æ ¼å¼" class="headerlink" title="6.5ã€æ ‡å‡†jsonå­—ç¬¦ä¸²çš„æ ¼å¼"></a>6.5ã€æ ‡å‡†jsonå­—ç¬¦ä¸²çš„æ ¼å¼</h4><p>JSON æ–‡ä»¶çš„<code>æ–‡ä»¶ç±»å‹</code>æ˜¯ â€œ.jsonâ€ã€JSON æ–‡æœ¬çš„ <code>MIME ç±»å‹</code>æ˜¯ â€œapplication/jsonâ€</p><ul><li>å¦‚æœæ˜¯å¤šä¸ªå¯¹è±¡,æ•°ç»„[{},{}]</li><li>å¦‚æœæ˜¯å•ä¸ªå¯¹è±¡,{}</li><li>æ•°æ®ç±»å‹:å­—ç¬¦ä¸²,æ•°å€¼,å¸ƒå°”å€¼,null,å¯¹è±¡,æ•°ç»„</li><li>keyä¸€å®šè¦æ·»åŠ åŒå¼•å·â€â€ï¼Œå•å¼•å·â€™â€™ä¸è¡Œçš„ï¼Œå¦‚ä¸Šé¢çš„idï¼Œname</li><li>JSONå€¼ï¼šæ•°å€¼ã€å­—ç¬¦ä¸²ã€é€»è¾‘å€¼(true|false)ã€æ•°ç»„ã€å¯¹è±¡ã€nullå€¼</li><li>å¦‚æœvalueæ˜¯å¸ƒå°”å€¼ï¼Œæ•°å€¼ï¼Œå¯ä»¥ä¸åŠ â€â€</li><li>å¦‚æœvalueæ˜¯å­—ç¬¦ä¸²ï¼Œä¸€å®šè¦åŠ â€â€</li><li>ç»“æŸçš„ä½ç½®ä¸èƒ½,å‰é¢å±æ€§åˆ†å‰²éƒ½æ˜¯,</li></ul><h4 id="6-6ã€JSONè½¬æ¢ä¸ºJavaScriptå¯¹è±¡"><a href="#6-6ã€JSONè½¬æ¢ä¸ºJavaScriptå¯¹è±¡" class="headerlink" title="6.6ã€JSONè½¬æ¢ä¸ºJavaScriptå¯¹è±¡"></a>6.6ã€JSONè½¬æ¢ä¸ºJavaScriptå¯¹è±¡</h4><p>JSON æ–‡æœ¬æ ¼å¼åœ¨è¯­æ³•ä¸Šä¸åˆ›å»º JavaScript å¯¹è±¡çš„ä»£ç ç›¸åŒã€‚</p><p>ç”±äºè¿™ç§ç›¸ä¼¼æ€§ï¼Œæ— éœ€è§£æå™¨ï¼ŒJavaScript ç¨‹åºèƒ½å¤Ÿä½¿ç”¨å†…å»ºçš„ eval() å‡½æ•°ï¼Œç”¨ JSON æ•°æ®æ¥ç”ŸæˆåŸç”Ÿçš„ JavaScript å¯¹è±¡ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//å®šä¹‰jsonæ ¼å¼</span><br><span class="hljs-keyword">var</span> json=<span class="hljs-string">&#x27;&#123;&quot;id&quot;:1001,&quot;name&quot;:&quot;Kongwei_Liao&quot;&#125;&#x27;</span>;<span class="hljs-comment">//jsonå­—ç¬¦ä¸²</span><br><span class="hljs-built_in">console</span>.debug(json);<br><span class="hljs-comment">//console.debug(json.id);//Error</span><br><span class="hljs-built_in">console</span>.debug(json.length);<span class="hljs-comment">//33</span><br><br><span class="hljs-comment">//æŠŠjsonå­—ç¬¦ä¸²è½¬æ¢å¯¹è±¡</span><br><span class="hljs-keyword">var</span> json2 =<span class="hljs-built_in">eval</span>(<span class="hljs-string">&quot;(&quot;</span>+json+<span class="hljs-string">&quot;)&quot;</span>);<span class="hljs-comment">//jsonå­—ç¬¦ä¸²è½¬å¯¹è±¡</span><br><span class="hljs-built_in">console</span>.debug(json2);<br><span class="hljs-built_in">console</span>.debug(json2.id);<span class="hljs-comment">//1001</span><br><span class="hljs-built_in">console</span>.debug(json2.name);<span class="hljs-comment">//Kongwei_Liao</span><br><br><span class="hljs-comment">//jsonå¯¹è±¡</span><br><span class="hljs-keyword">var</span> json3 = &#123;<span class="hljs-string">&quot;id&quot;</span>:<span class="hljs-number">1002</span>,<span class="hljs-string">&quot;name&quot;</span>:<span class="hljs-string">&quot;æå››&quot;</span>&#125;;<span class="hljs-comment">//JSONå¯¹è±¡</span><br><span class="hljs-built_in">console</span>.debug(json3);<br><span class="hljs-built_in">console</span>.debug(json3.id);<br><span class="hljs-built_in">console</span>.debug(json3.name);<br><br><span class="hljs-comment">//å®šä¹‰å¯¹è±¡</span><br><span class="hljs-keyword">var</span> obj = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Object</span>();<br>obj.id = <span class="hljs-number">1003</span>;<br>obj.name=<span class="hljs-string">&quot;xxxxx&quot;</span>;<br><span class="hljs-built_in">console</span>.debug(obj);<br><span class="hljs-built_in">console</span>.debug(obj.id);<br><span class="hljs-built_in">console</span>.debug(obj.name);<br><span class="hljs-comment">//console.debug(obj.toSource);</span><br><br><span class="hljs-comment">//json æ•°ç»„å­—ç¬¦ä¸²</span><br><span class="hljs-keyword">var</span> jsonArray = <span class="hljs-string">&#x27;[&#123;id:1,&quot;name&quot;:&quot;xxxx&quot;&#125;,&#123;&quot;id&quot;:2,&quot;name&quot;:&quot;yyyyy&quot;&#125;]&#x27;</span>;<br><span class="hljs-comment">//var jsonArrs = eval(&quot;(&quot;+jsonArray+&quot;)&quot;);</span><br><span class="hljs-keyword">var</span> jsonArrs = <span class="hljs-built_in">JSON</span>.parse(jsonArray);<br><span class="hljs-comment">//JSON.parse()å¸¸ç”¨äºä¸æœåŠ¡ç«¯äº¤æ¢æ•°æ®ï¼Œæ¥å—çš„æœåŠ¡å™¨æ•°æ®ä¸€èˆ¬éƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œå°†æ•°æ®è½¬æ¢ä¸ºJavaScriptå¯¹è±¡</span><br><span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span> ;i &lt;jsonArrs.length;i++)&#123;<br><span class="hljs-built_in">console</span>.debug(jsonArrs[i].id+<span class="hljs-string">&quot;,&quot;</span>+jsonArrs[i].name);<br>&#125;<br><br><span class="hljs-keyword">var</span> obj = &#123; <span class="hljs-string">&quot;name&quot;</span>:<span class="hljs-string">&quot;runoob&quot;</span>, <span class="hljs-string">&quot;alexa&quot;</span>:<span class="hljs-number">10000</span>, <span class="hljs-string">&quot;site&quot;</span>:<span class="hljs-string">&quot;www.runoob.com&quot;</span>&#125;;<br><span class="hljs-keyword">var</span> myJSON = <span class="hljs-built_in">JSON</span>.stringify(obj);<br><span class="hljs-comment">//åœ¨å‘æœåŠ¡å™¨å‘é€æ•°æ®æ—¶ä¸€èˆ¬æ˜¯å­—ç¬¦ä¸²ã€‚</span><br><span class="hljs-comment">//æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ JSON.stringify() æ–¹æ³•å°† JavaScript å¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚ </span><br><br><br><br><br><span class="hljs-comment">//åµŒå¥—JSONå¯¹è±¡è®¿é—®</span><br>myObj = &#123;<br>    <span class="hljs-string">&quot;name&quot;</span>:<span class="hljs-string">&quot;ç™¾åº¦&quot;</span>,<br>    <span class="hljs-string">&quot;alexa&quot;</span>:<span class="hljs-number">10086</span>,<br>    <span class="hljs-string">&quot;sites&quot;</span>: &#123;<br>        <span class="hljs-string">&quot;site1&quot;</span>:<span class="hljs-string">&quot;www.baidu.com&quot;</span>,<br>        <span class="hljs-string">&quot;site2&quot;</span>:<span class="hljs-string">&quot;m.baidu.com&quot;</span>,<br>        <span class="hljs-string">&quot;site3&quot;</span>:<span class="hljs-string">&quot;c.baidu.com&quot;</span><br>    &#125;<br>&#125;<br><span class="hljs-comment">//è®¿é—®</span><br>x = myObj.sites.site1;<span class="hljs-comment">//ä½¿ç”¨ï¼ˆ.ï¼‰</span><br><span class="hljs-comment">// æˆ–è€…</span><br>x = myObj.sites[<span class="hljs-string">&quot;site1&quot;</span>];<span class="hljs-comment">//ä½¿ç”¨ï¼ˆ[]ï¼‰</span><br><br><span class="hljs-comment">//ä¿®æ”¹</span><br>myObj.sites.site1=<span class="hljs-string">&quot;kongwei-liao.cn&quot;</span>;<br>myObj.sites[<span class="hljs-string">&quot;site1&quot;</span>]=<span class="hljs-string">&quot;kongwei-liao.cn&quot;</span>;<br><br><span class="hljs-comment">//åˆ é™¤å¯¹è±¡å±æ€§</span><br><span class="hljs-keyword">delete</span> myObj.sites.site1;<br><span class="hljs-keyword">delete</span> myObj.sites[<span class="hljs-string">&quot;site1&quot;</span>]<br><br>myObj = &#123;<br>    <span class="hljs-string">&quot;name&quot;</span>:<span class="hljs-string">&quot;ç½‘ç«™&quot;</span>,<br>    <span class="hljs-string">&quot;num&quot;</span>:<span class="hljs-number">3</span>,<br>    <span class="hljs-string">&quot;sites&quot;</span>: [<br>        &#123; <span class="hljs-string">&quot;name&quot;</span>:<span class="hljs-string">&quot;Google&quot;</span>, <span class="hljs-string">&quot;info&quot;</span>:[ <span class="hljs-string">&quot;Android&quot;</span>, <span class="hljs-string">&quot;Google æœç´¢&quot;</span>, <span class="hljs-string">&quot;Google ç¿»è¯‘&quot;</span> ] &#125;,<br>        &#123; <span class="hljs-string">&quot;name&quot;</span>:<span class="hljs-string">&quot;Runoob&quot;</span>, <span class="hljs-string">&quot;info&quot;</span>:[ <span class="hljs-string">&quot;èœé¸Ÿæ•™ç¨‹&quot;</span>, <span class="hljs-string">&quot;èœé¸Ÿå·¥å…·&quot;</span>, <span class="hljs-string">&quot;èœé¸Ÿå¾®ä¿¡&quot;</span> ] &#125;,<br>        &#123; <span class="hljs-string">&quot;name&quot;</span>:<span class="hljs-string">&quot;Taobao&quot;</span>, <span class="hljs-string">&quot;info&quot;</span>:[ <span class="hljs-string">&quot;æ·˜å®&quot;</span>, <span class="hljs-string">&quot;ç½‘è´­&quot;</span> ] &#125;<br>    ]<br>&#125;<br><span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> myObj.sites) &#123;<br>    x += <span class="hljs-string">&quot;&lt;h1&gt;&quot;</span> + myObj.sites[i].name + <span class="hljs-string">&quot;&lt;/h1&gt;&quot;</span>;<br>    <span class="hljs-keyword">for</span> (j <span class="hljs-keyword">in</span> myObj.sites[i].info) &#123;<br>        x += myObj.sites[i].info[j] + <span class="hljs-string">&quot;&lt;br&gt;&quot;</span>;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//è§£æå‡½æ•°</span><br><span class="hljs-comment">//JSON ä¸å…è®¸åŒ…å«å‡½æ•°ï¼Œä½†ä½ å¯ä»¥å°†å‡½æ•°ä½œä¸ºå­—ç¬¦ä¸²å­˜å‚¨ï¼Œä¹‹åå†å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå‡½æ•°ã€‚</span><br><span class="hljs-keyword">var</span> text = <span class="hljs-string">&#x27;&#123; &quot;name&quot;:&quot;Runoob&quot;, &quot;alexa&quot;:&quot;function () &#123;return 10000;&#125;&quot;, &quot;site&quot;:&quot;www.runoob.com&quot;&#125;&#x27;</span>;<br><span class="hljs-keyword">var</span> obj = <span class="hljs-built_in">JSON</span>.parse(text);<br>obj.alexa = <span class="hljs-built_in">eval</span>(<span class="hljs-string">&quot;(&quot;</span> + obj.alexa + <span class="hljs-string">&quot;)&quot;</span>);<br> <br><span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;demo&quot;</span>).innerHTML = obj.name + <span class="hljs-string">&quot; Alexa æ’åï¼š&quot;</span> + obj.alexa();<br><br></code></pre></td></tr></table></figure><p>JSON.parse(jsonArray) è¿™ç§è½¬æ¢è¦æ±‚jsonArrayè¿™ä¸ªå­—ç¬¦ä¸²é‡Œé¢çš„key å¿…é¡»æ˜¯æ ‡å‡†çš„ï¼Œéœ€è¦æ·»åŠ  åŒå¼•å·;<a href="https://c.runoob.com/front-end/53">æ ¼å¼éªŒè¯å·¥å…·</a></p><h3 id="7ã€Ajax-Post"><a href="#7ã€Ajax-Post" class="headerlink" title="7ã€Ajax Post"></a>7ã€Ajax Post</h3><p>Get è¯·æ±‚ä¸­æ–‡ä¹±ç ï¼šé…ç½®tomcatï¼šURIEncoding=â€UTF-8â€å°±å¯ä»¥è§£å†³</p><p>æˆ–  ç”¨å‰å°encodeURI(url)ï¼Œå†ä½¿ç”¨åå°URLDecoder.decode(url,â€utf8â€);</p><blockquote><p>Tomcatä¸­é…ç½®URIEncoding=â€UTF-8â€æ¥å¤„ç†ä¸­æ–‡çš„å¤„ç†</p><p>æ‰“å¼€ C:\Program Files\Apache Software Foundation\Tomcat 7.0\confserver.xml æ–‡ä»¶ï¼Œæ›´æ”¹ä¸¤ä¸ªåœ°æ–¹ã€‚</p><p>é…ç½®ä¸€ï¼šæ·»åŠ  URIEncoding=â€UTF-8â€</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">&lt;Connector <span class="hljs-attribute">URIEncoding</span>=<span class="hljs-string">&quot;UTF-8&quot;</span> <span class="hljs-attribute">connectionTimeout</span>=<span class="hljs-string">&quot;20000&quot;</span> <span class="hljs-attribute">port</span>=<span class="hljs-string">&quot;8081&quot;</span> <span class="hljs-attribute">protocol</span>=<span class="hljs-string">&quot;HTTP/1.1&quot;</span> <span class="hljs-attribute">redirectPort</span>=<span class="hljs-string">&quot;8443&quot;</span>/&gt;<br></code></pre></td></tr></table></figure><p>é…ç½®äºŒï¼šæ·»åŠ  URIEncoding=â€UTF-8â€</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">&lt;Connector <span class="hljs-attribute">URIEncoding</span>=<span class="hljs-string">&quot;UTF-8&quot;</span> <span class="hljs-attribute">port</span>=<span class="hljs-string">&quot;8009&quot;</span> <span class="hljs-attribute">protocol</span>=<span class="hljs-string">&quot;AJP/1.3&quot;</span> <span class="hljs-attribute">redirectPort</span>=<span class="hljs-string">&quot;8443&quot;</span>/&gt;<br></code></pre></td></tr></table></figure><p>é…ç½®åé‡å¯tomcatã€‚</p></blockquote><p>Postè¯·æ±‚ä¸­æ–‡ä¹±ç ï¼šreq.setCharacterEncoding(â€œutf-8â€);</p><p>ä¸ POST ç›¸æ¯”ï¼ŒGET æ›´ç®€å•ä¹Ÿæ›´å¿«ï¼Œå¹¶ä¸”åœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹éƒ½èƒ½ç”¨ã€‚</p><p>ç„¶è€Œï¼Œåœ¨ä»¥ä¸‹æƒ…å†µä¸­ï¼Œè¯·ä½¿ç”¨ POST è¯·æ±‚ï¼š</p><ul><li>æ— æ³•ä½¿ç”¨ç¼“å­˜æ–‡ä»¶ï¼ˆæ›´æ–°æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶æˆ–æ•°æ®åº“ï¼‰</li><li>å‘æœåŠ¡å™¨å‘é€å¤§é‡æ•°æ®ï¼ˆPOST æ²¡æœ‰æ•°æ®é‡é™åˆ¶ï¼‰</li><li>å‘é€åŒ…å«æœªçŸ¥å­—ç¬¦çš„ç”¨æˆ·è¾“å…¥æ—¶ï¼ŒPOST æ¯” GET æ›´ç¨³å®šä¹Ÿæ›´å¯é </li></ul><h4 id="7-1ã€ä¼ ç»Ÿè¡¨å•é»˜è®¤çš„æäº¤å±æ€§"><a href="#7-1ã€ä¼ ç»Ÿè¡¨å•é»˜è®¤çš„æäº¤å±æ€§" class="headerlink" title="7.1ã€ä¼ ç»Ÿè¡¨å•é»˜è®¤çš„æäº¤å±æ€§"></a>7.1ã€ä¼ ç»Ÿè¡¨å•é»˜è®¤çš„æäº¤å±æ€§</h4><p>å¦‚æœéœ€è¦åƒ HTML è¡¨å•é‚£æ · POST æ•°æ®ï¼Œè¯·ä½¿ç”¨ setRequestHeader() æ¥æ·»åŠ  HTTP å¤´ã€‚ç„¶ååœ¨ send() æ–¹æ³•ä¸­è§„å®šæ‚¨å¸Œæœ›å‘é€çš„æ•°æ®ï¼š</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-tag">xmlhttp</span><span class="hljs-selector-class">.open</span>(<span class="hljs-string">&quot;POST&quot;</span>,<span class="hljs-string">&quot;/try/ajax/demo_post2.php&quot;</span>,true); <br><span class="hljs-selector-tag">xmlhttp</span><span class="hljs-selector-class">.setRequestHeader</span>(<span class="hljs-string">&quot;Content-type&quot;</span>,<span class="hljs-string">&quot;application/x-www-form-urlencoded&quot;</span>); <span class="hljs-selector-tag">xmlhttp</span><span class="hljs-selector-class">.send</span>(<span class="hljs-string">&quot;fname=Henry&amp;lname=Ford&quot;</span>);<br></code></pre></td></tr></table></figure><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">Content-Type</span>=<span class="hljs-string">&quot;application/x-www-form-urlencoded&quot;</span><br><span class="hljs-attr">enctype</span>=<span class="hljs-string">&quot;application/x-www-form-urlencoded&quot;</span><br></code></pre></td></tr></table></figure><p>æµè§ˆå™¨è®¿é—®çš„æ—¶å€™ï¼Œè¿™ä¸ªå±æ€§é»˜è®¤ä¸å†™,ç”±æµè§ˆå™¨è‡ªåŠ¨æ·»åŠ </p><h4 id="7-2ã€Ajax-postå¿…é¡»é¢å¤–æäº¤è¯·æ±‚å¤´"><a href="#7-2ã€Ajax-postå¿…é¡»é¢å¤–æäº¤è¯·æ±‚å¤´" class="headerlink" title="7.2ã€Ajax postå¿…é¡»é¢å¤–æäº¤è¯·æ±‚å¤´"></a>7.2ã€Ajax postå¿…é¡»é¢å¤–æäº¤è¯·æ±‚å¤´</h4><p>æ‰èƒ½å¾—åˆ°æ•°æ®ï¼Œå¸è½½openæ–¹æ³•ä¹‹å</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-tag">ajax</span><span class="hljs-selector-class">.setRequestHeader</span>(<span class="hljs-string">&quot;Content-type&quot;</span>,<span class="hljs-string">&quot;application/x-www-form-urlencoded&quot;</span>);<br></code></pre></td></tr></table></figure><p> <a href="http://www.runoob.com/http/http-content-type.html">è¯´æ˜æ–‡æ¡£</a></p><h4 id="7-3ã€é¡µé¢ä»£ç "><a href="#7-3ã€é¡µé¢ä»£ç " class="headerlink" title="7.3ã€é¡µé¢ä»£ç "></a>7.3ã€é¡µé¢ä»£ç </h4><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs stata">&lt;<span class="hljs-keyword">form</span>&gt;<br>ç”¨æˆ·åï¼š&lt;<span class="hljs-keyword">input</span> <span class="hljs-keyword">type</span>=<span class="hljs-string">&quot;text&quot;</span> id=<span class="hljs-string">&quot;uname&quot;</span> name=<span class="hljs-string">&quot;uname&quot;</span> value=<span class="hljs-string">&quot;lee&quot;</span> /&gt;<br>&lt;<span class="hljs-keyword">br</span>/&gt;<br>å¯†ç ï¼š&lt;<span class="hljs-keyword">input</span> <span class="hljs-keyword">type</span>=<span class="hljs-string">&quot;text&quot;</span> id=<span class="hljs-string">&quot;pwd&quot;</span> name=<span class="hljs-string">&quot;pwd&quot;</span> value=<span class="hljs-string">&quot;l23456&quot;</span> /&gt;<br>&lt;<span class="hljs-keyword">br</span>/&gt;<br>&lt;<span class="hljs-keyword">input</span> <span class="hljs-keyword">type</span>=<span class="hljs-string">&quot;button&quot;</span> id=<span class="hljs-string">&quot;btnSubmit&quot;</span> value=<span class="hljs-string">&quot;æäº¤&quot;</span>  onclick=<span class="hljs-string">&quot;login();&quot;</span>/&gt;<br>&lt;/<span class="hljs-keyword">form</span>&gt;<br></code></pre></td></tr></table></figure><h4 id="7-4ã€JSä»£ç "><a href="#7-4ã€JSä»£ç " class="headerlink" title="7.4ã€JSä»£ç "></a>7.4ã€JSä»£ç </h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// å¼‚æ­¥çš„æ–¹å¼è¯·æ±‚æ•°æ®</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">login</span>(<span class="hljs-params"></span>)</span>&#123;<br><span class="hljs-comment">// 1 åˆ›å»ºajaxå¯¹è±¡</span><br><span class="hljs-keyword">var</span> xhr = createAjax();<br><br><span class="hljs-comment">// 2 open</span><br><span class="hljs-keyword">var</span> uname = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;uname&quot;</span>).value;<br><span class="hljs-keyword">var</span> pwd = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;pwd&quot;</span>).value;<br><span class="hljs-keyword">var</span> strParams = <span class="hljs-string">&quot;uname=&quot;</span>+uname + <span class="hljs-string">&quot;&amp;pwd=&quot;</span>+pwd;<br>xhr.open(<span class="hljs-string">&quot;POST&quot;</span>,<span class="hljs-string">&quot;/Login&quot;</span>,<span class="hljs-literal">true</span>);<br><span class="hljs-comment">//xhr.open(&quot;GET&quot;,&quot;/Login?&quot;+strParams,true);</span><br><br><span class="hljs-comment">// 4 ç›‘å¬</span><br>xhr.onreadystatechange = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;<br><span class="hljs-comment">// åˆ¤æ–­çŠ¶æ€</span><br><span class="hljs-keyword">if</span>(xhr.readyState == <span class="hljs-number">4</span> &amp;&amp; xhr.status == <span class="hljs-number">200</span>)&#123;<br><span class="hljs-comment">//console.debug(xhr.responseText);</span><br><span class="hljs-built_in">console</span>.debug(<span class="hljs-keyword">typeof</span> xhr.responseText);<br><span class="hljs-keyword">var</span> jsonObj = <span class="hljs-built_in">JSON</span>.parse(xhr.responseText);<br><span class="hljs-built_in">console</span>.debug(<span class="hljs-string">&quot;code:&quot;</span> + jsonObj.code);<br><span class="hljs-built_in">console</span>.debug(<span class="hljs-string">&quot;msg:&quot;</span> + jsonObj.msg);<br>&#125;<br>&#125;<br><br>xhr.setRequestHeader(<span class="hljs-string">&quot;Content-Type&quot;</span>,<span class="hljs-string">&quot;application/x-www-form-urlencoded&quot;</span>);<br><span class="hljs-comment">// 3 send</span><br>xhr.send(strParams);<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="7-5ã€Servletä»£ç "><a href="#7-5ã€Servletä»£ç " class="headerlink" title="7.5ã€Servletä»£ç "></a>7.5ã€Servletä»£ç </h4><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-comment">//Ajaxçš„è¯·æ±‚ä¸è¦åœ¨ä»£ç ä¸­è·³è½¬</span><br><span class="hljs-comment">//å¦‚æœè·³è½¬ä¼šå‡ºç°ä¸¤ç§æƒ…å†µ(1.æŠ¥é”™ 2.æŠŠè·³è½¬çš„æ•´ä¸ªé¡µé¢å½“åšä¸€ä¸ªå­—ç¬¦ä¸²è¿”å›å›å»)</span><br><span class="hljs-comment">//ä½ æƒ³æŠŠä»€ä¹ˆæ•°æ®ç»™å‰ç«¯ï¼Œç›´æ¥é€šè¿‡æµçš„æ–¹æ³•æŠŠå€¼è¾“å‡ºå»</span><br><br>@<span class="hljs-constructor">WebServlet(<span class="hljs-string">&quot;/Login&quot;</span>)</span><br>public <span class="hljs-keyword">class</span> LoginSer extends HttpServlet &#123;<br><br>@Override<br>protected void <span class="hljs-keyword">do</span><span class="hljs-constructor">Post(HttpServletRequest <span class="hljs-params">req</span>, HttpServletResponse <span class="hljs-params">resp</span>)</span> throws ServletException, IOException &#123;<br><span class="hljs-comment">// è¿”å›å€¼è¯´æ˜</span><br><span class="hljs-comment">// code: 100 æˆåŠŸ  200 é”™è¯¯  </span><br><span class="hljs-comment">// msg:è‡ªå®šä¹‰æ¶ˆæ¯</span><br>req.set<span class="hljs-constructor">CharacterEncoding(<span class="hljs-string">&quot;UTF-8&quot;</span>)</span>;<br>resp.set<span class="hljs-constructor">CharacterEncoding(<span class="hljs-string">&quot;UTF-8&quot;</span>)</span>;<br>resp.set<span class="hljs-constructor">ContentType(<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span>)</span>;<br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(req.get<span class="hljs-constructor">ContentType()</span>);<br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(resp.get<span class="hljs-constructor">ContentType()</span>);<br><br><span class="hljs-comment">// è¿”å›å€¼</span><br>JSONObject jsonRet = <span class="hljs-keyword">new</span> <span class="hljs-constructor">JSONObject()</span>;<br>jsonRet.put(<span class="hljs-string">&quot;code&quot;</span>, <span class="hljs-string">&quot;200&quot;</span>);<br>jsonRet.put(<span class="hljs-string">&quot;msg&quot;</span>, <span class="hljs-string">&quot;ç™»å½•å¤±è´¥&quot;</span>);<br><br><span class="hljs-comment">// 1  è·å–å‚æ•°</span><br>String uname = req.get<span class="hljs-constructor">Parameter(<span class="hljs-string">&quot;uname&quot;</span>)</span>;<br>String pwd = req.get<span class="hljs-constructor">Parameter(<span class="hljs-string">&quot;pwd&quot;</span>)</span>;<br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(uname + <span class="hljs-string">&quot;-&quot;</span> + pwd);<br><br><span class="hljs-comment">// 2  éªŒè¯ç”¨æˆ·åå’Œå¯†ç æ˜¯å¦æ­£ç¡® ï¼ˆæ¨¡æ‹Ÿï¼‰</span><br><span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;admin&quot;</span>.equals(uname)<span class="hljs-operator"> &amp;&amp; </span><span class="hljs-string">&quot;123&quot;</span>.equals(pwd)) &#123;<br>jsonRet.put(<span class="hljs-string">&quot;code&quot;</span>, <span class="hljs-string">&quot;100&quot;</span>);<br>jsonRet.put(<span class="hljs-string">&quot;msg&quot;</span>, <span class="hljs-string">&quot;ç™»å½•æˆåŠŸ&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">// 3 è¿”å›ç»“æœ</span><br>resp.get<span class="hljs-constructor">Writer()</span>.print(jsonRet);<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="8ã€Ajaxå¸¸è§å¼‚å¸¸"><a href="#8ã€Ajaxå¸¸è§å¼‚å¸¸" class="headerlink" title="8ã€Ajaxå¸¸è§å¼‚å¸¸"></a>8ã€Ajaxå¸¸è§å¼‚å¸¸</h3><p>ä½¿ç”¨firebugæˆ–è€…è°·æ­Œæµè§ˆå™¨çš„è°ƒè¯•å·¥å…·çœ‹é”™ï¼š</p><ol><li><p>ReferenceError: XMLhttpRequest is not defined[è¯¦ç»†äº†è§£]ï¼š</p><p>è¡¨ç¤ºjsä»£ç ä¸­XMLhttpRequest å¯¹è±¡ä¸å­˜åœ¨ï¼Œè€ƒè™‘å•è¯æ˜¯å¦å†™é”™äº†</p></li><li><p>XMLHttpRequest state must be OPENED.ï¼š</p><p>setRequestHeaderæ–¹æ³•æ”¾çš„ä½ç½®ä¸å¯¹</p></li><li><p>JSON.parse: expected property name or â€˜}â€™ at line 1 column 2 of the JSON data[è¯¦ç»†äº†è§£]:</p><p>ä½¿ç”¨JSON.parseçš„æ—¶å€™ï¼Œä¼ å…¥çš„jsonå­—ç¬¦ä¸²ä¸æ˜¯æ ‡å‡†çš„æ ¼å¼</p></li></ol><h3 id="8ã€ä»å®¹åº”è¯•"><a href="#8ã€ä»å®¹åº”è¯•" class="headerlink" title="8ã€ä»å®¹åº”è¯•"></a>8ã€ä»å®¹åº”è¯•</h3><ol><li><p>é‚£äº›åœºæ™¯éœ€è¦ä½¿ç”¨ajax ï¼ˆè‡³å°‘è¯´å‡º4ä¸ªï¼‰</p></li><li><p>åŒæ­¥äº¤äº’å’Œå¼‚æ­¥äº¤äº’ (åŒæ­¥å’Œå¼‚æ­¥èƒ½è¯´å‡ºæ¥)</p></li><li><p>å¦‚æœæ˜¯htmlé¡µé¢,å¯ä»¥æ˜¾ç¤ºåŠ¨æ€å†…å®¹?     å¦‚æœä½¿ç”¨ajaxæ˜¯å¯ä»¥çš„A</p></li></ol><p>10ã€getè¿˜æ˜¯post</p><p>ä¸ POST ç›¸æ¯”ï¼ŒGET æ›´ç®€å•ä¹Ÿæ›´å¿«ï¼Œå¹¶ä¸”åœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹éƒ½èƒ½ç”¨ã€‚</p><p>ç„¶è€Œï¼Œåœ¨ä»¥ä¸‹æƒ…å†µä¸­ï¼Œè¯·ä½¿ç”¨ POST è¯·æ±‚ï¼š</p><ul><li>æ— æ³•ä½¿ç”¨ç¼“å­˜æ–‡ä»¶ï¼ˆæ›´æ–°æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶æˆ–æ•°æ®åº“ï¼‰</li><li>å‘æœåŠ¡å™¨å‘é€å¤§é‡æ•°æ®ï¼ˆPOST æ²¡æœ‰æ•°æ®é‡é™åˆ¶ï¼‰</li><li>å‘é€åŒ…å«æœªçŸ¥å­—ç¬¦çš„ç”¨æˆ·è¾“å…¥æ—¶ï¼ŒPOST æ¯” GET æ›´ç¨³å®šä¹Ÿæ›´å¯é </li></ul>]]></content>
    
    
    <categories>
      
      <category>Ajax</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Ajax</tag>
      
      <tag>JSON</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>JavaBean&amp;EL&amp;JSTL</title>
    <link href="/2019/11/21/JavaBean&amp;EL&amp;JSTL/"/>
    <url>/2019/11/21/JavaBean&amp;EL&amp;JSTL/</url>
    
    <content type="html"><![CDATA[<h3 id="1ã€JavaBean"><a href="#1ã€JavaBean" class="headerlink" title="1ã€JavaBean"></a>1ã€JavaBean</h3><h4 id="1-1ã€ä»€ä¹ˆæ˜¯JavaBean"><a href="#1-1ã€ä»€ä¹ˆæ˜¯JavaBean" class="headerlink" title="1.1ã€ä»€ä¹ˆæ˜¯JavaBean"></a>1.1ã€ä»€ä¹ˆæ˜¯JavaBean</h4><p>JavaBean æ˜¯ä¸€ç§Javaè¯­è¨€éµå®ˆJavaBean APIè§„èŒƒå†™æˆçš„<code>å¯é‡ç”¨ç»„ä»¶</code>ã€‚</p><p>JavaBean ä¸å…¶å®ƒ Java ç±»ç›¸æ¯”è€Œè¨€ç‹¬ä¸€æ— äºŒçš„ç‰¹å¾ï¼š</p><ul><li><pre><code> æä¾›ä¸€ä¸ªé»˜è®¤çš„æ— å‚æ„é€ å‡½æ•°ã€‚</code></pre></li><li><pre><code> éœ€è¦è¢«åºåˆ—åŒ–å¹¶ä¸”å®ç°äº† Serializable æ¥å£ã€‚</code></pre></li><li><pre><code> å¯èƒ½æœ‰ä¸€ç³»åˆ—å¯è¯»å†™å±æ€§ã€‚</code></pre></li><li><pre><code> å¯èƒ½æœ‰ä¸€ç³»åˆ—çš„ getter æˆ– **setter** æ–¹æ³•ã€‚</code></pre></li></ul><p>ç®€å•ä¸€ç‚¹ï¼šå»ºä¸€ä¸ªç±»,ç»™ä¸€ä¸ªæ— å‚çš„æ„é€ æ–¹æ³•. å®ƒå°±æ˜¯JavaBean</p><h4 id="1-2ã€JavaBeançš„è§„èŒƒ"><a href="#1-2ã€JavaBeançš„è§„èŒƒ" class="headerlink" title="1.2ã€JavaBeançš„è§„èŒƒ"></a>1.2ã€JavaBeançš„è§„èŒƒ</h4><p>JavaBeanåˆ†ä¸¤ç§ï¼š</p><blockquote><p>â‘ ã€å¤æ‚çš„ï¼Œç»„ä»¶æ€§çš„ï¼ˆGUIï¼‰ï¼Œæ¯”å¦‚äº‹ä»¶ç›‘å¬å™¨ï¼›</p><p>â‘¡ã€ç®€å•çš„JavaBeanï¼šæœ‰å±æ€§å’Œæ–¹æ³•ã€‚</p></blockquote><p>JavaBeanæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„Javaç±»ï¼Œå®ƒéµå®ˆäº†ä¸€å®šçš„è§„èŒƒï¼ˆæœ‰ä¸€ä¸ªå…¬å…±çš„æ— å‚æ„é€ å™¨ï¼Œå¯èƒ½è¿˜æœ‰getå’Œsetæ–¹æ³•ï¼‰</p><p>æ³¨æ„ï¼šä»¥Javaæ¥è¯´get/setå±äºæ–¹æ³•ï¼Œä½†æ˜¯ä»¥JavaBeanæ¥è¯´get/setç›¸å½“äºå±æ€§ã€‚</p><table><thead><tr><th align="left"><strong>æ–¹æ³•</strong></th><th align="left"><strong>æè¿°</strong></th></tr></thead><tbody><tr><td align="left">get<strong>PropertyName</strong>()</td><td align="left">ä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚æœå±æ€§çš„åç§°ä¸º myNameï¼Œé‚£ä¹ˆè¿™ä¸ªæ–¹æ³•çš„åå­—å°±è¦å†™æˆ getMyName() æ¥è¯»å–è¿™ä¸ªå±æ€§ã€‚è¿™ä¸ªæ–¹æ³•ä¹Ÿç§°ä¸ºè®¿é—®å™¨ã€‚</td></tr><tr><td align="left">set<strong>PropertyName</strong>()</td><td align="left">ä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚æœå±æ€§çš„åç§°ä¸º myNameï¼Œé‚£ä¹ˆè¿™ä¸ªæ–¹æ³•çš„åå­—å°±è¦å†™æˆ  setMyName()æ¥å†™å…¥è¿™ä¸ªå±æ€§ã€‚è¿™ä¸ªæ–¹æ³•ä¹Ÿç§°ä¸ºå†™å…¥å™¨ã€‚</td></tr></tbody></table><p><img src="/2019/11/21/JavaBean&EL&JSTL/getset.png"></p><p>ä¸€ä¸ª JavaBean å¯¹è±¡çš„å±æ€§åº”è¯¥æ˜¯å¯è®¿é—®çš„ã€‚è¿™ä¸ªå±æ€§å¯ä»¥æ˜¯ä»»æ„åˆæ³•çš„ Java æ•°æ®ç±»å‹ï¼ŒåŒ…æ‹¬è‡ªå®šä¹‰ Java ç±»ã€‚ä¸€ä¸ª JavaBean å¯¹è±¡çš„å±æ€§å¯ä»¥æ˜¯å¯è¯»å†™ï¼Œæˆ–åªè¯»ï¼Œæˆ–åªå†™ã€‚</p><p>JavaBeançš„å±æ€§ä¸æ™®é€šç±»çš„å±æ€§ä¸ä¸€æ ·ï¼Œå±æ€§ä»¥æ–¹æ³•çš„å½¢å¼å‡ºç°ï¼ˆgetterï¼Œsetterï¼‰</p><p>å†™æ³•ï¼šgetXxxï¼ŒsetXxx            æ³¨ï¼šxxxæœªåœ¨JavaBeançš„å­—æ®µä¸­ï¼Œä¸ä»£è¡¨xxxä¸æ˜¯å®ƒå±æ€§</p><p>ç‰¹æ®Šï¼š</p><p>  â‘ getBbs è¿™é‡Œçš„bbsä¹Ÿæ˜¯JavaBeançš„å±æ€§ï¼Œå³ä½¿bbsæœªåœ¨å­—æ®µä¸­å®šä¹‰</p><p>  â‘¡å¦‚æœæ˜¯boolean ä½¿ç”¨isåˆ¤æ–­JavaBeanå±æ€§</p><p>æ³¨æ„ï¼šä»¥åæˆ‘ä»¬ä½¿ç”¨JavaBeanï¼Œ<strong>å…¨ç”¨åŒ…è£…ç±»å‹</strong>ï¼ˆåé¢è¦ç”¨ï¼‰ï¼ŒJavaBeanæ˜¯ä¸€ä¸ªå¯é‡ç”¨çš„ç»„ä»¶ï¼ˆåå¤ä½¿ç”¨ï¼Œå¯ä»¥å°‘äº›ä»£ç ï¼‰ï¼Œä»Šå¤©ä½¿ç”¨JavaBeanä¸»è¦æ˜¯è¦ä¸åé¢çš„ELç›¸ç»“åˆä½¿ç”¨ã€‚</p><h4 id="1-2ã€jsp-useBean"><a href="#1-2ã€jsp-useBean" class="headerlink" title="1.2ã€jsp:useBean"></a>1.2ã€jsp:useBean</h4><h5 id="1-2-1ã€-lt-jsp-useBean-gt-æ ‡ç­¾å¯ä»¥åœ¨-JSP-ä¸­å£°æ˜ä¸€ä¸ª-JavaBeanï¼Œç„¶åä½¿ç”¨ã€‚"><a href="#1-2-1ã€-lt-jsp-useBean-gt-æ ‡ç­¾å¯ä»¥åœ¨-JSP-ä¸­å£°æ˜ä¸€ä¸ª-JavaBeanï¼Œç„¶åä½¿ç”¨ã€‚" class="headerlink" title="1.2.1ã€&lt;jsp:useBean&gt; æ ‡ç­¾å¯ä»¥åœ¨ JSP ä¸­å£°æ˜ä¸€ä¸ª JavaBeanï¼Œç„¶åä½¿ç”¨ã€‚"></a>1.2.1ã€&lt;jsp:useBean&gt; æ ‡ç­¾å¯ä»¥åœ¨ JSP ä¸­å£°æ˜ä¸€ä¸ª JavaBeanï¼Œç„¶åä½¿ç”¨ã€‚</h5><p>å£°æ˜åï¼ŒJavaBean å¯¹è±¡å°±æˆäº†è„šæœ¬å˜é‡ï¼Œå¯ä»¥é€šè¿‡è„šæœ¬å…ƒç´ æˆ–å…¶ä»–è‡ªå®šä¹‰æ ‡ç­¾æ¥è®¿é—®ã€‚&lt;jsp:useBean&gt; æ ‡ç­¾çš„è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š </p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">&lt;jsp:useBean <span class="hljs-attribute">id</span>=<span class="hljs-string">&quot;bean çš„åå­—&quot;</span> <span class="hljs-attribute">scope</span>=<span class="hljs-string">&quot;bean çš„ä½œç”¨åŸŸ&quot;</span> typeSpec/&gt;<br></code></pre></td></tr></table></figure><p> å…¶ä¸­ï¼Œæ ¹æ®å…·ä½“æƒ…å†µï¼Œscope çš„å€¼å¯ä»¥æ˜¯ <code>page</code>ï¼Œ<code>request</code>ï¼Œ<code>session</code> æˆ– <code>application</code>ã€‚idå€¼å¯ä»»æ„åªè¦ä¸å’ŒåŒä¸€ JSP æ–‡ä»¶ä¸­å…¶å®ƒ &lt;jsp:useBean&gt; ä¸­ id å€¼ä¸€æ ·å°±è¡Œäº†ã€‚</p><p> æ¥ä¸‹æ¥ç»™å‡ºçš„æ˜¯ &lt;jsp:useBean&gt; æ ‡ç­¾çš„ä¸€ä¸ªç®€å•çš„ç”¨æ³•ï¼š</p><figure class="highlight erb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs erb"><span class="xml">&lt;%</span><span class="ruby">@ page language=<span class="hljs-string">&quot;java&quot;</span> contentType=<span class="hljs-string">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class="ruby">    pageEncoding=<span class="hljs-string">&quot;UTF-8&quot;</span></span><span class="xml">%&gt;</span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>useBean å®ä¾‹<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">jsp:useBean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;date&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;java.util.Date&quot;</span> /&gt;</span> </span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ—¥æœŸä¸ºï¼š&lt;%=</span><span class="ruby"> date </span><span class="xml">%&gt;</span><br><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p> å®ƒå°†ä¼šäº§ç”Ÿå¦‚ä¸‹ç»“æœï¼š</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dns">æ—¥æœŸä¸ºï¼šTue Jun <span class="hljs-number">28 15:22:24</span> CST <span class="hljs-number">2016</span><br></code></pre></td></tr></table></figure><h5 id="1-2-2ã€-lt-jsp-getProperty-gt-å’Œ-lt-jsp-getProperty-gt"><a href="#1-2-2ã€-lt-jsp-getProperty-gt-å’Œ-lt-jsp-getProperty-gt" class="headerlink" title="1.2.2ã€&lt;jsp:getProperty/&gt;å’Œ&lt;jsp:getProperty/&gt;"></a>1.2.2ã€&lt;jsp:getProperty/&gt;å’Œ&lt;jsp:getProperty/&gt;</h5><p>åœ¨&lt;jsp:useBean&gt;æ ‡ç­¾ä¸»ä½“ä¸­ä½¿ç”¨&lt;jsp:getProperty/&gt;æ ‡ç­¾æ¥è°ƒç”¨ <strong>getter</strong> æ–¹æ³•ï¼Œä½¿ç”¨&lt;jsp:getProperty/&gt;æ ‡ç­¾æ¥è°ƒç”¨ <strong>setter</strong> æ–¹æ³•ï¼Œè¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs applescript">&lt;jsp:useBean <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;id&quot;</span> <span class="hljs-built_in">class</span>=<span class="hljs-string">&quot;bean ç¼–è¯‘çš„ç±»&quot;</span> scope=<span class="hljs-string">&quot;bean ä½œç”¨åŸŸ&quot;</span>&gt;<br>   &lt;jsp:setProperty <span class="hljs-built_in">name</span>=<span class="hljs-string">&quot;bean çš„ id&quot;</span> <span class="hljs-keyword">property</span>=<span class="hljs-string">&quot;å±æ€§å&quot;</span>  <br>                    value=<span class="hljs-string">&quot;value&quot;</span>/&gt;<br>   &lt;jsp:getProperty <span class="hljs-built_in">name</span>=<span class="hljs-string">&quot;bean çš„ id&quot;</span> <span class="hljs-keyword">property</span>=<span class="hljs-string">&quot;å±æ€§å&quot;</span>/&gt;<br>   ...........<br>&lt;/jsp:useBean&gt;<br></code></pre></td></tr></table></figure><p> nameå±æ€§æŒ‡çš„æ˜¯Beançš„idå±æ€§ã€‚propertyå±æ€§æŒ‡çš„æ˜¯æƒ³è¦è°ƒç”¨çš„getteræˆ–setteræ–¹æ³•ã€‚</p><p> æ¥ä¸‹æ¥ç»™å‡ºä½¿ç”¨ä»¥ä¸Šè¯­æ³•è¿›è¡Œå±æ€§è®¿é—®çš„ä¸€ä¸ªç®€å•ä¾‹å­ï¼š</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">&lt;%@ page language=<span class="hljs-string">&quot;java&quot;</span> contentType=<span class="hljs-string">&quot;text/html; charset=UTF-8&quot;</span><br>    pageEncoding=<span class="hljs-string">&quot;UTF-8&quot;</span>%&gt;<br>&lt;html&gt;<br>&lt;head&gt;<br>&lt;title&gt;<span class="hljs-keyword">get</span> å’Œ <span class="hljs-keyword">set</span> å±æ€§å®ä¾‹&lt;/title&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br><br>&lt;jsp:useBean id=<span class="hljs-string">&quot;students&quot;</span> <br>                    <span class="hljs-keyword">class</span>=&quot;<span class="hljs-symbol">StudentsBean</span>&quot;&gt; <br>   &lt;<span class="hljs-symbol">jsp:<span class="hljs-symbol">setProperty</span></span> <span class="hljs-symbol">name</span>=&quot;<span class="hljs-symbol">students</span>&quot; <span class="hljs-symbol">property</span>=&quot;<span class="hljs-symbol">firstName</span>&quot;<br>                    <span class="hljs-symbol">value</span>=&quot;å°å¼º&quot;/&gt;<br>   &lt;<span class="hljs-symbol">jsp:<span class="hljs-symbol">setProperty</span></span> <span class="hljs-symbol">name</span>=&quot;<span class="hljs-symbol">students</span>&quot; <span class="hljs-symbol">property</span>=&quot;<span class="hljs-symbol">lastName</span>&quot; <br>                    <span class="hljs-symbol">value</span>=&quot;ç‹&quot;/&gt;<br>   &lt;<span class="hljs-symbol">jsp:<span class="hljs-symbol">setProperty</span></span> <span class="hljs-symbol">name</span>=&quot;<span class="hljs-symbol">students</span>&quot; <span class="hljs-symbol">property</span>=&quot;<span class="hljs-symbol">age</span>&quot;<br>                    <span class="hljs-symbol">value</span>=&quot;<span class="hljs-symbol">10</span>&quot;/&gt;<br>&lt;/<span class="hljs-symbol">jsp:<span class="hljs-symbol">useBean</span></span>&gt;<br><br>&lt;<span class="hljs-symbol">p</span>&gt;å­¦ç”Ÿåå­—: <br>   &lt;<span class="hljs-symbol">jsp:<span class="hljs-symbol">getProperty</span></span> <span class="hljs-symbol">name</span>=&quot;<span class="hljs-symbol">students</span>&quot; <span class="hljs-symbol">property</span>=&quot;<span class="hljs-symbol">firstName</span>&quot;/&gt;<br>&lt;/<span class="hljs-symbol">p</span>&gt;<br>&lt;<span class="hljs-symbol">p</span>&gt;å­¦ç”Ÿå§“æ°: <br>   &lt;<span class="hljs-symbol">jsp:<span class="hljs-symbol">getProperty</span></span> <span class="hljs-symbol">name</span>=&quot;<span class="hljs-symbol">students</span>&quot; <span class="hljs-symbol">property</span>=&quot;<span class="hljs-symbol">lastName</span>&quot;/&gt;<br>&lt;/<span class="hljs-symbol">p</span>&gt;<br>&lt;<span class="hljs-symbol">p</span>&gt;å­¦ç”Ÿå¹´é¾„: <br>   &lt;<span class="hljs-symbol">jsp:<span class="hljs-symbol">getProperty</span></span> <span class="hljs-symbol">name</span>=&quot;<span class="hljs-symbol">students</span>&quot; <span class="hljs-symbol">property</span>=&quot;<span class="hljs-symbol">age</span>&quot;/&gt;<br>&lt;/<span class="hljs-symbol">p</span>&gt;<br><br>&lt;/<span class="hljs-symbol">body</span>&gt;<br>&lt;/<span class="hljs-symbol">html</span>&gt;<br></code></pre></td></tr></table></figure><p> è®¿é—®ä»¥ä¸Š JSPï¼Œè¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">å­¦ç”Ÿåå­—: å°å¼º</span><br><span class="hljs-section">å­¦ç”Ÿå§“æ°: ç‹</span><br><span class="hljs-section">å­¦ç”Ÿå¹´é¾„: 10</span><br></code></pre></td></tr></table></figure><h4 id="1-3ã€JavaBeançš„åï¼ˆè‡ªï¼‰çœæœºåˆ¶"><a href="#1-3ã€JavaBeançš„åï¼ˆè‡ªï¼‰çœæœºåˆ¶" class="headerlink" title="1.3ã€JavaBeançš„åï¼ˆè‡ªï¼‰çœæœºåˆ¶"></a>1.3ã€JavaBeançš„åï¼ˆè‡ªï¼‰çœæœºåˆ¶</h4><p>ä»€ä¹ˆæ˜¯JavaBeanè‡ªçœæœºåˆ¶ï¼Ÿ</p><p>â€‹    æˆ‘ä»¬æ‹¿åˆ°ä¸€ä¸ªJavaBeanï¼Œå°±å¯ä»¥æ‹¿åˆ°å®ƒçš„å¯è¯»å’Œå¯å†™çš„å±æ€§ æˆ–è€…å±æ€§åï¼Œå­—æ®µï¼›</p><p>ä¸€èˆ¬æ¥è¯´æˆ‘ä»¬éœ€è¦æ‹¿åˆ°å¯è¯»å¯å†™å±æ€§ï¼›æœ‰ä¸ªè¿™äº›å±æ€§ï¼Œå¯ä»¥é€šè¿‡åå°„å»å®Œæˆè¯»å†™åŠŸèƒ½ï¼›</p><p>ä½¿ç”¨JavaBeançš„APIï¼š<code>Introspector</code>ï¼ˆé€šè¿‡å®ƒæ‹¿åˆ°JavaBeanï¼‰</p><p><img src="/2019/11/21/JavaBean&EL&JSTL/getBeanInfo.png"></p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">BeanInfo beanInfo= <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Introspector</span>.</span></span>get<span class="hljs-constructor">BeanInfo(JavaBeanDemo.<span class="hljs-params">class</span>,Object.<span class="hljs-params">class</span>)</span>;<br>PropertyDescriptor<span class="hljs-literal">[]</span> pds=beanInfo.get<span class="hljs-constructor">PropertyDescriptors()</span>;<br></code></pre></td></tr></table></figure><p><strong>BeanInfo</strong>(å°±æ˜¯ä¸€ä¸ªJavaBeanå¯¹è±¡ï¼Œä¹Ÿå¯ä»¥ç§°ä¸ºJavabeançš„æè¿°å™¨)  </p><p><strong>getBeanInfo</strong>(JavaBeanDemo.class)ï¼šå¾—åˆ°<code>JavaBeanDemo</code>ä»¥åŠå®ƒçš„<code>çˆ¶ç±»Objectçš„å±æ€§</code></p><h5 id="1-3-1ã€getBeanInfo-JavaBeanDemo-class-ï¼šå¾—åˆ°StuJavaBeanDemodentçš„å±æ€§-åŒ…å«å®ƒçˆ¶ç±»Objectçš„å±æ€§"><a href="#1-3-1ã€getBeanInfo-JavaBeanDemo-class-ï¼šå¾—åˆ°StuJavaBeanDemodentçš„å±æ€§-åŒ…å«å®ƒçˆ¶ç±»Objectçš„å±æ€§" class="headerlink" title="1.3.1ã€getBeanInfo(JavaBeanDemo.class)ï¼šå¾—åˆ°StuJavaBeanDemodentçš„å±æ€§,åŒ…å«å®ƒçˆ¶ç±»Objectçš„å±æ€§"></a>1.3.1ã€getBeanInfo(JavaBeanDemo.class)ï¼šå¾—åˆ°StuJavaBeanDemodentçš„å±æ€§,åŒ…å«å®ƒçˆ¶ç±»Objectçš„å±æ€§</h5><p><img src="/2019/11/21/JavaBean&EL&JSTL/getBeanInfo1.png"></p><p><img src="/2019/11/21/JavaBean&EL&JSTL/shuchu.png"></p><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs delphi"><span class="hljs-comment">//è¾“å‡ºåˆ†æ</span><br>java.beans.PropertyDescriptor[<br><span class="hljs-keyword">name</span>=<span class="hljs-keyword">class</span>; <br>propertyType=<span class="hljs-keyword">class</span> java.lang.<span class="hljs-keyword">Class</span>; <br>readMethod=<span class="hljs-keyword">public</span> final native java.lang.<span class="hljs-keyword">Class</span> java.lang.<span class="hljs-keyword">Object</span>.getClass()<br>]<br>java.beans.PropertyDescriptor[<br><span class="hljs-keyword">name</span>=<span class="hljs-keyword">name</span>; <br>propertyType=<span class="hljs-keyword">class</span> java.lang.<span class="hljs-keyword">String</span>; <br>readMethod=<span class="hljs-keyword">public</span> java.lang.<span class="hljs-keyword">String</span> cn.ant_nest.JavaBean.JavaBeanDemo.getName(); <br>writeMethod=<span class="hljs-keyword">public</span> void cn.ant_nest.JavaBean.JavaBeanDemo.setName(java.lang.<span class="hljs-keyword">String</span>)<br>]<br><span class="hljs-comment">//idä¸ä¼šè¢«è¾“å‡º</span><br></code></pre></td></tr></table></figure><h5 id="1-3-2ã€getBeanInfo-JavaBeanDemo-class-Object-class-ï¼šå¾—åˆ°StuJavaBeanDemodentçš„å±æ€§-ä¸åŒ…å«å®ƒçˆ¶ç±»Objectçš„å±æ€§"><a href="#1-3-2ã€getBeanInfo-JavaBeanDemo-class-Object-class-ï¼šå¾—åˆ°StuJavaBeanDemodentçš„å±æ€§-ä¸åŒ…å«å®ƒçˆ¶ç±»Objectçš„å±æ€§" class="headerlink" title="1.3.2ã€getBeanInfo(JavaBeanDemo.class,Object.class)ï¼šå¾—åˆ°StuJavaBeanDemodentçš„å±æ€§,ä¸åŒ…å«å®ƒçˆ¶ç±»Objectçš„å±æ€§"></a>1.3.2ã€getBeanInfo(JavaBeanDemo.class,Object.class)ï¼šå¾—åˆ°StuJavaBeanDemodentçš„å±æ€§,ä¸åŒ…å«å®ƒçˆ¶ç±»Objectçš„å±æ€§</h5><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">public <span class="hljs-keyword">class</span> testBeanInfo &#123;<br>    @Test<br>    public void test<span class="hljs-constructor">Bean()</span> throws IntrospectionException &#123;<br>        <span class="hljs-comment">//è·å–ä¸€ä¸ªBeanInfoï¼Œå°±æ˜¯ä¸€ä¸ªJavaBeançš„æè¿°å™¨ï¼Œä»Studentå¼€å§‹ï¼ˆå«ï¼‰ï¼Œåˆ°Objectç»“æŸï¼ˆä¸å«ï¼‰</span><br>        BeanInfo beanInfo= <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Introspector</span>.</span></span>get<span class="hljs-constructor">BeanInfo(JavaBeanDemo.<span class="hljs-params">class</span>,Object.<span class="hljs-params">class</span>)</span>;<br>        <span class="hljs-comment">//æ‹¿åˆ°è¿™ä¸ªJavaBeançš„å±æ€§æè¿°å™¨</span><br>        PropertyDescriptor<span class="hljs-literal">[]</span> pds=beanInfo.get<span class="hljs-constructor">PropertyDescriptors()</span>;<br>        <span class="hljs-keyword">for</span>(PropertyDescriptor pd:pds)&#123;<br>            <span class="hljs-comment">//è·å–JavaBeançš„å­—æ®µå</span><br>            <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(pd.get<span class="hljs-constructor">Name()</span>);<br>            <span class="hljs-comment">//å¾—åˆ°å¯è¯»å†™æ–¹æ³•</span><br>            <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(pd.get<span class="hljs-constructor">ReadMethod()</span>);<br>            <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(pd.get<span class="hljs-constructor">WriteMethod()</span>);<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-comment">/*æ‰“å°è¾“å‡º</span><br><span class="hljs-comment">name</span><br><span class="hljs-comment">public java.lang.String cn.ant_nest.JavaBean.JavaBeanDemo.getName()</span><br><span class="hljs-comment">public void cn.ant_nest.JavaBean.JavaBeanDemo.setName(java.lang.String)</span><br><span class="hljs-comment">*/</span><br><span class="hljs-comment">//idä¸ä¼šè¢«è¾“å‡º</span><br></code></pre></td></tr></table></figure><h4 id="1-4ã€BeanUtilsçš„ä½¿ç”¨ï¼ˆä¸»è¦è¿›è¡Œå±æ€§çš„æ‹·è´ï¼‰"><a href="#1-4ã€BeanUtilsçš„ä½¿ç”¨ï¼ˆä¸»è¦è¿›è¡Œå±æ€§çš„æ‹·è´ï¼‰" class="headerlink" title="1.4ã€BeanUtilsçš„ä½¿ç”¨ï¼ˆä¸»è¦è¿›è¡Œå±æ€§çš„æ‹·è´ï¼‰"></a>1.4ã€BeanUtilsçš„ä½¿ç”¨ï¼ˆä¸»è¦è¿›è¡Œå±æ€§çš„æ‹·è´ï¼‰</h4><p>å¼•å…¥ï¼š</p><p>â€‹    æœ‰äººå¯¹JavaBeanåšäº†ä¸€æ•´å¥—çš„è§£å†³å®æ–½æ–¹æ¡ˆï¼Œæˆ‘ä»¬å­¦ä¹ ä¸€ä¸ªå±æ€§çš„æ‹·è´ï¼Œå¾ˆå¤šæ¡†æ¶éƒ½æ˜¯åœ¨ç”¨è¿™ä¸ªå±æ€§çš„æ‹·è´çš„åŠŸèƒ½ï¼Œåœ¨ç”¨è¿™ä¸ªçš„è¿˜æ˜¯ï¼Œéœ€è¦å¯¼å…¥å¯¹åº”çš„jaråŒ…:</p><p>å…ˆè¿›è¡Œå¯¼åŒ…:</p><p><strong>â‘ åŒä¸€ä¸ªç±»ä¹‹é—´çš„å±æ€§æ‹·è´</strong></p><p><img src="/2019/11/21/JavaBean&EL&JSTL/copy.png"></p><p><strong>â‘¡ä¸åŒç±»ä¹‹é—´å±æ€§æ‹·è´</strong></p><p><img src="/2019/11/21/JavaBean&EL&JSTL/copy2.png"></p><p><strong>â‘¢æŠŠMapé‡Œé¢çš„å…ƒç´ æ‹·è´åˆ°å¯¹è±¡ä¸­å»ï¼ˆä½†æ˜¯ä¸èƒ½æŠŠå¯¹è±¡çš„å…ƒç´ æ‹·è´åˆ°mapï¼‰</strong></p><p><img src="/2019/11/21/JavaBean&EL&JSTL/copy3.png"></p><h3 id="2ã€ELè¡¨è¾¾å¼è¯­è¨€"><a href="#2ã€ELè¡¨è¾¾å¼è¯­è¨€" class="headerlink" title="2ã€ELè¡¨è¾¾å¼è¯­è¨€"></a>2ã€ELè¡¨è¾¾å¼è¯­è¨€</h3><p>JSPè¡¨è¾¾å¼è¯­è¨€ï¼ˆELï¼‰ä½¿å¾—è®¿é—®å­˜å‚¨åœ¨JavaBeanä¸­çš„æ•°æ®å˜å¾—éå¸¸ç®€å•ã€‚JSP ELæ—¢å¯ä»¥ç”¨æ¥åˆ›å»ºç®—æœ¯è¡¨è¾¾å¼ä¹Ÿå¯ä»¥ç”¨æ¥åˆ›å»ºé€»è¾‘è¡¨è¾¾å¼ã€‚åœ¨JSP ELè¡¨è¾¾å¼å†…å¯ä»¥ä½¿ç”¨æ•´å‹æ•°ï¼Œæµ®ç‚¹æ•°ï¼Œå­—ç¬¦ä¸²ï¼Œå¸¸é‡trueã€falseï¼Œè¿˜æœ‰nullã€‚</p><h4 id="2-1ã€ELæ˜¯å•¥ï¼Ÿ"><a href="#2-1ã€ELæ˜¯å•¥ï¼Ÿ" class="headerlink" title="2.1ã€ELæ˜¯å•¥ï¼Ÿ"></a>2.1ã€ELæ˜¯å•¥ï¼Ÿ</h4><p>ELå°±è¡¨è¾¾å¼è¯­è¨€,å¯ä»¥è·å–<code>ä½œç”¨åŸŸ</code>é‡Œçš„å…±äº«æ•°æ®</p><p>ä½œç”¨åŸŸï¼špageContext,request,session,application</p><h4 id="2-2ã€ELçš„ä½¿ç”¨"><a href="#2-2ã€ELçš„ä½¿ç”¨" class="headerlink" title="2.2ã€ELçš„ä½¿ç”¨"></a>2.2ã€ELçš„ä½¿ç”¨</h4><p>æƒ³è¦åœç”¨å¯¹ELè¡¨è¾¾å¼çš„è¯„ä¼°çš„è¯ï¼Œéœ€è¦ä½¿ç”¨pageæŒ‡ä»¤å°†isELIgnoredå±æ€§å€¼è®¾ä¸ºtrueï¼š</p><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mel">&lt;%@ page isELIgnored =<span class="hljs-string">&quot;true|false&quot;</span> %&gt;<br></code></pre></td></tr></table></figure><p>è¿™æ ·ï¼ŒELè¡¨è¾¾å¼å°±ä¼šè¢«å¿½ç•¥ã€‚è‹¥è®¾ä¸ºfalseï¼Œåˆ™å®¹å™¨å°†ä¼šè®¡ç®—ELè¡¨è¾¾å¼ã€‚</p><p><strong>ä»¥ä¸‹æ˜¯ELçš„ä½¿ç”¨ä¸¾ä¾‹ï¼š</strong></p><p><strong>1ã€User.java</strong></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs typescript">package cn.ant_nest.JavaBean;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-built_in">String</span> name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-built_in">String</span> pwd;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">String</span> <span class="hljs-function"><span class="hljs-title">getName</span>(<span class="hljs-params"></span>)</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">setName</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> name</span>)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">String</span> <span class="hljs-function"><span class="hljs-title">getPwd</span>(<span class="hljs-params"></span>)</span> &#123;<br>        <span class="hljs-keyword">return</span> pwd;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">setPwd</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> pwd</span>)</span> &#123;<br>        <span class="hljs-built_in">this</span>.pwd = pwd;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>2ã€LoginServlet.java</strong></p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-keyword">package</span> cn.ant_nest.<span class="hljs-type">JavaBean</span>;<br><br><span class="hljs-keyword">import</span> cn.ant_nest.<span class="hljs-type">JavaBean</span>.<span class="hljs-type">User</span>;<br><br><span class="hljs-keyword">import</span> javax.servlet.<span class="hljs-type">ServletException</span>;<br><span class="hljs-keyword">import</span> javax.servlet.annotation.<span class="hljs-type">WebServlet</span>;<br><span class="hljs-keyword">import</span> javax.servlet.http.<span class="hljs-type">HttpServlet</span>;<br><span class="hljs-keyword">import</span> javax.servlet.http.<span class="hljs-type">HttpServletRequest</span>;<br><span class="hljs-keyword">import</span> javax.servlet.http.<span class="hljs-type">HttpServletResponse</span>;<br><span class="hljs-keyword">import</span> java.io.<span class="hljs-type">IOException</span>;<br><span class="hljs-keyword">import</span> java.io.<span class="hljs-type">UnsupportedEncodingException</span>;<br><br><span class="hljs-meta">@WebServlet</span>(<span class="hljs-string">&quot;/LoginServlet&quot;</span>)<br>public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LoginServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> void service(<span class="hljs-type">HttpServletRequest</span> req, <span class="hljs-type">HttpServletResponse</span> resp) <span class="hljs-keyword">throws</span> <span class="hljs-type">IOException</span>, <span class="hljs-type">ServletException</span> &#123;<br>        <span class="hljs-comment">//è®¾ç½®ç¼–ç </span><br>        req.setCharacterEncoding(<span class="hljs-string">&quot;UTF-8&quot;</span>);<br>        <span class="hljs-comment">//æ¥æ”¶å‚æ•°</span><br>        <span class="hljs-type">String</span> name=req.getParameter(<span class="hljs-string">&quot;name&quot;</span>);<br>        <span class="hljs-type">String</span> pwd=req.getParameter(<span class="hljs-string">&quot;pwd&quot;</span>);<br><br>        <span class="hljs-type">User</span> user=<span class="hljs-keyword">new</span> <span class="hljs-type">User</span>();<br>        user.setName(name);<br>        user.setPwd(pwd);<br><br>        <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;admin&quot;</span>.equals(name)&amp;&amp;<span class="hljs-string">&quot;123&quot;</span>.equals(pwd))&#123;<br>            <span class="hljs-comment">//ç™»å½•æˆåŠŸ</span><br>            req.getSession().setAttribute(<span class="hljs-string">&quot;user&quot;</span>,user);<br>            <span class="hljs-comment">//ç™»é™†æˆåŠŸè°ƒæ•´main.jsp</span><br>            resp.sendRedirect(<span class="hljs-string">&quot;main.jsp&quot;</span>);<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>        <span class="hljs-comment">//å¦‚æœç”¨æˆ·ä¸å­˜åœ¨</span><br>        req.setAttribute(<span class="hljs-string">&quot;error&quot;</span>,<span class="hljs-string">&quot;ç™»å½•å¤±è´¥&quot;</span>);<br>        req.getRequestDispatcher(<span class="hljs-string">&quot;login.jsp&quot;</span>).forward(req,resp);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>åœ¨Servletä¸­å¯ä»¥ç”¨ä¸Šé¢ä»£ç ä¸­çš„æ–¹æ³•è®¾ç½®å’Œè®¿é—®ä½œç”¨åŸŸçš„å±æ€§ï¼Œåœ¨JSPä¸­ï¼š</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">&lt;jsp:useBean id=&quot;box&quot; scope=&quot;page&quot; <span class="hljs-keyword">class</span>=&quot;cn.ant_nest.JavaBean.User&quot;&gt;<br>&lt;jsp:setProperty <span class="hljs-type">name</span>=&quot;box&quot; property=&quot;name&quot; <span class="hljs-keyword">value</span>=&quot;Kongwei-Liao&quot;/&gt;<br>&lt;/jsp:useBean&gt;<br><br>$&#123;<span class="hljs-type">box</span>.name&#125;<br><br>&lt;%<br>    <span class="hljs-keyword">out</span>.println(pageContext.getAttribute(&quot;box&quot;));//&quot;box.name&quot;è¿™é‡Œè¡Œä¸é€šï¼Œæ˜¾ç¤ºå‡ºæ¥çš„æ˜¯<span class="hljs-keyword">null</span><br>%&gt;<br><br>&lt;%<span class="hljs-comment">--æµè§ˆå™¨é¡µé¢æ˜¾ç¤ºçš„æ˜¯ï¼š</span><br>Kongwei-Liao<br>cn.ant_nest.JavaBean.<span class="hljs-keyword">User</span>@<span class="hljs-number">1584</span>c339<br><span class="hljs-comment">--%&gt;</span><br></code></pre></td></tr></table></figure><p><strong>3ã€login.jsp</strong></p></blockquote><figure class="highlight vbscript-html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs vbscript-html"><span class="vbscript">&lt;%@ page contentType=<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="hljs-string">&quot;java&quot;</span> %&gt;</span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="vbscript">&lt;%--&lt;%=<span class="hljs-built_in">request</span>.getAttribute(<span class="hljs-string">&quot;error&quot;</span>)==<span class="hljs-literal">null</span>?<span class="hljs-string">&quot;&quot;</span>:<span class="hljs-built_in">request</span>.getAttribute(<span class="hljs-string">&quot;error&quot;</span>)%&gt;</span><span class="xml">--%&gt;</span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>$&#123;error&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;LoginServlet&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;post&quot;</span>&gt;</span></span><br><span class="xml">    ç”¨æˆ·åï¼š<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span>/&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span></span><br><span class="xml">    å¯†ç ï¼š<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;pwd&quot;</span>/&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;ç™»å½•&quot;</span>/&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><br><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p><strong>4ã€main.jsp</strong></p><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs xquery">&lt;%@ page contentType=<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="hljs-string">&quot;java&quot;</span> %&gt;<br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></span><br><span class="xml">    </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="xml">æ¬¢è¿æ‚¨$</span><span class="xquery">&#123;user<span class="hljs-built_in">.name</span>&#125;</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p> <img src="/2019/11/21/JavaBean&EL&JSTL/el.png"></p><p><strong>æ³¨ï¼š</strong>å¦‚æœæµè§ˆå™¨ä¸Šç›´æ¥æ˜¾ç¤ºçš„æ˜¯ELè¡¨è¾¾å¼ï¼Œè€Œä¸æ˜¯è¡¨è¾¾å¼çš„å€¼ï¼Œå°†web.xmlçš„å†…å®¹æ›¿æ¢æˆä»¥ä¸‹å†…å®¹ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">web-app</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://java.sun.com/xml/ns/javaee&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://java.sun.com/xml/ns/javaee</span></span><br><span class="hljs-tag"><span class="hljs-string">                      http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">version</span>=<span class="hljs-string">&quot;3.0&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">metadata-complete</span>=<span class="hljs-string">&quot;false&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">web-app</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="2-3ã€ELåœ¨å››å¤§ä½œç”¨åŸŸçš„å–å€¼"><a href="#2-3ã€ELåœ¨å››å¤§ä½œç”¨åŸŸçš„å–å€¼" class="headerlink" title="2.3ã€ELåœ¨å››å¤§ä½œç”¨åŸŸçš„å–å€¼"></a>2.3ã€ELåœ¨å››å¤§ä½œç”¨åŸŸçš„å–å€¼</h4><figure class="highlight vbscript-html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs vbscript-html"><span class="vbscript">&lt;%@ page contentType=<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="hljs-string">&quot;java&quot;</span> %&gt;</span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="vbscript">&lt;%</span><br><span class="vbscript">    pageContext.setAttribute(<span class="hljs-string">&quot;pageInfo&quot;</span>,<span class="hljs-string">&quot;pageä¸­çš„å€¼&quot;</span>);</span><br><span class="vbscript">    <span class="hljs-built_in">request</span>.setAttribute(<span class="hljs-string">&quot;requestInfo&quot;</span>,<span class="hljs-string">&quot;requestä¸­çš„å€¼&quot;</span>);</span><br><span class="vbscript">    session.setAttribute(<span class="hljs-string">&quot;sessionInfo&quot;</span>,<span class="hljs-string">&quot;sessionä¸­çš„å€¼&quot;</span>);</span><br><span class="vbscript">    application.setAttribute(<span class="hljs-string">&quot;applicationInfo&quot;</span>,<span class="hljs-string">&quot;applicationä¸­çš„å€¼&quot;</span>);</span><br><span class="vbscript">%&gt;</span><br><span class="xml">$&#123;pageInfo&#125;<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span></span><br><span class="xml">$&#123;requestInfo&#125;<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span></span><br><span class="xml">$&#123;sessionInfo&#125;<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span></span><br><span class="xml">$&#123;applicationInfo&#125;<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span></span><br><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p><img src="/2019/11/21/JavaBean&EL&JSTL/el1.png"></p><h5 id="2-3-1ã€ELå–å€¼çš„é¡ºåºï¼š"><a href="#2-3-1ã€ELå–å€¼çš„é¡ºåºï¼š" class="headerlink" title="2.3.1ã€ELå–å€¼çš„é¡ºåºï¼š"></a>2.3.1ã€ELå–å€¼çš„é¡ºåºï¼š</h5><p>åœ¨ä½œç”¨åŸŸèŒƒå›´æˆ‘ä»¬çš„åå­—å–æˆä¸€æ ·äº†,æ€ä¹ˆå»æ‰¾åˆ°ç‰¹å®šçš„ä¸€ä¸ªä½œç”¨åŸŸä¸­çš„å€¼å‘¢?</p><p><img src="/2019/11/21/JavaBean&EL&JSTL/el2.png"></p><p>ç»“è®ºï¼šå®ƒæŸ¥è¯¢æ‰¾çš„é¡ºåºï¼šä»å°è‡³å¤§ï¼Œå…ˆå–å°çš„èŒƒå›´çš„å€¼ï¼Œå°çš„æ²¡æœ‰ï¼Œåœ¨å–åˆ°å¤§çš„èŒƒå›´çš„å€¼</p><p>pageContextâ€“&gt;requestâ€“&gt;sessionâ€“&gt;application</p><h5 id="2-3-2ã€ä¸åŒä½œç”¨åŸŸé—´å±æ€§åå†²çªè§£å†³"><a href="#2-3-2ã€ä¸åŒä½œç”¨åŸŸé—´å±æ€§åå†²çªè§£å†³" class="headerlink" title="2.3.2ã€ä¸åŒä½œç”¨åŸŸé—´å±æ€§åå†²çªè§£å†³"></a>2.3.2ã€ä¸åŒä½œç”¨åŸŸé—´å±æ€§åå†²çªè§£å†³</h5><p>ä»¥åæˆ‘ä»¬å¸¸ç”¨çš„æ˜¯requestå’Œsessionï¼Œæœ‰æ—¶å€™ï¼Œå¦‚æœæ²¡æœ‰ä¸€ä¸ªè§„èŒƒçš„æ—¶å€™ï¼Œæˆ‘ä»¬å–çš„åå­—ä¼šé‡å¤ï¼Œä½¿ç”¨ä¸‹é¢çš„ç¬¬ä¸€ç§è§£å†³æ–¹æ¡ˆã€‚</p><p><strong>ç¬¬ä¸€ç§è§£å†³æ–¹æ¡ˆï¼š</strong>å‰é¢æ·»åŠ ä¸€ä¸ªå‰ç¼€ï¼Œç¡®å®šåˆ°å“ªä¸ªä½œç”¨åŸŸæ‹¿ï¼Œæ¯”å¦‚</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-variable">$&#123;pageScope.Info&#125;</span><br><span class="hljs-variable">$&#123;requestScope.Info&#125;</span><br><span class="hljs-variable">$&#123;sessionScope.Info&#125;</span><br><span class="hljs-variable">$&#123;applicationScope.Info&#125;</span><br></code></pre></td></tr></table></figure><p><img src="/2019/11/21/JavaBean&EL&JSTL/el3.png"></p><p><strong>ç¬¬äºŒç§è§£å†³æ–¹æ¡ˆï¼š</strong>åå­—è§„èŒƒ æ¯”å¦‚ï¼šXXX_IN_SESSION  </p><h4 id="2-4ã€ELçš„æ³¨æ„äº‹é¡¹"><a href="#2-4ã€ELçš„æ³¨æ„äº‹é¡¹" class="headerlink" title="2.4ã€ELçš„æ³¨æ„äº‹é¡¹"></a>2.4ã€ELçš„æ³¨æ„äº‹é¡¹</h4><p>1ã€</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ruby">session.setAttribute(<span class="hljs-string">&quot;KEY.IN.SESSION&quot;</span>, <span class="hljs-string">&quot;ä½ æ˜¯session&quot;</span>);<br><span class="hljs-variable">$&#123;</span>KEY.IN.SESSION&#125;&lt;<span class="hljs-string">%--</span>å–ä¸åˆ°å€¼--%&gt;<br><span class="hljs-variable">$&#123;</span>sessionScope.KEY.IN.SESSION&#125;&lt;<span class="hljs-string">%--</span>å–ä¸åˆ°å€¼--%&gt;<br><span class="hljs-variable">$&#123;</span>sessionScope[<span class="hljs-string">&quot;KEY.IN.SESSION&quot;</span>]&#125;&lt;<span class="hljs-string">%--</span>OKå“’ï¼å–çš„åˆ°å€¼--%&gt;<br></code></pre></td></tr></table></figure><p>2ã€</p><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="xml">$</span><span class="hljs-template-variable">&#123;pageContext.request.contextPath&#125;</span><span class="xml">&lt;%--æ‹¿åˆ°ä¸Šä¸‹æ–‡è·¯å¾„--%&gt;</span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;$</span></span></span><span class="hljs-template-variable">&#123;pageContext.request.contextPath&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">/***&quot;</span>&gt;</span>XXX<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p>3ã€Tomcat7ä¹‹åELè¡¨è¾¾å¼å¯ä»¥è°ƒç”¨æ–¹æ³•ï¼š</p><p>ä¹‹å‰2.2èŠ‚ä¸­ç»™sessionå¯¹è±¡ä¼ äº†ä¸€ä¸ªUserç±»å¯¹è±¡userï¼Œæˆ‘ä»¬è¿™é‡Œè°ƒç”¨é‡Œé¢çš„getNameæ–¹æ³•</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-variable">$&#123;user.getName()&#125;</span><br></code></pre></td></tr></table></figure><p>4ã€JavaBeançš„å–å€¼æ–¹å¼</p><figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pf">$&#123;<span class="hljs-keyword">user</span>.<span class="hljs-keyword">user</span>Info&#125;<span class="hljs-variable">&lt;%--ç›¸å½“äºè°ƒç”¨getUserInfo()--%&gt;</span><br></code></pre></td></tr></table></figure><p><img src="/2019/11/21/JavaBean&EL&JSTL/huoqu.png"></p><h4 id="2-5ã€ELçš„å…¶å®ƒç‰¹æ€§"><a href="#2-5ã€ELçš„å…¶å®ƒç‰¹æ€§" class="headerlink" title="2.5ã€ELçš„å…¶å®ƒç‰¹æ€§"></a>2.5ã€ELçš„å…¶å®ƒç‰¹æ€§</h4><h5 id="2-5-1ã€ELç®—æœ¯è¿ç®—ç¬¦"><a href="#2-5-1ã€ELç®—æœ¯è¿ç®—ç¬¦" class="headerlink" title="2.5.1ã€ELç®—æœ¯è¿ç®—ç¬¦"></a>2.5.1ã€ELç®—æœ¯è¿ç®—ç¬¦</h5><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-variable">$&#123;1+2&#125;</span> <span class="hljs-variable">$&#123;2-1&#125;</span> <span class="hljs-variable">$&#123;2*3&#125;</span> <span class="hljs-variable">$&#123;16/5&#125;</span> <span class="hljs-variable">$&#123;16%5&#125;</span><br></code></pre></td></tr></table></figure><h5 id="2-5-2ã€EL-å…³ç³»è¿ç®—ç¬¦"><a href="#2-5-2ã€EL-å…³ç³»è¿ç®—ç¬¦" class="headerlink" title="2.5.2ã€EL å…³ç³»è¿ç®—ç¬¦"></a>2.5.2ã€EL å…³ç³»è¿ç®—ç¬¦</h5><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs gams"><span class="hljs-symbol">$</span>&#123;<span class="hljs-number">16</span>&gt;<span class="hljs-number">5</span>&#125; æˆ–<span class="hljs-symbol">$</span>&#123;<span class="hljs-number">16</span> <span class="hljs-keyword">gt</span> <span class="hljs-number">5</span>&#125;<br><span class="hljs-symbol">$</span>&#123;<span class="hljs-number">16</span>&lt;<span class="hljs-number">5</span>&#125; æˆ–<span class="hljs-symbol">$</span>&#123;<span class="hljs-number">16</span> <span class="hljs-keyword">lt</span> <span class="hljs-number">5</span>&#125;<br><span class="hljs-symbol">$</span>&#123;<span class="hljs-number">16</span>&gt;=<span class="hljs-number">5</span>&#125; æˆ–<span class="hljs-symbol">$</span>&#123;<span class="hljs-number">16</span> <span class="hljs-keyword">ge</span> <span class="hljs-number">5</span>&#125;<br><span class="hljs-symbol">$</span>&#123;<span class="hljs-number">16</span>&lt;=<span class="hljs-number">5</span>&#125; æˆ–<span class="hljs-symbol">$</span>&#123;<span class="hljs-number">16</span> <span class="hljs-keyword">le</span> <span class="hljs-number">5</span>&#125;<br><span class="hljs-symbol">$</span>&#123;<span class="hljs-number">1</span>=<span class="hljs-number">2</span>&#125; æˆ–<span class="hljs-symbol">$</span>&#123;<span class="hljs-number">1</span> <span class="hljs-keyword">eq</span> <span class="hljs-number">2</span>&#125;<br><span class="hljs-symbol">$</span>&#123;<span class="hljs-number">2</span>!=<span class="hljs-number">1</span>&#125; æˆ–<span class="hljs-symbol">$</span>&#123;<span class="hljs-number">2</span> <span class="hljs-keyword">ne</span> <span class="hljs-number">1</span>&#125;<br></code></pre></td></tr></table></figure><h5 id="2-5-3ã€EL-é€»è¾‘è¿ç®—ç¬¦"><a href="#2-5-3ã€EL-é€»è¾‘è¿ç®—ç¬¦" class="headerlink" title="2.5.3ã€EL é€»è¾‘è¿ç®—ç¬¦"></a>2.5.3ã€EL é€»è¾‘è¿ç®—ç¬¦</h5><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-variable">$&#123;</span><span class="hljs-keyword">true</span> &amp;&amp; <span class="hljs-keyword">true</span>&#125;ç»“æœ <span class="hljs-keyword">true</span><br><span class="hljs-variable">$&#123;</span><span class="hljs-keyword">true</span> <span class="hljs-keyword">and</span> <span class="hljs-keyword">true</span>&#125; ç»“æœ<span class="hljs-keyword">true</span><br><br><span class="hljs-variable">$&#123;</span><span class="hljs-keyword">true</span> || <span class="hljs-keyword">false</span>&#125; ç»“æœ <span class="hljs-keyword">true</span><br><span class="hljs-variable">$&#123;</span><span class="hljs-keyword">true</span> <span class="hljs-keyword">or</span> <span class="hljs-keyword">false</span>&#125; ç»“æœ <span class="hljs-keyword">true</span><br><br><span class="hljs-variable">$&#123;</span>!<span class="hljs-keyword">true</span>&#125; ç»“æœ<span class="hljs-keyword">false</span><br><span class="hljs-variable">$&#123;</span><span class="hljs-keyword">not</span> <span class="hljs-keyword">true</span>&#125; ç»“æœ<span class="hljs-keyword">false</span><br></code></pre></td></tr></table></figure><h5 id="2-5-4ã€EL-å…¶ä»–è¿ç®—ç¬¦"><a href="#2-5-4ã€EL-å…¶ä»–è¿ç®—ç¬¦" class="headerlink" title="2.5.4ã€EL å…¶ä»–è¿ç®—ç¬¦"></a>2.5.4ã€EL å…¶ä»–è¿ç®—ç¬¦</h5><figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sqf">$&#123;empty <span class="hljs-built_in">param</span>.<span class="hljs-built_in">name</span>&#125; å¦‚æœ<span class="hljs-built_in">param</span>.<span class="hljs-built_in">name</span> ä¸ºç©º è¿”å›<span class="hljs-literal">true</span> å¦åˆ™<span class="hljs-literal">false</span><br></code></pre></td></tr></table></figure><h5 id="2-5-5ã€EL-ä¸‰ç›®è¿ç®—ç¬¦"><a href="#2-5-5ã€EL-ä¸‰ç›®è¿ç®—ç¬¦" class="headerlink" title="2.5.5ã€EL ä¸‰ç›®è¿ç®—ç¬¦"></a>2.5.5ã€EL ä¸‰ç›®è¿ç®—ç¬¦</h5><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-variable">$&#123;</span>A?<span class="hljs-symbol">B:</span>C&#125; æ¯”å¦‚ <span class="hljs-variable">$&#123;</span>user.sex?<span class="hljs-string">&quot;ç”·&quot;</span><span class="hljs-symbol">:<span class="hljs-string">&quot;å¥³&quot;</span></span>&#125;<br></code></pre></td></tr></table></figure><h4 id="2-6ã€ELéšå«å¯¹è±¡"><a href="#2-6ã€ELéšå«å¯¹è±¡" class="headerlink" title="2.6ã€ELéšå«å¯¹è±¡"></a>2.6ã€ELéšå«å¯¹è±¡</h4><p>JSP ELæ”¯æŒä¸‹è¡¨åˆ—å‡ºçš„éšå«å¯¹è±¡ï¼š</p><table><thead><tr><th align="left"><strong>éšå«å¯¹è±¡</strong></th><th align="left"><strong>æè¿°</strong></th></tr></thead><tbody><tr><td align="left">pageScope</td><td align="left">page ä½œç”¨åŸŸ</td></tr><tr><td align="left">requestScope</td><td align="left">request ä½œç”¨åŸŸ</td></tr><tr><td align="left">sessionScope</td><td align="left">session ä½œç”¨åŸŸ</td></tr><tr><td align="left">applicationScope</td><td align="left">application ä½œç”¨åŸŸ</td></tr><tr><td align="left">param</td><td align="left"><code>Request å¯¹è±¡</code>çš„å‚æ•°ï¼Œå­—ç¬¦ä¸²</td></tr><tr><td align="left">paramValues</td><td align="left"><code>Requestå¯¹è±¡</code>çš„å‚æ•°ï¼Œå­—ç¬¦ä¸²é›†åˆ</td></tr><tr><td align="left">header</td><td align="left">HTTP ä¿¡æ¯å¤´ï¼Œå­—ç¬¦ä¸²</td></tr><tr><td align="left">headerValues</td><td align="left">HTTP ä¿¡æ¯å¤´ï¼Œå­—ç¬¦ä¸²é›†åˆ</td></tr><tr><td align="left">initParam</td><td align="left">ä¸Šä¸‹æ–‡åˆå§‹åŒ–å‚æ•°</td></tr><tr><td align="left">cookie</td><td align="left">Cookieå€¼</td></tr><tr><td align="left">pageContext</td><td align="left">å½“å‰é¡µé¢çš„pageContext</td></tr></tbody></table><h5 id="2-6-1ã€pageContextå¯¹è±¡"><a href="#2-6-1ã€pageContextå¯¹è±¡" class="headerlink" title="2.6.1ã€pageContextå¯¹è±¡"></a>2.6.1ã€pageContextå¯¹è±¡</h5><p>pageContextå¯¹è±¡æ˜¯JSPä¸­pageContextå¯¹è±¡çš„å¼•ç”¨ã€‚é€šè¿‡pageContextå¯¹è±¡ï¼Œæ‚¨å¯ä»¥è®¿é—®requestå¯¹è±¡ã€‚æ¯”å¦‚ï¼Œè®¿é—®requestå¯¹è±¡ä¼ å…¥çš„æŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œå°±åƒè¿™æ ·ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-variable">$&#123;pageContext.request.queryString&#125;</span><br></code></pre></td></tr></table></figure><h5 id="2-6-2ã€Scopeå¯¹è±¡"><a href="#2-6-2ã€Scopeå¯¹è±¡" class="headerlink" title="2.6.2ã€Scopeå¯¹è±¡"></a>2.6.2ã€Scopeå¯¹è±¡</h5><p>pageScopeï¼ŒrequestScopeï¼ŒsessionScopeï¼ŒapplicationScopeå˜é‡ç”¨æ¥è®¿é—®å­˜å‚¨åœ¨å„ä¸ªä½œç”¨åŸŸå±‚æ¬¡çš„å˜é‡ã€‚<br>ä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚æœæ‚¨éœ€è¦æ˜¾å¼è®¿é—®åœ¨applicationScopeå±‚çš„boxå˜é‡ï¼Œå¯ä»¥è¿™æ ·æ¥è®¿é—®ï¼šapplicationScope.boxã€‚</p><h5 id="2-6-3ã€paramå’ŒparamValueså¯¹è±¡"><a href="#2-6-3ã€paramå’ŒparamValueså¯¹è±¡" class="headerlink" title="2.6.3ã€paramå’ŒparamValueså¯¹è±¡"></a>2.6.3ã€paramå’ŒparamValueså¯¹è±¡</h5><p>paramå’ŒparamValueså¯¹è±¡ç”¨æ¥è®¿é—®å‚æ•°å€¼ï¼Œé€šè¿‡ä½¿ç”¨request.getParameteræ–¹æ³•å’Œrequest.getParameterValuesæ–¹æ³•ã€‚<br>æ¥ä¸‹æ¥çš„ä¾‹å­è¡¨æ˜äº†å¦‚ä½•è®¿é—®<code>requestå¯¹è±¡</code>ä¸­çš„usernameå‚æ•°ï¼š</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-params">&lt;%@ page import=&quot;java.io.*,java.util.*&quot; %&gt;</span><br><span class="hljs-params">&lt;%</span><br><span class="hljs-params">    String title = &quot;Accessing Request Param&quot;;</span><br><span class="hljs-params">%&gt;</span><br><span class="hljs-params">&lt;html&gt;</span><br><br><span class="hljs-params">&lt;head&gt;</span><br><span class="hljs-params">&lt;title&gt;</span><span class="hljs-params">&lt;% out.print(title); %&gt;</span><span class="hljs-params">&lt;/title&gt;</span><br><span class="hljs-params">&lt;/head&gt;</span><br><br><span class="hljs-params">&lt;body&gt;</span><br><br><span class="hljs-params">&lt;center&gt;</span><br><span class="hljs-params">&lt;h1&gt;</span><span class="hljs-params">&lt;% out.print(title); %&gt;</span><span class="hljs-params">&lt;/h1&gt;</span><br><span class="hljs-params">&lt;/center&gt;</span><br><span class="hljs-params">&lt;div align=&quot;center&quot;&gt;</span><br><span class="hljs-params">&lt;p&gt;</span>$&#123;param[<span class="hljs-string">&quot;username&quot;</span>]&#125;<span class="hljs-params">&lt;/p&gt;</span><br><span class="hljs-params">&lt;/div&gt;</span><br><br><span class="hljs-params">&lt;/body&gt;</span><br><span class="hljs-params">&lt;/html&gt;</span><br></code></pre></td></tr></table></figure><p>paramå¯¹è±¡è¿”å›å•ä¸€çš„å­—ç¬¦ä¸²ï¼Œè€ŒparamValueså¯¹è±¡åˆ™è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ã€‚</p><h5 id="2-6-4ã€headerå’ŒheaderValueså¯¹è±¡"><a href="#2-6-4ã€headerå’ŒheaderValueså¯¹è±¡" class="headerlink" title="2.6.4ã€headerå’ŒheaderValueså¯¹è±¡"></a>2.6.4ã€headerå’ŒheaderValueså¯¹è±¡</h5><p>headerå’ŒheaderValueså¯¹è±¡ç”¨æ¥è®¿é—®ä¿¡æ¯å¤´ï¼Œé€šè¿‡ä½¿ç”¨ request.getHeaderæ–¹æ³•å’Œrequest.getHeadersæ–¹æ³•ã€‚<br>ä¸¾ä¾‹æ¥è¯´ï¼Œè¦è®¿é—®ä¸€ä¸ªåä¸ºuser-agentçš„ä¿¡æ¯å¤´ï¼Œå¯ä»¥è¿™æ ·ä½¿ç”¨è¡¨è¾¾å¼ï¼š${header.user-agent}ï¼Œæˆ–è€…${header[â€œuser-agentâ€]}ã€‚<br>æ¥ä¸‹æ¥çš„ä¾‹å­è¡¨æ˜äº†å¦‚ä½•è®¿é—®user-agentä¿¡æ¯å¤´ï¼š</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-params">&lt;%@ page import=&quot;java.io.*,java.util.*&quot; %&gt;</span><br><span class="hljs-params">&lt;%</span><br><span class="hljs-params">    String title = &quot;User Agent Example&quot;;</span><br><span class="hljs-params">%&gt;</span><br><span class="hljs-params">&lt;html&gt;</span><br><br><span class="hljs-params">&lt;head&gt;</span><br><span class="hljs-params">&lt;title&gt;</span><span class="hljs-params">&lt;% out.print(title); %&gt;</span><span class="hljs-params">&lt;/title&gt;</span><br><span class="hljs-params">&lt;/head&gt;</span><br><br><span class="hljs-params">&lt;body&gt;</span><br><br><span class="hljs-params">&lt;center&gt;</span><br><span class="hljs-params">&lt;h1&gt;</span><span class="hljs-params">&lt;% out.print(title); %&gt;</span><span class="hljs-params">&lt;/h1&gt;</span><br><span class="hljs-params">&lt;/center&gt;</span><br><span class="hljs-params">&lt;div align=&quot;center&quot;&gt;</span><br><span class="hljs-params">&lt;p&gt;</span>$&#123;header[<span class="hljs-string">&quot;user-agent&quot;</span>]&#125;<span class="hljs-params">&lt;/p&gt;</span><br><span class="hljs-params">&lt;/div&gt;</span><br><br><span class="hljs-params">&lt;/body&gt;</span><br><span class="hljs-params">&lt;/html&gt;</span><br></code></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹ï¼š</p><p><img src="/2019/11/21/JavaBean&EL&JSTL/res.png"></p><h3 id="3ã€JSTL"><a href="#3ã€JSTL" class="headerlink" title="3ã€JSTL"></a><a href="https://www.runoob.com/jsp/jsp-jstl.html">3ã€JSTL</a></h3><p>ä½¿ç”¨JSTLå¸®åŠ©æˆ‘ä»¬æˆ‘ä»¬å»æ¶ˆé™¤Javaä»£ç ï¼Œæ¯”å¦‚å¯ä»¥æ¶ˆé™¤ &lt;% â€¦ %&gt;è¿™é‡Œé¢çš„å†…å®¹</p><p>JSPæ ‡å‡†æ ‡ç­¾åº“ï¼ˆJSTLï¼‰æ˜¯ä¸€ä¸ªJSPæ ‡ç­¾é›†åˆï¼Œå®ƒå°è£…äº†JSPåº”ç”¨çš„é€šç”¨æ ¸å¿ƒåŠŸèƒ½ã€‚</p><p>JSTLæ”¯æŒé€šç”¨çš„ã€ç»“æ„åŒ–çš„ä»»åŠ¡ï¼Œæ¯”å¦‚è¿­ä»£ï¼Œæ¡ä»¶åˆ¤æ–­ï¼ŒXMLæ–‡æ¡£æ“ä½œï¼Œå›½é™…åŒ–æ ‡ç­¾ï¼ŒSQLæ ‡ç­¾ã€‚ é™¤äº†è¿™äº›ï¼Œå®ƒè¿˜æä¾›äº†ä¸€ä¸ªæ¡†æ¶æ¥ä½¿ç”¨é›†æˆJSTLçš„è‡ªå®šä¹‰æ ‡ç­¾ã€‚</p><p>æ ¹æ®JSTLæ ‡ç­¾æ‰€æä¾›çš„åŠŸèƒ½ï¼Œå¯ä»¥å°†å…¶åˆ†ä¸º5ä¸ªç±»åˆ«ã€‚</p><blockquote><ul><li>æ ¸å¿ƒæ ‡ç­¾ </li><li>æ ¼å¼åŒ–æ ‡ç­¾</li><li>SQL æ ‡ç­¾ </li><li>XML æ ‡ç­¾ </li><li>JSTL å‡½æ•°</li></ul></blockquote><h4 id="3-1ã€JSTLæ˜¯å•¥ï¼Ÿ"><a href="#3-1ã€JSTLæ˜¯å•¥ï¼Ÿ" class="headerlink" title="3.1ã€JSTLæ˜¯å•¥ï¼Ÿ"></a>3.1ã€JSTLæ˜¯å•¥ï¼Ÿ</h4><p>JSTL: æ ‡å‡†æ ‡ç­¾åº“, ç”±<code>æ ‡ç­¾åº“</code>å’Œ<code>ELè¡¨è¾¾å¼è¯­è¨€</code>ä¸¤ä¸ªéƒ¨åˆ†ç»„æˆï¼Œå¯ç”¨æ¥æ¶ˆé™¤JAVAä»£ç ï¼›</p><figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs erlang-repl">&lt;<span class="hljs-comment">%</span><br>int age = <span class="hljs-number">23</span>;<br>if(age&gt;<span class="hljs-number">18</span>)&#123;<br><span class="hljs-comment">%&gt;</span><br>ä½ çœŸæ£’ï¼<br>&lt;<span class="hljs-comment">%</span><br>&#125;<br><span class="hljs-comment">%&gt;</span><br></code></pre></td></tr></table></figure><p>å¯ä»¥å°†ä¸Šé¢çš„ä»£ç å˜æˆæ ‡ç­¾ï¼š</p><figure class="highlight bnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bnf"><span class="hljs-attribute">&lt;c:if test=&quot;age&gt;</span>18&quot;&gt;<br>ä½ çœŸæ£’ï¼<br><span class="hljs-attribute">&lt;/c:if&gt;</span><br>æˆ–<br><span class="hljs-attribute">&lt;å¦‚æœ è¡¨è¾¾å¼=&quot;age&gt;</span>18&quot;&gt;<br>ä½ çœŸæ£’ï¼<br><span class="hljs-attribute">&lt;/å¦‚æœ&gt;</span><br></code></pre></td></tr></table></figure><p>ä½†æ˜¯è¿™ä¸ªæ ‡ç­¾ä¸èƒ½éšä¾¿å†™ï¼ŒJavaå·²ç»å¸®æˆ‘ä»¬ç»Ÿä¸€äº†ä¸€å¥—æ ‡ç­¾ï¼Œå«åšJSTLï¼›</p><p>æ‰€ä»¥è¦ä½¿ç”¨JSTLï¼Œå¿…é¡»ä½¿ç”¨æ ‡ç­¾ï¼Œæ‰€ä»¥ä¹Ÿå¿…é¡»å¯¼å…¥Javaæä¾›å¥½çš„æ ‡ç­¾åº“</p><h4 id="3-2ã€ä½¿ç”¨JSTLæ ‡ç­¾åº“"><a href="#3-2ã€ä½¿ç”¨JSTLæ ‡ç­¾åº“" class="headerlink" title="3.2ã€ä½¿ç”¨JSTLæ ‡ç­¾åº“"></a>3.2ã€ä½¿ç”¨JSTLæ ‡ç­¾åº“</h4><p>ç¬¬ä¸€æ­¥ï¼šå¯¼Mavenä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br> <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>javax.servlet.jsp.jstl<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jstl-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">exclusions</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">exclusion</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>javax.servlet<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>servlet-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">exclusion</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">exclusion</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>javax.servlet.jsp<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jsp-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">exclusion</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">exclusions</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>taglibs<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>standard<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.1.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ç¬¬äºŒæ­¥ï¼šå¼•ç”¨JSTLæ ‡ç­¾åº“</p><p><img src="/2019/11/21/JavaBean&EL&JSTL/JSTL.png"></p><p>æˆ‘ä»¬å­¦ä¹ çš„æ˜¯coreæ ‡ç­¾åº“:éœ€åœ¨è¿›è¡Œå¯¼å…¥:</p><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gcode">&lt;<span class="hljs-meta">%</span>@ taglib uri=<span class="hljs-string">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> prefix=<span class="hljs-string">&quot;c&quot;</span> <span class="hljs-meta">%</span>&gt;<br></code></pre></td></tr></table></figure><p><img src="/2019/11/21/JavaBean&EL&JSTL/jstl1.png"></p><h4 id="3-3ã€æ ¸å¿ƒæ ‡ç­¾åº“"><a href="#3-3ã€æ ¸å¿ƒæ ‡ç­¾åº“" class="headerlink" title="3.3ã€æ ¸å¿ƒæ ‡ç­¾åº“"></a>3.3ã€æ ¸å¿ƒæ ‡ç­¾åº“</h4><p><img src="/2019/11/21/JavaBean&EL&JSTL/bao.png"></p><h5 id="3-3-1ã€ifæ ‡ç­¾ï¼ˆåˆ¤æ–­ï¼‰"><a href="#3-3-1ã€ifæ ‡ç­¾ï¼ˆåˆ¤æ–­ï¼‰" class="headerlink" title="3.3.1ã€ifæ ‡ç­¾ï¼ˆåˆ¤æ–­ï¼‰"></a>3.3.1ã€ifæ ‡ç­¾ï¼ˆåˆ¤æ–­ï¼‰</h5><p><img src="/2019/11/21/JavaBean&EL&JSTL/jstl1.png"></p><h5 id="3-3-2ã€chooseæ ‡ç­¾ï¼ˆé€‰æ‹©ï¼‰"><a href="#3-3-2ã€chooseæ ‡ç­¾ï¼ˆé€‰æ‹©ï¼‰" class="headerlink" title="3.3.2ã€chooseæ ‡ç­¾ï¼ˆé€‰æ‹©ï¼‰"></a>3.3.2ã€chooseæ ‡ç­¾ï¼ˆé€‰æ‹©ï¼‰</h5><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">c:choose</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">c:when</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;$</span></span></span><span class="hljs-template-variable">&#123;age&lt;=18&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span></span><br><span class="xml">        </span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">c:when</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">c:when</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;$</span></span></span><span class="hljs-template-variable">&#123;age&gt;18&amp;&amp;age&lt;60&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span></span><br><span class="xml">        </span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">c:when</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">c:otherwise</span>&gt;</span></span><br><span class="xml">        </span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">c:otherwise</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">c:choose</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h5 id="3-3-3ã€c-setã€c-outå’Œc-removeæ ‡ç­¾"><a href="#3-3-3ã€c-setã€c-outå’Œc-removeæ ‡ç­¾" class="headerlink" title="3.3.3ã€c:setã€c:outå’Œc:removeæ ‡ç­¾"></a>3.3.3ã€c:setã€c:outå’Œc:removeæ ‡ç­¾</h5><p>scopeå–å€¼ï¼š[session,page,request,application]</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros">&lt;c:<span class="hljs-builtin-name">set</span> <span class="hljs-attribute">var</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attribute">scope</span>=<span class="hljs-string">&quot;session&quot;</span> <span class="hljs-attribute">value</span>=<span class="hljs-string">&quot;ZhangSan&quot;</span>/&gt;<br>&lt;c:out <span class="hljs-attribute">value</span>=<span class="hljs-string">&quot;<span class="hljs-variable">$&#123;name&#125;</span>&quot;</span>/&gt;<br>&lt;c:<span class="hljs-builtin-name">remove</span> <span class="hljs-attribute">var</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attribute">scope</span>=<span class="hljs-string">&quot;session&quot;</span>/&gt;<br></code></pre></td></tr></table></figure><h5 id="3-3-4ã€c-urlæ ‡ç­¾"><a href="#3-3-4ã€c-urlæ ‡ç­¾" class="headerlink" title="3.3.4ã€c:urlæ ‡ç­¾"></a>3.3.4ã€c:urlæ ‡ç­¾</h5><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">c:url</span> <span class="hljs-attr">var</span>=<span class="hljs-string">&quot;login&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;/login&quot;</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">c:param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;cm&quot;</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">c:url</span>&gt;</span></span><br><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;$</span></span></span><span class="hljs-template-variable">&#123;login&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span>login1<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h5 id="3-3-5ã€forEachæ ‡ç­¾ï¼ˆå¾ªç¯ï¼‰"><a href="#3-3-5ã€forEachæ ‡ç­¾ï¼ˆå¾ªç¯ï¼‰" class="headerlink" title="3.3.5ã€forEachæ ‡ç­¾ï¼ˆå¾ªç¯ï¼‰"></a>3.3.5ã€forEachæ ‡ç­¾ï¼ˆå¾ªç¯ï¼‰</h5><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs powershell">&lt;c:<span class="hljs-keyword">forEach</span> <span class="hljs-keyword">begin</span>=<span class="hljs-string">&quot;1&quot;</span> <span class="hljs-keyword">end</span>=<span class="hljs-string">&quot;10&quot;</span> var=<span class="hljs-string">&quot;s&quot;</span>&gt;<br><span class="hljs-variable">$</span>&#123;s&#125;<br>&lt;/c:<span class="hljs-keyword">forEach</span>&gt;<br></code></pre></td></tr></table></figure><blockquote><p>begin:ä»å“ªé‡Œå¼€å§‹ã€endï¼šåˆ°å“ªé‡Œç»“æŸã€varï¼šå–äº†åå­—ï¼Œæ”¾åˆ°ä½œç”¨åŸŸé‡Œé¢</p><p>forEachçš„å¸¸ç”¨ç”¨æ³•æ˜¯ä»æ•°æ®åº“æ‹¿æ•°æ®ï¼Œå±•ç¤ºåˆ°é¡µé¢ï¼š</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stata">&lt;c:<span class="hljs-keyword">forEach</span> items=<span class="hljs-string">&quot;$&#123;emails&#125;&quot;</span> <span class="hljs-keyword">var</span>=<span class="hljs-string">&quot;e&quot;</span> varStatus=<span class="hljs-string">&quot;s&quot;</span>&gt;<br><span class="hljs-variable">$&#123;s</span>.<span class="hljs-keyword">count</span>&#125;||<span class="hljs-variable">$&#123;e</span>.id&#125;-<span class="hljs-variable">$&#123;e</span>.title&#125;-<span class="hljs-variable">$&#123;e</span>.intro&#125;&lt;<span class="hljs-keyword">br</span>&gt;<br>&lt;/c:<span class="hljs-keyword">forEach</span>&gt;<br></code></pre></td></tr></table></figure><p>items : è¦å¾ªç¯çš„é›†åˆ(æ•°ç»„)ã€var :æ¯ä¸€ä¸ªæ•°æ®çš„åç§°</p><p>varStatus: å½“å‰å¾ªç¯çš„çŠ¶æ€ï¼ˆså®ƒæ˜¯ä¸ªjavabeanï¼Œé‡Œé¢æœ‰å±æ€§ index(å¾ªç¯ç´¢å¼•ï¼Œä»0å¼€å§‹),countï¼ˆè®¡æ•°ï¼‰ï¼‰</p></blockquote><h4 id="lt-frameset-gt-Deprecated-HTML-tag"><a href="#lt-frameset-gt-Deprecated-HTML-tag" class="headerlink" title="&lt;frameset&gt;:Deprecated HTML tag"></a>&lt;frameset&gt;:Deprecated HTML tag</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">frameset</span> <span class="hljs-attr">rows</span>=<span class="hljs-string">&quot;20%,80%&quot;</span>&gt;</span><br><span class="hljs-comment">&lt;!-- å¤´éƒ¨é¡µé¢ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">frame</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;/xxx/top.jsp&quot;</span>&gt;</span><br><span class="hljs-comment">&lt;!-- ä¸­é—´åŒºåŸŸ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">frameset</span> <span class="hljs-attr">cols</span>=<span class="hljs-string">&quot;25%,75%&quot;</span>&gt;</span><br>     <span class="hljs-tag">&lt;<span class="hljs-name">frame</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;/xxx/menu.jsp&quot;</span>&gt;</span><br>     <span class="hljs-tag">&lt;<span class="hljs-name">frame</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;frame_main&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">frameset</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">frameset</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
    </categories>
    
    
    <tags>
      
      <tag>JavaBean</tag>
      
      <tag>JSP</tag>
      
      <tag>EL</tag>
      
      <tag>JSTL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Servletäº¤äº’ä¸JSP</title>
    <link href="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/"/>
    <url>/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/</url>
    
    <content type="html"><![CDATA[<h3 id="1ã€Java-Servlet"><a href="#1ã€Java-Servlet" class="headerlink" title="1ã€Java Servlet"></a><a href="https://www.runoob.com/servlet/servlet-tutorial.html">1ã€Java Servlet</a></h3><h4 id="1-1ã€Servletä»‹ç»"><a href="#1-1ã€Servletä»‹ç»" class="headerlink" title="1.1ã€Servletä»‹ç»"></a>1.1ã€Servletä»‹ç»</h4><p>Java Servlet æ˜¯è¿è¡Œåœ¨æ”¯æŒ Java Servlet è§„èŒƒçš„è§£é‡Šå™¨çš„Web æœåŠ¡å™¨ä¸Šçš„ç¨‹åºï¼Œå®ƒæ˜¯ä½œä¸ºæ¥è‡ª Web æµè§ˆå™¨æˆ–å…¶ä»– HTTP å®¢æˆ·ç«¯çš„è¯·æ±‚å’Œ HTTP æœåŠ¡å™¨ä¸Šçš„æ•°æ®åº“æˆ–åº”ç”¨ç¨‹åºä¹‹é—´çš„ä¸­é—´å±‚ã€‚</p><p>Servlet å¯ä»¥ä½¿ç”¨ <strong>javax.servlet</strong> å’Œ <strong>javax.servlet.http</strong> åŒ…åˆ›å»ºï¼Œå®ƒæ˜¯ <strong>Java ä¼ä¸šç‰ˆçš„æ ‡å‡†ç»„æˆéƒ¨åˆ†</strong>ï¼ŒJava ä¼ä¸šç‰ˆæ˜¯æ”¯æŒ<strong>å¤§å‹å¼€å‘é¡¹ç›®çš„ Java ç±»åº“çš„æ‰©å±•ç‰ˆæœ¬</strong>ã€‚è¿™äº›ç±»å®ç° Java Servlet å’Œ JSP è§„èŒƒã€‚</p><h5 id="1-1-1ã€Servlet-æ‰§è¡Œä»¥ä¸‹ä¸»è¦ä»»åŠ¡"><a href="#1-1-1ã€Servlet-æ‰§è¡Œä»¥ä¸‹ä¸»è¦ä»»åŠ¡" class="headerlink" title="1.1.1ã€Servlet æ‰§è¡Œä»¥ä¸‹ä¸»è¦ä»»åŠ¡"></a>1.1.1ã€Servlet æ‰§è¡Œä»¥ä¸‹ä¸»è¦ä»»åŠ¡</h5><ul><li>è¯»å–å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰å‘é€çš„æ˜¾å¼çš„æ•°æ®ã€‚è¿™åŒ…æ‹¬ç½‘é¡µä¸Šçš„ HTML è¡¨å•ï¼Œæˆ–è€…ä¹Ÿå¯ä»¥æ˜¯æ¥è‡ª applet æˆ–è‡ªå®šä¹‰çš„ HTTP å®¢æˆ·ç«¯ç¨‹åºçš„è¡¨å•ã€‚</li><li>è¯»å–å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰å‘é€çš„éšå¼çš„ HTTP è¯·æ±‚æ•°æ®ã€‚è¿™åŒ…æ‹¬ cookiesã€åª’ä½“ç±»å‹å’Œæµè§ˆå™¨èƒ½ç†è§£çš„å‹ç¼©æ ¼å¼ç­‰ç­‰ã€‚</li><li>å¤„ç†æ•°æ®å¹¶ç”Ÿæˆç»“æœã€‚è¿™ä¸ªè¿‡ç¨‹å¯èƒ½éœ€è¦è®¿é—®æ•°æ®åº“ï¼Œæ‰§è¡Œ RMI æˆ– CORBA è°ƒç”¨ï¼Œè°ƒç”¨ Web æœåŠ¡ï¼Œæˆ–è€…ç›´æ¥è®¡ç®—å¾—å‡ºå¯¹åº”çš„å“åº”ã€‚</li><li>å‘é€æ˜¾å¼çš„æ•°æ®ï¼ˆå³æ–‡æ¡£ï¼‰åˆ°å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰ã€‚è¯¥æ–‡æ¡£çš„æ ¼å¼å¯ä»¥æ˜¯å¤šç§å¤šæ ·çš„ï¼ŒåŒ…æ‹¬æ–‡æœ¬æ–‡ä»¶ï¼ˆHTML æˆ– XMLï¼‰ã€äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆGIF å›¾åƒï¼‰ã€Excel ç­‰ã€‚</li><li>å‘é€éšå¼çš„ HTTP å“åº”åˆ°å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰ã€‚è¿™åŒ…æ‹¬å‘Šè¯‰æµè§ˆå™¨æˆ–å…¶ä»–å®¢æˆ·ç«¯è¢«è¿”å›çš„æ–‡æ¡£ç±»å‹ï¼ˆä¾‹å¦‚ HTMLï¼‰ï¼Œè®¾ç½® cookies å’Œç¼“å­˜å‚æ•°ï¼Œä»¥åŠå…¶ä»–ç±»ä¼¼çš„ä»»åŠ¡ã€‚</li></ul><h5 id="1-1-2ã€Servletå’ŒCGI"><a href="#1-1-2ã€Servletå’ŒCGI" class="headerlink" title="1.1.2ã€Servletå’ŒCGI"></a>1.1.2ã€Servletå’ŒCGI</h5><p>Java Servlet é€šå¸¸æƒ…å†µä¸‹ä¸ä½¿ç”¨ CGIï¼ˆCommon Gateway Interfaceï¼Œå…¬å…±ç½‘å…³æ¥å£ï¼‰å®ç°çš„ç¨‹åºå¯ä»¥è¾¾åˆ°å¼‚æ›²åŒå·¥çš„æ•ˆæœã€‚ä½†æ˜¯ç›¸æ¯”äº CGIï¼ŒServlet æœ‰ä»¥ä¸‹å‡ ç‚¹ä¼˜åŠ¿ï¼š</p><blockquote><ul><li>æ€§èƒ½æ˜æ˜¾æ›´å¥½ã€‚</li><li>Servlet åœ¨ Web æœåŠ¡å™¨çš„åœ°å€ç©ºé—´å†…æ‰§è¡Œã€‚è¿™æ ·å®ƒå°±æ²¡æœ‰å¿…è¦å†åˆ›å»ºä¸€ä¸ªå•ç‹¬çš„è¿›ç¨‹æ¥å¤„ç†æ¯ä¸ªå®¢æˆ·ç«¯è¯·æ±‚ã€‚</li><li>Servlet æ˜¯ç‹¬ç«‹äºå¹³å°çš„ï¼Œå› ä¸ºå®ƒä»¬æ˜¯ç”¨ Java ç¼–å†™çš„ã€‚</li><li>æœåŠ¡å™¨ä¸Šçš„ Java å®‰å…¨ç®¡ç†å™¨æ‰§è¡Œäº†ä¸€ç³»åˆ—é™åˆ¶ï¼Œä»¥ä¿æŠ¤æœåŠ¡å™¨è®¡ç®—æœºä¸Šçš„èµ„æºã€‚å› æ­¤ï¼ŒServlet æ˜¯å¯ä¿¡çš„ã€‚</li><li>Java ç±»åº“çš„å…¨éƒ¨åŠŸèƒ½å¯¹ Servlet æ¥è¯´éƒ½æ˜¯å¯ç”¨çš„ã€‚å®ƒå¯ä»¥é€šè¿‡ sockets å’Œ RMI æœºåˆ¶ä¸ appletsã€æ•°æ®åº“æˆ–å…¶ä»–è½¯ä»¶è¿›è¡Œäº¤äº’ã€‚</li></ul></blockquote><h4 id="1-2ã€Servletæ¶æ„"><a href="#1-2ã€Servletæ¶æ„" class="headerlink" title="1.2ã€Servletæ¶æ„"></a>1.2ã€Servletæ¶æ„</h4><p>ä¸‹å›¾æ˜¾ç¤ºäº† Servlet åœ¨ Web åº”ç”¨ç¨‹åºä¸­çš„ä½ç½®ã€‚</p><p><img src="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/servlet1.png"></p><h4 id="1-3ã€Servletç”Ÿå‘½å‘¨æœŸ"><a href="#1-3ã€Servletç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="1.3ã€Servletç”Ÿå‘½å‘¨æœŸ:"></a><a href="https://www.runoob.com/servlet/servlet-life-cycle.html">1.3ã€Servletç”Ÿå‘½å‘¨æœŸ:</a></h4><p>Servlet ç”Ÿå‘½å‘¨æœŸå¯è¢«å®šä¹‰ä¸ºä»åˆ›å»ºç›´åˆ°æ¯ç­çš„æ•´ä¸ªè¿‡ç¨‹ã€‚ä»¥ä¸‹æ˜¯ Servlet éµå¾ªçš„è¿‡ç¨‹ï¼š</p><ul><li>Servlet é€šè¿‡è°ƒç”¨ <strong>init ()</strong> æ–¹æ³•è¿›è¡Œåˆå§‹åŒ–ã€‚</li><li>Servlet è°ƒç”¨ <strong>service()</strong> æ–¹æ³•æ¥å¤„ç†å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚</li><li>Servlet é€šè¿‡è°ƒç”¨ <strong>destroy()</strong> æ–¹æ³•ç»ˆæ­¢ï¼ˆç»“æŸï¼‰ã€‚</li><li>æœ€åï¼ŒServlet æ˜¯ç”± JVM çš„åƒåœ¾å›æ”¶å™¨è¿›è¡Œåƒåœ¾å›æ”¶çš„ã€‚</li></ul><p><img src="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/lificycle.png"></p><h4 id="æ­£å¼å¼€å§‹ç Servletå‰å…ˆ1-20çœ‹Servletå¦‚ä½•é…ç½®éƒ¨ç½²"><a href="#æ­£å¼å¼€å§‹ç Servletå‰å…ˆ1-20çœ‹Servletå¦‚ä½•é…ç½®éƒ¨ç½²" class="headerlink" title="æ­£å¼å¼€å§‹ç Servletå‰å…ˆ1.20çœ‹Servletå¦‚ä½•é…ç½®éƒ¨ç½²"></a>æ­£å¼å¼€å§‹ç Servletå‰å…ˆ1.20çœ‹Servletå¦‚ä½•é…ç½®éƒ¨ç½²</h4><h4 id="1-4ã€Servletå¤„ç†è¡¨å•æ•°æ®"><a href="#1-4ã€Servletå¤„ç†è¡¨å•æ•°æ®" class="headerlink" title="1.4ã€Servletå¤„ç†è¡¨å•æ•°æ®"></a><a href="https://www.runoob.com/servlet/servlet-form-data.html">1.4ã€Servletå¤„ç†è¡¨å•æ•°æ®</a></h4><h5 id="1-4-1ã€å®¢æˆ·ç«¯å‘WebæœåŠ¡å™¨å‘é€æ•°æ®"><a href="#1-4-1ã€å®¢æˆ·ç«¯å‘WebæœåŠ¡å™¨å‘é€æ•°æ®" class="headerlink" title="1.4.1ã€å®¢æˆ·ç«¯å‘WebæœåŠ¡å™¨å‘é€æ•°æ®"></a>1.4.1ã€å®¢æˆ·ç«¯å‘WebæœåŠ¡å™¨å‘é€æ•°æ®</h5><p>ä»¥è¡¨å•å½¢å¼ä¼ é€’ã€‚æµè§ˆå™¨ä½¿ç”¨ä¸¤ç§æ–¹æ³•ä¼ é€’è¿™äº›æ•°æ®ï¼Œåˆ†åˆ«æ˜¯<code>GET</code>å’Œ<code>POST</code>æ–¹æ³•ã€‚</p><p><strong>GETæ–¹æ³•:</strong></p><p>GET æ–¹æ³•æ˜¯é»˜è®¤çš„ä»æµè§ˆå™¨å‘ Web æœåŠ¡å™¨ä¼ é€’æ•°æ®çš„æ–¹æ³•ï¼Œå®ƒä¼šäº§ç”Ÿä¸€ä¸ªå¾ˆé•¿çš„å­—ç¬¦ä¸²ï¼Œå‡ºç°åœ¨æµè§ˆå™¨çš„åœ°å€æ ä¸­ã€‚</p><p>å¦‚æœæ‚¨è¦å‘æœåŠ¡å™¨ä¼ é€’çš„æ˜¯å¯†ç æˆ–å…¶ä»–çš„æ•æ„Ÿä¿¡æ•°æ®ï¼Œè¯·ä¸è¦ä½¿ç”¨ GET æ–¹æ³•ã€‚GET æ–¹æ³•è¿˜æœ‰å¤§å°é™åˆ¶ï¼šè¯·æ±‚å­—ç¬¦ä¸²ä¸­æœ€å¤šåªèƒ½æœ‰ 1024 ä¸ªå­—ç¬¦ã€‚</p><p>è¿™äº›ä¿¡æ¯ä½¿ç”¨ <strong>QUERY_STRING  å¤´ä¼ é€’</strong>ï¼Œå¹¶å¯ä»¥é€šè¿‡ QUERY_STRING ç¯å¢ƒå˜é‡è®¿é—®ï¼ŒServlet ä½¿ç”¨ <strong>doGet() æ–¹æ³•å¤„ç†è¿™ç§ç±»å‹çš„è¯·æ±‚</strong>ã€‚</p><p>GET æ–¹æ³•å‘é¡µé¢è¯·æ±‚å‘é€å·²ç¼–ç çš„ç”¨æˆ·æ•°æ®ã€‚é¡µé¢å’Œå·²ç¼–ç çš„æ•°æ®ä¸­é—´ç”¨ ? å­—ç¬¦åˆ†éš”ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">http</span>://www.test.com/hello?key<span class="hljs-number">1</span>=value<span class="hljs-number">1</span>&amp;key<span class="hljs-number">2</span>=value<span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><p><strong>POSTæ–¹æ³•:</strong></p><p>å¦ä¸€ä¸ªå‘åå°ç¨‹åºä¼ é€’ä¿¡æ¯çš„æ¯”è¾ƒå¯é çš„æ–¹æ³•ã€‚POST æ–¹æ³•æ‰“åŒ…ä¿¡æ¯çš„æ–¹å¼ä¸ GET æ–¹æ³•åŸºæœ¬ç›¸åŒï¼Œä½†æ˜¯ POST æ–¹æ³•ä¸æ˜¯<code>æŠŠä¿¡æ¯ä½œä¸º URL</code> ä¸­ ? å­—ç¬¦åçš„æ–‡æœ¬å­—ç¬¦ä¸²è¿›è¡Œå‘é€ï¼Œè€Œæ˜¯æŠŠè¿™äº›ä¿¡æ¯ä½œä¸ºä¸€ä¸ª<code>å•ç‹¬çš„æ¶ˆæ¯</code>ã€‚æ¶ˆæ¯ä»¥æ ‡å‡†è¾“å‡ºçš„å½¢å¼ä¼ åˆ°åå°ç¨‹åºï¼Œæ‚¨å¯ä»¥è§£æå’Œä½¿ç”¨è¿™äº›æ ‡å‡†è¾“å‡ºã€‚Servlet ä½¿ç”¨ <strong>doPost() æ–¹æ³•å¤„ç†è¿™ç§ç±»å‹çš„è¯·æ±‚</strong>ã€‚</p><h5 id="1-4-2ã€Servletä½¿ç”¨ä»æµè§ˆå™¨ä¼ é€’æ¥çš„æ•°æ®"><a href="#1-4-2ã€Servletä½¿ç”¨ä»æµè§ˆå™¨ä¼ é€’æ¥çš„æ•°æ®" class="headerlink" title="1.4.2ã€Servletä½¿ç”¨ä»æµè§ˆå™¨ä¼ é€’æ¥çš„æ•°æ®"></a>1.4.2ã€Servletä½¿ç”¨ä»æµè§ˆå™¨ä¼ é€’æ¥çš„æ•°æ®</h5><p>Servlet å¤„ç†è¡¨å•æ•°æ®ï¼Œè¿™äº›æ•°æ®ä¼šæ ¹æ®ä¸åŒçš„æƒ…å†µä½¿ç”¨ä¸åŒçš„æ–¹æ³•è‡ªåŠ¨è§£æï¼š</p><ul><li><strong>getParameter()ï¼š</strong>æ‚¨å¯ä»¥è°ƒç”¨ request.getParameter() æ–¹æ³•æ¥è·å–è¡¨å•å‚æ•°çš„å€¼ã€‚</li><li><strong>getParameterValues()ï¼š</strong>å¦‚æœå‚æ•°å‡ºç°ä¸€æ¬¡ä»¥ä¸Šï¼Œåˆ™è°ƒç”¨è¯¥æ–¹æ³•ï¼Œå¹¶è¿”å›å¤šä¸ªå€¼ï¼Œä¾‹å¦‚å¤é€‰æ¡†ã€‚</li><li><strong>getParameterNames()ï¼š</strong>å¦‚æœæ‚¨æƒ³è¦å¾—åˆ°å½“å‰è¯·æ±‚ä¸­çš„æ‰€æœ‰å‚æ•°çš„å®Œæ•´åˆ—è¡¨ï¼Œåˆ™è°ƒç”¨è¯¥æ–¹æ³•ã€‚</li></ul><p><strong>(1)ã€getæ–¹å¼ä¸¾ä¾‹ï¼š</strong></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs swift">package cn.ant_nest.www;<br><br><span class="hljs-keyword">import</span> javax.servlet.ServletException;<br><span class="hljs-keyword">import</span> javax.servlet.annotation.WebServlet;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServlet;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletResponse;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.PrintWriter;<br><br><span class="hljs-meta">@WebServlet</span>(<span class="hljs-string">&quot;/Index&quot;</span> )<br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Index</span> <span class="hljs-title">extends</span> <span class="hljs-title">HttpServlet</span> </span>&#123;<br>    protected void doPost(<span class="hljs-type">HttpServletRequest</span> request, <span class="hljs-type">HttpServletResponse</span> response) <span class="hljs-keyword">throws</span> <span class="hljs-type">ServletException</span>, <span class="hljs-type">IOException</span> &#123;<br>            doGet(request, response);<br>    &#125;<br><br>    protected void doGet(<span class="hljs-type">HttpServletRequest</span> request, <span class="hljs-type">HttpServletResponse</span> response) <span class="hljs-keyword">throws</span> <span class="hljs-type">ServletException</span>, <span class="hljs-type">IOException</span> &#123;<br><br>        <span class="hljs-comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span><br>        response.setContentType(<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span>);<br><br>        <span class="hljs-type">PrintWriter</span> out <span class="hljs-operator">=</span> response.getWriter();<br>        <span class="hljs-type">String</span> title <span class="hljs-operator">=</span> <span class="hljs-string">&quot;è¯»å–è¡¨å•æ•°æ®&quot;</span>;<br>        <span class="hljs-comment">// å¤„ç†ä¸­æ–‡</span><br>        <span class="hljs-type">String</span> name <span class="hljs-operator">=</span>new <span class="hljs-type">String</span>(request.getParameter(<span class="hljs-string">&quot;name&quot;</span>).getBytes(<span class="hljs-string">&quot;ISO-8859-1&quot;</span>),<span class="hljs-string">&quot;UTF-8&quot;</span>);<span class="hljs-comment">//å¤„ç†è¡¨å•ä¼ é€’ä¸­æ–‡ä¿¡æ¯ä¹±ç é—®é¢˜</span><br>        <span class="hljs-type">String</span> docType <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&lt;!DOCTYPE html&gt; <span class="hljs-subst">\n</span>&quot;</span>;<br>        out.println(docType <span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;&lt;html&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;&lt;head&gt;&lt;title&gt;&quot;</span> <span class="hljs-operator">+</span> title <span class="hljs-operator">+</span> <span class="hljs-string">&quot;&lt;/title&gt;&lt;/head&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;&lt;body bgcolor=<span class="hljs-subst">\&quot;</span>#f0f0f0<span class="hljs-subst">\&quot;</span>&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;&lt;h1 align=<span class="hljs-subst">\&quot;</span>center<span class="hljs-subst">\&quot;</span>&gt;&quot;</span> <span class="hljs-operator">+</span> title <span class="hljs-operator">+</span> <span class="hljs-string">&quot;&lt;/h1&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;&lt;ul&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;  &lt;li&gt;&lt;b&gt;ç«™ç‚¹å&lt;/b&gt;ï¼š&quot;</span><br>                <span class="hljs-operator">+</span> name <span class="hljs-operator">+</span> <span class="hljs-string">&quot;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;  &lt;li&gt;&lt;b&gt;ç½‘å€&lt;/b&gt;ï¼š&quot;</span><br>                <span class="hljs-operator">+</span> request.getParameter(<span class="hljs-string">&quot;url&quot;</span>) <span class="hljs-operator">+</span> <span class="hljs-string">&quot;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;&lt;/ul&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;&lt;ul&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;  &lt;li&gt;&lt;b&gt;ç™¾åº¦æ ‡è¯†ï¼š&lt;/b&gt;: &quot;</span><br>                <span class="hljs-operator">+</span> request.getParameter(<span class="hljs-string">&quot;baidu&quot;</span>) <span class="hljs-operator">+</span> <span class="hljs-string">&quot;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;  &lt;li&gt;&lt;b&gt;Google æ ‡è¯†ï¼š&lt;/b&gt;: &quot;</span><br>                <span class="hljs-operator">+</span> request.getParameter(<span class="hljs-string">&quot;google&quot;</span>) <span class="hljs-operator">+</span> <span class="hljs-string">&quot;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;  &lt;li&gt;&lt;b&gt;æ·˜å®æ ‡è¯†ï¼š&lt;/b&gt;: &quot;</span><br>                <span class="hljs-operator">+</span> request.getParameter(<span class="hljs-string">&quot;taobao&quot;</span>) <span class="hljs-operator">+</span> <span class="hljs-string">&quot;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;&lt;/ul&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;&lt;/body&gt;&lt;/html&gt;&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; <span class="hljs-keyword">language</span>=&quot;java&quot; %&gt;<br>&lt;html&gt;<br>&lt;head&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br>    &lt;form action=&quot;Index&quot; <span class="hljs-keyword">method</span>=&quot;get&quot;&gt;<br>        ç½‘å€åï¼š&lt;<span class="hljs-keyword">input</span> <span class="hljs-keyword">type</span>=&quot;text&quot; <span class="hljs-type">name</span>=&quot;name&quot;&gt;<br>        &lt;br /&gt;<br>        ç½‘å€ï¼š&lt;<span class="hljs-keyword">input</span> <span class="hljs-keyword">type</span>=&quot;text&quot; <span class="hljs-type">name</span>=&quot;url&quot; /&gt;&lt;br&gt;<br>        &lt;<span class="hljs-keyword">input</span> <span class="hljs-keyword">type</span>=&quot;checkbox&quot; <span class="hljs-type">name</span>=&quot;baidu&quot; checked=&quot;checked&quot; /&gt; ç™¾åº¦<br>&lt;<span class="hljs-keyword">input</span> <span class="hljs-keyword">type</span>=&quot;checkbox&quot; <span class="hljs-type">name</span>=&quot;google&quot;  /&gt; Google<br>&lt;<span class="hljs-keyword">input</span> <span class="hljs-keyword">type</span>=&quot;checkbox&quot; <span class="hljs-type">name</span>=&quot;taobao&quot; checked=&quot;checked&quot; /&gt; æ·˜å®<br>        &lt;<span class="hljs-keyword">input</span> <span class="hljs-keyword">type</span>=&quot;submit&quot; <span class="hljs-keyword">value</span>=&quot;æäº¤&quot; /&gt;<br>    &lt;/form&gt;<br>&lt;/body&gt;<br>&lt;/html&gt;<br></code></pre></td></tr></table></figure><p><img src="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/get.png"></p><p><strong>ï¼ˆ2ï¼‰ã€postæ–¹å¼ä¸¾ä¾‹ï¼š</strong></p><p><img src="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/post.png"></p><p><img src="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/post1.png"></p><p><strong>ï¼ˆ3ï¼‰ã€éå†è¡¨å•å…ƒç´ ï¼š</strong></p><figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs sas">Enumeration paramNames = request.getParameterNames();//è·å–æ‰€æœ‰é¢å•å…ƒç´ å<br><br><span class="hljs-meta">while</span>(paramNames.hasMoreElements()) &#123;<br>String paramName = (String)paramNames.nextElement();<br><span class="hljs-meta">out</span>.p<span class="hljs-meta">rint(</span><span class="hljs-string">&quot;&lt;tr&gt;&lt;td&gt;&quot;</span> + paramName + <span class="hljs-string">&quot;&lt;/td&gt;\n&quot;</span>);<br>String[] paramValues =<br>request.getParameterValues(paramName);<br>// è¯»å–å•ä¸ªå€¼çš„æ•°æ®<br><span class="hljs-meta">if</span> (paramValues.<span class="hljs-meta">length</span> == 1) &#123;<br>String paramValue = paramValues[0];<br><span class="hljs-meta">if</span> (paramValue<span class="hljs-meta">.length(</span>) == 0)<br><span class="hljs-meta">out</span>.print<span class="hljs-meta">ln(</span><span class="hljs-string">&quot;&lt;td&gt;&lt;i&gt;æ²¡æœ‰å€¼&lt;/i&gt;&lt;/td&gt;&quot;</span>);<br><span class="hljs-meta">else</span><br><span class="hljs-meta">out</span>.print<span class="hljs-meta">ln(</span><span class="hljs-string">&quot;&lt;td&gt;&quot;</span> + paramValue + <span class="hljs-string">&quot;&lt;/td&gt;&quot;</span>);<br>&#125; <span class="hljs-meta">else</span> &#123;<br>// è¯»å–å¤šä¸ªå€¼çš„æ•°æ®<br><span class="hljs-meta">out</span>.print<span class="hljs-meta">ln(</span><span class="hljs-string">&quot;&lt;td&gt;&lt;ul&gt;&quot;</span>);<br>for(int i=0; i &lt; paramValues.<span class="hljs-meta">length</span>; i++) &#123;<br><span class="hljs-meta">out</span>.print<span class="hljs-meta">ln(</span><span class="hljs-string">&quot;&lt;li&gt;&quot;</span> + paramValues[i]);<br>&#125;<br><span class="hljs-meta">out</span>.print<span class="hljs-meta">ln(</span><span class="hljs-string">&quot;&lt;/ul&gt;&lt;/td&gt;&quot;</span>);<br>&#125;<br><span class="hljs-meta">out</span>.p<span class="hljs-meta">rint(</span><span class="hljs-string">&quot;&lt;/tr&gt;&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/bianli.png"></p><h4 id="1-5ã€ServletäºHTTPè¯·æ±‚å“åº”"><a href="#1-5ã€ServletäºHTTPè¯·æ±‚å“åº”" class="headerlink" title="1.5ã€ServletäºHTTPè¯·æ±‚å“åº”"></a>1.5ã€ServletäºHTTPè¯·æ±‚å“åº”</h4><p>æµè§ˆå™¨è¯·æ±‚ç½‘é¡µæ—¶ï¼Œå®ƒä¼šå‘ Web æœåŠ¡å™¨å‘é€ç‰¹å®šä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯ä¸èƒ½è¢«ç›´æ¥è¯»å–ï¼Œå› ä¸ºè¿™äº›ä¿¡æ¯æ˜¯ä½œä¸º <code>HTTP è¯·æ±‚çš„å¤´</code>çš„ä¸€éƒ¨åˆ†è¿›è¡Œä¼ è¾“çš„ã€‚æ‚¨å¯ä»¥æŸ¥çœ‹ <a href="https://www.runoob.com/http/http-tutorial.html">HTTP åè®®</a> äº†è§£æ›´å¤šç›¸å…³ä¿¡æ¯ã€‚</p><p><strong>ï¼ˆ1ï¼‰ã€ä»¥ä¸‹æ˜¯æ¥è‡ªäºæµè§ˆå™¨ç«¯çš„é‡è¦å¤´ä¿¡æ¯ï¼š</strong></p><table><thead><tr><th align="left">å¤´ä¿¡æ¯</th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="left">Accept</td><td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æŒ‡å®šæµè§ˆå™¨æˆ–å…¶ä»–å®¢æˆ·ç«¯å¯ä»¥å¤„ç†çš„ MIME ç±»å‹ã€‚å€¼ <strong>image/png</strong> æˆ– <strong>image/jpeg</strong> æ˜¯æœ€å¸¸è§çš„ä¸¤ç§å¯èƒ½å€¼ã€‚</td></tr><tr><td align="left">Accept-Charset</td><td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æŒ‡å®šæµè§ˆå™¨å¯ä»¥ç”¨æ¥æ˜¾ç¤ºä¿¡æ¯çš„å­—ç¬¦é›†ã€‚ä¾‹å¦‚ ISO-8859-1ã€‚</td></tr><tr><td align="left">Accept-Encoding</td><td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æŒ‡å®šæµè§ˆå™¨çŸ¥é“å¦‚ä½•å¤„ç†çš„ç¼–ç ç±»å‹ã€‚å€¼ <strong>gzip</strong> æˆ– <strong>compress</strong> æ˜¯æœ€å¸¸è§çš„ä¸¤ç§å¯èƒ½å€¼ã€‚</td></tr><tr><td align="left">Accept-Language</td><td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æŒ‡å®šå®¢æˆ·ç«¯çš„é¦–é€‰è¯­è¨€ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒServlet ä¼šäº§ç”Ÿå¤šç§è¯­è¨€çš„ç»“æœã€‚ä¾‹å¦‚ï¼Œenã€en-usã€ru ç­‰ã€‚</td></tr><tr><td align="left">Authorization</td><td align="left">è¿™ä¸ªå¤´ä¿¡æ¯ç”¨äºå®¢æˆ·ç«¯åœ¨è®¿é—®å—å¯†ç ä¿æŠ¤çš„ç½‘é¡µæ—¶è¯†åˆ«è‡ªå·±çš„èº«ä»½ã€‚</td></tr><tr><td align="left">Connection</td><td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æŒ‡ç¤ºå®¢æˆ·ç«¯æ˜¯å¦å¯ä»¥å¤„ç†æŒä¹… HTTP è¿æ¥ã€‚æŒä¹…è¿æ¥å…è®¸å®¢æˆ·ç«¯æˆ–å…¶ä»–æµè§ˆå™¨é€šè¿‡<code>ï¼ˆå•ä¸ªè¯·æ±‚æ¥æ£€ç´¢å¤šä¸ªæ–‡ä»¶ï¼Ÿï¼Ÿï¼Ÿï¼‰</code>ã€‚å€¼ <strong>Keep-Alive</strong> æ„å‘³ç€ä½¿ç”¨äº†æŒç»­è¿æ¥ã€‚</td></tr><tr><td align="left">Content-Length</td><td align="left">è¿™ä¸ªå¤´ä¿¡æ¯åªé€‚ç”¨äº POST è¯·æ±‚ï¼Œå¹¶ç»™å‡º POST æ•°æ®çš„å¤§å°ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰ã€‚</td></tr><tr><td align="left">Cookie</td><td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æŠŠä¹‹å‰å‘é€åˆ°æµè§ˆå™¨çš„ cookies è¿”å›åˆ°æœåŠ¡å™¨ã€‚</td></tr><tr><td align="left">Host</td><td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æŒ‡å®šåŸå§‹çš„ URL ä¸­çš„ä¸»æœºå’Œç«¯å£ã€‚</td></tr><tr><td align="left">If-Modified-Since</td><td align="left">è¿™ä¸ªå¤´ä¿¡æ¯è¡¨ç¤ºåªæœ‰å½“é¡µé¢åœ¨æŒ‡å®šçš„æ—¥æœŸåå·²æ›´æ”¹æ—¶ï¼Œå®¢æˆ·ç«¯æƒ³è¦çš„é¡µé¢ã€‚å¦‚æœæ²¡æœ‰æ–°çš„ç»“æœå¯ä»¥ä½¿ç”¨ï¼ŒæœåŠ¡å™¨ä¼šå‘é€ä¸€ä¸ª 304 ä»£ç ï¼Œè¡¨ç¤º <strong>Not Modified</strong> å¤´ä¿¡æ¯ã€‚</td></tr><tr><td align="left">If-Unmodified-Since</td><td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æ˜¯ If-Modified-Since çš„å¯¹ç«‹é¢ï¼Œå®ƒæŒ‡å®šåªæœ‰å½“æ–‡æ¡£æ—©äºæŒ‡å®šæ—¥æœŸæ—¶ï¼Œæ“ä½œæ‰ä¼šæˆåŠŸã€‚</td></tr><tr><td align="left">Referer</td><td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æŒ‡ç¤ºæ‰€æŒ‡å‘çš„ Web é¡µçš„ URLã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨åœ¨ç½‘é¡µ 1ï¼Œç‚¹å‡»ä¸€ä¸ªé“¾æ¥åˆ°ç½‘é¡µ 2ï¼Œå½“æµè§ˆå™¨è¯·æ±‚ç½‘é¡µ 2 æ—¶ï¼Œç½‘é¡µ 1 çš„ URL å°±ä¼šåŒ…å«åœ¨ Referer å¤´ä¿¡æ¯ä¸­ã€‚</td></tr><tr><td align="left">User-Agent</td><td align="left">è¿™ä¸ªå¤´ä¿¡æ¯è¯†åˆ«å‘å‡ºè¯·æ±‚çš„æµè§ˆå™¨æˆ–å…¶ä»–å®¢æˆ·ç«¯ï¼Œå¹¶å¯ä»¥å‘ä¸åŒç±»å‹çš„æµè§ˆå™¨è¿”å›ä¸åŒçš„å†…å®¹ã€‚</td></tr></tbody></table><p><strong>ï¼ˆ2ï¼‰ã€ä¸‹è¡¨æ€»ç»“äº†ä» Web æœåŠ¡å™¨ç«¯è¿”å›åˆ°æµè§ˆå™¨çš„æœ€æœ‰ç”¨çš„ HTTP 1.1 å“åº”æŠ¥å¤´ï¼š</strong></p><table><thead><tr><th align="left">å¤´ä¿¡æ¯</th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="left">Allow</td><td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æŒ‡å®šæœåŠ¡å™¨æ”¯æŒçš„è¯·æ±‚æ–¹æ³•ï¼ˆGETã€POST ç­‰ï¼‰ã€‚</td></tr><tr><td align="left">Cache-Control</td><td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æŒ‡å®šå“åº”æ–‡æ¡£åœ¨ä½•ç§æƒ…å†µä¸‹å¯ä»¥å®‰å…¨åœ°ç¼“å­˜ã€‚å¯èƒ½çš„å€¼æœ‰ï¼š<strong>publicã€private</strong> æˆ– <strong>no-cache</strong> ç­‰ã€‚Public æ„å‘³ç€æ–‡æ¡£æ˜¯å¯ç¼“å­˜ï¼ŒPrivate æ„å‘³ç€æ–‡æ¡£æ˜¯å•ä¸ªç”¨æˆ·ç§ç”¨æ–‡æ¡£ï¼Œä¸”åªèƒ½å­˜å‚¨åœ¨ç§æœ‰ï¼ˆéå…±äº«ï¼‰ç¼“å­˜ä¸­ï¼Œno-cache æ„å‘³ç€æ–‡æ¡£ä¸åº”è¢«ç¼“å­˜ã€‚</td></tr><tr><td align="left">Connection</td><td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æŒ‡ç¤ºæµè§ˆå™¨æ˜¯å¦ä½¿ç”¨æŒä¹… HTTP è¿æ¥ã€‚å€¼ <strong>close</strong> æŒ‡ç¤ºæµè§ˆå™¨ä¸ä½¿ç”¨æŒä¹… HTTP è¿æ¥ï¼Œå€¼ <strong>keep-alive</strong> æ„å‘³ç€ä½¿ç”¨æŒä¹…è¿æ¥ã€‚</td></tr><tr><td align="left">Content-Disposition</td><td align="left">è¿™ä¸ªå¤´ä¿¡æ¯å¯ä»¥è®©æ‚¨è¯·æ±‚æµè§ˆå™¨è¦æ±‚ç”¨æˆ·ä»¥ç»™å®šåç§°çš„æ–‡ä»¶æŠŠå“åº”ä¿å­˜åˆ°ç£ç›˜ã€‚</td></tr><tr><td align="left">Content-Encoding</td><td align="left">åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œè¿™ä¸ªå¤´ä¿¡æ¯æŒ‡å®šé¡µé¢çš„ç¼–ç æ–¹å¼ã€‚</td></tr><tr><td align="left">Content-Language</td><td align="left">è¿™ä¸ªå¤´ä¿¡æ¯è¡¨ç¤ºæ–‡æ¡£ç¼–å†™æ‰€ä½¿ç”¨çš„è¯­è¨€ã€‚ä¾‹å¦‚ï¼Œenã€en-usã€ru ç­‰ã€‚</td></tr><tr><td align="left">Content-Length</td><td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æŒ‡ç¤ºå“åº”ä¸­çš„å­—èŠ‚æ•°ã€‚åªæœ‰å½“æµè§ˆå™¨ä½¿ç”¨æŒä¹…ï¼ˆkeep-aliveï¼‰HTTP è¿æ¥æ—¶æ‰éœ€è¦è¿™äº›ä¿¡æ¯ã€‚</td></tr><tr><td align="left">Content-Type</td><td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æä¾›äº†å“åº”æ–‡æ¡£çš„ MIMEï¼ˆMultipurpose Internet Mail Extensionï¼‰ç±»å‹ã€‚</td></tr><tr><td align="left">Expires</td><td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æŒ‡å®šå†…å®¹è¿‡æœŸçš„æ—¶é—´ï¼Œåœ¨è¿™ä¹‹åå†…å®¹ä¸å†è¢«ç¼“å­˜ã€‚</td></tr><tr><td align="left">Last-Modified</td><td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æŒ‡ç¤ºæ–‡æ¡£çš„æœ€åä¿®æ”¹æ—¶é—´ã€‚ç„¶åï¼Œå®¢æˆ·ç«¯å¯ä»¥ç¼“å­˜æ–‡ä»¶ï¼Œå¹¶åœ¨ä»¥åçš„è¯·æ±‚ä¸­é€šè¿‡ <strong>If-Modified-Since</strong> è¯·æ±‚å¤´ä¿¡æ¯æä¾›ä¸€ä¸ªæ—¥æœŸã€‚</td></tr><tr><td align="left">Location</td><td align="left">è¿™ä¸ªå¤´ä¿¡æ¯åº”è¢«åŒ…å«åœ¨æ‰€æœ‰çš„å¸¦æœ‰çŠ¶æ€ç çš„å“åº”ä¸­ã€‚åœ¨ 300s å†…ï¼Œè¿™ä¼šé€šçŸ¥æµè§ˆå™¨æ–‡æ¡£çš„åœ°å€ã€‚æµè§ˆå™¨ä¼šè‡ªåŠ¨é‡æ–°è¿æ¥åˆ°è¿™ä¸ªä½ç½®ï¼Œå¹¶è·å–æ–°çš„æ–‡æ¡£ã€‚</td></tr><tr><td align="left">Refresh</td><td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æŒ‡å®šæµè§ˆå™¨åº”è¯¥å¦‚ä½•å°½å¿«è¯·æ±‚æ›´æ–°çš„é¡µé¢ã€‚æ‚¨å¯ä»¥æŒ‡å®šé¡µé¢åˆ·æ–°çš„ç§’æ•°ã€‚</td></tr><tr><td align="left">Retry-After</td><td align="left">è¿™ä¸ªå¤´ä¿¡æ¯å¯ä»¥ä¸ 503ï¼ˆService Unavailable æœåŠ¡ä¸å¯ç”¨ï¼‰å“åº”é…åˆä½¿ç”¨ï¼Œè¿™ä¼šå‘Šè¯‰å®¢æˆ·ç«¯å¤šä¹…å°±å¯ä»¥é‡å¤å®ƒçš„è¯·æ±‚ã€‚</td></tr><tr><td align="left">Set-Cookie</td><td align="left">è¿™ä¸ªå¤´ä¿¡æ¯æŒ‡å®šä¸€ä¸ªä¸é¡µé¢å…³è”çš„ cookieã€‚</td></tr></tbody></table><h5 id="1-5-1ã€Servletå¤„ç†æµè§ˆå™¨HTTPè¯·æ±‚"><a href="#1-5-1ã€Servletå¤„ç†æµè§ˆå™¨HTTPè¯·æ±‚" class="headerlink" title="1.5.1ã€Servletå¤„ç†æµè§ˆå™¨HTTPè¯·æ±‚"></a>1.5.1ã€Servletå¤„ç†æµè§ˆå™¨HTTPè¯·æ±‚</h5><p>é€šè¿‡ <code>HttpServletRequest</code> å¯¹è±¡ï¼š</p><table><thead><tr><th align="left">åºå·</th><th align="left">æ–¹æ³• &amp; æè¿°</th></tr></thead><tbody><tr><td align="left">1</td><td align="left"><strong>Cookie[] getCookies()</strong> è¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«å®¢æˆ·ç«¯å‘é€è¯¥è¯·æ±‚çš„æ‰€æœ‰çš„ Cookie å¯¹è±¡ã€‚</td></tr><tr><td align="left">2</td><td align="left"><strong>Enumeration getAttributeNames()</strong> è¿”å›ä¸€ä¸ªæšä¸¾ï¼ŒåŒ…å«æä¾›ç»™è¯¥è¯·æ±‚å¯ç”¨çš„å±æ€§åç§°ã€‚</td></tr><tr><td align="left">3</td><td align="left"><strong>Enumeration getHeaderNames()</strong> è¿”å›ä¸€ä¸ªæšä¸¾ï¼ŒåŒ…å«åœ¨è¯¥è¯·æ±‚ä¸­åŒ…å«çš„æ‰€æœ‰çš„å¤´åã€‚</td></tr><tr><td align="left">4</td><td align="left"><strong>Enumeration getParameterNames()</strong> è¿”å›ä¸€ä¸ª String å¯¹è±¡çš„æšä¸¾ï¼ŒåŒ…å«åœ¨è¯¥è¯·æ±‚ä¸­åŒ…å«çš„å‚æ•°çš„åç§°ã€‚</td></tr><tr><td align="left">5</td><td align="left"><strong>HttpSession getSession()</strong> è¿”å›ä¸è¯¥è¯·æ±‚å…³è”çš„å½“å‰ session ä¼šè¯ï¼Œæˆ–è€…<strong>å¦‚æœè¯·æ±‚æ²¡æœ‰ session ä¼šè¯ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªã€‚</strong></td></tr><tr><td align="left">6</td><td align="left"><strong>HttpSession getSession(boolean create)</strong> è¿”å›ä¸è¯¥è¯·æ±‚å…³è”çš„å½“å‰ HttpSessionï¼Œæˆ–è€…å¦‚æœæ²¡æœ‰å½“å‰ä¼šè¯ï¼Œä¸”åˆ›å»ºæ˜¯çœŸçš„ï¼Œåˆ™è¿”å›ä¸€ä¸ªæ–°çš„ session ä¼šè¯ã€‚</td></tr><tr><td align="left">7</td><td align="left"><strong>Locale getLocale()</strong> åŸºäº Accept-Language å¤´ï¼Œè¿”å›<strong>å®¢æˆ·ç«¯æ¥å—å†…å®¹çš„é¦–é€‰çš„åŒºåŸŸè®¾ç½®</strong>ã€‚</td></tr><tr><td align="left">8</td><td align="left"><strong>Object getAttribute(String name)</strong> ä»¥å¯¹è±¡å½¢å¼è¿”å›å·²å‘½åå±æ€§çš„å€¼ï¼Œå¦‚æœæ²¡æœ‰ç»™å®šåç§°çš„å±æ€§å­˜åœ¨ï¼Œåˆ™è¿”å› nullã€‚</td></tr><tr><td align="left">9</td><td align="left"><strong>ServletInputStream getInputStream()</strong> ä½¿ç”¨ ServletInputStreamï¼Œä»¥äºŒè¿›åˆ¶æ•°æ®å½¢å¼æ£€ç´¢è¯·æ±‚çš„ä¸»ä½“ã€‚</td></tr><tr><td align="left">10</td><td align="left"><strong>String getAuthType()</strong> è¿”å›ç”¨äºä¿æŠ¤ Servlet çš„<strong>èº«ä»½éªŒè¯æ–¹æ¡ˆçš„åç§°</strong>ï¼Œä¾‹å¦‚ï¼Œâ€BASICâ€ æˆ– â€œSSLâ€ï¼Œå¦‚æœJSPæ²¡æœ‰å—åˆ°ä¿æŠ¤åˆ™è¿”å› nullã€‚</td></tr><tr><td align="left">11</td><td align="left"><strong>String getCharacterEncoding()</strong> è¿”å›è¯·æ±‚ä¸»ä½“ä¸­ä½¿ç”¨çš„å­—ç¬¦ç¼–ç çš„åç§°ã€‚</td></tr><tr><td align="left">12</td><td align="left"><strong>String getContentType()</strong> è¿”å›è¯·æ±‚ä¸»ä½“çš„ MIME ç±»å‹ï¼Œå¦‚æœä¸çŸ¥é“ç±»å‹åˆ™è¿”å› nullã€‚</td></tr><tr><td align="left">13</td><td align="left"><strong>String getContextPath()</strong> è¿”å›æŒ‡ç¤ºè¯·æ±‚ä¸Šä¸‹æ–‡çš„è¯·æ±‚ URI éƒ¨åˆ†ã€‚</td></tr><tr><td align="left">14</td><td align="left"><strong>String getHeader(String name)</strong> ä»¥å­—ç¬¦ä¸²å½¢å¼è¿”å›æŒ‡å®šçš„è¯·æ±‚å¤´çš„å€¼ã€‚</td></tr><tr><td align="left">15</td><td align="left"><strong>String getMethod()</strong> è¿”å›è¯·æ±‚çš„ HTTP æ–¹æ³•çš„åç§°ï¼Œä¾‹å¦‚ï¼ŒGETã€POST æˆ– PUTã€‚</td></tr><tr><td align="left">16</td><td align="left"><strong>String getParameter(String name)</strong> ä»¥å­—ç¬¦ä¸²å½¢å¼è¿”å›è¯·æ±‚å‚æ•°çš„å€¼ï¼Œæˆ–è€…å¦‚æœå‚æ•°ä¸å­˜åœ¨åˆ™è¿”å› nullã€‚</td></tr><tr><td align="left">17</td><td align="left"><strong>String getPathInfo()</strong> å½“è¯·æ±‚å‘å‡ºæ—¶ï¼Œè¿”å›ä¸å®¢æˆ·ç«¯å‘é€çš„ URL ç›¸å…³çš„ä»»ä½•é¢å¤–çš„è·¯å¾„ä¿¡æ¯ã€‚</td></tr><tr><td align="left">18</td><td align="left"><strong>String getProtocol()</strong> è¿”å›è¯·æ±‚åè®®çš„åç§°å’Œç‰ˆæœ¬ã€‚</td></tr><tr><td align="left">19</td><td align="left"><strong>String getQueryString()</strong> è¿”å›åŒ…å«åœ¨è·¯å¾„åçš„è¯·æ±‚ URL ä¸­çš„<strong>æŸ¥è¯¢å­—ç¬¦ä¸²</strong>ã€‚</td></tr><tr><td align="left">20</td><td align="left"><strong>String getRemoteAddr()</strong> è¿”å›å‘é€è¯·æ±‚çš„å®¢æˆ·ç«¯çš„äº’è”ç½‘åè®®ï¼ˆIPï¼‰åœ°å€ã€‚</td></tr><tr><td align="left">21</td><td align="left"><strong>String getRemoteHost()</strong> è¿”å›å‘é€è¯·æ±‚çš„å®¢æˆ·ç«¯çš„å®Œå…¨é™å®šåç§°ã€‚</td></tr><tr><td align="left">22</td><td align="left"><strong>String getRemoteUser()</strong> å¦‚æœç”¨æˆ·å·²é€šè¿‡èº«ä»½éªŒè¯ï¼Œåˆ™è¿”å›å‘å‡ºè¯·æ±‚çš„ç™»å½•ç”¨æˆ·ï¼Œæˆ–è€…å¦‚æœç”¨æˆ·æœªé€šè¿‡èº«ä»½éªŒè¯ï¼Œåˆ™è¿”å› nullã€‚</td></tr><tr><td align="left">23</td><td align="left"><strong>String getRequestURI()</strong> ä»åè®®åç§°ç›´åˆ° HTTP è¯·æ±‚çš„ç¬¬ä¸€è¡Œçš„æŸ¥è¯¢å­—ç¬¦ä¸²ä¸­ï¼Œè¿”å›è¯¥è¯·æ±‚çš„ URL çš„ä¸€éƒ¨åˆ†ã€‚</td></tr><tr><td align="left">24</td><td align="left"><strong>String getRequestedSessionId()</strong> è¿”å›ç”±å®¢æˆ·ç«¯æŒ‡å®šçš„ session ä¼šè¯ IDã€‚</td></tr><tr><td align="left">25</td><td align="left"><strong>String getServletPath()</strong> è¿”å›è°ƒç”¨ JSP çš„è¯·æ±‚çš„ URL çš„ä¸€éƒ¨åˆ†ã€‚</td></tr><tr><td align="left">26</td><td align="left"><strong>String[] getParameterValues(String name)</strong> è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²å¯¹è±¡çš„æ•°ç»„ï¼ŒåŒ…å«æ‰€æœ‰ç»™å®šçš„è¯·æ±‚å‚æ•°çš„å€¼ï¼Œå¦‚æœå‚æ•°ä¸å­˜åœ¨åˆ™è¿”å› nullã€‚</td></tr><tr><td align="left">27</td><td align="left"><strong>boolean isSecure()</strong> è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºè¯·æ±‚æ˜¯å¦ä½¿ç”¨å®‰å…¨é€šé“ï¼Œå¦‚ HTTPSã€‚</td></tr><tr><td align="left">28</td><td align="left"><strong>int getContentLength()</strong> ä»¥å­—èŠ‚ä¸ºå•ä½è¿”å›è¯·æ±‚ä¸»ä½“çš„é•¿åº¦ï¼Œå¹¶æä¾›è¾“å…¥æµï¼Œæˆ–è€…å¦‚æœé•¿åº¦æœªçŸ¥åˆ™è¿”å› -1ã€‚</td></tr><tr><td align="left">29</td><td align="left"><strong>int getIntHeader(String name)</strong> è¿”å›æŒ‡å®šçš„è¯·æ±‚å¤´çš„å€¼ä¸ºä¸€ä¸ª int å€¼ã€‚</td></tr><tr><td align="left">30</td><td align="left"><strong>int getServerPort()</strong> è¿”å›æ¥æ”¶åˆ°è¿™ä¸ªè¯·æ±‚çš„ç«¯å£å·ã€‚</td></tr><tr><td align="left">31</td><td align="left"><strong>int getParameterMap()</strong> å°†å‚æ•°å°è£…æˆ Map ç±»å‹ã€‚</td></tr></tbody></table><p>HTTP Header è¯·æ±‚å®ä¾‹ï¼š</p><p>ä½¿ç”¨ HttpServletRequest çš„ <strong>getHeaderNames()</strong> å’Œ**getHeader()**æ–¹æ³•è¯»å– HTTP å¤´ä¿¡æ¯ã€‚è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªæšä¸¾ï¼ŒåŒ…å«ä¸å½“å‰çš„ HTTP è¯·æ±‚ç›¸å…³çš„å¤´ä¿¡æ¯ã€‚ä½¿ç”¨ <em>hasMoreElements()</em> æ–¹æ³•æ¥ç¡®å®šä½•æ—¶åœæ­¢ï¼Œä½¿ç”¨ <em>nextElement()</em> æ–¹æ³•æ¥è·å–æ¯ä¸ªå‚æ•°çš„åç§°ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-keyword">public</span> void doGet(<span class="hljs-type">HttpServletRequest</span> request, <span class="hljs-type">HttpServletResponse</span> response) <span class="hljs-keyword">throws</span> <span class="hljs-type">ServletException</span>, <span class="hljs-type">IOException</span><br>&#123;<br>    <span class="hljs-comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span><br>    response.setContentType(<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span>);<br><br>    <span class="hljs-type">PrintWriter</span> out <span class="hljs-operator">=</span> response.getWriter();<br>    <span class="hljs-type">String</span> title <span class="hljs-operator">=</span> <span class="hljs-string">&quot;HTTP Header è¯·æ±‚å®ä¾‹&quot;</span>;<br>    <span class="hljs-type">String</span> docType <span class="hljs-operator">=</span><span class="hljs-string">&quot;&lt;!DOCTYPE html&gt; <span class="hljs-subst">\n</span>&quot;</span>;<br>    out.println(docType <span class="hljs-operator">+</span><br>        <span class="hljs-string">&quot;&lt;html&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>        <span class="hljs-string">&quot;&lt;head&gt;&lt;meta charset=<span class="hljs-subst">\&quot;</span>utf-8<span class="hljs-subst">\&quot;</span>&gt;&lt;title&gt;&quot;</span> <span class="hljs-operator">+</span> title <span class="hljs-operator">+</span> <span class="hljs-string">&quot;&lt;/title&gt;&lt;/head&gt;<span class="hljs-subst">\n</span>&quot;</span><span class="hljs-operator">+</span><br>        <span class="hljs-string">&quot;&lt;body bgcolor=<span class="hljs-subst">\&quot;</span>#f0f0f0<span class="hljs-subst">\&quot;</span>&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>        <span class="hljs-string">&quot;&lt;h1 align=<span class="hljs-subst">\&quot;</span>center<span class="hljs-subst">\&quot;</span>&gt;&quot;</span> <span class="hljs-operator">+</span> title <span class="hljs-operator">+</span> <span class="hljs-string">&quot;&lt;/h1&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>        <span class="hljs-string">&quot;&lt;table width=<span class="hljs-subst">\&quot;</span>100%<span class="hljs-subst">\&quot;</span> border=<span class="hljs-subst">\&quot;</span>1<span class="hljs-subst">\&quot;</span> align=<span class="hljs-subst">\&quot;</span>center<span class="hljs-subst">\&quot;</span>&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>        <span class="hljs-string">&quot;&lt;tr bgcolor=<span class="hljs-subst">\&quot;</span>#949494<span class="hljs-subst">\&quot;</span>&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>        <span class="hljs-string">&quot;&lt;th&gt;Header åç§°&lt;/th&gt;&lt;th&gt;Header å€¼&lt;/th&gt;<span class="hljs-subst">\n</span>&quot;</span><span class="hljs-operator">+</span><br>        <span class="hljs-string">&quot;&lt;/tr&gt;<span class="hljs-subst">\n</span>&quot;</span>);<br><br>    <span class="hljs-type">Enumeration</span> headerNames <span class="hljs-operator">=</span> request.getHeaderNames();<br><br>    <span class="hljs-keyword">while</span>(headerNames.hasMoreElements()) &#123;<br>        <span class="hljs-type">String</span> paramName <span class="hljs-operator">=</span> (<span class="hljs-type">String</span>)headerNames.nextElement();<br>        out.print(<span class="hljs-string">&quot;&lt;tr&gt;&lt;td&gt;&quot;</span> <span class="hljs-operator">+</span> paramName <span class="hljs-operator">+</span> <span class="hljs-string">&quot;&lt;/td&gt;<span class="hljs-subst">\n</span>&quot;</span>);<br>        <span class="hljs-type">String</span> paramValue <span class="hljs-operator">=</span> request.getHeader(paramName);<br>        out.println(<span class="hljs-string">&quot;&lt;td&gt; &quot;</span> <span class="hljs-operator">+</span> paramValue <span class="hljs-operator">+</span> <span class="hljs-string">&quot;&lt;/td&gt;&lt;/tr&gt;<span class="hljs-subst">\n</span>&quot;</span>);<br>    &#125;<br>    out.println(<span class="hljs-string">&quot;&lt;/table&gt;<span class="hljs-subst">\n</span>&lt;/body&gt;&lt;/html&gt;&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/header.png"></p><h5 id="1-5-2ã€ServletæœåŠ¡å™¨HTTPå“åº”"><a href="#1-5-2ã€ServletæœåŠ¡å™¨HTTPå“åº”" class="headerlink" title="1.5.2ã€ServletæœåŠ¡å™¨HTTPå“åº”"></a>1.5.2ã€ServletæœåŠ¡å™¨HTTPå“åº”</h5><p>HTTP è¯·æ±‚å’Œ HTTP å“åº”æ¶ˆæ¯çš„æ ¼å¼æ˜¯ç±»ä¼¼çš„ï¼Œç»“æ„å¦‚ä¸‹ï¼š</p><ul><li>åˆå§‹çŠ¶æ€è¡Œ + å›è½¦æ¢è¡Œç¬¦ï¼ˆå›è½¦+æ¢è¡Œï¼‰</li><li>é›¶ä¸ªæˆ–å¤šä¸ªæ ‡é¢˜è¡Œ+å›è½¦æ¢è¡Œç¬¦</li><li>ä¸€ä¸ªç©ºç™½è¡Œï¼Œå³å›è½¦æ¢è¡Œç¬¦</li><li>ä¸€ä¸ªå¯é€‰çš„æ¶ˆæ¯ä¸»ä½“ï¼Œæ¯”å¦‚æ–‡ä»¶ã€æŸ¥è¯¢æ•°æ®æˆ–æŸ¥è¯¢è¾“å‡º</li></ul><p>ä¸€ä¸ªå…¸å‹çš„å“åº”å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs xml">HTTP/1.1 200 OK<br>Content-Type: text/html<br>Header2: ...<br>...<br>HeaderN: ...<br>  (Blank Line)<br><span class="hljs-meta">&lt;!doctype ...&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>...<br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p>çŠ¶æ€è¡ŒåŒ…æ‹¬ HTTP ç‰ˆæœ¬ï¼ˆåœ¨æœ¬ä¾‹ä¸­ä¸º HTTP/1.1ï¼‰ã€ä¸€ä¸ªçŠ¶æ€ç ï¼ˆåœ¨æœ¬ä¾‹ä¸­ä¸º 200ï¼‰å’Œä¸€ä¸ªå¯¹åº”äºçŠ¶æ€ç çš„çŸ­æ¶ˆæ¯ï¼ˆåœ¨æœ¬ä¾‹ä¸­ä¸º OKï¼‰ã€‚</p><p>è®¾ç½®HTTPå“åº”æŠ¥å¤´çš„æ–¹æ³•</p><p>é€šè¿‡ <code>HttpServletResponse</code> å¯¹è±¡ï¼Œåœ¨ Servlet ç¨‹åºä¸­è®¾ç½® HTTP å“åº”æŠ¥å¤´</p><table><thead><tr><th align="left">åºå·</th><th align="left">æ–¹æ³• &amp; æè¿°</th></tr></thead><tbody><tr><td align="left">1</td><td align="left"><strong>String encodeRedirectURL(String url)</strong> ä¸º sendRedirect æ–¹æ³•ä¸­ä½¿ç”¨çš„æŒ‡å®šçš„ URL è¿›è¡Œç¼–ç ï¼Œæˆ–è€…å¦‚æœç¼–ç ä¸æ˜¯å¿…éœ€çš„ï¼Œåˆ™è¿”å› URL æœªæ”¹å˜ã€‚</td></tr><tr><td align="left">2</td><td align="left"><strong>String encodeURL(String url)</strong> å¯¹åŒ…å« session ä¼šè¯ ID çš„æŒ‡å®š URL è¿›è¡Œç¼–ç ï¼Œæˆ–è€…å¦‚æœç¼–ç ä¸æ˜¯å¿…éœ€çš„ï¼Œåˆ™è¿”å› URL æœªæ”¹å˜ã€‚</td></tr><tr><td align="left">3</td><td align="left"><strong>boolean containsHeader(String name)</strong> è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºæ˜¯å¦å·²ç»è®¾ç½®å·²å‘½åçš„å“åº”æŠ¥å¤´ã€‚</td></tr><tr><td align="left">4</td><td align="left"><strong>boolean isCommitted()</strong> è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºå“åº”æ˜¯å¦å·²ç»æäº¤ã€‚</td></tr><tr><td align="left">5</td><td align="left"><strong>void addCookie(Cookie cookie)</strong> æŠŠæŒ‡å®šçš„ cookie æ·»åŠ åˆ°å“åº”ã€‚</td></tr><tr><td align="left">6</td><td align="left"><strong>void addDateHeader(String name, long date)</strong> æ·»åŠ ä¸€ä¸ªå¸¦æœ‰ç»™å®šçš„åç§°å’Œæ—¥æœŸå€¼çš„å“åº”æŠ¥å¤´ã€‚</td></tr><tr><td align="left">7</td><td align="left"><strong>void addHeader(String name, String value)</strong> æ·»åŠ ä¸€ä¸ªå¸¦æœ‰ç»™å®šçš„åç§°å’Œå€¼çš„å“åº”æŠ¥å¤´ã€‚</td></tr><tr><td align="left">8</td><td align="left"><strong>void addIntHeader(String name, int value)</strong> æ·»åŠ ä¸€ä¸ªå¸¦æœ‰ç»™å®šçš„åç§°å’Œæ•´æ•°å€¼çš„å“åº”æŠ¥å¤´ã€‚</td></tr><tr><td align="left">9</td><td align="left"><strong>void flushBuffer()</strong> å¼ºåˆ¶ä»»ä½•åœ¨ç¼“å†²åŒºä¸­çš„å†…å®¹è¢«å†™å…¥åˆ°å®¢æˆ·ç«¯ã€‚</td></tr><tr><td align="left">10</td><td align="left"><strong>void reset()</strong> æ¸…é™¤ç¼“å†²åŒºä¸­å­˜åœ¨çš„ä»»ä½•æ•°æ®ï¼ŒåŒ…æ‹¬çŠ¶æ€ç å’Œå¤´ã€‚</td></tr><tr><td align="left">11</td><td align="left"><strong>void resetBuffer()</strong> æ¸…é™¤å“åº”ä¸­åŸºç¡€ç¼“å†²åŒºçš„å†…å®¹ï¼Œä¸æ¸…é™¤çŠ¶æ€ç å’Œå¤´ã€‚</td></tr><tr><td align="left">12</td><td align="left"><strong>void sendError(int sc)</strong> ä½¿ç”¨æŒ‡å®šçš„çŠ¶æ€ç ï¼ˆé€šå¸¸404ï¼‰å‘é€é”™è¯¯å“åº”åˆ°å®¢æˆ·ç«¯ï¼Œå¹¶æ¸…é™¤ç¼“å†²åŒºã€‚</td></tr><tr><td align="left">13</td><td align="left"><strong>void sendError(int sc, String msg)</strong> ä½¿ç”¨æŒ‡å®šçš„çŠ¶æ€å‘é€é”™è¯¯å“åº”åˆ°å®¢æˆ·ç«¯ã€‚</td></tr><tr><td align="left">14</td><td align="left"><strong>void sendRedirect(String location)</strong> ä½¿ç”¨æŒ‡å®šçš„é‡å®šå‘ä½ç½® URL å‘é€ä¸´æ—¶é‡å®šå‘å“åº”åˆ°å®¢æˆ·ç«¯ã€‚è¯¥æ–¹æ³•ç”Ÿæˆä¸€ä¸ª <code>302 å“åº”</code>ï¼Œè¿åŒä¸€ä¸ªå¸¦æœ‰æ–°æ–‡æ¡£ URL çš„ <em>Location</em> å¤´ã€‚</td></tr><tr><td align="left">15</td><td align="left"><strong>void setBufferSize(int size)</strong> ä¸ºå“åº”ä¸»ä½“è®¾ç½®é¦–é€‰çš„ç¼“å†²åŒºå¤§å°ã€‚</td></tr><tr><td align="left">16</td><td align="left"><strong>void setCharacterEncoding(String charset)</strong> è®¾ç½®è¢«å‘é€åˆ°å®¢æˆ·ç«¯çš„å“åº”çš„å­—ç¬¦ç¼–ç ï¼ˆMIME å­—ç¬¦é›†ï¼‰ä¾‹å¦‚ï¼ŒUTF-8ã€‚</td></tr><tr><td align="left">17</td><td align="left"><strong>void setContentLength(int len)</strong> è®¾ç½®åœ¨ HTTP Servlet å“åº”ä¸­çš„å†…å®¹ä¸»ä½“çš„é•¿åº¦ï¼Œè¯¥æ–¹æ³•è®¾ç½® HTTP Content-Length å¤´ã€‚</td></tr><tr><td align="left">18</td><td align="left"><strong>void setContentType(String type)</strong> å¦‚æœå“åº”è¿˜æœªè¢«æäº¤ï¼Œè®¾ç½®è¢«å‘é€åˆ°å®¢æˆ·ç«¯çš„å“åº”çš„å†…å®¹ç±»å‹ã€‚</td></tr><tr><td align="left">19</td><td align="left"><strong>void setDateHeader(String name, long date)</strong> è®¾ç½®ä¸€ä¸ªå¸¦æœ‰ç»™å®šçš„åç§°å’Œæ—¥æœŸå€¼çš„å“åº”æŠ¥å¤´ã€‚</td></tr><tr><td align="left">20</td><td align="left"><strong>void setHeader(String name, String value)</strong> è®¾ç½®ä¸€ä¸ªå¸¦æœ‰ç»™å®šçš„åç§°å’Œå€¼çš„å“åº”æŠ¥å¤´ã€‚</td></tr><tr><td align="left">21</td><td align="left"><strong>void setIntHeader(String name, int value)</strong> è®¾ç½®ä¸€ä¸ªå¸¦æœ‰ç»™å®šçš„åç§°å’Œæ•´æ•°å€¼çš„å“åº”æŠ¥å¤´ã€‚</td></tr><tr><td align="left">22</td><td align="left"><strong>void setLocale(Locale loc)</strong> å¦‚æœå“åº”è¿˜æœªè¢«æäº¤ï¼Œè®¾ç½®å“åº”çš„åŒºåŸŸã€‚</td></tr><tr><td align="left">23</td><td align="left"><strong>void setStatus(int sc)</strong> ä¸ºè¯¥å“åº”è®¾ç½®çŠ¶æ€ç ã€‚</td></tr></tbody></table><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-keyword">public</span> void doGet(<span class="hljs-type">HttpServletRequest</span> request,<br>                  <span class="hljs-type">HttpServletResponse</span> response)<br>          <span class="hljs-keyword">throws</span> <span class="hljs-type">ServletException</span>, <span class="hljs-type">IOException</span><br>&#123;<br>    <span class="hljs-comment">// è®¾ç½®åˆ·æ–°è‡ªåŠ¨åŠ è½½æ—¶é—´ä¸º 5 ç§’</span><br>    response.setIntHeader(<span class="hljs-string">&quot;Refresh&quot;</span>, <span class="hljs-number">5</span>);<br>    <span class="hljs-comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span><br>    response.setContentType(<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span>);<br>   <br>    <span class="hljs-comment">//ä½¿ç”¨é»˜è®¤æ—¶åŒºå’Œè¯­è¨€ç¯å¢ƒè·å¾—ä¸€ä¸ªæ—¥å†  </span><br>    <span class="hljs-type">Calendar</span> cale <span class="hljs-operator">=</span> <span class="hljs-type">Calendar</span>.getInstance();  <br>    <span class="hljs-comment">//å°†Calendarç±»å‹è½¬æ¢æˆDateç±»å‹  </span><br>    <span class="hljs-type">Date</span> tasktime<span class="hljs-operator">=</span>cale.getTime();  <br>    <span class="hljs-comment">//è®¾ç½®æ—¥æœŸè¾“å‡ºçš„æ ¼å¼  </span><br>    <span class="hljs-type">SimpleDateFormat</span> df<span class="hljs-operator">=</span>new <span class="hljs-type">SimpleDateFormat</span>(<span class="hljs-string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);  <br>    <span class="hljs-comment">//æ ¼å¼åŒ–è¾“å‡º  </span><br>    <span class="hljs-type">String</span> nowTime <span class="hljs-operator">=</span> df.format(tasktime);<br>    <br>    <span class="hljs-type">PrintWriter</span> out <span class="hljs-operator">=</span> response.getWriter();<br>    <span class="hljs-type">String</span> title <span class="hljs-operator">=</span> <span class="hljs-string">&quot;è‡ªåŠ¨åˆ·æ–° Header è®¾ç½®&quot;</span>;<br>    <span class="hljs-type">String</span> docType <span class="hljs-operator">=</span><br>    <span class="hljs-string">&quot;&lt;!DOCTYPE html&gt;<span class="hljs-subst">\n</span>&quot;</span>;<br>    out.println(docType <span class="hljs-operator">+</span><br>      <span class="hljs-string">&quot;&lt;html&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>      <span class="hljs-string">&quot;&lt;head&gt;&lt;title&gt;&quot;</span> <span class="hljs-operator">+</span> title <span class="hljs-operator">+</span> <span class="hljs-string">&quot;&lt;/title&gt;&lt;/head&gt;<span class="hljs-subst">\n</span>&quot;</span><span class="hljs-operator">+</span><br>      <span class="hljs-string">&quot;&lt;body bgcolor=<span class="hljs-subst">\&quot;</span>#f0f0f0<span class="hljs-subst">\&quot;</span>&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>      <span class="hljs-string">&quot;&lt;h1 align=<span class="hljs-subst">\&quot;</span>center<span class="hljs-subst">\&quot;</span>&gt;&quot;</span> <span class="hljs-operator">+</span> title <span class="hljs-operator">+</span> <span class="hljs-string">&quot;&lt;/h1&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>      <span class="hljs-string">&quot;&lt;p&gt;å½“å‰æ—¶é—´æ˜¯ï¼š&quot;</span> <span class="hljs-operator">+</span> nowTime <span class="hljs-operator">+</span> <span class="hljs-string">&quot;&lt;/p&gt;<span class="hljs-subst">\n</span>&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/respon.png"></p><h5 id="1-5-3ã€HTTPçŠ¶æ€ç "><a href="#1-5-3ã€HTTPçŠ¶æ€ç " class="headerlink" title="1.5.3ã€HTTPçŠ¶æ€ç "></a>1.5.3ã€HTTPçŠ¶æ€ç </h5><table><thead><tr><th align="left">ä»£ç </th><th align="left">æ¶ˆæ¯</th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="left">100</td><td align="left">Continue</td><td align="left">åªæœ‰è¯·æ±‚çš„ä¸€éƒ¨åˆ†å·²ç»è¢«æœåŠ¡å™¨æ¥æ”¶ï¼Œä½†åªè¦å®ƒæ²¡æœ‰è¢«æ‹’ç»ï¼Œå®¢æˆ·ç«¯åº”ç»§ç»­è¯¥è¯·æ±‚ã€‚</td></tr><tr><td align="left">101</td><td align="left">Switching Protocols</td><td align="left">æœåŠ¡å™¨åˆ‡æ¢åè®®ã€‚</td></tr><tr><td align="left">200</td><td align="left">OK</td><td align="left">è¯·æ±‚æˆåŠŸã€‚</td></tr><tr><td align="left">201</td><td align="left">Created</td><td align="left">è¯¥è¯·æ±‚æ˜¯å®Œæ•´çš„ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„èµ„æºã€‚</td></tr><tr><td align="left">202</td><td align="left">Accepted</td><td align="left">è¯¥è¯·æ±‚è¢«æ¥å—å¤„ç†ï¼Œä½†æ˜¯è¯¥å¤„ç†æ˜¯ä¸å®Œæ•´çš„ã€‚</td></tr><tr><td align="left">203</td><td align="left">Non-authoritative Information</td><td align="left"></td></tr><tr><td align="left">204</td><td align="left">No Content</td><td align="left"></td></tr><tr><td align="left">205</td><td align="left">Reset Content</td><td align="left"></td></tr><tr><td align="left">206</td><td align="left">Partial Content</td><td align="left"></td></tr><tr><td align="left">300</td><td align="left">Multiple Choices</td><td align="left">é“¾æ¥åˆ—è¡¨ã€‚ç”¨æˆ·å¯ä»¥é€‰æ‹©ä¸€ä¸ªé“¾æ¥ï¼Œè¿›å…¥åˆ°è¯¥ä½ç½®ã€‚æœ€å¤šäº”ä¸ªåœ°å€ã€‚</td></tr><tr><td align="left">301</td><td align="left">Moved Permanently</td><td align="left">æ‰€è¯·æ±‚çš„é¡µé¢å·²ç»è½¬ç§»åˆ°ä¸€ä¸ªæ–°çš„ URLã€‚</td></tr><tr><td align="left">302</td><td align="left">Found</td><td align="left">æ‰€è¯·æ±‚çš„é¡µé¢å·²ç»ä¸´æ—¶è½¬ç§»åˆ°ä¸€ä¸ªæ–°çš„ URLã€‚</td></tr><tr><td align="left">303</td><td align="left">See Other</td><td align="left">æ‰€è¯·æ±‚çš„é¡µé¢å¯ä»¥åœ¨å¦ä¸€ä¸ªä¸åŒçš„ URL ä¸‹è¢«æ‰¾åˆ°ã€‚</td></tr><tr><td align="left">304</td><td align="left">Not Modified</td><td align="left"></td></tr><tr><td align="left">305</td><td align="left">Use Proxy</td><td align="left"></td></tr><tr><td align="left">306</td><td align="left"><em>Unused</em></td><td align="left">åœ¨ä»¥å‰çš„ç‰ˆæœ¬ä¸­ä½¿ç”¨è¯¥ä»£ç ã€‚ç°åœ¨å·²ä¸å†ä½¿ç”¨å®ƒï¼Œä½†ä»£ç ä»è¢«ä¿ç•™ã€‚</td></tr><tr><td align="left">307</td><td align="left">Temporary Redirect</td><td align="left">æ‰€è¯·æ±‚çš„é¡µé¢å·²ç»ä¸´æ—¶è½¬ç§»åˆ°ä¸€ä¸ªæ–°çš„ URLã€‚</td></tr><tr><td align="left">400</td><td align="left">Bad Request</td><td align="left">æœåŠ¡å™¨ä¸ç†è§£è¯·æ±‚ã€‚</td></tr><tr><td align="left">401</td><td align="left">Unauthorized</td><td align="left">æ‰€è¯·æ±‚çš„é¡µé¢éœ€è¦ç”¨æˆ·åå’Œå¯†ç ã€‚</td></tr><tr><td align="left">402</td><td align="left">Payment Required</td><td align="left"><em>æ‚¨è¿˜ä¸èƒ½ä½¿ç”¨è¯¥ä»£ç ã€‚</em></td></tr><tr><td align="left">403</td><td align="left">Forbidden</td><td align="left">ç¦æ­¢è®¿é—®æ‰€è¯·æ±‚çš„é¡µé¢ã€‚</td></tr><tr><td align="left">404</td><td align="left">Not Found</td><td align="left">æœåŠ¡å™¨æ— æ³•æ‰¾åˆ°æ‰€è¯·æ±‚çš„é¡µé¢ã€‚.</td></tr><tr><td align="left">405</td><td align="left">Method Not Allowed</td><td align="left">åœ¨è¯·æ±‚ä¸­æŒ‡å®šçš„æ–¹æ³•æ˜¯ä¸å…è®¸çš„ã€‚</td></tr><tr><td align="left">406</td><td align="left">Not Acceptable</td><td align="left">æœåŠ¡å™¨åªç”Ÿæˆä¸€ä¸ªä¸è¢«å®¢æˆ·ç«¯æ¥å—çš„å“åº”ã€‚</td></tr><tr><td align="left">407</td><td align="left">Proxy Authentication Required</td><td align="left">åœ¨è¯·æ±‚é€è¾¾ä¹‹å‰ï¼Œæ‚¨å¿…é¡»ä½¿ç”¨ä»£ç†æœåŠ¡å™¨çš„éªŒè¯ã€‚</td></tr><tr><td align="left">408</td><td align="left">Request Timeout</td><td align="left">è¯·æ±‚éœ€è¦çš„æ—¶é—´æ¯”æœåŠ¡å™¨èƒ½å¤Ÿç­‰å¾…çš„æ—¶é—´é•¿ï¼Œè¶…æ—¶ã€‚</td></tr><tr><td align="left">409</td><td align="left">Conflict</td><td align="left">è¯·æ±‚å› ä¸ºå†²çªæ— æ³•å®Œæˆã€‚</td></tr><tr><td align="left">410</td><td align="left">Gone</td><td align="left">æ‰€è¯·æ±‚çš„é¡µé¢ä¸å†å¯ç”¨ã€‚</td></tr><tr><td align="left">411</td><td align="left">Length Required</td><td align="left">â€œContent-Lengthâ€ æœªå®šä¹‰ã€‚æœåŠ¡å™¨æ— æ³•å¤„ç†å®¢æˆ·ç«¯å‘é€çš„ä¸å¸¦ Content-Length çš„è¯·æ±‚ä¿¡æ¯ã€‚</td></tr><tr><td align="left">412</td><td align="left">Precondition Failed</td><td align="left">è¯·æ±‚ä¸­ç»™å‡ºçš„å…ˆå†³æ¡ä»¶è¢«æœåŠ¡å™¨è¯„ä¼°ä¸º falseã€‚</td></tr><tr><td align="left">413</td><td align="left">Request Entity Too Large</td><td align="left">æœåŠ¡å™¨ä¸æ¥å—è¯¥è¯·æ±‚ï¼Œå› ä¸ºè¯·æ±‚å®ä½“è¿‡å¤§ã€‚</td></tr><tr><td align="left">414</td><td align="left">Request-url Too Long</td><td align="left">æœåŠ¡å™¨ä¸æ¥å—è¯¥è¯·æ±‚ï¼Œå› ä¸º URL å¤ªé•¿ã€‚å½“æ‚¨è½¬æ¢ä¸€ä¸ª â€œpostâ€ è¯·æ±‚ä¸ºä¸€ä¸ªå¸¦æœ‰é•¿çš„æŸ¥è¯¢ä¿¡æ¯çš„ â€œgetâ€ è¯·æ±‚æ—¶å‘ç”Ÿã€‚</td></tr><tr><td align="left">415</td><td align="left">Unsupported Media Type</td><td align="left">æœåŠ¡å™¨ä¸æ¥å—è¯¥è¯·æ±‚ï¼Œå› ä¸ºåª’ä½“ç±»å‹ä¸è¢«æ”¯æŒã€‚</td></tr><tr><td align="left">417</td><td align="left">Expectation Failed</td><td align="left"></td></tr><tr><td align="left">500</td><td align="left">Internal Server Error</td><td align="left">æœªå®Œæˆçš„è¯·æ±‚ã€‚æœåŠ¡å™¨é‡åˆ°äº†ä¸€ä¸ªæ„å¤–çš„æƒ…å†µã€‚</td></tr><tr><td align="left">501</td><td align="left">Not Implemented</td><td align="left">æœªå®Œæˆçš„è¯·æ±‚ã€‚æœåŠ¡å™¨ä¸æ”¯æŒæ‰€éœ€çš„åŠŸèƒ½ã€‚</td></tr><tr><td align="left">502</td><td align="left">Bad Gateway</td><td align="left">æœªå®Œæˆçš„è¯·æ±‚ã€‚æœåŠ¡å™¨ä»ä¸Šæ¸¸æœåŠ¡å™¨æ”¶åˆ°æ— æ•ˆå“åº”ã€‚</td></tr><tr><td align="left">503</td><td align="left">Service Unavailable</td><td align="left">æœªå®Œæˆçš„è¯·æ±‚ã€‚æœåŠ¡å™¨æš‚æ—¶è¶…è½½æˆ–æ­»æœºã€‚</td></tr><tr><td align="left">504</td><td align="left">Gateway Timeout</td><td align="left">ç½‘å…³è¶…æ—¶ã€‚</td></tr><tr><td align="left">505</td><td align="left">HTTP Version Not Supported</td><td align="left">æœåŠ¡å™¨ä¸æ”¯æŒâ€HTTPåè®®â€ç‰ˆæœ¬ã€‚</td></tr></tbody></table><h4 id="1-6ã€Servletè¿‡æ»¤å™¨"><a href="#1-6ã€Servletè¿‡æ»¤å™¨" class="headerlink" title="1.6ã€Servletè¿‡æ»¤å™¨"></a>1.6ã€Servletè¿‡æ»¤å™¨</h4><p>Servlet è¿‡æ»¤å™¨å¯ä»¥åŠ¨æ€åœ°æ‹¦æˆªè¯·æ±‚å’Œå“åº”ï¼Œä»¥å˜æ¢æˆ–ä½¿ç”¨åŒ…å«åœ¨è¯·æ±‚æˆ–å“åº”ä¸­çš„ä¿¡æ¯ã€‚</p><p>å¯ä»¥å°†ä¸€ä¸ªæˆ–å¤šä¸ª Servlet è¿‡æ»¤å™¨é™„åŠ åˆ°ä¸€ä¸ª Servlet æˆ–ä¸€ç»„ Servletï¼Œä¹Ÿå¯ä»¥é™„åŠ åˆ° JavaServer Pages (JSP) æ–‡ä»¶å’Œ HTML é¡µé¢ã€‚è°ƒç”¨ Servlet å‰è°ƒç”¨æ‰€æœ‰é™„åŠ çš„ Servlet è¿‡æ»¤å™¨ã€‚</p><p>è¿‡æ»¤å™¨é€šè¿‡ Web éƒ¨ç½²æè¿°ç¬¦ï¼ˆweb.xmlï¼‰ä¸­çš„ XML æ ‡ç­¾æ¥å£°æ˜ï¼Œç„¶åæ˜ å°„åˆ°æ‚¨çš„åº”ç”¨ç¨‹åºçš„éƒ¨ç½²æè¿°ç¬¦ä¸­çš„ Servlet åç§°æˆ– URL æ¨¡å¼ã€‚</p><p>å½“ Web å®¹å™¨å¯åŠ¨ Web åº”ç”¨ç¨‹åºæ—¶ï¼Œå®ƒä¼šä¸ºæ‚¨åœ¨éƒ¨ç½²æè¿°ç¬¦ä¸­å£°æ˜çš„æ¯ä¸€ä¸ªè¿‡æ»¤å™¨åˆ›å»ºä¸€ä¸ªå®ä¾‹ã€‚</p><p>Filterçš„æ‰§è¡Œé¡ºåºä¸åœ¨web.xmlé…ç½®æ–‡ä»¶ä¸­çš„é…ç½®é¡ºåºä¸€è‡´ï¼Œä¸€èˆ¬æŠŠFilteré…ç½®åœ¨æ‰€æœ‰çš„Servletä¹‹å‰ã€‚</p><h5 id="1-6-1ã€Servlet-è¿‡æ»¤å™¨ç›®çš„"><a href="#1-6-1ã€Servlet-è¿‡æ»¤å™¨ç›®çš„" class="headerlink" title="1.6.1ã€Servlet è¿‡æ»¤å™¨ç›®çš„"></a>1.6.1ã€Servlet è¿‡æ»¤å™¨ç›®çš„</h5><p>Servlet è¿‡æ»¤å™¨æ˜¯å¯ç”¨äº Servlet ç¼–ç¨‹çš„ Java ç±»ï¼Œå¯ä»¥å®ç°ä»¥ä¸‹ç›®çš„ï¼š</p><ul><li>åœ¨å®¢æˆ·ç«¯çš„è¯·æ±‚è®¿é—®åç«¯èµ„æºä¹‹å‰ï¼Œæ‹¦æˆªè¿™äº›è¯·æ±‚ã€‚</li><li>åœ¨æœåŠ¡å™¨çš„å“åº”å‘é€å›å®¢æˆ·ç«¯ä¹‹å‰ï¼Œå¤„ç†è¿™äº›å“åº”ã€‚</li></ul><h5 id="1-6-2ã€æ ¹æ®è§„èŒƒå»ºè®®çš„å„ç§ç±»å‹çš„è¿‡æ»¤å™¨"><a href="#1-6-2ã€æ ¹æ®è§„èŒƒå»ºè®®çš„å„ç§ç±»å‹çš„è¿‡æ»¤å™¨" class="headerlink" title="1.6.2ã€æ ¹æ®è§„èŒƒå»ºè®®çš„å„ç§ç±»å‹çš„è¿‡æ»¤å™¨"></a>1.6.2ã€æ ¹æ®è§„èŒƒå»ºè®®çš„å„ç§ç±»å‹çš„è¿‡æ»¤å™¨</h5><ul><li>èº«ä»½éªŒè¯è¿‡æ»¤å™¨ï¼ˆAuthentication Filtersï¼‰ã€‚</li><li>æ•°æ®å‹ç¼©è¿‡æ»¤å™¨ï¼ˆData compression Filtersï¼‰ã€‚</li><li>åŠ å¯†è¿‡æ»¤å™¨ï¼ˆEncryption Filtersï¼‰ã€‚</li><li>è§¦å‘èµ„æºè®¿é—®äº‹ä»¶è¿‡æ»¤å™¨ã€‚</li><li>å›¾åƒè½¬æ¢è¿‡æ»¤å™¨ï¼ˆImage Conversion Filtersï¼‰ã€‚</li><li>æ—¥å¿—è®°å½•å’Œå®¡æ ¸è¿‡æ»¤å™¨ï¼ˆLogging and Auditing Filtersï¼‰ã€‚</li><li>MIME-TYPE é“¾è¿‡æ»¤å™¨ï¼ˆMIME-TYPE Chain Filtersï¼‰ã€‚</li><li>æ ‡è®°åŒ–è¿‡æ»¤å™¨ï¼ˆTokenizing Filtersï¼‰ã€‚</li><li>XSL/T è¿‡æ»¤å™¨ï¼ˆXSL/T Filtersï¼‰ï¼Œè½¬æ¢ XML å†…å®¹ã€‚</li></ul><h5 id="1-6-3ã€Servlet-è¿‡æ»¤å™¨æ–¹æ³•"><a href="#1-6-3ã€Servlet-è¿‡æ»¤å™¨æ–¹æ³•" class="headerlink" title="1.6.3ã€Servlet è¿‡æ»¤å™¨æ–¹æ³•"></a><strong>1.6.3ã€Servlet è¿‡æ»¤å™¨æ–¹æ³•</strong></h5><p>è¿‡æ»¤å™¨æ˜¯ä¸€ä¸ªå®ç°äº† <code>javax.servlet.Filter</code> æ¥å£çš„ Java ç±»ã€‚javax.servlet.Filter æ¥å£å®šä¹‰äº†ä¸‰ä¸ªæ–¹æ³•ï¼š</p><table><thead><tr><th align="left">åºå·</th><th align="left">æ–¹æ³• &amp; æè¿°</th></tr></thead><tbody><tr><td align="left">1</td><td align="left"><strong>public void doFilter (ServletRequest, ServletResponse, FilterChain)</strong> <br>è¯¥æ–¹æ³•å®Œæˆå®é™…çš„è¿‡æ»¤æ“ä½œï¼Œå½“å®¢æˆ·ç«¯è¯·æ±‚æ–¹æ³•ä¸è¿‡æ»¤å™¨è®¾ç½®åŒ¹é…çš„URLæ—¶ï¼ŒServletå®¹å™¨å°†å…ˆè°ƒç”¨è¿‡æ»¤å™¨çš„doFilteræ–¹æ³•ã€‚FilterChainç”¨æˆ·è®¿é—®åç»­è¿‡æ»¤å™¨ã€‚</td></tr><tr><td align="left">2</td><td align="left"><strong>public void init(FilterConfig filterConfig)</strong> <br>web åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶ï¼Œweb æœåŠ¡å™¨å°†åˆ›å»ºFilter çš„å®ä¾‹å¯¹è±¡ï¼Œå¹¶è°ƒç”¨å…¶initæ–¹æ³•ï¼Œè¯»å–web.xmlé…ç½®ï¼Œå®Œæˆå¯¹è±¡çš„åˆå§‹åŒ–åŠŸèƒ½ï¼Œä»è€Œä¸ºåç»­çš„ç”¨æˆ·è¯·æ±‚ä½œå¥½æ‹¦æˆªçš„å‡†å¤‡å·¥ä½œï¼ˆfilterå¯¹è±¡åªä¼šåˆ›å»ºä¸€æ¬¡ï¼Œinitæ–¹æ³•ä¹Ÿåªä¼šæ‰§è¡Œä¸€æ¬¡ï¼‰ã€‚å¼€å‘äººå‘˜é€šè¿‡initæ–¹æ³•çš„å‚æ•°ï¼Œå¯è·å¾—ä»£è¡¨å½“å‰filteré…ç½®ä¿¡æ¯çš„FilterConfigå¯¹è±¡ã€‚</td></tr><tr><td align="left">3</td><td align="left"><strong>public void destroy()</strong> <br>Servletå®¹å™¨åœ¨é”€æ¯è¿‡æ»¤å™¨å®ä¾‹å‰è°ƒç”¨è¯¥æ–¹æ³•ï¼Œåœ¨è¯¥æ–¹æ³•ä¸­é‡Šæ”¾Servletè¿‡æ»¤å™¨å ç”¨çš„èµ„æºã€‚</td></tr></tbody></table><h5 id="1-6-4ã€FilterConfig-ä½¿ç”¨"><a href="#1-6-4ã€FilterConfig-ä½¿ç”¨" class="headerlink" title="1.6.4ã€FilterConfig ä½¿ç”¨"></a><strong>1.6.4ã€FilterConfig ä½¿ç”¨</strong></h5><p>Filter çš„ init æ–¹æ³•ä¸­æä¾›äº†ä¸€ä¸ª FilterConfig å¯¹è±¡ã€‚</p><p>å¦‚ web.xml æ–‡ä»¶é…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">filter</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>LogFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-class</span>&gt;</span>com.ant_nest.test.LogFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-class</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">init-param</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>Site<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>Ant Nest<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">init-param</span>&gt;<span class="hljs-name">f</span></span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter</span>&gt;</span><br></code></pre></td></tr></table></figure><p>åœ¨ init æ–¹æ³•ä½¿ç”¨ FilterConfig å¯¹è±¡è·å–å‚æ•°ï¼š</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span>  <span class="hljs-title">init</span><span class="hljs-params">(FilterConfig <span class="hljs-built_in">config</span>)</span> throws ServletException </span>&#123;<br>    <span class="hljs-comment">// è·å–åˆå§‹åŒ–å‚æ•°</span><br>    <span class="hljs-keyword">String</span> site = <span class="hljs-built_in">config</span>.getInitParameter(<span class="hljs-string">&quot;Site&quot;</span>); <br>    <span class="hljs-comment">// è¾“å‡ºåˆå§‹åŒ–å‚æ•°</span><br>    System.out.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;ç½‘ç«™åç§°: &quot;</span> + site); <br>&#125;<br></code></pre></td></tr></table></figure><h5 id="1-6-5ã€Servletè¿‡æ»¤å™¨æ¡ˆä¾‹"><a href="#1-6-5ã€Servletè¿‡æ»¤å™¨æ¡ˆä¾‹" class="headerlink" title="1.6.5ã€Servletè¿‡æ»¤å™¨æ¡ˆä¾‹"></a>1.6.5ã€Servletè¿‡æ»¤å™¨æ¡ˆä¾‹</h5><p><strong>1ï¼‰ã€DisplayHeader.java</strong></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-comment">//å¯¼å…¥å¿…éœ€çš„ java åº“</span><br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.PrintWriter;<br><span class="hljs-keyword">import</span> java.util.Enumeration;<br><br><span class="hljs-keyword">import</span> javax.servlet.ServletException;<br><span class="hljs-keyword">import</span> javax.servlet.annotation.WebServlet;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServlet;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletResponse;<br><br><span class="hljs-meta">@WebServlet</span>(<span class="hljs-string">&quot;/DisplayHeader&quot;</span>)<br><br><span class="hljs-comment">//æ‰©å±• HttpServlet ç±»</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DisplayHeader</span> <span class="hljs-title">extends</span> <span class="hljs-title">HttpServlet</span> </span>&#123;<br><br>    <span class="hljs-comment">// å¤„ç† GET æ–¹æ³•è¯·æ±‚çš„æ–¹æ³•</span><br>    <span class="hljs-keyword">public</span> void doGet(<span class="hljs-type">HttpServletRequest</span> request, <span class="hljs-type">HttpServletResponse</span> response) <span class="hljs-keyword">throws</span> <span class="hljs-type">ServletException</span>, <span class="hljs-type">IOException</span><br>    &#123;<br>        <span class="hljs-comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span><br>        response.setContentType(<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span>);<br><br>        <span class="hljs-type">PrintWriter</span> out <span class="hljs-operator">=</span> response.getWriter();<br>        <span class="hljs-type">String</span> title <span class="hljs-operator">=</span> <span class="hljs-string">&quot;HTTP Header è¯·æ±‚å®ä¾‹&quot;</span>;<br>        <span class="hljs-type">String</span> docType <span class="hljs-operator">=</span><br>                <span class="hljs-string">&quot;&lt;!DOCTYPE html&gt; <span class="hljs-subst">\n</span>&quot;</span>;<br>        out.println(docType <span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;&lt;html&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;&lt;head&gt;&lt;meta charset=<span class="hljs-subst">\&quot;</span>utf-8<span class="hljs-subst">\&quot;</span>&gt;&lt;title&gt;&quot;</span> <span class="hljs-operator">+</span> title <span class="hljs-operator">+</span> <span class="hljs-string">&quot;&lt;/title&gt;&lt;/head&gt;<span class="hljs-subst">\n</span>&quot;</span><span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;&lt;body bgcolor=<span class="hljs-subst">\&quot;</span>#f0f0f0<span class="hljs-subst">\&quot;</span>&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;&lt;h1 align=<span class="hljs-subst">\&quot;</span>center<span class="hljs-subst">\&quot;</span>&gt;&quot;</span> <span class="hljs-operator">+</span> title <span class="hljs-operator">+</span> <span class="hljs-string">&quot;&lt;/h1&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;&lt;table width=<span class="hljs-subst">\&quot;</span>100%<span class="hljs-subst">\&quot;</span> border=<span class="hljs-subst">\&quot;</span>1<span class="hljs-subst">\&quot;</span> align=<span class="hljs-subst">\&quot;</span>center<span class="hljs-subst">\&quot;</span>&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;&lt;tr bgcolor=<span class="hljs-subst">\&quot;</span>#949494<span class="hljs-subst">\&quot;</span>&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;&lt;th&gt;Header åç§°&lt;/th&gt;&lt;th&gt;Header å€¼&lt;/th&gt;<span class="hljs-subst">\n</span>&quot;</span><span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;&lt;/tr&gt;<span class="hljs-subst">\n</span>&quot;</span>);<br><br>        <span class="hljs-type">Enumeration</span> headerNames <span class="hljs-operator">=</span> request.getHeaderNames();<br><br>        <span class="hljs-keyword">while</span>(headerNames.hasMoreElements()) &#123;<br>            <span class="hljs-type">String</span> paramName <span class="hljs-operator">=</span> (<span class="hljs-type">String</span>)headerNames.nextElement();<br>            out.print(<span class="hljs-string">&quot;&lt;tr&gt;&lt;td&gt;&quot;</span> <span class="hljs-operator">+</span> paramName <span class="hljs-operator">+</span> <span class="hljs-string">&quot;&lt;/td&gt;<span class="hljs-subst">\n</span>&quot;</span>);<br>            <span class="hljs-type">String</span> paramValue <span class="hljs-operator">=</span> request.getHeader(paramName);<br>            out.println(<span class="hljs-string">&quot;&lt;td&gt; &quot;</span> <span class="hljs-operator">+</span> paramValue <span class="hljs-operator">+</span> <span class="hljs-string">&quot;&lt;/td&gt;&lt;/tr&gt;<span class="hljs-subst">\n</span>&quot;</span>);<br>        &#125;<br>        out.println(<span class="hljs-string">&quot;&lt;/table&gt;<span class="hljs-subst">\n</span>&lt;/body&gt;&lt;/html&gt;&quot;</span>);<br>    &#125;<br>    <span class="hljs-comment">// å¤„ç† POST æ–¹æ³•è¯·æ±‚çš„æ–¹æ³•</span><br>    <span class="hljs-keyword">public</span> void doPost(<span class="hljs-type">HttpServletRequest</span> request, <span class="hljs-type">HttpServletResponse</span> response) <span class="hljs-keyword">throws</span> <span class="hljs-type">ServletException</span>, <span class="hljs-type">IOException</span> &#123;<br>        doGet(request, response);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>2ï¼‰ã€index.jsp</strong></p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">&lt;%<span class="hljs-comment">-- Created by IntelliJ IDEA. --%&gt;</span><br>&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; <span class="hljs-keyword">language</span>=&quot;java&quot; %&gt;<br>&lt;%@ taglib uri=&quot;http://java.sun.com/jsp/jstl/core&quot; prefix=&quot;c&quot; %&gt;<br>&lt;html&gt;<br>&lt;head&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br>    &lt;form action=&quot;DisplayHeader&quot; <span class="hljs-keyword">method</span>=&quot;get&quot;&gt;<br>        ç½‘å€åï¼š&lt;<span class="hljs-keyword">input</span> <span class="hljs-keyword">type</span>=&quot;text&quot; <span class="hljs-type">name</span>=&quot;name&quot;&gt;<br>        &lt;br /&gt;<br>        ç½‘å€ï¼š&lt;<span class="hljs-keyword">input</span> <span class="hljs-keyword">type</span>=&quot;text&quot; <span class="hljs-type">name</span>=&quot;url&quot; /&gt;<br>        &lt;<span class="hljs-keyword">input</span> <span class="hljs-keyword">type</span>=&quot;checkbox&quot; <span class="hljs-type">name</span>=&quot;baidu&quot; checked=&quot;checked&quot; /&gt; ç™¾åº¦<br>        &lt;<span class="hljs-keyword">input</span> <span class="hljs-keyword">type</span>=&quot;checkbox&quot; <span class="hljs-type">name</span>=&quot;google&quot;  /&gt; Google<br>        &lt;<span class="hljs-keyword">input</span> <span class="hljs-keyword">type</span>=&quot;checkbox&quot; <span class="hljs-type">name</span>=&quot;taobao&quot; checked=&quot;checked&quot; /&gt; æ·˜å®<br>        &lt;<span class="hljs-keyword">input</span> <span class="hljs-keyword">type</span>=&quot;submit&quot; <span class="hljs-keyword">value</span>=&quot;æäº¤&quot; /&gt;<br>    &lt;/form&gt;<br>&lt;/body&gt;<br>&lt;/html&gt;<br></code></pre></td></tr></table></figure><p><strong>3ï¼‰ã€LogFilter.java</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> cn.ant_nest.Filter;<br><br><span class="hljs-comment">//å¯¼å…¥å¿…éœ€çš„ java åº“</span><br><span class="hljs-keyword">import</span> javax.servlet.*;<br><span class="hljs-keyword">import</span> java.util.*;<br><br><span class="hljs-comment">//å®ç° Filter ç±»</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LogFilter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Filter</span>  </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span>  <span class="hljs-title">init</span><span class="hljs-params">(FilterConfig config)</span> <span class="hljs-keyword">throws</span> ServletException </span>&#123;<br>        <span class="hljs-comment">// è·å–åˆå§‹åŒ–å‚æ•°</span><br>        String site = config.getInitParameter(<span class="hljs-string">&quot;Site&quot;</span>);<br><br>        <span class="hljs-comment">// è¾“å‡ºåˆå§‹åŒ–å‚æ•°</span><br>        System.out.println(<span class="hljs-string">&quot;ç½‘ç«™åç§°: &quot;</span> + site);<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span>  <span class="hljs-title">doFilter</span><span class="hljs-params">(ServletRequest request, ServletResponse response, FilterChain chain)</span> <span class="hljs-keyword">throws</span> java.io.IOException, ServletException </span>&#123;<br><br>        <span class="hljs-comment">// è¾“å‡ºç«™ç‚¹åç§°</span><br>        System.out.println(<span class="hljs-string">&quot;ç«™ç‚¹ç½‘å€ï¼šhttp://Kongwei-Liao.cn&quot;</span>);<br><br>        <span class="hljs-comment">// æŠŠè¯·æ±‚ä¼ å›è¿‡æ»¤é“¾</span><br>        chain.doFilter(request,response);<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">destroy</span><span class="hljs-params">( )</span></span>&#123;<br>        <span class="hljs-comment">/* åœ¨ Filter å®ä¾‹è¢« Web å®¹å™¨ä»æœåŠ¡ç§»é™¤ä¹‹å‰è°ƒç”¨ */</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>4ï¼‰ã€é…ç½®web.xml</strong></p><p>ä¸Šè¿°è¿‡æ»¤å™¨é€‚ç”¨äºæ‰€æœ‰çš„ Servletï¼Œå› ä¸ºæˆ‘ä»¬åœ¨é…ç½®ä¸­æŒ‡å®š <strong>/*</strong> ã€‚å¦‚æœæ‚¨åªæƒ³åœ¨å°‘æ•°çš„ Servlet ä¸Šåº”ç”¨è¿‡æ»¤å™¨ï¼Œæ‚¨å¯ä»¥æŒ‡å®šä¸€ä¸ªå…·ä½“çš„ Servlet è·¯å¾„ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">web-app</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">filter</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>LogFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">filter-class</span>&gt;</span>cn.ant_nest.Filter.LogFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-class</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">init-param</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>Site<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>ç»ƒä¹ ä½¿ç”¨è¿‡æ»¤å™¨<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">init-param</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">filter</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-mapping</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>LogFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/*<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">filter-mapping</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">web-app</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/filt.png"></p><h5 id="1-6-6ã€ä½¿ç”¨å¤šä¸ªè¿‡æ»¤å™¨"><a href="#1-6-6ã€ä½¿ç”¨å¤šä¸ªè¿‡æ»¤å™¨" class="headerlink" title="1.6.6ã€ä½¿ç”¨å¤šä¸ªè¿‡æ»¤å™¨"></a>1.6.6ã€ä½¿ç”¨å¤šä¸ªè¿‡æ»¤å™¨</h5><p>Web åº”ç”¨ç¨‹åºå¯ä»¥æ ¹æ®ç‰¹å®šçš„ç›®çš„å®šä¹‰è‹¥å¹²ä¸ªä¸åŒçš„è¿‡æ»¤å™¨ã€‚å‡è®¾æ‚¨å®šä¹‰äº†ä¸¤ä¸ªè¿‡æ»¤å™¨ <em>AuthenFilter</em> å’Œ <em>LogFilter</em>ã€‚æ‚¨éœ€è¦åˆ›å»ºä¸€ä¸ªå¦‚ä¸‹æ‰€è¿°çš„ä¸åŒçš„æ˜ å°„ï¼Œå…¶ä½™çš„å¤„ç†ä¸ä¸Šè¿°æ‰€è®²è§£çš„å¤§è‡´ç›¸åŒï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">filter</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>LogFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">filter-class</span>&gt;</span>cn.ant_nest.Filter.LogFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-class</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">init-param</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>test-param<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>Initialization Paramter<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br>   <span class="hljs-tag">&lt;/<span class="hljs-name">init-param</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">filter</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>AuthenFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">filter-class</span>&gt;</span>cn.ant_nest.Filter.AuthenFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-class</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">init-param</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>test-param<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>Initialization Paramter<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br>   <span class="hljs-tag">&lt;/<span class="hljs-name">init-param</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">filter-mapping</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>LogFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/*<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter-mapping</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">filter-mapping</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>AuthenFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/*<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter-mapping</span>&gt;</span><br></code></pre></td></tr></table></figure><h5 id="1-6-7ã€å¤šä¸ªè¿‡æ»¤å™¨çš„é¡ºåº"><a href="#1-6-7ã€å¤šä¸ªè¿‡æ»¤å™¨çš„é¡ºåº" class="headerlink" title="1.6.7ã€å¤šä¸ªè¿‡æ»¤å™¨çš„é¡ºåº"></a>1.6.7ã€å¤šä¸ªè¿‡æ»¤å™¨çš„é¡ºåº</h5><p>web.xml ä¸­çš„ filter-mapping å…ƒç´ çš„é¡ºåºå†³å®šäº† Web å®¹å™¨åº”ç”¨è¿‡æ»¤å™¨åˆ° Servlet çš„é¡ºåºã€‚è‹¥è¦åè½¬è¿‡æ»¤å™¨çš„é¡ºåºï¼Œæ‚¨åªéœ€è¦åœ¨ web.xml æ–‡ä»¶ä¸­åè½¬ filter-mapping å…ƒç´ å³å¯ã€‚</p><p>ä¾‹å¦‚ï¼Œä¸Šé¢çš„å®ä¾‹å°†å…ˆåº”ç”¨ LogFilterï¼Œç„¶åå†åº”ç”¨ AuthenFilterï¼Œä½†æ˜¯ä¸‹é¢çš„å®ä¾‹å°†é¢ å€’è¿™ä¸ªé¡ºåºï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">filter-mapping</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>AuthenFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/*<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter-mapping</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">filter-mapping</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>LogFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/*<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter-mapping</span>&gt;</span><br></code></pre></td></tr></table></figure><h5 id="1-6-8ã€web-xmlé…ç½®å„ä¸ªç»“ç‚¹è¯´æ˜"><a href="#1-6-8ã€web-xmlé…ç½®å„ä¸ªç»“ç‚¹è¯´æ˜" class="headerlink" title="1.6.8ã€web.xmlé…ç½®å„ä¸ªç»“ç‚¹è¯´æ˜"></a>1.6.8ã€web.xmlé…ç½®å„ä¸ªç»“ç‚¹è¯´æ˜</h5><ul><li><p><filter>æŒ‡å®šä¸€ä¸ªè¿‡æ»¤å™¨ã€‚ </filter></p><ul><li><filter-name>ç”¨äºä¸ºè¿‡æ»¤å™¨æŒ‡å®šä¸€ä¸ªåå­—ï¼Œè¯¥å…ƒç´ çš„å†…å®¹ä¸èƒ½ä¸ºç©ºã€‚</filter-name></li><li><filter-class>å…ƒç´ ç”¨äºæŒ‡å®šè¿‡æ»¤å™¨çš„å®Œæ•´çš„é™å®šç±»åã€‚</filter-class></li><li><init-param>å…ƒç´ ç”¨äºä¸ºè¿‡æ»¤å™¨æŒ‡å®šåˆå§‹åŒ–å‚æ•°ï¼Œå®ƒçš„å­å…ƒç´ <param-name>æŒ‡å®šå‚æ•°çš„åå­—ï¼Œ<param-value>æŒ‡å®šå‚æ•°çš„å€¼ã€‚</param-value></param-name></init-param></li><li>åœ¨è¿‡æ»¤å™¨ä¸­ï¼Œå¯ä»¥ä½¿ç”¨FilterConfigæ¥å£å¯¹è±¡æ¥è®¿é—®åˆå§‹åŒ–å‚æ•°ã€‚</li></ul></li><li><p><filter-mapping>å…ƒç´ ç”¨äºè®¾ç½®ä¸€ä¸ª Filter æ‰€è´Ÿè´£æ‹¦æˆªçš„èµ„æºã€‚ä¸€ä¸ªFilteræ‹¦æˆªçš„èµ„æºå¯é€šè¿‡ä¸¤ç§æ–¹å¼æ¥æŒ‡å®šï¼šServlet åç§°å’Œèµ„æºè®¿é—®çš„è¯·æ±‚è·¯å¾„ </filter-mapping></p><ul><li><filter-name>å­å…ƒç´ ç”¨äºè®¾ç½®filterçš„æ³¨å†Œåç§°ã€‚è¯¥å€¼å¿…é¡»æ˜¯åœ¨<filter>å…ƒç´ ä¸­å£°æ˜è¿‡çš„è¿‡æ»¤å™¨çš„åå­—</filter></filter-name></li><li><url-pattern>è®¾ç½® filter æ‰€æ‹¦æˆªçš„è¯·æ±‚è·¯å¾„(è¿‡æ»¤å™¨å…³è”çš„URLæ ·å¼)</url-pattern></li></ul></li><li><p><servlet-name>æŒ‡å®šè¿‡æ»¤å™¨æ‰€æ‹¦æˆªçš„Servletåç§°ã€‚</servlet-name></p></li><li><p><dispatcher>æŒ‡å®šè¿‡æ»¤å™¨æ‰€æ‹¦æˆªçš„èµ„æºè¢« Servlet å®¹å™¨è°ƒç”¨çš„æ–¹å¼ï¼Œå¯ä»¥æ˜¯REQUEST,INCLUDE,FORWARDå’ŒERRORä¹‹ä¸€ï¼Œé»˜è®¤REQUESTã€‚ç”¨æˆ·å¯ä»¥è®¾ç½®å¤šä¸ª<dispatcher>å­å…ƒç´ ç”¨æ¥æŒ‡å®š Filter å¯¹èµ„æºçš„å¤šç§è°ƒç”¨æ–¹å¼è¿›è¡Œæ‹¦æˆªã€‚</dispatcher></dispatcher></p></li><li><p><dispatcher>å­å…ƒç´ å¯ä»¥è®¾ç½®çš„å€¼åŠå…¶æ„ä¹‰ </dispatcher></p><ul><li>REQUESTï¼šå½“ç”¨æˆ·ç›´æ¥è®¿é—®é¡µé¢æ—¶ï¼ŒWebå®¹å™¨å°†ä¼šè°ƒç”¨è¿‡æ»¤å™¨ã€‚å¦‚æœç›®æ ‡èµ„æºæ˜¯é€šè¿‡</li><li>RequestDispatcherçš„include()æˆ–forward()æ–¹æ³•è®¿é—®æ—¶ï¼Œé‚£ä¹ˆè¯¥è¿‡æ»¤å™¨å°±ä¸ä¼šè¢«è°ƒç”¨ã€‚</li><li>INCLUDEï¼šå¦‚æœç›®æ ‡èµ„æºæ˜¯é€šè¿‡RequestDispatcherçš„include()æ–¹æ³•è®¿é—®æ—¶ï¼Œé‚£ä¹ˆè¯¥è¿‡æ»¤å™¨å°†è¢«è°ƒç”¨ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¯¥è¿‡æ»¤å™¨ä¸ä¼šè¢«è°ƒç”¨ã€‚</li><li>FORWARDï¼šå¦‚æœç›®æ ‡èµ„æºæ˜¯é€šè¿‡RequestDispatcherçš„forward()æ–¹æ³•è®¿é—®æ—¶ï¼Œé‚£ä¹ˆè¯¥è¿‡æ»¤å™¨å°†è¢«è°ƒç”¨ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œè¯¥è¿‡æ»¤å™¨ä¸ä¼šè¢«è°ƒç”¨ã€‚</li><li>ERRORï¼šå¦‚æœç›®æ ‡èµ„æºæ˜¯é€šè¿‡å£°æ˜å¼å¼‚å¸¸å¤„ç†æœºåˆ¶è°ƒç”¨æ—¶ï¼Œé‚£ä¹ˆè¯¥è¿‡æ»¤å™¨å°†è¢«è°ƒç”¨ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿‡æ»¤å™¨ä¸ä¼šè¢«è°ƒç”¨ã€‚</li></ul></li></ul><h4 id="1-7ã€Servletå¼‚å¸¸å¤„ç†"><a href="#1-7ã€Servletå¼‚å¸¸å¤„ç†" class="headerlink" title="1.7ã€Servletå¼‚å¸¸å¤„ç†"></a><a href="https://www.runoob.com/servlet/servlet-exception-handling.html">1.7ã€Servletå¼‚å¸¸å¤„ç†</a></h4><p>å½“ä¸€ä¸ª Servlet æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸æ—¶ï¼ŒWeb å®¹å™¨åœ¨ä½¿ç”¨äº† exception-type å…ƒç´ çš„ <strong>web.xml</strong> ä¸­æœç´¢ä¸æŠ›å‡ºå¼‚å¸¸ç±»å‹ç›¸åŒ¹é…çš„é…ç½®ã€‚</p><p>æ‚¨å¿…é¡»åœ¨ web.xml ä¸­ä½¿ç”¨ <strong>error-page</strong> å…ƒç´ æ¥æŒ‡å®šå¯¹ç‰¹å®š<strong>å¼‚å¸¸</strong> æˆ– HTTP <strong>çŠ¶æ€ç </strong> ä½œå‡ºç›¸åº”çš„ Servlet è°ƒç”¨ã€‚</p><h5 id="1-7-1ã€web-xmlé…ç½®"><a href="#1-7-1ã€web-xmlé…ç½®" class="headerlink" title="1.7.1ã€web.xmlé…ç½®"></a>1.7.1ã€web.xmlé…ç½®</h5><p>å‡è®¾ï¼Œæœ‰ä¸€ä¸ª <em>ErrorHandler</em> çš„ Servlet åœ¨ä»»ä½•å·²å®šä¹‰çš„å¼‚å¸¸æˆ–é”™è¯¯å‡ºç°æ—¶è¢«è°ƒç”¨ã€‚ä»¥ä¸‹å°†æ˜¯åœ¨ web.xml ä¸­åˆ›å»ºçš„é¡¹ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- servlet å®šä¹‰ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>ErrorHandler<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>ErrorHandler<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br><span class="hljs-comment">&lt;!-- servlet æ˜ å°„ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>ErrorHandler<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/ErrorHandler<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- error-code ç›¸å…³çš„é”™è¯¯é¡µé¢ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">error-page</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">error-code</span>&gt;</span>404<span class="hljs-tag">&lt;/<span class="hljs-name">error-code</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">location</span>&gt;</span>/ErrorHandler<span class="hljs-tag">&lt;/<span class="hljs-name">location</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">error-page</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">error-page</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">error-code</span>&gt;</span>403<span class="hljs-tag">&lt;/<span class="hljs-name">error-code</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">location</span>&gt;</span>/ErrorHandler<span class="hljs-tag">&lt;/<span class="hljs-name">location</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">error-page</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- exception-type ç›¸å…³çš„é”™è¯¯é¡µé¢ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">error-page</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">exception-type</span>&gt;</span><br>          javax.servlet.ServletException<br>    &lt;/exception-type &gt;<br>    <span class="hljs-tag">&lt;<span class="hljs-name">location</span>&gt;</span>/ErrorHandler<span class="hljs-tag">&lt;/<span class="hljs-name">location</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">error-page</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">error-page</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">exception-type</span>&gt;</span><br>    java.io.IOException<br>    &lt;/exception-type &gt;<br>    <span class="hljs-tag">&lt;<span class="hljs-name">location</span>&gt;</span>/ErrorHandler<span class="hljs-tag">&lt;/<span class="hljs-name">location</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">error-page</span>&gt;</span><br></code></pre></td></tr></table></figure><p>å¦‚æœæ‚¨æƒ³å¯¹æ‰€æœ‰çš„å¼‚å¸¸æœ‰ä¸€ä¸ªé€šç”¨çš„é”™è¯¯å¤„ç†ç¨‹åºï¼Œé‚£ä¹ˆåº”è¯¥å®šä¹‰ä¸‹é¢<code>java.lang.Throwable</code>çš„ error-pageï¼Œè€Œä¸æ˜¯ä¸ºæ¯ä¸ªå¼‚å¸¸å®šä¹‰å•ç‹¬çš„ error-page å…ƒç´ ï¼š</p><figure class="highlight bnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bnf"><span class="hljs-attribute">&lt;error-page&gt;</span><br>    <span class="hljs-attribute">&lt;exception-type&gt;</span>java.lang.Throwable<span class="hljs-attribute">&lt;/exception-type &gt;</span><br>    <span class="hljs-attribute">&lt;location&gt;</span>/ErrorHandler<span class="hljs-attribute">&lt;/location&gt;</span><br><span class="hljs-attribute">&lt;/error-page&gt;</span><br></code></pre></td></tr></table></figure><p>ä»¥ä¸‹æ˜¯å…³äºä¸Šé¢çš„ web.xml å¼‚å¸¸å¤„ç†è¦æ³¨æ„çš„ç‚¹ï¼š</p><ul><li>Servlet ErrorHandler ä¸å…¶ä»–çš„ Servlet çš„å®šä¹‰æ–¹å¼ä¸€æ ·ï¼Œä¸”åœ¨ web.xml ä¸­è¿›è¡Œé…ç½®ã€‚</li><li>å¦‚æœæœ‰é”™è¯¯çŠ¶æ€ä»£ç å‡ºç°ï¼Œä¸ç®¡ä¸º 404ï¼ˆNot Found æœªæ‰¾åˆ°ï¼‰æˆ– 403ï¼ˆForbidden ç¦æ­¢ï¼‰ï¼Œåˆ™ä¼šè°ƒç”¨ ErrorHandler çš„ Servletã€‚</li><li>å¦‚æœ Web åº”ç”¨ç¨‹åºæŠ›å‡º <em>ServletException</em> æˆ– <em>IOException</em>ï¼Œé‚£ä¹ˆ Web å®¹å™¨ä¼šè°ƒç”¨ ErrorHandler çš„ Servletã€‚</li><li>æ‚¨å¯ä»¥å®šä¹‰ä¸åŒçš„é”™è¯¯å¤„ç†ç¨‹åºæ¥å¤„ç†ä¸åŒç±»å‹çš„é”™è¯¯æˆ–å¼‚å¸¸ã€‚ä¸Šé¢çš„å®ä¾‹æ˜¯éå¸¸é€šç”¨çš„ï¼Œå¸Œæœ›æ‚¨èƒ½é€šè¿‡å®ä¾‹ç†è§£åŸºæœ¬çš„æ¦‚å¿µã€‚</li></ul><h5 id="1-7-2ã€è¯·æ±‚å±æ€§-é”™è¯¯-å¼‚å¸¸"><a href="#1-7-2ã€è¯·æ±‚å±æ€§-é”™è¯¯-å¼‚å¸¸" class="headerlink" title="1.7.2ã€è¯·æ±‚å±æ€§-é”™è¯¯/å¼‚å¸¸"></a>1.7.2ã€<code>è¯·æ±‚å±æ€§</code>-é”™è¯¯/å¼‚å¸¸</h5><p>ä»¥ä¸‹æ˜¯é”™è¯¯å¤„ç†çš„ Servlet å¯ä»¥è®¿é—®çš„è¯·æ±‚å±æ€§åˆ—è¡¨ï¼Œç”¨æ¥åˆ†æé”™è¯¯/å¼‚å¸¸çš„æ€§è´¨ã€‚</p><table><thead><tr><th align="left">åºå·</th><th align="left"><code>å±æ€§</code> &amp; æè¿°</th></tr></thead><tbody><tr><td align="left">1</td><td align="left"><strong>javax.servlet.error.status_code</strong> è¯¥å±æ€§ç»™å‡ºçŠ¶æ€ç ï¼ŒçŠ¶æ€ç å¯è¢«å­˜å‚¨ï¼Œå¹¶åœ¨å­˜å‚¨ä¸º java.lang.Integer æ•°æ®ç±»å‹åå¯è¢«åˆ†æã€‚</td></tr><tr><td align="left">2</td><td align="left"><strong>javax.servlet.error.exception_type</strong> è¯¥å±æ€§ç»™å‡ºå¼‚å¸¸ç±»å‹çš„ä¿¡æ¯ï¼Œå¼‚å¸¸ç±»å‹å¯è¢«å­˜å‚¨ï¼Œå¹¶åœ¨å­˜å‚¨ä¸º java.lang.Class æ•°æ®ç±»å‹åå¯è¢«åˆ†æã€‚</td></tr><tr><td align="left">3</td><td align="left"><strong>javax.servlet.error.message</strong> è¯¥å±æ€§ç»™å‡ºç¡®åˆ‡é”™è¯¯æ¶ˆæ¯çš„ä¿¡æ¯ï¼Œä¿¡æ¯å¯è¢«å­˜å‚¨ï¼Œå¹¶åœ¨å­˜å‚¨ä¸º java.lang.String æ•°æ®ç±»å‹åå¯è¢«åˆ†æã€‚</td></tr><tr><td align="left">4</td><td align="left"><strong>javax.servlet.error.request_uri</strong> è¯¥å±æ€§ç»™å‡ºæœ‰å…³ URL è°ƒç”¨ Servlet çš„ä¿¡æ¯ï¼Œä¿¡æ¯å¯è¢«å­˜å‚¨ï¼Œå¹¶åœ¨å­˜å‚¨ä¸º java.lang.String æ•°æ®ç±»å‹åå¯è¢«åˆ†æã€‚</td></tr><tr><td align="left">5</td><td align="left"><strong>javax.servlet.error.exception</strong> è¯¥å±æ€§ç»™å‡ºå¼‚å¸¸äº§ç”Ÿçš„ä¿¡æ¯ï¼Œä¿¡æ¯å¯è¢«å­˜å‚¨ï¼Œå¹¶åœ¨å­˜å‚¨ä¸º java.lang.Throwable æ•°æ®ç±»å‹åå¯è¢«åˆ†æã€‚</td></tr><tr><td align="left">6</td><td align="left"><strong>javax.servlet.error.servlet_name</strong> è¯¥å±æ€§ç»™å‡º Servlet çš„åç§°ï¼Œåç§°å¯è¢«å­˜å‚¨ï¼Œå¹¶åœ¨å­˜å‚¨ä¸º java.lang.String æ•°æ®ç±»å‹åå¯è¢«åˆ†æã€‚</td></tr></tbody></table><h5 id="1-7-3ã€Servleté”™è¯¯å¤„ç†ç¨‹åº"><a href="#1-7-3ã€Servleté”™è¯¯å¤„ç†ç¨‹åº" class="headerlink" title="1.7.3ã€Servleté”™è¯¯å¤„ç†ç¨‹åº"></a>1.7.3ã€Servleté”™è¯¯å¤„ç†ç¨‹åº</h5><p>ä»¥ä¸‹æ˜¯ Servlet å®ä¾‹ï¼Œå°†åº”å¯¹ä»»ä½•æ‚¨æ‰€å®šä¹‰çš„é”™è¯¯æˆ–å¼‚å¸¸å‘ç”Ÿæ—¶çš„é”™è¯¯å¤„ç†ç¨‹åºã€‚</p><p>æœ¬å®ä¾‹è®©æ‚¨å¯¹ Servlet ä¸­çš„å¼‚å¸¸å¤„ç†æœ‰åŸºæœ¬çš„äº†è§£ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ç›¸åŒçš„æ¦‚å¿µç¼–å†™æ›´å¤æ‚çš„å¼‚å¸¸å¤„ç†åº”ç”¨ç¨‹åºï¼š</p><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs processing"><span class="hljs-comment">//æ‰©å±• HttpServlet ç±»</span><br><span class="hljs-keyword">public</span> class ErrorHandler extends HttpServlet &#123;<br><br>    <span class="hljs-comment">// å¤„ç† GET æ–¹æ³•è¯·æ±‚çš„æ–¹æ³•</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> doGet(HttpServletRequest request, HttpServletResponse response) <span class="hljs-keyword">throws</span> ServletException, IOException<br>    &#123;<br>        Throwable throwable = (Throwable)<br>        request.getAttribute(<span class="hljs-string">&quot;javax.servlet.error.exception&quot;</span>);<span class="hljs-comment">//1.7.2çš„è¯·æ±‚å±æ€§</span><br>        Integer statusCode = (Integer)<br>        request.getAttribute(<span class="hljs-string">&quot;javax.servlet.error.status_code&quot;</span>);<br>        <span class="hljs-keyword">String</span> servletName = (<span class="hljs-keyword">String</span>)<br>        request.getAttribute(<span class="hljs-string">&quot;javax.servlet.error.servlet_name&quot;</span>);<br>        <span class="hljs-keyword">if</span> (servletName == <span class="hljs-keyword">null</span>)&#123;<br>            servletName = <span class="hljs-string">&quot;Unknown&quot;</span>;<br>        &#125;<br>        <span class="hljs-keyword">String</span> requestUri = (<span class="hljs-keyword">String</span>)<br>        request.getAttribute(<span class="hljs-string">&quot;javax.servlet.error.request_uri&quot;</span>);<br>        <span class="hljs-keyword">if</span> (requestUri == <span class="hljs-keyword">null</span>)&#123;<br>            requestUri = <span class="hljs-string">&quot;Unknown&quot;</span>;<br>        &#125;<br>        <span class="hljs-comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span><br>        response.setContentType(<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span>);<br>    <br>        PrintWriter out = response.getWriter();<br>        <span class="hljs-keyword">String</span> title = <span class="hljs-string">&quot;Error/Exception ä¿¡æ¯&quot;</span>;<br>       <br>        <span class="hljs-keyword">String</span> docType = <span class="hljs-string">&quot;&lt;!DOCTYPE html&gt;\n&quot;</span>;<br>        out.<span class="hljs-built_in">println</span>(docType +<br>            <span class="hljs-string">&quot;&lt;html&gt;\n&quot;</span> +<br>             <span class="hljs-string">&quot;&lt;head&gt;&lt;title&gt;&quot;</span> + title + <span class="hljs-string">&quot;&lt;/title&gt;&lt;/head&gt;\n&quot;</span> +<br>             <span class="hljs-string">&quot;&lt;body bgcolor=\&quot;#f0f0f0\&quot;&gt;\n&quot;</span>);<br>           out.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;&lt;h1&gt;å¼‚å¸¸ä¿¡æ¯å®ä¾‹æ¼”ç¤º&lt;/h1&gt;&quot;</span>);<br>           <span class="hljs-keyword">if</span> (throwable == <span class="hljs-keyword">null</span> &amp;&amp; statusCode == <span class="hljs-keyword">null</span>)&#123;<br>              out.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;&lt;h2&gt;é”™è¯¯ä¿¡æ¯ä¸¢å¤±&lt;/h2&gt;&quot;</span>);<br>              out.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;è¯·è¿”å› &lt;a href=\&quot;&quot;</span> + <br>            response.encodeURL(<span class="hljs-string">&quot;http://localhost:8080/&quot;</span>) + <br>                <span class="hljs-string">&quot;\&quot;&gt;ä¸»é¡µ&lt;/a&gt;ã€‚&quot;</span>);<br>           &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (statusCode != <span class="hljs-keyword">null</span>) &#123;<br>              out.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;é”™è¯¯ä»£ç  : &quot;</span> + statusCode);<br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>               out.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;&lt;h2&gt;é”™è¯¯ä¿¡æ¯&lt;/h2&gt;&quot;</span>);<br>              out.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;Servlet Name : &quot;</span> + servletName + <br>                              <span class="hljs-string">&quot;&lt;/br&gt;&lt;/br&gt;&quot;</span>);<br>              out.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;å¼‚å¸¸ç±»å‹ : &quot;</span> + <br>                              throwable.getClass( ).getName( ) + <br>                              <span class="hljs-string">&quot;&lt;/br&gt;&lt;/br&gt;&quot;</span>);<br>              out.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;è¯·æ±‚ URI: &quot;</span> + requestUri + <br>                              <span class="hljs-string">&quot;&lt;br&gt;&lt;br&gt;&quot;</span>);<br>              out.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;å¼‚å¸¸ä¿¡æ¯: &quot;</span> + <br>                                  throwable.getMessage( ));<br>           &#125;<br>           out.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;&lt;/body&gt;&quot;</span>);<br>           out.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;&lt;/html&gt;&quot;</span>);<br>    &#125;<br>    <span class="hljs-comment">// å¤„ç† POST æ–¹æ³•è¯·æ±‚çš„æ–¹æ³•</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> doPost(HttpServletRequest request,<br>                      HttpServletResponse response)<br>       <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        doGet(request, response);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="1-8ã€Servlet-Cookieså¤„ç†"><a href="#1-8ã€Servlet-Cookieså¤„ç†" class="headerlink" title="1.8ã€Servlet Cookieså¤„ç†"></a>1.8ã€Servlet Cookieså¤„ç†</h4><p>Cookie æ˜¯å­˜å‚¨åœ¨å®¢æˆ·ç«¯è®¡ç®—æœºä¸Šçš„æ–‡æœ¬æ–‡ä»¶ï¼Œå¹¶ä¿ç•™äº†å„ç§è·Ÿè¸ªä¿¡æ¯ã€‚Java Servlet æ˜¾ç„¶æ”¯æŒ HTTP Cookieã€‚</p><p>è¯†åˆ«è¿”å›ç”¨æˆ·åŒ…æ‹¬ä¸‰ä¸ªæ­¥éª¤ï¼š</p><ul><li>æœåŠ¡å™¨è„šæœ¬å‘æµè§ˆå™¨å‘é€ä¸€ç»„ Cookieã€‚ä¾‹å¦‚ï¼šå§“åã€å¹´é¾„æˆ–è¯†åˆ«å·ç ç­‰ã€‚</li><li>æµè§ˆå™¨å°†è¿™äº›ä¿¡æ¯å­˜å‚¨åœ¨æœ¬åœ°è®¡ç®—æœºä¸Šï¼Œä»¥å¤‡å°†æ¥ä½¿ç”¨ã€‚</li><li>å½“ä¸‹ä¸€æ¬¡æµè§ˆå™¨å‘ Web æœåŠ¡å™¨å‘é€ä»»ä½•è¯·æ±‚æ—¶ï¼Œæµè§ˆå™¨ä¼šæŠŠè¿™äº› Cookie ä¿¡æ¯å‘é€åˆ°æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å°†ä½¿ç”¨è¿™äº›ä¿¡æ¯æ¥è¯†åˆ«ç”¨æˆ·ã€‚</li></ul><p>Cookie é€šå¸¸è®¾ç½®åœ¨ HTTP å¤´ä¿¡æ¯ä¸­ï¼ˆè™½ç„¶ JavaScript ä¹Ÿå¯ä»¥ç›´æ¥åœ¨æµè§ˆå™¨ä¸Šè®¾ç½®ä¸€ä¸ª Cookieï¼‰ã€‚è®¾ç½® Cookie çš„ Servlet ä¼šå‘é€å¦‚ä¸‹çš„å¤´ä¿¡æ¯ï¼š</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">HTTP</span>/<span class="hljs-number">1</span>.<span class="hljs-number">1</span> <span class="hljs-number">200</span> OK<br><span class="hljs-attribute">Date</span>: Fri, <span class="hljs-number">04</span> Feb <span class="hljs-number">2000</span> <span class="hljs-number">21</span>:<span class="hljs-number">03</span>:<span class="hljs-number">38</span> GMT<br><span class="hljs-attribute">Server</span>: Apache/<span class="hljs-number">1</span>.<span class="hljs-number">3</span>.<span class="hljs-number">9</span> (UNIX) PHP/<span class="hljs-number">4</span>.<span class="hljs-number">0</span>b<span class="hljs-number">3</span><br><span class="hljs-attribute">Set</span>-Cookie: name=xyz; expires=Friday, <span class="hljs-number">04</span>-Feb-<span class="hljs-number">07</span> <span class="hljs-number">22</span>:<span class="hljs-number">03</span>:<span class="hljs-number">38</span> GMT; <br>                 <span class="hljs-attribute">path</span>=/; domain=Kongwei-Liao.cn<br><span class="hljs-attribute">Connection</span>: close<br><span class="hljs-attribute">Content</span>-Type: text/html<br></code></pre></td></tr></table></figure><p>æ­£å¦‚æ‚¨æ‰€çœ‹åˆ°çš„ï¼ŒSet-Cookie å¤´åŒ…å«äº†ä¸€ä¸ªåç§°å€¼å¯¹ã€ä¸€ä¸ª GMT æ—¥æœŸã€ä¸€ä¸ªè·¯å¾„å’Œä¸€ä¸ªåŸŸã€‚åç§°å’Œå€¼ä¼šè¢« URL ç¼–ç ã€‚expires å­—æ®µæ˜¯ä¸€ä¸ªæŒ‡ä»¤ï¼Œå‘Šè¯‰æµè§ˆå™¨åœ¨ç»™å®šçš„æ—¶é—´å’Œæ—¥æœŸä¹‹åâ€å¿˜è®°â€è¯¥ Cookieã€‚</p><p>å¦‚æœæµè§ˆå™¨è¢«é…ç½®ä¸ºå­˜å‚¨ Cookieï¼Œå®ƒå°†ä¼šä¿ç•™æ­¤ä¿¡æ¯ç›´åˆ°åˆ°æœŸæ—¥æœŸã€‚å¦‚æœç”¨æˆ·çš„æµè§ˆå™¨æŒ‡å‘ä»»ä½•åŒ¹é…è¯¥ Cookie çš„è·¯å¾„å’ŒåŸŸçš„é¡µé¢ï¼Œå®ƒä¼šé‡æ–°å‘é€ Cookie åˆ°æœåŠ¡å™¨ã€‚æµè§ˆå™¨çš„å¤´ä¿¡æ¯å¯èƒ½å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-keyword">GET</span> <span class="hljs-string">/</span> <span class="hljs-meta">HTTP/1.0</span><br><span class="hljs-attribute">Connection</span><span class="hljs-punctuation">: </span>Keep-Alive<br><span class="hljs-attribute">User-Agent</span><span class="hljs-punctuation">: </span>Mozilla/4.6 (X11; I; Linux 2.2.6-15apmac ppc)<br><span class="hljs-attribute">Host</span><span class="hljs-punctuation">: </span>zink.demon.co.uk:1126<br><span class="hljs-attribute">Accept</span><span class="hljs-punctuation">: </span>image/gif, */*<br><span class="hljs-attribute">Accept-Encoding</span><span class="hljs-punctuation">: </span>gzip<br><span class="hljs-attribute">Accept-Language</span><span class="hljs-punctuation">: </span>en<br><span class="hljs-attribute">Accept-Charset</span><span class="hljs-punctuation">: </span>iso-8859-1,*,utf-8<br><span class="hljs-attribute">Cookie</span><span class="hljs-punctuation">: </span>name=xyz<br></code></pre></td></tr></table></figure><p>Servlet å°±èƒ½å¤Ÿé€šè¿‡è¯·æ±‚æ–¹æ³• <code>request.getCookies()</code> è®¿é—® Cookieï¼Œè¯¥æ–¹æ³•å°†è¿”å›ä¸€ä¸ª <em>Cookie</em> å¯¹è±¡çš„æ•°ç»„ã€‚</p><p>ä»¥ä¸‹æ˜¯åœ¨ Servlet ä¸­æ“ä½œ Cookie æ—¶å¯ä½¿ç”¨çš„æœ‰ç”¨çš„æ–¹æ³•åˆ—è¡¨ã€‚</p><table><thead><tr><th align="left">åºå·</th><th align="left">æ–¹æ³• &amp; æè¿°</th></tr></thead><tbody><tr><td align="left">1</td><td align="left"><strong>public void setDomain(String pattern)</strong> è¯¥æ–¹æ³•è®¾ç½® cookie é€‚ç”¨çš„åŸŸï¼Œä¾‹å¦‚ runoob.comã€‚</td></tr><tr><td align="left">2</td><td align="left"><strong>public String getDomain()</strong> è¯¥æ–¹æ³•è·å– cookie é€‚ç”¨çš„åŸŸï¼Œä¾‹å¦‚ runoob.comã€‚</td></tr><tr><td align="left">3</td><td align="left"><strong>public void setMaxAge(int expiry)</strong> è¯¥æ–¹æ³•è®¾ç½® cookie è¿‡æœŸçš„æ—¶é—´ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ã€‚å¦‚æœä¸è¿™æ ·è®¾ç½®ï¼Œcookie åªä¼šåœ¨å½“å‰ session ä¼šè¯ä¸­æŒç»­æœ‰æ•ˆã€‚</td></tr><tr><td align="left">4</td><td align="left"><strong>public int getMaxAge()</strong> è¯¥æ–¹æ³•è¿”å› cookie çš„æœ€å¤§ç”Ÿå­˜å‘¨æœŸï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œ-1 è¡¨ç¤º cookie å°†æŒç»­ä¸‹å»ï¼Œç›´åˆ°æµè§ˆå™¨å…³é—­ã€‚</td></tr><tr><td align="left">5</td><td align="left"><strong>public String getName()</strong> è¯¥æ–¹æ³•è¿”å› cookie çš„åç§°ã€‚åç§°åœ¨åˆ›å»ºåä¸èƒ½æ”¹å˜ã€‚</td></tr><tr><td align="left">6</td><td align="left"><strong>public void setValue(String newValue)</strong> è¯¥æ–¹æ³•è®¾ç½®ä¸ cookie å…³è”çš„å€¼ã€‚</td></tr><tr><td align="left">7</td><td align="left"><strong>public String getValue()</strong> è¯¥æ–¹æ³•è·å–ä¸ cookie å…³è”çš„å€¼ã€‚</td></tr><tr><td align="left">8</td><td align="left"><strong>public void setPath(String uri)</strong> è¯¥æ–¹æ³•è®¾ç½® cookie é€‚ç”¨çš„è·¯å¾„ã€‚å¦‚æœæ‚¨ä¸æŒ‡å®šè·¯å¾„ï¼Œä¸å½“å‰é¡µé¢ç›¸åŒç›®å½•ä¸‹çš„ï¼ˆåŒ…æ‹¬å­ç›®å½•ä¸‹çš„ï¼‰æ‰€æœ‰ URL éƒ½ä¼šè¿”å› cookieã€‚</td></tr><tr><td align="left">9</td><td align="left"><strong>public String getPath()</strong> è¯¥æ–¹æ³•è·å– cookie é€‚ç”¨çš„è·¯å¾„ã€‚</td></tr><tr><td align="left">10</td><td align="left"><strong>public void setSecure(boolean flag)</strong> è¯¥æ–¹æ³•è®¾ç½®å¸ƒå°”å€¼ï¼Œè¡¨ç¤º cookie æ˜¯å¦åº”è¯¥åªåœ¨åŠ å¯†çš„ï¼ˆå³ SSLï¼‰è¿æ¥ä¸Šå‘é€ã€‚</td></tr><tr><td align="left">11</td><td align="left"><strong>public void setComment(String purpose)</strong> è®¾ç½®cookieçš„æ³¨é‡Šã€‚è¯¥æ³¨é‡Šåœ¨æµè§ˆå™¨å‘ç”¨æˆ·å‘ˆç° cookie æ—¶éå¸¸æœ‰ç”¨ã€‚</td></tr><tr><td align="left">12</td><td align="left"><strong>public String getComment()</strong> è·å– cookie çš„æ³¨é‡Šï¼Œå¦‚æœ cookie æ²¡æœ‰æ³¨é‡Šåˆ™è¿”å› nullã€‚</td></tr></tbody></table><p>é€šè¿‡ Servlet è®¾ç½® Cookie çš„æ­¥éª¤ï¼š</p><h5 id="1-8-1ã€åˆ›å»ºä¸€ä¸ª-Cookie-å¯¹è±¡ï¼š"><a href="#1-8-1ã€åˆ›å»ºä¸€ä¸ª-Cookie-å¯¹è±¡ï¼š" class="headerlink" title="1.8.1ã€åˆ›å»ºä¸€ä¸ª Cookie å¯¹è±¡ï¼š"></a><strong>1.8.1ã€åˆ›å»ºä¸€ä¸ª Cookie å¯¹è±¡ï¼š</strong></h5><p>æ‚¨å¯ä»¥è°ƒç”¨å¸¦æœ‰ cookie åç§°å’Œ cookie å€¼çš„ Cookie æ„é€ å‡½æ•°ï¼Œcookie åç§°å’Œ cookie å€¼éƒ½æ˜¯å­—ç¬¦ä¸²ã€‚</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">Cookie cookie</span> = new Cookie(<span class="hljs-string">&quot;key&quot;</span>,<span class="hljs-string">&quot;value&quot;</span>);<br></code></pre></td></tr></table></figure><p>è¯·è®°ä½ï¼Œæ— è®ºæ˜¯åå­—è¿˜æ˜¯å€¼ï¼Œéƒ½ä¸åº”è¯¥åŒ…å«ç©ºæ ¼æˆ–ä»¥ä¸‹ä»»ä½•å­—ç¬¦ï¼š</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c">[ ] ( ) = , <span class="hljs-string">&quot; / ? @ : ;</span><br></code></pre></td></tr></table></figure><h5 id="1-8-2ã€-è®¾ç½®æœ€å¤§ç”Ÿå­˜å‘¨æœŸï¼š"><a href="#1-8-2ã€-è®¾ç½®æœ€å¤§ç”Ÿå­˜å‘¨æœŸï¼š" class="headerlink" title="1.8.2ã€ è®¾ç½®æœ€å¤§ç”Ÿå­˜å‘¨æœŸï¼š"></a><strong>1.8.2ã€ è®¾ç½®æœ€å¤§ç”Ÿå­˜å‘¨æœŸï¼š</strong></h5><p>æ‚¨å¯ä»¥ä½¿ç”¨ setMaxAge æ–¹æ³•æ¥æŒ‡å®š cookie èƒ½å¤Ÿä¿æŒæœ‰æ•ˆçš„æ—¶é—´ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ã€‚ä¸‹é¢å°†è®¾ç½®ä¸€ä¸ªæœ€é•¿æœ‰æ•ˆæœŸä¸º 24 å°æ—¶çš„ cookieã€‚</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">cookie</span>.setMaxAge(<span class="hljs-number">60</span>*<span class="hljs-number">60</span>*<span class="hljs-number">24</span>); <br></code></pre></td></tr></table></figure><h5 id="1-8-3ã€-å‘é€-Cookie-åˆ°-HTTP-å“åº”å¤´ï¼š"><a href="#1-8-3ã€-å‘é€-Cookie-åˆ°-HTTP-å“åº”å¤´ï¼š" class="headerlink" title="1.8.3ã€ å‘é€ Cookie åˆ° HTTP å“åº”å¤´ï¼š"></a><strong>1.8.3ã€ å‘é€ Cookie åˆ° HTTP å“åº”å¤´ï¼š</strong></h5><p>æ‚¨å¯ä»¥ä½¿ç”¨ <strong>response.addCookie</strong> æ¥æ·»åŠ  HTTP å“åº”å¤´ä¸­çš„ Cookieï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">response.add<span class="hljs-constructor">Cookie(<span class="hljs-params">cookie</span>)</span>;<br></code></pre></td></tr></table></figure><h5 id="1-8-4ã€è¦è¯»å–-Cookie"><a href="#1-8-4ã€è¦è¯»å–-Cookie" class="headerlink" title="1.8.4ã€è¦è¯»å– Cookie"></a><strong>1.8.4ã€è¦è¯»å– Cookie</strong></h5><p>æ‚¨éœ€è¦é€šè¿‡è°ƒç”¨ <em>HttpServletRequest</em> çš„ <strong>getCookies( )</strong> æ–¹æ³•åˆ›å»ºä¸€ä¸ª <em>javax.servlet.http.Cookie</em> å¯¹è±¡çš„æ•°ç»„ã€‚ç„¶åå¾ªç¯éå†æ•°ç»„ï¼Œå¹¶ä½¿ç”¨ getName() å’Œ getValue() æ–¹æ³•æ¥è®¿é—®æ¯ä¸ª cookie å’Œå…³è”çš„å€¼ã€‚</p><h5 id="1-8-5ã€åˆ é™¤Cookieï¼š"><a href="#1-8-5ã€åˆ é™¤Cookieï¼š" class="headerlink" title="1.8.5ã€åˆ é™¤Cookieï¼š"></a><strong>1.8.5ã€åˆ é™¤Cookieï¼š</strong></h5><p>1ã€è¯»å–ä¸€ä¸ªç°æœ‰çš„ cookieï¼›</p><p>2ã€ä½¿ç”¨ <strong>setMaxAge()</strong> æ–¹æ³•è®¾ç½® cookie çš„å¹´é¾„ä¸ºé›¶</p><p>3ã€æŠŠè¿™ä¸ª cookie æ·»åŠ åˆ°å“åº”å¤´ã€‚</p><h4 id="1-9ã€Servlet-Sessionè·Ÿè¸ª"><a href="#1-9ã€Servlet-Sessionè·Ÿè¸ª" class="headerlink" title="1.9ã€Servlet Sessionè·Ÿè¸ª"></a>1.9ã€Servlet Sessionè·Ÿè¸ª</h4><p>HTTP æ˜¯ä¸€ç§â€æ— çŠ¶æ€â€åè®®ï¼Œè¿™æ„å‘³ç€æ¯æ¬¡å®¢æˆ·ç«¯æ£€ç´¢ç½‘é¡µæ—¶ï¼Œå®¢æˆ·ç«¯æ‰“å¼€ä¸€ä¸ªå•ç‹¬çš„è¿æ¥åˆ° Web æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨ä¼šè‡ªåŠ¨ä¸ä¿ç•™ä¹‹å‰å®¢æˆ·ç«¯è¯·æ±‚çš„ä»»ä½•è®°å½•ã€‚</p><p>Servlet æä¾›äº† HttpSession æ¥å£ï¼Œè¯¥æ¥å£æä¾›äº†ä¸€ç§è·¨å¤šä¸ªé¡µé¢è¯·æ±‚æˆ–è®¿é—®ç½‘ç«™æ—¶è¯†åˆ«ç”¨æˆ·ä»¥åŠå­˜å‚¨æœ‰å…³ç”¨æˆ·ä¿¡æ¯çš„æ–¹å¼ã€‚</p><p>Servlet å®¹å™¨ä½¿ç”¨è¿™ä¸ªæ¥å£æ¥åˆ›å»ºä¸€ä¸ª HTTP å®¢æˆ·ç«¯å’Œ HTTP æœåŠ¡å™¨ä¹‹é—´çš„ session ä¼šè¯ã€‚ä¼šè¯æŒç»­ä¸€ä¸ªæŒ‡å®šçš„æ—¶é—´æ®µï¼Œè·¨å¤šä¸ªè¿æ¥æˆ–é¡µé¢è¯·æ±‚ã€‚</p><h5 id="1-9-1ã€Sessionå¯¹è±¡è·å–"><a href="#1-9-1ã€Sessionå¯¹è±¡è·å–" class="headerlink" title="1.9.1ã€Sessionå¯¹è±¡è·å–"></a>1.9.1ã€Sessionå¯¹è±¡è·å–</h5><p>é€šè¿‡è°ƒç”¨ HttpServletRequest çš„å…¬å…±æ–¹æ³• <strong>getSession()</strong> æ¥è·å– HttpSession å¯¹è±¡ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">HttpSession session = request.getSession()<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><p>æ³¨ï¼šä½ éœ€è¦åœ¨å‘å®¢æˆ·ç«¯å‘é€ä»»ä½•æ–‡æ¡£å†…å®¹ä¹‹å‰è°ƒç”¨ <em>request.getSession()<em>ã€‚</em></em>ï¼Ÿï¼Ÿï¼Ÿ**</p><h5 id="1-9-2ã€HttpSession-å¯¹è±¡ä¸­å¯ç”¨çš„å‡ ä¸ªé‡è¦çš„æ–¹æ³•"><a href="#1-9-2ã€HttpSession-å¯¹è±¡ä¸­å¯ç”¨çš„å‡ ä¸ªé‡è¦çš„æ–¹æ³•" class="headerlink" title="1.9.2ã€HttpSession å¯¹è±¡ä¸­å¯ç”¨çš„å‡ ä¸ªé‡è¦çš„æ–¹æ³•"></a>1.9.2ã€HttpSession å¯¹è±¡ä¸­å¯ç”¨çš„å‡ ä¸ªé‡è¦çš„æ–¹æ³•</h5><table><thead><tr><th align="left">åºå·</th><th align="left">æ–¹æ³• &amp; æè¿°</th></tr></thead><tbody><tr><td align="left">1</td><td align="left"><strong>public Object getAttribute(String name)</strong> è¯¥æ–¹æ³•è¿”å›åœ¨è¯¥ session ä¼šè¯ä¸­å…·æœ‰æŒ‡å®šåç§°çš„å¯¹è±¡ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šåç§°çš„å¯¹è±¡ï¼Œåˆ™è¿”å› nullã€‚</td></tr><tr><td align="left">2</td><td align="left"><strong>public Enumeration getAttributeNames()</strong> è¯¥æ–¹æ³•è¿”å› String å¯¹è±¡çš„æšä¸¾ï¼ŒString å¯¹è±¡åŒ…å«æ‰€æœ‰ç»‘å®šåˆ°è¯¥ session ä¼šè¯çš„å¯¹è±¡çš„åç§°ã€‚</td></tr><tr><td align="left">3</td><td align="left"><strong>public long getCreationTime()</strong> è¯¥æ–¹æ³•è¿”å›è¯¥ session ä¼šè¯è¢«åˆ›å»ºçš„æ—¶é—´ï¼Œè‡ªæ ¼æ—å°¼æ²»æ ‡å‡†æ—¶é—´ 1970 å¹´ 1 æœˆ 1 æ—¥åˆå¤œç®—èµ·ï¼Œä»¥æ¯«ç§’ä¸ºå•ä½ã€‚</td></tr><tr><td align="left">4</td><td align="left"><strong>public String getId()</strong> è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªåŒ…å«åˆ†é…ç»™è¯¥ session ä¼šè¯çš„å”¯ä¸€æ ‡è¯†ç¬¦çš„å­—ç¬¦ä¸²ã€‚</td></tr><tr><td align="left">5</td><td align="left"><strong>public long getLastAccessedTime()</strong> è¯¥æ–¹æ³•è¿”å›å®¢æˆ·ç«¯æœ€åä¸€æ¬¡å‘é€ä¸è¯¥ session ä¼šè¯ç›¸å…³çš„è¯·æ±‚çš„æ—¶é—´è‡ªæ ¼æ—å°¼æ²»æ ‡å‡†æ—¶é—´ 1970 å¹´ 1 æœˆ 1 æ—¥åˆå¤œç®—èµ·ï¼Œä»¥æ¯«ç§’ä¸ºå•ä½ã€‚</td></tr><tr><td align="left">6</td><td align="left"><strong>public int getMaxInactiveInterval()</strong> è¯¥æ–¹æ³•è¿”å› Servlet å®¹å™¨åœ¨å®¢æˆ·ç«¯è®¿é—®æ—¶ä¿æŒ session ä¼šè¯æ‰“å¼€çš„æœ€å¤§æ—¶é—´é—´éš”ï¼Œä»¥ç§’ä¸ºå•ä½ã€‚</td></tr><tr><td align="left">7</td><td align="left"><strong>public void invalidate()</strong> è¯¥æ–¹æ³•æŒ‡ç¤ºè¯¥ session ä¼šè¯æ— æ•ˆï¼Œå¹¶è§£é™¤ç»‘å®šåˆ°å®ƒä¸Šé¢çš„ä»»ä½•å¯¹è±¡ã€‚</td></tr><tr><td align="left">8</td><td align="left"><strong>public boolean isNew()</strong> å¦‚æœ<strong>å®¢æˆ·ç«¯è¿˜ä¸çŸ¥é“è¯¥ session ä¼šè¯</strong>ï¼Œæˆ–è€…å¦‚æœå®¢æˆ·é€‰æ‹©ä¸å‚å…¥è¯¥ session ä¼šè¯ï¼Œåˆ™è¯¥æ–¹æ³•è¿”å› trueã€‚</td></tr><tr><td align="left">9</td><td align="left"><strong>public void removeAttribute(String name)</strong> è¯¥æ–¹æ³•å°†ä»è¯¥ session ä¼šè¯ç§»é™¤æŒ‡å®šåç§°çš„å¯¹è±¡ã€‚</td></tr><tr><td align="left">10</td><td align="left"><strong>public void setAttribute(String name, Object value)</strong>  è¯¥æ–¹æ³•ä½¿ç”¨æŒ‡å®šçš„åç§°ç»‘å®šä¸€ä¸ªå¯¹è±¡åˆ°è¯¥ session ä¼šè¯ã€‚</td></tr><tr><td align="left">11</td><td align="left"><strong>public void setMaxInactiveInterval(int interval)</strong> è¯¥æ–¹æ³•åœ¨ Servlet å®¹å™¨æŒ‡ç¤ºè¯¥ session ä¼šè¯æ— æ•ˆä¹‹å‰ï¼ŒæŒ‡å®šå®¢æˆ·ç«¯è¯·æ±‚ä¹‹é—´çš„æ—¶é—´ï¼Œä»¥ç§’ä¸ºå•ä½ã€‚</td></tr></tbody></table><h5 id="1-9-3ã€åˆ é™¤Sessionä¼šè¯æ•°æ®"><a href="#1-9-3ã€åˆ é™¤Sessionä¼šè¯æ•°æ®" class="headerlink" title="1.9.3ã€åˆ é™¤Sessionä¼šè¯æ•°æ®"></a>1.9.3ã€åˆ é™¤Sessionä¼šè¯æ•°æ®</h5><p>å½“æ‚¨å®Œæˆäº†ä¸€ä¸ªç”¨æˆ·çš„ session ä¼šè¯æ•°æ®ï¼Œæ‚¨æœ‰ä»¥ä¸‹å‡ ç§é€‰æ‹©ï¼š</p><ul><li><strong>ç§»é™¤ä¸€ä¸ªç‰¹å®šçš„å±æ€§ï¼š</strong>æ‚¨å¯ä»¥è°ƒç”¨ <em>public void removeAttribute(String name)</em> æ–¹æ³•æ¥åˆ é™¤ä¸ç‰¹å®šçš„é”®ç›¸å…³è”çš„å€¼ã€‚</li><li><strong>åˆ é™¤æ•´ä¸ª session ä¼šè¯ï¼š</strong>æ‚¨å¯ä»¥è°ƒç”¨ <em>public void invalidate()</em> æ–¹æ³•æ¥ä¸¢å¼ƒæ•´ä¸ª session ä¼šè¯ã€‚</li><li><strong>è®¾ç½® session ä¼šè¯è¿‡æœŸæ—¶é—´ï¼š</strong>æ‚¨å¯ä»¥è°ƒç”¨ <em>public void setMaxInactiveInterval(int interval)</em> æ–¹æ³•æ¥å•ç‹¬è®¾ç½® session ä¼šè¯è¶…æ—¶ã€‚</li><li><strong>æ³¨é”€ç”¨æˆ·ï¼š</strong>å¦‚æœä½¿ç”¨çš„æ˜¯æ”¯æŒ servlet 2.4 çš„æœåŠ¡å™¨ï¼Œæ‚¨å¯ä»¥è°ƒç”¨ <strong>logout</strong> æ¥æ³¨é”€ Web æœåŠ¡å™¨çš„å®¢æˆ·ç«¯ï¼Œå¹¶æŠŠå±äºæ‰€æœ‰ç”¨æˆ·çš„æ‰€æœ‰ session ä¼šè¯è®¾ç½®ä¸ºæ— æ•ˆã€‚</li><li><strong>web.xml é…ç½®ï¼š</strong>å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ Tomcatï¼Œé™¤äº†ä¸Šè¿°æ–¹æ³•ï¼Œæ‚¨è¿˜å¯ä»¥åœ¨ web.xml æ–‡ä»¶ä¸­é…ç½® session ä¼šè¯è¶…æ—¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">session-config</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">session-timeout</span>&gt;</span>15<span class="hljs-tag">&lt;/<span class="hljs-name">session-timeout</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">session-config</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ä¸Šé¢å®ä¾‹ä¸­çš„è¶…æ—¶æ—¶é—´æ˜¯<strong>ä»¥åˆ†é’Ÿä¸ºå•ä½</strong>ï¼Œå°†è¦†ç›– Tomcat ä¸­é»˜è®¤çš„ 30 åˆ†é’Ÿè¶…æ—¶æ—¶é—´ã€‚</p><p>åœ¨ä¸€ä¸ª Servlet ä¸­çš„ getMaxInactiveInterval() æ–¹æ³•ä¼šè¿”å› session ä¼šè¯çš„è¶…æ—¶æ—¶é—´ï¼Œ<strong>ä»¥ç§’ä¸ºå•ä½</strong>ã€‚æ‰€ä»¥ï¼Œå¦‚æœåœ¨ web.xml ä¸­é…ç½® session ä¼šè¯è¶…æ—¶æ—¶é—´ä¸º 15 åˆ†é’Ÿï¼Œé‚£ä¹ˆ getMaxInactiveInterval() ä¼šè¿”å› 900ã€‚</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">@<span class="hljs-constructor">WebServlet(<span class="hljs-string">&quot;/SessionTrack&quot;</span>)</span><br>public <span class="hljs-keyword">class</span> SessionTrack extends HttpServlet &#123;<br>    <span class="hljs-keyword">private</span> static final long serialVersionUID = <span class="hljs-number">1L</span>;<br><br>    public void <span class="hljs-keyword">do</span><span class="hljs-constructor">Get(HttpServletRequest <span class="hljs-params">request</span>, HttpServletResponse <span class="hljs-params">response</span>)</span> throws ServletException, IOException<br>    &#123;<br>        <span class="hljs-comment">// å¦‚æœä¸å­˜åœ¨ session ä¼šè¯ï¼Œåˆ™åˆ›å»ºä¸€ä¸ª session å¯¹è±¡</span><br>        HttpSession session = request.get<span class="hljs-constructor">Session(<span class="hljs-params">true</span>)</span>;<br>        <span class="hljs-comment">// è·å– session åˆ›å»ºæ—¶é—´</span><br>        Date createTime = <span class="hljs-keyword">new</span> <span class="hljs-constructor">Date(<span class="hljs-params">session</span>.<span class="hljs-params">getCreationTime</span>()</span>);<br>        <span class="hljs-comment">// è·å–è¯¥ç½‘é¡µçš„æœ€åä¸€æ¬¡è®¿é—®æ—¶é—´</span><br>        Date lastAccessTime = <span class="hljs-keyword">new</span> <span class="hljs-constructor">Date(<span class="hljs-params">session</span>.<span class="hljs-params">getLastAccessedTime</span>()</span>);<br><br>        <span class="hljs-comment">//è®¾ç½®æ—¥æœŸè¾“å‡ºçš„æ ¼å¼  </span><br>        SimpleDateFormat df=<span class="hljs-keyword">new</span> <span class="hljs-constructor">SimpleDateFormat(<span class="hljs-string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>)</span>;<br><br>        String title = <span class="hljs-string">&quot;Servlet Session å®ä¾‹ - èœé¸Ÿæ•™ç¨‹&quot;</span>;<br>        Integer visitCount = <span class="hljs-keyword">new</span> <span class="hljs-constructor">Integer(0)</span>;<br>        String visitCountKey = <span class="hljs-keyword">new</span> <span class="hljs-constructor">String(<span class="hljs-string">&quot;visitCount&quot;</span>)</span>;<br>        String userIDKey = <span class="hljs-keyword">new</span> <span class="hljs-constructor">String(<span class="hljs-string">&quot;userID&quot;</span>)</span>;<br>        String userID = <span class="hljs-keyword">new</span> <span class="hljs-constructor">String(<span class="hljs-string">&quot;Runoob&quot;</span>)</span>;<br>        <span class="hljs-keyword">if</span>(session.get<span class="hljs-constructor">Attribute(<span class="hljs-params">visitCountKey</span>)</span><span class="hljs-operator"> == </span>null) &#123;<br>            session.set<span class="hljs-constructor">Attribute(<span class="hljs-params">visitCountKey</span>, <span class="hljs-params">new</span> Integer(0)</span>);<br>        &#125;<br><br><br>        <span class="hljs-comment">// æ£€æŸ¥ç½‘é¡µä¸Šæ˜¯å¦æœ‰æ–°çš„è®¿é—®è€…</span><br>        <span class="hljs-keyword">if</span> (session.is<span class="hljs-constructor">New()</span>)&#123;<br>            title = <span class="hljs-string">&quot;Servlet Session å®ä¾‹ - èœé¸Ÿæ•™ç¨‹&quot;</span>;<br>            session.set<span class="hljs-constructor">Attribute(<span class="hljs-params">userIDKey</span>, <span class="hljs-params">userID</span>)</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            visitCount = (Integer)session.get<span class="hljs-constructor">Attribute(<span class="hljs-params">visitCountKey</span>)</span>;<br>            visitCount = visitCount + <span class="hljs-number">1</span>;<br>            userID = (String)session.get<span class="hljs-constructor">Attribute(<span class="hljs-params">userIDKey</span>)</span>;<br>        &#125;<br>        session.set<span class="hljs-constructor">Attribute(<span class="hljs-params">visitCountKey</span>,  <span class="hljs-params">visitCount</span>)</span>;<br><br>        <span class="hljs-comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span><br>        response.set<span class="hljs-constructor">ContentType(<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span>)</span>;<br>        PrintWriter out = response.get<span class="hljs-constructor">Writer()</span>;<br><br>        String docType = <span class="hljs-string">&quot;&lt;!DOCTYPE html&gt;\n&quot;</span>;<br>        out.println(docType +<br>                <span class="hljs-string">&quot;&lt;html&gt;\n&quot;</span> +<br>                <span class="hljs-string">&quot;&lt;head&gt;&lt;title&gt;&quot;</span> + title + <span class="hljs-string">&quot;&lt;/title&gt;&lt;/head&gt;\n&quot;</span> +<br>                <span class="hljs-string">&quot;&lt;body bgcolor=\&quot;#f0f0f0\&quot;&gt;\n&quot;</span> +<br>                <span class="hljs-string">&quot;&lt;h1 align=\&quot;center\&quot;&gt;&quot;</span> + title + <span class="hljs-string">&quot;&lt;/h1&gt;\n&quot;</span> +<br>                <span class="hljs-string">&quot;&lt;h2 align=\&quot;center\&quot;&gt;Session ä¿¡æ¯&lt;/h2&gt;\n&quot;</span> +<br>                <span class="hljs-string">&quot;&lt;table border=\&quot;1\&quot; align=\&quot;center\&quot;&gt;\n&quot;</span> +<br>                <span class="hljs-string">&quot;&lt;tr bgcolor=\&quot;#949494\&quot;&gt;\n&quot;</span> +<br>                <span class="hljs-string">&quot;  &lt;th&gt;Session ä¿¡æ¯&lt;/th&gt;&lt;th&gt;å€¼&lt;/th&gt;&lt;/tr&gt;\n&quot;</span> +<br>                <span class="hljs-string">&quot;&lt;tr&gt;\n&quot;</span> +<br>                <span class="hljs-string">&quot;  &lt;td&gt;id&lt;/td&gt;\n&quot;</span> +<br>                <span class="hljs-string">&quot;  &lt;td&gt;&quot;</span> + session.get<span class="hljs-constructor">Id()</span> + <span class="hljs-string">&quot;&lt;/td&gt;&lt;/tr&gt;\n&quot;</span> +<br>                <span class="hljs-string">&quot;&lt;tr&gt;\n&quot;</span> +<br>                <span class="hljs-string">&quot;  &lt;td&gt;åˆ›å»ºæ—¶é—´&lt;/td&gt;\n&quot;</span> +<br>                <span class="hljs-string">&quot;  &lt;td&gt;&quot;</span> +  df.format(createTime) +<br>                <span class="hljs-string">&quot;  &lt;/td&gt;&lt;/tr&gt;\n&quot;</span> +<br>                <span class="hljs-string">&quot;&lt;tr&gt;\n&quot;</span> +<br>                <span class="hljs-string">&quot;  &lt;td&gt;æœ€åè®¿é—®æ—¶é—´&lt;/td&gt;\n&quot;</span> +<br>                <span class="hljs-string">&quot;  &lt;td&gt;&quot;</span> + df.format(lastAccessTime) +<br>                <span class="hljs-string">&quot;  &lt;/td&gt;&lt;/tr&gt;\n&quot;</span> +<br>                <span class="hljs-string">&quot;&lt;tr&gt;\n&quot;</span> +<br>                <span class="hljs-string">&quot;  &lt;td&gt;ç”¨æˆ· ID&lt;/td&gt;\n&quot;</span> +<br>                <span class="hljs-string">&quot;  &lt;td&gt;&quot;</span> + userID +<br>                <span class="hljs-string">&quot;  &lt;/td&gt;&lt;/tr&gt;\n&quot;</span> +<br>                <span class="hljs-string">&quot;&lt;tr&gt;\n&quot;</span> +<br>                <span class="hljs-string">&quot;  &lt;td&gt;è®¿é—®ç»Ÿè®¡ï¼š&lt;/td&gt;\n&quot;</span> +<br>                <span class="hljs-string">&quot;  &lt;td&gt;&quot;</span> + visitCount + <span class="hljs-string">&quot;&lt;/td&gt;&lt;/tr&gt;\n&quot;</span> +<br>                <span class="hljs-string">&quot;&lt;/table&gt;\n&quot;</span> +<br>                <span class="hljs-string">&quot;&lt;/body&gt;&lt;/html&gt;&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="1-10ã€Servletæ•°æ®åº“è®¿é—®"><a href="#1-10ã€Servletæ•°æ®åº“è®¿é—®" class="headerlink" title="1.10ã€Servletæ•°æ®åº“è®¿é—®"></a>1.10ã€Servletæ•°æ®åº“è®¿é—®</h4><p>åœ¨ java é¡¹ç›®ä¸­ï¼Œåªéœ€è¦åœ¨ Eclipse ä¸­å¼•å…¥ mysql-connector-java-5.1.39-bin.jar å°±å¯ä»¥è¿è¡Œjavaé¡¹ç›®ã€‚ ä½†æ˜¯åœ¨ Eclipse web é¡¹ç›®ä¸­ï¼Œå½“æ‰§è¡Œ Class.forName(â€œcom.mysql.jdbc.Driverâ€);æ—¶ä¸ä¼šå»æŸ¥æ‰¾é©±åŠ¨çš„ã€‚æ‰€ä»¥æœ¬å®ä¾‹ä¸­æˆ‘ä»¬éœ€è¦æŠŠ mysql-connector-java-5.1.39-bin.jar æ‹·è´åˆ°<code> tomcatä¸‹libç›®å½•</code>ã€‚</p><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><code class="hljs processing">@WebServlet(<span class="hljs-string">&quot;/DatabaseAccess&quot;</span>)<br><span class="hljs-keyword">public</span> class DatabaseAccess extends HttpServlet &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">long</span> serialVersionUID = <span class="hljs-number">1</span>L;<br>    <span class="hljs-comment">// JDBC é©±åŠ¨ååŠæ•°æ®åº“ URL</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">String</span> JDBC_DRIVER = <span class="hljs-string">&quot;com.mysql.jdbc.Driver&quot;</span>;  <br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">String</span> DB_URL = <span class="hljs-string">&quot;jdbc:mysql://localhost:3306/Train&quot;</span>;<br>    <br>    <span class="hljs-comment">// æ•°æ®åº“çš„ç”¨æˆ·åä¸å¯†ç ï¼Œéœ€è¦æ ¹æ®è‡ªå·±çš„è®¾ç½®</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">String</span> USER = <span class="hljs-string">&quot;root&quot;</span>;<br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">String</span> PASS = <span class="hljs-string">&quot;123456&quot;</span>; <br><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> doGet(HttpServletRequest request, HttpServletResponse response) <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        Connection conn = <span class="hljs-keyword">null</span>;<br>        Statement stmt = <span class="hljs-keyword">null</span>;<br>        <span class="hljs-comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span><br>        response.setContentType(<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span>);<br>        PrintWriter out = response.getWriter();<br>        <span class="hljs-keyword">String</span> title = <span class="hljs-string">&quot;Servlet Mysql æµ‹è¯•&quot;</span>;<br>        <span class="hljs-keyword">String</span> docType = <span class="hljs-string">&quot;&lt;!DOCTYPE html&gt;\n&quot;</span>;<br>        out.<span class="hljs-built_in">println</span>(docType +<br>        <span class="hljs-string">&quot;&lt;html&gt;\n&quot;</span> +<br>        <span class="hljs-string">&quot;&lt;head&gt;&lt;title&gt;&quot;</span> + title + <span class="hljs-string">&quot;&lt;/title&gt;&lt;/head&gt;\n&quot;</span> +<br>        <span class="hljs-string">&quot;&lt;body bgcolor=\&quot;#f0f0f0\&quot;&gt;\n&quot;</span> +<br>        <span class="hljs-string">&quot;&lt;h1 align=\&quot;center\&quot;&gt;&quot;</span> + title + <span class="hljs-string">&quot;&lt;/h1&gt;\n&quot;</span>);<br>        <span class="hljs-keyword">try</span>&#123;<br>            <span class="hljs-comment">// æ³¨å†Œ JDBC é©±åŠ¨å™¨</span><br>            Class.forName(<span class="hljs-string">&quot;com.mysql.jdbc.Driver&quot;</span>);<br>            <br>            <span class="hljs-comment">// æ‰“å¼€ä¸€ä¸ªè¿æ¥</span><br>            conn = DriverManager.getConnection(DB_URL,USER,PASS);<br><br>            <span class="hljs-comment">// æ‰§è¡Œ SQL æŸ¥è¯¢</span><br>            stmt = conn.createStatement();<br>            <span class="hljs-keyword">String</span> sql;<br>            sql = <span class="hljs-string">&quot;SELECT id, name, url FROM websites&quot;</span>;<br>            ResultSet rs = stmt.executeQuery(sql);<br><br>            <span class="hljs-comment">// å±•å¼€ç»“æœé›†æ•°æ®åº“</span><br>            <span class="hljs-keyword">while</span>(rs.next())&#123;<br>                <span class="hljs-comment">// é€šè¿‡å­—æ®µæ£€ç´¢</span><br>                <span class="hljs-built_in">int</span> id  = rs.getInt(<span class="hljs-string">&quot;id&quot;</span>);<br>                <span class="hljs-keyword">String</span> name = rs.getString(<span class="hljs-string">&quot;name&quot;</span>);<br>                <span class="hljs-keyword">String</span> url = rs.getString(<span class="hljs-string">&quot;url&quot;</span>);<br>    <br>                <span class="hljs-comment">// è¾“å‡ºæ•°æ®</span><br>                out.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;ID: &quot;</span> + id);<br>                out.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;, ç«™ç‚¹åç§°: &quot;</span> + name);<br>                out.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;, ç«™ç‚¹ URL: &quot;</span> + url);<br>                out.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;&lt;br /&gt;&quot;</span>);<br>            &#125;<br>            out.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;&lt;/body&gt;&lt;/html&gt;&quot;</span>);<br><br>            <span class="hljs-comment">// å®Œæˆåå…³é—­</span><br>            rs.close();<br>            stmt.close();<br>            conn.close();<br>        &#125; <span class="hljs-keyword">catch</span>(SQLException se) &#123;<br>            <span class="hljs-comment">// å¤„ç† JDBC é”™è¯¯</span><br>            se.printStackTrace();<br>        &#125; <span class="hljs-keyword">catch</span>(Exception e) &#123;<br>            <span class="hljs-comment">// å¤„ç† Class.forName é”™è¯¯</span><br>            e.printStackTrace();<br>        &#125;<span class="hljs-keyword">finally</span>&#123;<br>            <span class="hljs-comment">// æœ€åæ˜¯ç”¨äºå…³é—­èµ„æºçš„å—</span><br>            <span class="hljs-keyword">try</span>&#123;<br>                <span class="hljs-keyword">if</span>(stmt!=<span class="hljs-keyword">null</span>)<br>                stmt.close();<br>            &#125;<span class="hljs-keyword">catch</span>(SQLException se2)&#123;<br>            &#125;<br>            <span class="hljs-keyword">try</span>&#123;<br>                <span class="hljs-keyword">if</span>(conn!=<span class="hljs-keyword">null</span>)<br>                conn.close();<br>            &#125;<span class="hljs-keyword">catch</span>(SQLException se)&#123;<br>                se.printStackTrace();<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="1-11ã€Servletæ–‡ä»¶ä¸Šä¼ "><a href="#1-11ã€Servletæ–‡ä»¶ä¸Šä¼ " class="headerlink" title="1.11ã€Servletæ–‡ä»¶ä¸Šä¼ "></a>1.11ã€Servletæ–‡ä»¶ä¸Šä¼ </h4><p>Servlet å¯ä»¥ä¸ HTML form æ ‡ç­¾ä¸€èµ·ä½¿ç”¨ï¼Œæ¥å…è®¸ç”¨æˆ·ä¸Šä¼ æ–‡ä»¶åˆ°æœåŠ¡å™¨ã€‚ä¸Šä¼ çš„æ–‡ä»¶å¯ä»¥æ˜¯æ–‡æœ¬æ–‡ä»¶æˆ–å›¾åƒæ–‡ä»¶æˆ–ä»»ä½•æ–‡æ¡£ã€‚</p><p>éœ€è¦å¼•å…¥çš„ jar æ–‡ä»¶ï¼šcommons-fileupload-1.3.2ã€commons-io-2.5.jarã€‚</p><p><strong>æ³¨æ„ï¼š</strong>Servlet3.0 å·²ç»å†…ç½®äº†æ–‡ä»¶ä¸Šä¼ è¿™ä¸€ç‰¹æ€§ï¼Œå¼€å‘è€…ä¸å†éœ€è¦å°† Commons FileUpload ç»„ä»¶å¯¼å…¥åˆ°å·¥ç¨‹ä¸­å»ã€‚</p><p>æ¡ˆä¾‹ï¼š</p><h5 id="ç¬¬ä¸€æ­¥åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ è¡¨å•"><a href="#ç¬¬ä¸€æ­¥åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ è¡¨å•" class="headerlink" title="ç¬¬ä¸€æ­¥åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ è¡¨å•"></a>ç¬¬ä¸€æ­¥åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ è¡¨å•</h5><ul><li>è¡¨å• <strong>method</strong> å±æ€§åº”è¯¥è®¾ç½®ä¸º <strong>POST</strong> æ–¹æ³•ï¼Œä¸èƒ½ä½¿ç”¨ GET æ–¹æ³•ã€‚</li><li>è¡¨å• <strong>enctype</strong> å±æ€§åº”è¯¥è®¾ç½®ä¸º <strong>multipart/form-data</strong>.</li><li>è¡¨å• <strong>action</strong> å±æ€§åº”è¯¥è®¾ç½®ä¸ºåœ¨åç«¯æœåŠ¡å™¨ä¸Šå¤„ç†æ–‡ä»¶ä¸Šä¼ çš„ Servlet æ–‡ä»¶ã€‚ä¸‹é¢çš„å®ä¾‹ä½¿ç”¨äº† <strong>UploadServlet</strong> Servlet æ¥ä¸Šä¼ æ–‡ä»¶ã€‚</li><li>ä¸Šä¼ å•ä¸ªæ–‡ä»¶ï¼Œæ‚¨åº”è¯¥ä½¿ç”¨å•ä¸ªå¸¦æœ‰å±æ€§ type=â€fileâ€ çš„ &lt;input â€¦/&gt; æ ‡ç­¾ã€‚ä¸ºäº†å…è®¸å¤šä¸ªæ–‡ä»¶ä¸Šä¼ ï¼Œè¯·åŒ…å«å¤šä¸ª name å±æ€§å€¼ä¸åŒçš„ input æ ‡ç­¾ã€‚è¾“å…¥æ ‡ç­¾å…·æœ‰ä¸åŒçš„åç§°å±æ€§çš„å€¼ã€‚æµè§ˆå™¨ä¼šä¸ºæ¯ä¸ª input æ ‡ç­¾å…³è”ä¸€ä¸ªæµè§ˆæŒ‰é’®ã€‚</li></ul><p>upload.jspä»£ç </p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs stata">&lt;<span class="hljs-keyword">form</span> method=<span class="hljs-string">&quot;post&quot;</span> action=<span class="hljs-string">&quot;/TomcatTest/UploadServlet&quot;</span> enctype=<span class="hljs-string">&quot;multipart/form-data&quot;</span>&gt;<br>    é€‰æ‹©ä¸€ä¸ªæ–‡ä»¶:<br>    &lt;<span class="hljs-keyword">input</span> <span class="hljs-keyword">type</span>=<span class="hljs-string">&quot;file&quot;</span> name=<span class="hljs-string">&quot;uploadFile&quot;</span> /&gt;<br>    &lt;<span class="hljs-keyword">br</span>/&gt;&lt;<span class="hljs-keyword">br</span>/&gt;<br>    &lt;<span class="hljs-keyword">input</span> <span class="hljs-keyword">type</span>=<span class="hljs-string">&quot;submit&quot;</span> value=<span class="hljs-string">&quot;ä¸Šä¼ &quot;</span> /&gt;<br>&lt;/<span class="hljs-keyword">form</span>&gt;<br></code></pre></td></tr></table></figure><h5 id="ç¬¬äºŒæ­¥ç¼–å†™åå°Servlet"><a href="#ç¬¬äºŒæ­¥ç¼–å†™åå°Servlet" class="headerlink" title="ç¬¬äºŒæ­¥ç¼–å†™åå°Servlet"></a>ç¬¬äºŒæ­¥ç¼–å†™åå°Servlet</h5><p>ä»¥ä¸‹æ˜¯ UploadServlet çš„æºä»£ç ï¼ŒåŒäºå¤„ç†æ–‡ä»¶ä¸Šä¼ ï¼Œåœ¨è¿™ä¹‹å‰æˆ‘ä»¬å…ˆç¡®ä¿ä¾èµ–åŒ…å·²ç»å¼•å…¥åˆ°é¡¹ç›®çš„ WEB-INF/lib ç›®å½•ä¸‹ï¼š </p><ul><li>ä¸‹é¢çš„å®ä¾‹ä¾èµ–äº FileUploadï¼Œæ‰€ä»¥ä¸€å®šè¦ç¡®ä¿åœ¨æ‚¨çš„ classpath ä¸­æœ‰æœ€æ–°ç‰ˆæœ¬çš„ <strong>commons-fileupload.x.x.jar</strong> æ–‡ä»¶ã€‚å¯ä»¥ä» <a href="http://commons.apache.org/proper/commons-fileupload/">http://commons.apache.org/proper/commons-fileupload/</a> ä¸‹è½½ã€‚</li><li>FileUpload ä¾èµ–äº Commons IOï¼Œæ‰€ä»¥ä¸€å®šè¦ç¡®ä¿åœ¨æ‚¨çš„ classpath ä¸­æœ‰æœ€æ–°ç‰ˆæœ¬çš„ <strong>commons-io-x.x.jar</strong> æ–‡ä»¶ã€‚å¯ä»¥ä» <a href="http://commons.apache.org/proper/commons-io/">http://commons.apache.org/proper/commons-io/</a> ä¸‹è½½ã€‚</li></ul><p>ä½ å¯ä»¥ç›´æ¥ä¸‹è½½æœ¬ç«™æä¾›çš„ä¸¤ä¸ªä¾èµ–åŒ…ï¼š</p><ul><li><a href="http://static.runoob.com/download/commons-fileupload-1.3.2.jar">commons-fileupload-1.3.2.jar</a></li><li><a href="http://static.runoob.com/download/commons-io-2.5.jar">commons-io-2.5.jar</a></li></ul><p>UploadServlet çš„æºä»£ç  å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><code class="hljs gradle">@WebServlet(<span class="hljs-string">&quot;/UploadServlet&quot;</span>)<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> UploadServlet <span class="hljs-keyword">extends</span> HttpServlet &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">long</span> serialVersionUID = <span class="hljs-number">1</span>L;<br>     <br>    <span class="hljs-comment">// ä¸Šä¼ æ–‡ä»¶å­˜å‚¨ç›®å½•</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String UPLOAD_DIRECTORY = <span class="hljs-string">&quot;upload&quot;</span>;<br> <br>    <span class="hljs-comment">// ä¸Šä¼ é…ç½®</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> MEMORY_THRESHOLD   = <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">3</span>;  <span class="hljs-comment">// 3MB</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> MAX_FILE_SIZE      = <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">40</span>; <span class="hljs-comment">// 40MB</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> MAX_REQUEST_SIZE   = <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">50</span>; <span class="hljs-comment">// 50MB</span><br> <br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ä¸Šä¼ æ•°æ®åŠä¿å­˜æ–‡ä»¶</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> doPost(HttpServletRequest request,<br>        HttpServletResponse response) <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        <span class="hljs-comment">// æ£€æµ‹æ˜¯å¦ä¸ºå¤šåª’ä½“ä¸Šä¼ </span><br>        <span class="hljs-keyword">if</span> (!ServletFileUpload.isMultipartContent(request)) &#123;<br>            <span class="hljs-comment">// å¦‚æœä¸æ˜¯åˆ™åœæ­¢</span><br>            PrintWriter writer = response.getWriter();<br>            writer.<span class="hljs-keyword">println</span>(<span class="hljs-string">&quot;Error: è¡¨å•å¿…é¡»åŒ…å« enctype=multipart/form-data&quot;</span>);<br>            writer.flush();<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br> <br>        <span class="hljs-comment">// é…ç½®ä¸Šä¼ å‚æ•°</span><br>        DiskFileItemFactory factory = <span class="hljs-keyword">new</span> DiskFileItemFactory();<br>        <span class="hljs-comment">// è®¾ç½®å†…å­˜ä¸´ç•Œå€¼ - è¶…è¿‡åå°†äº§ç”Ÿä¸´æ—¶æ–‡ä»¶å¹¶å­˜å‚¨äºä¸´æ—¶ç›®å½•ä¸­</span><br>        factory.setSizeThreshold(MEMORY_THRESHOLD);<br>        <span class="hljs-comment">// è®¾ç½®ä¸´æ—¶å­˜å‚¨ç›®å½•</span><br>        factory.setRepository(<span class="hljs-keyword">new</span> <span class="hljs-keyword">File</span>(System.getProperty(<span class="hljs-string">&quot;java.io.tmpdir&quot;</span>)));<br> <br>        ServletFileUpload upload = <span class="hljs-keyword">new</span> ServletFileUpload(factory);<br>         <br>        <span class="hljs-comment">// è®¾ç½®æœ€å¤§æ–‡ä»¶ä¸Šä¼ å€¼</span><br>        upload.setFileSizeMax(MAX_FILE_SIZE);<br>         <br>        <span class="hljs-comment">// è®¾ç½®æœ€å¤§è¯·æ±‚å€¼ (åŒ…å«æ–‡ä»¶å’Œè¡¨å•æ•°æ®)</span><br>        upload.setSizeMax(MAX_REQUEST_SIZE);<br><br>        <span class="hljs-comment">// ä¸­æ–‡å¤„ç†</span><br>        upload.setHeaderEncoding(<span class="hljs-string">&quot;UTF-8&quot;</span>); <br><br>        <span class="hljs-comment">// æ„é€ ä¸´æ—¶è·¯å¾„æ¥å­˜å‚¨ä¸Šä¼ çš„æ–‡ä»¶</span><br>        <span class="hljs-comment">// è¿™ä¸ªè·¯å¾„ç›¸å¯¹å½“å‰åº”ç”¨çš„ç›®å½•</span><br>        String uploadPath = request.getServletContext().getRealPath(<span class="hljs-string">&quot;./&quot;</span>) + <span class="hljs-keyword">File</span>.separator + UPLOAD_DIRECTORY;<br>       <br>         <br>        <span class="hljs-comment">// å¦‚æœç›®å½•ä¸å­˜åœ¨åˆ™åˆ›å»º</span><br>        <span class="hljs-keyword">File</span> uploadDir = <span class="hljs-keyword">new</span> <span class="hljs-keyword">File</span>(uploadPath);<br>        <span class="hljs-keyword">if</span> (!uploadDir.exists()) &#123;<br>            uploadDir.mkdir();<br>        &#125;<br> <br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">// è§£æè¯·æ±‚çš„å†…å®¹æå–æ–‡ä»¶æ•°æ®</span><br>            @SuppressWarnings(<span class="hljs-string">&quot;unchecked&quot;</span>)<br>            List&lt;FileItem&gt; formItems = upload.parseRequest(request);<br> <br>            <span class="hljs-keyword">if</span> (formItems != <span class="hljs-keyword">null</span> &amp;&amp; formItems.<span class="hljs-keyword">size</span>() &gt; <span class="hljs-number">0</span>) &#123;<br>                <span class="hljs-comment">// è¿­ä»£è¡¨å•æ•°æ®</span><br>                <span class="hljs-keyword">for</span> (FileItem item : formItems) &#123;<br>                    <span class="hljs-comment">// å¤„ç†ä¸åœ¨è¡¨å•ä¸­çš„å­—æ®µ</span><br>                    <span class="hljs-keyword">if</span> (!item.isFormField()) &#123;<br>                        String fileName = <span class="hljs-keyword">new</span> <span class="hljs-keyword">File</span>(item.getName()).getName();<br>                        String filePath = uploadPath + <span class="hljs-keyword">File</span>.separator + fileName;<br>                        <span class="hljs-keyword">File</span> storeFile = <span class="hljs-keyword">new</span> <span class="hljs-keyword">File</span>(filePath);<br>                        <span class="hljs-comment">// åœ¨æ§åˆ¶å°è¾“å‡ºæ–‡ä»¶çš„ä¸Šä¼ è·¯å¾„</span><br>                        System.out.<span class="hljs-keyword">println</span>(filePath);<br>                        <span class="hljs-comment">// ä¿å­˜æ–‡ä»¶åˆ°ç¡¬ç›˜</span><br>                        item.<span class="hljs-keyword">write</span>(storeFile);<br>                        request.setAttribute(<span class="hljs-string">&quot;message&quot;</span>,<br>                            <span class="hljs-string">&quot;æ–‡ä»¶ä¸Šä¼ æˆåŠŸ!&quot;</span>);<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (Exception ex) &#123;<br>            request.setAttribute(<span class="hljs-string">&quot;message&quot;</span>,<br>                    <span class="hljs-string">&quot;é”™è¯¯ä¿¡æ¯: &quot;</span> + ex.getMessage());<br>        &#125;<br>        <span class="hljs-comment">// è·³è½¬åˆ° message.jsp</span><br>        request.getServletContext().getRequestDispatcher(<span class="hljs-string">&quot;/message.jsp&quot;</span>).forward(<br>                request, response);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>message.jsp æ–‡ä»¶ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight erb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs erb"><span class="xml">&lt;%</span><span class="ruby">@ page language=<span class="hljs-string">&quot;java&quot;</span> contentType=<span class="hljs-string">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class="ruby">    pageEncoding=<span class="hljs-string">&quot;UTF-8&quot;</span></span><span class="xml">%&gt;</span><br><span class="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span> <span class="hljs-meta-keyword">PUBLIC</span> <span class="hljs-meta-string">&quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;</span></span></span><br><span class="xml">    &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;</span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;Content-Type&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;text/html; charset=UTF-8&quot;</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>æ–‡ä»¶ä¸Šä¼ ç»“æœ<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">center</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>$&#123;message&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">center</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h4 id="1-12ã€Servletå¤„ç†æ—¶é—´"><a href="#1-12ã€Servletå¤„ç†æ—¶é—´" class="headerlink" title="1.12ã€Servletå¤„ç†æ—¶é—´"></a>1.12ã€Servletå¤„ç†æ—¶é—´</h4><p>ä½¿ç”¨ Servlet çš„æœ€é‡è¦çš„ä¼˜åŠ¿ä¹‹ä¸€æ˜¯ï¼Œå¯ä»¥ä½¿ç”¨æ ¸å¿ƒ Java ä¸­çš„å¤§å¤šæ•°å¯ç”¨çš„æ–¹æ³•ï¼Œ Java æä¾›çš„ <strong>java.util</strong> åŒ…ä¸­çš„ <strong>Date</strong> ç±»ï¼Œè¿™ä¸ªç±»å°è£…äº†å½“å‰çš„æ—¥æœŸå’Œæ—¶é—´ã€‚</p><h5 id="1-12-1ã€Dateç±»"><a href="#1-12-1ã€Dateç±»" class="headerlink" title="1.12.1ã€Dateç±»"></a>1.12.1ã€Dateç±»</h5><p>Date ç±»æ”¯æŒä¸¤ä¸ªæ„é€ å‡½æ•°ã€‚ç¬¬ä¸€ä¸ªæ„é€ å‡½æ•°åˆå§‹åŒ–å½“å‰æ—¥æœŸå’Œæ—¶é—´çš„å¯¹è±¡ã€‚</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">Date</span><span class="hljs-params">()</span></span><br></code></pre></td></tr></table></figure><p>ä¸‹é¢çš„æ„é€ å‡½æ•°æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°ç­‰äº 1970 å¹´ 1 æœˆ 1 æ—¥åˆå¤œä»¥æ¥ç»è¿‡çš„æ¯«ç§’æ•°ã€‚</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-constructor">Date(<span class="hljs-params">long</span> <span class="hljs-params">millisec</span>)</span><br></code></pre></td></tr></table></figure><p>ä¸€æ—¦æ‚¨æœ‰ä¸€ä¸ªå¯ç”¨çš„ Date å¯¹è±¡ï¼Œæ‚¨å¯ä»¥è°ƒç”¨ä¸‹åˆ—ä»»æ„æ”¯æŒçš„æ–¹æ³•æ¥ä½¿ç”¨æ—¥æœŸï¼š</p><h5 id="1-12-2ã€Date-å¯¹è±¡çš„æ–¹æ³•"><a href="#1-12-2ã€Date-å¯¹è±¡çš„æ–¹æ³•" class="headerlink" title="1.12.2ã€Date å¯¹è±¡çš„æ–¹æ³•"></a>1.12.2ã€Date å¯¹è±¡çš„æ–¹æ³•</h5><table><thead><tr><th align="left">åºå·</th><th align="left">æ–¹æ³• &amp; æè¿°</th></tr></thead><tbody><tr><td align="left">1</td><td align="left"><strong>boolean after(Date date)</strong> å¦‚æœè°ƒç”¨çš„ Date å¯¹è±¡ä¸­åŒ…å«çš„æ—¥æœŸåœ¨ date æŒ‡å®šçš„æ—¥æœŸä¹‹åï¼Œåˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚</td></tr><tr><td align="left">2</td><td align="left"><strong>boolean before(Date date)</strong> å¦‚æœè°ƒç”¨çš„ Date å¯¹è±¡ä¸­åŒ…å«çš„æ—¥æœŸåœ¨ date æŒ‡å®šçš„æ—¥æœŸä¹‹å‰ï¼Œåˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚</td></tr><tr><td align="left">3</td><td align="left"><strong>Object clone( )</strong> é‡å¤è°ƒç”¨ Date å¯¹è±¡ã€‚</td></tr><tr><td align="left">4</td><td align="left"><strong>int compareTo(Date date)</strong> æŠŠè°ƒç”¨å¯¹è±¡çš„å€¼ä¸ date çš„å€¼è¿›è¡Œæ¯”è¾ƒã€‚å¦‚æœä¸¤ä¸ªå€¼æ˜¯ç›¸ç­‰çš„ï¼Œåˆ™è¿”å› 0ã€‚å¦‚æœè°ƒç”¨å¯¹è±¡åœ¨ date ä¹‹å‰ï¼Œåˆ™è¿”å›ä¸€ä¸ªè´Ÿå€¼ã€‚å¦‚æœè°ƒç”¨å¯¹è±¡åœ¨ date ä¹‹åï¼Œåˆ™è¿”å›ä¸€ä¸ªæ­£å€¼ã€‚</td></tr><tr><td align="left">5</td><td align="left"><strong>int compareTo(Object obj)</strong> å¦‚æœ obj æ˜¯ Date ç±»ï¼Œåˆ™æ“ä½œç­‰åŒäº compareTo(Date)ã€‚å¦åˆ™ï¼Œå®ƒä¼šæŠ›å‡ºä¸€ä¸ª ClassCastExceptionã€‚</td></tr><tr><td align="left">6</td><td align="left"><strong>boolean equals(Object date)</strong> å¦‚æœè°ƒç”¨çš„ Date å¯¹è±¡ä¸­åŒ…å«çš„æ—¶é—´å’Œæ—¥æœŸä¸ date æŒ‡å®šçš„ç›¸åŒï¼Œåˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚</td></tr><tr><td align="left">7</td><td align="left"><strong>long getTime( )</strong> è¿”å› 1970 å¹´ 1 æœˆ 1 æ—¥ä»¥æ¥ç»è¿‡çš„æ¯«ç§’æ•°ã€‚</td></tr><tr><td align="left">8</td><td align="left"><strong>int hashCode( )</strong> ä¸ºè°ƒç”¨å¯¹è±¡è¿”å›å“ˆå¸Œä»£ç ã€‚</td></tr><tr><td align="left">9</td><td align="left"><strong>void setTime(long time)</strong> è®¾ç½® time æŒ‡å®šçš„æ—¶é—´å’Œæ—¥æœŸï¼Œè¿™è¡¨ç¤ºä» 1970 å¹´ 1 æœˆ 1 æ—¥åˆå¤œä»¥æ¥ç»è¿‡çš„æ—¶é—´ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰ã€‚</td></tr><tr><td align="left">10</td><td align="left"><strong>String toString( )</strong> è½¬æ¢è°ƒç”¨çš„ Date å¯¹è±¡ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›ç»“æœã€‚</td></tr></tbody></table><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-meta">@WebServlet</span>(<span class="hljs-string">&quot;/CurrentDate&quot;</span>)<br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CurrentDate</span> <span class="hljs-title">extends</span> <span class="hljs-title">HttpServlet</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> long serialVersionUID <span class="hljs-operator">=</span> 1L;<br><br>    protected void doGet(<span class="hljs-type">HttpServletRequest</span> request, <span class="hljs-type">HttpServletResponse</span> response) <span class="hljs-keyword">throws</span> <span class="hljs-type">ServletException</span>, <span class="hljs-type">IOException</span> &#123;<br><br>        response.setContentType(<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span>);<br>        <span class="hljs-type">PrintWriter</span> out <span class="hljs-operator">=</span> response.getWriter();<br>          <span class="hljs-type">String</span> title <span class="hljs-operator">=</span> <span class="hljs-string">&quot;æ˜¾ç¤ºå½“å‰çš„æ—¥æœŸå’Œæ—¶é—´&quot;</span>;<br>        <span class="hljs-type">Date</span> date <span class="hljs-operator">=</span> new <span class="hljs-type">Date</span>();<br>        <span class="hljs-type">String</span> docType <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&lt;!DOCTYPE html&gt; <span class="hljs-subst">\n</span>&quot;</span>;<br>          out.println(docType <span class="hljs-operator">+</span><br>            <span class="hljs-string">&quot;&lt;html&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>            <span class="hljs-string">&quot;&lt;head&gt;&lt;title&gt;&quot;</span> <span class="hljs-operator">+</span> title <span class="hljs-operator">+</span> <span class="hljs-string">&quot;&lt;/title&gt;&lt;/head&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>            <span class="hljs-string">&quot;&lt;body bgcolor=<span class="hljs-subst">\&quot;</span>#f0f0f0<span class="hljs-subst">\&quot;</span>&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>            <span class="hljs-string">&quot;&lt;h1 align=<span class="hljs-subst">\&quot;</span>center<span class="hljs-subst">\&quot;</span>&gt;&quot;</span> <span class="hljs-operator">+</span> title <span class="hljs-operator">+</span> <span class="hljs-string">&quot;&lt;/h1&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>            <span class="hljs-string">&quot;&lt;h2 align=<span class="hljs-subst">\&quot;</span>center<span class="hljs-subst">\&quot;</span>&gt;&quot;</span> <span class="hljs-operator">+</span> date.toString() <span class="hljs-operator">+</span> <span class="hljs-string">&quot;&lt;/h2&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>            <span class="hljs-string">&quot;&lt;/body&gt;&lt;/html&gt;&quot;</span>);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><img src="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/date" alt="img" style="zoom: 80%;"><h5 id="1-12-3ã€æ—¥æœŸæ¯”è¾ƒ"><a href="#1-12-3ã€æ—¥æœŸæ¯”è¾ƒ" class="headerlink" title="1.12.3ã€æ—¥æœŸæ¯”è¾ƒ"></a>1.12.3ã€æ—¥æœŸæ¯”è¾ƒ</h5><ul><li>æ‚¨å¯ä»¥ä½¿ç”¨ getTime() æ¥è·å–ä¸¤ä¸ªå¯¹è±¡è‡ª 1970 å¹´ 1 æœˆ 1 æ—¥åˆå¤œä»¥æ¥ç»è¿‡çš„æ—¶é—´ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰ï¼Œç„¶åå¯¹è¿™ä¸¤ä¸ªå€¼è¿›è¡Œæ¯”è¾ƒã€‚</li><li>æ‚¨å¯ä»¥ä½¿ç”¨æ–¹æ³• before( )ã€after( ) å’Œ equals( )ã€‚ç”±äºä¸€ä¸ªæœˆé‡Œ 12 å·åœ¨ 18 å·ä¹‹å‰ï¼Œä¾‹å¦‚ï¼Œnew Date(99, 2, 12).before(new Date (99, 2, 18)) è¿”å› trueã€‚</li><li>æ‚¨å¯ä»¥ä½¿ç”¨ compareTo( ) æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ç”± Comparable æ¥å£å®šä¹‰ï¼Œç”± Date å®ç°ã€‚</li></ul><h5 id="1-12-4ã€ä½¿ç”¨SimpleDateFormatæ ¼å¼åŒ–æ—¥æœŸ"><a href="#1-12-4ã€ä½¿ç”¨SimpleDateFormatæ ¼å¼åŒ–æ—¥æœŸ" class="headerlink" title="1.12.4ã€ä½¿ç”¨SimpleDateFormatæ ¼å¼åŒ–æ—¥æœŸ"></a>1.12.4ã€ä½¿ç”¨SimpleDateFormatæ ¼å¼åŒ–æ—¥æœŸ</h5><p>SimpleDateFormat æ˜¯ä¸€ä¸ªä»¥è¯­è¨€ç¯å¢ƒæ•æ„Ÿçš„æ–¹å¼æ¥æ ¼å¼åŒ–å’Œè§£ææ—¥æœŸçš„å…·ä½“ç±»ã€‚ SimpleDateFormat å…è®¸æ‚¨é€‰æ‹©ä»»ä½•ç”¨æˆ·å®šä¹‰çš„æ—¥æœŸæ—¶é—´æ ¼å¼åŒ–çš„æ¨¡å¼ã€‚</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-type">Date</span> dNow = <span class="hljs-built_in">new</span> <span class="hljs-type">Date</span>();<br>SimpleDateFormat ft = <span class="hljs-built_in">new</span> SimpleDateFormat (&quot;yyyy.MM.dd  hh:mm:ss E a &quot;);<br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(ft.format(dNow));<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨äº‹ä»¶æ¨¡å¼å­—ç¬¦ä¸²æ¥æŒ‡å®šæ—¶é—´æ ¼å¼ã€‚åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œæ‰€æœ‰çš„ ASCII å­—æ¯è¢«ä¿ç•™ä¸ºæ¨¡å¼å­—æ¯ï¼Œè¿™äº›å­—æ¯å®šä¹‰å¦‚ä¸‹ï¼š</p><table><thead><tr><th align="left">å­—ç¬¦</th><th align="left">æè¿°</th><th align="left">å®ä¾‹</th></tr></thead><tbody><tr><td align="left">G</td><td align="left">Era æŒ‡ç¤ºå™¨</td><td align="left">AD</td></tr><tr><td align="left">y</td><td align="left">å››ä½æ•°è¡¨ç¤ºçš„å¹´</td><td align="left">2001</td></tr><tr><td align="left">M</td><td align="left">ä¸€å¹´ä¸­çš„æœˆ</td><td align="left">July æˆ– 07</td></tr><tr><td align="left">d</td><td align="left">ä¸€æœˆä¸­çš„ç¬¬å‡ å¤©</td><td align="left">10</td></tr><tr><td align="left">h</td><td align="left">å¸¦æœ‰ A.M./P.M. çš„å°æ—¶ï¼ˆ1~12ï¼‰</td><td align="left">12</td></tr><tr><td align="left">H</td><td align="left">ä¸€å¤©ä¸­çš„ç¬¬å‡ å°æ—¶ï¼ˆ0~23ï¼‰</td><td align="left">22</td></tr><tr><td align="left">m</td><td align="left">ä¸€å°æ—¶ä¸­çš„ç¬¬å‡ åˆ†</td><td align="left">30</td></tr><tr><td align="left">s</td><td align="left">ä¸€åˆ†ä¸­çš„ç¬¬å‡ ç§’</td><td align="left">55</td></tr><tr><td align="left">S</td><td align="left">æ¯«ç§’</td><td align="left">234</td></tr><tr><td align="left">E</td><td align="left">ä¸€å‘¨ä¸­çš„æ˜ŸæœŸå‡ </td><td align="left">Tuesday</td></tr><tr><td align="left">D</td><td align="left">ä¸€å¹´ä¸­çš„ç¬¬å‡ å¤©</td><td align="left">360</td></tr><tr><td align="left">F</td><td align="left">æ‰€åœ¨çš„å‘¨æ˜¯è¿™ä¸ªæœˆçš„ç¬¬å‡ å‘¨</td><td align="left">2 (second Wed. in July)</td></tr><tr><td align="left">w</td><td align="left">ä¸€å¹´ä¸­çš„ç¬¬å‡ å‘¨</td><td align="left">40</td></tr><tr><td align="left">W</td><td align="left">ä¸€æœˆä¸­çš„ç¬¬å‡ å‘¨</td><td align="left">1</td></tr><tr><td align="left">a</td><td align="left">A.M./P.M. æ ‡è®°</td><td align="left">PM</td></tr><tr><td align="left">k</td><td align="left">ä¸€å¤©ä¸­çš„ç¬¬å‡ å°æ—¶ï¼ˆ1~24ï¼‰</td><td align="left">24</td></tr><tr><td align="left">K</td><td align="left">å¸¦æœ‰ A.M./P.M. çš„å°æ—¶ï¼ˆ0~11ï¼‰</td><td align="left">10</td></tr><tr><td align="left">z</td><td align="left">æ—¶åŒº</td><td align="left">Eastern Standard Time</td></tr><tr><td align="left">â€˜</td><td align="left">Escape for text</td><td align="left">Delimiter</td></tr><tr><td align="left">â€œ</td><td align="left">å•å¼•å·</td><td align="left">`</td></tr></tbody></table><p>å¦‚éœ€æŸ¥çœ‹å¯ç”¨çš„å¤„ç†æ—¥æœŸæ–¹æ³•çš„å®Œæ•´åˆ—è¡¨ï¼Œæ‚¨å¯ä»¥å‚è€ƒæ ‡å‡†çš„ Java æ–‡æ¡£ã€‚</p><h4 id="1-13ã€Servletç½‘é¡µé‡å®šå‘"><a href="#1-13ã€Servletç½‘é¡µé‡å®šå‘" class="headerlink" title="1.13ã€Servletç½‘é¡µé‡å®šå‘"></a>1.13ã€Servletç½‘é¡µé‡å®šå‘</h4><p>å½“æ–‡æ¡£ç§»åŠ¨åˆ°æ–°çš„ä½ç½®ï¼Œæˆ‘ä»¬éœ€è¦å‘å®¢æˆ·ç«¯å‘é€è¿™ä¸ªæ–°ä½ç½®æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°ç½‘é¡µé‡å®šå‘ã€‚å½“ç„¶ï¼Œä¹Ÿå¯èƒ½æ˜¯ä¸ºäº†è´Ÿè½½å‡è¡¡ï¼Œæˆ–è€…åªæ˜¯ä¸ºäº†ç®€å•çš„éšæœºï¼Œè¿™äº›æƒ…å†µéƒ½æœ‰å¯èƒ½ç”¨åˆ°ç½‘é¡µé‡å®šå‘ã€‚</p><h5 id="1-13-1ã€ä½¿ç”¨-response-å¯¹è±¡çš„-sendRedirect-æ–¹æ³•"><a href="#1-13-1ã€ä½¿ç”¨-response-å¯¹è±¡çš„-sendRedirect-æ–¹æ³•" class="headerlink" title="1.13.1ã€ä½¿ç”¨ response å¯¹è±¡çš„ sendRedirect() æ–¹æ³•"></a>1.13.1ã€ä½¿ç”¨ response å¯¹è±¡çš„ sendRedirect() æ–¹æ³•</h5><p>é‡å®šå‘è¯·æ±‚åˆ°å¦ä¸€ä¸ªç½‘é¡µçš„æœ€ç®€å•çš„æ–¹å¼æ˜¯ä½¿ç”¨ response å¯¹è±¡çš„ sendRedirect() æ–¹æ³•ã€‚ä¸‹é¢æ˜¯è¯¥æ–¹æ³•çš„å®šä¹‰ï¼š</p><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs processing"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> HttpServletResponse.sendRedirect(<span class="hljs-keyword">String</span> location)<br><span class="hljs-keyword">throws</span> IOException<br></code></pre></td></tr></table></figure><h5 id="1-13-2ã€setStatus-å’Œ-setHeader-æ–¹æ³•ä¸€èµ·"><a href="#1-13-2ã€setStatus-å’Œ-setHeader-æ–¹æ³•ä¸€èµ·" class="headerlink" title="1.13.2ã€setStatus() å’Œ setHeader() æ–¹æ³•ä¸€èµ·"></a>1.13.2ã€setStatus() å’Œ setHeader() æ–¹æ³•ä¸€èµ·</h5><p>è¯¥æ–¹æ³•æŠŠå“åº”è¿åŒçŠ¶æ€ç å’Œæ–°çš„ç½‘é¡µä½ç½®å‘é€å›æµè§ˆå™¨ã€‚æ‚¨ä¹Ÿå¯ä»¥é€šè¿‡æŠŠ setStatus() å’Œ setHeader() æ–¹æ³•ä¸€èµ·ä½¿ç”¨æ¥è¾¾åˆ°åŒæ ·çš„æ•ˆæœï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">....<br>String site = &quot;http://www.baidu.com&quot; ;<br>response.setStatus(response.SC_MOVED_TEMPORARILY);<br>response.setHeader(&quot;Location&quot;, site); <br>....<br></code></pre></td></tr></table></figure><p>æœ¬å®ä¾‹æ˜¾ç¤ºäº† Servlet å¦‚ä½•è¿›è¡Œé¡µé¢é‡å®šå‘åˆ°å¦ä¸€ä¸ªä½ç½®ï¼š</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-meta">@WebServlet</span>(<span class="hljs-string">&quot;/PageRedirect&quot;</span>)<br>public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PageRedirect</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span></span>&#123;<br>    <br>  public void doGet(<span class="hljs-type">HttpServletRequest</span> request,<br>                    <span class="hljs-type">HttpServletResponse</span> response)<br>            <span class="hljs-keyword">throws</span> <span class="hljs-type">ServletException</span>, <span class="hljs-type">IOException</span><br>  &#123;<br>      <span class="hljs-comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span><br>      response.setContentType(<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span>);<br><br>      <span class="hljs-comment">// è¦é‡å®šå‘çš„æ–°ä½ç½®</span><br>      <span class="hljs-type">String</span> site = <span class="hljs-keyword">new</span> <span class="hljs-type">String</span>(<span class="hljs-string">&quot;http://www.runoob.com&quot;</span>);<br><br>      response.setStatus(response.<span class="hljs-type">SC_MOVED_TEMPORARILY</span>);<br>      response.setHeader(<span class="hljs-string">&quot;Location&quot;</span>, site);    <br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="1-14ã€Servletç‚¹å‡»è®¡æ•°å™¨"><a href="#1-14ã€Servletç‚¹å‡»è®¡æ•°å™¨" class="headerlink" title="1.14ã€Servletç‚¹å‡»è®¡æ•°å™¨"></a>1.14ã€Servletç‚¹å‡»è®¡æ•°å™¨</h4><h5 id="1-14-1ç½‘é¡µç‚¹å‡»è®¡æ•°å™¨ï¼š"><a href="#1-14-1ç½‘é¡µç‚¹å‡»è®¡æ•°å™¨ï¼š" class="headerlink" title="1.14.1ç½‘é¡µç‚¹å‡»è®¡æ•°å™¨ï¼š"></a><strong>1.14.1ç½‘é¡µç‚¹å‡»è®¡æ•°å™¨ï¼š</strong></h5><p>å¾ˆå¤šæ—¶å€™ï¼Œæ‚¨å¯èƒ½æœ‰å…´è¶£çŸ¥é“ç½‘ç«™çš„æŸä¸ªç‰¹å®šé¡µé¢ä¸Šçš„æ€»ç‚¹å‡»é‡ã€‚ä½¿ç”¨ Servlet æ¥è®¡ç®—è¿™äº›ç‚¹å‡»é‡æ˜¯éå¸¸ç®€å•çš„ï¼Œå› ä¸ºä¸€ä¸ª Servlet çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ç”±å®ƒè¿è¡Œæ‰€åœ¨çš„å®¹å™¨æ§åˆ¶çš„ã€‚</p><p>ä»¥ä¸‹æ˜¯å®ç°ä¸€ä¸ªç®€å•çš„åŸºäº Servlet ç”Ÿå‘½å‘¨æœŸçš„ç½‘é¡µç‚¹å‡»è®¡æ•°å™¨éœ€è¦é‡‡å–çš„æ­¥éª¤ï¼š</p><ul><li>åœ¨ init() æ–¹æ³•ä¸­åˆå§‹åŒ–ä¸€ä¸ªå…¨å±€å˜é‡ã€‚</li><li>æ¯æ¬¡è°ƒç”¨ doGet() æˆ– doPost() æ–¹æ³•æ—¶ï¼Œéƒ½å¢åŠ å…¨å±€å˜é‡ã€‚</li><li>å¦‚æœéœ€è¦ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä¸€ä¸ªæ•°æ®åº“è¡¨æ¥å­˜å‚¨å…¨å±€å˜é‡çš„å€¼åœ¨ destroy() ä¸­ã€‚åœ¨ä¸‹æ¬¡åˆå§‹åŒ– Servlet æ—¶ï¼Œè¯¥å€¼å¯åœ¨ init() æ–¹æ³•å†…è¢«è¯»å–ã€‚è¿™ä¸€æ­¥æ˜¯å¯é€‰çš„ã€‚</li><li>å¦‚æœæ‚¨åªæƒ³å¯¹ä¸€ä¸ª session ä¼šè¯è®¡æ•°ä¸€æ¬¡é¡µé¢ç‚¹å‡»ï¼Œé‚£ä¹ˆè¯·ä½¿ç”¨ isNew() æ–¹æ³•æ¥æ£€æŸ¥è¯¥ session ä¼šè¯æ˜¯å¦å·²ç‚¹å‡»è¿‡ç›¸åŒé¡µé¢ã€‚è¿™ä¸€æ­¥æ˜¯å¯é€‰çš„ã€‚</li><li>æ‚¨å¯ä»¥é€šè¿‡æ˜¾ç¤ºå…¨å±€è®¡æ•°å™¨çš„å€¼ï¼Œæ¥åœ¨ç½‘ç«™ä¸Šå±•ç¤ºé¡µé¢çš„æ€»ç‚¹å‡»é‡ã€‚è¿™ä¸€æ­¥æ˜¯å¯é€‰çš„ã€‚</li></ul><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å‡è®¾ Web å®¹å™¨å°†æ— æ³•é‡æ–°å¯åŠ¨ã€‚å¦‚æœæ˜¯é‡æ–°å¯åŠ¨æˆ– Servlet è¢«é”€æ¯ï¼Œè®¡æ•°å™¨å°†è¢«é‡ç½®ã€‚</p><h5 id="1-14-2ã€ç½‘ç«™ç‚¹å‡»è®¡æ•°å™¨ï¼š"><a href="#1-14-2ã€ç½‘ç«™ç‚¹å‡»è®¡æ•°å™¨ï¼š" class="headerlink" title="1.14.2ã€ç½‘ç«™ç‚¹å‡»è®¡æ•°å™¨ï¼š"></a><strong>1.14.2ã€ç½‘ç«™ç‚¹å‡»è®¡æ•°å™¨</strong>ï¼š</h5><p>å¾ˆå¤šæ—¶å€™ï¼Œæ‚¨å¯èƒ½æœ‰å…´è¶£çŸ¥é“æ•´ä¸ªç½‘ç«™çš„æ€»ç‚¹å‡»é‡ã€‚åœ¨ Servlet ä¸­ï¼Œè¿™ä¹Ÿæ˜¯éå¸¸ç®€å•çš„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿‡æ»¤å™¨åšåˆ°è¿™ä¸€ç‚¹ã€‚</p><p>ä»¥ä¸‹æ˜¯å®ç°ä¸€ä¸ªç®€å•çš„åŸºäºè¿‡æ»¤å™¨ç”Ÿå‘½å‘¨æœŸçš„ç½‘ç«™ç‚¹å‡»è®¡æ•°å™¨éœ€è¦é‡‡å–çš„æ­¥éª¤ï¼š</p><ul><li>åœ¨è¿‡æ»¤å™¨çš„ init() æ–¹æ³•ä¸­åˆå§‹åŒ–ä¸€ä¸ªå…¨å±€å˜é‡ã€‚</li><li>æ¯æ¬¡è°ƒç”¨ doFilter æ–¹æ³•æ—¶ï¼Œéƒ½å¢åŠ å…¨å±€å˜é‡ã€‚</li><li>å¦‚æœéœ€è¦ï¼Œæ‚¨å¯ä»¥åœ¨è¿‡æ»¤å™¨çš„ destroy() ä¸­ä½¿ç”¨ä¸€ä¸ªæ•°æ®åº“è¡¨æ¥å­˜å‚¨å…¨å±€å˜é‡çš„å€¼ã€‚åœ¨ä¸‹æ¬¡åˆå§‹åŒ–è¿‡æ»¤å™¨æ—¶ï¼Œè¯¥å€¼å¯åœ¨ init() æ–¹æ³•å†…è¢«è¯»å–, è¿™ä¸€æ­¥æ˜¯å¯é€‰çš„ã€‚</li></ul><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å‡è®¾ Web å®¹å™¨å°†æ— æ³•é‡æ–°å¯åŠ¨ã€‚å¦‚æœæ˜¯é‡æ–°å¯åŠ¨æˆ– Servlet è¢«é”€æ¯ï¼Œç‚¹å‡»è®¡æ•°å™¨å°†è¢«é‡ç½®ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SiteHitCounter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Filter</span></span>&#123;<br>  <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> hitCount; <br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span>  <span class="hljs-title">init</span><span class="hljs-params">(FilterConfig config)</span> </span><br><span class="hljs-function">                    <span class="hljs-keyword">throws</span> ServletException</span>&#123;<br>     <span class="hljs-comment">// é‡ç½®ç‚¹sså‡»è®¡æ•°å™¨</span><br>     hitCount = <span class="hljs-number">0</span>;<br>  &#125;<br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span>  <span class="hljs-title">doFilter</span><span class="hljs-params">(ServletRequest request, </span></span><br><span class="hljs-function"><span class="hljs-params">              ServletResponse response,</span></span><br><span class="hljs-function"><span class="hljs-params">              FilterChain chain)</span> </span><br><span class="hljs-function">              <span class="hljs-keyword">throws</span> java.io.IOException, ServletException </span>&#123;<br>      <span class="hljs-comment">// æŠŠè®¡æ•°å™¨çš„å€¼å¢åŠ  1</span><br>      hitCount++;<br>      <span class="hljs-comment">// è¾“å‡ºè®¡æ•°å™¨</span><br>      System.out.println(<span class="hljs-string">&quot;ç½‘ç«™è®¿é—®ç»Ÿè®¡ï¼š&quot;</span>+ hitCount );<br>      <span class="hljs-comment">// æŠŠè¯·æ±‚ä¼ å›åˆ°è¿‡æ»¤å™¨é“¾???</span><br>      chain.doFilter(request,response);<br>  &#125;<br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">destroy</span><span class="hljs-params">()</span> </span><br><span class="hljs-function">  </span>&#123; <br>      <span class="hljs-comment">// è¿™ä¸€æ­¥æ˜¯å¯é€‰çš„ï¼Œä½†æ˜¯å¦‚æœéœ€è¦ï¼Œæ‚¨å¯ä»¥æŠŠ hitCount çš„å€¼å†™å…¥åˆ°æ•°æ®åº“</span><br>  &#125; <br>&#125;<br></code></pre></td></tr></table></figure><h4 id="1-15ã€ServletåŒ…"><a href="#1-15ã€ServletåŒ…" class="headerlink" title="1.15ã€ServletåŒ…"></a>1.15ã€ServletåŒ…</h4><p>æ¶‰åŠåˆ° WEB-INF å­ç›®å½•çš„ Web åº”ç”¨ç¨‹åºç»“æ„æ˜¯æ‰€æœ‰çš„ Java web åº”ç”¨ç¨‹åºçš„æ ‡å‡†ï¼Œå¹¶ç”± Servlet API è§„èŒƒæŒ‡å®šã€‚ç»™å®šä¸€ä¸ªé¡¶çº§ç›®å½•å myappï¼Œç›®å½•ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli"><span class="hljs-string">/myapp</span><br>    <span class="hljs-string">/images</span><br>    <span class="hljs-string">/WEB-INF</span><br>        <span class="hljs-string">/classes</span><br>        <span class="hljs-string">/lib</span><br></code></pre></td></tr></table></figure><p>WEB-INF å­ç›®å½•ä¸­åŒ…å«åº”ç”¨ç¨‹åºçš„éƒ¨ç½²æè¿°ç¬¦ï¼Œåä¸º web.xmlã€‚æ‰€æœ‰çš„ HTML æ–‡ä»¶éƒ½ä½äºé¡¶çº§ç›®å½• <em>myapp</em> ä¸‹ã€‚å¯¹äº admin ç”¨æˆ·ï¼Œæ‚¨ä¼šå‘ç° ROOT ç›®å½•æ˜¯ myApp çš„çˆ¶ç›®å½•ã€‚</p><h5 id="1-15-1ã€åˆ›å»ºåŒ…ä¸­çš„-Servlet"><a href="#1-15-1ã€åˆ›å»ºåŒ…ä¸­çš„-Servlet" class="headerlink" title="1.15.1ã€åˆ›å»ºåŒ…ä¸­çš„ Servlet"></a>1.15.1ã€åˆ›å»ºåŒ…ä¸­çš„ Servlet</h5><p>WEB-INF/classes ç›®å½•åŒ…å«äº†æ‰€æœ‰çš„ Servlet ç±»å’Œå…¶ä»–ç±»æ–‡ä»¶ï¼Œç±»æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ç»“æ„ä¸ä»–ä»¬çš„åŒ…åç§°åŒ¹é…ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æœ‰ä¸€ä¸ªå®Œå…¨åˆæ ¼çš„ç±»åç§° <strong>com.myorg.MyServlet</strong>ï¼Œé‚£ä¹ˆè¿™ä¸ª Servlet ç±»å¿…é¡»ä½äºä»¥ä¸‹ç›®å½•ä¸­ï¼š</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-regexp">/myapp/</span>WEB-INF<span class="hljs-regexp">/classes/</span>com<span class="hljs-regexp">/myorg/My</span>Servlet.<span class="hljs-keyword">class</span><br></code></pre></td></tr></table></figure><h5 id="1-15-2ã€ç¼–è¯‘åŒ…ä¸­çš„-Servlet"><a href="#1-15-2ã€ç¼–è¯‘åŒ…ä¸­çš„-Servlet" class="headerlink" title="1.15.2ã€ç¼–è¯‘åŒ…ä¸­çš„ Servlet"></a>1.15.2ã€ç¼–è¯‘åŒ…ä¸­çš„ Servlet</h5><p>ç¼–è¯‘åŒ…ä¸­çš„ç±»ä¸ç¼–è¯‘å…¶ä»–çš„ç±»æ²¡æœ‰ä»€ä¹ˆå¤§çš„ä¸åŒã€‚æœ€ç®€å•çš„æ–¹æ³•æ˜¯è®©æ‚¨çš„ java æ–‡ä»¶ä¿ç•™å®Œå…¨é™å®šè·¯å¾„ï¼Œå¦‚ä¸Šé¢æåˆ°çš„ç±»ï¼Œå°†è¢«ä¿ç•™åœ¨ com.myorg ä¸­ã€‚æ‚¨è¿˜éœ€è¦åœ¨ CLASSPATH ä¸­æ·»åŠ è¯¥ç›®å½•ã€‚ </p><p>å‡è®¾æ‚¨çš„ç¯å¢ƒå·²æ­£ç¡®è®¾ç½®ï¼Œè¿›å…¥ <strong>/webapps/ROOT/WEB-INF/classes</strong> ç›®å½•ï¼Œå¹¶ç¼–è¯‘ MyServlet.javaï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">$ javac <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">MyServlet</span>.</span></span>java<br></code></pre></td></tr></table></figure><p>å¦‚æœ Servlet ä¾èµ–äºå…¶ä»–åº“ï¼Œé‚£ä¹ˆæ‚¨å¿…é¡»åœ¨ CLASSPATH ä¸­ä¹Ÿè¦å¼•ç”¨é‚£äº› JAR æ–‡ä»¶ã€‚è¿™é‡Œæˆ‘åªå¼•ç”¨äº† servlet-api.jar JAR æ–‡ä»¶ï¼Œå› ä¸ºæˆ‘åœ¨ Hello World ç¨‹åºä¸­å¹¶æ²¡æœ‰ä½¿ç”¨ä»»ä½•å…¶ä»–åº“ã€‚</p><p>è¯¥å‘½ä»¤è¡Œä½¿ç”¨å†…ç½®çš„ javac ç¼–è¯‘å™¨ï¼Œå®ƒæ˜¯ Sun Microsystems Java è½¯ä»¶å¼€å‘å·¥å…·åŒ…ï¼ˆJDKï¼Œå…¨ç§° Java Software Development Kitï¼‰é™„å¸¦çš„ã€‚ Microsystemsçš„Javaè½¯ä»¶å¼€å‘å·¥å…·åŒ…ï¼ˆJDKï¼‰ã€‚ä¸ºäº†è®©è¯¥å‘½ä»¤æ­£å¸¸å·¥ä½œï¼Œå¿…é¡»åŒ…æ‹¬æ‚¨åœ¨ PATH ç¯å¢ƒå˜é‡ä¸­æ‰€ä½¿ç”¨çš„ Java SDK çš„ä½ç½®ã€‚</p><p>å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œä¸Šè¿°ç¼–è¯‘ä¼šåœ¨åŒä¸€ç›®å½•ä¸‹ç”Ÿæˆ <strong>MyServlet.class</strong> æ–‡ä»¶ã€‚ä¸‹ä¸€èŠ‚å°†è§£é‡Šå¦‚ä½•æŠŠä¸€ä¸ªå·²ç¼–è¯‘çš„ Servlet éƒ¨ç½²åˆ°ç”Ÿäº§ä¸­ã€‚</p><h5 id="1-15-3ã€Servlet-æ‰“åŒ…éƒ¨ç½²"><a href="#1-15-3ã€Servlet-æ‰“åŒ…éƒ¨ç½²" class="headerlink" title="1.15.3ã€Servlet æ‰“åŒ…éƒ¨ç½²"></a>1.15.3ã€Servlet æ‰“åŒ…éƒ¨ç½²</h5><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒServlet åº”ç”¨ç¨‹åºä½äºè·¯å¾„ &lt;Tomcat-installation-directory&gt;/webapps/ROOT ä¸‹ï¼Œä¸”ç±»æ–‡ä»¶æ”¾åœ¨ &lt;Tomcat-installation-directory&gt;/webapps/ROOT/WEB-INF/classes ä¸­ã€‚</p><p>å¦‚æœæ‚¨æœ‰ä¸€ä¸ªå®Œå…¨åˆæ ¼çš„ç±»åç§° <strong>com.myorg.MyServlet</strong>ï¼Œé‚£ä¹ˆè¿™ä¸ª Servlet ç±»å¿…é¡»ä½äº WEB-INF/classes/com/myorg/MyServlet.class ä¸­ï¼Œæ‚¨éœ€è¦åœ¨ä½äº &lt;Tomcat-installation-directory&gt;/webapps/ROOT/WEB-INF/ çš„ web.xml æ–‡ä»¶ä¸­åˆ›å»ºä»¥ä¸‹æ¡ç›®ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>MyServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>com.myorg.MyServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br> <br><span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>MyServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/MyServlet<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ä¸Šé¢çš„æ¡ç›®è¦è¢«åˆ›å»ºåœ¨ web.xml æ–‡ä»¶ä¸­çš„ &lt;web-app&gt;â€¦&lt;/web-app&gt; æ ‡ç­¾å†…ã€‚åœ¨è¯¥æ–‡ä»¶ä¸­å¯èƒ½å·²ç»æœ‰å„ç§å¯ç”¨çš„æ¡ç›®ï¼Œä½†ä¸è¦åœ¨æ„ã€‚</p><p>åˆ°è¿™é‡Œï¼Œæ‚¨åŸºæœ¬ä¸Šå·²ç»å®Œæˆäº†ï¼Œç°åœ¨è®©æˆ‘ä»¬ä½¿ç”¨ &lt;Tomcat-installation-directory&gt;\bin\startup.batï¼ˆåœ¨ Windows ä¸Šï¼‰æˆ– &lt;Tomcat-installation-directory&gt;/bin/startup.shï¼ˆåœ¨ Linux/Solaris ç­‰ä¸Šï¼‰å¯åŠ¨ tomcat æœåŠ¡å™¨ï¼Œæœ€ååœ¨æµè§ˆå™¨çš„åœ°å€æ ä¸­è¾“å…¥ <strong><a href="http://localhost:8080/MyServlet">http://localhost:8080/MyServlet</a></strong>ã€‚å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œæµè§ˆå™¨é¡µé¢æ˜¾ç¤ºâ€œHello Worldâ€œã€‚</p><h4 id="1-16ã€Servletè°ƒè¯•"><a href="#1-16ã€Servletè°ƒè¯•" class="headerlink" title="1.16ã€Servletè°ƒè¯•"></a>1.16ã€Servletè°ƒè¯•</h4><p>æµ‹è¯•/è°ƒè¯• Servlet å§‹ç»ˆæ˜¯å¼€å‘ä½¿ç”¨è¿‡ç¨‹ä¸­çš„éš¾ç‚¹ã€‚Servlet å¾€å¾€æ¶‰åŠå¤§é‡çš„å®¢æˆ·ç«¯/æœåŠ¡å™¨äº¤äº’ï¼Œå¯èƒ½ä¼šå‡ºç°é”™è¯¯ä½†åˆéš¾ä»¥é‡ç°ã€‚</p><h5 id="1-16-1ã€ä¸€äº›æç¤ºå’Œå»ºè®®ï¼Œå¸®åŠ©è°ƒè¯•"><a href="#1-16-1ã€ä¸€äº›æç¤ºå’Œå»ºè®®ï¼Œå¸®åŠ©è°ƒè¯•" class="headerlink" title="1.16.1ã€ä¸€äº›æç¤ºå’Œå»ºè®®ï¼Œå¸®åŠ©è°ƒè¯•"></a>1.16.1ã€ä¸€äº›æç¤ºå’Œå»ºè®®ï¼Œå¸®åŠ©è°ƒè¯•</h5><ul><li><p>System.out.println()</p></li><li><p>æ¶ˆæ¯æ—¥å¿—ï¼šä½¿ç”¨é€‚å½“çš„æ—¥å¿—è®°å½•æ–¹æ³•æ¥è®°å½•æ‰€æœ‰è°ƒè¯•ã€è­¦å‘Šå’Œé”™è¯¯æ¶ˆæ¯ï¼Œæ¨èä½¿ç”¨ <a href="https://logging.apache.org/log4j/2.0/download.html">log4J</a> æ¥è®°å½•æ‰€æœ‰çš„æ¶ˆæ¯ã€‚</p></li><li><p>ä½¿ç”¨JDBè°ƒè¯•å™¨ï¼šä½¿ç”¨è°ƒè¯• applet æˆ–åº”ç”¨ç¨‹åºçš„ jdb å‘½ä»¤æ¥è°ƒè¯• Servletã€‚</p></li><li><p>ä½¿ç”¨æ³¨é‡Šï¼šä»£ç ä¸­çš„æ³¨é‡Šæœ‰åŠ©äºä»¥å„ç§æ–¹å¼è¿›è¡Œè°ƒè¯•ã€‚</p></li><li><p>å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯å¤´ä¿¡æ¯ï¼šå½“ä¸€ä¸ª Servlet å¹¶æ²¡æœ‰åƒé¢„æœŸé‚£æ ·æ—¶ï¼ŒæŸ¥çœ‹åŸå§‹çš„ HTTP è¯·æ±‚å’Œå“åº”æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚</p></li></ul><h5 id="1-16-2ã€ä¸€äº›-Servlet-è°ƒè¯•çš„æŠ€å·§ï¼š"><a href="#1-16-2ã€ä¸€äº›-Servlet-è°ƒè¯•çš„æŠ€å·§ï¼š" class="headerlink" title="1.16.2ã€ä¸€äº› Servlet è°ƒè¯•çš„æŠ€å·§ï¼š"></a>1.16.2ã€ä¸€äº› Servlet è°ƒè¯•çš„æŠ€å·§ï¼š</h5><ul><li>è¯·æ³¨æ„ï¼Œserver_root/classes ä¸ä¼šé‡è½½ï¼Œè€Œ server_root/servlets å¯èƒ½ä¼šã€‚</li><li>è¦æ±‚æµè§ˆå™¨æ˜¾ç¤ºå®ƒæ‰€æ˜¾ç¤ºçš„é¡µé¢çš„åŸå§‹å†…å®¹ã€‚è¿™æœ‰åŠ©äºè¯†åˆ«æ ¼å¼çš„é—®é¢˜ã€‚å®ƒé€šå¸¸æ˜¯â€è§†å›¾â€èœå•ä¸‹çš„ä¸€ä¸ªé€‰é¡¹ã€‚</li><li>é€šè¿‡å¼ºåˆ¶æ‰§è¡Œå®Œå…¨é‡æ–°åŠ è½½é¡µé¢æ¥ç¡®ä¿æµè§ˆå™¨è¿˜æ²¡æœ‰ç¼“å­˜å‰ä¸€ä¸ªè¯·æ±‚çš„è¾“å‡ºã€‚åœ¨ Netscape Navigator ä¸­ï¼Œè¯·ä½¿ç”¨ Shift-Reloadï¼Œåœ¨ Internet Explorer ä¸­ï¼Œè¯·ä½¿ç”¨ Shift-Refreshã€‚</li><li>è¯·ç¡®è®¤ servlet çš„ init() æ–¹æ³•æ¥å—ä¸€ä¸ª ServletConfig å‚æ•°ï¼Œå¹¶è°ƒç”¨ super.init(config)ã€‚</li></ul><h4 id="1-17ã€Servletå›½é™…åŒ–"><a href="#1-17ã€Servletå›½é™…åŒ–" class="headerlink" title="1.17ã€Servletå›½é™…åŒ–"></a>1.17ã€Servletå›½é™…åŒ–</h4><p>å½“å»ºç«‹ä¸€ä¸ªå…¨çƒæ€§çš„ç½‘ç«™æ—¶æœ‰ä¸€äº›æ³¨æ„äº‹é¡¹ã€‚æœ¬æ•™ç¨‹ä¸ä¼šè®²è§£è¿™äº›æ³¨æ„äº‹é¡¹çš„å®Œæ•´ç»†èŠ‚ï¼Œä½†å®ƒä¼šé€šè¿‡ä¸€ä¸ªå¾ˆå¥½çš„å®ä¾‹å‘æ‚¨æ¼”ç¤ºå¦‚ä½•é€šè¿‡å·®å¼‚åŒ–å®šä½ï¼ˆå³åŒºåŸŸè®¾ç½®ï¼‰æ¥è®©ç½‘é¡µä»¥ä¸åŒè¯­è¨€å‘ˆç°ã€‚</p><p>åœ¨æˆ‘ä»¬å¼€å§‹ä¹‹å‰ï¼Œå…ˆæ¥çœ‹çœ‹ä¸‰ä¸ªé‡è¦æœ¯è¯­ï¼š</p><ul><li><strong>å›½é™…åŒ–ï¼ˆi18nï¼‰ï¼š</strong>è¿™æ„å‘³ç€ä¸€ä¸ªç½‘ç«™æä¾›äº†ä¸åŒç‰ˆæœ¬çš„ç¿»è¯‘æˆè®¿é—®è€…çš„è¯­è¨€æˆ–å›½ç±çš„å†…å®¹ã€‚</li><li><strong>æœ¬åœ°åŒ–ï¼ˆl10nï¼‰ï¼š</strong>è¿™æ„å‘³ç€å‘ç½‘ç«™æ·»åŠ èµ„æºï¼Œä»¥ä½¿å…¶é€‚åº”ç‰¹å®šçš„åœ°ç†æˆ–æ–‡åŒ–åŒºåŸŸï¼Œä¾‹å¦‚ç½‘ç«™ç¿»è¯‘æˆå°åœ°æ–‡ï¼ˆHindiï¼‰ã€‚</li><li><strong>åŒºåŸŸè®¾ç½®ï¼ˆlocaleï¼‰ï¼š</strong>è¿™æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ–‡åŒ–æˆ–åœ°ç†åŒºåŸŸã€‚å®ƒé€šå¸¸æŒ‡è¯­è¨€ç¬¦å·åè·Ÿä¸€ä¸ªä¸‹åˆ’çº¿å’Œä¸€ä¸ªå›½å®¶ç¬¦å·ã€‚ä¾‹å¦‚ â€œen_USâ€ è¡¨ç¤ºé’ˆå¯¹ US çš„è‹±è¯­åŒºåŸŸè®¾ç½®ã€‚</li></ul><p>Servlet å¯ä»¥æ ¹æ®è¯·æ±‚è€…çš„åŒºåŸŸè®¾ç½®æ‹¾å–ç›¸åº”ç‰ˆæœ¬çš„ç½‘ç«™ï¼Œå¹¶æ ¹æ®å½“åœ°çš„è¯­è¨€ã€æ–‡åŒ–å’Œéœ€æ±‚æä¾›ç›¸åº”çš„ç½‘ç«™ç‰ˆæœ¬ã€‚ä»¥ä¸‹æ˜¯ request å¯¹è±¡ä¸­è¿”å› Locale å¯¹è±¡çš„æ–¹æ³•ã€‚</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus">java<span class="hljs-selector-class">.util</span><span class="hljs-selector-class">.Locale</span> request<span class="hljs-selector-class">.getLocale</span>() <br></code></pre></td></tr></table></figure><h5 id="1-17-1ã€æ£€æµ‹åŒºåŸŸè®¾ç½®"><a href="#1-17-1ã€æ£€æµ‹åŒºåŸŸè®¾ç½®" class="headerlink" title="1.17.1ã€æ£€æµ‹åŒºåŸŸè®¾ç½®"></a>1.17.1ã€æ£€æµ‹åŒºåŸŸè®¾ç½®</h5><p>ä¸‹é¢åˆ—å‡ºäº†é‡è¦çš„åŒºåŸŸè®¾ç½®æ–¹æ³•ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å®ƒä»¬æ¥æ£€æµ‹è¯·æ±‚è€…çš„åœ°ç†ä½ç½®ã€è¯­è¨€å’ŒåŒºåŸŸè®¾ç½®ã€‚ä¸‹é¢æ‰€æœ‰çš„æ–¹æ³•éƒ½æ˜¾ç¤ºäº†è¯·æ±‚è€…æµè§ˆå™¨ä¸­è®¾ç½®çš„å›½å®¶åç§°å’Œè¯­è¨€åç§°ã€‚</p><table><thead><tr><th align="left">åºå·</th><th align="left">æ–¹æ³• &amp; æè¿°</th></tr></thead><tbody><tr><td align="left">1</td><td align="left"><strong>String getCountry()</strong> è¯¥æ–¹æ³•ä»¥ 2 ä¸ªå¤§å†™å­—æ¯å½¢å¼çš„ ISO 3166 æ ¼å¼è¿”å›è¯¥åŒºåŸŸè®¾ç½®çš„å›½å®¶/åœ°åŒºä»£ç ã€‚</td></tr><tr><td align="left">2</td><td align="left"><strong>String getDisplayCountry()</strong> è¯¥æ–¹æ³•è¿”å›é€‚åˆå‘ç”¨æˆ·æ˜¾ç¤ºçš„åŒºåŸŸè®¾ç½®çš„å›½å®¶çš„åç§°ã€‚</td></tr><tr><td align="left">3</td><td align="left"><strong>String getLanguage()</strong> è¯¥æ–¹æ³•ä»¥å°å†™å­—æ¯å½¢å¼çš„ ISO 639 æ ¼å¼è¿”å›è¯¥åŒºåŸŸè®¾ç½®çš„è¯­è¨€ä»£ç ã€‚</td></tr><tr><td align="left">4</td><td align="left"><strong>String getDisplayLanguage()</strong> è¯¥æ–¹æ³•è¿”å›é€‚åˆå‘ç”¨æˆ·æ˜¾ç¤ºçš„åŒºåŸŸè®¾ç½®çš„è¯­è¨€çš„åç§°ã€‚</td></tr><tr><td align="left">5</td><td align="left"><strong>String getISO3Country()</strong> è¯¥æ–¹æ³•è¿”å›è¯¥åŒºåŸŸè®¾ç½®çš„å›½å®¶çš„ä¸‰ä¸ªå­—æ¯ç¼©å†™ã€‚</td></tr><tr><td align="left">6</td><td align="left"><strong>String getISO3Language()</strong> è¯¥æ–¹æ³•è¿”å›è¯¥åŒºåŸŸè®¾ç½®çš„è¯­è¨€çš„ä¸‰ä¸ªå­—æ¯çš„ç¼©å†™ã€‚</td></tr></tbody></table><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GetLocale</span> <span class="hljs-title">extends</span> <span class="hljs-title">HttpServlet</span></span>&#123;<br>  <span class="hljs-keyword">public</span> void doGet(<span class="hljs-type">HttpServletRequest</span> request,<br>                    <span class="hljs-type">HttpServletResponse</span> response)<br>            <span class="hljs-keyword">throws</span> <span class="hljs-type">ServletException</span>, <span class="hljs-type">IOException</span><br>  &#123;<br>      <span class="hljs-comment">// è·å–å®¢æˆ·ç«¯çš„åŒºåŸŸè®¾ç½®</span><br>      <span class="hljs-type">Locale</span> locale <span class="hljs-operator">=</span> request.getLocale();<br>      <span class="hljs-type">String</span> language <span class="hljs-operator">=</span> locale.getLanguage();<br>      <span class="hljs-type">String</span> country <span class="hljs-operator">=</span> locale.getCountry();<br><br>      <span class="hljs-comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span><br>      response.setContentType(<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span>);<br>      <span class="hljs-type">PrintWriter</span> out <span class="hljs-operator">=</span> response.getWriter();<br><br>      <span class="hljs-type">String</span> title <span class="hljs-operator">=</span> <span class="hljs-string">&quot;æ£€æµ‹åŒºåŸŸè®¾ç½®&quot;</span>;<br>      <span class="hljs-type">String</span> docType <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&lt;!DOCTYPE html&gt; <span class="hljs-subst">\n</span>&quot;</span>;<br>      out.println(docType <span class="hljs-operator">+</span><br>        <span class="hljs-string">&quot;&lt;html&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>        <span class="hljs-string">&quot;&lt;head&gt;&lt;title&gt;&quot;</span> <span class="hljs-operator">+</span> title <span class="hljs-operator">+</span> <span class="hljs-string">&quot;&lt;/title&gt;&lt;/head&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>        <span class="hljs-string">&quot;&lt;body bgcolor=<span class="hljs-subst">\&quot;</span>#f0f0f0<span class="hljs-subst">\&quot;</span>&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>        <span class="hljs-string">&quot;&lt;h1 align=<span class="hljs-subst">\&quot;</span>center<span class="hljs-subst">\&quot;</span>&gt;&quot;</span> <span class="hljs-operator">+</span> language <span class="hljs-operator">+</span> <span class="hljs-string">&quot;&lt;/h1&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>        <span class="hljs-string">&quot;&lt;h2 align=<span class="hljs-subst">\&quot;</span>center<span class="hljs-subst">\&quot;</span>&gt;&quot;</span> <span class="hljs-operator">+</span> country <span class="hljs-operator">+</span> <span class="hljs-string">&quot;&lt;/h2&gt;<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>        <span class="hljs-string">&quot;&lt;/body&gt;&lt;/html&gt;&quot;</span>);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="1-17-2ã€è¯­è¨€è®¾ç½®"><a href="#1-17-2ã€è¯­è¨€è®¾ç½®" class="headerlink" title="1.17.2ã€è¯­è¨€è®¾ç½®"></a>1.17.2ã€è¯­è¨€è®¾ç½®</h5><p>Servlet å¯ä»¥è¾“å‡ºä»¥è¥¿æ¬§è¯­è¨€ï¼ˆå¦‚è‹±è¯­ã€è¥¿ç­ç‰™è¯­ã€å¾·è¯­ã€æ³•è¯­ã€æ„å¤§åˆ©è¯­ã€è·å…°è¯­ç­‰ï¼‰ç¼–å†™çš„é¡µé¢ã€‚åœ¨è¿™é‡Œï¼Œä¸ºäº†èƒ½æ­£ç¡®æ˜¾ç¤ºæ‰€æœ‰çš„å­—ç¬¦ï¼Œè®¾ç½® Content-Language å¤´æ˜¯éå¸¸é‡è¦çš„ã€‚</p><p>ç¬¬äºŒç‚¹æ˜¯ä½¿ç”¨ HTML å®ä½“æ˜¾ç¤ºæ‰€æœ‰çš„ç‰¹æ®Šå­—ç¬¦ï¼Œä¾‹å¦‚ï¼Œâ€&amp;#241;â€ è¡¨ç¤º â€œÃ±â€ï¼Œâ€&amp;#161;â€ è¡¨ç¤º â€œÂ¡â€ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs scala">public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DisplaySpanish</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span></span>&#123;<br>  public void doGet(<span class="hljs-type">HttpServletRequest</span> request,<br>                    <span class="hljs-type">HttpServletResponse</span> response)<br>            <span class="hljs-keyword">throws</span> <span class="hljs-type">ServletException</span>, <span class="hljs-type">IOException</span><br>  &#123;<br>    <span class="hljs-comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span><br>    response.setContentType(<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span>);<br>    <span class="hljs-type">PrintWriter</span> out = response.getWriter();<br>    <span class="hljs-comment">// è®¾ç½®è¥¿ç­ç‰™è¯­è¨€ä»£ç </span><br>    response.setHeader(<span class="hljs-string">&quot;Content-Language&quot;</span>, <span class="hljs-string">&quot;es&quot;</span>);<br><br>    <span class="hljs-type">String</span> title = <span class="hljs-string">&quot;En Espa&amp;ntilde;ol&quot;</span>;<br>    <span class="hljs-type">String</span> docType = <span class="hljs-string">&quot;&lt;!DOCTYPE html&gt; \n&quot;</span>;<br>     out.println(docType +<br>     <span class="hljs-string">&quot;&lt;html&gt;\n&quot;</span> +<br>     <span class="hljs-string">&quot;&lt;head&gt;&lt;title&gt;&quot;</span> + title + <span class="hljs-string">&quot;&lt;/title&gt;&lt;/head&gt;\n&quot;</span> +<br>     <span class="hljs-string">&quot;&lt;body bgcolor=\&quot;#f0f0f0\&quot;&gt;\n&quot;</span> +<br>     <span class="hljs-string">&quot;&lt;h1&gt;&quot;</span> + <span class="hljs-string">&quot;En Espa&amp;ntilde;ol:&quot;</span> + <span class="hljs-string">&quot;&lt;/h1&gt;\n&quot;</span> +<br>     <span class="hljs-string">&quot;&lt;h1&gt;&quot;</span> + <span class="hljs-string">&quot;&amp;iexcl;Hola Mundo!&quot;</span> + <span class="hljs-string">&quot;&lt;/h1&gt;\n&quot;</span> +<br>     <span class="hljs-string">&quot;&lt;/body&gt;&lt;/html&gt;&quot;</span>);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="1-17-3ã€ç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„æ—¥æœŸ"><a href="#1-17-3ã€ç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„æ—¥æœŸ" class="headerlink" title="1.17.3ã€ç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„æ—¥æœŸ"></a>1.17.3ã€ç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„æ—¥æœŸ</h5><p>æ‚¨å¯ä»¥ä½¿ç”¨ java.text.DateFormat ç±»åŠå…¶é™æ€æ–¹æ³• getDateTimeInstance() æ¥æ ¼å¼åŒ–ç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„æ—¥æœŸå’Œæ—¶é—´ã€‚ä¸‹é¢çš„å®ä¾‹æ¼”ç¤ºäº†å¦‚ä½•æ ¼å¼åŒ–ç‰¹å®šäºæŸä¸ªç»™å®šçš„åŒºåŸŸè®¾ç½®çš„æ—¥æœŸï¼š</p><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs lasso"><span class="hljs-keyword">public</span> class DateLocale extends HttpServlet&#123;<br>    <br>  <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> doGet(HttpServletRequest request,<br>                    HttpServletResponse response)<br>            throws ServletException, IOException<br>  &#123;<br>    <span class="hljs-comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span><br>    response.setContentType(<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span>);<br>    PrintWriter out = response.getWriter();<br>    <span class="hljs-comment">// è·å–å®¢æˆ·ç«¯çš„åŒºåŸŸè®¾ç½®</span><br>    <span class="hljs-built_in">Locale</span> <span class="hljs-built_in">locale</span> = request.getLocale( );<br>    <span class="hljs-built_in">String</span> <span class="hljs-built_in">date</span> = DateFormat.getDateTimeInstance(<br>                                  DateFormat.<span class="hljs-literal">FULL</span>, <br>                                  DateFormat.SHORT, <br>                                  <span class="hljs-built_in">locale</span>).format(<span class="hljs-literal">new</span> <span class="hljs-built_in">Date</span>( ));<br><br>    <span class="hljs-built_in">String</span> title = <span class="hljs-string">&quot;ç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„æ—¥æœŸ&quot;</span>;<br>    <span class="hljs-built_in">String</span> docType = <span class="hljs-string">&quot;&lt;!DOCTYPE html&gt; \n&quot;</span>;<br>      out.println(docType +<br>      <span class="hljs-string">&quot;&lt;html&gt;\n&quot;</span> +<br>      <span class="hljs-string">&quot;&lt;head&gt;&lt;title&gt;&quot;</span> + title + <span class="hljs-string">&quot;&lt;/title&gt;&lt;/head&gt;\n&quot;</span> +<br>      <span class="hljs-string">&quot;&lt;body bgcolor=\&quot;#f0f0f0\&quot;&gt;\n&quot;</span> +<br>      <span class="hljs-string">&quot;&lt;h1 align=\&quot;center\&quot;&gt;&quot;</span> + <span class="hljs-built_in">date</span> + <span class="hljs-string">&quot;&lt;/h1&gt;\n&quot;</span> +<br>      <span class="hljs-string">&quot;&lt;/body&gt;&lt;/html&gt;&quot;</span>);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="1-17-4ã€ç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„è´§å¸"><a href="#1-17-4ã€ç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„è´§å¸" class="headerlink" title="1.17.4ã€ç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„è´§å¸"></a>1.17.4ã€ç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„è´§å¸</h5><p>æ‚¨å¯ä»¥ä½¿ç”¨ java.text.NumberFormat ç±»åŠå…¶é™æ€æ–¹æ³• getCurrencyInstance() æ¥æ ¼å¼åŒ–æ•°å­—ï¼ˆæ¯”å¦‚ long ç±»å‹æˆ– double ç±»å‹ï¼‰ä¸ºç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„è´§å¸ã€‚ä¸‹é¢çš„å®ä¾‹æ¼”ç¤ºäº†å¦‚ä½•æ ¼å¼åŒ–ç‰¹å®šäºæŸä¸ªç»™å®šçš„åŒºåŸŸè®¾ç½®çš„è´§å¸ï¼š</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs scala">public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CurrencyLocale</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span></span>&#123;<br>    <br>  public void doGet(<span class="hljs-type">HttpServletRequest</span> request,<br>                    <span class="hljs-type">HttpServletResponse</span> response)<br>            <span class="hljs-keyword">throws</span> <span class="hljs-type">ServletException</span>, <span class="hljs-type">IOException</span><br>  &#123;<br>    <span class="hljs-comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span><br>    response.setContentType(<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span>);<br>    <span class="hljs-type">PrintWriter</span> out = response.getWriter();<br>    <span class="hljs-comment">// è·å–å®¢æˆ·ç«¯çš„åŒºåŸŸè®¾ç½®</span><br>    <span class="hljs-type">Locale</span> locale = request.getLocale( );<br>    <span class="hljs-type">NumberFormat</span> nft = <span class="hljs-type">NumberFormat</span>.getCurrencyInstance(locale);<br>    <span class="hljs-type">String</span> formattedCurr = nft.format(<span class="hljs-number">1000000</span>);<br><br>    <span class="hljs-type">String</span> title = <span class="hljs-string">&quot;ç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„è´§å¸&quot;</span>;<br>    <span class="hljs-type">String</span> docType = <span class="hljs-string">&quot;&lt;!DOCTYPE html&gt; \n&quot;</span>;<br>      out.println(docType +<br>      <span class="hljs-string">&quot;&lt;html&gt;\n&quot;</span> +<br>      <span class="hljs-string">&quot;&lt;head&gt;&lt;title&gt;&quot;</span> + title + <span class="hljs-string">&quot;&lt;/title&gt;&lt;/head&gt;\n&quot;</span> +<br>      <span class="hljs-string">&quot;&lt;body bgcolor=\&quot;#f0f0f0\&quot;&gt;\n&quot;</span> +<br>      <span class="hljs-string">&quot;&lt;h1 align=\&quot;center\&quot;&gt;&quot;</span> + formattedCurr + <span class="hljs-string">&quot;&lt;/h1&gt;\n&quot;</span> +<br>      <span class="hljs-string">&quot;&lt;/body&gt;&lt;/html&gt;&quot;</span>);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="1-17-5ã€ç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„ç™¾åˆ†æ¯”"><a href="#1-17-5ã€ç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„ç™¾åˆ†æ¯”" class="headerlink" title="1.17.5ã€ç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„ç™¾åˆ†æ¯”"></a>1.17.5ã€ç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„ç™¾åˆ†æ¯”</h5><p>æ‚¨å¯ä»¥ä½¿ç”¨ java.text.NumberFormat ç±»åŠå…¶é™æ€æ–¹æ³• getPercentInstance() æ¥æ ¼å¼åŒ–ç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„ç™¾åˆ†æ¯”ã€‚ä¸‹é¢çš„å®ä¾‹æ¼”ç¤ºäº†å¦‚ä½•æ ¼å¼åŒ–ç‰¹å®šäºæŸä¸ªç»™å®šçš„åŒºåŸŸè®¾ç½®çš„ç™¾åˆ†æ¯”ï¼š</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs scala">public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PercentageLocale</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span></span>&#123;<br>    <br>  public void doGet(<span class="hljs-type">HttpServletRequest</span> request,<br>                    <span class="hljs-type">HttpServletResponse</span> response)<br>            <span class="hljs-keyword">throws</span> <span class="hljs-type">ServletException</span>, <span class="hljs-type">IOException</span><br>  &#123;<br>    <span class="hljs-comment">// è®¾ç½®å“åº”å†…å®¹ç±»å‹</span><br>    response.setContentType(<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span>);<br>    <span class="hljs-type">PrintWriter</span> out = response.getWriter();<br>    <span class="hljs-comment">// è·å–å®¢æˆ·ç«¯çš„åŒºåŸŸè®¾ç½®</span><br>    <span class="hljs-type">Locale</span> locale = request.getLocale( );<br>    <span class="hljs-type">NumberFormat</span> nft = <span class="hljs-type">NumberFormat</span>.getPercentInstance(locale);<br>    <span class="hljs-type">String</span> formattedPerc = nft.format(<span class="hljs-number">0.51</span>);<br><br>    <span class="hljs-type">String</span> title = <span class="hljs-string">&quot;ç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„ç™¾åˆ†æ¯”&quot;</span>;<br>    <span class="hljs-type">String</span> docType = <span class="hljs-string">&quot;&lt;!DOCTYPE html&gt; \n&quot;</span>;<br>      out.println(docType +<br>      <span class="hljs-string">&quot;&lt;html&gt;\n&quot;</span> +<br>      <span class="hljs-string">&quot;&lt;head&gt;&lt;title&gt;&quot;</span> + title + <span class="hljs-string">&quot;&lt;/title&gt;&lt;/head&gt;\n&quot;</span> +<br>      <span class="hljs-string">&quot;&lt;body bgcolor=\&quot;#f0f0f0\&quot;&gt;\n&quot;</span> +<br>      <span class="hljs-string">&quot;&lt;h1 align=\&quot;center\&quot;&gt;&quot;</span> + formattedPerc + <span class="hljs-string">&quot;&lt;/h1&gt;\n&quot;</span> +<br>      <span class="hljs-string">&quot;&lt;/body&gt;&lt;/html&gt;&quot;</span>);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="1-18ã€éœ€è¦å…±äº«ä¿¡æ¯ä¸é¡µé¢è·³è½¬çš„åŸå› "><a href="#1-18ã€éœ€è¦å…±äº«ä¿¡æ¯ä¸é¡µé¢è·³è½¬çš„åŸå› " class="headerlink" title="1.18ã€éœ€è¦å…±äº«ä¿¡æ¯ä¸é¡µé¢è·³è½¬çš„åŸå› "></a>1.18ã€éœ€è¦å…±äº«ä¿¡æ¯ä¸é¡µé¢è·³è½¬çš„åŸå› </h4><p><img src="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/servlet.png"></p><h5 id="1-18-1ã€ä¸ºä»€ä¹ˆéœ€è¦è·³è½¬å’Œæ•°æ®å…±äº«ï¼Ÿ"><a href="#1-18-1ã€ä¸ºä»€ä¹ˆéœ€è¦è·³è½¬å’Œæ•°æ®å…±äº«ï¼Ÿ" class="headerlink" title="1.18.1ã€ä¸ºä»€ä¹ˆéœ€è¦è·³è½¬å’Œæ•°æ®å…±äº«ï¼Ÿ"></a>1.18.1ã€ä¸ºä»€ä¹ˆéœ€è¦è·³è½¬å’Œæ•°æ®å…±äº«ï¼Ÿ</h5><p>è·³è½¬ï¼šéœ€è¦åšè´£ä»»åˆ†ç¦»ï¼ˆServletæ“…é•¿å†™ä»£ç ï¼Œjspæ“…é•¿å±•ç¤ºé¡µé¢ï¼‰</p><p>å…±äº«ï¼šHttpæ˜¯æ— çŠ¶æ€çš„ï¼Œæˆ‘ä»¬è·³è½¬çš„æ—¶å€™æ•°æ®æ— æ³•ä¼ é€’ï¼Œå› æ­¤éœ€è¦åšæ•°æ®å…±äº«</p><h5 id="1-18-2ã€é¡µé¢è·³è½¬å¯ä»¥æ€ä¹ˆè·³"><a href="#1-18-2ã€é¡µé¢è·³è½¬å¯ä»¥æ€ä¹ˆè·³" class="headerlink" title="1.18.2ã€é¡µé¢è·³è½¬å¯ä»¥æ€ä¹ˆè·³?"></a>1.18.2ã€é¡µé¢è·³è½¬å¯ä»¥æ€ä¹ˆè·³?</h5><p>Servlet è·³è½¬ å…¶å®ƒèµ„æº(jsp,html)</p><p>Serlvet è·³è½¬ Servlet </p><p>ä¸€èˆ¬æ¥è¯´: æœ€åéƒ½ä¼šè·³è½¬åˆ°JSPé¡µé¢(æˆ‘ä»¬éœ€è¦JSPé¡µé¢æ¥åšå±•ç¤º)</p><h5 id="1-18-3ã€é¡µé¢è·³è½¬çš„ä¸‰ç§æ–¹å¼"><a href="#1-18-3ã€é¡µé¢è·³è½¬çš„ä¸‰ç§æ–¹å¼" class="headerlink" title="1.18.3ã€é¡µé¢è·³è½¬çš„ä¸‰ç§æ–¹å¼"></a>1.18.3ã€é¡µé¢è·³è½¬çš„ä¸‰ç§æ–¹å¼</h5><p>â‘ è¯·æ±‚è½¬å‘ã€â‘¡é‡å®šå‘ã€â‘¢è¯·æ±‚åŒ…å«</p><h5 id="1-18-4ã€é¡µé¢è·³è½¬ï¼šè¯·æ±‚è½¬å‘-Forward"><a href="#1-18-4ã€é¡µé¢è·³è½¬ï¼šè¯·æ±‚è½¬å‘-Forward" class="headerlink" title="1.18.4ã€é¡µé¢è·³è½¬ï¼šè¯·æ±‚è½¬å‘ Forward"></a>1.18.4ã€é¡µé¢è·³è½¬ï¼šè¯·æ±‚è½¬å‘ Forward</h5><p>åˆ›å»ºä¸¤ä¸ªServletï¼Œåˆ†åˆ«æ˜¯AServletä¸BServletï¼Œç„¶åæˆ‘è®¿é—®AServletï¼Œä»AServletè·³è½¬åˆ°BServletï¼›ï¼ˆåˆ†åˆ«ä½¿ç”¨3ç§æ–¹å¼ï¼‰</p><p>è½¬å‘çš„æ–¹å¼: <code>req.getRequestDispatcher(&quot;è·¯å¾„&quot;).forward(request, response);</code></p><p>æ³¨æ„:åƒä¸‡ä¸è¦å¿˜äº†forward</p><p><strong>æ¡ˆä¾‹ä»£ç ï¼š</strong></p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-meta">@WebServlet</span>(<span class="hljs-string">&quot;/forward/a&quot;</span>)<br>public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span></span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> void service(<span class="hljs-type">HttpServletRequest</span> req,<span class="hljs-type">HttpServletResponse</span> resp) <span class="hljs-keyword">throws</span> <span class="hljs-type">ServletException</span>, <span class="hljs-type">IOException</span> &#123;<br>        <span class="hljs-type">System</span>.out.println(<span class="hljs-string">&quot;ç°åœ¨AServletä¸­ã€‚ã€‚ã€‚&quot;</span>);<br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * req.getRequestDispatcher(String path)</span><br><span class="hljs-comment">         * æ‹¿åˆ°åˆ†å‘å™¨/ç¡®è®¤è·³è½¬çš„åœ°å€</span><br><span class="hljs-comment">         * forwardï¼šè¿›è¡Œè·³è½¬</span><br><span class="hljs-comment">         */</span><br>        req.getRequestDispatcher(<span class="hljs-string">&quot;/forward/b&quot;</span>).forward(req,resp);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-meta">@WebServlet</span>(<span class="hljs-string">&quot;/forward/b&quot;</span>)<br>public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> void service(<span class="hljs-type">HttpServletRequest</span> req, <span class="hljs-type">HttpServletResponse</span> resp) <span class="hljs-keyword">throws</span> <span class="hljs-type">IOException</span> &#123;<br>        <span class="hljs-type">System</span>.out.println(<span class="hljs-string">&quot;ç°åœ¨BServlet&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/jsp2.png"></p><p><strong>forwardè½¬å‘çš„ç‰¹ç‚¹ï¼š</strong></p><ul><li><p>åœ°å€æ åœ°å€ä¸å‘ç”Ÿå˜åŒ–</p></li><li><p>æµè§ˆå™¨åªå‘é€äº†ä¸€æ¬¡è¯·æ±‚ï¼ˆè¯·æ±‚å¯¹è±¡åªæœ‰ <code>HTTPServletRequest req</code> ä¸€ä¸ªï¼‰ï¼Œforwardæ˜¯ä½œä¸ºå‚æ•°ä¼ é€’ã€‚</p></li><li><p>AServletæ”¶åˆ°çš„æµè§ˆå™¨çš„è¯·æ±‚reqå’Œforwardä¼ ç»™BServletçš„reqæ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚é‡Œè¾¹çš„å†…å®¹æ˜¯ç›¸åŒçš„ã€‚</p></li><li><p>è¯·æ±‚çš„é¡ºåºä¸­ï¼Œåªæœ€åä¸€ä¸ªresponseæ‰èµ·æœ€ç”¨</p></li></ul><p><img src="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/response.png"></p><p><img src="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/jsp3.png"></p><ul><li><p>åœ¨AServlet é‡Œé¢ è·³è½¬ä¹‹åï¼Œresp.getWriter().println(i am aservletâ€);ä¸ä¼šæ˜¾ç¤ºåœ¨é¡µé¢ä¸Šï¼Œå› ä¸ºè¿™ä¸ªresp ä¸ä¼šè½¬å‘ä¹‹åï¼Œåœ¨å›AServleté‡Œé¢æ¥;</p></li><li><p>forwardä¸å¯è·¨åŸŸè®¿é—®</p></li></ul><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-tag">req</span><span class="hljs-selector-class">.getRequestDispatcher</span>(<span class="hljs-string">&quot;https://www.baidu.com&quot;</span>)<span class="hljs-selector-class">.forward</span>(req,resp);<br></code></pre></td></tr></table></figure><p><img src="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/jsp4.png"></p><ul><li>å¯ä»¥è®¿é—®web-infä¸­çš„èµ„æºï¼Œä½†æ˜¯ä¸èƒ½ç›´æ¥é€šè¿‡/locolhost/WEB-INF/haha.htmlè¿›è¡Œè®¿é—®ï¼Œå¯ä»¥é€šè¿‡è½¬å‘è®¿é—®åˆ°WEB-INFé‡Œé¢çš„å†…å®¹ã€‚</li></ul><p><img src="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/jsp5.png"></p><h5 id="1-18-5ã€é¡µé¢è·³è½¬ï¼šé‡å®šå‘Redirect"><a href="#1-18-5ã€é¡µé¢è·³è½¬ï¼šé‡å®šå‘Redirect" class="headerlink" title="1.18.5ã€é¡µé¢è·³è½¬ï¼šé‡å®šå‘Redirect"></a>1.18.5ã€é¡µé¢è·³è½¬ï¼šé‡å®šå‘Redirect</h5><p>è·³è½¬çš„æ–¹å¼: resp.sendRedirect(â€œè·¯å¾„â€);//ç›´æ¥è·³è½¬</p><p><strong>è½¬å‘ç‰¹ç‚¹:</strong></p><ul><li><p> åœ°å€ä¼šå‘ç”Ÿå˜åŒ–</p></li><li><p> å‘é€äº†å¤šæ¬¡è¯·æ±‚(æ¯è·³è½¬ä¸€æ¬¡å°±ä¼šå‘é€ä¸€æ¬¡è¯·æ±‚)</p></li><li><p> è¯·æ±‚ä¸ä¸€æ ·çš„ï¼ˆè¯·æ±‚å¤´ä¸å…±äº«ï¼‰</p></li></ul><p><img src="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/redirect.png"></p><ul><li> è¯·æ±‚çš„é¡ºåº, æ˜¾ç¤ºçš„ä¾ç„¶æ˜¯æœ€åä¸€ä¸ª</li></ul><p><img src="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/redirect3.png"></p><p><img src="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/redirect1.png"></p><ul><li> å¯ä»¥è·¨åŸŸè®¿é—®</li></ul><p><img src="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/redirect4.png"></p><ul><li> ä¸èƒ½è®¿é—®åˆ°WEB-INFä¸‹é¢çš„å†…å®¹</li></ul><p><img src="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/redirect5.png"></p><h5 id="1-18-6ã€é¡µé¢è·³è½¬ï¼šè¯·æ±‚åŒ…å«include"><a href="#1-18-6ã€é¡µé¢è·³è½¬ï¼šè¯·æ±‚åŒ…å«include" class="headerlink" title="1.18.6ã€é¡µé¢è·³è½¬ï¼šè¯·æ±‚åŒ…å«include"></a><strong>1.18.6ã€é¡µé¢è·³è½¬ï¼šè¯·æ±‚åŒ…å«include</strong></h5><p>ä¸€èˆ¬ä¸ä¼šåœ¨Servletä¸­ä½¿ç”¨</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-tag">req</span><span class="hljs-selector-class">.getRequestDispatcher</span>(<span class="hljs-string">&quot;/include/b&quot;</span>)<span class="hljs-selector-class">.include</span>(req, resp);<br></code></pre></td></tr></table></figure><p>è¿™ä¸ªä¸¤ä¸ªç»“æœä¼šåŒ…å«åœ¨ä¸€èµ·ï¼ˆæˆ‘ä»¬ä¸€èˆ¬ä¸ä½¿ç”¨ï¼‰ï¼š</p><p><img src="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/include.png"></p><h4 id="1-19ã€å››å¤§ä½œç”¨åŸŸå¯¹è±¡"><a href="#1-19ã€å››å¤§ä½œç”¨åŸŸå¯¹è±¡" class="headerlink" title="1.19ã€å››å¤§ä½œç”¨åŸŸå¯¹è±¡"></a>1.19ã€å››å¤§ä½œç”¨åŸŸå¯¹è±¡</h4><p>å¼•å…¥ï¼šæˆ‘ä»¬åœ¨åšæ•°æ®å…±äº«çš„æ—¶å€™ï¼ŒæŠŠæ•°æ®æ”¾åˆ°ä¸åŒçš„åœ°æ–¹ï¼Œè¿™ä¸ªä¸åŒçš„åœ°æ–¹å°±æ˜¯æ”¾åˆ°ä¸åŒçš„ä½œç”¨åŸŸé‡Œé¢ï¼Œä½œç”¨åŸŸå¯¹è±¡æœ‰4ä¸ªï¼›</p><table><thead><tr><th>ç±»</th><th>å¯¹è±¡(å«æ³•)</th><th>èŒƒå›´</th></tr></thead><tbody><tr><td>PageContext</td><td>pageContext</td><td>å½“å‰é¡µé¢(ä½œç”¨ä¸å¤§)  å½“å‰é¡µï¼Œç›´æ¥ä½¿ç”¨å°±æ˜¯ï¼Œæ ¹æœ¬ä¸éœ€è¦åœ¨æ”¾åˆ°å¯¹è±¡é‡Œé¢</td></tr><tr><td>HttpServletRequest</td><td>Request</td><td>ä¸€æ¬¡è¯·æ±‚(å¿…éœ€è¯·æ±‚è½¬å‘)</td></tr><tr><td>HttpSession</td><td>Sessionï¼ˆå¤šä¸ªå¯¹è±¡ï¼‰</td><td>ä¸€æ¬¡ä¼šè¯</td></tr><tr><td>ServletContext</td><td>application</td><td>æ•´ä¸ªåº”ç”¨(æœ‰ä¸”åªæœ‰ä¸€ä¸ªå¯¹è±¡)</td></tr></tbody></table><p>pageContextï¼šæ¯æ¬¡è®¿é—®çš„æ—¶å€™åˆ›å»ºï¼Œå¯ä»¥æœ‰å¤šä¸ªï¼›</p><p>Requestï¼šæ¯æ¬¡è¯·æ±‚çš„æ—¶å€™åˆ›å»ºï¼Œå¯ä»¥æœ‰å¤šä¸ªï¼›</p><p>Sessionï¼šæ¯æ¬¡ä¼šè¯çš„æ—¶å€™åˆ›å»ºï¼Œä¸åŒäººæ‰“å¼€ä¸åŒçš„æµè§ˆå™¨ï¼Œå°±åˆ›å»ºå¤šä¸ªï¼Œå¯ä»¥æœ‰ä¸ªå¤šä¸ªï¼›</p><p>Applicationï¼šæ•´ä¸ªåº”ç”¨æœ‰ä¸”åªæœ‰ä¸€ä¸ªå¯¹è±¡ï¼Œtomcatå¯åŠ¨çš„åˆ›å»ºï¼Œå…³é—­çš„æ—¶å€™é”€æ¯ï¼›</p><h5 id="1-19-1ã€ä½œç”¨åŸŸå¯¹è±¡çš„æ“ä½œ"><a href="#1-19-1ã€ä½œç”¨åŸŸå¯¹è±¡çš„æ“ä½œ" class="headerlink" title="1.19.1ã€ä½œç”¨åŸŸå¯¹è±¡çš„æ“ä½œ"></a>1.19.1ã€ä½œç”¨åŸŸå¯¹è±¡çš„æ“ä½œ</h5><p><code>serviceæ–¹æ³•</code>ä¸­æ‹¿åˆ°ç›¸åº”çš„ä½œç”¨åŸŸå¯¹è±¡</p><blockquote><p>request:req</p><p>session:req.getSession()</p><p>application:super.getServletContext()</p></blockquote><p><strong>1)ã€å‘ä½œç”¨åŸŸå¯¹è±¡ä¸­æ·»åŠ æ•°æ®</strong></p><p>ä½œç”¨åŸŸå¯¹è±¡.setAttribute(key, value);</p><p>ä¿®æ”¹ï¼ˆåœ¨è®¾ç½®ä¸€ä¸ªç›¸åŒçš„keyï¼Œè¦†ç›–åŸæœ‰çš„ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ScopeServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span></span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function">protect <span class="hljs-keyword">void</span> <span class="hljs-title">service</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException</span>&#123;<br>        req.setAttribute(<span class="hljs-string">&quot;key&quot;</span>,<span class="hljs-string">&quot;value&quot;</span>);<span class="hljs-comment">//æ·»åŠ åˆ°requestå¯¹è±¡</span><br>        req.getSession().setAttribute(<span class="hljs-string">&quot;key&quot;</span>,<span class="hljs-string">&quot;value&quot;</span>);<span class="hljs-comment">//æ·»åŠ åˆ°Sessionå¯¹è±¡ä¸­</span><br>        <span class="hljs-keyword">super</span>.getServletContext().setAttribute(<span class="hljs-string">&quot;key&quot;</span>,<span class="hljs-string">&quot;value&quot;</span>);<span class="hljs-comment">//æ·»åŠ åˆ°Applicatoin</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>2ï¼‰ã€ä½œç”¨åŸŸå¯¹è±¡ä¸­è·å–æ•°æ®</strong></p><p>ä½œç”¨åŸŸå¯¹è±¡.getAttribute(key);</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs scala">public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ScopeServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span></span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    protect void service(<span class="hljs-type">HttpServletRequest</span> req, <span class="hljs-type">HttpServletResponse</span> resp) <span class="hljs-keyword">throws</span> <span class="hljs-type">ServletException</span>&#123;<br>        req.getAttribute(<span class="hljs-string">&quot;key&quot;</span>);<span class="hljs-comment">//ä»requestå¯¹è±¡è·å–æ•°æ®</span><br>        req.getSession().getAttribute(<span class="hljs-string">&quot;key&quot;</span>);<span class="hljs-comment">//ä»Sessionå¯¹è±¡ä¸­è·å–</span><br>        <span class="hljs-keyword">super</span>.getServletContext().getAttribute(<span class="hljs-string">&quot;key&quot;</span>);<span class="hljs-comment">//ä»Applicatoinè·å–</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>3ï¼‰ã€åˆ é™¤ä½œç”¨åŸŸå¯¹è±¡ä¸­çš„æ•°æ®</strong></p><p>ä½œç”¨åŸŸå¯¹è±¡.removeAttribute(â€œkeyâ€);</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs scala">public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ScopeServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span></span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    protect void service(<span class="hljs-type">HttpServletRequest</span> req, <span class="hljs-type">HttpServletResponse</span> resp) <span class="hljs-keyword">throws</span> <span class="hljs-type">ServletException</span>&#123;<br>        req.removeAttribute(<span class="hljs-string">&quot;key&quot;</span>);<br>        req.getSession().removeAttribute(<span class="hljs-string">&quot;key&quot;</span>);<br>        <span class="hljs-keyword">super</span>.getServletContext().removeAttribute(<span class="hljs-string">&quot;key&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä½œç”¨åŸŸæœ‰å¤§å°ï¼Œå­˜åœ¨å“ªä¸ªä½œç”¨åŸŸå¯¹è±¡é‡Œï¼Œå°±éœ€è¦åœ¨å“ªä¸ªä½œç”¨åŸŸå¯¹è±¡é‡Œè·å–</p><p><img src="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/domain.png"></p><h5 id="1-19-2ã€å„ä¸ªä½œç”¨åŸŸä½¿ç”¨"><a href="#1-19-2ã€å„ä¸ªä½œç”¨åŸŸä½¿ç”¨" class="headerlink" title="1.19.2ã€å„ä¸ªä½œç”¨åŸŸä½¿ç”¨"></a>1.19.2ã€å„ä¸ªä½œç”¨åŸŸä½¿ç”¨</h5><p>â‘ Sessionåªç”¨äºç™»å½•ï¼Œä¿å­˜å½“å‰ç™»å½•çš„ç”¨æˆ·</p><p>â‘¡Requestæˆ‘ä»¬å¹³æ—¶ä»æ•°æ®åº“æ‹¿åˆ°æ•°æ®çš„å±•ç¤ºéƒ½å…¨éƒ¨Request</p><p>â‘¢Applicationä¸€èˆ¬ç”¨äºç»Ÿè®¡å½“å‰ç™»å½•ç”¨æˆ·çš„æ•°é‡ä¸Š</p><h5 id="1-19-3ã€ä½œç”¨åŸŸç»å…¸æ¡ˆä¾‹"><a href="#1-19-3ã€ä½œç”¨åŸŸç»å…¸æ¡ˆä¾‹" class="headerlink" title="1.19.3ã€ä½œç”¨åŸŸç»å…¸æ¡ˆä¾‹"></a>1.19.3ã€ä½œç”¨åŸŸç»å…¸æ¡ˆä¾‹</h5><p>åˆ›å»ºä¸€ä¸ªCountServlet.java</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æˆ‘ä»¬å»ä½œç”¨åŸŸå¯¹è±¡é‡Œé¢å»æ‹¿åˆ°ä¸€ä¸ªè®¡æ•°å™¨</span><br><span class="hljs-comment"> *   å¦‚æœæœ‰è¿™ä¸ªè®¡æ•°å™¨,å°±ç›´æ¥æ‹¿åˆ°</span><br><span class="hljs-comment"> *   å¦‚æœæ²¡æœ‰,åˆ›å»ºä¸€ä¸ª,å†æ‹¿åˆ°</span><br><span class="hljs-comment"> * å¯¹è®¡æ•°å™¨è¿›è¡ŒåŠ 1</span><br><span class="hljs-comment"> * å°†æ–°è®¡æ•°å™¨å†é‡æ–°æ”¾åˆ°ä½œç”¨åŸŸä¸­</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> javax.servlet.<span class="hljs-type">ServletException</span>;<br><span class="hljs-keyword">import</span> javax.servlet.annotation.<span class="hljs-type">WebServlet</span>;<br><span class="hljs-keyword">import</span> javax.servlet.http.<span class="hljs-type">HttpServlet</span>;<br><span class="hljs-keyword">import</span> javax.servlet.http.<span class="hljs-type">HttpServletRequest</span>;<br><span class="hljs-keyword">import</span> javax.servlet.http.<span class="hljs-type">HttpServletResponse</span>;<br><span class="hljs-keyword">import</span> java.io.<span class="hljs-type">IOException</span>;<br><br><span class="hljs-meta">@WebServlet</span>(<span class="hljs-string">&quot;/scope/count&quot;</span>)<br>public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CountServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> void service(<span class="hljs-type">HttpServletRequest</span> req, <span class="hljs-type">HttpServletResponse</span> resp) <span class="hljs-keyword">throws</span> <span class="hljs-type">ServletException</span>, <span class="hljs-type">IOException</span> &#123;<br>        <span class="hljs-comment">//requestä½œç”¨åŸŸ</span><br>        <span class="hljs-type">Integer</span> reqCount=(<span class="hljs-type">Integer</span>)req.getAttribute(<span class="hljs-string">&quot;REQ_IN_COUNT&quot;</span>);<br>        <span class="hljs-keyword">if</span>(reqCount==<span class="hljs-literal">null</span>)&#123;<br>            reqCount=<span class="hljs-number">0</span>;<br>        &#125;<br>        reqCount=reqCount+<span class="hljs-number">1</span>;<br>        req.setAttribute(<span class="hljs-string">&quot;REQ_IN_COUNT&quot;</span>,reqCount);<br>        <span class="hljs-comment">//sessionä½œç”¨åŸŸ</span><br>        <span class="hljs-type">Integer</span> sessionCount=(<span class="hljs-type">Integer</span>)req.getSession().getAttribute(<span class="hljs-string">&quot;SESSION_IN_COUNT&quot;</span>);<br>        <span class="hljs-keyword">if</span>(sessionCount==<span class="hljs-literal">null</span>)&#123;<br>            sessionCount=<span class="hljs-number">0</span>;<br>        &#125;<br>        sessionCount=sessionCount+<span class="hljs-number">1</span>;<br>        req.getSession().setAttribute(<span class="hljs-string">&quot;SESSION_IN_COUNT&quot;</span>,sessionCount);<br><br>        <span class="hljs-comment">//applicationä½œç”¨åŸŸ</span><br>        <span class="hljs-type">Integer</span> appCount=(<span class="hljs-type">Integer</span>)<span class="hljs-keyword">super</span>.getServletContext().getAttribute(<span class="hljs-string">&quot;APP_IN_COUNT&quot;</span>);<br>        <span class="hljs-keyword">if</span>(appCount==<span class="hljs-literal">null</span>)&#123;<br>            appCount=<span class="hljs-number">0</span>;<br>        &#125;<br>        appCount=appCount+<span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">super</span>.getServletContext().setAttribute(<span class="hljs-string">&quot;APP_IN_COUNT&quot;</span>,appCount);<br><br>        req.getRequestDispatcher(<span class="hljs-string">&quot;/scope/result&quot;</span>).forward(req,resp);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åˆ›å»ºä¸€ä¸ªScopeServlet.javaæ‹¿åˆ°è®¡æ•°å™¨çš„å€¼</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-keyword">import</span> javax.servlet.annotation.<span class="hljs-type">WebServlet</span>;<br><span class="hljs-keyword">import</span> javax.servlet.http.<span class="hljs-type">HttpServlet</span>;<br><span class="hljs-keyword">import</span> javax.servlet.http.<span class="hljs-type">HttpServletRequest</span>;<br><span class="hljs-keyword">import</span> javax.servlet.http.<span class="hljs-type">HttpServletResponse</span>;<br><span class="hljs-keyword">import</span> java.io.<span class="hljs-type">IOException</span>;<br><br><span class="hljs-meta">@WebServlet</span>(<span class="hljs-string">&quot;/scope/result&quot;</span>)<br>public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ScopeServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> void service(<span class="hljs-type">HttpServletRequest</span> req, <span class="hljs-type">HttpServletResponse</span> resp) <span class="hljs-keyword">throws</span> <span class="hljs-type">IOException</span> &#123;<br>        <span class="hljs-type">Integer</span> reqCount=(<span class="hljs-type">Integer</span>)req.getAttribute(<span class="hljs-string">&quot;REQ_IN_COUNT&quot;</span>);<br>        resp.getWriter().println(<span class="hljs-string">&quot;request:&quot;</span>+reqCount);<br><br>        <span class="hljs-type">Integer</span> sessionCount=(<span class="hljs-type">Integer</span>)req.getSession().getAttribute(<span class="hljs-string">&quot;SESSION_IN_COUNT&quot;</span>);<br>        resp.getWriter().println(<span class="hljs-string">&quot;session:&quot;</span>+sessionCount);<br><br>        <span class="hljs-type">Integer</span> appCount=(<span class="hljs-type">Integer</span>)<span class="hljs-keyword">super</span>.getServletContext().getAttribute(<span class="hljs-string">&quot;APP_IN_COUNT&quot;</span>);<br>        resp.getWriter().println(<span class="hljs-string">&quot;application:&quot;</span>+appCount);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/Scope.png"></p><p>æ³¨ï¼šæœ‰çš„æµè§ˆå™¨å¦‚Chromeï¼Œå› å—æµè§ˆå™¨åå°é©»ç•™å½±å“ï¼Œé‡æ–°æ‰“å¼€æµè§ˆå™¨ä¸ä¼šåˆ›å»ºæ–°çš„sessionä¼šè¯ï¼Œè€Œæ˜¯ä½¿ç”¨åŸæœ‰çš„sessionï¼Œç»™æˆ‘ä»¬ä¸€ç§é‡å¯æµè§ˆå™¨sessionä¸ä¼šé‡æ–°è®¡æ•°çš„å°è±¡ã€‚</p><h5 id="1-19-4ã€ServletContextå¯¹è±¡ä»‹ç»"><a href="#1-19-4ã€ServletContextå¯¹è±¡ä»‹ç»" class="headerlink" title="1.19.4ã€ServletContextå¯¹è±¡ä»‹ç»"></a>1.19.4ã€ServletContextå¯¹è±¡ä»‹ç»</h5><p><strong>1ï¼‰ã€è·å–ServletContext ä¸Šä¸‹æ–‡å¯¹è±¡</strong></p><p>ServletContext è¡¨ç¤ºä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œå¾—åˆ°ä¸Šä¸‹æ–‡å¯¹è±¡ServletContextå¯¹è±¡çš„å››ç§æ–¹å¼ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs routeros">ServletContext <span class="hljs-attribute">app1</span>=super.getServletContext();<br>ServletContext <span class="hljs-attribute">app2</span>=super.getServletConfig().getServletContext();<br>ServletContext <span class="hljs-attribute">app3</span>=req.getServletContext();<br>ServletContext <span class="hljs-attribute">app4</span>=re1.getSession().getServletContext();<br></code></pre></td></tr></table></figure><p>å®ƒä»¬æ‹¿åˆ°çš„å¯¹è±¡éƒ½æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œé‚£æˆ‘ä»¬é€‰æ‹©å“ªç§æ–¹å¼å‘¢ï¼Ÿ</p><blockquote><p>ç¬¬â‘ å’Œç¬¬â‘¡ç§æˆ‘ä»¬è‚¯å®šé€‰æ‹©â‘ </p><p>ç¬¬â‘¢å’Œå’Œç¬¬â‘£ç§æˆ‘ä»¬è‚¯å®šé€‰æ‹©â‘¢ï¼ˆç®€å•ï¼‰</p><p>ç¬¬â‘ å’Œç¬¬â‘¢ç§é€‰æ‹©å“ªç§ï¼Ÿ</p><ul><li>å¦‚æœåœ¨servleté‡Œé¢ æœ‰superï¼Œä½¿ç”¨ç¬¬ä¸€ç§â‘ ï¼›</li><li>å¦‚æœæ²¡æœ‰åœ¨servletï¼Œæ™®é€šç±»é‡Œé¢ ï¼Œå¯ä»¥é€šè¿‡ä¼ é€’reqï¼Œé€‰æ‹©â‘¢</li></ul><p>ç¬¬â‘¢ç§æ›´ç®€å•,ä¸å…¼å®¹ä½ç‰ˆæœ¬ï¼Œä¸å…¼å®¹tomcat7ä»¥å‰çš„ç‰ˆæœ¬</p><p>ç¬¬â‘£ç§éº»çƒ¦ä¸€ç‚¹,å…¼å®¹æ€§å¥½</p></blockquote><p><strong>2ï¼‰ã€ServletContextçš„å¸¸ç”¨æ–¹æ³•</strong></p><p>è·å–åˆ°ServletContext ä¸Šä¸‹æ–‡å¯¹è±¡åï¼Œæ€ä¹ˆç”¨ï¼Ÿæœ‰ä»€ä¹ˆç”¨ï¼Ÿ</p><p>ä¸»è¦çœ‹é‡Œé¢çš„ä¸€äº›æ–¹æ³•ï¼š</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-tag">getContextPath</span>();<span class="hljs-comment">//æ‹¿åˆ°ä¸Šä¸‹æ–‡è·¯å¾„</span><br><span class="hljs-selector-tag">getRealPath</span>(â€œ/â€);æ‹¿åˆ°çœŸå®è·¯å¾„<span class="hljs-selector-tag">--</span>(ä»¥ååšä¸Šä¼ ä¸‹è½½å¯ä»¥ä½¿ç”¨)<br><span class="hljs-selector-tag">getInitParameter</span>(â€œencodingâ€);<span class="hljs-comment">//æ‹¿åˆ°åˆå§‹åŒ–å‚æ•°ï¼ˆåªèƒ½æ‹¿åˆ°å…¨å±€é‡Œé¢çš„å‚æ•°ä¿¡æ¯ï¼‰</span><br></code></pre></td></tr></table></figure><p><img src="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/%E4%B8%8A%E4%B8%8B%E9%97%AE%E5%AF%B9%E8%B1%A1%E6%96%B9%E6%B3%95.png"></p><p>â‘ <strong>ä»¥å‰</strong>å–åˆ°servleté‡Œé¢é…ç½®çš„å‚æ•°ä¿¡æ¯ï¼Œ</p><p> é€šè¿‡super.getServletConfig().getInitParameter(â€œencodingâ€)æ‹¿åˆ°</p><p><img src="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/se.png"></p><p>â‘¡<strong>ç°åœ¨</strong>web.xmlé…ç½®å…¨å±€çš„ä¿¡æ¯ï¼Œé€šè¿‡super.getServletContext().getInitParameter(â€œencodingâ€) æ‹¿åˆ°ï¼š</p><p><img src="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/webxml.png"></p><p>æ³¨æ„ï¼šsuper.getServletContext().getInitParameter(â€œencodingâ€); åªèƒ½æ‹¿åˆ°context-paramé‡Œé¢é…ç½®ï¼Œä¸èƒ½æ‹¿åˆ°Servleté‡Œé¢é…ç½®çš„å‚æ•°ï¼›</p><h5 id="1-19-5ã€è¡¥å……å†…å®¹"><a href="#1-19-5ã€è¡¥å……å†…å®¹" class="headerlink" title="1.19.5ã€è¡¥å……å†…å®¹"></a>1.19.5ã€è¡¥å……å†…å®¹</h5><p><strong>1ï¼‰ã€req.getParameter(â€œâ€)å’Œreq.getAttribute(â€œâ€)çš„åŒºåˆ«?</strong></p><blockquote><p>req.getParameter :ç”¨æˆ·ä¼ è¿‡æ¥çš„</p><p>req.getAttribute :ä»ä½œç”¨åŸŸé‡Œæ‹¿çš„(å¿…éœ€æ˜¯æ”¾åˆ°ä½œç”¨åŸŸé‡Œçš„)</p></blockquote><p><strong>2ï¼‰ã€ServletConfig.getInitParameterå’Œapplication.getInitParameter æœ‰ä»€ä¹ˆåŒºåˆ«?</strong></p><blockquote><p>ServletConfig.getInitParameter åªä½œä¸ºäºä¸€ä¸ªServlet</p><p>application.getInitParameter æ•´ä¸ªåº”ç”¨éƒ½å¯ä»¥æ‹¿åˆ°</p></blockquote><h4 id="1-20ã€Servleté…ç½®éƒ¨ç½²"><a href="#1-20ã€Servleté…ç½®éƒ¨ç½²" class="headerlink" title="1.20ã€Servleté…ç½®éƒ¨ç½²"></a>1.20ã€Servleté…ç½®éƒ¨ç½²</h4><p>åœ¨Servlet2.5è§„èŒƒä¹‹å‰ï¼ŒJava Webåº”ç”¨çš„ç»å¤§éƒ¨åˆ†ç»„ä»¶éƒ½é€šè¿‡web.xmlæ–‡ä»¶æ¥é…ç½®ç®¡ç†ï¼ŒServlet3.0è§„èŒƒå¯é€šè¿‡Annotationæ¥é…ç½®ç®¡ç†Webç»„ä»¶ï¼Œå› æ­¤web.xmlæ–‡ä»¶å¯ä»¥å˜å¾—æ›´åŠ ç®€æ´ï¼Œè¿™ä¹Ÿæ˜¯Servlet3.0çš„é‡è¦ç®€åŒ–ã€‚</p><p>ä¸¤ç§æ–¹å¼ï¼š</p><h5 id="ï¼ˆ1ï¼‰ï¼Œé€šè¿‡web-xmlé…ç½®"><a href="#ï¼ˆ1ï¼‰ï¼Œé€šè¿‡web-xmlé…ç½®" class="headerlink" title="ï¼ˆ1ï¼‰ï¼Œé€šè¿‡web.xmlé…ç½®"></a>ï¼ˆ1ï¼‰ï¼Œé€šè¿‡<strong>web.xml</strong>é…ç½®</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>GetApplication<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>com.fpp.GetApplication<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- é€šè¿‡servletConfig getInitParameter()å–å‡ºå‚æ•° --&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>GetApplication<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/GetApplication<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br></code></pre></td></tr></table></figure><h5 id="ï¼ˆ2ï¼‰ï¼Œä½¿ç”¨-WebServlet-Annotation-è¿›è¡Œé…ç½®"><a href="#ï¼ˆ2ï¼‰ï¼Œä½¿ç”¨-WebServlet-Annotation-è¿›è¡Œé…ç½®" class="headerlink" title="ï¼ˆ2ï¼‰ï¼Œä½¿ç”¨**@WebServlet Annotation**è¿›è¡Œé…ç½®"></a>ï¼ˆ2ï¼‰ï¼Œä½¿ç”¨**@WebServlet Annotation**è¿›è¡Œé…ç½®</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@WebServlet(name=&quot;AdminAddServlet&quot;,urlPatterns=&quot;/adminAddServlet&quot;)</span>  <br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AdminAddServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span>  </span><br></code></pre></td></tr></table></figure><p> @WebServletæ”¯æŒçš„å¸¸ç”¨å±æ€§ï¼š</p><blockquote><p>displayName,initParams,loadOnStartup,name,urlPatterns/value,asyncSupported</p></blockquote><p>å¦‚æœæ‰“ç®—ä½¿ç”¨Annotationæ¥é…ç½®Servletï¼Œéœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</p><ul><li>ä¸è¦åœ¨web.xmlæ–‡ä»¶çš„æ ¹å…ƒç´ ï¼ˆ&lt;web-appâ€”/&gt;ï¼‰ä¸­æŒ‡å®šmetadata-complete=â€œtrueâ€ï¼›</li><li>ä¸è¦åœ¨web.xmlæ–‡ä»¶ä¸­é…ç½®è¯¥Servlet</li></ul><h3 id="2ã€JSP"><a href="#2ã€JSP" class="headerlink" title="2ã€JSP"></a>2ã€JSP</h3><h4 id="2-1ã€JSPç®€ä»‹"><a href="#2-1ã€JSPç®€ä»‹" class="headerlink" title="2.1ã€JSPç®€ä»‹"></a>2.1ã€JSPç®€ä»‹</h4><p>JSP ä¸ PHPã€ASPã€ASP.NET ç­‰è¯­è¨€ç±»ä¼¼ï¼Œè¿è¡Œåœ¨æœåŠ¡ç«¯çš„è¯­è¨€ã€‚</p><p>JSPï¼ˆå…¨ç§°Java Server Pagesï¼‰æ˜¯ç”± Sun Microsystems å…¬å¸å€¡å¯¼å’Œè®¸å¤šå…¬å¸å‚ä¸å…±åŒåˆ›å»ºçš„ä¸€ç§ä½¿è½¯ä»¶å¼€å‘è€…å¯ä»¥å“åº”å®¢æˆ·ç«¯è¯·æ±‚ï¼Œè€ŒåŠ¨æ€ç”Ÿæˆ HTMLã€XML æˆ–å…¶ä»–æ ¼å¼æ–‡æ¡£çš„Webç½‘é¡µçš„æŠ€æœ¯æ ‡å‡†ã€‚</p><p>JSP æŠ€æœ¯æ˜¯ä»¥ Java è¯­è¨€ä½œä¸ºè„šæœ¬è¯­è¨€çš„ï¼ŒJSP ç½‘é¡µä¸ºæ•´ä¸ªæœåŠ¡å™¨ç«¯çš„ Java åº“å•å…ƒæä¾›äº†ä¸€ä¸ªæ¥å£æ¥æœåŠ¡äºHTTPçš„åº”ç”¨ç¨‹åºã€‚</p><p><strong>Servletä¹Ÿæ˜¯Javaç”¨æ¥åšåŠ¨æ€ç½‘é¡µçš„æŠ€æœ¯ï¼Œå› ä¸ºJSPå°±æ˜¯Servletï¼›</strong></p><p>Servlet:         <strong>Javaä»£ç (ä¸»)</strong> + HTMLä»£ç </p><p>Jsp:                Javaä»£ç  + <strong>HTMLä»£ç (ä¸»)</strong></p><p>JSPå°±æ˜¯Servlet ( æˆ‘ä»¬å¼€å‘éœ€è¦æŠŠ jsp å’Œ Servlet ç»“åˆä½¿ç”¨)</p><p>Servletæ›´æ“…é•¿å†™javaä¸šåŠ¡ä»£ç ï¼ŒJspæ›´æ“…é•¿äºæ˜¾ç¤ºçš„HTMLé¡µé¢ï¼›</p><p>å¼€å‘ç›®æ ‡ï¼š<strong>servleté‡Œé¢ä¸è¦å†™HTMLä»£ç ï¼Œjspé‡Œé¢ä¸è¦å†™javaä»£ç ã€‚</strong></p><p>ä¸€ä¸ªåŸºæœ¬çš„JSPä»£ç ç»“æ„ï¼š</p><p><img src="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/JSPS.png"></p><p>æ³¨æ„ï¼šJSPé¡µé¢ä¸èƒ½ç›´æ¥æ‹–åˆ°æµè§ˆå™¨ä¸Šé¢è¿è¡Œï¼Œå®ƒåªèƒ½åœ¨æœåŠ¡å™¨ä¸Šé¢ä½¿ç”¨ï¼ŒæœåŠ¡å™¨å¯¹å®ƒä½œäº†ç¼–è¯‘çš„è¿”å›ç»™æµè§ˆå™¨HTMLæ ¼å¼çš„é¡µé¢ã€‚</p><h4 id="2-2ã€JSPåŸç†åˆ†æ"><a href="#2-2ã€JSPåŸç†åˆ†æ" class="headerlink" title="2.2ã€JSPåŸç†åˆ†æ"></a>2.2ã€JSPåŸç†åˆ†æ</h4><h5 id="2-2-1ã€JSPç»“æ„"><a href="#2-2-1ã€JSPç»“æ„" class="headerlink" title="2.2.1ã€JSPç»“æ„"></a>2.2.1ã€JSPç»“æ„</h5><p>ç½‘ç»œæœåŠ¡å™¨éœ€è¦ä¸€ä¸ª JSP å¼•æ“ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªå®¹å™¨æ¥å¤„ç† JSP é¡µé¢ã€‚å®¹å™¨è´Ÿè´£æˆªè·å¯¹ JSP é¡µé¢çš„è¯·æ±‚ã€‚æœ¬æ•™ç¨‹ä½¿ç”¨å†…åµŒ JSP å®¹å™¨çš„ Apache æ¥æ”¯æŒ JSP å¼€å‘ã€‚ </p><p> JSP å®¹å™¨ä¸ Web æœåŠ¡å™¨ååŒåˆä½œï¼Œä¸ºJSPçš„æ­£å¸¸è¿è¡Œæä¾›å¿…è¦çš„è¿è¡Œç¯å¢ƒå’Œå…¶ä»–æœåŠ¡ï¼Œå¹¶ä¸”èƒ½å¤Ÿæ­£ç¡®è¯†åˆ«ä¸“å±äº JSP ç½‘é¡µçš„ç‰¹æ®Šå…ƒç´ ã€‚ </p><p>ä¸‹å›¾æ˜¾ç¤ºäº† JSP å®¹å™¨å’Œ JSP æ–‡ä»¶åœ¨ Web åº”ç”¨ä¸­æ‰€å¤„çš„ä½ç½®ã€‚ </p><p><img src="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/StructJSP.png"></p><h5 id="2-2-2ã€JSPå¤„ç†"><a href="#2-2-2ã€JSPå¤„ç†" class="headerlink" title="2.2.2ã€JSPå¤„ç†"></a>2.2.2ã€JSPå¤„ç†</h5><p>ä»¥ä¸‹æ­¥éª¤è¡¨æ˜äº† Web æœåŠ¡å™¨æ˜¯å¦‚ä½•ä½¿ç”¨JSPæ¥åˆ›å»ºç½‘é¡µçš„ï¼š </p><ul><li><p>å°±åƒå…¶ä»–æ™®é€šçš„ç½‘é¡µä¸€æ ·ï¼Œæ‚¨çš„æµè§ˆå™¨å‘é€ä¸€ä¸ª HTTP è¯·æ±‚ç»™æœåŠ¡å™¨ã€‚</p></li><li><p>Web æœåŠ¡å™¨è¯†åˆ«å‡ºè¿™æ˜¯ä¸€ä¸ªå¯¹ JSP ç½‘é¡µçš„è¯·æ±‚ï¼Œå¹¶ä¸”å°†è¯¥è¯·æ±‚ä¼ é€’ç»™ JSP å¼•æ“ã€‚é€šè¿‡ä½¿ç”¨  URLæˆ–è€… .jsp æ–‡ä»¶æ¥å®Œæˆã€‚</p></li><li><p>JSP å¼•æ“ä»ç£ç›˜ä¸­è½½å…¥ JSP æ–‡ä»¶ï¼Œç„¶åå°†å®ƒä»¬è½¬åŒ–ä¸º Servletã€‚è¿™ç§è½¬åŒ–åªæ˜¯ç®€å•åœ°å°†æ‰€æœ‰æ¨¡æ¿æ–‡æœ¬æ”¹ç”¨ println() è¯­å¥ï¼Œå¹¶ä¸”å°†æ‰€æœ‰çš„ JSP å…ƒç´ è½¬åŒ–æˆ Java ä»£ç ã€‚</p></li><li><p>JSP å¼•æ“å°† Servlet ç¼–è¯‘æˆå¯æ‰§è¡Œç±»ï¼Œå¹¶ä¸”å°†åŸå§‹è¯·æ±‚ä¼ é€’ç»™ Servlet å¼•æ“ã€‚</p></li><li><p>Web æœåŠ¡å™¨çš„æŸç»„ä»¶å°†ä¼šè°ƒç”¨ Servlet å¼•æ“ï¼Œç„¶åè½½å…¥å¹¶æ‰§è¡Œ Servlet ç±»ã€‚åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼ŒServlet äº§ç”Ÿ HTML æ ¼å¼çš„è¾“å‡ºå¹¶å°†å…¶å†…åµŒäº HTTP response ä¸­ä¸Šäº¤ç»™ Web æœåŠ¡å™¨ã€‚</p></li><li><p>Web æœåŠ¡å™¨ä»¥é™æ€ HTML ç½‘é¡µçš„å½¢å¼å°† HTTP response è¿”å›åˆ°æ‚¨çš„æµè§ˆå™¨ä¸­ã€‚</p></li><li><p>æœ€ç»ˆï¼ŒWeb æµè§ˆå™¨å¤„ç† HTTP response ä¸­åŠ¨æ€äº§ç”Ÿçš„HTMLç½‘é¡µï¼Œå°±å¥½åƒåœ¨å¤„ç†é™æ€ç½‘é¡µä¸€æ ·ã€‚</p><p>ä»¥ä¸ŠæåŠåˆ°çš„æ­¥éª¤å¯ä»¥ç”¨ä¸‹å›¾æ¥è¡¨ç¤ºï¼š </p></li></ul><p><img src="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/jsp-processing.jpg"></p><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒJSP å¼•æ“ä¼šæ£€æŸ¥ JSP æ–‡ä»¶å¯¹åº”çš„ Servlet æ˜¯å¦å·²ç»å­˜åœ¨ï¼Œå¹¶ä¸”æ£€æŸ¥ JSP æ–‡ä»¶çš„ä¿®æ”¹æ—¥æœŸæ˜¯å¦æ—©äº Servletã€‚å¦‚æœ JSP æ–‡ä»¶çš„ä¿®æ”¹æ—¥æœŸæ—©äºå¯¹åº”çš„ Servletï¼Œé‚£ä¹ˆå®¹å™¨å°±å¯ä»¥ç¡®å®š JSP æ–‡ä»¶æ²¡æœ‰è¢«ä¿®æ”¹è¿‡å¹¶ä¸” Servlet æœ‰æ•ˆã€‚è¿™ä½¿å¾—æ•´ä¸ªæµç¨‹ä¸å…¶ä»–è„šæœ¬è¯­è¨€ï¼ˆæ¯”å¦‚ PHPï¼‰ç›¸æ¯”è¦é«˜æ•ˆå¿«æ·ä¸€äº›ã€‚ </p><p> æ€»çš„æ¥è¯´ï¼ŒJSP ç½‘é¡µå°±æ˜¯ç”¨å¦ä¸€ç§æ–¹å¼æ¥ç¼–å†™ Servlet è€Œä¸ç”¨æˆä¸º Java ç¼–ç¨‹é«˜æ‰‹ã€‚é™¤äº†è§£é‡Šé˜¶æ®µå¤–ï¼ŒJSP ç½‘é¡µå‡ ä¹å¯ä»¥è¢«å½“æˆä¸€ä¸ªæ™®é€šçš„ Servlet æ¥å¯¹å¾…ã€‚ </p><h5 id="2-2-3ã€JSPç”Ÿå‘½å‘¨æœŸ"><a href="#2-2-3ã€JSPç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="2.2.3ã€JSPç”Ÿå‘½å‘¨æœŸ"></a>2.2.3ã€JSPç”Ÿå‘½å‘¨æœŸ</h5><p>JSPç”Ÿå‘½å‘¨æœŸå°±æ˜¯ä»åˆ›å»ºåˆ°é”€æ¯çš„æ•´ä¸ªè¿‡ç¨‹ï¼Œç±»ä¼¼äºservletç”Ÿå‘½å‘¨æœŸï¼ŒåŒºåˆ«åœ¨äºJSPç”Ÿå‘½å‘¨æœŸè¿˜åŒ…æ‹¬å°†JSPæ–‡ä»¶ç¼–è¯‘æˆservletã€‚ </p><ul><li><p><strong>ç¼–è¯‘é˜¶æ®µï¼š</strong></p><p>è§£æJSPæ–‡ä»¶ï¼Œè½¬æ¢ä¸ºServletï¼Œservletå®¹å™¨ç¼–è¯‘servletæºæ–‡ä»¶ï¼Œç”Ÿæˆservletç±»</p></li><li><p>åˆå§‹åŒ–é˜¶æ®µï¼š</p><p>åŠ è½½ä¸JSPå¯¹åº”çš„servletç±»ï¼Œåˆ›å»ºå…¶å®ä¾‹ï¼Œå¹¶è°ƒç”¨å®ƒçš„åˆå§‹åŒ–æ–¹æ³•</p></li><li><p>æ‰§è¡Œé˜¶æ®µï¼š</p><p>è°ƒç”¨ä¸JSPå¯¹åº”çš„servletå®ä¾‹çš„æœåŠ¡æ–¹æ³•</p></li><li><p>é”€æ¯é˜¶æ®µï¼š</p><p>è°ƒç”¨ä¸JSPå¯¹åº”çš„servletå®ä¾‹çš„é”€æ¯æ–¹æ³•ï¼Œç„¶åé”€æ¯servletå®ä¾‹</p></li></ul><p>å¾ˆæ˜æ˜¾ï¼ŒJSPç”Ÿå‘½å‘¨æœŸçš„å››ä¸ªä¸»è¦é˜¶æ®µå’Œservletç”Ÿå‘½å‘¨æœŸéå¸¸ç›¸ä¼¼ï¼Œä¸‹é¢ç»™å‡ºå›¾ç¤ºï¼š </p><p><img src="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/jsp_life_cycle.jpg"></p><p><img src="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/Snip.png"></p><h5 id="2-2-4ã€ä»£ç åˆ†æ"><a href="#2-2-4ã€ä»£ç åˆ†æ" class="headerlink" title="2.2.4ã€ä»£ç åˆ†æ"></a>2.2.4ã€ä»£ç åˆ†æ</h5><p>Jspé¡µé¢ä¸Šé¢çš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼Œæ€ä¹ˆè¿è¡Œä¹‹åï¼Œå°±å˜æˆå³è¾¹çš„æ—¶é—´å‘¢ï¼Ÿ</p><figure class="highlight vbscript-html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs vbscript-html"><span class="vbscript">&lt;%@ page contentType=<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="hljs-string">&quot;java&quot;</span> %&gt;</span><br><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="xml">    HelloWorldï¼</span><span class="vbscript">&lt;%= <span class="hljs-keyword">new</span> java.util.<span class="hljs-built_in">Date</span>().<span class="hljs-keyword">to</span><span class="hljs-built_in">String</span>()%&gt;</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p><img src="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/fenxi.png"></p><p>å½“æˆ‘ä»¬è®¿é—® 20191120.jspæ—¶ï¼Œä¼šå…ˆå»æ‰¾åˆ°web.xmlé‡Œé¢&lt;url-pattern&gt;*.jsp&lt;/url-pattern&gt;ï¼Œåœ¨ä¼šæ‰¾åˆ° JspServletï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><img src="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/procedure.png"></p><p>JspServletï¼šåœ¨è¿™é‡Œé¢ï¼ŒæŠŠæˆ‘ä»¬è‡ªå·±å†™çš„JSPé¡µé¢ç»™ç¿»è¯‘æˆä¸€ä¸ªJAVAæ–‡ä»¶ï¼Œç¿»è¯‘å¥½çš„æ–‡ä»¶æ”¾åœ¨         apache-tomcat-7.0.57\work\Catalinaæ–‡ä»¶å¤¹ä¸‹é¢  </p><p><img src="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/compile.png"></p><p>è®°äº‹æœ¬æ‰“å¼€è¿™ä¸ªç”Ÿæˆçš„Javaæ–‡ä»¶ï¼š</p><p><img src="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/shengcheng.png"></p><p>ç¿»è¯‘è¿‡ç¨‹ï¼š</p><p><img src="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/procedure1.png"></p><h4 id="2-3ã€JSPè¯­æ³•"><a href="#2-3ã€JSPè¯­æ³•" class="headerlink" title="2.3ã€JSPè¯­æ³•"></a>2.3ã€JSPè¯­æ³•</h4><p>è¯·å¤§å®¶è®°ä½ä¸€å¥è¯:</p><blockquote><p>åœ¨JSPé‡Œé¢æœ€å¥½ä¸è¦å†™JAVAä»£ç ï¼Œåœ¨Servleté‡Œé¢ä¹Ÿä¸è¦å†™HTMLä»£ç ï¼›</p><p>åˆ°ç›®å‰ï¼Œåˆå­¦è€…å¯èƒ½è¿˜ä¸èƒ½å®Œå…¨åšåˆ°ï¼Œåé¢å†…å®¹å­¦å®Œï¼Œæ‰èƒ½æ¶ˆé™¤äºŒè€…ä»£ç çš„æ‚ç³…ã€‚</p></blockquote><h5 id="2-3-1ã€JSPé¡µé¢ä¸Šé¢æ³¨é‡Š"><a href="#2-3-1ã€JSPé¡µé¢ä¸Šé¢æ³¨é‡Š" class="headerlink" title="2.3.1ã€JSPé¡µé¢ä¸Šé¢æ³¨é‡Š"></a>2.3.1ã€JSPé¡µé¢ä¸Šé¢æ³¨é‡Š</h5><p>   â‘ è¯­æ³•ï¼š&lt;%â€“è¿™æ˜¯æ³¨é‡Šâ€“%&gt; åœ¨jspç¿»è¯‘æˆServletçš„æ—¶å€™è¿™ä¸ªæ³¨é‡Šå°±æ²¡æœ‰äº†(æµè§ˆå™¨æŸ¥çœ‹é¡µé¢æºä»£ç çœ‹ä¸åˆ°)ï¼›</p><p>   â‘¡æˆ‘ä»¬è¿˜å¯ä»¥ç”¨htmlçš„æ³¨é‡Šï¼ˆ<!--æˆ‘æ˜¯ä¸€ä¸ªæ³¨é‡Š-->ï¼‰,åœ¨é¡µé¢ä¸Šçœ‹æºä»£ç å¯ä»¥çœ‹åˆ°ï¼›</p><h5 id="2-3-2ã€-lt-è¡¨è¾¾å¼-gt"><a href="#2-3-2ã€-lt-è¡¨è¾¾å¼-gt" class="headerlink" title="2.3.2ã€&lt;%=è¡¨è¾¾å¼%&gt;"></a>2.3.2ã€&lt;%=è¡¨è¾¾å¼%&gt;</h5><p>å®é™…ä¸Šå°±æ˜¯è°ƒç”¨è¾“å‡ºæµæ‰“å°åˆ°é¡µé¢ä¸Šï¼Œå…¶å¯¹åº”servleté‡Œçš„out.print(è¡¨è¾¾å¼);</p><p>ä½œç”¨ï¼šè¾“å‡ºæ•°æ®åˆ°é¡µé¢ä¸Š</p><p>ä¾‹: &lt;%=**new** java.util.Date().toLocaleString() %&gt;</p><p>ç¿»è¯‘åˆ°Servletä¸­çš„ä»£ç :</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">out.print(<span class="hljs-keyword">new</span> java.util.<span class="hljs-constructor">Date()</span>.<span class="hljs-keyword">to</span><span class="hljs-constructor">LocaleString()</span>);<br></code></pre></td></tr></table></figure><h5 id="2-3-3ã€-lt-â€¦-gt"><a href="#2-3-3ã€-lt-â€¦-gt" class="headerlink" title="2.3.3ã€&lt;% â€¦ %&gt;"></a>2.3.3ã€&lt;% â€¦ %&gt;</h5><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs abnf">&lt;%<br> Javaè¯­å¥<span class="hljs-number">1</span><span class="hljs-comment">;</span><br> Javaè¯­å¥<span class="hljs-number">2</span><span class="hljs-comment">;</span><br>%&gt;<br></code></pre></td></tr></table></figure><p>JSPä¸­çš„Javaè„šæœ¬ç‰‡æ®µï¼š(å®é™…å¼€å‘ä¸­ï¼Œåº”åšåˆ°JSPä¸­ä¸èƒ½å‡ºç°ä¸€è¡ŒJavaè„šæœ¬ç‰‡æ®µ)</p><p>ä½œç”¨ï¼šä¹¦å†™Javaä»£ç é€»è¾‘</p><p>åŸç†ï¼šå…¶ä¸­çš„è¯­å¥ä¼šåŸå°ä¸åŠ¨çš„è¢«æœåŠ¡å™¨ç¿»è¯‘åˆ°å¯¹åº”çš„<code>Servletçš„_jspService</code>æ–¹æ³•ä¸­ã€‚</p><p><img src="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/jspservice.png"></p><p><img src="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/fanyi.png"></p><h5 id="2-3-4ã€-lt-â€¦-gt"><a href="#2-3-4ã€-lt-â€¦-gt" class="headerlink" title="2.3.4ã€&lt;%!  â€¦ %&gt;"></a>2.3.4ã€&lt;%!  â€¦ %&gt;</h5><figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs erlang-repl">&lt;<span class="hljs-comment">%!</span><br>  Javaä»£ç <br><span class="hljs-comment">%&gt;</span><br></code></pre></td></tr></table></figure><p>ä½œç”¨ï¼šå®šä¹‰ç±»çš„æˆå‘˜</p><p>åŸç†: æŠŠå…¶ä¸­çš„ä»£ç ,åŸå°ä¸åŠ¨ç¿»è¯‘åˆ°Servletç±»ä¸­ã€‚</p><p><img src="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/chengyuan.png"></p><h4 id="2-4ã€JSPä¸‰å¤§æŒ‡ä»¤"><a href="#2-4ã€JSPä¸‰å¤§æŒ‡ä»¤" class="headerlink" title="2.4ã€JSPä¸‰å¤§æŒ‡ä»¤"></a>2.4ã€JSPä¸‰å¤§æŒ‡ä»¤</h4><p>JSPæŒ‡ä»¤ç”¨æ¥è®¾ç½®æ•´ä¸ªJSPé¡µé¢ç›¸å…³çš„å±æ€§ï¼Œå¦‚ç½‘é¡µçš„ç¼–ç æ–¹å¼å’Œè„šæœ¬è¯­è¨€ã€‚</p><table><thead><tr><th align="left"><strong>æŒ‡ä»¤</strong></th><th align="left"><strong>æè¿°</strong></th></tr></thead><tbody><tr><td align="left">&lt;%@ page â€¦ %&gt;</td><td align="left">å®šä¹‰é¡µé¢çš„ä¾èµ–å±æ€§ï¼Œæ¯”å¦‚è„šæœ¬è¯­è¨€ã€erroré¡µé¢ã€ç¼“å­˜éœ€æ±‚ç­‰ç­‰</td></tr><tr><td align="left">&lt;%@ include â€¦ %&gt;</td><td align="left">åŒ…å«å…¶ä»–æ–‡ä»¶</td></tr><tr><td align="left">&lt;%@ taglib â€¦ %&gt;</td><td align="left">å¼•å…¥æ ‡ç­¾åº“çš„å®šä¹‰ï¼Œå¯ä»¥æ˜¯è‡ªå®šä¹‰æ ‡ç­¾</td></tr></tbody></table><h5 id="2-4-1ã€PageæŒ‡ä»¤"><a href="#2-4-1ã€PageæŒ‡ä»¤" class="headerlink" title="2.4.1ã€PageæŒ‡ä»¤"></a>2.4.1ã€PageæŒ‡ä»¤</h5><p>PageæŒ‡ä»¤ä¸ºå®¹å™¨æä¾›å½“å‰é¡µé¢çš„ä½¿ç”¨è¯´æ˜ã€‚ä¸€ä¸ªJSPé¡µé¢å¯ä»¥åŒ…å«å¤šä¸ªpageæŒ‡ä»¤ã€‚</p><p>PageæŒ‡ä»¤çš„è¯­æ³•æ ¼å¼ï¼š</p><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gcode">&lt;<span class="hljs-meta">%</span>@ page attribute=<span class="hljs-string">&quot;value&quot;</span> <span class="hljs-meta">%</span>&gt;<br></code></pre></td></tr></table></figure><p> ç­‰ä»·çš„XMLæ ¼å¼ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">jsp:directive.page</span> <span class="hljs-attr">attribute</span>=<span class="hljs-string">&quot;value&quot;</span> /&gt;</span><br></code></pre></td></tr></table></figure><p>PageæŒ‡ä»¤ç›¸å…³çš„å±æ€§ï¼š</p><table><thead><tr><th align="left"><strong>å±æ€§</strong></th><th align="left"><strong>æè¿°</strong></th></tr></thead><tbody><tr><td align="left">buffer</td><td align="left">æŒ‡å®šoutå¯¹è±¡ä½¿ç”¨ç¼“å†²åŒºçš„å¤§å°</td></tr><tr><td align="left">autoFlush</td><td align="left">æ§åˆ¶outå¯¹è±¡çš„ ç¼“å­˜åŒº</td></tr><tr><td align="left">contentType</td><td align="left">æŒ‡å®šå½“å‰JSPé¡µé¢çš„MIMEç±»å‹å’Œå­—ç¬¦ç¼–ç </td></tr><tr><td align="left">errorPage</td><td align="left">æŒ‡å®šå½“JSPé¡µé¢å‘ç”Ÿå¼‚å¸¸æ—¶éœ€è¦è½¬å‘çš„é”™è¯¯å¤„ç†é¡µé¢</td></tr><tr><td align="left">isErrorPage</td><td align="left">æŒ‡å®šå½“å‰é¡µé¢æ˜¯å¦å¯ä»¥ä½œä¸ºå¦ä¸€ä¸ªJSPé¡µé¢çš„é”™è¯¯å¤„ç†é¡µé¢</td></tr><tr><td align="left">extends</td><td align="left">æŒ‡å®šservletä»å“ªä¸€ä¸ªç±»ç»§æ‰¿</td></tr><tr><td align="left">import</td><td align="left">å¯¼å…¥è¦ä½¿ç”¨çš„Javaç±»</td></tr><tr><td align="left">info</td><td align="left">å®šä¹‰JSPé¡µé¢çš„æè¿°ä¿¡æ¯</td></tr><tr><td align="left">isThreadSafe</td><td align="left">æŒ‡å®šå¯¹JSPé¡µé¢çš„è®¿é—®æ˜¯å¦ä¸ºçº¿ç¨‹å®‰å…¨</td></tr><tr><td align="left">language</td><td align="left">å®šä¹‰JSPé¡µé¢æ‰€ç”¨çš„è„šæœ¬è¯­è¨€ï¼Œé»˜è®¤æ˜¯Java</td></tr><tr><td align="left">session</td><td align="left">æŒ‡å®šJSPé¡µé¢æ˜¯å¦ä½¿ç”¨session</td></tr><tr><td align="left">isELIgnored</td><td align="left">æŒ‡å®šæ˜¯å¦æ‰§è¡ŒELè¡¨è¾¾å¼</td></tr><tr><td align="left">isScriptingEnabled</td><td align="left">ç¡®å®šè„šæœ¬å…ƒç´ èƒ½å¦è¢«ä½¿ç”¨</td></tr></tbody></table><p>â‘ ã€language=â€javaâ€ *â€“&gt;*è¯­è¨€åªæœ‰javaï¼Œæ„ä¹‰ä¸å¤§ </p><p>â‘¡ã€contentType=â€text/html; charset=UTF-8â€ *â€“&gt;*è¾“å‡ºçš„é¡µé¢ç±»å‹,ä»¥åçš„servleté‡Œé¢ä¸ç”¨å†™ï¼ˆresp.setContentType(â€œtext/html;charset=utf-8â€)ï¼‰</p><p><img src="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/setcontenttype.png"></p><p>â‘¢ã€pageEncoding=â€UTF-8â€</p><p><img src="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/page.png"></p><p>â‘£ã€errorPage=â€/myerror.jspâ€:å¦‚æœå½“å‰é¡µé¢å‡ºé”™,å°±è·³è½¬åˆ°å¯¹åº”çš„é¡µé¢</p><p>å’ŒisErrorPage=â€trueâ€:è¿™ä¸ªé¡µé¢æ˜¯å¦æ˜¯é”™è¯¯é¡µé¢(å½“æˆ‘ä»¬è¦åœ¨é¡µé¢ä¸Šç›´æ¥ä½¿ç”¨exceptionçš„æ—¶å€™å°±å¯ä»¥åŠ ä¸Šå®ƒ)</p><p><img src="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/errorPage.png"></p><p><img src="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/iserrorpage.png"></p><p>æ•ˆæœï¼š</p><p><img src="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/error.png"></p><p>åœ¨web.xmlé‡Œé¢ä¹Ÿå¯ä»¥é…ç½®é”™è¯¯é¡µé¢ï¼š</p><p><img src="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/errorxml.png"></p><h5 id="2-4-2ã€IncludeæŒ‡ä»¤"><a href="#2-4-2ã€IncludeæŒ‡ä»¤" class="headerlink" title="2.4.2ã€IncludeæŒ‡ä»¤"></a>2.4.2ã€IncludeæŒ‡ä»¤</h5><p>JSPå¯ä»¥é€šè¿‡includeæŒ‡ä»¤æ¥åŒ…å«å…¶ä»–æ–‡ä»¶ã€‚è¢«åŒ…å«çš„æ–‡ä»¶å¯ä»¥æ˜¯JSPæ–‡ä»¶ã€HTMLæ–‡ä»¶æˆ–æ–‡æœ¬æ–‡ä»¶ã€‚åŒ…å«çš„æ–‡ä»¶å°±å¥½åƒæ˜¯è¯¥JSPæ–‡ä»¶çš„ä¸€éƒ¨åˆ†ï¼Œä¼šè¢«åŒæ—¶ç¼–è¯‘æ‰§è¡Œã€‚</p><p> IncludeæŒ‡ä»¤çš„è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mel">&lt;%@ include <span class="hljs-keyword">file</span>=<span class="hljs-string">&quot;æ–‡ä»¶ç›¸å¯¹ url åœ°å€&quot;</span> %&gt;<br></code></pre></td></tr></table></figure><p> <strong>include</strong> æŒ‡ä»¤ä¸­çš„æ–‡ä»¶åå®é™…ä¸Šæ˜¯ä¸€ä¸ªç›¸å¯¹çš„ URL åœ°å€ã€‚</p><p>å¦‚æœæ‚¨æ²¡æœ‰ç»™æ–‡ä»¶å…³è”ä¸€ä¸ªè·¯å¾„ï¼ŒJSPç¼–è¯‘å™¨é»˜è®¤åœ¨å½“å‰è·¯å¾„ä¸‹å¯»æ‰¾ã€‚</p><p> ç­‰ä»·çš„XMLè¯­æ³•ï¼š</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">&lt;jsp:directive.<span class="hljs-keyword">include</span> <span class="hljs-keyword">file</span>=<span class="hljs-string">&quot;æ–‡ä»¶ç›¸å¯¹ url åœ°å€&quot;</span> /&gt;<br></code></pre></td></tr></table></figure><p>å½“æ¯ä¸ªé¡µé¢éƒ½æœ‰å¯¼èˆªçš„æ—¶å€™ï¼Œæˆ‘ä»¬åªéœ€è¦ä½¿ç”¨ä¸€ä¸ªï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥ä½¿ç”¨åŒ…å«æŒ‡ä»¤ï¼š</p><p><img src="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/include1.png"></p><p><img src="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/baohan.png"></p><p><img src="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/baohan1.png"></p><p>ä¸€èˆ¬è¢«åŒ…å«çš„jspæ–‡ä»¶æˆ‘ä»¬ä¼šå–åä¸º jspf(jspç‰‡æ–­)ï¼š</p><p><img src="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/pianduan.png"></p><h5 id="2-4-3ã€taglibæŒ‡ä»¤"><a href="#2-4-3ã€taglibæŒ‡ä»¤" class="headerlink" title="2.4.3ã€taglibæŒ‡ä»¤"></a>2.4.3ã€taglibæŒ‡ä»¤</h5><p>JSP APIå…è®¸ç”¨æˆ·è‡ªå®šä¹‰æ ‡ç­¾ï¼Œä¸€ä¸ªè‡ªå®šä¹‰æ ‡ç­¾åº“å°±æ˜¯è‡ªå®šä¹‰æ ‡ç­¾çš„é›†åˆã€‚</p><p> TaglibæŒ‡ä»¤å¼•å…¥ä¸€ä¸ªè‡ªå®šä¹‰æ ‡ç­¾é›†åˆçš„å®šä¹‰ï¼ŒåŒ…æ‹¬åº“è·¯å¾„ã€è‡ªå®šä¹‰æ ‡ç­¾ã€‚</p><p> TaglibæŒ‡ä»¤çš„è¯­æ³•ï¼š</p><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gcode">&lt;<span class="hljs-meta">%</span>@ taglib uri=<span class="hljs-string">&quot;uri&quot;</span> prefix=<span class="hljs-string">&quot;prefixOfTag&quot;</span> <span class="hljs-meta">%</span>&gt;<br></code></pre></td></tr></table></figure><p> uriå±æ€§ç¡®å®šæ ‡ç­¾åº“çš„ä½ç½®ï¼Œprefixå±æ€§æŒ‡å®šæ ‡ç­¾åº“çš„å‰ç¼€ã€‚</p><p> ç­‰ä»·çš„XMLè¯­æ³•ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">&lt;jsp:directive.taglib <span class="hljs-attribute">uri</span>=<span class="hljs-string">&quot;uri&quot;</span> <span class="hljs-attribute">prefix</span>=<span class="hljs-string">&quot;prefixOfTag&quot;</span> /&gt;<br></code></pre></td></tr></table></figure><h4 id="2-5ã€JSPåŠ¨ä½œå…ƒç´ "><a href="#2-5ã€JSPåŠ¨ä½œå…ƒç´ " class="headerlink" title="2.5ã€JSPåŠ¨ä½œå…ƒç´ "></a><a href="https://www.runoob.com/jsp/jsp-actions.html">2.5ã€JSPåŠ¨ä½œå…ƒç´ </a></h4><p>JSPè¡Œä¸ºæ ‡ç­¾ä½¿ç”¨XMLè¯­æ³•ç»“æ„æ¥æ§åˆ¶servletå¼•æ“ã€‚å®ƒèƒ½å¤Ÿ<code>åŠ¨æ€</code>æ’å…¥ä¸€ä¸ªæ–‡ä»¶ï¼Œé‡ç”¨JavaBeanç»„ä»¶ï¼Œå¼•å¯¼ç”¨æˆ·å»å¦ä¸€ä¸ªé¡µé¢ï¼Œä¸ºJavaæ’ä»¶äº§ç”Ÿç›¸å…³çš„HTMLç­‰ç­‰ã€‚</p><p> è¡Œä¸ºæ ‡ç­¾åªæœ‰ä¸€ç§è¯­æ³•æ ¼å¼ï¼Œå®ƒä¸¥æ ¼éµå®ˆXMLæ ‡å‡†ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">jsp:action_name</span> <span class="hljs-attr">attribute</span>=<span class="hljs-string">&quot;value&quot;</span> /&gt;</span><br></code></pre></td></tr></table></figure><p> è¡Œä¸ºæ ‡ç­¾åŸºæœ¬ä¸Šæ˜¯ä¸€äº›é¢„å…ˆå°±å®šä¹‰å¥½çš„å‡½æ•°ï¼Œä¸‹è¡¨ç½—åˆ—å‡ºäº†ä¸€äº›å¯ç”¨çš„</p><h5 id="2-5-1ã€JSPåŠ¨ä½œæ ‡ç­¾ï¼šï¼š"><a href="#2-5-1ã€JSPåŠ¨ä½œæ ‡ç­¾ï¼šï¼š" class="headerlink" title="2.5.1ã€JSPåŠ¨ä½œæ ‡ç­¾ï¼šï¼š"></a>2.5.1ã€JSPåŠ¨ä½œæ ‡ç­¾ï¼šï¼š</h5><table><thead><tr><th align="left"><strong>è¯­æ³•</strong></th><th align="left"><strong>æè¿°</strong></th></tr></thead><tbody><tr><td align="left">jsp:include</td><td align="left">ç”¨äºåœ¨å½“å‰é¡µé¢ä¸­åŒ…å«é™æ€æˆ–åŠ¨æ€èµ„æº</td></tr><tr><td align="left">jsp:useBean</td><td align="left">å¯»æ‰¾å’Œåˆå§‹åŒ–ä¸€ä¸ªJavaBeanç»„ä»¶</td></tr><tr><td align="left">jsp:setProperty</td><td align="left">è®¾ç½® JavaBeanç»„ä»¶çš„å€¼</td></tr><tr><td align="left">jsp:getProperty</td><td align="left">å°† JavaBeanç»„ä»¶çš„å€¼æ’å…¥åˆ° outputä¸­</td></tr><tr><td align="left">jsp:forward</td><td align="left">ä»ä¸€ä¸ªJSPæ–‡ä»¶å‘å¦ä¸€ä¸ªæ–‡ä»¶ä¼ é€’ä¸€ä¸ªåŒ…å«ç”¨æˆ·è¯·æ±‚çš„requestå¯¹è±¡</td></tr><tr><td align="left">jsp:plugin</td><td align="left">ç”¨äºåœ¨ç”Ÿæˆçš„HTMLé¡µé¢ä¸­åŒ…å«Appletå’ŒJavaBeanå¯¹è±¡</td></tr><tr><td align="left">jsp:element</td><td align="left">åŠ¨æ€åˆ›å»ºä¸€ä¸ªXMLå…ƒç´ </td></tr><tr><td align="left">jsp:attribute</td><td align="left">å®šä¹‰åŠ¨æ€åˆ›å»ºçš„XMLå…ƒç´ çš„å±æ€§</td></tr><tr><td align="left">jsp:body</td><td align="left">å®šä¹‰åŠ¨æ€åˆ›å»ºçš„XMLå…ƒç´ çš„ä¸»ä½“</td></tr><tr><td align="left">jsp:text</td><td align="left">ç”¨äºå°è£…æ¨¡æ¿æ•°æ®</td></tr></tbody></table><h5 id="2-5-2ã€æ‰€æœ‰çš„åŠ¨ä½œè¦ç´ éƒ½æœ‰ä¸¤ä¸ªå±æ€§"><a href="#2-5-2ã€æ‰€æœ‰çš„åŠ¨ä½œè¦ç´ éƒ½æœ‰ä¸¤ä¸ªå±æ€§" class="headerlink" title="2.5.2ã€æ‰€æœ‰çš„åŠ¨ä½œè¦ç´ éƒ½æœ‰ä¸¤ä¸ªå±æ€§"></a>2.5.2ã€æ‰€æœ‰çš„åŠ¨ä½œè¦ç´ éƒ½æœ‰ä¸¤ä¸ªå±æ€§</h5><ul><li><p>idå±æ€§ï¼š</p><p>idå±æ€§æ˜¯åŠ¨ä½œå…ƒç´ çš„å”¯ä¸€æ ‡è¯†ï¼Œå¯ä»¥åœ¨JSPé¡µé¢ä¸­å¼•ç”¨ã€‚åŠ¨ä½œå…ƒç´ åˆ›å»ºçš„idå€¼å¯ä»¥é€šè¿‡PageContextæ¥è°ƒç”¨ã€‚ </p></li><li><p>scopeå±æ€§ï¼š</p><p>è¯¥å±æ€§ç”¨äºè¯†åˆ«åŠ¨ä½œå…ƒç´ çš„ç”Ÿå‘½å‘¨æœŸã€‚ idå±æ€§å’Œscopeå±æ€§æœ‰ç›´æ¥å…³ç³»ï¼Œscopeå±æ€§å®šä¹‰äº†ç›¸å…³è”idå¯¹è±¡çš„å¯¿å‘½ã€‚ scopeå±æ€§æœ‰å››ä¸ªå¯èƒ½çš„å€¼ï¼š (a) page, (b)request, (c)session, å’Œ (d) applicationã€‚ </p></li></ul><h5 id="2-5-3ã€-lt-jsp-include-gt-åŠ¨ä½œå…ƒç´ "><a href="#2-5-3ã€-lt-jsp-include-gt-åŠ¨ä½œå…ƒç´ " class="headerlink" title="2.5.3ã€**&lt;jsp:include&gt;**åŠ¨ä½œå…ƒç´ "></a>2.5.3ã€**&lt;jsp:include&gt;**åŠ¨ä½œå…ƒç´ </h5><p>ç”¨æ¥åŒ…å«é™æ€å’ŒåŠ¨æ€çš„æ–‡ä»¶ã€‚è¯¥åŠ¨ä½œæŠŠæŒ‡å®šæ–‡ä»¶æ’å…¥æ­£åœ¨ç”Ÿæˆçš„é¡µé¢ã€‚è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">&lt;jsp:include <span class="hljs-attribute">page</span>=<span class="hljs-string">&quot;ç›¸å¯¹ URL åœ°å€&quot;</span> <span class="hljs-attribute">flush</span>=<span class="hljs-string">&quot;true&quot;</span> /&gt;<br></code></pre></td></tr></table></figure><p> å‰é¢å·²ç»ä»‹ç»è¿‡includeæŒ‡ä»¤ï¼Œå®ƒæ˜¯åœ¨JSPæ–‡ä»¶è¢«è½¬æ¢æˆServletçš„æ—¶å€™å¼•å…¥æ–‡ä»¶ï¼Œè€Œè¿™é‡Œçš„</p><p>&lt;jsp:include&gt;åŠ¨ä½œä¸åŒï¼Œæ’å…¥æ–‡ä»¶çš„æ—¶é—´æ˜¯åœ¨é¡µé¢è¢«è¯·æ±‚çš„æ—¶å€™ã€‚ </p><p>ä»¥ä¸‹æ˜¯includeåŠ¨ä½œç›¸å…³çš„å±æ€§åˆ—è¡¨ã€‚</p><table><thead><tr><th align="left">å±æ€§</th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="left">page</td><td align="left">åŒ…å«åœ¨é¡µé¢ä¸­çš„ç›¸å¯¹URLåœ°å€ã€‚</td></tr><tr><td align="left">flush</td><td align="left">å¸ƒå°”å±æ€§ï¼Œå®šä¹‰åœ¨åŒ…å«èµ„æºå‰æ˜¯å¦åˆ·æ–°ç¼“å­˜åŒºã€‚</td></tr></tbody></table><h5 id="2-5-4ã€-lt-jsp-forward-gt-åŠ¨ä½œ"><a href="#2-5-4ã€-lt-jsp-forward-gt-åŠ¨ä½œ" class="headerlink" title="**2.5.4ã€&lt;jsp:forward&gt;**åŠ¨ä½œ"></a>**2.5.4ã€&lt;jsp:forward&gt;**åŠ¨ä½œ</h5><p>æŠŠè¯·æ±‚è½¬åˆ°å¦å¤–çš„é¡µé¢ã€‚jsp:forwardæ ‡è®°åªæœ‰ä¸€ä¸ªå±æ€§pageã€‚è¯­æ³•æ ¼å¼å¦‚ä¸‹æ‰€ç¤ºï¼š  </p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">jsp:forward</span> <span class="hljs-attr">page</span>=<span class="hljs-string">&quot;ç›¸å¯¹ URL åœ°å€&quot;</span> /&gt;</span><br></code></pre></td></tr></table></figure><p>ä»¥ä¸‹æ˜¯fowardç›¸å…³è”çš„å±æ€§ï¼š</p><table><thead><tr><th align="left">å±æ€§</th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="left">page</td><td align="left">pageå±æ€§åŒ…å«çš„æ˜¯ä¸€ä¸ªç›¸å¯¹URLã€‚pageçš„å€¼æ—¢å¯ä»¥ç›´æ¥ç»™å‡ºï¼Œä¹Ÿå¯ä»¥åœ¨è¯·æ±‚çš„æ—¶å€™åŠ¨æ€è®¡ç®—ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªJSPé¡µé¢æˆ–è€…ä¸€ä¸ª Java Servlet.</td></tr></tbody></table><h5 id="2-5-5ã€-lt-jsp-useBean-gt-åŠ¨ä½œç”¨æ¥åŠ è½½ä¸€ä¸ªå°†åœ¨JSPé¡µé¢ä¸­ä½¿ç”¨çš„JavaBeanã€‚"><a href="#2-5-5ã€-lt-jsp-useBean-gt-åŠ¨ä½œç”¨æ¥åŠ è½½ä¸€ä¸ªå°†åœ¨JSPé¡µé¢ä¸­ä½¿ç”¨çš„JavaBeanã€‚" class="headerlink" title="2.5.5ã€&lt;jsp:useBean&gt; åŠ¨ä½œç”¨æ¥åŠ è½½ä¸€ä¸ªå°†åœ¨JSPé¡µé¢ä¸­ä½¿ç”¨çš„JavaBeanã€‚"></a><strong>2.5.5ã€&lt;jsp:useBean&gt;</strong> åŠ¨ä½œç”¨æ¥åŠ è½½ä¸€ä¸ªå°†åœ¨JSPé¡µé¢ä¸­ä½¿ç”¨çš„JavaBeanã€‚</h5><p>è¿™ä¸ªåŠŸèƒ½éå¸¸æœ‰ç”¨ï¼Œå› ä¸ºå®ƒä½¿å¾—æˆ‘ä»¬å¯ä»¥å‘æŒ¥ Java ç»„ä»¶å¤ç”¨çš„ä¼˜åŠ¿ã€‚</p><p>jsp:useBeanåŠ¨ä½œæœ€ç®€å•çš„è¯­æ³•ä¸ºï¼š  </p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript">&lt;jsp:useBean <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-built_in">class</span>=<span class="hljs-string">&quot;package.class&quot;</span> /&gt;<br></code></pre></td></tr></table></figure><p> åœ¨ç±»è½½å…¥åï¼Œæˆ‘ä»¬æ—¢å¯ä»¥é€šè¿‡ jsp:setProperty å’Œ jsp:getProperty åŠ¨ä½œæ¥ä¿®æ”¹å’Œæ£€ç´¢beançš„å±æ€§ã€‚  </p><p>ä»¥ä¸‹æ˜¯useBeanåŠ¨ä½œç›¸å…³çš„å±æ€§åˆ—è¡¨ã€‚</p><table><thead><tr><th align="left">å±æ€§</th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="left">class</td><td align="left">æŒ‡å®šBeançš„å®Œæ•´åŒ…åã€‚</td></tr><tr><td align="left">type</td><td align="left">æŒ‡å®šå°†å¼•ç”¨è¯¥å¯¹è±¡å˜é‡çš„ç±»å‹ã€‚</td></tr><tr><td align="left">beanName</td><td align="left">é€šè¿‡ java.beans.Beans çš„ instantiate() æ–¹æ³•æŒ‡å®šBeançš„åå­—ã€‚</td></tr></tbody></table><p>**&lt;jsp:setProperty&gt;**ç”¨æ¥è®¾ç½®å·²ç»å®ä¾‹åŒ–çš„Beanå¯¹è±¡çš„å±æ€§ï¼Œæœ‰ä¸¤ç§ç”¨æ³•ã€‚é¦–å…ˆï¼Œä½ å¯ä»¥åœ¨jsp:useBeanå…ƒç´ çš„å¤–é¢ï¼ˆåé¢ï¼‰ä½¿ç”¨jsp:setPropertyï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š  </p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs applescript">&lt;jsp:useBean <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;myName&quot;</span> ... /&gt;<br>...<br>&lt;jsp:setProperty <span class="hljs-built_in">name</span>=<span class="hljs-string">&quot;myName&quot;</span> <span class="hljs-keyword">property</span>=<span class="hljs-string">&quot;someProperty&quot;</span> .../&gt;<br></code></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œä¸ç®¡jsp:useBeanæ˜¯æ‰¾åˆ°äº†ä¸€ä¸ªç°æœ‰çš„Beanï¼Œè¿˜æ˜¯æ–°åˆ›å»ºäº†ä¸€ä¸ªBeanå®ä¾‹ï¼Œjsp:setPropertyéƒ½ä¼šæ‰§è¡Œã€‚ç¬¬äºŒç§ç”¨æ³•æ˜¯æŠŠjsp:setPropertyæ”¾å…¥jsp:useBeanå…ƒç´ çš„å†…éƒ¨ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š  </p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">&lt;jsp<span class="hljs-function">:useBean</span> id=<span class="hljs-string">&quot;myName&quot;</span> <span class="hljs-string">...</span> &gt;<br><span class="hljs-string">...</span><br>   &lt;jsp<span class="hljs-function">:setProperty</span> name=<span class="hljs-string">&quot;myName&quot;</span> property=<span class="hljs-string">&quot;someProperty&quot;</span> <span class="hljs-string">.../</span>&gt;<br>&lt;<span class="hljs-string">/jsp</span><span class="hljs-function">:useBean</span>&gt;<br></code></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œjsp:setPropertyåªæœ‰åœ¨æ–°å»ºBeanå®ä¾‹æ—¶æ‰ä¼šæ‰§è¡Œï¼Œå¦‚æœæ˜¯ä½¿ç”¨ç°æœ‰å®ä¾‹åˆ™ä¸æ‰§è¡Œjsp:setPropertyã€‚  </p><p>jsp:setPropertyåŠ¨ä½œæœ‰ä¸‹é¢å››ä¸ªå±æ€§,å¦‚ä¸‹è¡¨ï¼š</p><table><thead><tr><th align="left">å±æ€§</th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="left">name</td><td align="left">nameå±æ€§æ˜¯å¿…éœ€çš„ã€‚å®ƒè¡¨ç¤ºè¦è®¾ç½®å±æ€§çš„æ˜¯å“ªä¸ªBeanã€‚</td></tr><tr><td align="left">property</td><td align="left">propertyå±æ€§æ˜¯å¿…éœ€çš„ã€‚å®ƒè¡¨ç¤ºè¦è®¾ç½®å“ªä¸ªå±æ€§ã€‚æœ‰ä¸€ä¸ªç‰¹æ®Šç”¨æ³•ï¼šå¦‚æœpropertyçš„å€¼æ˜¯â€*â€ï¼Œè¡¨ç¤ºæ‰€æœ‰åå­—å’ŒBeanå±æ€§åå­—åŒ¹é…çš„è¯·æ±‚å‚æ•°éƒ½å°†è¢«ä¼ é€’ç»™ç›¸åº”çš„å±æ€§setæ–¹æ³•ã€‚</td></tr><tr><td align="left">value</td><td align="left">value å±æ€§æ˜¯å¯é€‰çš„ã€‚è¯¥å±æ€§ç”¨æ¥æŒ‡å®šBeanå±æ€§çš„å€¼ã€‚å­—ç¬¦ä¸²æ•°æ®ä¼šåœ¨ç›®æ ‡ç±»ä¸­é€šè¿‡æ ‡å‡†çš„valueOfæ–¹æ³•è‡ªåŠ¨è½¬æ¢æˆæ•°å­—ã€booleanã€Booleanã€ byteã€Byteã€charã€Characterã€‚ä¾‹å¦‚ï¼Œbooleanå’ŒBooleanç±»å‹çš„å±æ€§å€¼ï¼ˆæ¯”å¦‚â€trueâ€ï¼‰é€šè¿‡ Boolean.valueOfè½¬æ¢ï¼Œintå’ŒIntegerç±»å‹çš„å±æ€§å€¼ï¼ˆæ¯”å¦‚â€42â€ï¼‰é€šè¿‡Integer.valueOfè½¬æ¢ã€‚  ã€€valueå’Œparamä¸èƒ½åŒæ—¶ä½¿ç”¨ï¼Œä½†å¯ä»¥ä½¿ç”¨å…¶ä¸­ä»»æ„ä¸€ä¸ªã€‚</td></tr><tr><td align="left">param</td><td align="left">param æ˜¯å¯é€‰çš„ã€‚å®ƒæŒ‡å®šç”¨å“ªä¸ªè¯·æ±‚å‚æ•°ä½œä¸ºBeanå±æ€§çš„å€¼ã€‚å¦‚æœå½“å‰è¯·æ±‚æ²¡æœ‰å‚æ•°ï¼Œåˆ™ä»€ä¹ˆäº‹æƒ…ä¹Ÿä¸åšï¼Œç³»ç»Ÿä¸ä¼šæŠŠnullä¼ é€’ç»™Beanå±æ€§çš„setæ–¹æ³•ã€‚å› æ­¤ï¼Œä½ å¯ä»¥è®©Beanè‡ªå·±æä¾›é»˜è®¤å±æ€§å€¼ï¼Œåªæœ‰å½“è¯·æ±‚å‚æ•°æ˜ç¡®æŒ‡å®šäº†æ–°å€¼æ—¶æ‰ä¿®æ”¹é»˜è®¤å±æ€§å€¼ã€‚</td></tr></tbody></table><p>**&lt;jsp:getProperty&gt;**åŠ¨ä½œæå–æŒ‡å®šBeanå±æ€§çš„å€¼ï¼Œè½¬æ¢æˆå­—ç¬¦ä¸²ï¼Œç„¶åè¾“å‡ºã€‚è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs applescript">&lt;jsp:useBean <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;myName&quot;</span> ... /&gt;<br>...<br>&lt;jsp:getProperty <span class="hljs-built_in">name</span>=<span class="hljs-string">&quot;myName&quot;</span> <span class="hljs-keyword">property</span>=<span class="hljs-string">&quot;someProperty&quot;</span> .../&gt;<br></code></pre></td></tr></table></figure><p>ä¸‹è¡¨æ˜¯ä¸getPropertyç›¸å…³è”çš„å±æ€§ï¼š</p><table><thead><tr><th align="left">å±æ€§</th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="left">name</td><td align="left">è¦æ£€ç´¢çš„Beanå±æ€§åç§°ã€‚Beanå¿…é¡»å·²å®šä¹‰ã€‚</td></tr><tr><td align="left">property</td><td align="left">è¡¨ç¤ºè¦æå–Beanå±æ€§çš„å€¼</td></tr></tbody></table><h4 id="2-6ã€JSPä¹å¤§å†…ç½®å¯¹è±¡"><a href="#2-6ã€JSPä¹å¤§å†…ç½®å¯¹è±¡" class="headerlink" title="2.6ã€JSPä¹å¤§å†…ç½®å¯¹è±¡"></a>2.6ã€JSPä¹å¤§å†…ç½®å¯¹è±¡</h4><p>å¼•å…¥ï¼šåœ¨jspé¡µé¢é‡Œé¢ ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨requestå’Œsessionï¼Œä¸ºä»€ä¹ˆå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Ÿ</p><p>è¿™é‡Œrequestå’Œsession å°±æ˜¯åˆ«äººå·²ç»å¸®æˆ‘ä»¬å®šä¹‰å¥½9ä¸ªå†…ç½®å¯¹è±¡ä¸­çš„å…¶ä¸­ä¸¤ä¸ªï¼Œæˆ‘ä»¬ç›´æ¥</p><p>æ‹¿åˆ°ä½¿ç”¨å°±æ˜¯ã€‚</p><table><thead><tr><th align="left"><strong>å¯¹è±¡</strong></th><th align="left"><strong>æè¿°</strong></th></tr></thead><tbody><tr><td align="left">request</td><td align="left"><strong>HttpServletRequest</strong>ç±»çš„å®ä¾‹</td></tr><tr><td align="left">response</td><td align="left"><strong>HttpServletResponse</strong>ç±»çš„å®ä¾‹</td></tr><tr><td align="left">out</td><td align="left"><strong>PrintWriter</strong>ç±»çš„å®ä¾‹ï¼Œç”¨äºæŠŠç»“æœè¾“å‡ºè‡³ç½‘é¡µä¸Šï¼Œ<strong>JSPWriter</strong></td></tr><tr><td align="left">session</td><td align="left"><strong>HttpSession</strong>ç±»çš„å®ä¾‹</td></tr><tr><td align="left">application</td><td align="left"><strong>ServletContext</strong>ç±»çš„å®ä¾‹ï¼Œä¸åº”ç”¨ä¸Šä¸‹æ–‡æœ‰å…³</td></tr><tr><td align="left">config</td><td align="left"><strong>ServletConfig</strong>ç±»çš„å®ä¾‹</td></tr><tr><td align="left">pageContext</td><td align="left"><strong>PageContext</strong>ç±»çš„å®ä¾‹ï¼Œæä¾›å¯¹JSPé¡µé¢æ‰€æœ‰å¯¹è±¡ä»¥åŠå‘½åç©ºé—´çš„è®¿é—®</td></tr><tr><td align="left">page</td><td align="left">ç±»ä¼¼äºJavaç±»ä¸­çš„thiså…³é”®å­—</td></tr><tr><td align="left">Exception</td><td align="left"><strong>Exception</strong>ç±»çš„å¯¹è±¡ï¼Œä»£è¡¨å‘ç”Ÿé”™è¯¯çš„JSPé¡µé¢ä¸­å¯¹åº”çš„å¼‚å¸¸å¯¹è±¡</td></tr></tbody></table><h4 id="2-6ã€JSPå››å¤§ä½œç”¨åŸŸå¯¹è±¡"><a href="#2-6ã€JSPå››å¤§ä½œç”¨åŸŸå¯¹è±¡" class="headerlink" title="2.6ã€JSPå››å¤§ä½œç”¨åŸŸå¯¹è±¡"></a>2.6ã€JSPå››å¤§ä½œç”¨åŸŸå¯¹è±¡</h4><table><thead><tr><th>ä½œç”¨åŸŸå¯¹è±¡</th><th>ç±»</th><th></th></tr></thead><tbody><tr><td>application</td><td>ServletContext</td><td>æ•´ä¸ªåº”ç”¨</td></tr><tr><td>session</td><td>HttpSession</td><td>ä¸€æ¬¡ä¼šè¯</td></tr><tr><td>request</td><td>HttpServletRequest</td><td>ä¸€æ¬¡è¯·æ±‚</td></tr><tr><td>pageContext</td><td>PageContext</td><td>å½“å‰é¡µ</td></tr></tbody></table><p>JSPå››å¤§ä½œç”¨åŸŸå¯¹è±¡å±äº9å¤§å†…ç½®å¯¹è±¡</p><h4 id="2-7ã€è¡¥å……å†…å®¹"><a href="#2-7ã€è¡¥å……å†…å®¹" class="headerlink" title="2.7ã€è¡¥å……å†…å®¹"></a>2.7ã€è¡¥å……å†…å®¹</h4><p>åœ¨JSPåŠ¨ä½œå…ƒç´ ä¸­ï¼Œæˆ‘ä»¬åªäº†è§£ jsp:includeè¿™ä¸ªåŠ¨ä½œå…ƒç´ </p><p><img src="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/jspinclude.png"></p><p>æˆ‘ä»¬è¦ç”¨ jsp:include æ¥åšåŒ…å«é¡µé¢çš„æ—¶å€™ï¼Œå°±ä¸èƒ½å†ä½¿ç”¨<strong>ç‰‡æ®µ</strong>ï¼ˆ<code>2.4.2</code>ï¼‰</p><p>é¢è¯•é¢˜:åŠ¨æ€åŒ…å«(åŠ¨ä½œjsp:include)ä¸é™æ€åŒ…å«(æŒ‡ä»¤include)çš„åŒºåˆ«? </p><p>ä»€ä¹ˆæ—¶å€™ç”¨åŠ¨æ€åŒ…å«ï¼Œä»€ä¹ˆæ—¶å€™ç”¨é™æ€åŒ…å«?</p><ul><li>é™æ€åŒ…å«å…ˆæŠŠé¡µé¢åŒ…å«è¿›æ¥,å†ç¿»è¯‘æˆjavaä»£ç !!  (åªæœ‰ä¸€ä¸ªæ–‡ä»¶)</li><li>åŠ¨æ€åŒ…å«å…ˆéƒ½ç¼–è¯‘æˆjavaä»£ç ,å†å°†å†…å®¹è¿›è¡ŒåŒ…å«!!  (æœ‰å¤šä¸ªæ–‡ä»¶)</li></ul><p>æœ‰ä¸ªè¯´æ³•ï¼š</p><ul><li>å¦‚æœåŒ…å«çš„æ˜¯é™æ€é¡µé¢(html),é‚£ä¹ˆä½¿ç”¨é™æ€åŒ…å«</li><li>å¦‚æœåŒ…å«çš„æ˜¯åŠ¨æ€ç½‘é¡µ(jsp),é‚£ä¹ˆä½¿ç”¨åŠ¨æ€åŒ…å«</li></ul><p>ç¼–è¯‘çš„æ–‡ä»¶ï¼ˆ\apache-tomcat-7.0.57\work\Catalina\è·¯å¾„ä¸‹é¢ï¼‰</p><ul><li>é™æ€åŒ…å«&lt;%@ include file=â€/include/b.jspâ€ %&gt;</li></ul><p><img src="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/clip_image001.png" alt="img"></p><ul><li>åŠ¨æ€åŒ…å«&lt;jsp:include page=â€/include2/b.jspâ€&gt;&lt;/ jsp:include&gt;</li></ul><p><img src="/2019/11/21/Servlet%E4%BA%A4%E4%BA%92%E4%B8%8EJSP/clip_image002.png" alt="img"></p>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
    </categories>
    
    
    <tags>
      
      <tag>JSP</tag>
      
      <tag>Servlet</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ•°æ®åº“ç»ƒä¹ ï¼ˆä¸€ï¼‰</title>
    <link href="/2019/11/19/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BB%83%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89/"/>
    <url>/2019/11/19/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BB%83%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<p>1ã€ éƒ¨é—¨è¡¨ï¼šDEPT</p><table><thead><tr><th><strong>No.</strong></th><th><strong>å­—æ®µåç§°</strong></th><th><strong>ç±»å‹</strong></th><th><strong>æè¿°</strong></th></tr></thead><tbody><tr><td><strong>1</strong></td><td>DEPTNO</td><td>BIGINT</td><td>éƒ¨é—¨ç¼–å·ï¼Œç”±ä¸¤ä½æ•°å­—æ‰€ç»„æˆ(ä¸»é”®)</td></tr><tr><td>2</td><td>DNAME</td><td>VARCHAR(20)</td><td>éƒ¨é—¨åç§°ï¼Œç”± 14 ä½å­—ç¬¦æ‰€ç»„æˆ</td></tr><tr><td>3</td><td>LOC</td><td>VARCHAR(20)</td><td>éƒ¨é—¨ä½ç½®</td></tr></tbody></table><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> DEPT ( <br>DEPTNO <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">PRIMARY</span> KEY COMMENT &quot;éƒ¨é—¨ç¼–å·ï¼Œæœ‰ä¸¤ä½æ•°æ®ç»„æˆä¸»é”®&quot;, <br>DNAME <span class="hljs-type">VARCHAR</span> ( <span class="hljs-number">20</span> ), <br>LOC <span class="hljs-type">VARCHAR</span> ( <span class="hljs-number">20</span> ) <br>);<br></code></pre></td></tr></table></figure><p>2ã€ é›‡å‘˜è¡¨ï¼šEMP</p><table><thead><tr><th><strong>No.</strong></th><th><strong>å­—æ®µåç§°</strong></th><th><strong>ç±»å‹</strong></th><th><strong>æè¿°</strong></th></tr></thead><tbody><tr><td>1</td><td>EMPNO</td><td>BIGINT</td><td>é›‡å‘˜ç¼–å·ï¼Œç”±å››ä½æ•°å­—æ‰€ç»„æˆ(ä¸»é”®)</td></tr><tr><td>2</td><td>ENAME</td><td>VARCHAR(20)</td><td>é›‡å‘˜å§“å</td></tr><tr><td>3</td><td>JOB</td><td>VARCHAR(20)</td><td>èŒä½</td></tr><tr><td>4</td><td>MGR</td><td>BIGINT</td><td>ä¸€ä¸ªé›‡å‘˜å¯¹åº”çš„é¢†å¯¼ç¼–å·ï¼ˆé›‡å‘˜ç¼–å·ï¼‰</td></tr><tr><td>5</td><td>HIREDATE</td><td>DATE</td><td>é›‡å‘˜çš„é›‡ä½£æ—¥æœŸ</td></tr><tr><td>6</td><td>SAL</td><td>DOUBLE(7,2)</td><td>åŸºæœ¬å·¥èµ„ï¼Œç”±ä¸¤ä½å°æ•°å’Œäº”ä½æ•´æ•°æ‰€ç»„æˆ</td></tr><tr><td>7</td><td>COMM</td><td>DOUBLE(7,2)</td><td>å¥–é‡‘/å¥–é‡‘</td></tr><tr><td>8</td><td>DEPTNO</td><td>BIGINT</td><td>ä¸€ä¸ªé›‡å‘˜æ‰€åœ¨çš„éƒ¨é—¨ç¼–å·ï¼Œä¸dept è¡¨çš„å¯¹åº”</td></tr></tbody></table><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> EMP (<br>EMPNO <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">PRIMARY</span> KEY COMMENT &quot;GUYUANBIANHAO &quot;,<br>ENAME <span class="hljs-type">VARCHAR</span> ( <span class="hljs-number">20</span> ),<br>JOB <span class="hljs-type">VARCHAR</span> ( <span class="hljs-number">20</span> ),<br>MGR <span class="hljs-type">BIGINT</span>,<br>HIREDATE <span class="hljs-type">DATE</span>,<br>SAL <span class="hljs-keyword">DOUBLE</span> ( <span class="hljs-number">7</span>, <span class="hljs-number">2</span> ),<br>COMM <span class="hljs-keyword">DOUBLE</span> ( <span class="hljs-number">7</span>, <span class="hljs-number">2</span> ),<br>DEPTNO <span class="hljs-type">BIGINT</span>,<br><span class="hljs-keyword">FOREIGN</span> KEY EMP ( DEPTNO ) <span class="hljs-keyword">REFERENCES</span> DEPT ( DEPTNO ) <br>);<br></code></pre></td></tr></table></figure><p>3ã€åœ¨ä¸Šè¿°ä¸¤è¡¨ä¸­æ’å…¥æ•°æ®<br>DEPT è¡¨æ•°æ®:</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-symbol">`DEPT`</span> <span class="hljs-keyword">VALUES</span> ( <span class="hljs-number">10</span>, <span class="hljs-string">&#x27;ACCOUNTING&#x27;</span>, <span class="hljs-string">&#x27;NEW YORK&#x27;</span> );<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-symbol">`DEPT`</span> <span class="hljs-keyword">VALUES</span> ( <span class="hljs-number">20</span>, <span class="hljs-string">&#x27;RESEARCH&#x27;</span>, <span class="hljs-string">&#x27;DALLAS&#x27;</span> );<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-symbol">`DEPT`</span> <span class="hljs-keyword">VALUES</span> ( <span class="hljs-number">30</span>, <span class="hljs-string">&#x27;SALES&#x27;</span>, <span class="hljs-string">&#x27;CHICAGO&#x27;</span> );<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-symbol">`DEPT`</span> <span class="hljs-keyword">VALUES</span> ( <span class="hljs-number">40</span>, <span class="hljs-string">&#x27;OPERATIONS&#x27;</span>, <span class="hljs-string">&#x27;BOSTON&#x27;</span> );<br></code></pre></td></tr></table></figure><p>EMP è¡¨æ•°æ®:</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-symbol">`EMP`</span> <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">7369</span>, <span class="hljs-string">&#x27;SMITH&#x27;</span>, <span class="hljs-string">&#x27;CLERK&#x27;</span>, <span class="hljs-number">7902</span>, <span class="hljs-string">&#x27;1980-12-17&#x27;</span>, <span class="hljs-number">800</span>, <span class="hljs-literal">NULL</span>, <span class="hljs-number">20</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-symbol">`EMP`</span> <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">7499</span>, <span class="hljs-string">&#x27;ALLEN&#x27;</span>, <span class="hljs-string">&#x27;SALESMAN&#x27;</span>, <span class="hljs-number">7698</span>, <span class="hljs-string">&#x27;1981-02-20&#x27;</span>, <span class="hljs-number">1600</span>, <span class="hljs-number">300</span>, <span class="hljs-number">30</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-symbol">`EMP`</span> <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">7521</span>, <span class="hljs-string">&#x27;WARD&#x27;</span>, <span class="hljs-string">&#x27;SALESMAN&#x27;</span>, <span class="hljs-number">7698</span>, <span class="hljs-string">&#x27;1981-02-22&#x27;</span>, <span class="hljs-number">1250</span>, <span class="hljs-number">500</span>, <span class="hljs-number">30</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-symbol">`EMP`</span> <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">7566</span>, <span class="hljs-string">&#x27;JONES&#x27;</span>, <span class="hljs-string">&#x27;MANAGER&#x27;</span>, <span class="hljs-number">7839</span>, <span class="hljs-string">&#x27;1981-04-02&#x27;</span>, <span class="hljs-number">2975</span>, <span class="hljs-literal">NULL</span>, <span class="hljs-number">20</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-symbol">`EMP`</span> <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">7654</span>, <span class="hljs-string">&#x27;MARTIN&#x27;</span>, <span class="hljs-string">&#x27;SALESMAN&#x27;</span>, <span class="hljs-number">7698</span>, <span class="hljs-string">&#x27;1981-09-28&#x27;</span>, <span class="hljs-number">1250</span>,  <span class="hljs-number">1400</span>, <span class="hljs-number">30</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-symbol">`EMP`</span> <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">7698</span>,  <span class="hljs-string">&#x27;BLAKE&#x27;</span>, <span class="hljs-string">&#x27;MANAGER&#x27;</span>, <span class="hljs-number">7839</span>,  <span class="hljs-string">&#x27;1981-05-01&#x27;</span>, <span class="hljs-number">2850</span>, <span class="hljs-literal">NULL</span>, <span class="hljs-number">30</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-symbol">`EMP`</span> <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">7782</span>,  <span class="hljs-string">&#x27;CLARK&#x27;</span>, <span class="hljs-string">&#x27;MANAGER&#x27;</span>, <span class="hljs-number">7839</span>,  <span class="hljs-string">&#x27;1981-06-09&#x27;</span>, <span class="hljs-number">2450</span>, <span class="hljs-literal">NULL</span>, <span class="hljs-number">10</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-symbol">`EMP`</span> <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">7788</span>, <span class="hljs-string">&#x27;SCOTT&#x27;</span>, <span class="hljs-string">&#x27;ANALYST&#x27;</span>, <span class="hljs-number">7566</span>, <span class="hljs-string">&#x27;1987-04-19&#x27;</span>, <span class="hljs-number">3000</span>, <span class="hljs-literal">NULL</span>, <span class="hljs-number">20</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-symbol">`EMP`</span> <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">7839</span>, <span class="hljs-string">&#x27;KING&#x27;</span>, <span class="hljs-string">&#x27;PRESIDENT&#x27;</span>, <span class="hljs-literal">NULL</span>, <span class="hljs-string">&#x27;1981-11-17&#x27;</span>, <span class="hljs-number">5000</span>, <span class="hljs-literal">NULL</span>, <span class="hljs-number">10</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-symbol">`EMP`</span> <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">7844</span>, <span class="hljs-string">&#x27;TURNER&#x27;</span>, <span class="hljs-string">&#x27;SALESMAN&#x27;</span>, <span class="hljs-number">7698</span>, <span class="hljs-string">&#x27;1981-09-08&#x27;</span>, <span class="hljs-number">1500</span>, <span class="hljs-number">0</span>, <span class="hljs-number">30</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-symbol">`EMP`</span> <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">7876</span>, <span class="hljs-string">&#x27;ADAMS&#x27;</span>, <span class="hljs-string">&#x27;CLERK&#x27;</span>, <span class="hljs-number">7788</span>, <span class="hljs-string">&#x27;1987-05-23&#x27;</span>, <span class="hljs-number">1100</span>, <span class="hljs-literal">NULL</span>, <span class="hljs-number">20</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-symbol">`EMP`</span> <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">7900</span>,  <span class="hljs-string">&#x27;JAMES&#x27;</span>, <span class="hljs-string">&#x27;CLERK&#x27;</span>, <span class="hljs-number">7698</span>, <span class="hljs-string">&#x27;1981-12-03&#x27;</span>, <span class="hljs-number">950</span>, <span class="hljs-literal">NULL</span>, <span class="hljs-number">30</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-symbol">`EMP`</span> <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">7902</span>, <span class="hljs-string">&#x27;FORD&#x27;</span>, <span class="hljs-string">&#x27;ANALYST&#x27;</span>, <span class="hljs-number">7566</span>, <span class="hljs-string">&#x27;1981-12-03&#x27;</span>, <span class="hljs-number">3000</span>, <span class="hljs-literal">NULL</span>, <span class="hljs-number">20</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-symbol">`EMP`</span> <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">7934</span>, <span class="hljs-string">&#x27;MILLER&#x27;</span>, <span class="hljs-string">&#x27;CLERK&#x27;</span>, <span class="hljs-number">7782</span>, <span class="hljs-string">&#x27;1982-01-23&#x27;</span>, <span class="hljs-number">1300</span>, <span class="hljs-literal">NULL</span>, <span class="hljs-number">10</span>);<br></code></pre></td></tr></table></figure><p>4ã€ç»ƒä¹ ä¸‹é¢å†…å®¹ï¼š</p><table><thead><tr><th>ç»ƒä¹ ä¸‹é¢å†…å®¹ï¼š</th></tr></thead><tbody><tr><td>01.æŸ¥è¯¢æ¯ä¸ªé›‡å‘˜çš„ç¼–å·ã€å§“åã€èŒä½ã€‚<br>SELECT EMPNO,ename,job FROM emp;#SQLè¯­å¥æ‰€æœ‰ï¼ˆå…³é”®å­—ï¼Œè¡¨ï¼Œå­—æ®µï¼‰å¤§å°å†™ä¸æ•æ„Ÿ</td></tr><tr><td>02.æŸ¥è¯¢æ¯ä¸ªé›‡å‘˜çš„èŒä½ï¼Œä½¿ç”¨ DISTINCTæ¶ˆé™¤æ‰æ˜¾ç¤ºçš„é‡å¤è¡Œè®°å½•ã€‚<br>SELECT DISTINCT JOB FROM EMP;</td></tr><tr><td>03.è®¡ç®—æ¯ä¸ªé›‡å‘˜çš„ç¼–å·ã€å§“åã€åŸºæœ¬å¹´è–ªã€‚å¹´è–ª=(å·¥èµ„+å¥–é‡‘)*12ï¼Œ(ä½¿ç”¨  IFNULL å‡½æ•°åˆ¤æ–­  NULLï¼‰<br>SELECT EMPNO,ENAME,(SAL+IFNULL(COMM,0)) *12 FROM EMP;</td></tr><tr><td>04.æ¯ä¸ªé›‡å‘˜æ¯ä¸ªæœˆå…¬å¸ä¼šè¡¥è´´é¥­é£Ÿ  200 å…ƒï¼Œäº¤é€šè¡¥åŠ© 300 å…ƒï¼Œè®¡ç®—å¹´è–ªã€‚<br>SELECT (SAL+IFNULL(COMM,0)+500) *12 FROM EMP;</td></tr><tr><td>05.æŸ¥è¯¢åŸºæœ¬å·¥èµ„é«˜äº 2000 çš„å…¨éƒ¨é›‡å‘˜ä¿¡æ¯ã€‚<br>SELECT * FROM EMP WHERE SAL&gt;2000;</td></tr><tr><td>06.æŸ¥è¯¢å‡º smith çš„ä¿¡æ¯ã€‚<br>SELECT * FROM EMP WHERE ENAME=â€™SMITHâ€™;#è¿™ä¸ªSMITHéœ€è¦å¼•èµ·æ¥</td></tr><tr><td>07.æŸ¥è¯¢å‡ºæ‰€æœ‰ä¸æ˜¯ CLERK çš„è¯¦ç»†ä¿¡æ¯ã€‚<br>SELECT * FROM EMP WHERE JOB!=â€™CLERKâ€™;</td></tr><tr><td>08.æŸ¥è¯¢å‡ºæ‰€æœ‰é”€å”®äººå‘˜(SALESMAN)çš„åŸºæœ¬ä¿¡æ¯ï¼Œå¹¶ä¸”è¦æ±‚é”€å”®äººå‘˜çš„å·¥èµ„é«˜äº 1300ã€‚<br>SELECT * FROM EMP WHERE JOB=â€™SALESMANâ€™ AND SAL&gt;1300;</td></tr><tr><td>09.æŸ¥è¯¢å‡ºå·¥èµ„èŒƒå›´åœ¨ 1500~3000 ä¹‹é—´çš„å…¨éƒ¨é›‡å‘˜ä¿¡æ¯ï¼ˆåŒ…å« 1500 å’Œ 3000ï¼‰ã€‚<br>SELECT * FROM EMP WHERE SAL BETWEEN 1500 AND 3000;</td></tr><tr><td>10.æŸ¥è¯¢å‡ºæ‰€æœ‰ç»ç†æˆ–è€…æ˜¯é”€å”®äººå‘˜çš„ä¿¡æ¯ï¼Œå¹¶ä¸”è¦æ±‚è¿™äº›äººçš„åŸºæœ¬å·¥èµ„é«˜äº  1500ã€‚<br>SELECT * FROM EMP WHERE JOB IN (â€˜SALESMANâ€™,â€™MANAGERâ€™) AND SAL&gt;1500;</td></tr><tr><td>11.è¦æ±‚æŸ¥è¯¢å‡ºæ‰€æœ‰åœ¨ 1981 å¹´é›‡ä½£çš„é›‡å‘˜ä¿¡æ¯ã€‚<br>SELECT * FROM emp where HIREDATE like â€˜1981%â€™;</td></tr><tr><td>12.æŸ¥è¯¢æ‰€æœ‰é¢†å–å¥–é‡‘çš„é›‡å‘˜ä¿¡æ¯ï¼ˆcomm ä¸ä¸ºç©ºï¼‰ã€‚<br>SELECT * FROM EMP WHERE COMM IS NOT NULL;</td></tr><tr><td>13.æŸ¥è¯¢æ‰€æœ‰é¢†å–å¥–é‡‘é«˜äº 100 çš„é›‡å‘˜ä¿¡æ¯ã€‚<br>SELECT * FROM EMP WHERE COMM IS NOT NULL AND COMM&gt;100;</td></tr><tr><td>14.æŸ¥è¯¢å‡ºé›‡å‘˜ç¼–å·æ˜¯ 7369ã€7566ã€9999 çš„é›‡å‘˜ä¿¡æ¯ã€‚<br>SELECT * FROM EMP WHERE EMPNO IN (7369,7566,9999);</td></tr><tr><td>15.æŸ¥è¯¢å‡ºæ‰€æœ‰é›‡å‘˜å§“åæ˜¯ä»¥ A å¼€å¤´çš„å…¨éƒ¨é›‡å‘˜ä¿¡æ¯ã€‚<br>SELECT * FROM EMP WHERE ENAME LIKE â€˜A%â€™;</td></tr><tr><td>16.æŸ¥è¯¢å‡ºé›‡å‘˜å§“åç¬¬äºŒä¸ªå­—æ¯æ˜¯ M çš„å…¨éƒ¨é›‡å‘˜ä¿¡æ¯ã€‚<br>SELECT * FROM EMP WHERE ENAME LIKE â€˜_M%â€™;</td></tr><tr><td>17.æŸ¥è¯¢å‡ºé›‡å‘˜å§“åä»»æ„ä½ç½®ä¸ŠåŒ…å«å­—æ¯ A  çš„å…¨éƒ¨é›‡å‘˜ä¿¡æ¯ã€‚<br>SELECT * FROM EMP WHERE ENAME LIKE â€˜%A%â€™;</td></tr><tr><td>18.æŸ¥è¯¢å‡ºæ‰€æœ‰é›‡å‘˜çš„ä¿¡æ¯ï¼Œè¦æ±‚æŒ‰ç…§å·¥èµ„æ’åºã€‚<br>SELECT * FROM EMP ORDER BY SAL;</td></tr><tr><td>19.è¦æ±‚æŸ¥è¯¢æ‰€æœ‰é›‡å‘˜çš„ä¿¡æ¯ï¼ŒæŒ‰ç…§é›‡ä½£æ—¥æœŸç”±å…ˆåæ’åºã€‚<br>SELECT * FROM EMP ORDER BY HIREDATE;</td></tr><tr><td>20.æŸ¥è¯¢å…¨éƒ¨é›‡å‘˜ä¿¡æ¯ï¼ŒæŒ‰ç…§å·¥èµ„ç”±é«˜åˆ°ä½æ’åºï¼Œå¦‚æœå·¥èµ„ç›¸åŒï¼Œåˆ™æŒ‰ç…§é›‡ä½£æ—¥æœŸç”±å…ˆåæ’åºã€‚<br>SELECT * FROM EMP ORDER BY SAL DESC,HIREDATE;</td></tr><tr><td>21.æŸ¥è¯¢éƒ¨é—¨ 30 ä¸­çš„æ‰€æœ‰å‘˜å·¥ã€‚<br>SELECT * FROM EMP WHERE DEPTNO=30;</td></tr><tr><td>22.æŸ¥è¯¢å‡ºæ‰€æœ‰åŠäº‹å‘˜ï¼ˆCLERKï¼‰çš„å§“åï¼Œç¼–å·å’Œéƒ¨é—¨ç¼–å·ã€‚<br>SELECT ENAME,EMPNO,DEPTNO FROM EMP WHERE JOB=â€™CLERKâ€™;</td></tr><tr><td>23.æŸ¥è¯¢å‡ºå¥–é‡‘é«˜äºè–ªé‡‘çš„å‘˜å·¥ã€‚<br>SELECT * FROM EMP WHERE COMM&gt;SAL;</td></tr><tr><td>24.æŸ¥è¯¢å‡ºå¥–é‡‘é«˜äºè–ªé‡‘çš„ 60%çš„å‘˜å·¥ã€‚<br>SELECT * FROM EMP WHERE COMM&gt;0.6*SAL;</td></tr><tr><td>25.æŸ¥è¯¢å‡ºéƒ¨é—¨ 10 ä¸­æ‰€æœ‰ç»ç†ï¼ˆMANAGERï¼‰å’Œéƒ¨é—¨ 20 ä¸­æ‰€æœ‰åŠäº‹å‘˜ï¼ˆCLERKï¼‰çš„è¯¦ç»†èµ„æ–™ã€‚<br>SELECT * FROM EMP WHERE DEPTNO=10 AND JOB=â€™MANAGERâ€™ OR DEPTNO=20 AND JOB=â€™CLERKâ€™;<br>SELECT * FROM EMP WHERE DEPTNO=10 AND JOB=â€™MANAGERâ€™ UNION SELECT * FROM EMP WHERE DEPTNO=20 AND JOB=â€™CLERKâ€™;</td></tr><tr><td>26.æŸ¥è¯¢å‡ºéƒ¨é—¨ 10 ä¸­æ‰€æœ‰ç»ç†ï¼Œéƒ¨é—¨ 20 ä¸­æ‰€æœ‰åŠäº‹å‘˜ï¼Œæ—¢ä¸æ˜¯ç»ç†åˆä¸æ˜¯åŠäº‹å‘˜ä½†å…¶è–ªé‡‘å¤§äºæˆ–ç­‰äº 2000  çš„æ‰€æœ‰å‘˜å·¥çš„ä¿¡æ¯ã€‚<br>SELECT * FROM emp where (JOB=â€™MANAGERâ€™ and deptno=10) OR  (job=â€™CLERKâ€™ and deptno=20 ) OR (JOB!=â€™MANAGERâ€™ and job!=â€™CLERKâ€™  and sal&gt;=2000)ï¼›</td></tr><tr><td>27.æŸ¥è¯¢å‡ºæ”¶å–å¥–é‡‘çš„å‘˜å·¥çš„ä¸åŒå·¥ä½œã€‚<br>SELECT DISTINCT JOB FROM EMP WHERE COMM IS NOT NULL;</td></tr><tr><td>28.æŸ¥è¯¢å‡ºä¸æ”¶å–å¥–é‡‘æˆ–æ”¶å–çš„å¥–é‡‘ä½äº  100 çš„å‘˜å·¥ã€‚<br>SELECT * FROM EMP WHERE COMM IS NULL OR COMM&lt;100;<br>#WHERE COMM&lt;100  ä¼šè¿‡å…ˆæ»¤æ‰ç©ºå€¼ï¼Œåœ¨æ¯”è¾ƒ</td></tr><tr><td>29.æŸ¥è¯¢å‡ºä¸å¸¦æœ‰â€œRâ€çš„å‘˜å·¥çš„å§“åã€‚<br>SELECT * FROM EMP WHERE ENAME NOT LIKE â€˜%R%â€™;</td></tr><tr><td>30.æŸ¥è¯¢å‡ºæ¯ä¸ªé›‡å‘˜çš„å§“åã€èŒä½ã€é¢†å¯¼å§“åã€‚<br>SELECT A.ENAME,A.JOB,B.ENAME FROM EMP A,EMP B WHERE A.MGR=B.EMPNO;#è€æ¿æ²¡æœ‰é¢†å¯¼ï¼Œè¿™æ ·å†™ä¼šå°‘ä¸€æ¡è€æ¿çš„è®°å½•<br>SELECT A.ENAME,A.JOB,B.ENAME FROM EMP A LEFT JOIN EMP B ON A.MGR=B.EMPNO;</td></tr><tr><td>31.æŸ¥è¯¢å‡ºæ‰€æœ‰å‘˜å·¥çš„ç¼–å·ã€å§“ååŠå…¶ç›´æ¥ä¸Šçº§çš„ç¼–å·ã€å§“åï¼Œæ˜¾ç¤ºçš„ç»“æœæŒ‰é¢†å¯¼å¹´å·¥èµ„çš„é™åºæ’åˆ—ã€‚<br>SELECT A.EMPNO,A.ENAME,A.JOB,A.MGR,B.ENAME FROM EMP A LEFT JOIN EMP B ON A.MGR=B.EMPNO ORDER BY B.SAL DESC;</td></tr><tr><td>32.æŸ¥è¯¢å‡ºåœ¨é”€å”®éƒ¨ï¼ˆSALESï¼‰å·¥ä½œçš„å‘˜å·¥å§“åã€åŸºæœ¬å·¥èµ„ã€é›‡ä½£æ—¥æœŸã€éƒ¨é—¨åç§°ã€‚ï¼ˆä¸çŸ¥é“é”€å”®éƒ¨ç¼–å·ï¼‰ã€‚<br>SELECT A.ENAME,A.SAL,A.HIREDATE,B.DNAME FROM EMP A,DEPT B WHERE A.DEPTNO=B.DEPTNO AND B.DNAME=â€™SALESâ€™;</td></tr><tr><td>33.æŸ¥è¯¢å‡ºæ‰€æœ‰å‘˜å·¥çš„å§“åã€éƒ¨é—¨åç§°å’Œå·¥èµ„ã€‚<br>SELECT A.ENAME,A.SAL,A.HIREDATE,B.DNAME FROM EMP A,DEPT B WHERE A.DEPTNO=B.DEPTNO;</td></tr><tr><td>34.æŸ¥è¯¢å‡ºæ‰€æœ‰å‘˜å·¥çš„å¹´å·¥èµ„ï¼Œæ‰€åœ¨éƒ¨é—¨åç§°ï¼ŒæŒ‰å¹´è–ªä»ä½åˆ°é«˜æ’åºã€‚<br>SELECT (A.SAL+IFNULL(A.COMM,0)) * 12 å¹´è–ª,B.DNAME FROM EMP A,DEPT B WHERE A.DEPTNO=B.DEPTNO ORDER BY å¹´è–ª DESC;</td></tr><tr><td>35.æŸ¥è¯¢å‡ºæŸä¸ªå‘˜å·¥çš„ä¸Šçº§ä¸»ç®¡åŠæ‰€åœ¨éƒ¨é—¨åç§°ï¼Œå¹¶è¦æ±‚å‡ºè¿™äº›ä¸»ç®¡ä¸­çš„è–ªæ°´è¶…è¿‡  3000ã€‚<br>SELECT A.ENAME,B.ENAME,C.DNAME FROM EMP A LEFT JOIN EMP B ON A.MGR=B.EMPNO LEFT JOIN DEPT C ON A.DEPTNO=C.DEPTNO WHERE B.SAL&gt;3000;</td></tr><tr><td>36.æŸ¥è¯¢å‡ºå…¬å¸çš„æœ€é«˜å’Œæœ€ä½å·¥èµ„ã€‚<br>SELECT MAX(SAL),MIN(SAL) FROM EMP;</td></tr><tr><td>37.æŸ¥è¯¢å‡ºæ¯ä¸ªéƒ¨é—¨çš„äººæ•°ã€å¹³å‡å·¥èµ„ï¼Œåªæ˜¾ç¤ºéƒ¨é—¨ç¼–å·ã€‚<br>SELECT DEPTNO,COUNT(1),AVG(SAL) FROM EMP GROUP BY DEPTNO;</td></tr><tr><td>38.æŸ¥è¯¢å‡ºæ¯ç§èŒä½çš„æœ€é«˜å’Œæœ€ä½å·¥èµ„ã€‚<br>SELECT JOB,MAX(SAL),MIN(SAL) FROM EMP GROUP BY JOB;</td></tr><tr><td>39.æŸ¥è¯¢å¹³å‡å·¥èµ„é«˜äº 2000 çš„èŒä½ä¿¡æ¯ï¼Œä»¥åŠä»äº‹æ­¤èŒä½çš„é›‡å‘˜äººæ•°ã€å¹³å‡å·¥èµ„ã€‚<br>SELECT JOB,COUNT(1),AVG(SAL) FROM EMP GROUP BY JOB HAVING AVG(SAL)&gt;2000;</td></tr><tr><td>40.æŸ¥è¯¢å‘˜å·¥ç¼–å·å¤§äºå…¶é¢†å¯¼ç¼–å·çš„æ¯ä¸ªå‘˜å·¥çš„å§“åã€èŒä½ã€é¢†å¯¼åç§°ã€‚<br>SELECT A.ENAME,A.JOB,B.ENAME FROM EMP A LEFT JOIN EMP B ON A.MGR=B.EMPNO WHERE A.EMPNO&gt;A.MGR;<br>SELECT e.ename,e.job,p.ename,e.empno,p.empno FROM  emp AS e LEFT JOIN emp AS p ON e.mgr = p.empno  where  e.empno&gt;p.empno</td></tr><tr><td>*41 æŸ¥è¯¢å‡ºè‡³å°‘æœ‰ä¸€ä¸ªå‘˜å·¥çš„æ‰€æœ‰éƒ¨é—¨ç¼–å·ã€åç§°ï¼Œå¹¶ç»Ÿè®¡å‡ºè¿™äº›éƒ¨é—¨çš„å¹³å‡å·¥èµ„ã€æœ€ä½å·¥èµ„ã€æœ€é«˜å·¥èµ„ã€‚<br>SELECT d.deptno,d.dname,avg(p.sal),min(p.sal),max(p.sal) FROM emp AS p join dept AS d ON p.deptno = d.deptno  GROUP BY d.deptno HAVING count(p.deptno)&gt;=1</td></tr><tr><td>*42.æŸ¥è¯¢å‡ºéƒ¨é—¨åç§°å’Œè¿™äº›éƒ¨é—¨çš„å‘˜å·¥ä¿¡æ¯ï¼ˆæ•°é‡ã€å¹³å‡å·¥èµ„ï¼‰ï¼ŒåŒæ—¶åˆ—å‡ºé‚£äº›æ²¡æœ‰å‘˜å·¥çš„éƒ¨é—¨ã€‚<br>SELECT d.dname,e.ename,count(e.empno),avg(e.sal) FROM dept AS d left JOIN emp AS e on d.deptno=e.deptno GROUP BY  d.deptno</td></tr><tr><td>43.æŸ¥è¯¢å·¥èµ„æ¯”smith æ›´é«˜çš„å…¨éƒ¨å‘˜å·¥ä¿¡æ¯ã€‚<br>SELECT * FROM EMP WHERE SAL&gt;(SELECT SAL FROM EMP WHERE ENAME=â€™SMITHâ€™);</td></tr><tr><td>44.æŸ¥è¯¢å·¥èµ„å’ŒèŒä½å’Œsmith ç›¸åŒçš„æ‰€æœ‰å‘˜å·¥ä¿¡æ¯ã€‚<br>select * from emp where (sal,job)=(select sal,job from emp where ename=â€™SMITHâ€™);</td></tr><tr><td>*45.æŸ¥è¯¢å„éƒ¨é—¨çš„éƒ¨é—¨ç¼–å·ï¼Œéƒ¨é—¨åè¯ï¼Œéƒ¨é—¨åœ°å€ï¼Œå‘˜å·¥äººæ•°å’Œå¹³å‡å·¥èµ„ã€‚<br>select d.deptno,d.dname,d.loc,count(e.empno),IFNULL(avg(e.sal),0) from dept AS d  left JOIN emp  AS e ON d.deptno=e.deptno GROUP BY d.deptno;</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>æ•°æ®åº“</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ•°æ®åº“</tag>
      
      <tag>MySQL</tag>
      
      <tag>æ•°æ®åº“ç»ƒä¹ </tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è½¯ä»¶æµ‹è¯•</title>
    <link href="/2019/11/19/%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95/"/>
    <url>/2019/11/19/%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95/</url>
    
    <content type="html"><![CDATA[<h3 id="1ã€è½¯ä»¶æµ‹è¯•ä¸€äº›æ¦‚å¿µ"><a href="#1ã€è½¯ä»¶æµ‹è¯•ä¸€äº›æ¦‚å¿µ" class="headerlink" title="1ã€è½¯ä»¶æµ‹è¯•ä¸€äº›æ¦‚å¿µ"></a>1ã€è½¯ä»¶æµ‹è¯•ä¸€äº›æ¦‚å¿µ</h3><p><strong>æŒ‰æ˜¯å¦æŸ¥çœ‹ç¨‹åºå†…éƒ¨ç»“æ„åˆ†ä¸º</strong></p><p>é»‘ç›’æµ‹è¯•ï¼ˆblack-box testingï¼‰ï¼šåªå…³å¿ƒè¾“å…¥å’Œè¾“å‡ºçš„ç»“æœï¼Œé»‘ç›’æµ‹è¯•åˆ†ä¸ºåŠŸèƒ½æµ‹è¯•å’Œæ€§èƒ½æµ‹è¯•<br>ç™½ç›’æµ‹è¯•ï¼ˆwhite-box testingï¼‰ï¼šå»ç ”ç©¶é‡Œé¢çš„æºä»£ç å’Œç¨‹åºç»“æ„</p><p><strong>æŒ‰æ˜¯å¦è¿è¡Œç¨‹åºåˆ†ä¸ºï¼šé™æ€æµ‹è¯•ã€åŠ¨æ€æµ‹è¯•</strong></p><p>é™æ€æµ‹è¯•ï¼ˆstatic testingï¼‰</p><p>æ˜¯æŒ‡ä¸å®é™…è¿è¡Œè¢«æµ‹è½¯ä»¶ï¼Œè€Œåªæ˜¯é™æ€åœ°æ£€æŸ¥ç¨‹åºä»£ç ã€ç•Œé¢æˆ–æ–‡æ¡£å¯èƒ½å­˜åœ¨çš„é”™è¯¯çš„è¿‡ç¨‹ã€‚åŒ…æ‹¬ï¼š</p><ul><li>å¯¹äºä»£ç æµ‹è¯•ï¼Œä¸»è¦æ˜¯æµ‹è¯•ä»£ç æ˜¯å¦ç¬¦åˆç›¸åº”çš„æ ‡å‡†å’Œè§„èŒƒã€‚</li><li>å¯¹äºç•Œé¢æµ‹è¯•ï¼Œä¸»è¦æµ‹è¯•è½¯ä»¶çš„å®é™…ç•Œé¢ä¸éœ€æ±‚ä¸­çš„è¯´æ˜æ˜¯å¦ç›¸ç¬¦ã€‚</li><li>å¯¹äºæ–‡æ¡£æµ‹è¯•ï¼Œä¸»è¦æµ‹è¯•ç”¨æˆ·æ‰‹å†Œå’Œéœ€æ±‚è¯´æ˜æ˜¯å¦çœŸæ­£ç¬¦åˆç”¨æˆ·çš„å®é™…éœ€æ±‚ã€‚</li></ul><p>åŠ¨æ€æµ‹è¯•ï¼ˆdynamic testingï¼‰</p><p>æ˜¯æŒ‡å®é™…è¿è¡Œè¢«æµ‹ç¨‹åºï¼Œè¾“å…¥ç›¸åº”çš„æµ‹è¯•æ•°æ®ï¼Œæ£€æŸ¥è¾“å‡ºç»“æœå’Œé¢„æœŸç»“æœæ˜¯å¦ç›¸ç¬¦çš„è¿‡ç¨‹</p><p><strong>UTæ˜¯å•å…ƒæµ‹è¯•ï¼ŒUnit Testï¼›</strong></p><p>å•å…ƒæµ‹è¯•ä»»åŠ¡åŒ…æ‹¬ï¼š1 æ¨¡å—æ¥å£æµ‹è¯•ï¼›2 æ¨¡å—å±€éƒ¨æ•°æ®ç»“æ„æµ‹è¯•ï¼›3 æ¨¡å—è¾¹ç•Œæ¡ä»¶æµ‹è¯•ï¼›4 æ¨¡å—ä¸­æ‰€æœ‰ç‹¬ç«‹æ‰§è¡Œé€šè·¯æµ‹è¯•ï¼›5 æ¨¡å—çš„å„æ¡é”™è¯¯å¤„ç†é€šè·¯æµ‹è¯•ã€‚ï¼›</p><p><strong>ITæ˜¯é›†æˆæµ‹è¯•ï¼ŒIntegration Testï¼›</strong></p><p>é›†æˆæµ‹è¯•é˜¶æ®µæ˜¯ä»¥é»‘ç›’æ³•ä¸ºä¸»ï¼Œåœ¨è‡ªåº•å‘ä¸Šé›†æˆçš„æ—©æœŸï¼Œç™½ç›’æ³•æµ‹è¯•å ä¸€å®šçš„æ¯”ä¾‹ï¼Œéšç€é›†æˆæµ‹è¯•çš„ä¸æ–­æ·±å…¥ï¼Œè¿™ç§æ¯”ä¾‹åœ¨æµ‹è¯•è¿‡ç¨‹ä¸­å°†è¶Šæ¥è¶Šå°‘ï¼Œæ¸æ¸åœ°ï¼Œé»‘ç›’æ³•æµ‹è¯•å æ®ä¸»å¯¼åœ°ä½ã€‚</p><p><strong>STæ˜¯ç³»ç»Ÿæµ‹è¯•ï¼ŒSystem Testï¼›</strong></p><p>ä»æŠ€æœ¯è§’åº¦çœ‹ï¼Œç³»ç»Ÿæµ‹è¯•æ˜¯æ•´ä¸ªæµ‹è¯•é˜¶æ®µçš„æœ€åä¸€æ­¥ï¼Œæ‰€æœ‰çš„å¼€å‘å’Œæµ‹è¯•åœ¨è¿™ä¸€ç‚¹ä¸Šé›†ä¸­è¡¨ç°ä¸ºç”Ÿæˆä¸€ä¸ªå…·æœ‰ä¸€å®šåŠŸèƒ½çš„è½¯ä»¶ç³»ç»Ÿã€‚è¯¥é˜¶æ®µä¸»è¦å¯¹ç³»ç»Ÿçš„å‡†ç¡®æ€§åŠå®Œæ•´æ€§ç­‰æ–¹é¢è¿›è¡Œæµ‹è¯•ã€‚ä¸»è¦è¿›è¡Œï¼šåŠŸèƒ½ç¡®è®¤æµ‹è¯•ã€è¿è¡Œæµ‹è¯•ã€å¼ºåº¦æµ‹è¯•ã€æ¢å¤æµ‹è¯•ã€å®‰å…¨æ€§æµ‹è¯•ç­‰ã€‚ç³»ç»Ÿæµ‹è¯•çš„æµ‹è¯•äººå‘˜ç”±æµ‹è¯•ç»„æˆå‘˜ï¼ˆæˆ–è´¨é‡ä¿è¯äººå‘˜ï¼‰æˆ–æµ‹è¯•ç»„æˆå‘˜ä¸ç”¨æˆ·å…±åŒæµ‹è¯•ã€‚åœ¨æ•´ä¸ªç³»ç»Ÿå¼€å‘å®Œæˆï¼Œå³å°†äº¤ä»˜ç”¨æˆ·ä½¿ç”¨å‰è¿›è¡Œã€‚åœ¨è¿™ä¸€é˜¶æ®µï¼Œå®Œå…¨é‡‡ç”¨é»‘ç›’æ³•å¯¹æ•´ä¸ªç³»ç»Ÿè¿›è¡Œæµ‹è¯•ã€‚</p><p><strong>UATæ˜¯éªŒæ”¶æµ‹è¯•ï¼ŒUser Acceptance Testï¼›</strong></p><p>éªŒæ”¶æµ‹è¯•æ˜¯å‘æœªæ¥çš„ç”¨æˆ·è¡¨æ˜ç³»ç»Ÿèƒ½å¤Ÿåƒé¢„å®šè¦æ±‚é‚£æ ·å·¥ä½œã€‚ç»é›†æˆæµ‹è¯•åï¼Œå·²ç»æŒ‰ç…§è®¾è®¡æŠŠæ‰€æœ‰çš„æ¨¡å—ç»„è£…æˆä¸€ä¸ªå®Œæ•´çš„è½¯ä»¶ç³»ç»Ÿï¼Œæ¥å£é”™è¯¯ä¹Ÿå·²ç»åŸºæœ¬æ’é™¤äº†ï¼Œæ¥ç€å°±åº”è¯¥è¿›ä¸€æ­¥éªŒè¯è½¯ä»¶çš„æœ‰æ•ˆæ€§ï¼Œè¿™å°±æ˜¯éªŒæ”¶æµ‹è¯•çš„ä»»åŠ¡ï¼Œå³è½¯ä»¶çš„åŠŸèƒ½å’Œæ€§èƒ½å¦‚åŒç”¨æˆ·æ‰€åˆç†æœŸå¾…çš„é‚£æ ·ã€‚ </p><p><strong>åŠŸèƒ½æµ‹è¯•</strong></p><p>åŠŸèƒ½æµ‹è¯•åˆ†ä¸‰ä¸ªé˜¶æ®µï¼Œç¬¬ä¸€ä¸ªé˜¶æ®µè‡ªæµ‹ï¼Œç¬¬äºŒä¸ªé˜¶æ®µäº¤å‰æµ‹è¯•ï¼Œæœ€åå›å½’æµ‹è¯•ã€‚äº¤å‰æµ‹è¯•æŒ‰å­—é¢æ„æ€ç†è§£å°±æ˜¯æŠŠæµ‹è¯•äººå‘˜æ‰€æµ‹è¯•çš„æ¨¡å—äº¤æ¢æµ‹è¯•ã€‚å›å½’æµ‹è¯•æ˜¯æŒ‡ä¿®æ”¹äº†æ—§ä»£ç åï¼Œé‡æ–°è¿›è¡Œæµ‹è¯•ä»¥ç¡®è®¤ä¿®æ”¹æ²¡æœ‰å¼•å…¥æ–°çš„é”™è¯¯æˆ–å¯¼è‡´å…¶ä»–ä»£ç äº§ç”Ÿé”™è¯¯ã€‚å›å½’æµ‹è¯•æ˜¯æŒ‡é‡å¤ä»¥å‰çš„å…¨éƒ¨æˆ–éƒ¨åˆ†çš„ç›¸åŒæµ‹è¯•ï¼Œå›å½’æµ‹è¯•çš„é‡å¿ƒï¼Œä»¥å…³é”®æ€§æ¨¡ç»„ä¸ºæ ¸å¿ƒã€‚</p><h3 id="2ã€å•å…ƒæµ‹è¯•"><a href="#2ã€å•å…ƒæµ‹è¯•" class="headerlink" title="2ã€å•å…ƒæµ‹è¯•"></a>2ã€å•å…ƒæµ‹è¯•</h3><p>å†™äº†ä¸ªç±»ï¼Œè¦ç»™åˆ«äººç”¨ï¼Œä¼šä¸ä¼šæœ‰bugï¼Ÿæµ‹è¯•ä¸€ä¸‹ã€‚</p><p>ç¨‹åºå•å…ƒæ˜¯åº”ç”¨çš„æœ€å°å¯æµ‹è¯•éƒ¨ä»¶ã€‚ä¸€ä¸ªå•å…ƒå¯èƒ½æ˜¯å•ä¸ªç¨‹åºã€ç±»ã€å¯¹è±¡ã€æ–¹æ³•ç­‰ã€‚</p><p>å•å…ƒæµ‹è¯•æ˜¯ä¿éšœä¸šåŠ¡ä»£ç è´¨é‡çš„éå¸¸æœ‰æ•ˆå·¥å…·ï¼Œä¹Ÿæ˜¯æé«˜ä»£ç å¯é æ€§çš„å¿…è¦æ‰‹æ®µã€‚å•å…ƒæµ‹è¯•æ˜¯ç¼–å†™æµ‹è¯•ä»£ç ï¼Œåº”è¯¥å‡†ç¡®ã€å¿«é€Ÿåœ°ä¿è¯ç¨‹åºåŸºæœ¬æ¨¡å—çš„æ­£ç¡®æ€§ã€‚<br>ç”¨mainæ–¹æ³•æµ‹è¯•çš„é—®é¢˜ï¼šä¸èƒ½ä¸€èµ·è¿è¡Œï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹éœ€è¦äººä¸ºçš„è§‚å¯Ÿè¾“å‡ºç¡®å®šæ˜¯å¦æ­£ç¡®ã€‚</p><p>å‡å°‘Bugã€å¿«é€Ÿå®šä½Bugå‡å°‘è°ƒè¯•æ—¶é—´ã€æé«˜ä»£ç è´¨é‡ã€æ€§èƒ½æµ‹è¯•ã€æ”¾å¿ƒé‡æ„</p><h4 id="2-1ã€Junit4å…¥é—¨"><a href="#2-1ã€Junit4å…¥é—¨" class="headerlink" title="2.1ã€Junit4å…¥é—¨"></a>2.1ã€Junit4å…¥é—¨</h4><p>JUnitæ˜¯ä¸€ä¸ªå•å…ƒæµ‹è¯•æ¡†æ¶ï¼Œæˆ‘ä»¬å¯ä»¥åŸºäºå®ƒç¼–å†™ç”¨æ¥æµ‹è¯•ä»£ç çš„ä»£ç ï¼Œä»è€Œæ›´æ–¹ä¾¿åœ°è¿›è¡Œå›å½’æµ‹è¯•ã€‚</p><h5 id="2-1-1ã€å¯¼åŒ…"><a href="#2-1-1ã€å¯¼åŒ…" class="headerlink" title="2.1.1ã€å¯¼åŒ…"></a>2.1.1ã€å¯¼åŒ…</h5><p><strong>Eclipse</strong>è‡ªå¸¦junitåŒ…ï¼Œä¹Ÿå¯å¯¼å…¥æœ€æ–°çš„JunitåŒ…ï¼Œæœ€å¥½æ˜¯è‡ªå·±å¯¼å…¥çš„æœ€æ–°çš„åŒ…ã€‚<a href="https://github.com/junit-team/junit4/wiki/Download-and-Install">junit4ä¼ é€é—¨</a></p><p><strong>IntelliJ IDEA</strong>åˆ›å»ºMavené¡¹ç›®ï¼Œæ·»åŠ ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.11<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><h5 id="2-1-2ã€æ–°å»ºä¸€ä¸ªTestç±»"><a href="#2-1-2ã€æ–°å»ºä¸€ä¸ªTestç±»" class="headerlink" title="2.1.2ã€æ–°å»ºä¸€ä¸ªTestç±»"></a>2.1.2ã€æ–°å»ºä¸€ä¸ªTestç±»</h5><p><strong>Eclipseï¼š</strong>Newâ€“&gt;JunitTest Caseâ€“&gt;åœ¨Junit Test Caseç•Œé¢ä¸­ï¼Œé€‰New Junit 4 test , Nameä¸€èˆ¬ä¸ºè¦è¢«æµ‹è¯•çš„ç±»å+Test,Class under testå¯ä»¥é€‰å¯¹å“ªä¸ªç±»è¿›è¡Œæµ‹è¯•ã€å¯¹è¿™ä¸ªç±»çš„å“ªäº›æ–¹æ³•æµ‹è¯•ã€‚â€“&gt;Finish</p><p><strong>IntelliJ IDEA</strong>ï¼š</p><p>å†™ä¸€ä¸ªæ–¹æ³•ç±»ï¼Œå®šä¹‰ä¸¤ä¸ªæ–¹æ³•å®ç°ä¸¤ä¸ªæ•°çš„ç›¸åŠ å’Œç›¸å‡è¿ç®—ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">JunitDemo</span></span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-keyword">int</span> a, <span class="hljs-keyword">int</span>  b)</span></span>&#123;<br>        <span class="hljs-keyword">return</span> a+b;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">subtract</span><span class="hljs-params">(<span class="hljs-keyword">int</span> a, <span class="hljs-keyword">int</span>  b)</span></span>&#123;<br>        <span class="hljs-keyword">return</span> a-b;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ¥ä¸‹å†™æˆ‘ä»¬çš„æµ‹è¯•ç±»ï¼š</p><p><code>assertEquals</code>æ–¹æ³•ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯é¢„æœŸçš„å€¼ï¼Œç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯è°ƒç”¨ç±»çš„æ–¹æ³•ã€‚å¦‚æœè°ƒç”¨ç»“æœå’Œé¢„æœŸä¸ä¸€æ ·å°±ä¼šæŠ¥é”™ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> org.junit.Assert;<br><span class="hljs-keyword">import</span> org.junit.Test;<br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">JunitTest</span> </span>&#123;<br>    <span class="hljs-meta">@Test</span><span class="hljs-comment">//æµ‹è¯•æ–¹æ³•å¿…é¡»ç”¨@Testä¿®é¥°</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testAdd</span><span class="hljs-params">()</span></span>&#123;<span class="hljs-comment">//æµ‹è¯•æ–¹æ³•å¿…é¡»ç”¨public voidä¿®é¥°ï¼Œä¸èƒ½å¸¦å‚æ•°</span><br>        assertEquals(<span class="hljs-number">6</span>, <span class="hljs-keyword">new</span> JunitDemo().add(<span class="hljs-number">2</span>,<span class="hljs-number">4</span>));<br>    &#125;<br>    <span class="hljs-meta">@Test</span><span class="hljs-comment">//æµ‹è¯•æ–¹æ³•å¿…é¡»ç”¨@Testä¿®é¥°</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testSubtract</span><span class="hljs-params">()</span></span>&#123;<br>        assertEquals(<span class="hljs-number">20</span>, <span class="hljs-keyword">new</span> JunitDemo().subtract(<span class="hljs-number">30</span>, <span class="hljs-number">10</span>));<br>    &#125;<br>    <span class="hljs-comment">//æ¯ä¸ªæµ‹è¯•æ–¹æ³•å¿…é¡»å¯ä»¥å•ç‹¬æµ‹è¯•ï¼Œå„æ–¹æ³•é—´ä¸è¦æœ‰ä¾èµ–ã€‚</span><br>&#125;<br></code></pre></td></tr></table></figure><h5 id="2-1-3ã€æµ‹è¯•çš„ç±»å’Œå¼€å‘çš„ç±»åˆ†å¼€æ”¾"><a href="#2-1-3ã€æµ‹è¯•çš„ç±»å’Œå¼€å‘çš„ç±»åˆ†å¼€æ”¾" class="headerlink" title="2.1.3ã€æµ‹è¯•çš„ç±»å’Œå¼€å‘çš„ç±»åˆ†å¼€æ”¾"></a>2.1.3ã€æµ‹è¯•çš„ç±»å’Œå¼€å‘çš„ç±»åˆ†å¼€æ”¾</h5><p>æµ‹è¯•ç±»åº”æœ‰å•ç‹¬æºä»£ç ç›®å½•ï¼Œä¸è¦å’Œä¸šåŠ¡ä»£ç æ”¾åœ¨ä¸€èµ·ã€‚</p><p>å»ºè®®æµ‹è¯•ç±»æ”¾åœ¨teståŒ…ä¸­ï¼Œä½¿ç”¨<code>Testä½œä¸ºç±»åçš„åç¼€</code>,æµ‹è¯•æ–¹æ³•ä½¿ç”¨<code>testä½œä¸ºæ–¹æ³•åçš„å‰ç¼€</code>ï¼Œå¦‚æµ‹è¯•ç±»JunitTestå’Œæµ‹è¯•æ–¹æ³•testAddã€‚</p><p><img src="/2019/11/19/%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95/junitdemo.png"></p><h5 id="2-1-4ã€é™æ€å¼•å…¥"><a href="#2-1-4ã€é™æ€å¼•å…¥" class="headerlink" title="2.1.4ã€é™æ€å¼•å…¥"></a>2.1.4ã€é™æ€å¼•å…¥</h5><p>æ¯”å¦‚import static org.junit.Assert.*; é™æ€å¼•å…¥ä¸€ä¸ªç±»ï¼Œç±»é‡Œé¢æœ‰å¾ˆå¤šé™æ€æ–¹æ³•ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨è¿™ä¸ªç±»é‡Œé¢çš„é™æ€æ–¹æ³•ï¼Œè€Œä¸ç”¨åœ¨å…¶å‰é¢åŠ  â€˜ç±»å.â€™</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> org.junit.Test;<br><span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> org.junit.Assert.assertEquals;<br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">JunitTest</span> </span>&#123;<br>    <span class="hljs-meta">@Test</span><span class="hljs-comment">//æµ‹è¯•æ–¹æ³•å¿…é¡»ç”¨@Testä¿®é¥°</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testAdd</span><span class="hljs-params">()</span></span>&#123;<span class="hljs-comment">//æµ‹è¯•æ–¹æ³•å¿…é¡»ç”¨public voidä¿®é¥°ï¼Œä¸èƒ½å¸¦å‚æ•°</span><br>        assertEquals(<span class="hljs-number">6</span>, <span class="hljs-keyword">new</span> JunitDemo().add(<span class="hljs-number">2</span>,<span class="hljs-number">4</span>));<br>    &#125;<br>    <span class="hljs-meta">@Test</span><span class="hljs-comment">//æµ‹è¯•æ–¹æ³•å¿…é¡»ç”¨@Testä¿®é¥°</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testSubtract</span><span class="hljs-params">()</span></span>&#123;<br>        assertEquals(<span class="hljs-number">20</span>, <span class="hljs-keyword">new</span> JunitDemo().subtract(<span class="hljs-number">30</span>, <span class="hljs-number">10</span>));<br>    &#125;<br>    <span class="hljs-comment">//æ¯ä¸ªæµ‹è¯•æ–¹æ³•å¿…é¡»å¯ä»¥å•ç‹¬æµ‹è¯•ï¼Œå„æ–¹æ³•é—´ä¸è¦æœ‰ä¾èµ–ã€‚</span><br>&#125;<br></code></pre></td></tr></table></figure><h5 id="2-1-5ã€è¿è¡Œæµ‹è¯•"><a href="#2-1-5ã€è¿è¡Œæµ‹è¯•" class="headerlink" title="2.1.5ã€è¿è¡Œæµ‹è¯•"></a>2.1.5ã€è¿è¡Œæµ‹è¯•</h5><p><strong>Eclipseï¼š</strong>å¯ä»¥åœ¨æµ‹è¯•ç±»ä¸Šæˆ–æµ‹è¯•æ–¹æ³•â€“&gt;å³é”®â€“&gt;Run Asâ€“&gt;Junit Test</p><p><strong>IntelliJ IDEAï¼š</strong>è¯¦è§2.1.3å›¾</p><h5 id="2-1-6ã€æµ‹è¯•ç»“æœ"><a href="#2-1-6ã€æµ‹è¯•ç»“æœ" class="headerlink" title="2.1.6ã€æµ‹è¯•ç»“æœ"></a>2.1.6ã€æµ‹è¯•ç»“æœ</h5><p><strong>Eclipseï¼š</strong></p><p><code>æµ‹è¯•é€šè¿‡</code></p><p><img src="/2019/11/19/%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95/junits.png"></p><p><code>æµ‹è¯•å¤±è´¥</code></p><p><img src="/2019/11/19/%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95/junitf.png"></p><p><strong>IntelliJ IDEAï¼š</strong>è¯¦è§2.1.3å›¾ã€‚</p><p>JUnit å°†æµ‹è¯•å¤±è´¥çš„æƒ…å†µåˆ†ä¸ºä¸¤ç§ï¼š<code>failure</code>å’Œ <code>error</code>ã€‚Failure ä¸€èˆ¬ç”±å•å…ƒæµ‹è¯•ä½¿ç”¨çš„<code>æ–­è¨€æ–¹æ³•åˆ¤æ–­å¤±è´¥å¼•èµ·</code>ï¼Œå®ƒè¡¨ç¤ºåœ¨æµ‹è¯•ç‚¹å‘ç°äº†é—®é¢˜ï¼›è€Œ error åˆ™æ˜¯ç”±<code>ä»£ç å¼‚å¸¸å¼•èµ·</code>ï¼Œè¿™æ˜¯æµ‹è¯•ç›®çš„ä¹‹å¤–çš„å‘ç°ï¼Œå®ƒå¯èƒ½äº§ç”Ÿäº<code>æµ‹è¯•ä»£ç æœ¬èº«</code>çš„é”™è¯¯ï¼Œä¹Ÿå¯èƒ½æ˜¯<code>è¢«æµ‹è¯•ä»£ç </code>ä¸­çš„ä¸€ä¸ªéšè—çš„ bugã€‚</p><h5 id="2-1-7ã€Assertæ–­è¨€"><a href="#2-1-7ã€Assertæ–­è¨€" class="headerlink" title="2.1.7ã€Assertæ–­è¨€"></a>2.1.7ã€Assertæ–­è¨€</h5><p>â‘ Assertç±»é‡Œé¢æœ‰å¾ˆå¤šé™æ€æ–¹æ³•ï¼ŒæŸ¥é˜…ç›¸å…³æ–‡æ¡£ï¼š<a href="https://junit.org/junit4/javadoc/latest/org/junit/Assert.html">https://junit.org/junit4/javadoc/latest/org/junit/Assert.html</a></p><p>â‘¡æœ‰çš„å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°String messageåœ¨æ–­è¨€æ²¡æœ‰é€šè¿‡ï¼Œä¼šæ˜¾ç¤ºå‡ºæ¥ï¼Œç”¨æ¥è‡ªå®šä¹‰æç¤ºé”™è¯¯ã€‚</p><p>åˆ—å¦‚ï¼š</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-keyword">assert</span><span class="hljs-constructor">Equals(String <span class="hljs-params">message</span>, <span class="hljs-params">double</span> <span class="hljs-params">expected</span>, <span class="hljs-params">double</span> <span class="hljs-params">actual</span>)</span><br></code></pre></td></tr></table></figure><p><code>â‘¢assertThatå¯ä»¥æ›¿ä»£å…¶ä»–æ‰€æœ‰çš„assert</code></p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-keyword">assert</span><span class="hljs-constructor">That(T <span class="hljs-params">actual</span>,<span class="hljs-params">org</span>.<span class="hljs-params">hamcrest</span>.Matcher&lt;T&gt; <span class="hljs-params">matcher</span>)</span>    <br><span class="hljs-keyword">assert</span><span class="hljs-constructor">That(String <span class="hljs-params">reason</span>,T <span class="hljs-params">actual</span>,<span class="hljs-params">org</span>.<span class="hljs-params">hamcrest</span>.Matcher&lt;T&gt; <span class="hljs-params">matcher</span>)</span>    <br></code></pre></td></tr></table></figure><p>éœ€è¦hamcrest-cose-x.jarå’Œhamcrest-library-x.jarï¼Œä½¿ç”¨äº†è¿™ä¸¤ä¸ªåŒ…åï¼ŒjunitåŒ…æœ€å¥½ä¸è¦ç”¨eclipseè‡ªå¸¦çš„ï¼Œä¼šå‡ºé”™ã€‚åŒ…çš„ä¸‹è½½åœ°å€ï¼š[hamcrestä¼ é€é—¨](<a href="http://search.maven.org/#search|ga|1|g%3Aorg.hamcrest">http://search.maven.org/#search|ga|1|g%3Aorg.hamcrest</a>    hamcrest)</p><p>hamcrestå¸®åŠ©æ–‡æ¡£<a href="http://hamcrest.org/JavaHamcrest/javadoc/2.0.0.0/">http://hamcrest.org/JavaHamcrest/javadoc/2.0.0.0/</a>    </p><p>Matcherå¸¸ç”¨çš„æ–¹æ³•è§æ–‡ç« ç¬¬å››å¤§ç‚¹</p><h4 id="2-2ã€Junit4æ³¨è§£"><a href="#2-2ã€Junit4æ³¨è§£" class="headerlink" title="2.2ã€Junit4æ³¨è§£"></a>2.2ã€Junit4æ³¨è§£</h4><blockquote><p>@Testï¼šè®²ä¸€ä¸ªæ™®é€šæ–¹æ³•ä¿®é¥°ä¸ºæµ‹è¯•æ–¹æ³•<br>@BeforeClassï¼šåœ¨æ‰€æœ‰æ–¹æ³•æ‰§è¡Œå‰æ‰§è¡Œä¸€æ¬¡<br>@Beforeï¼šåœ¨æ¯ä¸€ä¸ªæ–¹æ³•æ‰§è¡Œå‰æ‰§è¡Œä¸€æ¬¡<br>@Afterï¼šåœ¨æ¯ä¸€ä¸ªæ–¹æ³•æ‰§è¡Œåæ‰§è¡Œä¸€æ¬¡<br>@AfterClassï¼šåœ¨æ‰€æœ‰æ–¹æ³•æ‰§è¡Œåæ‰§è¡Œä¸€æ¬¡ã€‚<br>@Ignoreï¼šä¿®é¥°çš„æ–¹æ³•ä¼šåœ¨æµ‹è¯•è¿è¡Œæ—¶è¢«å¿½ç•¥<br>@RunWithï¼šä¿®æ”¹æµ‹è¯•è¿è¡Œå™¨</p></blockquote><h5 id="2-2-1ã€-Testï¼šæµ‹è¯•æ–¹æ³•"><a href="#2-2-1ã€-Testï¼šæµ‹è¯•æ–¹æ³•" class="headerlink" title="2.2.1ã€@Testï¼šæµ‹è¯•æ–¹æ³•"></a>2.2.1ã€@Testï¼šæµ‹è¯•æ–¹æ³•</h5><p>@Testè¡¨ç¤ºæ˜¯æµ‹è¯•æ–¹æ³•ï¼Œæµ‹è¯•æ–¹æ³•å¿…é¡»ä½¿ç”¨æ³¨è§£ <code>org.junit.Test </code>ä¿®é¥°ã€‚æµ‹è¯•æ–¹æ³•å¿…é¡»ä½¿ç”¨ public void ä¿®é¥°ï¼Œè€Œä¸”ä¸èƒ½å¸¦æœ‰ä»»ä½•å‚æ•°ã€‚</p><p><strong>å¼‚å¸¸ä»¥åŠæ—¶é—´æµ‹è¯•</strong></p><p>æ³¨è§£<code>org.junit.Test</code>ä¸­æœ‰ä¸¤ä¸ªéå¸¸æœ‰ç”¨çš„å‚æ•°ï¼š<code>expected</code> å’Œ <code>timeout</code>ã€‚</p><p>å‚æ•° <strong>expected</strong> ä»£è¡¨æµ‹è¯•æ–¹æ³•æœŸæœ›æŠ›å‡ºæŒ‡å®šçš„å¼‚å¸¸ï¼Œå¦‚æœè¿è¡Œæµ‹è¯•å¹¶æ²¡æœ‰æŠ›å‡ºè¿™ä¸ªå¼‚å¸¸ï¼Œåˆ™JUnit ä¼šè®¤ä¸ºè¿™ä¸ªæµ‹è¯•æ²¡æœ‰é€šè¿‡ã€‚è¿™ä¸ºéªŒè¯è¢«æµ‹è¯•æ–¹æ³•åœ¨é”™è¯¯çš„æƒ…å†µä¸‹æ˜¯å¦ä¼šæŠ›å‡ºé¢„å®šçš„å¼‚å¸¸æä¾›äº†ä¾¿åˆ©ã€‚</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-comment">//å½“æµ‹è¯•æ–¹æ³•æŠ›å‡ºNullPointerExceptionæ—¶æµ‹è¯•æˆåŠŸ  </span><br><span class="hljs-variable">@Test</span>(expected = NullPointerException.class) <br><br><span class="hljs-comment">//å¦‚æœä»£ç é‡ŒæŠ›å‡ºäº†ä¸æ­¢ä¸€å¤„é”™è¯¯ï¼Œä¸å¥½åŒºåˆ†ï¼Œå¯ä»¥ä½¿ç”¨JUnitçš„ExpectedException Ruleæ¥è§£å†³</span><br><span class="hljs-variable">@Rule</span>  <br>public ExpectedException expectedException = ExpectedException.none();  <br></code></pre></td></tr></table></figure><p>å¦ä¸€ä¸ªå‚æ•° <strong>timeout</strong>ï¼ŒæŒ‡å®šè¢«æµ‹è¯•æ–¹æ³•è¢«å…è®¸è¿è¡Œçš„æœ€é•¿æ—¶é—´åº”è¯¥æ˜¯å¤šå°‘ï¼Œå¦‚æœæµ‹è¯•æ–¹æ³•è¿è¡Œæ—¶é—´è¶…è¿‡äº†æŒ‡å®šçš„æ¯«ç§’æ•°ï¼Œåˆ™ JUnit è®¤ä¸ºæµ‹è¯•å¤±è´¥ã€‚è¿™ä¸ªå‚æ•°å¯¹äºæ€§èƒ½æµ‹è¯•æœ‰ä¸€å®šçš„å¸®åŠ©ã€‚</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-comment">//è®¾ç½®1000msçš„è¶…æ—¶æ—¶é—´ï¼Œå½“è¶…è¿‡è¿™ä¸ªæ—¶é—´æµ‹è¯•è¿˜æ²¡æ‰§è¡Œå®Œæ¯•åˆ™å¤±è´¥  </span><br><span class="hljs-variable">@Test</span>(timeout = <span class="hljs-number">1000</span>) <br><br><span class="hljs-comment">//ä½¿ç”¨Timeout Ruleè®¾å®šå…¨å±€çš„è¶…æ—¶æ—¶é—´</span><br><span class="hljs-variable">@Rule</span>  <br>public Timeout timeout = new Timeout(<span class="hljs-number">1000</span>);  <br></code></pre></td></tr></table></figure><h5 id="2-2-3ã€å¿½ç•¥æµ‹è¯•æ–¹æ³•"><a href="#2-2-3ã€å¿½ç•¥æµ‹è¯•æ–¹æ³•" class="headerlink" title="2.2.3ã€å¿½ç•¥æµ‹è¯•æ–¹æ³•"></a>2.2.3ã€å¿½ç•¥æµ‹è¯•æ–¹æ³•</h5><p>æ³¨è§£ <code>org.junit.Ignore</code> ç”¨äºæš‚æ—¶å¿½ç•¥æŸä¸ªæµ‹è¯•æ–¹æ³•ï¼Œå› ä¸ºæœ‰æ—¶å€™ç”±äºæµ‹è¯•ç¯å¢ƒå—é™ï¼Œå¹¶ä¸èƒ½ä¿è¯æ¯ä¸€ä¸ªæµ‹è¯•æ–¹æ³•éƒ½èƒ½æ­£ç¡®è¿è¡Œã€‚</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-comment">//å¿½ç•¥è¯¥æµ‹è¯•ï¼Œå‚æ•°ä¸ºè¾“å‡ºä¿¡æ¯  </span><br><span class="hljs-meta">@Ignore(<span class="hljs-meta-string">&quot;Temporary ignored as no changes.&quot;</span>)</span>  <br></code></pre></td></tr></table></figure><p>æ‰§è¡Œç±»é‡Œçš„æ‰€æœ‰æµ‹è¯•ï¼Œä¼šè¾“å‡ºä»¥ä¸‹ä¿¡æ¯ï¼Œè¡¨ç¤ºè¯¥æµ‹è¯•è¢«å¿½ç•¥äº†ã€‚</p><blockquote><p>â€¦â€¦ ,ignored (Temporary ignored as no changes.)</p></blockquote><h5 id="2-2-4ã€Fixture"><a href="#2-2-4ã€Fixture" class="headerlink" title="2.2.4ã€Fixture"></a>2.2.4ã€Fixture</h5><p>Fixtureæ˜¯æŒ‡åœ¨æ‰§è¡Œä¸€ä¸ªæˆ–è€…å¤šä¸ªæµ‹è¯•æ–¹æ³•æ—¶éœ€è¦çš„ä¸€ç³»åˆ—å…¬å…±èµ„æºæˆ–è€…æ•°æ®ï¼Œä¾‹å¦‚æµ‹è¯•ç¯å¢ƒï¼Œæµ‹è¯•æ•°æ®ç­‰ç­‰ã€‚JUnit ä¸“é—¨æä¾›äº†è®¾ç½®å…¬å…± Fixture çš„æ–¹æ³•ï¼ŒåŒä¸€æµ‹è¯•ç±»ä¸­çš„æ‰€æœ‰æµ‹è¯•æ–¹æ³•éƒ½å¯ä»¥å…±ç”¨å®ƒæ¥åˆå§‹åŒ– Fixture å’Œæ³¨é”€ Fixtureã€‚</p><p>â‘ æ–¹æ³•çº§åˆ«çš„Fixtureï¼š</p><p>ä½¿ç”¨æ³¨è§£<code> org,junit.Before</code> ä¿®é¥°ç”¨äº<code>åˆå§‹åŒ– Fixture çš„æ–¹æ³•</code>ã€‚æ¯ä¸€ä¸ªæµ‹è¯•æ–¹æ³•ä¹‹å‰è¿è¡Œä½¿ç”¨æ³¨è§£ <code>org.junit.After </code>ä¿®é¥°ç”¨äº<code>æ³¨é”€ Fixture çš„æ–¹æ³•</code>ã€‚æ¯ä¸€ä¸ªæµ‹è¯•æ–¹æ³•ä¹‹åè¿è¡Œä¿è¯è¿™ä¸¤ç§æ–¹æ³•éƒ½ä½¿ç”¨ public void ä¿®é¥°ï¼Œè€Œä¸”ä¸èƒ½å¸¦æœ‰ä»»ä½•å‚æ•°ã€‚</p><p>â‘¡ç±»çº§åˆ«çš„ Fixture</p><p>ä½¿ç”¨æ³¨è§£<code>org,junit.BeforeClass</code>ä¿®é¥°ç”¨äºåˆå§‹Fixture çš„æ–¹æ³•ã€‚æ‰€æœ‰æµ‹è¯•æ–¹æ³•å¼€å§‹ä¹‹å‰è¿è¡Œï¼Œå®ƒæ¯”è¾ƒé€‚åˆåŠ è½½é…ç½®æ–‡ä»¶,è¿›è¡Œåˆå§‹åŒ–ç­‰ç­‰ä½¿ç”¨æ³¨è§£<code>org.junit.AfterClass</code>ä¿®é¥°ç”¨äºæ³¨é”€ Fixture çš„æ–¹æ³•ã€‚æ‰€æœ‰æµ‹è¯•æ–¹æ³•å¼€å§‹ä¹‹åè¿è¡Œï¼Œé€šå¸¸ç”¨æ¥å¯¹èµ„æºçš„æ¸…ç†,å¦‚å…³é—­æ•°æ®åº“çš„è¿æ¥ä¿è¯è¿™ä¸¤ç§æ–¹æ³•éƒ½ä½¿ç”¨ public static void ä¿®é¥°ï¼Œè€Œä¸”ä¸èƒ½å¸¦æœ‰ä»»ä½•å‚æ•°ã€‚</p><h5 id="2-2-5ã€æµ‹è¯•è¿è¡Œå™¨"><a href="#2-2-5ã€æµ‹è¯•è¿è¡Œå™¨" class="headerlink" title="2.2.5ã€æµ‹è¯•è¿è¡Œå™¨"></a>2.2.5ã€æµ‹è¯•è¿è¡Œå™¨</h5><p>å¯ä»¥å®šåˆ¶è‡ªå·±çš„è¿è¡Œå™¨ï¼ˆæ‰€æœ‰çš„è¿è¡Œå™¨éƒ½ç»§æ‰¿è‡ª<code>org.junit.runner.Runner</code>ï¼‰ä½¿ç”¨æ³¨è§£ <code>org.junit.runner.RunWith</code> åœ¨æµ‹è¯•ç±»ä¸Šæ˜¾å¼çš„å£°æ˜è¦ä½¿ç”¨çš„è¿è¡Œå™¨</p><h5 id="2-2-6ã€æµ‹è¯•å¥—ä»¶"><a href="#2-2-6ã€æµ‹è¯•å¥—ä»¶" class="headerlink" title="2.2.6ã€æµ‹è¯•å¥—ä»¶"></a>2.2.6ã€æµ‹è¯•å¥—ä»¶</h5><p>Unit æä¾›çš„ä¸€ç§æ‰¹é‡ï¼ˆä¸€æ¬¡æ‰§è¡Œå¤šä¸ªæµ‹è¯•ç±»ï¼‰è¿è¡Œæµ‹è¯•ç±»çš„æ–¹æ³•ï¼Œæµ‹è¯•å¥—ä»¶çš„å†™æ³•éµå¾ªä»¥ä¸‹è§„åˆ™ï¼š</p><p>â€‹    â‘ åˆ›å»ºä¸€ä¸ªç©ºç±»ä½œä¸ºæµ‹è¯•å¥—ä»¶çš„å…¥å£ã€‚</p><p>â€‹    â‘¡ä½¿ç”¨æ³¨è§£<code>org.junit.runner.RunWith</code>å’Œ<code>org.junit.runners.Suite.SuiteClasses</code>ä¿®é¥°è¿™ä¸ªç©ºç±»ã€‚</p><p>â€‹    â‘¢å°†<code>org.junit.runners.Suite</code>ä½œä¸ºå‚æ•°ä¼ å…¥æ³¨è§£ RunWithï¼Œä»¥æç¤º JUnit ä¸ºæ­¤ç±»ä½¿ç”¨å¥—ä»¶è¿è¡Œå™¨æ‰§è¡Œã€‚</p><p>â€‹    â‘£å°†éœ€è¦æ”¾å…¥æ­¤æµ‹è¯•å¥—ä»¶çš„æµ‹è¯•ç±»ç»„æˆæ•°ç»„ä½œä¸ºæ³¨è§£ SuiteClasses çš„å‚æ•°ã€‚</p><p>â€‹    â‘¤ä¿è¯è¿™ä¸ªç©ºç±»ä½¿ç”¨ public ä¿®é¥°ï¼Œè€Œä¸”å­˜åœ¨å…¬å¼€çš„ä¸å¸¦æœ‰ä»»ä½•å‚æ•°çš„æ„é€ å‡½æ•°ã€‚</p><figure class="highlight d"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs d"><span class="hljs-keyword">import</span> org.junit.runner.RunWith;<br><span class="hljs-keyword">import</span> org.junit.runners.Suite;<br><br><span class="hljs-keyword">@RunWith</span>(Suite.<span class="hljs-keyword">class</span>)  <br><span class="hljs-keyword">@Suite</span>.SuiteClasses(&#123;TaskTest1.<span class="hljs-keyword">class</span>,TaskTest2.<span class="hljs-keyword">class</span>,...&#125;)  <br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> SuiteTest &#123; ... &#125;<br></code></pre></td></tr></table></figure><h5 id="2-2-7ã€å¤šä¸ªæµ‹è¯•ç±»åŒæ—¶è¿è¡Œ"><a href="#2-2-7ã€å¤šä¸ªæµ‹è¯•ç±»åŒæ—¶è¿è¡Œ" class="headerlink" title="2.2.7ã€å¤šä¸ªæµ‹è¯•ç±»åŒæ—¶è¿è¡Œ"></a>2.2.7ã€å¤šä¸ªæµ‹è¯•ç±»åŒæ—¶è¿è¡Œ</h5><p>é€‰æ‹©ä»»æ„ä¸€ä¸ªæµ‹è¯•ç±»â€“&gt;Run Asâ€“&gt;RunConfigurationsâ€“&gt;é€‰æ‹©Run all tests in the selected project, package or source folderâ€“&gt;Run</p><h5 id="2-2-8ã€å‚æ•°åŒ–æµ‹è¯•"><a href="#2-2-8ã€å‚æ•°åŒ–æµ‹è¯•" class="headerlink" title="2.2.8ã€å‚æ•°åŒ–æµ‹è¯•"></a>2.2.8ã€å‚æ•°åŒ–æµ‹è¯•</h5><p>å‚æ•°åŒ–æµ‹è¯•å°†æµ‹è¯•æ–¹æ³•ä¸­ç›¸åŒçš„ä»£ç ç»“æ„æå–å‡ºæ¥ï¼Œæé«˜ä»£ç çš„é‡ç”¨åº¦ã€‚å‚æ•°åŒ–æµ‹è¯•çš„ç¼–å†™ï¼š</p><p>â€‹    â‘ ä¸ºå‡†å¤‡ä½¿ç”¨å‚æ•°åŒ–æµ‹è¯•çš„æµ‹è¯•ç±»æŒ‡å®šç‰¹æ®Šçš„è¿è¡Œå™¨ <code>org.junit.runners.Parameterized</code>ã€‚</p><p>â€‹    â‘¡ä¸ºæµ‹è¯•ç±»å£°æ˜å‡ ä¸ªå˜é‡ï¼Œåˆ†åˆ«ç”¨äºå­˜æ”¾æœŸæœ›å€¼å’Œæµ‹è¯•æ‰€ç”¨æ•°æ®ã€‚</p><p>â€‹    â‘¢ä¸ºæµ‹è¯•ç±»å£°æ˜ä¸€ä¸ªä½¿ç”¨æ³¨è§£<code>org.junit.runners.Parameterized.Parameters</code>ä¿®é¥°çš„ï¼Œè¿”å›å€¼ä¸º<code>java.util.Collection</code>çš„å…¬å…±é™æ€æ–¹æ³•ï¼Œå¹¶åœ¨æ­¤æ–¹æ³•ä¸­åˆå§‹åŒ–æ‰€æœ‰éœ€è¦æµ‹è¯•çš„å‚æ•°å¯¹ã€‚</p><p>â€‹    â‘£ä¸ºæµ‹è¯•ç±»å£°æ˜ä¸€ä¸ªå¸¦æœ‰å‚æ•°çš„å…¬å…±æ„é€ å‡½æ•°ï¼Œå¹¶åœ¨å…¶ä¸­ä¸ºç¬¬äºŒä¸ªç¯èŠ‚ä¸­å£°æ˜çš„å‡ ä¸ªå˜é‡èµ‹å€¼ã€‚        â‘¤ç¼–å†™æµ‹è¯•æ–¹æ³•ï¼Œä½¿ç”¨å®šä¹‰çš„å˜é‡ä½œä¸ºå‚æ•°è¿›è¡Œæµ‹è¯•ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// ç¬¬ä¸€æ­¥</span><br><span class="hljs-meta">@RunWith</span>(Parameterized.class)<br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestWordDealUtilWithParam</span></span><br><span class="hljs-class"></span>&#123;<br><span class="hljs-comment">// ç¬¬äºŒæ­¥</span><br><span class="hljs-keyword">private</span> <span class="hljs-built_in">String</span> expected;<br><span class="hljs-keyword">private</span> <span class="hljs-built_in">String</span> target;<br><span class="hljs-comment">// ç¬¬ä¸‰æ­¥</span><br><span class="hljs-meta">@Parameters</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Collection words()<br>&#123;<br><span class="hljs-keyword">return</span> Arrays.asList(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Object</span>[][]<br>&#123;<br>&#123; <span class="hljs-string">&quot;employee_info&quot;</span>, <span class="hljs-string">&quot;employeeInfo&quot;</span> &#125;, <span class="hljs-comment">// æµ‹è¯•ä¸€èˆ¬çš„å¤„ç†æƒ…å†µ</span><br>&#123; <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span> &#125;, <span class="hljs-comment">// æµ‹è¯• null æ—¶çš„å¤„ç†æƒ…å†µ</span><br>&#125;);<br>&#125;<br><span class="hljs-comment">// ç¬¬å››æ­¥</span><br><span class="hljs-keyword">public</span> TestWordDealUtilWithParam(<span class="hljs-built_in">String</span> expected, <span class="hljs-built_in">String</span> target)<br>&#123;<br><span class="hljs-built_in">this</span>.expected = expected;<br><span class="hljs-built_in">this</span>.target = target;<br>&#125;<br><span class="hljs-comment">// ç¬¬äº”æ­¥</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> wordFormat4DB()<br>&#123;<br>assertEquals(expected, WordDealUtil.wordFormat4DB(target));<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="2-3ã€assertThat"><a href="#2-3ã€assertThat" class="headerlink" title="2.3ã€assertThat"></a>2.3ã€assertThat</h4><h5 id="2-3-1ã€ä¸€èˆ¬åŒ¹é…ç¬¦"><a href="#2-3-1ã€ä¸€èˆ¬åŒ¹é…ç¬¦" class="headerlink" title="2.3.1ã€ä¸€èˆ¬åŒ¹é…ç¬¦"></a>2.3.1ã€ä¸€èˆ¬åŒ¹é…ç¬¦</h5><p>1ã€assertThat( testedNumber, allOf( greaterThan(8), lessThan(16) ) );</p><p>æ³¨é‡Šï¼š allOfåŒ¹é…ç¬¦è¡¨æ˜å¦‚æœæ¥ä¸‹æ¥çš„æ‰€æœ‰æ¡ä»¶å¿…é¡»éƒ½æˆç«‹æµ‹è¯•æ‰é€šè¿‡ï¼Œç›¸å½“äºâ€œä¸â€ï¼ˆ&amp;&amp;ï¼‰</p><p>2ã€assertThat( testedNumber, anyOf( greaterThan(16), lessThan(8) ) );</p><p>æ³¨é‡Šï¼šanyOfåŒ¹é…ç¬¦è¡¨æ˜å¦‚æœæ¥ä¸‹æ¥çš„æ‰€æœ‰æ¡ä»¶åªè¦æœ‰ä¸€ä¸ªæˆç«‹åˆ™æµ‹è¯•é€šè¿‡ï¼Œç›¸å½“äºâ€œæˆ–â€ï¼ˆ||ï¼‰</p><p>3ã€assertThat( testedNumber, anything() );</p><p>æ³¨é‡Šï¼šanythingåŒ¹é…ç¬¦è¡¨æ˜æ— è®ºä»€ä¹ˆæ¡ä»¶ï¼Œæ°¸è¿œä¸ºtrue</p><p>4ã€assertThat( testedString, is( â€œdeveloperWorksâ€ ) );</p><p>æ³¨é‡Šï¼š isåŒ¹é…ç¬¦è¡¨æ˜å¦‚æœå‰é¢å¾…æµ‹çš„objectç­‰äºåé¢ç»™å‡ºçš„objectï¼Œåˆ™æµ‹è¯•é€šè¿‡</p><p>5ã€assertThat( testedString, not( â€œdeveloperWorksâ€ ) );</p><p>æ³¨é‡Šï¼šnotåŒ¹é…ç¬¦å’ŒisåŒ¹é…ç¬¦æ­£å¥½ç›¸åï¼Œè¡¨æ˜å¦‚æœå‰é¢å¾…æµ‹çš„objectä¸ç­‰äºåé¢ç»™å‡ºçš„objectï¼Œåˆ™æµ‹è¯•é€šè¿‡</p><h5 id="2-3-2ã€å­—ç¬¦ä¸²ç›¸å…³åŒ¹é…ç¬¦"><a href="#2-3-2ã€å­—ç¬¦ä¸²ç›¸å…³åŒ¹é…ç¬¦" class="headerlink" title="2.3.2ã€å­—ç¬¦ä¸²ç›¸å…³åŒ¹é…ç¬¦"></a>2.3.2ã€å­—ç¬¦ä¸²ç›¸å…³åŒ¹é…ç¬¦</h5><p>1ã€assertThat( testedString, containsString( â€œdeveloperWorksâ€ ) );</p><p>æ³¨é‡Šï¼šcontainsStringåŒ¹é…ç¬¦è¡¨æ˜å¦‚æœæµ‹è¯•çš„å­—ç¬¦ä¸²testedStringåŒ…å«å­å­—ç¬¦ä¸²â€developerWorksâ€åˆ™æµ‹è¯•é€šè¿‡</p><p>2ã€assertThat( testedString, endsWith( â€œdeveloperWorksâ€ ) ); </p><p>æ³¨é‡Šï¼šendsWithåŒ¹é…ç¬¦è¡¨æ˜å¦‚æœæµ‹è¯•çš„å­—ç¬¦ä¸²testedStringä»¥å­å­—ç¬¦ä¸²â€developerWorksâ€ç»“å°¾åˆ™æµ‹è¯•é€šè¿‡</p><p>3ã€assertThat( testedString, startsWith( â€œdeveloperWorksâ€ ) ); </p><p>æ³¨é‡Šï¼šstartsWithåŒ¹é…ç¬¦è¡¨æ˜å¦‚æœæµ‹è¯•çš„å­—ç¬¦ä¸²testedStringä»¥å­å­—ç¬¦ä¸²â€developerWorksâ€å¼€å§‹åˆ™æµ‹è¯•é€šè¿‡</p><p>4ã€assertThat( testedValue, equalTo( expectedValue ) ); </p><p>æ³¨é‡Šï¼š equalToåŒ¹é…ç¬¦è¡¨æ˜å¦‚æœæµ‹è¯•çš„testedValueç­‰äºexpectedValueåˆ™æµ‹è¯•é€šè¿‡ï¼ŒequalToå¯ä»¥æµ‹è¯•æ•°å€¼ä¹‹é—´ï¼Œå­—ç¬¦ä¸²ä¹‹é—´å’Œå¯¹è±¡ä¹‹é—´æ˜¯å¦ç›¸ç­‰ï¼Œç›¸å½“äºObjectçš„equalsæ–¹æ³•</p><p>5ã€assertThat( testedString, equalToIgnoringCase( â€œdeveloperWorksâ€ ) ); </p><p>æ³¨é‡Šï¼šequalToIgnoringCaseåŒ¹é…ç¬¦è¡¨æ˜å¦‚æœæµ‹è¯•çš„å­—ç¬¦ä¸²testedStringåœ¨å¿½ç•¥å¤§å°å†™çš„æƒ…å†µä¸‹ç­‰äºâ€developerWorksâ€åˆ™æµ‹è¯•é€šè¿‡</p><p>6ã€assertThat( testedString, equalToIgnoringWhiteSpace( â€œdeveloperWorksâ€ ) );</p><p>æ³¨é‡Šï¼šequalToIgnoringWhiteSpaceåŒ¹é…ç¬¦è¡¨æ˜å¦‚æœæµ‹è¯•çš„å­—ç¬¦ä¸²testedStringåœ¨å¿½ç•¥å¤´å°¾çš„ä»»æ„ä¸ªç©ºæ ¼çš„æƒ…å†µä¸‹ç­‰äºâ€developerWorksâ€åˆ™æµ‹è¯•é€šè¿‡ï¼Œæ³¨æ„ï¼šå­—ç¬¦ä¸²ä¸­çš„ç©ºæ ¼ä¸èƒ½è¢«å¿½ç•¥</p><h5 id="2-3-3ã€æ•°å€¼ç›¸å…³åŒ¹é…ç¬¦"><a href="#2-3-3ã€æ•°å€¼ç›¸å…³åŒ¹é…ç¬¦" class="headerlink" title="2.3.3ã€æ•°å€¼ç›¸å…³åŒ¹é…ç¬¦"></a>2.3.3ã€æ•°å€¼ç›¸å…³åŒ¹é…ç¬¦</h5><p>1ã€assertThat( testedDouble, closeTo( 20.0, 0.5 ) );</p><p>æ³¨é‡Šï¼šcloseToåŒ¹é…ç¬¦è¡¨æ˜å¦‚æœæ‰€æµ‹è¯•çš„æµ®ç‚¹å‹æ•°testedDoubleåœ¨20.0Â±0.5èŒƒå›´ä¹‹å†…åˆ™æµ‹è¯•é€šè¿‡</p><p>2ã€assertThat( testedNumber, greaterThan(16.0) );</p><p>æ³¨é‡Šï¼šgreaterThanåŒ¹é…ç¬¦è¡¨æ˜å¦‚æœæ‰€æµ‹è¯•çš„æ•°å€¼testedNumberå¤§äº16.0åˆ™æµ‹è¯•é€šè¿‡</p><p>3ã€assertThat( testedNumber, lessThan (16.0) );</p><p>æ³¨é‡Šï¼šlessThanåŒ¹é…ç¬¦è¡¨æ˜å¦‚æœæ‰€æµ‹è¯•çš„æ•°å€¼testedNumberå°äº16.0åˆ™æµ‹è¯•é€šè¿‡</p><p>4ã€assertThat( testedNumber, greaterThanOrEqualTo (16.0) );</p><p>æ³¨é‡Šï¼š greaterThanOrEqualToåŒ¹é…ç¬¦è¡¨æ˜å¦‚æœæ‰€æµ‹è¯•çš„æ•°å€¼testedNumberå¤§äºç­‰äº16.0åˆ™æµ‹è¯•é€šè¿‡</p><p>5ã€assertThat( testedNumber, lessThanOrEqualTo (16.0) );</p><p>æ³¨é‡Šï¼šlessThanOrEqualToåŒ¹é…ç¬¦è¡¨æ˜å¦‚æœæ‰€æµ‹è¯•çš„æ•°å€¼testedNumberå°äºç­‰äº16.0åˆ™æµ‹è¯•é€šè¿‡</p><h5 id="2-3-4ã€collectionç›¸å…³åŒ¹é…ç¬¦"><a href="#2-3-4ã€collectionç›¸å…³åŒ¹é…ç¬¦" class="headerlink" title="2.3.4ã€collectionç›¸å…³åŒ¹é…ç¬¦"></a>2.3.4ã€collectionç›¸å…³åŒ¹é…ç¬¦</h5><p>1ã€assertThat( mapObject, hasEntry( â€œkeyâ€, â€œvalueâ€ ) );</p><p>æ³¨é‡Šï¼šhasEntryåŒ¹é…ç¬¦è¡¨æ˜å¦‚æœæµ‹è¯•çš„Mapå¯¹è±¡mapObjectå«æœ‰ä¸€ä¸ªé”®å€¼ä¸ºâ€keyâ€å¯¹åº”å…ƒç´ å€¼ä¸ºâ€valueâ€çš„Entryé¡¹åˆ™æµ‹è¯•é€šè¿‡</p><p>2ã€assertThat( iterableObject, hasItem ( â€œelementâ€ ) );</p><p>æ³¨é‡Šï¼šhasItemåŒ¹é…ç¬¦è¡¨æ˜å¦‚æœæµ‹è¯•çš„è¿­ä»£å¯¹è±¡iterableObjectå«æœ‰å…ƒç´ â€œelementâ€é¡¹åˆ™æµ‹è¯•é€šè¿‡</p><p>3ã€assertThat( mapObject, hasKey ( â€œkeyâ€ ) );</p><p>æ³¨é‡Šï¼š hasKeyåŒ¹é…ç¬¦è¡¨æ˜å¦‚æœæµ‹è¯•çš„Mapå¯¹è±¡mapObjectå«æœ‰é”®å€¼â€œkeyâ€åˆ™æµ‹è¯•é€šè¿‡</p><p>4ã€assertThat( mapObject, hasValue ( â€œkeyâ€ ) );</p><p>æ³¨é‡Šï¼šhasValueåŒ¹é…ç¬¦è¡¨æ˜å¦‚æœæµ‹è¯•çš„Mapå¯¹è±¡mapObjectå«æœ‰å…ƒç´ å€¼â€œvalueâ€åˆ™æµ‹è¯•é€šè¿‡</p><p><a href="https://blog.csdn.net/qq_43520650/article/details/101308036">https://blog.csdn.net/qq_43520650/article/details/101308036</a></p>]]></content>
    
    
    <categories>
      
      <category>è½¯ä»¶æµ‹è¯•</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è½¯ä»¶æµ‹è¯•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ•°æ®åº“</title>
    <link href="/2019/11/18/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    <url>/2019/11/18/%E6%95%B0%E6%8D%AE%E5%BA%93/</url>
    
    <content type="html"><![CDATA[<h3 id="1ã€æ•°æ®åº“ä»‹ç»"><a href="#1ã€æ•°æ®åº“ä»‹ç»" class="headerlink" title="1ã€æ•°æ®åº“ä»‹ç»"></a>1ã€æ•°æ®åº“ä»‹ç»</h3><h4 id="1-1ã€æ•°æ®åº“å‘å±•å†å²"><a href="#1-1ã€æ•°æ®åº“å‘å±•å†å²" class="headerlink" title="1.1ã€æ•°æ®åº“å‘å±•å†å²"></a>1.1ã€æ•°æ®åº“å‘å±•å†å²</h4><p>é€šå¸¸æŒ‰ç…§<strong>æ•°æ®æ¨¡å‹</strong>çš„ç‰¹ç‚¹å°†ä¼ ç»Ÿæ•°æ®åº“ç³»ç»Ÿåˆ†æˆ<strong>ç½‘çŠ¶æ•°æ®åº“</strong>ï¼ˆNetwork databaseï¼‰ã€<strong>å±‚æ¬¡æ•°æ®åº“</strong>ï¼ˆHierarchical databaseï¼‰å’Œ<strong>å…³ç³»æ•°æ®åº“</strong>ï¼ˆRelational databaseï¼‰ä¸‰ç±»ã€‚</p><p>æœ€æ—©å‡ºç°çš„æ˜¯<strong>ç½‘çŠ¶DBMS</strong>ï¼Œæ˜¯ç¾å›½é€šç”¨ç”µæ°”å…¬å¸Bachmanç­‰äººåœ¨1961å¹´å¼€å‘æˆåŠŸçš„<strong>IDS</strong>ï¼ˆIntegratedData Storeï¼‰ã€‚</p><p>IBM å…¬å¸åœ¨1968 å¹´å¼€å‘çš„<strong>IMS</strong>ï¼ˆInformationManagement Systemï¼‰ï¼Œä¸€ç§é€‚åˆå…¶ä¸»æœºçš„<strong>å±‚æ¬¡æ•°æ®åº“</strong>ã€‚</p><p>ç½‘çŠ¶æ•°æ®åº“æ¨¡å‹å¯¹äºå±‚æ¬¡å’Œéå±‚æ¬¡ç»“æ„çš„äº‹ç‰©éƒ½èƒ½æ¯”è¾ƒè‡ªç„¶çš„æ¨¡æ‹Ÿï¼Œåœ¨å…³ç³»æ•°æ®åº“å‡ºç°ä¹‹å‰ç½‘çŠ¶DBMSè¦æ¯”å±‚æ¬¡DBMSç”¨å¾—æ™®éã€‚åœ¨æ•°æ®åº“å‘å±•å²ä¸Šï¼Œç½‘çŠ¶æ•°æ®åº“å æœ‰é‡è¦åœ°ä½ã€‚å±‚æ¬¡å‹DBMSæ˜¯ç´§éšç½‘ç»œå‹æ•°æ®åº“è€Œå‡ºç°çš„ã€‚</p><p>ç½‘çŠ¶æ•°æ®åº“å’Œå±‚æ¬¡æ•°æ®åº“å·²ç»å¾ˆå¥½åœ°è§£å†³äº†æ•°æ®çš„é›†ä¸­å’Œå…±äº«é—®é¢˜ï¼Œä½†æ˜¯åœ¨<strong>æ•°æ®ç‹¬ç«‹æ€§</strong>å’Œ<strong>æŠ½è±¡çº§åˆ«</strong>ä¸Šä»æœ‰å¾ˆå¤§æ¬ ç¼ºã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå…³ç³»å‹æ•°æ®åº“å°±è¯ç”Ÿäº†ã€‚ä»£è¡¨ä½œï¼šoracleã€db2ç­‰</p><p>äº‹å®ä¸Šå…³ç³»å‹æ•°æ®åº“ä¹Ÿæœ‰ç¼ºç‚¹ï¼Œå°±æ˜¯é’ˆå¯¹å¤æ‚ç±»å‹çš„æ•°æ®çš„å¤„ç†ä¸å¤ªæ“…é•¿ã€‚ä¹Ÿå°±æ˜¯å½“å‰<strong>å¤§æ•°æ®é˜¶æ®µ</strong>ï¼Œä¹Ÿå¯ä»¥ç§°å‘¼ä¸º<strong>åå…³ç³»å‹æ•°æ®åº“é˜¶æ®µ</strong>ã€‚</p><p>é¢å‘å¯¹è±¡å‹çš„å…³ç³»å‹æ•°æ®åº“å’Œéå…³ç³»å‹æ•°æ®åº“ã€NOSQLã€‘ï¼Œå‰è€…ä¸å¤ªæˆç†Ÿï¼Œåè€…å‘å±•åŠ¿å¤´å¾ˆå¥½ã€‚</p><p>å¸¸è§çš„NoSQLæ•°æ®åº“åˆ†ä¸ºå››å¤§ç±»ï¼š</p><blockquote><p>1):é”®å€¼å­˜å‚¨æ•°æ®åº“ï¼šOracle BDB,<strong>Redis</strong>,BeansDB</p><p>2):åˆ—å¼å‚¨æ•°æ•°æ®åº“ï¼šHBase,Cassandra,Riak</p><p>3):æ–‡æ¡£å‹æ•°æ®åº“ï¼š<strong>MongoDB</strong>,CouchDB</p><p>4):å›¾å½¢æ•°æ®åº“ï¼šNeo4J,InfoGrid,Infinite Graph</p></blockquote><p>å½“å‰æˆ‘ä»¬ä¸»è¦å­¦ä¹ çš„æ˜¯<strong>å…³ç³»å‹æ•°æ®åº“</strong>ï¼Œé‚£ä¹ˆå¸¸è§çš„å…³ç³»å‹æ•°æ®åº“æœ‰å“ªäº›å‘¢ï¼Ÿ</p><table><thead><tr><th>ç³»ç»Ÿ</th><th>å…¬å¸</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td>Oracle</td><td>Oracle(ç”²éª¨æ–‡/ç¥åŸŸ)   Kolina</td><td>è¿è¡Œç¨³å®šï¼Œå¯ç§»æ¤æ€§é«˜ï¼ŒåŠŸèƒ½é½å…¨ï¼Œæ€§èƒ½è¶…ç¾¤ï¼é€‚ç”¨äºå¤§å‹ä¼ä¸šé¢†åŸŸ</td></tr><tr><td>DB2</td><td>IBM</td><td>é€Ÿåº¦å¿«ã€å¯é æ€§å¥½ï¼Œé€‚äºæµ·é‡æ•°æ®ï¼Œæ¢å¤æ€§æå¼ºã€‚é€‚ç”¨äºå¤§ä¸­å‹ä¼ä¸šé¢†åŸŸã€‚</td></tr><tr><td>SQL SERVER</td><td>å¾®è½¯</td><td>å…¨é¢ï¼Œæ•ˆç‡é«˜ï¼Œç•Œé¢å‹å¥½ï¼Œæ“ä½œå®¹æ˜“ï¼Œä½†æ˜¯ä¸è·¨å¹³å°ã€‚é€‚ç”¨äºäºä¸­å°å‹ä¼ä¸šé¢†åŸŸã€‚</td></tr><tr><td>MYSQL</td><td>ABâ€“&gt;SUNâ€“&gt;Oracle</td><td>å¼€æºï¼Œä½“ç§¯å°ï¼Œé€Ÿåº¦å¿«ã€‚é€‚ç”¨äºäºä¸­å°å‹ä¼ä¸šé¢†åŸŸã€‚</td></tr></tbody></table><h4 id="1-2ã€æ•°æ®åº“-DataBaseï¼šDB"><a href="#1-2ã€æ•°æ®åº“-DataBaseï¼šDB" class="headerlink" title="1.2ã€æ•°æ®åº“(DataBaseï¼šDB)"></a>1.2ã€æ•°æ®åº“(DataBaseï¼š<strong>DB</strong>)</h4><p>ç‰©ç†å±‚é¢è®²ï¼Œæ•°æ®åº“æ˜¯æŒ‰ç…§æ•°æ®ç»“æ„æ¥ç»„ç»‡ã€å­˜å‚¨å’Œç®¡ç†æ•°æ®çš„ä»“åº“ï¼Œä¹Ÿå°±æ˜¯å­˜å‚¨å’Œç®¡ç†æ•°æ®çš„ä»“åº“ã€‚é€šå¸¸æ˜¯ç”±ä¸€äº›æ–‡ä»¶ç»„æˆï¼Œæ¯•ç«Ÿæ•°æ®æœ€ç»ˆæ˜¯éœ€è¦è½å®åˆ°å®ä½“æ–‡ä»¶ä¸Šæ‰èƒ½ä¿å­˜ã€‚ç‰©ç†æ„æˆè¯¦è§ä¸‹å›¾ï¼š</p><p><img src="/2019/11/18/%E6%95%B0%E6%8D%AE%E5%BA%93/db.png"></p><h4 id="1-3ã€æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆDatabase-Management-Systemï¼šDBMSï¼‰"><a href="#1-3ã€æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆDatabase-Management-Systemï¼šDBMSï¼‰" class="headerlink" title="1.3ã€æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆDatabase Management Systemï¼šDBMSï¼‰"></a>1.3ã€æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆDatabase Management Systemï¼š<strong>DBMS</strong>ï¼‰</h4><p>è½¯ä»¶å±‚é¢è®²ï¼Œä¸“é—¨ç”¨äºç®¡ç†æ•°æ®åº“çš„è®¡ç®—æœºç³»ç»Ÿ<strong>è½¯ä»¶</strong>ã€‚æ•°æ®åº“ç®¡ç†ç³»ç»Ÿèƒ½å¤Ÿä¸ºæ•°æ®åº“æä¾›æ•°æ®çš„å®šä¹‰ã€å»ºç«‹ã€ç»´æŠ¤ã€æŸ¥è¯¢å’Œç»Ÿè®¡ç­‰æ“ä½œåŠŸèƒ½ï¼Œå¹¶å®Œæˆå¯¹æ•°æ®å®Œæ•´æ€§ã€å®‰å…¨æ€§è¿›è¡Œæ§åˆ¶çš„åŠŸèƒ½ã€‚</p><p><strong>æ³¨æ„ï¼š</strong>æˆ‘ä»¬é€šå¸¸è¯´çš„æ•°æ®åº“ï¼Œå°±æ˜¯æŒ‡çš„<strong>DBMS</strong>: æ•°æ®åº“æœåŠ¡å™¨</p><p>æˆ‘ä»¬é©¬ä¸Šè¦å­¦ä¹ çš„MySqlä»¥å°±ä¸ªç»´æŠ¤æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ</p><p>æ¦‚å¿µè§ä¸‹å›¾ï¼š</p><p><img src="/2019/11/18/%E6%95%B0%E6%8D%AE%E5%BA%93/dbms.png"></p><h4 id="1-4ã€æ•°æ®è¡¨"><a href="#1-4ã€æ•°æ®è¡¨" class="headerlink" title="1.4ã€æ•°æ®è¡¨"></a>1.4ã€æ•°æ®è¡¨</h4><p>åè¯è§£é‡Šçš„æ—¶å€™ï¼Œæˆ‘ä»¬æ˜ç¡®äº†æ•°æ®åº“å…¶å®æ˜¯ç”±å®è´¨æ€§çš„æ–‡ä»¶ç»„æˆï¼Œè¿™æ˜¯åœ¨ç‰©ç†å±‚é¢ï¼Œé‚£ä¹ˆåœ¨DBMSç³»ç»Ÿä¸­ï¼Œè¿™äº›å­˜å‚¨åœ¨æ–‡ä»¶ä¸­çš„æ•°æ®åˆæ˜¯æ€ä¹ˆå±•ç°å‡ºæ¥çš„å‘¢ï¼Ÿå…¶å®åœ¨DBMSä¸­ï¼Œæˆ‘ä»¬æ˜¯é€šè¿‡è¡¨æ¥å±•ç¤ºè¿™äº›æ•°æ®çš„ã€‚</p><p>è§ä¸‹å›¾ï¼š</p><p><img src="/2019/11/18/%E6%95%B0%E6%8D%AE%E5%BA%93/table.png"></p><p>äºŒç»´è¡¨æ˜¯åŒç±»å®ä½“çš„å„ç§å±æ€§çš„é›†åˆï¼Œæ¯ä¸ªå®ä½“å¯¹åº”äºè¡¨ä¸­çš„ä¸€è¡Œï¼Œåœ¨å…³ç³»ä¸­ç§°ä¸ºå…ƒç»„ï¼ˆå…ƒç»„å°±æ˜¯æŒ‡è¡¨ä¸­æ¯ä¸€è¡Œï¼‰ï¼Œç›¸å½“äºé€šå¸¸çš„ä¸€æ¡è®°å½•ï¼›</p><p>è¡¨ä¸­çš„è¡¨å¤´è¡¨ç¤ºå±æ€§ï¼Œç§°ä¸ºFieldï¼Œç›¸å½“äºé€šå¸¸è®°å½•ä¸­çš„ä¸€ä¸ªæ•°æ®é¡¹ï¼Œä¹Ÿå«åˆ—ã€å­—æ®µã€‚</p><h4 id="1-5ã€æ•°æ®åº“ã€è¡¨ã€æ•°æ®ä¹‹é—´åœ¨è½¯ä»¶ä¸­çš„å…³ç³»ï¼š"><a href="#1-5ã€æ•°æ®åº“ã€è¡¨ã€æ•°æ®ä¹‹é—´åœ¨è½¯ä»¶ä¸­çš„å…³ç³»ï¼š" class="headerlink" title="1.5ã€æ•°æ®åº“ã€è¡¨ã€æ•°æ®ä¹‹é—´åœ¨è½¯ä»¶ä¸­çš„å…³ç³»ï¼š"></a>1.5ã€æ•°æ®åº“ã€è¡¨ã€æ•°æ®ä¹‹é—´åœ¨è½¯ä»¶ä¸­çš„å…³ç³»ï¼š</h4><p><img src="/2019/11/18/%E6%95%B0%E6%8D%AE%E5%BA%93/dbs.png"></p><h4 id="1-6ã€æ•°æ®åº“åº”ç”¨ç³»ç»Ÿï¼ˆDatabase-Application-Systemï¼šDBASï¼‰"><a href="#1-6ã€æ•°æ®åº“åº”ç”¨ç³»ç»Ÿï¼ˆDatabase-Application-Systemï¼šDBASï¼‰" class="headerlink" title="1.6ã€æ•°æ®åº“åº”ç”¨ç³»ç»Ÿï¼ˆDatabase Application Systemï¼šDBASï¼‰"></a>1.6ã€æ•°æ®åº“åº”ç”¨ç³»ç»Ÿï¼ˆDatabase Application Systemï¼š<strong>DBAS</strong>ï¼‰</h4><p>ä½¿ç”¨æ•°æ®åº“æŠ€æœ¯çš„ç³»ç»Ÿï¼›ä¹Ÿå°±æ˜¯ç ”å‘å‡ºçš„<strong>è½¯ä»¶</strong>ä½¿<strong>ç”¨çš„æœ‰æ•°æ®åº“</strong>ï¼Œéƒ½ç§°ä¹‹ä¸ºæ•°æ®åº“åº”ç”¨ç³»ç»Ÿ</p><p><img src="/2019/11/18/%E6%95%B0%E6%8D%AE%E5%BA%93/dbas.png"></p><h3 id="2ã€è¡¨å…³ç³»è®¾è®¡"><a href="#2ã€è¡¨å…³ç³»è®¾è®¡" class="headerlink" title="2ã€è¡¨å…³ç³»è®¾è®¡"></a>2ã€è¡¨å…³ç³»è®¾è®¡</h3><p>æœ¬èŠ‚çš„æ ¸å¿ƒæ˜¯å¦‚ä½•å°†ç°å®ä¸­çš„å…³ç³»ä½¿ç”¨è¡¨æ ¼çš„ä¸»é”®ã€å¤–é”®ã€å”¯ä¸€é”®è¡¨è¾¾å‡ºæ¥ã€‚</p><p>åœ¨è¡¨çš„å…³ç³»é‡Œï¼šä¸€å¯¹ä¸€ï¼›å¤šå¯¹ä¸€ï¼Œä¸€å¯¹å¤šï¼›å¤šå¯¹å¤šã€‚</p><p>åœ¨åšè¡¨è®¾è®¡çš„æ—¶å€™ï¼šé¦–å…ˆåˆ†æå¯¹è±¡ä¹‹é—´çš„å…³ç³»ï¼Œç„¶åå»å¥—ç”¨æˆ‘ä»¬è®²çš„ä¸‰ç§å…³ç³»çš„è¡¨çš„è®¾è®¡ã€‚</p><h4 id="2-1ã€å…³ç³»"><a href="#2-1ã€å…³ç³»" class="headerlink" title="2.1ã€å…³ç³»"></a>2.1ã€å…³ç³»</h4><p>è¿™ä¸ªç‚¹å¯¹æˆ‘ä»¬åé¢å­¦ä¹ <code>JPA</code>ä¼šæœ‰æ¯”è¾ƒå¤§çš„å½±å“ã€‚  </p><p>ä¸€å¯¹ä¸€ ï¼šå­¦å·å’Œå­¦ç”Ÿ</p><p>å¤šå¯¹ä¸€|ä¸€å¯¹å¤š ï¼šå­¦ç”Ÿä¸é™¢ç³»ï¼ˆä¸€ä¸ªå­¦ç”Ÿæ˜¯å±äºä¸€ä¸ªé™¢ç³»ï¼Œä¸€ä¸ªé™¢ç³»å¯ä»¥åŒ…å«å¤šä¸ªå­¦ç”Ÿï¼‰</p><p>å¤šå¯¹å¤š ï¼šè€å¸ˆä¸å­¦ç”Ÿ ä¸€ä¸ªè€å¸ˆä¼šæ•™å¤šä¸ªå­¦ç”Ÿï¼Œä¸€ä¸ªå­¦ç”Ÿæœ‰å¤šä¸ªè€å¸ˆæ•™</p><h4 id="2-2ã€å…³ç³»è®¾è®¡å¥—è·¯"><a href="#2-2ã€å…³ç³»è®¾è®¡å¥—è·¯" class="headerlink" title="2.2ã€å…³ç³»è®¾è®¡å¥—è·¯"></a>2.2ã€å…³ç³»è®¾è®¡å¥—è·¯</h4><h5 id="2-2-1ã€ä¸€å¯¹ä¸€è®¾è®¡"><a href="#2-2-1ã€ä¸€å¯¹ä¸€è®¾è®¡" class="headerlink" title="2.2.1ã€ä¸€å¯¹ä¸€è®¾è®¡"></a>2.2.1ã€ä¸€å¯¹ä¸€è®¾è®¡</h5><img src="/2019/11/18/%E6%95%B0%E6%8D%AE%E5%BA%93/11.png"><h5 id="2-2-2ã€å¤šå¯¹ä¸€orä¸€å¯¹å¤š"><a href="#2-2-2ã€å¤šå¯¹ä¸€orä¸€å¯¹å¤š" class="headerlink" title="2.2.2ã€å¤šå¯¹ä¸€orä¸€å¯¹å¤š"></a>2.2.2ã€å¤šå¯¹ä¸€orä¸€å¯¹å¤š</h5><img src="/2019/11/18/%E6%95%B0%E6%8D%AE%E5%BA%93/1n.png" style="zoom:150%;"><h5 id="2-2-3ã€å¤šå¯¹å¤šè®¾è®¡"><a href="#2-2-3ã€å¤šå¯¹å¤šè®¾è®¡" class="headerlink" title="2.2.3ã€å¤šå¯¹å¤šè®¾è®¡"></a>2.2.3ã€å¤šå¯¹å¤šè®¾è®¡</h5><img src="/2019/11/18/%E6%95%B0%E6%8D%AE%E5%BA%93/nn.png" style="zoom:150%;"><h3 id="3ã€æ•°æ®åº“ä¸‰èŒƒå¼"><a href="#3ã€æ•°æ®åº“ä¸‰èŒƒå¼" class="headerlink" title="3ã€æ•°æ®åº“ä¸‰èŒƒå¼"></a>3ã€æ•°æ®åº“ä¸‰èŒƒå¼</h3><p>ç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰æ˜¯å¯¹å…³ç³»æ¨¡å¼çš„åŸºæœ¬è¦æ±‚ï¼Œä¸æ»¡è¶³ç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰çš„æ•°æ®åº“å°±ä¸æ˜¯å…³ç³»æ•°æ®åº“ã€‚</p><p> æ˜¯æŒ‡æ•°æ®åº“è¡¨çš„æ¯ä¸€åˆ—éƒ½æ˜¯ä¸å¯åˆ†å‰²çš„åŸºæœ¬æ•°æ®é¡¹ï¼ŒåŒä¸€åˆ—ä¸­ä¸èƒ½æœ‰å¤šä¸ªå€¼ï¼Œå³å®ä½“ä¸­çš„æŸä¸ªå±æ€§ä¸èƒ½æœ‰å¤šä¸ªå€¼æˆ–è€…ä¸èƒ½æœ‰é‡å¤çš„å±æ€§ã€‚</p><p>ä¸€å¼ è¡¨æœ‰å›ºå®šçš„åˆ—ä¸ä¸å®šçš„è¡Œï¼Œæ¯åˆ—åç§°ä¸èƒ½é‡å¤ä¸”åªå­˜åœ¨ä¸€ä¸ªå€¼</p><p>ç¬¬äºŒèŒƒå¼ï¼ˆ2NFï¼‰è¦æ±‚æ•°æ®åº“è¡¨ä¸­çš„æ¯ä¸ªå®ä¾‹æˆ–è¡Œå¿…é¡»å¯ä»¥è¢«æƒŸä¸€åœ°åŒºåˆ†ã€‚</p><p>è¦æ±‚æ¯å¼ è¡¨å¿…éœ€è¦æœ‰ä¸»é”®</p><p>ç¬¬ä¸‰èŒƒå¼ï¼ˆ3NFï¼‰è¦æ±‚ä¸€ä¸ªæ•°æ®åº“è¡¨ä¸­ä¸åŒ…å«å·²åœ¨å…¶å®ƒè¡¨ä¸­å·²åŒ…å«çš„éä¸»å…³é”®å­—ä¿¡æ¯ã€‚</p><p>å¤–é”®å…³è”ï¼Œåªèƒ½å­˜å…³è¿è¡¨çš„ä¸»é”®(å”¯ä¸€)ä¿¡æ¯</p><p>åä¸‰èŒƒå¼è®¾è®¡ï¼ˆæ ¹æ®ç‰¹å®šçš„åœºæ™¯æ¥æé«˜æŸ¥è¯¢æ•ˆç‡ï¼Œå½“ç„¶ä¹Ÿæœ‰é£é™©ï¼‰</p><h3 id="4ã€æ•°æ®åº“å­—æ®µç±»å‹ä¸Javaè¯­è¨€æ•°æ®ç±»å‹çš„å¯¹åº”"><a href="#4ã€æ•°æ®åº“å­—æ®µç±»å‹ä¸Javaè¯­è¨€æ•°æ®ç±»å‹çš„å¯¹åº”" class="headerlink" title="4ã€æ•°æ®åº“å­—æ®µç±»å‹ä¸Javaè¯­è¨€æ•°æ®ç±»å‹çš„å¯¹åº”"></a>4ã€æ•°æ®åº“å­—æ®µç±»å‹ä¸Javaè¯­è¨€æ•°æ®ç±»å‹çš„å¯¹åº”</h3><table><thead><tr><th align="left"><strong>JDBC ç±»å‹</strong></th><th align="left"><strong>Java ç±»å‹</strong></th></tr></thead><tbody><tr><td align="left"><code>CHAR</code></td><td align="left"><code>String</code></td></tr><tr><td align="left"><code>VARCHAR</code></td><td align="left"><code>String</code></td></tr><tr><td align="left"><code>LONGVARCHAR</code></td><td align="left"><code>String</code></td></tr><tr><td align="left"><code>NUMERIC</code></td><td align="left"><code>java.math.BigDecimal</code></td></tr><tr><td align="left"><code>DECIMAL</code></td><td align="left"><code>java.math.BigDecimal</code></td></tr><tr><td align="left"><code>BIT</code></td><td align="left"><code>boolean</code></td></tr><tr><td align="left"><code>TINYINT</code></td><td align="left"><code>byte</code></td></tr><tr><td align="left"><code>SMALLINT</code></td><td align="left"><code>short</code></td></tr><tr><td align="left"><code>INTEGER</code></td><td align="left"><code>int</code></td></tr><tr><td align="left"><code>BIGINT</code></td><td align="left"><code>long</code></td></tr><tr><td align="left"><code>REAL</code></td><td align="left"><code>float</code></td></tr><tr><td align="left"><code>FLOAT</code></td><td align="left"><code>double</code></td></tr><tr><td align="left"><code>DOUBLE</code></td><td align="left"><code>double</code></td></tr><tr><td align="left"><code>BINARY</code></td><td align="left"><code>byte[]</code></td></tr><tr><td align="left"><code>VARBINARY</code></td><td align="left"><code>byte[]</code></td></tr><tr><td align="left"><code>LONGVARBINARY</code></td><td align="left"><code>byte[]</code></td></tr><tr><td align="left"><code>DATE</code></td><td align="left"><code>java.sql.Date</code></td></tr><tr><td align="left"><code>TIME</code></td><td align="left"><code>java.sql.Time</code></td></tr><tr><td align="left"><code>TIMESTAMP</code></td><td align="left"><code>java.sql.Timestamp</code></td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>æ•°æ®åº“</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ•°æ®åº“åŸç†åŠåº”ç”¨</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>GitHubä¸Šä¼ ssh-key</title>
    <link href="/2019/11/17/GitHub%E4%B8%8A%E4%BC%A0ssh-key/"/>
    <url>/2019/11/17/GitHub%E4%B8%8A%E4%BC%A0ssh-key/</url>
    
    <content type="html"><![CDATA[<h4 id="1ã€ç»™gitæ·»åŠ -ssh-key"><a href="#1ã€ç»™gitæ·»åŠ -ssh-key" class="headerlink" title="1ã€ç»™gitæ·»åŠ  ssh-key"></a>1ã€ç»™gitæ·»åŠ  ssh-key</h4><p><img src="/2019/11/17/GitHub%E4%B8%8A%E4%BC%A0ssh-key/yuanli.png" alt="1"></p><h5 id="1-1ã€æŸ¥çœ‹æ˜¯å¦C-Users-USERNAME-sshç›®å½•ï¼Œä»¥åŠè¯¥ç›®å½•ä¸‹æ˜¯å¦æœ‰ç”Ÿæˆçš„key"><a href="#1-1ã€æŸ¥çœ‹æ˜¯å¦C-Users-USERNAME-sshç›®å½•ï¼Œä»¥åŠè¯¥ç›®å½•ä¸‹æ˜¯å¦æœ‰ç”Ÿæˆçš„key" class="headerlink" title="1.1ã€æŸ¥çœ‹æ˜¯å¦C:\Users\USERNAME\.sshç›®å½•ï¼Œä»¥åŠè¯¥ç›®å½•ä¸‹æ˜¯å¦æœ‰ç”Ÿæˆçš„key"></a>1.1ã€æŸ¥çœ‹æ˜¯å¦<code>C:\Users\USERNAME\.ssh</code>ç›®å½•ï¼Œä»¥åŠè¯¥ç›®å½•ä¸‹æ˜¯å¦æœ‰ç”Ÿæˆçš„key</h5><p><img src="/2019/11/17/GitHub%E4%B8%8A%E4%BC%A0ssh-key/dirssh.png" alt="1"></p><p>è‹¥æ²¡æœ‰åˆ™ç”Ÿæˆä¸€ä¸ªssh-key</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs excel">ssh-keygen -<span class="hljs-built_in">t</span> rsa -C <span class="hljs-string">&quot;email@mail.com&quot;</span><br></code></pre></td></tr></table></figure><h5 id="1-2ã€å°†-ssh-id-rsa-pubå†…å®¹åŠ å…¥ä½ çš„githubä¸­"><a href="#1-2ã€å°†-ssh-id-rsa-pubå†…å®¹åŠ å…¥ä½ çš„githubä¸­" class="headerlink" title="1.2ã€å°†.~/ssh/id_rsa.pubå†…å®¹åŠ å…¥ä½ çš„githubä¸­"></a>1.2ã€å°†.~/ssh/id_rsa.pubå†…å®¹åŠ å…¥ä½ çš„githubä¸­</h5><p><img src="/2019/11/17/GitHub%E4%B8%8A%E4%BC%A0ssh-key/githubssh.png" alt="1"></p><h5 id="1-3ã€è®¾ç½®ä½ çš„gitç”¨æˆ·ååŠé‚®ç®±"><a href="#1-3ã€è®¾ç½®ä½ çš„gitç”¨æˆ·ååŠé‚®ç®±" class="headerlink" title="1.3ã€è®¾ç½®ä½ çš„gitç”¨æˆ·ååŠé‚®ç®±"></a>1.3ã€è®¾ç½®ä½ çš„gitç”¨æˆ·ååŠé‚®ç®±</h5><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs verilog">git <span class="hljs-keyword">config</span> --<span class="hljs-keyword">global</span> user<span class="hljs-variable">.name</span> <span class="hljs-string">&quot;name&quot;</span><br>git <span class="hljs-keyword">config</span> --<span class="hljs-keyword">global</span> user<span class="hljs-variable">.email</span> <span class="hljs-string">&quot;email@mail.com&quot;</span><br></code></pre></td></tr></table></figure><h5 id="1-6ã€æµ‹è¯•ä½ çš„ssh-key"><a href="#1-6ã€æµ‹è¯•ä½ çš„ssh-key" class="headerlink" title="1.6ã€æµ‹è¯•ä½ çš„ssh-key"></a>1.6ã€æµ‹è¯•ä½ çš„ssh-key</h5><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">ssh -T <span class="hljs-symbol">git@</span>github.com<br></code></pre></td></tr></table></figure><p>è¾“å…¥yesåè‹¥æ˜¾ç¤ºä»¥ä¸‹å†…å®¹ï¼Œåˆ™ä»£è¡¨æˆåŠŸ</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript">Hi xxx! Youâ€™ve successfully authenticated, <span class="hljs-keyword">but</span> GitHub <span class="hljs-keyword">does</span> <span class="hljs-keyword">not</span> provide shell access. <br></code></pre></td></tr></table></figure><h4 id="2ã€è§£å†³githubä¸Šä¼ ssh-keyåä»é¡»è¾“å…¥å¯†ç çš„é—®é¢˜"><a href="#2ã€è§£å†³githubä¸Šä¼ ssh-keyåä»é¡»è¾“å…¥å¯†ç çš„é—®é¢˜" class="headerlink" title="2ã€è§£å†³githubä¸Šä¼ ssh-keyåä»é¡»è¾“å…¥å¯†ç çš„é—®é¢˜"></a>2ã€è§£å†³githubä¸Šä¼ ssh-keyåä»é¡»è¾“å…¥å¯†ç çš„é—®é¢˜</h4><p>è¿™ç§æƒ…å†µç»å¤§å¤šæ•°æ˜¯å› ä¸ºç”¨çš„æ˜¯<code>https</code>è€Œä¸æ˜¯<code>ssh</code>ï¼Œæ›´æ–°ä¸º<code>ssh</code>æ ¼å¼<br> <code>HTTPS</code>çš„æ ¼å¼ä¸ºï¼š<code>https://github.com/ç”¨æˆ·å/ä»“åº“å.git</code><br> <code>SSH</code>çš„æ ¼å¼ä¸ºï¼š<code>git@github.com:ç”¨æˆ·å/ä»“åº“å.git</code></p><p>2.1ã€è¿™ç§äº‹æƒ…é€šå¸¸å‘ç”Ÿåœ¨æ›´æ¢æœºå™¨åå…‹éš†è‡ªå·±ä»“åº“çš„æ—¶å€™ï¼Œé€šå¸¸æˆ‘ä»¬ä¼šä½¿ç”¨httpsæ–¹å¼å…‹éš†</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">git clone https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/Name/</span>project.git<br></code></pre></td></tr></table></figure><p>2.2ã€è¿™æ ·ä¾¿ä¼šåœ¨ä½ git pushæ—¶å€™è¦æ±‚è¾“å…¥ç”¨æˆ·åå’Œå¯†ç <br>è§£å†³çš„æ–¹æ³•æ˜¯ä½¿ç”¨sshæ–¹å¼å…‹éš†ä»“åº“</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">git <span class="hljs-keyword">clone</span> <span class="hljs-title">git</span>@github.com:Name/project.git<br></code></pre></td></tr></table></figure><p>2.3ã€å½“å¦‚ï¼Œå¦‚æœä½ å·²ç»ç”¨httpsæ–¹å¼å…‹éš†äº†ä»“åº“ï¼Œå°±ä¸å¿…åˆ é™¤ä»“åº“é‡æ–°å…‹éš†ï¼Œåªéœ€å°†æœ¬åœ°ä»“åº“ .git/configæ–‡ä»¶ä¸­çš„ </p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">url = https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/Name/</span>project.git <br></code></pre></td></tr></table></figure><p>ä¸€è¡Œæ”¹ä¸º </p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">url</span> = git@github.com:Name/project.git <br></code></pre></td></tr></table></figure><p>å³å¯ã€‚</p><p>æ¥è‡ªè‹ç”Ÿä¸æƒ‘é—®é¢˜åŠçƒ­å¿ƒé©»åœˆå¤§ä½¬çš„è§£ç­”ï¼š<a href="https://segmentfault.com/q/1010000000599327">è®¾ç½®ssh keyåpushä¸ºä»€ä¹ˆè¿˜è¦è¾“å…¥ç”¨æˆ·åå’Œå¯†ç </a></p><p><img src="/GitHub%E4%B8%8A%E4%BC%A0ssh-key/http_s.png" alt="1"></p><p><a href="https://blog.csdn.net/GreatTang/article/details/88431737">https://blog.csdn.net/GreatTang/article/details/88431737</a></p>]]></content>
    
    
    <categories>
      
      <category>Git</category>
      
    </categories>
    
    
    <tags>
      
      <tag>GitHub</tag>
      
      <tag>ssh-key</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title></title>
    <link href="/2019/11/16/MySQL/"/>
    <url>/2019/11/16/MySQL/</url>
    
    <content type="html"><![CDATA[<table><thead><tr><th align="left"><strong>JDBC ç±»å‹</strong></th><th align="left"><strong>Java ç±»å‹</strong></th></tr></thead><tbody><tr><td align="left"><code>CHAR</code></td><td align="left"><code>String</code></td></tr><tr><td align="left"><code>VARCHAR</code></td><td align="left"><code>String</code></td></tr><tr><td align="left"><code>LONGVARCHAR</code></td><td align="left"><code>String</code></td></tr><tr><td align="left"><code>NUMERIC</code></td><td align="left"><code>java.math.BigDecimal</code></td></tr><tr><td align="left"><code>DECIMAL</code></td><td align="left"><code>java.math.BigDecimal</code></td></tr><tr><td align="left"><code>BIT</code></td><td align="left"><code>boolean</code></td></tr><tr><td align="left"><code>TINYINT</code></td><td align="left"><code>byte</code></td></tr><tr><td align="left"><code>SMALLINT</code></td><td align="left"><code>short</code></td></tr><tr><td align="left"><code>INTEGER</code></td><td align="left"><code>int</code></td></tr><tr><td align="left"><code>BIGINT</code></td><td align="left"><code>long</code></td></tr><tr><td align="left"><code>REAL</code></td><td align="left"><code>float</code></td></tr><tr><td align="left"><code>FLOAT</code></td><td align="left"><code>double</code></td></tr><tr><td align="left"><code>DOUBLE</code></td><td align="left"><code>double</code></td></tr><tr><td align="left"><code>BINARY</code></td><td align="left"><code>byte[]</code></td></tr><tr><td align="left"><code>VARBINARY</code></td><td align="left"><code>byte[]</code></td></tr><tr><td align="left"><code>LONGVARBINARY</code></td><td align="left"><code>byte[]</code></td></tr><tr><td align="left"><code>DATE</code></td><td align="left"><code>java.sql.Date</code></td></tr><tr><td align="left"><code>TIME</code></td><td align="left"><code>java.sql.Time</code></td></tr><tr><td align="left"><code>TIMESTAMP</code></td><td align="left"><code>java.sql.Timestamp</code></td></tr></tbody></table><h3 id="1ã€å®‰è£…MySQL"><a href="#1ã€å®‰è£…MySQL" class="headerlink" title="1ã€å®‰è£…MySQL"></a>1ã€å®‰è£…MySQL</h3><p><img src="/2019/11/16/MySQL/MySQL.png" alt="1"></p><h3 id="2ã€æ•°æ®åº“å¼•æ“"><a href="#2ã€æ•°æ®åº“å¼•æ“" class="headerlink" title="2ã€æ•°æ®åº“å¼•æ“"></a>2ã€æ•°æ®åº“å¼•æ“</h3><h4 id="2-1ã€æ•°æ®åº“å¼•æ“æœ‰ä¸¤ç§ï¼š"><a href="#2-1ã€æ•°æ®åº“å¼•æ“æœ‰ä¸¤ç§ï¼š" class="headerlink" title="2.1ã€æ•°æ®åº“å¼•æ“æœ‰ä¸¤ç§ï¼š"></a>2.1ã€æ•°æ®åº“å¼•æ“æœ‰ä¸¤ç§ï¼š</h4><p>InnoDB:        æ”¯æŒäº‹åŠ¡çš„å¼•æ“(å®‰å…¨)</p><p>MyISAMï¼š    ä¸æ”¯æŒäº‹åŠ¡çš„å¼•æ“(é€Ÿåº¦æ›´å¿«)</p><h4 id="2-2ã€æ•°æ®åº“å¼•æ“çš„é€‰æ‹©"><a href="#2-2ã€æ•°æ®åº“å¼•æ“çš„é€‰æ‹©" class="headerlink" title="2.2ã€æ•°æ®åº“å¼•æ“çš„é€‰æ‹©"></a>2.2ã€æ•°æ®åº“å¼•æ“çš„é€‰æ‹©</h4><p>MySQLä¸­çš„æ•°æ®ç”¨å„ç§ä¸åŒçš„æŠ€æœ¯å­˜å‚¨åœ¨æ–‡ä»¶ï¼ˆæˆ–è€…å†…å­˜ï¼‰ä¸­ã€‚è¿™äº›æŠ€æœ¯ä¸­çš„éƒ½ä½¿ç”¨ä¸åŒçš„<code>å­˜å‚¨æœºåˆ¶</code>ã€<code>ç´¢å¼•æŠ€å·§</code>ã€<code>é”å®šæ°´å¹³</code>å¹¶ä¸”æœ€ç»ˆæä¾›ä¸åŒçš„åŠŸèƒ½å’Œèƒ½åŠ›ã€‚</p><p>é€šè¿‡é€‰æ‹©ä¸åŒçš„æŠ€æœ¯ï¼Œä½ èƒ½å¤Ÿè·å¾—é¢å¤–çš„é€Ÿåº¦æˆ–è€…åŠŸèƒ½ï¼Œä»è€Œæ”¹å–„ä½ çš„åº”ç”¨çš„æ•´ä½“åŠŸèƒ½ã€‚</p><ul><li><p>MyISAMï¼šæ‹¥æœ‰è¾ƒé«˜çš„æ’å…¥ï¼ŒæŸ¥è¯¢é€Ÿåº¦ï¼Œä½†ä¸æ”¯æŒäº‹åŠ¡ï¼Œä¸æ”¯æŒå¤–é”®ã€‚</p></li><li><p>InnoDBï¼šæ”¯æŒäº‹åŠ¡ï¼Œæ”¯æŒå¤–é”®ï¼Œæ”¯æŒè¡Œçº§é”å®šï¼Œæ€§èƒ½è¾ƒä½ã€‚</p></li></ul><p><strong>InnoDB å­˜å‚¨å¼•æ“æä¾›äº†å…·æœ‰æäº¤ã€å›æ»šå’Œå´©æºƒæ¢å¤èƒ½åŠ›çš„äº‹åŠ¡å®‰å…¨ã€‚ä½†å¯¹æ¯”MyISAMï¼Œå¤„ç†æ•ˆç‡å·®ï¼Œä¸”ä¼šå ç”¨æ›´å¤šçš„ç£ç›˜ç©ºé—´ä»¥ä¿ç•™æ•°æ®å’Œç´¢å¼•ã€‚</strong></p><h3 id="3ã€æ•°æ®åº“çš„æ“ä½œ"><a href="#3ã€æ•°æ®åº“çš„æ“ä½œ" class="headerlink" title="3ã€æ•°æ®åº“çš„æ“ä½œ"></a>3ã€æ•°æ®åº“çš„æ“ä½œ</h3><p><strong>SQL</strong> (<strong>S</strong>tructured <strong>Q</strong>uery <strong>L</strong>anguage) ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€æ˜¯å…³ç³»å‹æ•°æ®åº“<strong>æ ‡å‡†è¯­è¨€</strong>ï¼Œç›´ç™½çš„è®²SQLè¯­å¥ï¼šå…·å¤‡çµæ´»ã€ç®€å•ã€æ˜“ç”¨çš„ç‰¹ç‚¹ã€‚</p><h4 id="3-1ã€SQLåˆåˆ†ä¸º"><a href="#3-1ã€SQLåˆåˆ†ä¸º" class="headerlink" title="3.1ã€SQLåˆåˆ†ä¸º"></a>3.1ã€SQLåˆåˆ†ä¸º</h4><h5 id="3-1-1ã€æ•°æ®æŸ¥è¯¢è¯­è¨€ï¼ˆDQLï¼‰"><a href="#3-1-1ã€æ•°æ®æŸ¥è¯¢è¯­è¨€ï¼ˆDQLï¼‰" class="headerlink" title="*3.1.1ã€æ•°æ®æŸ¥è¯¢è¯­è¨€ï¼ˆDQLï¼‰"></a>*3.1.1ã€æ•°æ®æŸ¥è¯¢è¯­è¨€ï¼ˆDQLï¼‰</h5><p>ä¹Ÿç§°ä¸ºâ€œæ•°æ®æ£€ç´¢è¯­å¥â€ï¼Œç”¨ä»¥ä»è¡¨ä¸­è·å¾—æ•°æ®ï¼Œç¡®å®šæ•°æ®æ€æ ·åœ¨åº”ç”¨ç¨‹åºç»™å‡ºã€‚ä¿ç•™å­—<code>SELECT</code>æ˜¯DQLï¼ˆä¹Ÿæ˜¯æ‰€æœ‰SQLï¼‰ç”¨å¾—æœ€å¤šçš„åŠ¨è¯ï¼Œå…¶ä»–DQLå¸¸ç”¨çš„ä¿ç•™å­—æœ‰<code>WHERE</code>ï¼Œ<code>ORDER BY</code>ï¼Œ<code>GROUP BY</code>å’Œ<code>HAVING</code>ã€‚è¿™äº›DQLä¿ç•™å­—å¸¸ä¸å…¶ä»–ç±»å‹çš„SQLè¯­å¥ä¸€èµ·ä½¿ç”¨ã€‚</p><h5 id="3-1-2ã€æ•°æ®æ“çºµè¯­è¨€ï¼ˆDMLï¼‰"><a href="#3-1-2ã€æ•°æ®æ“çºµè¯­è¨€ï¼ˆDMLï¼‰" class="headerlink" title="*3.1.2ã€æ•°æ®æ“çºµè¯­è¨€ï¼ˆDMLï¼‰"></a>*3.1.2ã€æ•°æ®æ“çºµè¯­è¨€ï¼ˆDMLï¼‰</h5><p>å…¶è¯­å¥åŒ…æ‹¬åŠ¨è¯<code>INSERT</code>ï¼Œ<code>UPDATE</code>å’Œ<code>DELETE</code>ã€‚å®ƒä»¬åˆ†åˆ«ç”¨äºæ·»åŠ ï¼Œä¿®æ”¹å’Œåˆ é™¤è¡¨ä¸­çš„è¡Œã€‚ä¹Ÿç§°ä¸ºåŠ¨ä½œæŸ¥è¯¢è¯­è¨€ã€‚</p><h5 id="3-1-3ã€DBAçš„äº‹åŠ¡å¤„ç†è¯­è¨€ï¼ˆTPLï¼‰"><a href="#3-1-3ã€DBAçš„äº‹åŠ¡å¤„ç†è¯­è¨€ï¼ˆTPLï¼‰" class="headerlink" title="3.1.3ã€DBAçš„äº‹åŠ¡å¤„ç†è¯­è¨€ï¼ˆTPLï¼‰"></a>3.1.3ã€DBAçš„äº‹åŠ¡å¤„ç†è¯­è¨€ï¼ˆTPLï¼‰</h5><p>å®ƒçš„è¯­å¥èƒ½ç¡®ä¿è¢«DMLè¯­å¥å½±å“çš„è¡¨çš„æ‰€æœ‰è¡ŒåŠæ—¶å¾—ä»¥æ›´æ–°ã€‚TPLè¯­å¥åŒ…æ‹¬<code>BEGIN TRANSACTION</code>ï¼Œ<code>COMMIT</code>å’Œ<code>ROLLBACK</code>ã€‚</p><h5 id="3-1-4ã€æ•°æ®æ§åˆ¶è¯­è¨€ï¼ˆDCLï¼‰"><a href="#3-1-4ã€æ•°æ®æ§åˆ¶è¯­è¨€ï¼ˆDCLï¼‰" class="headerlink" title="3.1.4ã€æ•°æ®æ§åˆ¶è¯­è¨€ï¼ˆDCLï¼‰"></a>3.1.4ã€æ•°æ®æ§åˆ¶è¯­è¨€ï¼ˆDCLï¼‰</h5><p>å®ƒçš„è¯­å¥é€šè¿‡<code>GRANT</code>æˆ–<code>REVOKE</code>è·å¾—è®¸å¯ï¼Œç¡®å®šå•ä¸ªç”¨æˆ·å’Œç”¨æˆ·ç»„å¯¹æ•°æ®åº“å¯¹è±¡çš„è®¿é—®ã€‚æŸäº›RDBMSå¯ç”¨GRANTæˆ–REVOKEæ§åˆ¶å¯¹è¡¨å•ä¸ªåˆ—çš„è®¿é—®ã€‚</p><h5 id="3-1-5-ã€æ•°æ®å®šä¹‰è¯­è¨€ï¼ˆDDLï¼‰"><a href="#3-1-5-ã€æ•°æ®å®šä¹‰è¯­è¨€ï¼ˆDDLï¼‰" class="headerlink" title="3.1.5*ã€æ•°æ®å®šä¹‰è¯­è¨€ï¼ˆDDLï¼‰"></a>3.1.5*ã€æ•°æ®å®šä¹‰è¯­è¨€ï¼ˆDDLï¼‰</h5><p>å…¶è¯­å¥åŒ…æ‹¬åŠ¨è¯<code>CREATE</code>å’Œ<code>DROP</code>ã€‚åœ¨æ•°æ®åº“ä¸­åˆ›å»ºæ–°è¡¨æˆ–åˆ é™¤è¡¨ï¼ˆCREAT TABLE æˆ– DROP TABLEï¼‰ï¼›ä¸ºè¡¨åŠ å…¥ç´¢å¼•ç­‰ã€‚DDLåŒ…æ‹¬è®¸å¤šä¸äººæ•°æ®åº“ç›®å½•ä¸­è·å¾—æ•°æ®æœ‰å…³çš„ä¿ç•™å­—ã€‚å®ƒä¹Ÿæ˜¯åŠ¨ä½œæŸ¥è¯¢çš„ä¸€éƒ¨åˆ†ã€‚</p><h5 id="3-1-6ã€æŒ‡é’ˆæ§åˆ¶è¯­è¨€ï¼ˆCCLï¼‰"><a href="#3-1-6ã€æŒ‡é’ˆæ§åˆ¶è¯­è¨€ï¼ˆCCLï¼‰" class="headerlink" title="3.1.6ã€æŒ‡é’ˆæ§åˆ¶è¯­è¨€ï¼ˆCCLï¼‰"></a>3.1.6ã€æŒ‡é’ˆæ§åˆ¶è¯­è¨€ï¼ˆCCLï¼‰</h5><p>å®ƒçš„è¯­å¥ï¼Œåƒ<code>DECLARE CURSOR</code>ï¼Œ<code>FETCH INTO</code>å’Œ<code>UPDATE WHERE CURRENT</code>ç”¨äºå¯¹ä¸€ä¸ªæˆ–å¤šä¸ªè¡¨å•ç‹¬è¡Œçš„æ“ä½œã€‚</p><h4 id="3-2ã€SQLä¹¦å†™çš„æ³¨æ„äº‹é¡¹"><a href="#3-2ã€SQLä¹¦å†™çš„æ³¨æ„äº‹é¡¹" class="headerlink" title="3.2ã€SQLä¹¦å†™çš„æ³¨æ„äº‹é¡¹"></a>3.2ã€SQLä¹¦å†™çš„æ³¨æ„äº‹é¡¹</h4><ol><li><p>åœ¨MySQLæ•°æ®åº“ä¸­ï¼ŒSQLè¯­å¥å¤§å°å†™ä¸æ•æ„ŸSQLè¯­å¥å¯å•è¡Œæˆ–å¤šè¡Œä¹¦å†™</p><p>â€‹        a)    Select   SELECT</p></li><li><p>åœ¨SQLè¯­å¥ä¸­ï¼Œå…³é”®å­—ä¸èƒ½è·¨å¤šè¡Œæˆ–ç¼©å†™</p></li><li><p>ä¸ºäº†æé«˜å¯è¯»æ€§ä¸€èˆ¬å…³é”®å­—å¤§å†™ï¼Œå…¶ä»–å°å†™,ä¼˜åŒ–sqlç›®çš„</p></li><li><p>ç©ºæ ¼å’Œç¼©è¿›ä½¿ç¨‹åºæ˜“è¯»</p></li></ol><h3 id="4ã€å¯åŠ¨-amp-è¿æ¥æ•°æ®åº“"><a href="#4ã€å¯åŠ¨-amp-è¿æ¥æ•°æ®åº“" class="headerlink" title="4ã€å¯åŠ¨&amp;è¿æ¥æ•°æ®åº“"></a>4ã€å¯åŠ¨&amp;è¿æ¥æ•°æ®åº“</h3><h4 id="4-1ã€æ£€æŸ¥MYSQLæœåŠ¡"><a href="#4-1ã€æ£€æŸ¥MYSQLæœåŠ¡" class="headerlink" title="4.1ã€æ£€æŸ¥MYSQLæœåŠ¡"></a>4.1ã€æ£€æŸ¥MYSQLæœåŠ¡</h4><p>æ‰“å¼€æ•°æ®åº“è¿æ¥ä¹‹å‰ï¼šä¸€å®šè¦ä¿è¯MySQLæœåŠ¡å·²ç»å¼€å¯ã€‚è‹¥æ²¡å¼€å¯ï¼Œå°±éœ€è¦å»æ“ä½œç³»ç»Ÿä¸­æ£€æŸ¥æœåŠ¡æ˜¯å¦å¼€å¯</p><p>æ£€æŸ¥MySQLçš„æœåŠ¡æ˜¯å¦å·²ç»æ‰“å¼€ï¼š</p><ol><li>WIN + R æ‰“å¼€è¿è¡Œï¼šservices.msc</li><li>æ§åˆ¶é¢æ¿-ç®¡ç†å·¥å…·-æœåŠ¡</li><li>ä½¿ç”¨å‘½ä»¤è¡Œå‘½ä»¤å¼€å¯å’Œå¯åŠ¨MYSQLæœåŠ¡</li></ol><ul><li>net start æœåŠ¡åç§°ï¼šå¼€å¯ä¸€ä¸ªæœåŠ¡ï¼Œå¦‚:<code>net start MySQL</code><ul><li>net stop æœåŠ¡åç§°ï¼šå…³é—­ä¸€ä¸ªæœåŠ¡å™¨ï¼Œå¦‚:<code>net stop MySQL</code></li></ul></li></ul><h4 id="4-2ã€è¿æ¥æ•°æ®åº“"><a href="#4-2ã€è¿æ¥æ•°æ®åº“" class="headerlink" title="4.2ã€è¿æ¥æ•°æ®åº“"></a>4.2ã€è¿æ¥æ•°æ®åº“</h4><h5 id="4-2-1ã€å‘½ä»¤è¡Œè¿æ¥"><a href="#4-2-1ã€å‘½ä»¤è¡Œè¿æ¥" class="headerlink" title="4.2.1ã€å‘½ä»¤è¡Œè¿æ¥"></a>4.2.1ã€å‘½ä»¤è¡Œè¿æ¥</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs css">mysql â€“uã€ç”¨æˆ·åã€‘ -<span class="hljs-selector-tag">p</span>ã€å¯†ç ã€‘ â€“hã€IPã€‘ -<span class="hljs-selector-tag">P</span>ã€ç«¯å£ï¼Œé»˜è®¤ä¸€èˆ¬ä¸º<span class="hljs-number">3306</span>ã€‘<br>æœ¬æœºä¸Šæœ‰ä¸¤ç§å†™æ³•ï¼š<br>mysql â€“uç”¨æˆ·å â€“<span class="hljs-selector-tag">p</span>å¯†ç  â€“hlocalhost â€“P3306<br>mysql â€“uç”¨æˆ·å â€“<span class="hljs-selector-tag">p</span>å¯†ç  â€“h127.<span class="hljs-number">0.0</span>.<span class="hljs-number">1</span> â€“P3306<br><br>è‹¥æ˜¯åœ¨æœ¬æœºç™»å½•&amp;ç«¯å£æ²¡æœ‰æ”¹å˜ï¼Œå¯çœç•¥IPå’Œç«¯å£çš„å†™æ³•ï¼š<br>mysql â€“uç”¨æˆ·å â€“<span class="hljs-selector-tag">p</span>å¯†ç <br><br>ä¹Ÿå¯ä½¿ç”¨å®‰è£…å¥½çš„mysqlçš„å‘½ä»¤è¡Œçª—å£ï¼š<br>mysql â€“uroot â€“<span class="hljs-selector-tag">p</span><br></code></pre></td></tr></table></figure><p>å¦‚æœcmdæˆ–terminalä¸­ä½¿ç”¨ä¸Šè¿°å‘½ä»¤æç¤ºMYSQLå‘½ä»¤ä¸å­˜åœ¨çš„æƒ…å†µï¼Œæ£€æŸ¥å®‰è£…MYSQLçš„æ—¶å€™çš„ç¯å¢ƒå˜é‡é…ç½®æ˜¯å¦æœ‰è¯¯ã€‚æ³¨ï¼šterminalæŒ‡ç±»UNIXç³»ç»Ÿçš„å‘½ä»¤è¡Œã€‚</p><h5 id="4-2-2ã€å¯è§†åŒ–ç•Œé¢å¯åŠ¨å’Œè¿æ¥æ•°æ®åº“"><a href="#4-2-2ã€å¯è§†åŒ–ç•Œé¢å¯åŠ¨å’Œè¿æ¥æ•°æ®åº“" class="headerlink" title="4.2.2ã€å¯è§†åŒ–ç•Œé¢å¯åŠ¨å’Œè¿æ¥æ•°æ®åº“"></a>4.2.2ã€å¯è§†åŒ–ç•Œé¢å¯åŠ¨å’Œè¿æ¥æ•°æ®åº“</h5><p><img src="/2019/11/16/MySQL/workbench.png" alt="1"></p><h3 id="5ã€æ•°æ®åº“åˆ›å»ºã€åˆ é™¤ã€ä½¿ç”¨åŠæŸ¥çœ‹"><a href="#5ã€æ•°æ®åº“åˆ›å»ºã€åˆ é™¤ã€ä½¿ç”¨åŠæŸ¥çœ‹" class="headerlink" title="5ã€æ•°æ®åº“åˆ›å»ºã€åˆ é™¤ã€ä½¿ç”¨åŠæŸ¥çœ‹"></a>5ã€æ•°æ®åº“åˆ›å»ºã€åˆ é™¤ã€ä½¿ç”¨åŠæŸ¥çœ‹</h3><h4 id="5-1ã€ç³»ç»Ÿæ•°æ®åº“"><a href="#5-1ã€ç³»ç»Ÿæ•°æ®åº“" class="headerlink" title="5.1ã€ç³»ç»Ÿæ•°æ®åº“"></a>5.1ã€ç³»ç»Ÿæ•°æ®åº“</h4><p>ç³»ç»Ÿè‡ªå¸¦çš„æ•°æ®åº“ï¼šä¸èƒ½ä¿®æ”¹ï¼Œä¸èƒ½åˆ é™¤ï¼Œå…·ä½“çš„å†…å®¹åˆ°åˆ«å¤„æŸ¥å»</p><blockquote><ol><li>information_schemaï¼šå­˜å‚¨æ•°æ®åº“å¯¹è±¡ä¿¡æ¯ï¼Œå¦‚ï¼šç”¨æˆ·è¡¨ä¿¡æ¯ï¼Œåˆ—ä¿¡æ¯ï¼Œæƒé™ï¼Œå­—ç¬¦ï¼Œåˆ†åŒºç­‰ä¿¡æ¯ï¼›</li><li>performance_schemaï¼šå­˜å‚¨æ•°æ®åº“æœåŠ¡å™¨æ€§èƒ½å‚æ•°ä¿¡æ¯ï¼›</li><li>mysqlï¼šå­˜å‚¨æ•°æ®åº“ç”¨æˆ·æƒé™ä¿¡æ¯ï¼›</li><li>testï¼šä»»ä½•ç”¨æˆ·éƒ½å¯ä»¥ä½¿ç”¨çš„æµ‹è¯•æ•°æ®åº“ï¼›</li><li>sysï¼šsysåº“æ‰€æœ‰çš„æ•°æ®æºè‡ªï¼šperformance_schemaï¼ˆåˆ›å»ºåœ¨performance_schemaçš„è§†å›¾ï¼‰ã€‚</li></ol></blockquote><h4 id="5-2ã€ç”¨æˆ·æ•°æ®åº“"><a href="#5-2ã€ç”¨æˆ·æ•°æ®åº“" class="headerlink" title="5.2ã€ç”¨æˆ·æ•°æ®åº“"></a>5.2ã€ç”¨æˆ·æ•°æ®åº“</h4><p>ç”¨æˆ·è‡ªå®šä¹‰çš„æ•°æ®åº“ï¼šä¸€èˆ¬çš„ï¼Œä¸€ä¸ªé¡¹ç›®ä¸€ä¸ªç”¨æˆ·æ•°æ®åº“ã€‚  </p><h4 id="5-3ã€æŸ¥çœ‹-amp-ä½¿ç”¨æ•°æ®åº“"><a href="#5-3ã€æŸ¥çœ‹-amp-ä½¿ç”¨æ•°æ®åº“" class="headerlink" title="5.3ã€æŸ¥çœ‹&amp;ä½¿ç”¨æ•°æ®åº“"></a>5.3ã€æŸ¥çœ‹&amp;ä½¿ç”¨æ•°æ®åº“</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">show databases;   <span class="hljs-regexp">//</span>æŸ¥çœ‹æ•°æ®åº“<br>use æ•°æ®åº“å;   <span class="hljs-regexp">//</span>ä½¿ç”¨æ•°æ®åº“<br></code></pre></td></tr></table></figure><h4 id="5-4ã€åˆ›å»ºæ•°æ®åº“"><a href="#5-4ã€åˆ›å»ºæ•°æ®åº“" class="headerlink" title="5.4ã€åˆ›å»ºæ•°æ®åº“"></a>5.4ã€åˆ›å»ºæ•°æ®åº“</h4><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">database</span> æ•°æ®åº“å;<br></code></pre></td></tr></table></figure><h4 id="5-6ã€åˆ é™¤æ•°æ®åº“"><a href="#5-6ã€åˆ é™¤æ•°æ®åº“" class="headerlink" title="5.6ã€åˆ é™¤æ•°æ®åº“"></a>5.6ã€åˆ é™¤æ•°æ®åº“</h4><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">drop</span> <span class="hljs-keyword">database</span> æ•°æ®åº“å;<br></code></pre></td></tr></table></figure><p>å¦‚æœæ²¡æœ‰å®Œå¤‡çš„æ•°æ®åº“å¤‡ä»½å’Œæ¢å¤æœºåˆ¶ï¼Œè¯·æ…é‡è€ƒè™‘ä½¿ç”¨æ•°æ®åº“åˆ é™¤å‘½ä»¤ï¼Œå¦åˆ™è¯¯åˆ åº“çš„è¯è¯·èŠ‚å“€ï¼š</p><p><img src="/2019/11/16/MySQL/shanku.png" alt="1"></p><h4 id="5-7ã€å¯è§†åŒ–æ“ä½œ"><a href="#5-7ã€å¯è§†åŒ–æ“ä½œ" class="headerlink" title="5.7ã€å¯è§†åŒ–æ“ä½œ"></a>5.7ã€å¯è§†åŒ–æ“ä½œ</h4><p>é™¤å‘½ä»¤è¡Œç•Œé¢ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åˆ©ç”¨ç¬¬ä¸‰æ–¹å·¥å…·å¯è§†åŒ–çš„æ•°æ®åº“æŸ¥çœ‹ã€ä½¿ç”¨ã€åˆ›å»ºã€åˆ é™¤ ã€‚ </p><p><img src="/2019/11/16/MySQL/navicat.png" alt="1"></p><h3 id="6ã€æ•°æ®åº“ä¸­è¡¨çš„åˆ›å»ºã€æŸ¥è¯¢ã€ä¿®æ”¹åŠåˆ é™¤"><a href="#6ã€æ•°æ®åº“ä¸­è¡¨çš„åˆ›å»ºã€æŸ¥è¯¢ã€ä¿®æ”¹åŠåˆ é™¤" class="headerlink" title="6ã€æ•°æ®åº“ä¸­è¡¨çš„åˆ›å»ºã€æŸ¥è¯¢ã€ä¿®æ”¹åŠåˆ é™¤"></a>6ã€æ•°æ®åº“ä¸­è¡¨çš„åˆ›å»ºã€æŸ¥è¯¢ã€ä¿®æ”¹åŠåˆ é™¤</h3><h4 id="6-1ã€è¡¨å­—æ®µç±»å‹"><a href="#6-1ã€è¡¨å­—æ®µç±»å‹" class="headerlink" title="6.1ã€è¡¨å­—æ®µç±»å‹"></a>6.1ã€è¡¨å­—æ®µç±»å‹</h4><p>MySQLæ”¯æŒå¤šç§åˆ—ç±»å‹ï¼šæ•°å€¼ç±»å‹ã€æ—¥æœŸ/æ—¶é—´ç±»å‹å’Œå­—ç¬¦ï¼ˆä¸²ï¼‰ç±»å‹ã€‚</p><p>é«˜çº§è¯­è¨€åŸºæœ¬æ•°æ®ç±»å‹ ä¸ æ•°æ®åº“è¡¨å­—æ®µç±»å‹ å¯¹ç…§è¡¨</p><table><thead><tr><th>JAVA</th><th align="left">Javaå¤‡æ³¨</th><th>MYSQL</th><th>MYSQLå¤‡æ³¨</th></tr></thead><tbody><tr><td>Int/Integer</td><td align="left">çŸ­æ•´å‹</td><td>int</td><td>çŸ­æ•´å‹</td></tr><tr><td>long</td><td align="left">é•¿æ•´å‹</td><td>bigint</td><td>é•¿æ•´å‹</td></tr><tr><td>float</td><td align="left">å•ç²¾åº¦</td><td>float</td><td>å•ç²¾åº¦</td></tr><tr><td>double</td><td align="left">åŒç²¾åº¦</td><td>double</td><td>åŒç²¾åº¦</td></tr><tr><td>bigdecimal</td><td align="left">é‡‘èæ•°æ®</td><td>decimal</td><td>é‡‘èæ•°æ®</td></tr><tr><td>String</td><td align="left">å­—ç¬¦ä¸²</td><td>char</td><td>ä¸å¯å˜å­—ç¬¦ä¸²</td></tr><tr><td></td><td align="left"></td><td>varchar</td><td>å¯å˜å­—ç¬¦ä¸²</td></tr><tr><td>Boolean</td><td align="left">å¸ƒå°”å€¼</td><td>Bit</td><td>å–å€¼0å’Œ1</td></tr></tbody></table><p><code>float(5,2)</code>è¡¨ç¤ºä¸€ä¸ªæœ‰æ•ˆä½æœ€å¤š5ä½çš„æµ®ç‚¹æ•°ï¼Œå°æ•°å ä¸¤ä½ï¼Œæœ€å¤§è¡¨ç¤ºèŒƒå›´ Â± 999.99ã€‚</p><p>åœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­<code>floatå’Œdouble</code>éƒ½æ˜¯ç”¨çš„æ¯”è¾ƒå°‘çš„ï¼Œå› ä¸ºä»–ä»¬ç²¾ç¡®åº¦ä¸å¤Ÿé«˜ï¼Œæ‰€ä»¥åœ¨ä»Šåç”¨åˆ°å°æ•°éƒ½æ¨èä½¿ç”¨<code>decimal(m,n)</code>ã€‚</p><h5 id="6-1-1ã€æ—¥æœŸç±»å‹"><a href="#6-1-1ã€æ—¥æœŸç±»å‹" class="headerlink" title="6.1.1ã€æ—¥æœŸç±»å‹"></a>6.1.1ã€æ—¥æœŸç±»å‹</h5><blockquote><p>1ã€DATETIMEï¼Œå¹´æœˆæ—¥æ—¶åˆ†ç§’<br>2ã€DATEï¼Œå¹´æœˆæ—¥<br>3ã€TIMESTAMPï¼Œï¼ˆæ—¶é—´æˆ³[19700101080001,20381191111407]ï¼ŒåŸºæœ¬ä¸ä¼šç”¨åˆ°å®ƒï¼Œåªä½œäº†è§£ï¼‰<br>4ã€TIMEï¼Œæ—¶åˆ†ç§’<br>5ã€YEARï¼Œå¹´</p></blockquote><p>æ³¨æ„ï¼šåœ¨MySQLä¸­ï¼Œæ—¥æœŸæ—¶é—´å€¼ä½¿ç”¨å•å¼•å·å¼•èµ·æ¥ã€‚ç›¸å½“äºJavaä¸­çš„Dateï¼ˆä¸»è¦ï¼‰ï¼ŒCalenderã€‚</p><h5 id="6-1-2ã€äºŒè¿›åˆ¶ç±»å‹"><a href="#6-1-2ã€äºŒè¿›åˆ¶ç±»å‹" class="headerlink" title="6.1.2ã€äºŒè¿›åˆ¶ç±»å‹"></a>6.1.2ã€äºŒè¿›åˆ¶ç±»å‹</h5><p><strong>ä¸ºä»€ä¹ˆè¦å­˜æ”¾äºŒè¿›åˆ¶ç±»å‹ï¼Ÿ</strong></p><p>é¡¹ç›®ä¸­å¯èƒ½ä¼šä¿å­˜å›¾ç‰‡ï¼Œç”µå½±å’ŒéŸ³ä¹ç­‰äºŒè¿›åˆ¶å†…å®¹ï¼Œå› ä¸ºæ•°æ®åº“ä¸­æ²¡æœ‰å›¾ç‰‡ç±»å‹å’Œç”µå½±ç±»å‹ï¼Œå­˜çš„æ—¶å€™ä½¿ç”¨æ•°æ®æµå­˜å‚¨ï¼Œè¯»å–ä¹Ÿæ˜¯é€šè¿‡æ•°æ®æµè¯»å–ã€‚</p><p><strong>å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬å­˜å‚¨äºŒè¿›åˆ¶æ–‡ä»¶ä¿å­˜è·¯å¾„</strong></p><p>BITã€æˆ‘ä»¬ä¸€èˆ¬å­˜å‚¨0æˆ–1ï¼Œå­˜å‚¨Javaä¸­Booleanç±»å‹çš„å€¼ã€‚MySQLæ²¡æœ‰Booleanå‹ï¼Œæœ‰BITå‹ï¼›</p><p>BLOBã€ä¿å­˜çš„æ—¶å€™æ ¹æ®è‡ªå·±çš„å¤§å°ï¼Œé€‰æ‹©ä½¿ç”¨çš„ç±»å‹ï¼Œä¸€èˆ¬ä½¿ç”¨BLOBå°±å¤Ÿï¼›</p><p>ä¸å»ºè®®æŠŠå¤§çš„æ•°æ®æ–‡ä»¶å­˜æ”¾åˆ°æ•°æ®åº“ä¸­ï¼Œå¦‚æœæ–‡ä»¶å¤ªå¤§ï¼Œä¼šå½±å“æŸ¥è¯¢å’Œä¿®æ”¹é€Ÿåº¦ï¼Œè€Œä¸”åœ¨å¤‡ä»½æ•°æ®åº“çš„æ—¶å€™é€Ÿåº¦æ…¢ã€‚</p><p>å¦‚æœæœ‰ä¿å­˜å›¾ç‰‡å’Œç”µå½±ç­‰å¤§æ–‡ä»¶çš„éœ€æ±‚ï¼Œåº”è¯¥å°†æ–‡ä»¶æ”¾åˆ°ç£ç›˜ä¸Šï¼Œå°†æ–‡ä»¶çš„è·¯å¾„å­˜æ”¾çš„æ•°æ®åº“ä¸­ã€‚</p><p>BINARYã€VARBINARYã€TINYBLOBã€BLOBã€MEDIUMBLOBã€LONGBLOBï¼šå­˜æ”¾å›¾ç‰‡ã€å£°éŸ³å’Œå½±å“ç­‰äºŒè¿›åˆ¶å¯¹è±¡ï¼Œ0-4GBã€‚</p><p>å¤§é‡æ–‡æœ¬çš„å­˜å‚¨è¿˜å¯ä»¥ä½¿ç”¨TEXTæ–‡æœ¬ã€‚</p><h4 id="6-2ã€åˆ›å»ºè¡¨"><a href="#6-2ã€åˆ›å»ºè¡¨" class="headerlink" title="6.2ã€åˆ›å»ºè¡¨"></a>6.2ã€åˆ›å»ºè¡¨</h4><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs scss">create <span class="hljs-selector-tag">table</span> è¡¨å(<br>åˆ—å<span class="hljs-number">1</span> ç±»å‹(é•¿åº¦) <span class="hljs-selector-attr">[çº¦æŸ]</span>,<br>åˆ—å2 ç±»å‹(é•¿åº¦) <span class="hljs-selector-attr">[çº¦æŸ]</span>,<br>â€¦â€¦<br>);<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨SQLè¯­å¥åˆ›å»ºè¡¨ï¼Œéœ€è¦æŒ‡å®šè¡¨åï¼Œè¡¨ä¸­å­—æ®µåå’Œå„å­—æ®µçš„ç±»å‹ï¼Œçº¦æŸé€‰é¡¹æ˜¯å¯é€‰çš„ï¼Œå¤šä¸ªå­—æ®µä¸­é—´ç”¨é€—å·â€™,â€™åˆ†å¼€ã€‚</p><p>åˆ›å»ºè¡¨æ—¶ï¼Œè¡¨åå­—æ®µåå°½é‡ä½¿ç”¨è‹±æ–‡ï¼Œæœ€å¿Œè®³è‹±æ±‰åˆæ‹¼ã€‚</p><h5 id="6-2-1ã€æ•°æ®åº“å­—æ®µç±»å‹çš„é•¿åº¦åŒºåˆ«"><a href="#6-2-1ã€æ•°æ®åº“å­—æ®µç±»å‹çš„é•¿åº¦åŒºåˆ«" class="headerlink" title="6.2.1ã€æ•°æ®åº“å­—æ®µç±»å‹çš„é•¿åº¦åŒºåˆ«"></a>6.2.1ã€æ•°æ®åº“å­—æ®µç±»å‹çš„é•¿åº¦åŒºåˆ«</h5><p>intç±»å‹å¸¦é•¿åº¦ï¼Œå¦‚int(5)ï¼šä¸å½±å“å­˜å–å€¼ï¼Œå³ä½¿è®¾å®šçš„å€¼è¶…å‡ºäº†é•¿åº¦çš„èŒƒç•´ï¼Œä¹Ÿèƒ½å­˜ï¼Œå¦‚æœæ²¡æœ‰è¾¾åˆ°è®¾å®šçš„é•¿åº¦ï¼Œåˆ™ä½¿ç”¨ç©ºæ ¼è‡ªåŠ¨å¡«å……åˆ°è®¾å®šçš„é•¿åº¦ï¼›</p><p>charç±»å‹ï¼Œå¦‚char(5)ï¼šä¸å¯å˜å­—ç¬¦ï¼Œè®¾å®šçš„é•¿åº¦å°±æ˜¯è§„å®šå½“å‰å­—æ®µèƒ½å­˜çš„æ•°æ®çš„æœ€å¤§é•¿åº¦ï¼Œè‹¥è¶…å‡ºé•¿åº¦ï¼Œåˆ™ä¼šæŠ¥é”™ï¼Œè‹¥æ²¡æœ‰è¾¾åˆ°é•¿åº¦ï¼Œä½¿ç”¨ç©ºæ ¼å¡«å……åˆ°è®¾å®šçš„é•¿åº¦ï¼›</p><p>varcharï¼Œå¦‚varchar(10)ï¼šå¯å˜å­—ç¬¦ï¼Œè®¾å®šçš„é•¿åº¦åŒæ ·æ˜¯è§„å®šå½“å‰å­—æ®µèƒ½å­˜çš„æ•°æ®çš„æœ€å¤§é•¿åº¦ï¼Œè‹¥è¶…å‡ºé•¿åº¦ï¼Œåˆ™ä¼šæŠ¥é”™ï¼Œè‹¥æ²¡æœ‰è¾¾åˆ°é•¿åº¦ï¼Œä¸ä¼šä½¿ç”¨ç©ºæ ¼å¡«å……ï¼Œå®é™…å¤šé•¿å°±æ˜¯å¤šé•¿ã€‚</p><h5 id="6-2-2ã€çº¦æŸ"><a href="#6-2-2ã€çº¦æŸ" class="headerlink" title="6.2.2ã€çº¦æŸ"></a>6.2.2ã€çº¦æŸ</h5><p>çº¦æŸå°±æ˜¯ç»™è¡¨ä¸­çš„æ•°æ®è§„å®šå–å€¼çš„è§„å®šï¼Œæ¯”å¦‚èƒ½å¦ä¸ºç©ºï¼Œèƒ½å¦é‡å¤å–å€¼ç­‰</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql">å­—æ®µå  ç±»å‹(é•¿åº¦) <span class="hljs-keyword">Not</span> <span class="hljs-keyword">Null</span>,<br>å­—æ®µå  ç±»å‹(é•¿åº¦) <span class="hljs-keyword">unique</span>,<br></code></pre></td></tr></table></figure><p>Nullå€¼åœ¨è¢«uniqueçº¦æŸçš„å­—æ®µä¸­æ˜¯å¦å¯ä»¥å­˜åœ¨å¤šä¸ªï¼Œæ˜¯å› æ•°æ®åº“ç±»å‹è€Œå¼‚çš„ã€‚Nullå€¼æ˜¯å¯ä»¥æ’å…¥å¤šæ¬¡çš„</p><h5 id="6-2-3ã€é»˜è®¤å€¼"><a href="#6-2-3ã€é»˜è®¤å€¼" class="headerlink" title="6.2.3ã€é»˜è®¤å€¼"></a>6.2.3ã€é»˜è®¤å€¼</h5><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs scss">å­—æ®µå  ç±»å‹(é•¿åº¦) default é»˜è®¤å€¼,<br></code></pre></td></tr></table></figure><h5 id="6-2-4ã€ä¸»é”®çº¦æŸ"><a href="#6-2-4ã€ä¸»é”®çº¦æŸ" class="headerlink" title="6.2.4ã€ä¸»é”®çº¦æŸ"></a>6.2.4ã€ä¸»é”®çº¦æŸ</h5><figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sas">å­—æ®µå  ç±»å‹(é•¿åº¦) <span class="hljs-meta">primary</span> <span class="hljs-meta">key</span>,<br></code></pre></td></tr></table></figure><p>ä¸»é”®çº¦æŸå°±æ˜¯å”¯ä¸€å¹¶ä¸”éç©ºï¼Œå…³é”®å­—primary key</p><p><strong>ä¸»é”®çº¦æŸçš„åˆ†ç±»ï¼š</strong></p><ol><li>ä¸»é”®çš„è®¾è®¡ä¸€èˆ¬æ¥è¯´æ˜¯é€‰å–æŸä¸€åˆ—ä½œä¸ºä¸»é”®ï¼ˆæ¨èåšæ³•ï¼‰</li><li>é€‰å–å¤šåˆ—ä½œä¸ºä¸»é”®ç§°ä¹‹ä¸ºå¤åˆä¸»é”®ï¼ˆä¸æ¨èçš„åšæ³•ï¼‰</li><li>è‡ªç„¶ä¸»é”®ï¼šä½ çš„ä¸»é”®æ˜¯æœ‰ä¸šåŠ¡æ„ä¹‰çš„ï¼Œæ¯”å¦‚ï¼šèº«ä»½è¯å·ç­‰</li><li>ä»£ç†ä¸»é”®ï¼šå®ƒæ²¡æœ‰ä»»ä½•æ„ä¹‰(æ¨èéƒ½ä½¿ç”¨ä»£ç†ä¸»é”®)</li></ol><p>ä¸ºä»€ä¹ˆæ¨èä½¿ç”¨ä¸ä¸šåŠ¡æ— å…³çš„æ•°æ®ä½œä¸ºä¸»é”®ï¼Ÿ</p><blockquote><p>åœ¨å®é™…é¡¹ç›®å½“ä¸­ï¼Œæ¨èä½¿ç”¨ä»£ç†ä¸»é”®ï¼Œå› ä¸ºå¦‚æœå’Œä¸šåŠ¡ç›¸å…³äº†ï¼Œé‚£ä¹ˆå½“æœ‰ä¸€å¤©è¦æ±‚æ•°æ®å¯ä»¥é‡å¤äº†ï¼Œé‚£ä¹ˆè¿™ä¸ªå­—æ®µå°±ä¸èƒ½å†ä½œä¸ºä¸»é”®äº†</p></blockquote><h5 id="6-2-5ã€ä¸»é”®é€’å¢"><a href="#6-2-5ã€ä¸»é”®é€’å¢" class="headerlink" title="6.2.5ã€ä¸»é”®é€’å¢"></a>6.2.5ã€ä¸»é”®é€’å¢</h5><h5 id="6-2-6ã€å¤–é”®çº¦æŸ"><a href="#6-2-6ã€å¤–é”®çº¦æŸ" class="headerlink" title="6.2.6ã€å¤–é”®çº¦æŸ"></a>6.2.6ã€å¤–é”®çº¦æŸ</h5><p>å¤–é”®æœ¬è´¨ä¸Šå°±æ˜¯é€šè¿‡ä¸€ä¸ªè¡¨çš„å­—æ®µä¸å…¶ä»–è¡¨å»ºç«‹è”ç³»ï¼Œä¿è¯æ•°æ®å®Œæ•´æ€§ï¼Œå‡è®¾æœ‰è¡¨Aå’Œè¡¨Bï¼Œè‹¥è¡¨Açš„æŸå­—æ®µxå–å€¼é™å®šä½¿ç”¨è¡¨Bçš„æŸå­—æ®µyçš„å€¼ï¼Œé‚£ä¹ˆBè¡¨yå­—æ®µæ˜¯Aè¡¨çš„å¤–é”®ã€‚</p><p>æˆ‘ä»¬å¯ä»¥åœ¨éœ€è¦çš„æ—¶å€™ï¼Œåœ¨DBMSä¸Šå»ºç«‹èµ·è¿™ä¹ˆä¸€æ¡çº¦æŸæ¥é˜²æ­¢æ•°æ®å…³è”å‡ºé”™ï¼Œä½†åœ¨çœŸå®é¡¹ç›®ä¸­ä¹Ÿå¯èƒ½ä¸ä¼šå»åˆ›å»ºï¼Œè€Œä»…ä»…æ˜¯åœ¨å£å¤´ä¸Šçº¦å®šï¼Œåªæ˜¯åœ¨ä»£ç å®ç°çš„æ—¶å€™æ³¨æ„ã€‚</p><p>åˆ›å»ºå¤–é”®çº¦æŸè¦æ±‚ä¸¤å¼ è¡¨çš„å¼•æ“ä¸ºInnoDBï¼Œå¦åˆ™æ— æ³•æˆåŠŸï¼Œå› ä¸ºåœ¨MySQLä¸­ï¼ŒInnoDBæ”¯æŒäº‹åŠ¡å’Œå¤–é”®ï¼Œè€ŒMyISAM ä¸æ”¯æŒäº‹åŠ¡å’Œå¤–é”®ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> è¡¨å ENGINE<span class="hljs-operator">=</span><span class="hljs-string">&#x27;InnoDB&#x27;</span>;   <span class="hljs-operator">/</span><span class="hljs-operator">/</span>ä¿®æ”¹å¼•æ“<br><br><span class="hljs-operator">/</span><span class="hljs-operator">/</span>å·²æœ‰è¡¨åŸºç¡€ä¸Š<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> è¡¨å<br><span class="hljs-keyword">ADD</span> CONSTRAIN å¤–é”®å <span class="hljs-keyword">FOREIGN</span> KEY (ä¸»è¡¨å­—æ®µ) <span class="hljs-keyword">REFERENCES</span> ä»è¡¨(ä»è¡¨ä¸»é”®);<br><br><span class="hljs-operator">/</span><span class="hljs-operator">/</span>æ–°å»ºè¡¨æ—¶ç»™å‡º<br><span class="hljs-keyword">FOREIGN</span> KEY ä¸»è¡¨(ä¸»è¡¨å­—æ®µ) <span class="hljs-keyword">REFERENCES</span> ä»è¡¨(ä»è¡¨ä¸»é”®);<br></code></pre></td></tr></table></figure><h4 id="6-3ã€æŸ¥çœ‹è¡¨"><a href="#6-3ã€æŸ¥çœ‹è¡¨" class="headerlink" title="6.3ã€æŸ¥çœ‹è¡¨"></a>6.3ã€æŸ¥çœ‹è¡¨</h4><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">desc è¡¨å<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><p><img src="/2019/11/16/MySQL/desc.png"></p><h4 id="6-4ã€ä¿®æ”¹è¡¨ç»“æ„"><a href="#6-4ã€ä¿®æ”¹è¡¨ç»“æ„" class="headerlink" title="6.4ã€ä¿®æ”¹è¡¨ç»“æ„"></a>6.4ã€ä¿®æ”¹è¡¨ç»“æ„</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> è¡¨å;#æ›´æ”¹åŸæœ‰è¡¨ç»“æ„<br><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> è¡¨å change åˆ—å æ–°åˆ—å ç±»å‹;<br><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> è¡¨å change åˆ—å åˆ—å æ–°ç±»å‹;<br><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> è¡¨å modify åˆ—å æ–°ç±»å‹;#å’Œç¬¬ä¸‰æ¡ä½œç”¨ä¸€è‡´<br></code></pre></td></tr></table></figure><p>ä¿®æ”¹æ“ä½œåœ¨æ­£å¼çš„å¼€å‘è¿‡ç¨‹ä¸­æå°‘çš„ä½¿ç”¨ï¼Œå› ä¸ºå¼€å‘ä¹‹å‰ç›¸å…³è¡¨çš„åˆ›å»ºå°±åº”å½“å·²ç»ç¡®å®šã€‚è‹¥å¼€å‘ä¸­é€”å‡ºç°é’ˆå¯¹è¡¨å­—æ®µç­‰çš„ä¿®æ”¹ï¼Œå¯èƒ½ä¼šå½±å“åˆ°æ•´ä¸ªç ”å‘çš„æµç¨‹ã€‚</p><h4 id="6-5ã€åˆ é™¤è¡¨"><a href="#6-5ã€åˆ é™¤è¡¨" class="headerlink" title="6.5ã€åˆ é™¤è¡¨"></a>6.5ã€åˆ é™¤è¡¨</h4><p>å›é¡¾5.6å†…å®¹</p><figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pf"><span class="hljs-keyword">drop</span> <span class="hljs-built_in">table</span> è¡¨å;<br></code></pre></td></tr></table></figure><h4 id="6-6ã€æ•°æ®æŸ¥è¯¢-å•è¡¨æŸ¥è¯¢"><a href="#6-6ã€æ•°æ®æŸ¥è¯¢-å•è¡¨æŸ¥è¯¢" class="headerlink" title="6.6ã€æ•°æ®æŸ¥è¯¢-å•è¡¨æŸ¥è¯¢"></a>6.6ã€æ•°æ®æŸ¥è¯¢-å•è¡¨æŸ¥è¯¢</h4><p><a href="MySQL/product.sql">productè¡¨ä¸‹è½½</a></p><p>productè¡¨ï¼Œå¦‚ä¸‹ï¼š</p><table><thead><tr><th>åˆ—å</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>id</td><td>ä¸»é”®</td></tr><tr><td>product_name</td><td>äº§å“åç§°</td></tr><tr><td>category_id</td><td>åˆ†ç±»ç¼–ç </td></tr><tr><td>sale_price</td><td>é›¶å”®ä»·</td></tr><tr><td>supplier</td><td>ä¾›åº”å•†</td></tr><tr><td>brand</td><td>å“ç‰Œ</td></tr><tr><td>cutoff</td><td>æŠ˜æ‰£</td></tr><tr><td>cost_price</td><td>æˆæœ¬ä»·</td></tr></tbody></table><h5 id="6-6-1ã€SELECT-â€¦-FROM-â€¦"><a href="#6-6-1ã€SELECT-â€¦-FROM-â€¦" class="headerlink" title="6.6.1ã€SELECT â€¦ FROM â€¦"></a>6.6.1ã€SELECT â€¦ FROM â€¦</h5><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> è¡¨å;          <span class="hljs-comment">//ä»£è¡¨æŸ¥è¯¢è¡¨ä¸­å…¨éƒ¨ä¿¡æ¯</span><br><span class="hljs-keyword">select</span> å­—æ®µ<span class="hljs-number">1</span>,å­—æ®µ<span class="hljs-number">2</span> <span class="hljs-keyword">from</span> è¡¨å;   <span class="hljs-comment">//ä»£è¡¨æŸ¥è¯¢è¡¨ä¸­æŒ‡å®šåˆ—çš„ä¿¡æ¯</span><br></code></pre></td></tr></table></figure><p>SQLè¯­å¥ä¸­ä½¿ç”¨selectå…³é”®å­—è¡¨ç¤ºé€‰æ‹©æŸ¥è¯¢åˆ—è¡¨ï¼Œè€Œfromåç´§è·Ÿè¦æŸ¥è¯¢çš„æ•°æ®æºï¼Œ<code>*</code> æŸ¥è¯¢å‡ºåˆ—æ˜¾ç¤ºçš„æ•°æ®å’Œå»ºè¡¨æ—¶çš„åˆ—çš„æ•°æ®ä¸€è‡´ã€‚<code>MYSQLè¯­å¥çš„æ‰§è¡Œé¡ºåºæ˜¯ï¼šå…ˆfromè¡¨ï¼Œåœ¨selectã€‚</code></p><blockquote><p>æŸ¥è¯¢æ‰€æœ‰è´§å“ä¿¡æ¯ï¼š<code>Select * from product</code></p><p>æŸ¥è¯¢è´§å“idï¼Œåç§°ï¼š<code>Select id from product</code></p><p>æŸ¥è¯¢ä¾›åº”å•†ä¿¡æ¯ï¼š<code>Select supplier from product</code></p></blockquote><h5 id="6-6-2ã€DISTINCT-æ•°æ®å»é‡"><a href="#6-6-2ã€DISTINCT-æ•°æ®å»é‡" class="headerlink" title="6.6.2ã€DISTINCT-æ•°æ®å»é‡"></a>6.6.2ã€DISTINCT-æ•°æ®å»é‡</h5><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">select</span> <span class="hljs-keyword">distinct</span> åˆ—,... <span class="hljs-keyword">from</span> è¡¨å;<br></code></pre></td></tr></table></figure><blockquote><p>æŸ¥è¯¢ä¾›åº”å•†ä¿¡æ¯ï¼Œå»æ‰é‡å¤æ•°æ®ï¼š<code>Select distinct supplier from product</code></p></blockquote><h5 id="6-6-3ã€CONCAT-å‡½æ•°-æ‹¼æ¥ç»“æœ"><a href="#6-6-3ã€CONCAT-å‡½æ•°-æ‹¼æ¥ç»“æœ" class="headerlink" title="6.6.3ã€CONCAT()å‡½æ•°-æ‹¼æ¥ç»“æœ"></a>6.6.3ã€CONCAT()å‡½æ•°-æ‹¼æ¥ç»“æœ</h5><p>å°†ä¸åŒçš„åˆ—æ‹¼æˆä¸€åˆ—æ˜¾ç¤º</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">select</span> <span class="hljs-title">concat</span>(<span class="hljs-params">åˆ—<span class="hljs-number">1</span>,åˆ—<span class="hljs-number">2</span>,.....</span>) <span class="hljs-keyword">from</span> è¡¨å</span>;<br></code></pre></td></tr></table></figure><blockquote><p>æŸ¥è¯¢ç»“æœä¸ºï¼šxxxå•†å“çš„é›¶å”®ä»·ä¸ºï¼šxxx</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">select</span> <span class="hljs-title">concat</span>(<span class="hljs-params">product_name,<span class="hljs-string">&quot;å•†å“çš„é›¶å”®ä»·ä¸ºï¼š&quot;</span>,sale_price</span>) <span class="hljs-keyword">from</span> product</span>;<br></code></pre></td></tr></table></figure><p><img src="/2019/11/16/MySQL/concat&as.png" alt="1"></p></blockquote><h5 id="6-6-4ã€æ•°æ®æŸ¥è¯¢çš„æ•°å­¦è¿ç®—"><a href="#6-6-4ã€æ•°æ®æŸ¥è¯¢çš„æ•°å­¦è¿ç®—" class="headerlink" title="6.6.4ã€æ•°æ®æŸ¥è¯¢çš„æ•°å­¦è¿ç®—"></a>6.6.4ã€æ•°æ®æŸ¥è¯¢çš„æ•°å­¦è¿ç®—</h5><ul><li><p>å¯¹NUMBERç±»å‹æ•°æ®å¯ä»¥ä½¿ç”¨ç®—æ•°æ“ä½œç¬¦åˆ›å»ºè¡¨è¾¾å¼ï¼ˆ+-*/ï¼‰</p></li><li><p>å¯¹DATEæ•°æ®ç±»å‹ä½¿ç”¨éƒ¨åˆ†ç®—æ•°æ“ä½œç¬¦åˆ›å»ºè¡¨è¾¾å¼ï¼ˆ+ -ï¼‰</p></li></ul><ul><li>è¿ç®—ä¼˜å…ˆçº§ï¼šåŒå››åˆ™è¿ç®—</li></ul><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">select</span> åˆ—<span class="hljs-number">1</span>[+-*/]åˆ—<span class="hljs-number">2</span> from è¡¨å;<br></code></pre></td></tr></table></figure><blockquote><p>æŸ¥è¯¢æ‰€æœ‰è´§å“çš„idï¼Œåç§°å’Œæ‰¹å‘ä»·(æ‰¹å‘ä»·=å–ä»·*æŠ˜æ‰£)</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript">select <span class="hljs-built_in">id</span>,product_name,sale_price*cutoff <span class="hljs-keyword">from</span> product;<br></code></pre></td></tr></table></figure><p>æŸ¥è¯¢æ‰€æœ‰è´§å“çš„idï¼Œåç§°ï¼Œå’Œå„è¿›50ä¸ªçš„æˆæœ¬ä»·(æˆæœ¬=costPirce)</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript">select <span class="hljs-built_in">id</span>,product_name,<span class="hljs-number">50</span>*cost_price <span class="hljs-keyword">from</span> product;<br></code></pre></td></tr></table></figure><p>æŸ¥è¯¢æ‰€æœ‰è´§å“çš„idï¼Œåç§°ï¼Œå„è¿›50ä¸ªï¼Œå¹¶ä¸”æ¯ä¸ªè¿è´¹1å…ƒçš„æˆæœ¬</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">select</span> id,product_name,<span class="hljs-number">50</span>*cost_price+<span class="hljs-number">1</span> from product;<br></code></pre></td></tr></table></figure></blockquote><h5 id="6-6-5ã€å®šä¹‰å­—æ®µåˆ«å"><a href="#6-6-5ã€å®šä¹‰å­—æ®µåˆ«å" class="headerlink" title="6.6.5ã€å®šä¹‰å­—æ®µåˆ«å"></a>6.6.5ã€å®šä¹‰å­—æ®µåˆ«å</h5><p>åˆ«åæ˜¯ç”¨äºæ”¹å˜æœ€ç»ˆæŸ¥è¯¢æ˜¾ç¤ºçš„åˆ—åï¼Œå¯ä»¥ç»™ä»»æ„åˆ—è®¾å®š</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> åˆ— <span class="hljs-keyword">as</span> åˆ«å <span class="hljs-keyword">from</span> è¡¨å;  <span class="hljs-comment">//ä½¿ç”¨aså…³é”®å­—</span><br><span class="hljs-keyword">select</span> åˆ— åˆ«å <span class="hljs-keyword">from</span> è¡¨å;    <span class="hljs-comment">//çœç•¥ASå…³é”®å­—</span><br></code></pre></td></tr></table></figure><p>åˆ«åçš„å®šä¹‰å¾ˆç®€å•ï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯ä½¿ç”¨ASå…³é”®å­—ï¼Œä¸€ç§æ˜¯çœç•¥ASå…³é”®å­—</p><p>åˆšåˆšè¿›è¡Œçš„æ•°å­¦è¿ç®—çš„éœ€æ±‚ä¸­åŠ ä¸Šåˆ«å</p><h5 id><a href="#" class="headerlink" title></a><img src="/2019/11/16/MySQL/concat&as.png"></h5><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs clean">#select concat(<span class="hljs-string">&quot;å§“åï¼š&quot;</span>,first_name,last_name) <span class="hljs-string">&quot;ä¿¡æ¯&quot;</span> <span class="hljs-keyword">from</span> actor;<br>#OKï¼ŒæŸ¥è¯¢ç»“æœè¡¨å¤´æ˜¯ï¼šä¿¡æ¯<br><br>#select concat(<span class="hljs-string">&quot;å§“åï¼š&quot;</span>,first_name,last_name) ä¿¡æ¯ <span class="hljs-keyword">from</span> actor;<br>#OKï¼ŒæŸ¥è¯¢ç»“æœè¡¨å¤´æ˜¯ï¼šä¿¡æ¯<br><br>#select concat(<span class="hljs-string">&quot;å§“åï¼š&quot;</span>,first_name,last_name) information <span class="hljs-keyword">from</span> actor;<br>#OKï¼ŒæŸ¥è¯¢ç»“æœè¡¨å¤´æ˜¯ï¼šinformation<br><br>#select concat(information,first_name,last_name) <span class="hljs-string">&quot;ä¿¡æ¯&quot;</span> <span class="hljs-keyword">from</span> actor;<br>#ERROR:&gt; <span class="hljs-number">1054</span> - Unknown column <span class="hljs-string">&#x27;information&#x27;</span> <span class="hljs-keyword">in</span> <span class="hljs-string">&#x27;field list&#x27;</span><br><br>#select concat(<span class="hljs-string">&quot;å§“åï¼š&quot;</span>,<span class="hljs-string">&#x27;first_name&#x27;</span>,last_name) information <span class="hljs-keyword">from</span> actor;<br>#OKï¼ŒæŸ¥è¯¢ç»“æœè¡¨å¤´æ˜¯ï¼šinformation æ•°æ®å†…å®¹æ˜¯ï¼šå§“åï¼šfirst_nameAKROYD<br></code></pre></td></tr></table></figure><h5 id="6-6-6ã€å¸¦æ¡ä»¶çš„æŸ¥è¯¢"><a href="#6-6-6ã€å¸¦æ¡ä»¶çš„æŸ¥è¯¢" class="headerlink" title="6.6.6ã€å¸¦æ¡ä»¶çš„æŸ¥è¯¢"></a>6.6.6ã€å¸¦æ¡ä»¶çš„æŸ¥è¯¢</h5><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> åˆ—â€¦ <span class="hljs-keyword">from</span> è¡¨å <span class="hljs-keyword">where</span> æ¡ä»¶;  <span class="hljs-comment">//ä½¿ç”¨whereå…³é”®å­—</span><br></code></pre></td></tr></table></figure><p>SQLè¯­å¥ä¸­æ¡ä»¶åˆ†ç±»æœ‰è®¸å¤šç§ï¼Œä¸åŒçš„æ¡ä»¶å†™æ³•ä¹Ÿå¯èƒ½è¾¾åˆ°ç›¸åŒçš„æ•ˆæœã€‚</p><h6 id="æ¯”è¾ƒè¿ç®—"><a href="#æ¯”è¾ƒè¿ç®—" class="headerlink" title="æ¯”è¾ƒè¿ç®—"></a>æ¯”è¾ƒè¿ç®—</h6><table><thead><tr><th>æ¯”è¾ƒè¿ç®—ç¬¦</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>=</td><td>ç­‰äº</td></tr><tr><td>&gt;</td><td>å¤§äº</td></tr><tr><td>&gt;=</td><td>å¤§äºç­‰äº</td></tr><tr><td>&lt;</td><td>å°äº</td></tr><tr><td>&lt;=</td><td>å°äºç­‰äº</td></tr><tr><td>!=(&lt;&gt;)</td><td>ä¸ç­‰äº</td></tr></tbody></table><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">Where åˆ—  æ¯”è¾ƒè¿ç®—ç¬¦  å€¼<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><p>å­—ç¬¦ä¸²ã€æ—¥æœŸéœ€ä½¿ç”¨<code>å•å¼•å·æ‹¬èµ·æ¥</code></p><p><code>æ‰§è¡Œé¡ºåºï¼šfromâ€”&gt;whereâ€”&gt;select</code></p><p><strong>åˆ«åæ˜¯å¦å¯ç”¨äºwhereæ¡ä»¶ï¼Ÿ</strong></p><blockquote><p>æŸ¥è¯¢è´§å“é›¶å”®ä»·ä¸º119çš„æ‰€æœ‰è´§å“ä¿¡æ¯</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> product <span class="hljs-keyword">where</span> sale_price=<span class="hljs-number">119</span>;<br></code></pre></td></tr></table></figure><p>æŸ¥è¯¢è´§å“åä¸ºç½—æŠ€G9Xçš„æ‰€æœ‰è´§å“ä¿¡æ¯</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> product <span class="hljs-keyword">where</span> product_name=<span class="hljs-string">&#x27;ç½—æŠ€G9X&#x27;</span>;<br></code></pre></td></tr></table></figure><p>æŸ¥è¯¢è´§å“åä¸ä¸ºç½—æŠ€G9Xçš„æ‰€æœ‰è´§å“ä¿¡æ¯</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> product <span class="hljs-keyword">where</span> product_name!=<span class="hljs-string">&#x27;ç½—æŠ€G9X&#x27;</span>;<br></code></pre></td></tr></table></figure><p>æŸ¥è¯¢åˆ†ç±»ç¼–å·ä¸ç­‰äº2çš„è´§å“ä¿¡æ¯</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> product <span class="hljs-keyword">where</span> category_id!=<span class="hljs-number">2</span>;<br></code></pre></td></tr></table></figure><p>æŸ¥è¯¢è´§å“åç§°,é›¶å”®ä»·å°äºç­‰äº200çš„è´§å“</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> product_name <span class="hljs-keyword">from</span> product <span class="hljs-keyword">where</span> sale_price&lt;=<span class="hljs-number">200</span>;<br></code></pre></td></tr></table></figure><p>æŸ¥è¯¢idï¼Œè´§å“åç§°ï¼Œæ‰¹å‘ä»·ï¼ˆsalePrice*cutoffï¼‰å¤§äº350çš„è´§å“</p><figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sas"><span class="hljs-meta">select</span> id,product_name <span class="hljs-meta">from</span> product <span class="hljs-meta">where</span> sale_price<span class="hljs-comment">*cutoff&gt;=350;</span><br></code></pre></td></tr></table></figure></blockquote><h6 id="é€»è¾‘è¿ç®—"><a href="#é€»è¾‘è¿ç®—" class="headerlink" title="é€»è¾‘è¿ç®—"></a>é€»è¾‘è¿ç®—</h6><p>æ¯”è¾ƒè¿ç®—ç¬¦çš„æ—¶å€™ï¼Œæˆ‘ä»¬åŸºæœ¬ä¸Šåªå¸¦äº†ä¸€ä¸ªæ¡ä»¶è¿›è¡ŒæŸ¥è¯¢ï¼Œé‚£ä¹ˆå½“é‡åˆ°å¤šä¸ªæ¡ä»¶çš„æ—¶å€™ï¼Œæˆ‘ä»¬åº”å½“æ€ä¹ˆåŠå‘¢ï¼Ÿ</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">Where æ¡ä»¶<span class="hljs-number">1</span>  é€»è¾‘è¿ç®—ç¬¦  æ¡ä»¶<span class="hljs-number">2</span>;   <span class="hljs-regexp">//</span>and  or<br>Where not æ¡ä»¶;  <span class="hljs-regexp">//</span>notçš„ä½¿ç”¨<br></code></pre></td></tr></table></figure><table><thead><tr><th>é€»è¾‘è¿ç®—ç¬¦</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>AND(&amp;, &amp;&amp;)</td><td>å¦‚æœç»„åˆçš„æ¡ä»¶éƒ½æ˜¯trueï¼Œè¿”å›true</td></tr><tr><td>OR(|, ||)</td><td>å¦‚æœç»„åˆçš„æ¡ä»¶ä¹‹ä¸€æ˜¯trueï¼Œè¿”å›true</td></tr><tr><td>NOT(!)</td><td>å¦‚æœæ¡ä»¶falseï¼Œè¿”å›true</td></tr></tbody></table><blockquote><p>é€‰æ‹©idï¼Œè´§å“åç§°ï¼Œæ‰¹å‘ä»·(saleprice*cutoff)åœ¨300-400ä¹‹é—´çš„è´§å“</p><figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sas"><span class="hljs-meta">select</span> id,product_name <span class="hljs-meta">from</span> product <span class="hljs-meta">where</span> sale_price<span class="hljs-comment">*cutoff&gt;=300 and sale_price*cutoff&lt;=400;</span><br></code></pre></td></tr></table></figure><p>é€‰æ‹©idï¼Œè´§å“åç§°ï¼Œåˆ†ç±»ç¼–å·ä¸º2,4çš„æ‰€æœ‰è´§å“</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript">select <span class="hljs-built_in">id</span>,product_name <span class="hljs-keyword">from</span> product <span class="hljs-keyword">where</span> category_id = <span class="hljs-number">2</span> <span class="hljs-keyword">or</span> category_id=<span class="hljs-number">4</span>;<br></code></pre></td></tr></table></figure><p>é€‰æ‹©idï¼Œè´§å“åç§°ï¼Œåˆ†ç±»ç¼–å·çš„è´§å“ï¼Œé›¶å”®ä»·(saleprice)å¤§äºç­‰äº250æˆ–è€…æ˜¯æˆæœ¬(costprice)å¤§äºç­‰äº200</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript">select <span class="hljs-built_in">id</span>,product_name,category_id <span class="hljs-keyword">from</span> product <span class="hljs-keyword">where</span> sale_price &gt;= <span class="hljs-number">250</span> <span class="hljs-keyword">or</span> cost_price &gt;= <span class="hljs-number">200</span>;<br></code></pre></td></tr></table></figure></blockquote><h6 id="èŒƒå›´æŸ¥è¯¢"><a href="#èŒƒå›´æŸ¥è¯¢" class="headerlink" title="èŒƒå›´æŸ¥è¯¢"></a>èŒƒå›´æŸ¥è¯¢</h6><p><strong>1ã€BETWEENâ€¦ANDâ€¦</strong></p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">Where åˆ— <span class="hljs-keyword">between </span>æ¡ä»¶<span class="hljs-number">1</span>  <span class="hljs-keyword">and </span>æ¡ä»¶<span class="hljs-number">2</span><span class="hljs-comment">;     //åˆ—åœ¨è¿™ä¸ªåŒºé—´çš„å€¼ï¼Œå³[m, n]</span><br>Where åˆ— not <span class="hljs-keyword">between </span>æ¡ä»¶<span class="hljs-number">1</span> <span class="hljs-keyword">and </span>æ¡ä»¶<span class="hljs-number">2</span><span class="hljs-comment">;  //ä¸åœ¨è¿™ä¸ªåŒºé—´ï¼Œå³(-âˆ, m)U(n, +âˆ)</span><br>Where !( åˆ— <span class="hljs-keyword">between </span>æ¡ä»¶<span class="hljs-number">1</span> <span class="hljs-keyword">and </span>æ¡ä»¶<span class="hljs-number">2</span> )<span class="hljs-comment">; //åŒæ ·è¡¨ç¤ºä¸åœ¨è¿™ä¸ªåŒºé—´</span><br></code></pre></td></tr></table></figure><blockquote><p>é€‰æ‹©idï¼Œè´§å“åç§°ï¼Œæ‰¹å‘ä»·åœ¨300-400ä¹‹é—´çš„è´§å“</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">select</span> product_name <span class="hljs-keyword">from</span> product <span class="hljs-keyword">where</span> cost_price <span class="hljs-keyword">between</span> <span class="hljs-number">300</span> <span class="hljs-keyword">and</span> <span class="hljs-number">400</span>;<br></code></pre></td></tr></table></figure><p>é€‰æ‹©idï¼Œè´§å“åç§°ï¼Œæ‰¹å‘ä»·ä¸åœ¨300-400ä¹‹é—´çš„è´§å“</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">select</span> product_name <span class="hljs-keyword">from</span> product <span class="hljs-keyword">where</span> !(cost_price <span class="hljs-keyword">between</span> <span class="hljs-number">300</span> <span class="hljs-keyword">and</span> <span class="hljs-number">400</span>);<br><span class="hljs-keyword">select</span> product_name <span class="hljs-keyword">from</span> product <span class="hljs-keyword">where</span> cost_price <span class="hljs-keyword">not</span> <span class="hljs-keyword">between</span> <span class="hljs-number">300</span> <span class="hljs-keyword">and</span> <span class="hljs-number">400</span>;<br></code></pre></td></tr></table></figure><p><strong>2ã€IN-é›†åˆæŸ¥è¯¢</strong></p></blockquote><p>ä½¿ç”¨INè¿ç®—ç¬¦ï¼Œåˆ¤æ–­åˆ—çš„å€¼æ˜¯å¦åœ¨æŒ‡å®šçš„é›†åˆä¸­</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Where</span> åˆ— in(å€¼<span class="hljs-number">1</span>,å€¼<span class="hljs-number">2</span>);       //åˆ—ä¸­çš„æ•°æ®æ˜¯inåçš„å€¼é‡Œé¢çš„<br><span class="hljs-attribute">Where</span> åˆ— not in(å€¼<span class="hljs-number">1</span>,å€¼<span class="hljs-number">2</span>);  //ä¸æ˜¯inä¸­æŒ‡å®šå€¼çš„æ•°æ®<br></code></pre></td></tr></table></figure><blockquote><p>é€‰æ‹©idï¼Œè´§å“åç§°å’Œåˆ†ç±»ç¼–å·ï¼Œåˆ†ç±»ç¼–å·ä¸º2,4çš„æ‰€æœ‰è´§å“</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">select</span> id,product_name,<span class="hljs-function">category_id <span class="hljs-keyword">from</span> product <span class="hljs-keyword">where</span> category_id <span class="hljs-title">in</span> (<span class="hljs-params"><span class="hljs-number">2</span>,<span class="hljs-number">4</span></span>)</span>;<br></code></pre></td></tr></table></figure><p>é€‰æ‹©idï¼Œè´§å“åç§°ï¼Œåˆ†ç±»ç¼–å·ä¸ä¸º2,4çš„æ‰€æœ‰è´§å“</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">select</span> id,product_name,<span class="hljs-function">category_id <span class="hljs-keyword">from</span> product <span class="hljs-keyword">where</span> category_id <span class="hljs-keyword">not</span> <span class="hljs-title">in</span> (<span class="hljs-params"><span class="hljs-number">2</span>,<span class="hljs-number">4</span></span>)</span>;<br></code></pre></td></tr></table></figure><p>äº‹å®ä¸Šè¦å®ç°èŒƒå›´æŸ¥è¯¢ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å°†æ¯”è¾ƒè¿ç®—ç¬¦å’Œé€»è¾‘è¿ç®—ç¬¦ç»“åˆèµ·æ¥ä½¿ç”¨</p></blockquote><h6 id="NULLå€¼çš„æŸ¥è¯¢"><a href="#NULLå€¼çš„æŸ¥è¯¢" class="headerlink" title="NULLå€¼çš„æŸ¥è¯¢"></a>NULLå€¼çš„æŸ¥è¯¢</h6><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">where</span> åˆ— <span class="hljs-keyword">is</span> <span class="hljs-literal">null</span>;<span class="hljs-comment">//æŸ¥è¯¢åˆ—ä¸­å€¼ä¸ºnullçš„æ•°æ®</span><br><span class="hljs-keyword">where</span> åˆ— <span class="hljs-keyword">is</span> not <span class="hljs-literal">null</span>;<br></code></pre></td></tr></table></figure><p>æ³¨æ„ï¼š<strong>åˆ—ä¸­å€¼ä¸ºnullä¸èƒ½ä½¿ç”¨=å»æŸ¥è¯¢</strong></p><blockquote><p>æŸ¥è¯¢å•†å“åä¸ºnullçš„æ‰€æœ‰å•†å“ä¿¡æ¯</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> product <span class="hljs-keyword">where</span> product_name <span class="hljs-keyword">is</span> <span class="hljs-literal">null</span>;<br></code></pre></td></tr></table></figure></blockquote><h6 id="æ¨¡ç³ŠåŒ¹é…æŸ¥è¯¢"><a href="#æ¨¡ç³ŠåŒ¹é…æŸ¥è¯¢" class="headerlink" title="æ¨¡ç³ŠåŒ¹é…æŸ¥è¯¢"></a>æ¨¡ç³ŠåŒ¹é…æŸ¥è¯¢</h6><p>å½“éœ€è¦æŸ¥è¯¢çš„æ•°æ®ä¸å¤ªç¡®å®šçš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨æ¨¡ç³ŠæŸ¥è¯¢ï¼Œä¾‹å¦‚ï¼šæŸ¥è¯¢å§“å¼ çš„å­¦å‘˜ï¼Œå¹¶æ²¡æœ‰æ˜ç¡®æŒ‡å®šæŸä¸€ä¸ªå­¦å‘˜</p><p>æ¨¡ç³ŠæŸ¥è¯¢ä½¿ç”¨likeå…³é”®å­—ï¼Œæ­é…é€šé…ç¬¦%å’Œ_ä½¿ç”¨</p><p>**%**ï¼šè¡¨ç¤º0åˆ°å¤šä¸ªå­—ç¬¦ï¼Œç¤ºä¾‹ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">Where åˆ— like <span class="hljs-string">&#x27;%0&#x27;</span>;  <span class="hljs-regexp">//</span>è¡¨ç¤ºä»¥<span class="hljs-number">0</span>ç»“å°¾<br>Where åˆ— like <span class="hljs-string">&#x27;0%&#x27;</span>;  <span class="hljs-regexp">//</span>è¡¨ç¤ºä»¥<span class="hljs-number">0</span>å¼€å¤´<br>Where åˆ— like <span class="hljs-string">&#x27;%0%&#x27;</span>;  <span class="hljs-regexp">//</span>è¡¨ç¤ºæ•°æ®ä¸­åŒ…å«<span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><p><strong>_</strong>ï¼šè¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œå¯å¤šæ¬¡ä½¿ç”¨ï¼Œç¤ºä¾‹ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">Where åˆ— like <span class="hljs-string">&#x27;%0_&#x27;</span>;  <span class="hljs-regexp">//</span>æ•°æ®ç»“å°¾ç¬¬äºŒä½æ˜¯<span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><blockquote><p>æŸ¥è¯¢idï¼Œè´§å“åç§°ï¼Œè´§å“åç§°åŒ¹é…â€™%ç½—æŠ€M9_â€™</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> id,product_name <span class="hljs-keyword">from</span> product <span class="hljs-keyword">where</span> product_name <span class="hljs-keyword">like</span> <span class="hljs-string">&#x27;%ç½—æŠ€M9_&#x27;</span>;<br></code></pre></td></tr></table></figure><p>æŸ¥è¯¢idï¼Œè´§å“åç§°ï¼Œåˆ†ç±»ç¼–å·,é›¶å”®ä»·å¤§äºç­‰äº200å¹¶ä¸”è´§å“åç§°åŒ¹é…â€™%ç½—æŠ€M1__â€™</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> id,product_name,category_id <span class="hljs-keyword">from</span> product <span class="hljs-keyword">where</span> sale_price&gt;=<span class="hljs-number">80</span> and product_name <span class="hljs-keyword">like</span> <span class="hljs-string">&#x27;%ç½—æŠ€M1__&#x27;</span>;<br></code></pre></td></tr></table></figure></blockquote><h5 id="6-6-7ã€ç»“æœæ’åˆ—"><a href="#6-6-7ã€ç»“æœæ’åˆ—" class="headerlink" title="6.6.7ã€ç»“æœæ’åˆ—"></a>6.6.7ã€ç»“æœæ’åˆ—</h5><p>æ’åºå°±æ˜¯å¯¹æŸ¥è¯¢å‡ºçš„ç»“æœæŒ‰ç…§ä¸€åˆ—æˆ–å¤šåˆ—è¿›è¡Œå‡åºè¿˜æ˜¯é™åºæ’åˆ—ï¼Œä½¿ç”¨å…³é”®å­—<strong>order by</strong>ï¼Œ</p><p>é»˜è®¤æ˜¯<strong>å‡åºASC</strong>ï¼Œ<strong>é™åºDESC</strong></p><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs oxygene"><span class="hljs-keyword">Where</span> æ¡ä»¶ <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> åˆ— [<span class="hljs-keyword">asc</span>/<span class="hljs-keyword">desc</span>]<br></code></pre></td></tr></table></figure><p>æ³¨æ„ï¼š<strong>ä¸èƒ½ä½¿ç”¨ä¸­æ–‡çš„åˆ«åæ’åº</strong></p><p>æ‰§è¡Œé¡ºåºï¼šfromâ€”&gt;whereâ€”&gt;selectâ€”&gt;order by åˆ«å</p><blockquote><p>æŸ¥è¯¢Mç³»åˆ—å¹¶æŒ‰ç…§æ‰¹å‘ä»·æ’åº(åŠ ä¸Šåˆ«å)</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> product <span class="hljs-keyword">where</span> product_name <span class="hljs-keyword">like</span> <span class="hljs-string">&#x27;%ç½—æŠ€M%&#x27;</span> <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> cost_price <span class="hljs-keyword">asc</span>;<br></code></pre></td></tr></table></figure><p>æŸ¥è¯¢åˆ†ç±»ä¸º2å¹¶æŒ‰ç…§æ‰¹å‘ä»·æ’åº(åŠ ä¸Šåˆ«å)</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> product <span class="hljs-keyword">where</span> category_id=<span class="hljs-number">2</span> <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> cost_price <span class="hljs-keyword">asc</span>;<br></code></pre></td></tr></table></figure><p>ä¸ºä»€ä¹ˆæ’åºå¯ä»¥ä½¿ç”¨åˆ«åï¼Ÿ</p></blockquote><p>order byæ˜¯ä½œç”¨åˆ°selectçš„ç»“æœä¸Šï¼Œåœ¨ç”Ÿæˆæ’åºç»“æœçš„</p><h5 id="6-6-8ã€åˆ†é¡µæŸ¥è¯¢"><a href="#6-6-8ã€åˆ†é¡µæŸ¥è¯¢" class="headerlink" title="6.6.8ã€åˆ†é¡µæŸ¥è¯¢"></a>6.6.8ã€åˆ†é¡µæŸ¥è¯¢</h5><p>æ¯æ¬¡æŸ¥è¯¢æ•°æ®éƒ½æ˜¯å°†æ‰€æœ‰æ•°æ®æ˜¾ç¤ºå‡ºæ¥ï¼Œè‹¥æ•°æ®é‡è¿‡å¤§ï¼Œé‚£ä¹ˆçœ‹èµ·æ¥å°±å¾ˆä¸æ–¹ä¾¿ï¼Œæ€ä¹ˆè§£å†³ï¼Ÿ</p><p>å¯ä»¥å¯¹æ•°æ®è¿›è¡Œåˆ†é¡µæ˜¾ç¤ºï¼ŒSQLä¸­åˆ†é¡µæ˜¯ä¸€ä¸ªå¸¸è§åŠŸèƒ½ï¼Œéœ€è¦è®¤çœŸå¯¹å¾…ã€‚MYSQLä¸­è¿›è¡Œæ•°æ®çš„åˆ†é¡µæŸ¥è¯¢ä½¿ç”¨çš„å…³é”®å­—æ˜¯ï¼š<strong>limit</strong>ï¼Œåˆ†é¡µæŸ¥è¯¢æ¯”è¾ƒç‰¹æ®Šï¼Œå„ä¸ªæ•°æ®åº“ä¸å¤ªä¸€æ ·ã€‚</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">Where</span> [æ¡ä»¶] <span class="hljs-keyword">limit</span> beginIndex,pageSize;<br></code></pre></td></tr></table></figure><p>Limitå…³é”®å­—åè·Ÿä¸¤ä¸ªå‚æ•°<strong>beginIndex</strong>å’Œ<strong>pageSize</strong>ã€‚</p><p><strong>beginIndex</strong>ï¼šè¡¨ç¤ºä»ç¬¬å¤šå°‘æ¡æ•°æ®å¼€å§‹</p><p><strong>pageSize</strong>ï¼šè¡¨ç¤ºæ¯é¡µæ˜¾ç¤ºçš„æ•°æ®æ¡æ•°</p><p>æ¯é¡µæ˜¾ç¤º3æ¡æ•°æ®</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs n1ql">ç¬¬ä¸€é¡µ: <span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> product <span class="hljs-keyword">LIMIT</span> <span class="hljs-number">0</span>, <span class="hljs-number">3</span> -<span class="hljs-number">-0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span><br>ç¬¬äºŒé¡µ: <span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> product <span class="hljs-keyword">LIMIT</span> <span class="hljs-number">3</span>, <span class="hljs-number">3</span> -<span class="hljs-number">-3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span><br>ç¬¬ä¸‰é¡µ: <span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> product <span class="hljs-keyword">LIMIT</span> <span class="hljs-number">6</span>, <span class="hljs-number">3</span> -<span class="hljs-number">-6</span>,<span class="hljs-number">7</span>,<span class="hljs-number">8</span><br>ç¬¬å››é¡µ: <span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> product <span class="hljs-keyword">LIMIT</span> <span class="hljs-number">9</span>, <span class="hljs-number">3</span> -<span class="hljs-number">-9</span>,<span class="hljs-number">10</span>,<span class="hljs-number">11</span><br>...<br>ç¬¬ä¸ƒé¡µ: <span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> product <span class="hljs-keyword">LIMIT</span> <span class="hljs-number">18</span>,<span class="hljs-number">3</span> -<span class="hljs-number">-18</span>,<span class="hljs-number">19</span>,<span class="hljs-number">20</span><br></code></pre></td></tr></table></figure><p>æ ¹æ®ä¸Šé¢çš„SQLè¯­å¥ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°å®é™…ä¸ŠbeginIndexå¯ä»¥è¢«å…¬å¼æ¨ç®—å‡ºï¼š*<em>ï¼ˆå½“å‰é¡µæ•°-1ï¼‰</em>pageSize**</p><h5 id="6-6-9ã€èšåˆå‡½æ•°"><a href="#6-6-9ã€èšåˆå‡½æ•°" class="headerlink" title="6.6.9ã€èšåˆå‡½æ•°"></a>6.6.9ã€èšåˆå‡½æ•°</h5><p>2ï¼Œ4ï¼Œ6ï¼Œ7ï¼Œ8 ä¸€ç»„æ•°æ®ä¸­ï¼Œæœ€å¤§æ•°8ï¼Œæœ€å°æ•°2ï¼Œä¸€å…±å¤šå°‘æ•° 5ä¸ªï¼Œå®ƒä»¬çš„æ€»å’Œ27ï¼Œå¹³å‡æ•°27/5ï¼Œè‹¥è¦åœ¨MYSQLä¸­å¯¹ä»¥ä¸Šæ•°æ®ç­›é€‰æœ€å¤§å€¼ã€æœ€å°å€¼ã€å¹³å‡å€¼ç­‰æ“ä½œï¼Œåº”å½“æ€ä¹ˆåŠï¼Ÿ</p><p><strong>èšé›†å‡½æ•°ï¼š</strong>ä½œç”¨äºä¸€ç»„æ•°æ®ï¼Œå¹¶å¯¹ä¸€ç»„æ•°æ®è¿”å›ä¸€ä¸ªå€¼ã€‚  </p><ul><li>COUNTï¼šç»Ÿè®¡ç»“æœè®°å½•æ•°ï¼Œè‹¥ç»Ÿè®¡çš„æ˜¯åˆ—ï¼Œåˆ—ä¸­ä¸ºNullï¼Œé‚£ä¹ˆcountå°†ä¸ä¼šè®¡ç®—å€¼</li><li>MAXï¼š ç»Ÿè®¡è®¡ç®—æœ€å¤§å€¼</li><li>MINï¼š ç»Ÿè®¡è®¡ç®—æœ€å°å€¼</li><li>SUMï¼š ç»Ÿè®¡è®¡ç®—æ±‚å’Œ</li><li>AVGï¼š ç»Ÿè®¡è®¡ç®—å¹³å‡å€¼</li></ul><blockquote><p>æŸ¥è¯¢æ‰€æœ‰å•†å“å¹³å‡é›¶å”®ä»·</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-built_in">avg</span>(salePrice) <span class="hljs-keyword">from</span> product;<br></code></pre></td></tr></table></figure><p>æŸ¥è¯¢å•†å“æ€»è®°å½•æ•°(æ³¨æ„åœ¨Javaä¸­å¿…é¡»ä½¿ç”¨longæ¥æ”¶)</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-built_in">count</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">from</span> product;<br></code></pre></td></tr></table></figure><p>æŸ¥è¯¢åˆ†ç±»ä¸º2çš„å•†å“æ€»æ•°</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-built_in">count</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">from</span> product <span class="hljs-keyword">where</span> dir_id<span class="hljs-operator">=</span><span class="hljs-number">2</span>;<br></code></pre></td></tr></table></figure><p>æŸ¥è¯¢å•†å“çš„æœ€å°é›¶å”®ä»·ï¼Œæœ€é«˜é›¶å”®ä»·ï¼Œä»¥åŠæ‰€æœ‰å•†å“é›¶å”®ä»·æ€»å’Œ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-built_in">min</span>(sale_price),<span class="hljs-built_in">max</span>(sale_price),<span class="hljs-built_in">sum</span>(sale_price) <span class="hljs-keyword">from</span> product;<br></code></pre></td></tr></table></figure></blockquote><p><a href="https://www.cnblogs.com/liyingxiao/p/10754671.html"><strong>æ·±å…¥ç†è§£COUNT()</strong></a></p><p>1ã€count(*)ã€count(ä¸»é”®ID)å’Œcount(1)è¡¨ç¤ºè¿”å›æ»¡è¶³æ¡ä»¶çš„ç»“æœé›†çš„æ€»è¡Œæ•°</p><p>2ã€count(ä¸»é”®ID)ã€count(å­—æ®µ)ã€count(1)ã€count(*)çš„åŒºåˆ«å’Œæ€§èƒ½å·®å¼‚ï¼ˆåˆ†ææ€§èƒ½å·®åˆ«çš„åŸåˆ™ï¼‰</p><blockquote><p> 1ã€serverå±‚è¦ä»€ä¹ˆå°±ç»™ä»€ä¹ˆ </p><p> 2ã€InnoDBåªç»™å¿…è¦çš„å€¼</p><p> 3ã€ç°åœ¨çš„ä¼˜åŒ–å™¨å¯¹count(*)çš„å–è¡Œæ•°åšäº†ä¼˜åŒ–ï¼Œå…¶ä»–æ²¡æœ‰åšä¼˜åŒ–</p></blockquote><p>3ã€count(ä¸»é”®ID)æ¯”count(1)æ…¢çš„åŸå› :</p><blockquote><p>1ã€å¯¹äº count(ä¸»é”® ID) æ¥è¯´ï¼ŒInnoDB å¼•æ“ä¼šéå†ä¸»é”®ç´¢å¼•æ ‘ï¼ŒæŠŠæ¯ä¸€è¡Œçš„IDå€¼å–å‡ºæ¥ï¼Œè¿”å›ç»™serverå±‚ï¼Œserverå±‚æ‹¿åˆ°IDåï¼Œåˆ¤æ–­æ˜¯ä¸å¯èƒ½ä¸ºç©ºçš„ï¼ŒæŒ‰è¡Œç´¯åŠ åŠ 1ï¼Œæœ€åè¿”å›ç´¯è®¡å€¼ã€‚</p><p>2ã€å¯¹äºcount(1)ï¼ŒInnoDBå¼•æ“ä¼šæ‰«æä¸»é”®ç´¢å¼•æ ‘ï¼Œä½†ä¸å–å€¼ï¼Œserverå±‚å¯¹äºè¿”å›çš„æ¯ä¸€è¡Œï¼ŒæŒ‰è¡Œç´¯è®¡åŠ 1ï¼Œåˆ¤æ–­ä¸å¯èƒ½ä¸ºNULLï¼Œè¿”å›ç´¯è®¡å€¼ã€‚</p><p>3ã€ä»InnoDBå¼•æ“å±‚è¿”å›IDä¼šæ¶‰åŠåˆ°è§£ææ•°æ®è¡Œã€æ‹·è´å­—æ®µå€¼çš„æ“ä½œï¼Œå› æ­¤count(ä¸»é”® ID)æ‰§è¡Œè¦æ¯”count(1)æ‰§è¡Œæ…¢ã€‚</p></blockquote><p>4ã€count()ç”¨äºç»Ÿè®¡æŸåˆ—æ•°æ®æ€»é‡ï¼Œè‹¥åˆ—ä¸­æ•°æ®ä¸ºNULLï¼Œcountä¼šç»Ÿè®¡å—ï¼Ÿ</p><blockquote><p>count(ï¼‰èšåˆå‡½æ•°ç»Ÿè®¡éNULLä¸NULLå€¼çš„åŒºåˆ«ï¼š</p><p> 1ã€count(å­—æ®µ)ä¸ç»Ÿè®¡NULLè®°å½•ï¼Œå³è¡¨ç¤ºæ»¡è¶³æ¡ä»¶çš„æ•°æ®è¡Œé‡Œå‚æ•°å­—æ®µä¸ä¸ºNULLçš„è¡Œ</p><p> 2ã€count(1)å’Œcount(*)ä¼šè®°å½•NULLå€¼</p></blockquote><p>5ã€count(å­—æ®µ)ï¼š</p><blockquote><p> 1ã€å¦‚æœè¿™ä¸ªå­—æ®µå®šä¹‰ä¸ºnot nullçš„è¯ï¼Œä¸€è¡Œè¡Œåœ°ä»è®°å½•é‡Œé¢è¯»å‡ºè¿™ä¸ªå­—æ®µï¼Œåˆ¤æ–­ä¸èƒ½ä¸ºnullï¼ŒæŒ‰è¡Œç´¯è®¡åŠ  </p><p> 2ã€å¦‚æœè¿™ä¸ªå­—æ®µå®šä¹‰å…è®¸ä¸ºnullï¼Œä¸€è¡Œè¡Œåœ°ä»è®°å½•é‡Œé¢è¯»å‡ºè¿™ä¸ªå­—æ®µï¼Œæ‰§è¡Œçš„æ—¶å€™è¿˜è¦åˆ¤æ–­æ˜¯å¦ä¸ºnullï¼Œä¸ä¸ºnullçš„æŒ‰è¡Œç´¯è®¡åŠ 1ï¼Œè¿”å›ç´¯åŠ å€¼</p></blockquote><p>6ã€count(ä¸»é”®id)èµ°ä¸»é”®ç´¢å¼•çš„æ—¶å€™æ•ˆç‡è¾ƒcount(*)å·®çš„åŸå› ï¼Ÿ</p><blockquote><p>1ã€å¹³æ—¶æˆ‘ä»¬æ£€ç´¢ä¸€åˆ—çš„æ—¶å€™ï¼ŒåŸºæœ¬ä¸Šç­‰å€¼æˆ–èŒƒå›´æŸ¥è¯¢ï¼Œé‚£ä¹ˆç´¢å¼•åŸºæ•°å¤§çš„ç´¢å¼•å¿…ç„¶æ•ˆç‡å¾ˆé«˜(ç¬¦åˆèµ°ä¸»é”®ç´¢å¼•æŸ¥æ‰¾é€Ÿåº¦æœ€å¿«çš„åŸåˆ™)ã€‚</p><p>2ã€ä½†æ˜¯åœ¨åšcount(*)çš„æ—¶å€™å¹¶æ²¡æœ‰æ£€ç´¢å…·ä½“çš„ä¸€è¡Œæˆ–è€…ä¸€ä¸ªèŒƒå›´ï¼Œé‚£ä¹ˆé€‰æ‹©åŸºæ•°å°çš„ç´¢å¼•å¯¹countæ“ä½œæ•ˆç‡ä¼šæ›´é«˜ã€‚åœ¨åšcountæ“ä½œçš„æ—¶å€™ï¼Œmysqlä¼šéå†æ¯ä¸ªå¶å­èŠ‚ç‚¹ï¼Œæ‰€ä»¥åŸºæ•°è¶Šå°ï¼Œæ•ˆç‡è¶Šé«˜ã€‚mysqléèšç°‡ç´¢å¼•å¶å­èŠ‚ç‚¹ä¿å­˜æŒ‡å‘ä¸»é”®IDçš„æŒ‡é’ˆï¼Œæ‰€ä»¥éœ€è¦æ£€ç´¢ä¸¤éç´¢å¼•ã€‚ä½†æ˜¯è¿™é‡Œç›¸å¯¹äºéå†ä¸»é”®ç´¢å¼•,å³ä½¿æ£€ç´¢ä¸¤éç´¢å¼•æ•ˆç‡ä¹Ÿæ¯”å•çº¯çš„æ£€ç´¢ä¸»é”®ç´¢å¼•å¿«ã€‚</p><p>3ã€Innodbæ˜¯ç´¢å¼•ç»„ç»‡è¡¨ï¼Œä¸»é”®ç´¢å¼•æ ‘çš„å¶å­èŠ‚ç‚¹æ˜¯æ•°æ®ï¼Œè€Œæ™®é€šç´¢å¼•æ ‘çš„å¶å­èŠ‚ç‚¹æ˜¯ä¸»é”®å€¼ï¼Œç´¢å¼•æ™®é€šç´¢å¼•æ ‘å°å¾ˆå¤šï¼Œç´¢å¼•é•¿åº¦è¶Šå°æ ‘çš„å¤§å°å°±è¶Šå°ã€‚</p></blockquote><p>7ã€MyISAMä¸InnoDBï¼Œæ­£å¦‚åœ¨ä¸åŒçš„å­˜å‚¨å¼•æ“ä¸­ï¼Œcount(*)å‡½æ•°çš„æ‰§è¡Œæ˜¯ä¸åŒçš„</p><blockquote><p>1ã€åœ¨MyISAMå­˜å‚¨å¼•æ“ä¸­ï¼Œcount()å‡½æ•°æ˜¯ç›´æ¥è¯»å–æ•°æ®è¡¨ä¿å­˜çš„è¡Œè®°å½•æ•°å¹¶è¿”å›,æ•ˆç‡å¾ˆé«˜ï¼Œä½†æ˜¯å¦‚æœæ·»åŠ äº†whereæ¡ä»¶çš„è¯ï¼ŒMyISAMè¡¨ä¹Ÿä¸èƒ½è¿”å›å¾—å¾ˆå¿«ã€‚ </p><p>2ã€åœ¨InnoDBå­˜å‚¨å¼•æ“ä¸­ï¼Œcount(*)å‡½æ•°æ˜¯å…ˆä»å†…å­˜ä¸­è¯»å–è¡¨ä¸­çš„æ•°æ®åˆ°å†…å­˜ç¼“å†²åŒºï¼Œç„¶åæ‰«æå…¨è¡¨è·å¾—è¡Œè®°å½•æ•°ã€‚åœ¨ä½¿ç”¨countå‡½æ•°ä¸­åŠ ä¸Šwhereæ¡ä»¶æ—¶ï¼Œåœ¨ä¸¤ä¸ªå­˜å‚¨å¼•æ“ä¸­çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼Œéƒ½ä¼šæ‰«æå…¨è¡¨è®¡ç®—æŸå­—æ®µæœ‰å€¼é¡¹çš„æ¬¡æ•°ã€‚</p></blockquote><h5 id="6-6-10ã€åˆ†ç»„å‡½æ•°"><a href="#6-6-10ã€åˆ†ç»„å‡½æ•°" class="headerlink" title="6.6.10ã€åˆ†ç»„å‡½æ•°"></a>6.6.10ã€åˆ†ç»„å‡½æ•°</h5><p><strong>Group by</strong> ï¼šgroupè¡¨ç¤ºç»„ï¼Œby ä¾é ä»€ä¹ˆåˆ†ç»„ï¼›</p><p>å¯ä»¥ä½¿ç”¨GROUP BY å­å¥å°†è¡¨ä¸­çš„æ•°æ®åˆ†æˆè‹¥å¹²ç»„ï¼Œå†å¯¹åˆ†ç»„ä¹‹åçš„æ•°æ®åšç»Ÿè®¡è®¡ç®—ï¼Œä¸€èˆ¬ä½¿ç”¨èšé›†å‡½æ•°æ‰ä½¿ç”¨GROUP BYã€‚</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">Select</span> èšé›†å‡½æ•° <span class="hljs-keyword">from</span> è¡¨å <span class="hljs-keyword">where</span> [æ¡ä»¶] <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> åˆ— <span class="hljs-keyword">having</span> åˆ†ç»„åçš„æ¡ä»¶<br></code></pre></td></tr></table></figure><p>å¦‚æœè¯´è¦å¯¹åˆ†ç»„åçš„æ•°æ®è¿›è¡Œç­›é€‰ï¼Œé‚£ä¹ˆå¿…é¡»ä½¿ç”¨havingå…³é”®å­—ï¼Œæ¡ä»¶å†™åœ¨havingå</p><p>Group by ä¸€èˆ¬æ­é…èšé›†å‡½æ•°ä½¿ç”¨ï¼Œè€Œhavingåˆ™æ˜¯å¿…é¡»åœ¨æ•°æ®åˆ†ç»„åæ‰èƒ½ä½¿ç”¨</p><p>æ‰§è¡Œé¡ºåºï¼šFROMâ€”&gt; WHEREâ€”&gt;group byâ€”-&gt;Havingâ€”&gt;SELECTâ€“&gt;ORDER BY</p><p>æ³¨æ„ï¼š ä½¿ç”¨havingçš„æ—¶å€™ï¼Œå®ƒä¹Ÿæ˜¯å¯ä»¥ä½¿ç”¨åˆ«åçš„</p><p><strong>Whereå’Œhavingçš„åŒºåˆ«ï¼š</strong></p><ul><li><p>Whereé’ˆå¯¹çš„æ˜¯å…ƒç»„ï¼ŒæŒ‘é€‰æ»¡è¶³æ¡ä»¶çš„å…ƒç»„ã€‚</p></li><li><p>Having å…ˆåˆ†ç»„,åœ¨å¯¹æ¯ç»„è¿›è¡Œè®¡ç®—,æ ¹æ®å¾—åˆ°ç»“æœåœ¨è¿‡æ»¤(åˆ†ç»„æŠŠæ•°æ®ç®—å‡ºä¹‹åï¼Œåœ¨è¿‡æ»¤)</p></li></ul><blockquote><p>æŸ¥è¯¢æ¯ä¸ªå•†å“åˆ†ç±»ç¼–å·å’Œæ¯ä¸ªå•†å“åˆ†ç±»å„è‡ªçš„å¹³å‡é›¶å”®ä»·ï¼ˆæ±‚2ï¼Œ3ï¼Œ4æ¯ç±»å•†å“çš„å¹³å‡é›¶å”®ä»·ï¼‰</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> category_id,<span class="hljs-keyword">avg</span>(sale_price) <span class="hljs-keyword">from</span> product <span class="hljs-keyword">where</span> category_id <span class="hljs-keyword">in</span> (<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>) <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> category_id;<br></code></pre></td></tr></table></figure><p>æŸ¥è¯¢æ¯ä¸ªå•†å“åˆ†ç±»ç¼–å·å’Œæ¯ä¸ªå•†å“åˆ†ç±»å„è‡ªçš„å•†å“æ€»æ•°ã€‚ï¼ˆæ±‚2ï¼Œ3ï¼Œ4æ¯ç±»å•†å“çš„æ€»æ•°ï¼‰</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> category_id,<span class="hljs-keyword">count</span>(<span class="hljs-number">1</span>) <span class="hljs-keyword">from</span> product <span class="hljs-keyword">where</span> category_id <span class="hljs-keyword">in</span> (<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>) <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> category_id;<br></code></pre></td></tr></table></figure><p>æŸ¥è¯¢æ¯ä¸ªå•†å“åˆ†ç±»ç¼–å·å’Œæ¯ä¸ªå•†å“åˆ†ç±»ä¸­é›¶å”®ä»·å¤§äº100çš„å•†å“æ€»æ•°ï¼ˆç–‘é—®ï¼šæ˜¯è¦åˆ—å‡ºæ‰€æœ‰å•†å“åˆ†ç±»å—ï¼Ÿï¼‰</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> category_id,<span class="hljs-keyword">count</span>(id) <span class="hljs-keyword">from</span> product <span class="hljs-keyword">where</span> sale_price &gt;<span class="hljs-number">100</span> <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> category_id;<br><span class="hljs-meta">#è¿‡æ»¤æ‰äº†æ²¡æœ‰å•†å“é›¶å”®ä»·å¤§äº100çš„å•†å“åˆ†ç±»</span><br></code></pre></td></tr></table></figure><p>æŸ¥è¯¢é›¶å”®ä»·æ€»å’Œå¤§äº1500çš„å•†å“åˆ†ç±»ç¼–å·ä»¥åŠæ€»é›¶å”®ä»·å’Œ;ï¼ˆæ ¹æ®åˆ†ç±»ç¼–å·æŸ¥é›¶å”®ä»·çš„æ€»å’Œï¼Œç„¶åé›¶å”®ä»·æ€»å’Œå¤§äº1500ï¼‰</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> category_id, <span class="hljs-built_in">sum</span>(sale_price) <span class="hljs-keyword">from</span> product <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> category_id <span class="hljs-keyword">having</span>(<span class="hljs-built_in">sum</span>(sale_price)<span class="hljs-operator">&gt;=</span><span class="hljs-number">1500</span>);<br></code></pre></td></tr></table></figure></blockquote><h4 id="6-7ã€æ•°æ®æŸ¥è¯¢-å¤šè¡¨æŸ¥è¯¢"><a href="#6-7ã€æ•°æ®æŸ¥è¯¢-å¤šè¡¨æŸ¥è¯¢" class="headerlink" title="6.7ã€æ•°æ®æŸ¥è¯¢-å¤šè¡¨æŸ¥è¯¢"></a>6.7ã€æ•°æ®æŸ¥è¯¢-å¤šè¡¨æŸ¥è¯¢</h4><p><a href="MySQL/product_stock.sql">product_stock.sqlæ–‡ä»¶ä¸‹è½½</a></p><p><a href="MySQL/product_category.sql">product_category.sqlæ–‡ä»¶ä¸‹è½½</a></p><p>å¤šä¸ªè¡¨ç›¸äº’è¿æ¥çœ‹ä½œæ–°çš„æŸ¥è¯¢è¡¨ï¼Œè¿™ä¸ªè¿æ¥æ˜¯<strong>æ¨ªå‘è¿æ¥</strong>åŒºåˆ«äºUNIONçš„<strong>çºµå‘æ‹¼æ¥</strong></p><p><img src="/2019/11/16/MySQL/joins.png"></p><h5 id="6-7-1ã€äº¤å‰è¿æ¥"><a href="#6-7-1ã€äº¤å‰è¿æ¥" class="headerlink" title="6.7.1ã€äº¤å‰è¿æ¥"></a>6.7.1ã€äº¤å‰è¿æ¥</h5><p>äº¤å‰è¿æ¥ï¼šæ˜¯æ²¡æœ‰è¿æ¥æ¡ä»¶çš„è¡¨å…³ç³»ï¼Œè¿”å›çš„ç»“æœæ˜¯ä¸ªç¬›å¡å°”ç§¯ï¼›</p><p>ç¬›å¡å°”ç§¯æ˜¯ä¸€ä¸ªæ•°å­¦æ¦‚å¿µï¼Œç”¨äºå¤šè¡¨æŸ¥è¯¢å¾—åˆ°çš„æ•°æ®æ€»é‡ç»“æœå°†ä¼šæ˜¯ä¸¤å¼ è¡¨å„è‡ªè®°å½•æ•°ç›®çš„ä¹˜ç§¯</p><p>ä½¿ç”¨äº¤å‰è¿æ¥å¯èƒ½ä¼šäº§ç”Ÿå¤§é‡é”™è¯¯è¡¨è®°å½•ç»„åˆï¼Œè¿™äº›é”™è¯¯ç»„åˆå¯ä»¥ç”¨æ¡ä»¶å­å¥æ’é™¤æ‰å¾—åˆ°æ­£ç¡®æŸ¥è¯¢ç»“æœã€‚</p><p>å‡è®¾é›†åˆA={a, b}ï¼Œé›†åˆB={0, 1, 2}ï¼Œåˆ™ä¸¤ä¸ªé›†åˆçš„ç¬›å¡å°”ç§¯ä¸º</p><p>{(a, 0), (a, 1), (a, 2),</p><p> (b, 0), (b, 1), (b, 2)}ã€‚</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-comment">#äº¤å‰è¿æ¥ï¼Œä¸å¸¦æ¡ä»¶å­å¥çš„æŸ¥è¯¢</span><br><span class="hljs-attribute">Select</span> * from è¡¨<span class="hljs-number">1</span>,è¡¨<span class="hljs-number">2</span>;<br></code></pre></td></tr></table></figure><p><img src="/2019/11/16/MySQL/duobiao.png"></p><h5 id="6-7-2ã€å†…è¿æ¥"><a href="#6-7-2ã€å†…è¿æ¥" class="headerlink" title="6.7.2ã€å†…è¿æ¥"></a>6.7.2ã€å†…è¿æ¥</h5><p>å†…è¿æ¥åˆç§°ç­‰å€¼è¿æ¥ï¼ŒæŸ¥è¯¢ç»“æœå®é™…ä¸Šæ˜¯ä¸¤å¼ è¡¨æ•°æ®çš„<code>äº¤é›†éƒ¨åˆ†</code>ï¼Œè¿™ä¸ªäº¤é›†éƒ¨åˆ†ä½¿ç”¨æ¡ä»¶ç­›é€‰å‡ºæ¥çš„ï¼Œå†…è¿æ¥åˆ†ä¸º<strong>æ˜¾ç¤ºå†…è¿æ¥</strong>å’Œ<strong>éšå¼å†…è¿æ¥</strong>ã€‚</p><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs oxygene"><span class="hljs-keyword">Select</span> * <span class="hljs-keyword">from</span> è¡¨<span class="hljs-number">1</span>,è¡¨<span class="hljs-number">2</span>  <span class="hljs-keyword">where</span> è¡¨<span class="hljs-number">1</span>.å­—æ®µ=è¡¨<span class="hljs-number">2</span>.å­—æ®µ;  <span class="hljs-comment">//éšå¼å†…è¿æ¥</span><br><span class="hljs-keyword">Select</span> * <span class="hljs-keyword">from</span> è¡¨<span class="hljs-number">1</span> [inner] <span class="hljs-keyword">join</span> è¡¨<span class="hljs-number">2</span> <span class="hljs-keyword">on</span> è¡¨<span class="hljs-number">1</span>.å­—æ®µ=è¡¨<span class="hljs-number">2</span>.å­—æ®µ;  <span class="hljs-comment">//æ˜¾å¼å†…è¿æ¥ï¼Œæ¨èå†™æ³•</span><br></code></pre></td></tr></table></figure><p>äºŒè€…åªæœ‰è¯­æ³•å†™æ³•çš„å·®åˆ«ï¼Œéšå¼å†…è¿æ¥ä½¿ç”¨whereæ¡ä»¶æ¶ˆé™¤ç¬›å¡å°”ç§¯ã€‚</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs n1ql">#åœ¨åšç­‰å€¼è¿æ¥çš„æ—¶å€™,è‹¥Aè¡¨ä¸­å’ŒBè¡¨ä¸­çš„åˆ—åç›¸å¯¹ã€‚åˆ™å¯ä»¥ç®€å†™:<br><span class="hljs-keyword">SELECT</span>&lt;selectList&gt;<br><span class="hljs-keyword">FROM</span>A [<span class="hljs-keyword">INNER</span>] <span class="hljs-keyword">JOIN</span> B <span class="hljs-keyword">USING</span>(åŒåçš„åˆ—)<br><br>#å‰æ:åœ¨empå’Œdeptè¡¨ä¸­éƒ½æœ‰deptnoåˆ—. å¹¶ä¸”æ˜¯å¤–é”®å…³ç³»ã€‚<br>#å¦‚: <span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> emp <span class="hljs-keyword">JOIN</span> dept <span class="hljs-keyword">USING</span> (deptno)<br></code></pre></td></tr></table></figure><p>åœ¨æ˜¾ç¤ºå†…è¿æ¥ä¸­ï¼Œä¸­æ‹¬å·INNERå¯ä»¥è¢«çœç•¥ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥åªä½¿ç”¨joinâ€¦onå…³é”®å­—å³å¯ï¼Œonç›¸å½“äºéšå¼å†…è¿æ¥ä¸­çš„whereï¼Œåè·Ÿå¤šè¡¨çš„å…³è”å…³ç³»</p><p>å¦‚æœæ˜¯å¤šå¼ è¡¨ï¼Œåˆ™ä¸€ç›´åœ¨join..onâ€¦åï¼Œä¾æ¬¡æ·»åŠ join..onâ€¦å³å¯</p><blockquote><p>æŸ¥è¯¢æ‰€æœ‰å•†å“çš„åç§°å’Œåˆ†ç±»åç§°ã€ä¸¤ç§è¯­æ³•ã€‘</p><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs fortran"><span class="hljs-keyword">SELECT</span><br>product_name,<br>category_name <br>FROM<br><span class="hljs-built_in">product</span>,<br>product_category <br><span class="hljs-keyword">WHERE</span><br><span class="hljs-built_in">product</span>.category_id = product_category.id;<br><br><br><span class="hljs-keyword">SELECT</span><br>product_name,<br>category_name <br>FROM<br><span class="hljs-built_in">product</span><br>JOIN product_category ON <span class="hljs-built_in">product</span>.category_id = product_category.id;<br></code></pre></td></tr></table></figure><p>æŸ¥è¯¢è´§å“idï¼Œè´§å“åç§°ï¼Œè´§å“æ‰€å±åˆ†ç±»åç§°</p><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs fortran"><span class="hljs-keyword">SELECT</span><br><span class="hljs-built_in">product</span>.id,<br>product_name,<br>category_name <br>FROM<br><span class="hljs-built_in">product</span><br>JOIN product_category ON <span class="hljs-built_in">product</span>.category_id = product_category.id;<br></code></pre></td></tr></table></figure><p>æŸ¥è¯¢é›¶å”®ä»·å¤§äº200çš„æ— çº¿é¼ æ ‡ã€ä½¿ç”¨åˆ«åã€‘</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">SELECT</span><br>a.id,<br>product_name,<br>category_name <br><span class="hljs-keyword">FROM</span><br>product a<br><span class="hljs-keyword">JOIN</span> product_category b <span class="hljs-keyword">ON</span> a.category_id = b.id <br><span class="hljs-keyword">WHERE</span><br>category_name = <span class="hljs-string">&#x27;æ— çº¿é¼ æ ‡&#x27;</span> <br><span class="hljs-keyword">AND</span> sale_price &gt; <span class="hljs-number">200</span>;<br></code></pre></td></tr></table></figure><p>æŸ¥è¯¢æ¯ä¸ªè´§å“å¯¹åº”çš„åˆ†ç±»ä»¥åŠå¯¹åº”çš„åº“å­˜ï¼ˆè¿æ¥ä¸‰å¼ è¡¨ï¼‰</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">SELECT</span><br>product_name,<br>store_num <br><span class="hljs-keyword">FROM</span><br>product<br><span class="hljs-keyword">JOIN</span> product_category<br><span class="hljs-keyword">JOIN</span> product_stock <span class="hljs-keyword">ON</span> product.category_id = product_category.id <br><span class="hljs-keyword">AND</span> product.id = product_stock.id;<br></code></pre></td></tr></table></figure><p>å¦‚æœåº“å­˜è´§å“éƒ½é”€å”®å®Œæˆï¼ˆåº“å­˜é‡Œé¢çš„ä¸œè¥¿å–å®Œï¼‰,æŒ‰ç…§åˆ©æ¶¦((é›¶å”®ä»·-æˆæœ¬ä»·)*æ•°é‡)ä»é«˜åˆ°ä½æŸ¥è¯¢è´§å“åç§°,é›¶å”®ä»·,è´§å“åˆ†ç±»ï¼ˆä¸‰å¼ è¡¨ï¼‰ã€‚</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">SELECT</span><br>product_name,<br>sale_price,<br>category_name,<br>( sale_price - cost_price ) * store_num å‡€åˆ©æ¶¦ <br><span class="hljs-keyword">FROM</span><br>product<br><span class="hljs-keyword">JOIN</span> product_category<br><span class="hljs-keyword">JOIN</span> product_stock <span class="hljs-keyword">ON</span> product.category_id = product_category.id <br><span class="hljs-keyword">AND</span> product.id = product_stock.id <br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span><br>( sale_price - cost_price ) * store_num <span class="hljs-keyword">DESC</span>;<br></code></pre></td></tr></table></figure></blockquote><h5 id="6-7-3ã€å¤–è¿æ¥"><a href="#6-7-3ã€å¤–è¿æ¥" class="headerlink" title="6.7.3ã€å¤–è¿æ¥"></a>6.7.3ã€å¤–è¿æ¥</h5><p>å¤–è¿æ¥åˆ†ä¸ºï¼š<code>å·¦å¤–è¿æ¥</code>ã€<code>å³å¤–è¿æ¥</code>ã€<code>å…¨å¤–è¿æ¥</code></p><p><strong>å·¦å¤–è¿æ¥</strong>ï¼šä»¥å·¦è¾¹è¡¨ä¸ºä¸»ï¼Œè¿”å›å·¦è¾¹è¡¨ä¸­æ‰€æœ‰æ•°æ®ï¼Œè‹¥å³è¡¨<code>æ— æ³•å®Œå…¨æ»¡è¶³</code>ä¸ä¸»è¡¨é—´è¿æ¥æ¡ä»¶ï¼Œåˆ™æ— æ³•æ»¡è¶³çš„éƒ¨åˆ†ç”¨NULLå¡«å……ï¼Œè¯·å‚è€ƒå®é™…æŸ¥è¯¢ç»“æœæ¥ç†è§£</p><p><img src="/2019/11/16/MySQL/leftjoin.png"></p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">Select</span> * <span class="hljs-keyword">from</span> è¡¨<span class="hljs-number">1</span> <span class="hljs-keyword">left</span> [<span class="hljs-keyword">outer</span>] <span class="hljs-keyword">join</span> è¡¨<span class="hljs-number">2</span> <span class="hljs-keyword">on</span> è¡¨<span class="hljs-number">1.</span>å­—æ®µ=è¡¨<span class="hljs-number">2.</span>å­—æ®µ;<br></code></pre></td></tr></table></figure><p><strong>å³å¤–è¿æ¥</strong>ï¼šä¸å·¦è¿æ¥ç›¸åï¼Œä»¥å³è¾¹è¡¨ä¸ºä¸»ï¼Œè¿”å›å³è¡¨ä¸­æ‰€æœ‰æ•°æ®ï¼Œè‹¥å·¦è¡¨ä¸­æ— æ•°æ®ï¼Œåˆ™æ˜¾ç¤ºä¸ºNULL</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">Select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> è¡¨<span class="hljs-number">1</span> <span class="hljs-keyword">right</span> [<span class="hljs-keyword">outer</span>] <span class="hljs-keyword">join</span> è¡¨<span class="hljs-number">2</span> <span class="hljs-keyword">on</span> è¡¨<span class="hljs-number">1.</span>å­—æ®µ<span class="hljs-operator">=</span>è¡¨<span class="hljs-number">2.</span>å­—æ®µ;<br></code></pre></td></tr></table></figure><blockquote><p>æ¡ˆä¾‹ï¼šæŸ¥è¯¢æ¯ç§å•†å“åç§°ï¼Œåˆ†ç±»çš„åç§°å’ŒåŒ…å«çš„å…·ä½“å•†å“æ€»æ•°ï¼ˆstore_numï¼‰ifnull</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs applescript">Select product_name,category_name,IFNULL(store_num,<span class="hljs-number">0</span>) <span class="hljs-keyword">from</span> product p;<br>Left join product_category dir <span class="hljs-keyword">on</span> p.category_id = dir.<span class="hljs-built_in">id</span>;<br>Left join product_stock stock <span class="hljs-keyword">on</span> stock.<span class="hljs-built_in">id</span> = p.<span class="hljs-built_in">id</span>;<br></code></pre></td></tr></table></figure><p><strong>å…¨å¤–è¿æ¥</strong>ï¼šè¿”å›æ¶‰åŠçš„å¤šè¡¨ä¸­çš„æ‰€æœ‰æ•°æ®ï¼ŒMYSQLä¸­ä¸æ”¯æŒè¯¥æŸ¥è¯¢ï¼Œä»…é™äº†è§£</p></blockquote><h5 id="6-7-4ã€è‡ªè¿æ¥"><a href="#6-7-4ã€è‡ªè¿æ¥" class="headerlink" title="6.7.4ã€è‡ªè¿æ¥"></a>6.7.4ã€è‡ªè¿æ¥</h5><p>ä»…ç”¨ä¸€å¼ è¡¨ä½œå¤šè¡¨æŸ¥è¯¢ï¼Œç›´ç™½çš„è®²å°±æ˜¯ä¸€å¼ è¡¨ä¸­æ•°æ®å«æœ‰å¤šç§å…³ç³»ï¼Œä½¿ç”¨å¤šè¡¨æŸ¥è¯¢çš„è¯­æ³•ï¼Œæ¥æŸ¥è¯¢ä¸€å¼ è¡¨ï¼ŒæŸ¥è¯¢è¿‡ç¨‹ä¸­å¿…é¡»ä½¿ç”¨åˆ«åï¼›</p><p>å¤šç”¨åœ¨åˆ†ç±»æ•°æ®ã€çœå¸‚å¿åˆ†ç±»æ•°æ®ã€æƒé™â€¦</p><p>ä¸¾ä¾‹å¦‚ä¸‹ï¼š</p><p>å†…è¿æ¥ï¼š</p><p><img src="/2019/11/16/MySQL/inner.png"></p><p><img src="/2019/11/16/MySQL/inner2.png"></p><p>å¤–è¿æ¥ï¼š</p><p><img src="/2019/11/16/MySQL/inner1.png"></p><p><img src="/2019/11/16/MySQL/leftinner.png"></p><h5 id="6-7-5ã€å­æŸ¥è¯¢"><a href="#6-7-5ã€å­æŸ¥è¯¢" class="headerlink" title="6.7.5ã€å­æŸ¥è¯¢"></a>6.7.5ã€å­æŸ¥è¯¢</h5><p>å­æŸ¥è¯¢ï¼šå°†ä¸€ä¸ªæŸ¥è¯¢ç»“æœä½œä¸ºå¦ä¸€ä¸ªæŸ¥è¯¢çš„å¯¹è±¡ï¼Œç›´ç™½çš„è®²å°±æ˜¯SQLè¯­å¥åµŒå¥—</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">Select</span> * <span class="hljs-keyword">from</span> (<span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> è¡¨)#çœŸçš„æœ‰æ„ä¹‰å—ï¼Ÿçœ‹æœ¬å°èŠ‚åé¢çš„ä¾‹å­<br><span class="hljs-keyword">Select</span> * <span class="hljs-keyword">from</span> è¡¨ <span class="hljs-keyword">where</span> æ¡ä»¶-&gt;æ¡ä»¶ä¸­åŒ…å«æŸ¥è¯¢è¯­å¥<br></code></pre></td></tr></table></figure><blockquote><p>æŸ¥è¯¢é›¶å”®ä»·æ¯”ç½—æŠ€MX1100æ›´é«˜çš„æ‰€æœ‰å•†å“ä¿¡æ¯ã€‚</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> product <span class="hljs-keyword">WHERE</span> sale_price&gt;(<span class="hljs-keyword">SELECT</span> sale_price <span class="hljs-keyword">FROM</span> product <span class="hljs-keyword">WHERE</span> product_name=<span class="hljs-string">&#x27;ç½—æŠ€MX1100&#x27;</span>);<br></code></pre></td></tr></table></figure><p>æŸ¥è¯¢åˆ†ç±»ç¼–å·å’ŒæŠ˜æ‰£ä¸ç½—æŠ€M100ç›¸åŒçš„æ‰€æœ‰å•†å“ä¿¡æ¯ã€‚</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> product <span class="hljs-keyword">WHERE</span> (dir_id,cutoff)=<br>(<span class="hljs-keyword">SELECT</span> dir_id,cutoff <span class="hljs-keyword">FROM</span> product <span class="hljs-keyword">WHERE</span> productName = <span class="hljs-string">&#x27;ç½—æŠ€M100&#x27;</span>)<br></code></pre></td></tr></table></figure><p>Select * from (select * from è¡¨)ï¼›è¿™æ ·æŸ¥è¯¢æœ‰æ„æ€å—ï¼Ÿå¥½åƒæ²¡æœ‰</p></blockquote><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> (<span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> product a) b;#Every derived <span class="hljs-keyword">table</span> must have its own <span class="hljs-keyword">alias</span><br></code></pre></td></tr></table></figure><p><img src="/2019/11/16/MySQL/zichasample.png"></p><h5 id="6-7-6ã€UNIONè”åˆæŸ¥è¯¢"><a href="#6-7-6ã€UNIONè”åˆæŸ¥è¯¢" class="headerlink" title="6.7.6ã€UNIONè”åˆæŸ¥è¯¢"></a>6.7.6ã€UNIONè”åˆæŸ¥è¯¢</h5><p>ä½œç”¨ï¼šUNIONå¯ä»¥<strong>æŠŠå¤šç»„ç»“æ„ç›¸åŒçš„SELECTæŸ¥è¯¢ç»“æœçºµå‘åˆå¹¶</strong>ã€‚</p><p>1ã€åˆå¹¶çš„æ•°æ®ç»“æ„å¿…é¡»ç»“æ„ç›¸ç­‰ï¼›</p><p>2ã€éœ€è¦æŸ¥è¯¢ç»“æœçš„ç»“æ„ç›¸åŒå³å¯ï¼Œä¸æŸ¥è¯¢çš„å­—æ®µã€å­—æ®µåˆ«ååŠç±»å‹çš„è®¾ç½®æ— å…³ï¼›</p><p>3ã€UNOINè”åˆæŸ¥è¯¢è¿”å›çš„åˆ—åæ˜¯ç”±ç¬¬ä¸€ä¸ªSELECTæŸ¥è¯¢çš„å­—æ®µåç¡®å®šã€‚  </p><p>4ã€<code>UNION</code>ï¼ˆä¸å…è®¸é‡å¤å€¼ï¼‰ å’Œ<code>UNION ALL</code>ï¼ˆå…è®¸é‡å¤å€¼ï¼Œæ€§èƒ½é«˜ï¼‰ã€‚</p><p>5ã€æœ‰æ’åºéœ€æ±‚æ—¶ï¼Œæ¯ä¸ªSELECTè¯­å¥éœ€è¦ä½¿ç”¨<code>()</code>å’Œ<code>LIMITå­å¥</code>ã€‚</p><p><strong>ä¸ºä»€ä¹ˆéœ€è¦ä½¿ç”¨UNOINï¼š</strong></p><p>æœ‰çš„ç³»ç»Ÿï¼Œå®ƒè¡¨é‡Œé¢çš„æ•°æ®é‡æ˜¯éå¸¸å¤§çš„ï¼Œæˆ‘ä»¬è¿™æ—¶å€™å°±å¯èƒ½ä¸ºäº†ä¼˜åŒ–æ•°æ®åº“æé«˜æŸ¥è¯¢é€Ÿåº¦ï¼Œå°†æ¯”å¦‚è¯´å°†è¡¨é€šè¿‡å¹´/å­£åº¦/ç±»å‹æŠŠä¸€å¼ è¡¨åˆ†æˆå¤šå¼ è¡¨ï¼Œå¦‚ï¼š</p><p> {order2014ã€ order2015 ã€order2016 }ã€{shop_sc ã€ shop_bj ã€shop_sh }</p><p><img src="/2019/11/16/MySQL/union.png"></p><p>æ¡ˆä¾‹ï¼Œå¦‚ä¸‹ï¼š</p><p>ï¼ˆ1ï¼‰å‡†å¤‡ä¸¤å¼ è¡¨ï¼šorder2014ä¸order2015</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> order2014(id <span class="hljs-type">int</span>,`<span class="hljs-type">name</span>` <span class="hljs-type">varchar</span>(<span class="hljs-number">50</span>));<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> order2014(id,<span class="hljs-type">name</span>) <span class="hljs-keyword">values</span> (<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;è®¢å•ä¸€&#x27;</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> order2014(id,<span class="hljs-type">name</span>) <span class="hljs-keyword">values</span> (<span class="hljs-number">2</span>,<span class="hljs-string">&#x27;è®¢å•äºŒ&#x27;</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> order2014(id,<span class="hljs-type">name</span>) <span class="hljs-keyword">values</span> (<span class="hljs-number">3</span>,<span class="hljs-string">&#x27;è®¢å•ä¸‰&#x27;</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> order2014(id,<span class="hljs-type">name</span>) <span class="hljs-keyword">values</span> (<span class="hljs-number">4</span>,<span class="hljs-string">&#x27;è®¢å•å››&#x27;</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> order2014(id,<span class="hljs-type">name</span>) <span class="hljs-keyword">values</span> (<span class="hljs-number">5</span>,<span class="hljs-string">&#x27;è®¢å•äº”&#x27;</span>);<br></code></pre></td></tr></table></figure><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> order2015(id <span class="hljs-type">int</span>,`<span class="hljs-type">name</span>` <span class="hljs-type">varchar</span>(<span class="hljs-number">50</span>));<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> order2015(id,<span class="hljs-type">name</span>) <span class="hljs-keyword">values</span> (<span class="hljs-number">6</span>,<span class="hljs-string">&#x27;è®¢å•å…­&#x27;</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> order2015(id,<span class="hljs-type">name</span>) <span class="hljs-keyword">values</span> (<span class="hljs-number">7</span>,<span class="hljs-string">&#x27;è®¢å•ä¸ƒ&#x27;</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> order2015(id,<span class="hljs-type">name</span>) <span class="hljs-keyword">values</span> (<span class="hljs-number">8</span>,<span class="hljs-string">&#x27;è®¢å•å…«&#x27;</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> order2015(id,<span class="hljs-type">name</span>) <span class="hljs-keyword">values</span> (<span class="hljs-number">9</span>,<span class="hljs-string">&#x27;è®¢å•ä¹&#x27;</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> order2015(id,<span class="hljs-type">name</span>) <span class="hljs-keyword">values</span> (<span class="hljs-number">4</span>,<span class="hljs-string">&#x27;è®¢å•å››&#x27;</span>);<br></code></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰æ‰§è¡ŒUNIONçš„ä»£ç ï¼š</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> order2014 <span class="hljs-keyword">union</span> <span class="hljs-keyword">all</span> <span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> order2015;<br></code></pre></td></tr></table></figure><p><img src="/2019/11/16/MySQL/union1.png"></p><p>ï¼ˆ3ï¼‰<code>å¤±è´¥ï¼š</code>å°†ä¸¤ä¸ªä¸åŒç»“æ„çš„æŸ¥è¯¢ç»“æœUNIONå¯¼è‡´æŸ¥è¯¢å¤±è´¥ï¼š</p><p><img src="/2019/11/16/MySQL/wrongunion.png"></p><h3 id="7ã€æ•°æ®æ“çºµ"><a href="#7ã€æ•°æ®æ“çºµ" class="headerlink" title="7ã€æ•°æ®æ“çºµ"></a>7ã€æ•°æ®æ“çºµ</h3><h4 id="7-1ã€æ·»åŠ è®°å½•"><a href="#7-1ã€æ·»åŠ è®°å½•" class="headerlink" title="7.1ã€æ·»åŠ è®°å½•"></a>7.1ã€æ·»åŠ è®°å½•</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Insert</span> into è¡¨(å­—æ®µ<span class="hljs-number">1</span>,å­—æ®µ<span class="hljs-number">2</span>..) values(å€¼<span class="hljs-number">1</span>,å€¼<span class="hljs-number">2</span>â€¦)  //æ¨èå†™æ³•<br></code></pre></td></tr></table></figure><p>å¦‚æœæ’å…¥çš„è¡¨ä¸­çš„ä¸»é”®æ˜¯è‡ªå¢ç±»å‹çš„ï¼Œå¯ä»¥ä¸ç”¨æ’å…¥å€¼</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">Insert</span> <span class="hljs-keyword">into</span> è¡¨(å­—æ®µ<span class="hljs-number">1</span>,å­—æ®µ<span class="hljs-number">2</span>) <span class="hljs-keyword">values</span>(å€¼<span class="hljs-number">1</span>,å€¼<span class="hljs-number">2</span>),(å€¼<span class="hljs-number">1</span>,å€¼<span class="hljs-number">2</span>)<span class="hljs-operator">/</span><span class="hljs-operator">/</span>æ’å…¥å¤šæ¡æ•°æ®ã€MYSQLã€‘<br><span class="hljs-keyword">Insert</span> <span class="hljs-keyword">into</span> è¡¨ <span class="hljs-keyword">values</span>(å€¼<span class="hljs-number">1</span>,å€¼<span class="hljs-number">2</span>)  <span class="hljs-operator">/</span><span class="hljs-operator">/</span>é’ˆå¯¹è¡¨æ‰€æœ‰å­—æ®µè¿›è¡Œæ’å…¥æ“ä½œ<br><span class="hljs-keyword">Insert</span> <span class="hljs-keyword">into</span> è¡¨(å­—æ®µ) <span class="hljs-keyword">select</span> å­—æ®µ <span class="hljs-keyword">from</span> è¡¨<span class="hljs-number">2</span>  <span class="hljs-operator">/</span><span class="hljs-operator">/</span>æŸ¥è¯¢ç»“æœæ’å…¥<br><span class="hljs-keyword">Insert</span> <span class="hljs-keyword">into</span> è¡¨ <span class="hljs-keyword">select</span> å­—æ®µ <span class="hljs-keyword">from</span> è¡¨<span class="hljs-number">2</span>  <span class="hljs-operator">/</span><span class="hljs-operator">/</span>æŸ¥è¯¢ç»“æœï¼Œå…¨è¡¨æ’å…¥<br></code></pre></td></tr></table></figure><p>åœ¨è¿›è¡Œæ•°æ®æ·»åŠ çš„è¿‡ç¨‹ä¸­ï¼Œå¿…é¡»å°†æ’å…¥çš„å­—æ®µå’Œå€¼ç›¸å¯¹åº”ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚</p><h4 id="7-2ã€ä¿®æ”¹æ•°æ®"><a href="#7-2ã€ä¿®æ”¹æ•°æ®" class="headerlink" title="7.2ã€ä¿®æ”¹æ•°æ®"></a>7.2ã€ä¿®æ”¹æ•°æ®</h4><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs csharp">Update è¡¨ <span class="hljs-keyword">set</span> å­—æ®µ=å€¼ <span class="hljs-keyword">where</span> æ¡ä»¶  <span class="hljs-comment">//ä¿®æ”¹æ•°æ®ä»…èƒ½å•å­—æ®µä¿®æ”¹ï¼›å¸¦æ¡ä»¶ä¿®æ”¹ï¼Œå¦åˆ™ä¿®æ”¹å…¨è¡¨</span><br></code></pre></td></tr></table></figure><blockquote><p>å°†é›¶å”®ä»·å¤§äº300çš„è´§å“é›¶å”®ä»·ä¸Šè°ƒ0.2å€</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">UPDATE</span>  product SET sale_price = sale_price * <span class="hljs-number">1</span>.<span class="hljs-number">2</span> WHERE sale_price &gt; <span class="hljs-number">300</span>;<br></code></pre></td></tr></table></figure><p>å°†é›¶å”®ä»·å¤§äº300çš„æœ‰çº¿é¼ æ ‡çš„è´§å“é›¶å”®ä»·ä¸Šè°ƒ0.1å€</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">UPDATE</span> product p <span class="hljs-keyword">JOIN</span> product_category pd <span class="hljs-keyword">ON</span> p.category_id = pd.id<br><span class="hljs-keyword">SET</span> p.sale_price = p.sale_price * <span class="hljs-number">1.1</span><br><span class="hljs-keyword">WHERE</span> sale_price &gt; <span class="hljs-number">300</span> <span class="hljs-keyword">AND</span> pd.category_name =<span class="hljs-string">&quot;æœ‰çº¿é¼ æ ‡&quot;</span>;<br></code></pre></td></tr></table></figure></blockquote><h4 id="7-3ã€åˆ é™¤æ•°æ®"><a href="#7-3ã€åˆ é™¤æ•°æ®" class="headerlink" title="7.3ã€åˆ é™¤æ•°æ®"></a>7.3ã€åˆ é™¤æ•°æ®</h4><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> è¡¨ <span class="hljs-keyword">WHERE</span> æ¡ä»¶  //åˆ é™¤æ•°æ®å¸¦<span class="hljs-keyword">where</span>æ¡ä»¶å­å¥ï¼Œå¦åˆ™åˆ é™¤å…¨è¡¨æ•°æ®<br></code></pre></td></tr></table></figure><h3 id="8ã€ç´¢å¼•INDEX"><a href="#8ã€ç´¢å¼•INDEX" class="headerlink" title="8ã€ç´¢å¼•INDEX"></a>8ã€ç´¢å¼•INDEX</h3><p>åœ¨å…³ç³»æ•°æ®åº“ä¸­ï¼Œç´¢å¼•æ˜¯ä¸€ç§å•ç‹¬çš„ã€ç‰©ç†çš„å¯¹æ•°æ®åº“è¡¨ä¸­ä¸€åˆ—æˆ–å¤šåˆ—çš„å€¼è¿›è¡Œæ’åºçš„ä¸€ç§å­˜å‚¨ç»“æ„ï¼Œå®ƒæ˜¯æŸä¸ªè¡¨ä¸­ä¸€åˆ—æˆ–è‹¥å¹²åˆ—å€¼çš„é›†åˆå’Œç›¸åº”çš„æŒ‡å‘è¡¨ä¸­ç‰©ç†æ ‡è¯†è¿™äº›å€¼çš„æ•°æ®é¡µçš„é€»è¾‘æŒ‡é’ˆæ¸…å•ã€‚ç´¢å¼•çš„ä½œç”¨ç›¸å½“äºå›¾ä¹¦çš„ç›®å½•ï¼Œå¯ä»¥æ ¹æ®ç›®å½•ä¸­çš„é¡µç å¿«é€Ÿæ‰¾åˆ°æ‰€éœ€çš„å†…å®¹ã€‚</p><h4 id="8-1ã€ä½¿ç”¨ç´¢å¼•çš„æ³¨æ„ç‚¹"><a href="#8-1ã€ä½¿ç”¨ç´¢å¼•çš„æ³¨æ„ç‚¹" class="headerlink" title="8.1ã€ä½¿ç”¨ç´¢å¼•çš„æ³¨æ„ç‚¹"></a>8.1ã€ä½¿ç”¨ç´¢å¼•çš„æ³¨æ„ç‚¹</h4><blockquote><p>1ã€ç´¢å¼•ä¹Ÿæ˜¯æ•°æ®åº“ä¸­çš„æ•°æ®åº“å¯¹è±¡ï¼›<br>2ã€åœ¨æ•°æ®åº“ä¸­ç”¨æ¥åŠ é€Ÿå¯¹è¡¨çš„æŸ¥è¯¢ï¼›<br>3ã€é€šè¿‡ä½¿ç”¨å¿«é€Ÿè·¯å¾„è®¿é—®æ–¹æ³•å¿«é€Ÿå®šä½æ•°æ®,å‡å°‘äº†ç£ç›˜çš„I/Oï¼›<br>4ã€ä¸è¡¨ç‹¬ç«‹å­˜æ”¾ï¼ˆè¿˜ä¼šå ç”¨ä¸€å®šçš„å­˜å‚¨ç©ºé—´ï¼‰ï¼Œä»¥ç©ºé—´æ¢æ—¶é—´ï¼›<br>5ã€ä½†æ˜¯å¹¶ä¸æ˜¯æ‰€æœ‰å­—æ®µéƒ½åŠ ä¸Šç´¢å¼•å¥½ï¼Œç´¢å¼•çš„ç»´æŠ¤(æ·»åˆ æ”¹)æ˜¯æ¯”è¾ƒè€—è´¹æ€§èƒ½çš„ï¼›<br>7ã€å¸¸è§ç´¢å¼•å¤±æ•ˆçš„æƒ…å†µï¼š</p><blockquote><ol><li>likeçš„â€nihao%â€è¿™ç§å½¢å¼ä»¥å¤–çš„å…¶ä»–å½¢å¼éƒ½ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆ(å› æ­¤æŸ¥è¯¢çš„é€Ÿåº¦æ˜¯éå¸¸æ…¢çš„)</li><li>Select * from sss where 1=1 ï¼šç´¢å¼•å¤±æ•ˆ</li><li>Sqlæ³¨å…¥ </li></ol></blockquote></blockquote><h4 id="8-2ã€ä»€ä¹ˆåˆ—é€‚åˆå»ºç´¢å¼•"><a href="#8-2ã€ä»€ä¹ˆåˆ—é€‚åˆå»ºç´¢å¼•" class="headerlink" title="8.2ã€ä»€ä¹ˆåˆ—é€‚åˆå»ºç´¢å¼•"></a>8.2ã€ä»€ä¹ˆåˆ—é€‚åˆå»ºç´¢å¼•</h4><p>ç´¢å¼•çš„ç»´æŠ¤(æ·»åˆ æ”¹)æ˜¯æ¯”è¾ƒè€—è´¹æ€§èƒ½çš„ï¼Œæ ¹æ®æŸ¥è¯¢ä¸æ·»åˆ æ”¹çš„çš„é¢‘ç‡æ¥ç¡®å®šï¼Œä¸€èˆ¬ç»å¸¸æŸ¥è¯¢ï¼Œä¸ç»å¸¸ä¿®æ”¹çš„åˆ—ï¼Œè¿™ä¸ªåˆ—ä¸­çš„é‡å¤æ•°æ®æ¯”è¾ƒå¤šçš„æƒ…å†µï¼Œå¯ä»¥åŠ ç´¢å¼•ã€‚</p><blockquote><p>1ã€è¡¨çš„ä¸»é”®ã€å¤–é”®å¿…é¡»æœ‰ç´¢å¼•ï¼›<br>2ã€æ•°æ®é‡è¶…è¿‡30000çš„è¡¨åº”è¯¥æœ‰ç´¢å¼•ï¼›<br>3ã€ç»å¸¸ä¸å…¶ä»–è¡¨è¿›è¡Œè¿æ¥çš„è¡¨ï¼Œåœ¨è¿æ¥å­—æ®µä¸Šåº”è¯¥å»ºç«‹ç´¢å¼•ï¼›<br>4ã€ç»å¸¸å‡ºç°åœ¨Whereå­å¥ä¸­çš„å­—æ®µï¼Œç‰¹åˆ«æ˜¯å¤§è¡¨çš„å­—æ®µï¼Œåº”è¯¥å»ºç«‹ç´¢å¼•ï¼›<br>5ã€ç´¢å¼•åº”è¯¥å»ºåœ¨é€‰æ‹©æ€§é«˜çš„å­—æ®µä¸Šï¼›<br>6ã€ç´¢å¼•åº”è¯¥å»ºåœ¨å°å­—æ®µä¸Šï¼Œå¯¹äºå¤§çš„æ–‡æœ¬å­—æ®µç”šè‡³è¶…é•¿å­—æ®µï¼Œä¸è¦å»ºç´¢å¼•ï¼›</p></blockquote><h4 id="8-3ã€åˆ›å»ºç´¢å¼•"><a href="#8-3ã€åˆ›å»ºç´¢å¼•" class="headerlink" title="8.3ã€åˆ›å»ºç´¢å¼•:"></a>8.3ã€åˆ›å»ºç´¢å¼•:</h4><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">INDEX</span> ç´¢å¼•åç§° <span class="hljs-keyword">ON</span> è¡¨å (åˆ—å)<br></code></pre></td></tr></table></figure><h4 id="8-4ã€åˆ é™¤ç´¢å¼•"><a href="#8-4ã€åˆ é™¤ç´¢å¼•" class="headerlink" title="8.4ã€åˆ é™¤ç´¢å¼•:"></a>8.4ã€åˆ é™¤ç´¢å¼•:</h4><p>æ–¹å¼ä¸€ï¼š</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">INDEX</span> ç´¢å¼•å <span class="hljs-keyword">ON</span> è¡¨å <br></code></pre></td></tr></table></figure><p>æ–¹å¼äºŒ: </p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> è¡¨å <span class="hljs-keyword">DROP</span> <span class="hljs-keyword">INDEX</span> ç´¢å¼•å<br></code></pre></td></tr></table></figure><h3 id="9ã€è§†å›¾VIEW"><a href="#9ã€è§†å›¾VIEW" class="headerlink" title="9ã€è§†å›¾VIEW"></a>9ã€è§†å›¾VIEW</h3><p>è§†å›¾æ˜¯ç”±<strong>SELECTè¯­å¥</strong>ç»„æˆçš„<code>è™šæ‹Ÿè¡¨</code>ã€‚</p><p>1ã€è§†å›¾çš„åå­—å¿…é¡»å”¯ä¸€ï¼Œä¸èƒ½å’Œå…¶å®ƒè¡¨æˆ–è§†å›¾é‡åï¼›<br>2ã€è§†å›¾å¯ä»¥åµŒå¥—ä½¿ç”¨ï¼Œä¹Ÿå°±æ˜¯åœ¨ä¸€ä¸ªè§†å›¾åŸºç¡€ä¸Šç»§ç»­å®šä¹‰æ–°çš„è§†å›¾ï¼›<br>3ã€è§†å›¾åˆ›å»ºå’Œåˆ é™¤åªå½±å“è§†å›¾æœ¬èº«ï¼Œä¸å½±å“æ‰€ä½¿ç”¨çš„åŸºæœ¬è¡¨ã€‚</p><p><img src="/2019/11/16/MySQL/view.png"></p><h4 id="9-1ã€ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è§†å›¾"><a href="#9-1ã€ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è§†å›¾" class="headerlink" title="9.1ã€ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è§†å›¾"></a>9.1ã€ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è§†å›¾</h4><ol><li><strong>ç®€åŒ–å¤æ‚çš„æŸ¥è¯¢</strong>ï¼Œå°†å¸¸ç”¨çš„ã€æ¯”è¾ƒå¤æ‚çš„SELECTè¯­å¥ï¼Œåˆ›å»ºä¸€ä¸ªè§†å›¾ï¼Œå°±èƒ½æ–¹ä¾¿ä»¥åå¤šæ¬¡è°ƒç”¨ã€‚</li><li><strong>å®‰å…¨åŸå› </strong>ï¼Œæ¯”å¦‚ï¼Œåªæƒ³è®©æƒé™ä½çš„ç”¨æˆ·çœ‹åˆ°ä¸€ä¸ªè¡¨çš„éƒ¨åˆ†å­—æ®µï¼Œè€Œéšè—æœºå¯†çš„éƒ¨åˆ†ã€‚</li></ol><h4 id="9-2ã€è§†å›¾åº”ç”¨åœºæ™¯"><a href="#9-2ã€è§†å›¾åº”ç”¨åœºæ™¯" class="headerlink" title="9.2ã€è§†å›¾åº”ç”¨åœºæ™¯"></a>9.2ã€è§†å›¾åº”ç”¨åœºæ™¯</h4><p>è§†å›¾ä¸»è¦ä½¿ç”¨åœ¨<strong>æŸ¥è¯¢çš„åœºæ™¯ä¸­</strong>ã€‚ä¸€èˆ¬ä¸ä½¿ç”¨è§†å›¾è¿›è¡Œå¢åˆ æ”¹çš„æ“ä½œ</p><p><img src="/2019/11/16/MySQL/view1.png"></p><h4 id="9-3ã€ä½¿ç”¨è§†å›¾"><a href="#9-3ã€ä½¿ç”¨è§†å›¾" class="headerlink" title="9.3ã€ä½¿ç”¨è§†å›¾"></a>9.3ã€ä½¿ç”¨è§†å›¾</h4><p><img src="/2019/11/16/MySQL/view3.png"></p><h5 id="9-3-1ã€åˆ›å»ºè§†å›¾"><a href="#9-3-1ã€åˆ›å»ºè§†å›¾" class="headerlink" title="9.3.1ã€åˆ›å»ºè§†å›¾"></a>9.3.1ã€åˆ›å»ºè§†å›¾</h5><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">view</span> è§†å›¾å <span class="hljs-keyword">as</span> <span class="hljs-keyword">select</span> æŸ¥è¯¢è¯­å¥;<br></code></pre></td></tr></table></figure><h5 id="9-3-2ã€è§†å›¾æŸ¥è¯¢"><a href="#9-3-2ã€è§†å›¾æŸ¥è¯¢" class="headerlink" title="9.3.2ã€è§†å›¾æŸ¥è¯¢"></a>9.3.2ã€è§†å›¾æŸ¥è¯¢</h5><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lasso"><span class="hljs-keyword">Select</span> å­—æ®µå from è§†å›¾å <span class="hljs-keyword">where</span> å­å¥ <span class="hljs-params">...</span>;<br></code></pre></td></tr></table></figure><h5 id="9-3-3ã€ä¿®æ”¹è§†å›¾"><a href="#9-3-3ã€ä¿®æ”¹è§†å›¾" class="headerlink" title="9.3.3ã€ä¿®æ”¹è§†å›¾"></a>9.3.3ã€ä¿®æ”¹è§†å›¾</h5><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">alter</span> <span class="hljs-keyword">view</span> è§†å›¾å <span class="hljs-keyword">as</span> <span class="hljs-keyword">select</span> æŸ¥è¯¢è¯­å¥;<br></code></pre></td></tr></table></figure><h5 id="9-3-4ã€åˆ é™¤è§†å›¾"><a href="#9-3-4ã€åˆ é™¤è§†å›¾" class="headerlink" title="9.3.4ã€åˆ é™¤è§†å›¾"></a>9.3.4ã€åˆ é™¤è§†å›¾</h5><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gauss"><span class="hljs-built_in">drop</span> <span class="hljs-built_in">view</span> è§†å›¾å;<br></code></pre></td></tr></table></figure><h3 id="10ã€äº‹åŠ¡"><a href="#10ã€äº‹åŠ¡" class="headerlink" title="10ã€äº‹åŠ¡"></a>10ã€äº‹åŠ¡</h3><blockquote><p>åœ¨æ²¡æœ‰æ¥è§¦äº‹åŠ¡ä¹‹å‰ã€‚ã€‚ã€‚</p><p>æ³¨æ„ï¼šMySQLé»˜è®¤æ˜¯è‡ªåŠ¨æäº¤æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯ä¸€æ¡SQLè¯­å¥å®Œæˆåï¼Œç³»ç»Ÿå°±è‡ªåŠ¨æäº¤äº†ã€‚</p><p>æŸ¥çœ‹å½“å‰çš„æ¨¡å¼æ˜¯å¦ä¸ºè‡ªåŠ¨æäº¤æ¨¡å¼ï¼š</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gams">show <span class="hljs-keyword">variables</span> like <span class="hljs-comment">&#x27;%autocommit&#x27;</span>;<br></code></pre></td></tr></table></figure><p>å¼€å¯è‡ªåŠ¨æäº¤æ¨¡å¼ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-builtin-name">set</span> <span class="hljs-attribute">autocommit</span>=1;<br></code></pre></td></tr></table></figure><p>å…³é—­è‡ªåŠ¨æäº¤æ¨¡å¼ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-builtin-name">set</span> <span class="hljs-attribute">autocommit</span>=0;<br></code></pre></td></tr></table></figure></blockquote><p>MySQLçš„è¡¨ç±»å‹å¿…é¡»æ˜¯InnoDBï¼Œæ‰èƒ½æ”¯æŒäº‹åŠ¡ã€‚</p><p>äº‹åŠ¡æ˜¯æ•°æ®åº“å•†ç”¨æœ€åŸºæœ¬æœ€é‡è¦çš„ç‰¹ç‚¹ã€‚</p><p>äº‹åŠ¡æ˜¯ä¿è¯æ•°æ®åº“æ•°æ®å®Œæ•´æ€§å’Œå®‰å…¨æ€§æœ€é‡è¦çš„æŠ€æœ¯ã€‚</p><p>äº‹åŠ¡æ˜¯è¦æ±‚ä¸€ç»„è¿ç»­çš„SQLè¯­å¥è¦ä¹ˆå…¨éƒ¨æˆåŠŸæ‰§è¡Œï¼Œè¦ä¹ˆæ•°æ®è¿”å›åˆ°å¼€å¯äº‹åŠ¡å‰çš„çŠ¶æ€ã€‚ä¸å…è®¸éƒ¨åˆ†SQLè¯­å¥æˆåŠŸï¼Œéƒ¨åˆ†ä¸æˆåŠŸã€‚</p><p>10.1ã€äº‹åŠ¡ç‰¹æ€§ï¼ˆACIDï¼‰ï¼š</p><blockquote><p>1ã€åŸå­æ€§(Atomicity):äº‹åŠ¡ä¸­çš„å¤šä¸ªæ“ä½œï¼Œä¸å¯åˆ†å‰²ï¼Œè¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½å¤±è´¥ã€‚<br>2ã€ä¸€è‡´æ€§(Consistency): äº‹åŠ¡æ“ä½œä¹‹å, æ•°æ®åº“æ‰€å¤„çš„çŠ¶æ€å’Œä¸šåŠ¡è§„åˆ™æ˜¯ä¸€è‡´çš„; æ¯”å¦‚a,bè´¦æˆ·ç›¸äº’è½¬è´¦ä¹‹åï¼Œæ€»é‡‘é¢ä¸å˜ã€‚<br>3ã€éš”ç¦»æ€§(Isolation):äº‹åŠ¡å¿…é¡»ä¸å…¶ä»–äº‹åŠ¡è¿›è¡Œçš„æ•°æ®æ›´æ”¹ç›¸éš”ç¦»ã€‚è¿™æ„å‘³ç€æ²¡æœ‰å…¶ä»–æ“ä½œå¯ä»¥æ”¹å˜ä¸­é—´æ€(æ²¡æœ‰æäº¤çš„)çš„æ•°æ®ã€‚ä¸ºäº†é¿å…ä¸­é—´æ€æ•°æ®è¢«æ›´æ”¹ï¼Œäº‹åŠ¡å¿…é¡»è¦ä¹ˆç­‰å¾…æ¥è‡ªå…¶ä»–äº‹åŠ¡çš„æ›´æ”¹è¢«æäº¤ï¼Œè¦ä¹ˆåªèƒ½æŸ¥çœ‹åˆ°å¤„äºä¸Šä¸€ä¸ªæäº¤çŠ¶æ€çš„æ•°æ®ã€‚<br>4ã€æŒä¹…æ€§(Durability):åœ¨ä¸€ä¸ªäº‹åŠ¡å®Œæˆï¼Œè¿™äº›æ›´æ”¹çš„æ•°æ®å°†æ°¸ä¹…å­˜åœ¨ã€‚</p></blockquote><p>10.2ã€äº‹åŠ¡ä½¿ç”¨åœºæ™¯ï¼š</p><blockquote><ol><li>æ“ä½œæ­¥éª¤éœ€è¦å›æ»šçš„ã€‚æ¯”å¦‚ï¼Œé“¶è¡Œè½¬è´¦ã€è´­ç‰©ä¸‹å•ç­‰ã€‚</li><li>é‡åˆ°å¼‚å¸¸æƒ…å†µï¼Œæ•°æ®éœ€è¦å›æ»šçš„ã€‚æ¯”å¦‚ï¼Œæ–­ç”µã€ç£ç›˜åæ­»ç­‰ã€‚</li></ol></blockquote><p>10.3ã€äº‹åŠ¡çš„ä½¿ç”¨ï¼š</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">start</span> <span class="hljs-keyword">transaction</span>;<br><span class="hljs-keyword">insert</span> è¯­å¥<br><span class="hljs-keyword">delete</span> è¯­å¥<br><span class="hljs-keyword">update</span> è¯­å¥<br><span class="hljs-keyword">select</span> è¯­å¥<br><span class="hljs-keyword">commit</span>;<br></code></pre></td></tr></table></figure><p>10.3.1ã€å¼€å§‹äº‹åŠ¡</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">start</span> <span class="hljs-keyword">transaction</span>;<br></code></pre></td></tr></table></figure><p>10.3.2ã€æ’¤é”€äº‹åŠ¡</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">rollback<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><p>10.3.3ã€æäº¤äº‹åŠ¡</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">commit<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><p>ä¸¾ä¾‹ï¼š</p><blockquote><p>åˆ˜å¤‡å‘æ›¹æ“å€Ÿ2000å…ƒé’±ã€‚</p><p>åˆ†æï¼š</p><p>ç¬¬ä¸€æ­¥ï¼Œå…ˆå¼€å¯äº‹åŠ¡ã€‚</p><p>ç¬¬äºŒæ­¥ï¼Œå…ˆåˆ¤æ–­æ›¹æ“çš„è´¦æˆ·å€¼æ˜¯å¤§äºç­‰äº2000ï¼Œå¦‚æœåˆ¤æ–­ä¸ºå‡ï¼Œå›æ»šäº‹åŠ¡ã€‚å¦‚æœåˆ¤æ–­ä¸ºçœŸï¼Œç»§ç»­ã€‚</p><p>ç¬¬ä¸‰æ­¥ï¼Œæ›´æ–°æ›¹æ“çš„è´¦æˆ·å€¼ï¼Œå‡2000ã€‚å¦‚æœæ‰§è¡Œå¤±è´¥ï¼Œå›æ»šäº‹åŠ¡ã€‚å¦‚æœæ‰§è¡ŒæˆåŠŸï¼Œç»§ç»­ã€‚</p><p>ç¬¬å››æ­¥ï¼Œæ›´æ–°åˆ˜å¤‡çš„è´¦æˆ·å€¼ï¼ŒåŠ 2000ã€‚å¦‚æœæ‰§è¡Œå¤±è´¥ï¼Œå›æ»šäº‹åŠ¡ã€‚å¦‚æœæ‰§è¡ŒæˆåŠŸï¼Œç»§ç»­ã€‚</p><p>ç¬¬äº”æ­¥ï¼Œæäº¤äº‹åŠ¡ã€‚</p></blockquote><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">start</span> <span class="hljs-keyword">transaction</span>;<br><span class="hljs-keyword">select</span> <span class="hljs-type">money</span> <span class="hljs-keyword">from</span> student <span class="hljs-keyword">where</span> stu_id=<span class="hljs-number">14</span>;<br><span class="hljs-meta">#rollback;</span><br><span class="hljs-keyword">update</span> student <span class="hljs-keyword">set</span> <span class="hljs-type">money</span>=<span class="hljs-type">money</span><span class="hljs-number">-2000</span> <span class="hljs-keyword">where</span> stu_id=<span class="hljs-number">14</span>;<br><span class="hljs-meta">#rollback;</span><br><span class="hljs-keyword">update</span> student <span class="hljs-keyword">set</span> <span class="hljs-type">money</span>=<span class="hljs-type">money</span>+<span class="hljs-number">2000</span> <span class="hljs-keyword">where</span> stu_id=<span class="hljs-number">17</span>;<br><span class="hljs-meta">#rollback;</span><br><span class="hljs-keyword">commit</span>;<br></code></pre></td></tr></table></figure><h3 id="11ã€å‡½æ•°"><a href="#11ã€å‡½æ•°" class="headerlink" title="11ã€å‡½æ•°"></a>11ã€å‡½æ•°</h3><h4 id="2-1ã€èšé›†å‡½æ•°"><a href="#2-1ã€èšé›†å‡½æ•°" class="headerlink" title="2.1ã€èšé›†å‡½æ•°"></a>2.1ã€èšé›†å‡½æ•°</h4><p>1ã€Count:æ€»è®°å½•æ•°å­—</p><p>2ã€Sumï¼šæ±‚å’Œ</p><p>3ã€Avgï¼šå¹³å‡å€¼</p><p>4ã€Maxï¼šæœ€å¤§å€¼</p><p>5ã€Minï¼šæœ€å°å€¼</p><h4 id="2-2ã€CAST-å‡½æ•°"><a href="#2-2ã€CAST-å‡½æ•°" class="headerlink" title="2.2ã€CAST()å‡½æ•°"></a>2.2ã€CAST()å‡½æ•°</h4><p>æ•°æ®ç±»å‹è½¬æ¢å¯ä»¥é€šè¿‡CAST()å’ŒCONVERT()å‡½æ•°æ¥å®ç°ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°æ˜¯é‡å çš„ï¼Œå®ƒä»¬åæ˜ äº†SQLè¯­è¨€çš„æ¼”åŒ–å†å²ã€‚è¿™ä¸¤ä¸ªå‡½æ•°çš„åŠŸèƒ½ç›¸ä¼¼ï¼Œä¸è¿‡å®ƒä»¬çš„è¯­æ³•ä¸åŒã€‚è™½ç„¶å¹¶éæ‰€æœ‰ç±»å‹çš„å€¼éƒ½èƒ½è½¬å˜ä¸ºå…¶ä»–æ•°æ®ç±»å‹ï¼Œä½†æ€»çš„æ¥è¯´ï¼Œä»»ä½•å¯ä»¥è½¬æ¢çš„å€¼éƒ½å¯ä»¥ç”¨ç®€å•çš„å‡½æ•°å®ç°è½¬æ¢ã€‚</p><p>CAST()å‡½æ•°çš„å‚æ•°æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå®ƒåŒ…æ‹¬ç”¨ASå…³é”®å­—åˆ†éš”çš„æºå€¼å’Œç›®æ ‡æ•°æ®ç±»å‹ã€‚è¯­æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">cast</span><span class="hljs-params">(å€¼ as ç±»å‹)</span></span><br><span class="hljs-function"><span class="hljs-title">cast</span><span class="hljs-params">(<span class="hljs-string">&#x27;123&#x27;</span> as SIGNED)</span></span> å°†<span class="hljs-number">123</span>è½¬æ¢ä¸ºintç±»å‹ï¼Œè¿”å›å€¼ä¸ºæ•´å‹ç±»å‹<br></code></pre></td></tr></table></figure><p><strong>æ€è€ƒï¼š</strong>è‹¥å¦‚æœè¯•å›¾å°†ä¸€ä¸ªä»£è¡¨å°æ•°çš„å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•´å‹å€¼ï¼Œåˆä¼šå‡ºç°ä»€ä¹ˆæƒ…å†µå‘¢ï¼Ÿ</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">cast</span><span class="hljs-params">(<span class="hljs-string">&#x27;123.4&#x27;</span> as SIGNED)</span></span><br></code></pre></td></tr></table></figure><p>CAST()å‡½æ•°å’ŒCONVERT()å‡½æ•°éƒ½ä¸èƒ½æ‰§è¡Œå››èˆäº”å…¥æˆ–æˆªæ–­æ“ä½œã€‚ç”±äº123.4ä¸èƒ½ç”¨intæ•°æ®ç±»å‹æ¥è¡¨ç¤ºï¼Œæ‰€ä»¥å¯¹è¿™ä¸ªå‡½æ•°è°ƒç”¨å°†äº§ç”Ÿä¸€ä¸ªé”™è¯¯ã€‚è¦è¿”å›ä¸€ä¸ªåˆæ³•çš„æ•°å€¼ï¼Œå°±å¿…é¡»ä½¿ç”¨èƒ½å¤„ç†è¿™ä¸ªå€¼çš„æ•°æ®ç±»å‹ã€‚å¯¹äºè¿™ä¸ªä¾‹å­ï¼Œå­˜åœ¨å¤šä¸ªå¯ç”¨çš„æ•°æ®ç±»å‹ã€‚å¦‚æœé€šè¿‡CAST()å‡½æ•°å°†è¿™ä¸ªå€¼è½¬æ¢ä¸º<strong>decimalç±»å‹</strong>ï¼Œéœ€è¦é¦–å…ˆå®šä¹‰decimalå€¼çš„ç²¾åº¦ä¸å°æ•°ä½æ•°ã€‚</p><h4 id="2-3ã€DECIMALç±»å‹"><a href="#2-3ã€DECIMALç±»å‹" class="headerlink" title="2.3ã€DECIMALç±»å‹"></a>2.3ã€DECIMALç±»å‹</h4><p>MySQL DECIMALæ•°æ®ç±»å‹ç”¨äºåœ¨æ•°æ®åº“ä¸­å­˜å‚¨ç²¾ç¡®çš„æ•°å€¼ã€‚æˆ‘ä»¬ç»å¸¸å°†DECIMALæ•°æ®ç±»å‹ç”¨äºä¿ç•™å‡†ç¡®ç²¾ç¡®åº¦çš„åˆ—ï¼Œä¾‹å¦‚ä¼šè®¡ç³»ç»Ÿä¸­çš„è´§å¸æ•°æ®ã€‚</p><p>è¦å®šä¹‰æ•°æ®ç±»å‹ä¸ºDECIMALçš„åˆ—ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹è¯­æ³•ï¼š</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs excel"><span class="hljs-built_in">column</span> <span class="hljs-built_in">decimal</span>(P,D)<br></code></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„è¯­æ³•ä¸­ï¼š</p><ul><li>  Pæ˜¯è¡¨ç¤ºæœ‰æ•ˆæ•°å­—æ•°çš„ç²¾åº¦ã€‚ PèŒƒå›´ä¸º<code>1ã€œ65</code>ã€‚</li><li>  Dæ˜¯è¡¨ç¤ºå°æ•°ç‚¹åçš„ä½æ•°ã€‚ Dçš„èŒƒå›´æ˜¯<code>0~30</code>ã€‚MySQLè¦æ±‚D&lt;=Pã€‚</li></ul><p>DECIMAL(Pï¼ŒD)è¡¨ç¤ºåˆ—å¯ä»¥å­˜å‚¨Dä½å°æ•°çš„Pä½æ•°ã€‚åè¿›åˆ¶åˆ—çš„å®é™…èŒƒå›´å–å†³äºç²¾åº¦å’Œåˆ»åº¦ã€‚</p><p>ç»¼ä¸Šï¼Œå¯ä»¥å°†ä¸Šè¿°å°æ•°è½¬æ¢ä¸ºæ•´æ•°ï¼š</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">select</span> cast(<span class="hljs-string">&#x27;123.4&#x27;</span> <span class="hljs-keyword">as</span> <span class="hljs-type">decimal</span>(P,D))<br></code></pre></td></tr></table></figure><h4 id="2-4ã€convert-å‡½æ•°"><a href="#2-4ã€convert-å‡½æ•°" class="headerlink" title="2.4ã€convert()å‡½æ•°"></a>2.4ã€convert()å‡½æ•°</h4><p>å¯¹äºç®€å•ç±»å‹è½¬æ¢ï¼ŒCONVERT()å‡½æ•°å’ŒCAST()å‡½æ•°çš„åŠŸèƒ½ç›¸åŒï¼Œåªæ˜¯è¯­æ³•ä¸åŒã€‚CAST()å‡½æ•°ä¸€èˆ¬æ›´å®¹æ˜“ä½¿ç”¨ï¼Œå…¶åŠŸèƒ½ä¹Ÿæ›´ç®€å•ã€‚è¯­æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">select</span> convert(expr, <span class="hljs-keyword">type</span>)<br><span class="hljs-keyword">select</span> convert(<span class="hljs-string">&#x27;123&#x27;</span>,signed)<br></code></pre></td></tr></table></figure><p>å¯ä»¥è½¬æ¢çš„ç±»å‹æ˜¯æœ‰é™åˆ¶çš„ã€‚è¿™ä¸ªç±»å‹å¯ä»¥æ˜¯ä»¥ä¸‹å€¼å…¶ä¸­çš„ä¸€ä¸ªï¼š</p><ul><li>  äºŒè¿›åˆ¶ï¼ŒåŒå¸¦binaryå‰ç¼€çš„æ•ˆæœ : BINARY  </li><li>  å­—ç¬¦å‹ï¼Œå¯å¸¦å‚æ•° : CHAR()   </li><li>  æ—¥æœŸ : DATE   </li><li>  æ—¶é—´: TIME   </li><li>  æ—¥æœŸæ—¶é—´å‹ : DATETIME   </li><li>  æµ®ç‚¹æ•° : DECIMAL   </li><li>  æ•´æ•° : SIGNED   </li><li>  æ— ç¬¦å·æ•´æ•° : UNSIGNED</li></ul><h4 id="2-5ã€IFNULL"><a href="#2-5ã€IFNULL" class="headerlink" title="2.5ã€IFNULL"></a>2.5ã€IFNULL</h4><p>IFNULL() å‡½æ•°ç”¨äºåˆ¤æ–­ç¬¬ä¸€ä¸ªè¡¨è¾¾å¼æ˜¯å¦ä¸º NULLï¼Œå¦‚æœä¸º NULL åˆ™è¿”å›ç¬¬äºŒä¸ªå‚æ•°çš„å€¼ï¼Œå¦‚æœä¸ä¸º NULL åˆ™è¿”å›ç¬¬ä¸€ä¸ªå‚æ•°çš„å€¼ã€‚</p><p>IFNULL() å‡½æ•°è¯­æ³•æ ¼å¼ä¸ºï¼š</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-constructor">IFNULL(<span class="hljs-params">expression</span>, <span class="hljs-params">alt_value</span>)</span><br></code></pre></td></tr></table></figure><p>å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°çš„è¡¨è¾¾å¼ expression ä¸º NULLï¼Œåˆ™è¿”å›ç¬¬äºŒä¸ªå‚æ•°çš„å¤‡ç”¨å€¼ã€‚</p><h4 id="2-6ã€è‡ªå®šä¹‰å‡½æ•°"><a href="#2-6ã€è‡ªå®šä¹‰å‡½æ•°" class="headerlink" title="2.6ã€è‡ªå®šä¹‰å‡½æ•°"></a>2.6ã€è‡ªå®šä¹‰å‡½æ•°</h4><p>è¯­æ³•æ ¼å¼ï¼š</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs actionscript">create <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(å‚æ•°å å‚æ•°ç±»å‹,<span class="hljs-rest_arg">...) </span></span></span><br><span class="hljs-function"><span class="hljs-params"><span class="hljs-rest_arg">returns</span> è¿”å›å€¼ç±»å‹</span></span><br><span class="hljs-function"><span class="hljs-params">begin</span></span><br><span class="hljs-function"><span class="hljs-params">sql<span class="hljs-rest_arg">...</span></span></span><br><span class="hljs-function"><span class="hljs-params"><span class="hljs-rest_arg">return</span> 0;</span></span><br><span class="hljs-function"><span class="hljs-params">end;</span></span><br></code></pre></td></tr></table></figure><p>è°ƒç”¨æ–¹å¼ï¼š</p><p>å’Œä½¿ç”¨MySQLè‡ªå¸¦çš„å‡½æ•°ä¸€æ ·çš„æ–¹å¼</p><p>ç¤ºä¾‹ä»£ç :</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">function</span> mysum(num1 <span class="hljs-type">int</span>,num2 <span class="hljs-type">int</span>) <br><span class="hljs-keyword">returns</span> <span class="hljs-type">int</span> <br><span class="hljs-keyword">begin</span><br><br><span class="hljs-keyword">return</span> num1+num2;<br><span class="hljs-keyword">end</span>;<br><span class="hljs-keyword">select</span> mysum(<span class="hljs-number">123</span>,<span class="hljs-number">234</span>);<br></code></pre></td></tr></table></figure><h3 id="12ã€å­˜å‚¨è¿‡ç¨‹"><a href="#12ã€å­˜å‚¨è¿‡ç¨‹" class="headerlink" title="12ã€å­˜å‚¨è¿‡ç¨‹"></a>12ã€å­˜å‚¨è¿‡ç¨‹</h3><h4 id="12-1ã€ä»€ä¹ˆæ˜¯å­˜å‚¨è¿‡ç¨‹"><a href="#12-1ã€ä»€ä¹ˆæ˜¯å­˜å‚¨è¿‡ç¨‹" class="headerlink" title="12.1ã€ä»€ä¹ˆæ˜¯å­˜å‚¨è¿‡ç¨‹"></a>12.1ã€ä»€ä¹ˆæ˜¯å­˜å‚¨è¿‡ç¨‹</h4><p>å­˜å‚¨è¿‡ç¨‹(Stored Procedure)ï¼šä¸€ç»„å¯ç¼–ç¨‹çš„å‡½æ•°ï¼Œæ˜¯ä¸ºäº†å®Œæˆç‰¹å®šåŠŸèƒ½çš„SQLè¯­å¥é›†ï¼Œç»ç¼–è¯‘åˆ›å»ºå¹¶ä¿å­˜åœ¨æ•°æ®åº“ä¸­ï¼Œç”¨æˆ·å¯é€šè¿‡æŒ‡å®šå­˜å‚¨è¿‡ç¨‹çš„åå­—å¹¶ç»™å®šå‚æ•°(éœ€è¦æ—¶)æ¥è°ƒç”¨æ‰§è¡Œã€‚</p><h4 id="12-2ã€ä¸ºä»€ä¹ˆå­˜å‚¨è¿‡ç¨‹"><a href="#12-2ã€ä¸ºä»€ä¹ˆå­˜å‚¨è¿‡ç¨‹" class="headerlink" title="12.2ã€ä¸ºä»€ä¹ˆå­˜å‚¨è¿‡ç¨‹"></a>12.2ã€ä¸ºä»€ä¹ˆå­˜å‚¨è¿‡ç¨‹</h4><p>â‘ å°†é‡å¤æ€§å¾ˆé«˜çš„ä¸€äº›æ“ä½œï¼Œå°è£…åˆ°ä¸€ä¸ªå­˜å‚¨è¿‡ç¨‹ä¸­ï¼Œç®€åŒ–äº†å¯¹è¿™äº›SQLçš„è°ƒç”¨</p><p>â‘¡æ‰¹é‡å¤„ç†ï¼šSQL+å¾ªç¯ï¼Œå‡å°‘æµé‡ï¼Œä¹Ÿå°±æ˜¯â€œè·‘æ‰¹â€</p><p>â‘¢ç»Ÿä¸€æ¥å£ï¼Œç¡®ä¿æ•°æ®çš„å®‰å…¨</p><p>â‘£æ€§èƒ½æ¯”è¾ƒé«˜</p><p>ç›¸å¯¹äºoracleæ•°æ®åº“æ¥è¯´ï¼ŒMySQLçš„å­˜å‚¨è¿‡ç¨‹ç›¸å¯¹åŠŸèƒ½è¾ƒå¼±ï¼Œä½¿ç”¨è¾ƒå°‘ã€‚</p><h4 id="12-3ã€å¦‚ä½•ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹"><a href="#12-3ã€å¦‚ä½•ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹" class="headerlink" title="12.3ã€å¦‚ä½•ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹"></a>12.3ã€å¦‚ä½•ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹</h4><h5 id="12-3-1ã€åˆ›å»ºå­˜å‚¨è¿‡ç¨‹"><a href="#12-3-1ã€åˆ›å»ºå­˜å‚¨è¿‡ç¨‹" class="headerlink" title="12.3.1ã€åˆ›å»ºå­˜å‚¨è¿‡ç¨‹"></a>12.3.1ã€åˆ›å»ºå­˜å‚¨è¿‡ç¨‹</h5><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs oxygene">DELIMITER <span class="hljs-comment">//</span><br><span class="hljs-keyword">create</span> <span class="hljs-function"><span class="hljs-keyword">procedure</span> å­˜å‚¨è¿‡ç¨‹å<span class="hljs-params">([å­˜å‚¨è¿‡ç¨‹å‚æ•°åˆ—è¡¨])</span></span><br><span class="hljs-function"><span class="hljs-title">begin</span></span><br><span class="hljs-function"><span class="hljs-title">set</span> å‚æ•°å=å‚æ•°;</span><br>SQLè¯­å¥<br><span class="hljs-keyword">end</span> <span class="hljs-comment">//</span><br><br></code></pre></td></tr></table></figure><h5 id="12-3-2ã€ä¸ºä»€ä¹ˆä½¿ç”¨delimiterï¼Ÿ"><a href="#12-3-2ã€ä¸ºä»€ä¹ˆä½¿ç”¨delimiterï¼Ÿ" class="headerlink" title="12.3.2ã€ä¸ºä»€ä¹ˆä½¿ç”¨delimiterï¼Ÿ"></a>12.3.2ã€ä¸ºä»€ä¹ˆä½¿ç”¨delimiterï¼Ÿ</h5><p>mysqlé»˜è®¤ä»¥åˆ†å·ä½œä¸ºsqlè¯­å¥çš„ç»“æŸæ¥è¿›è¡Œæ‰§è¡Œï¼Œå½“æˆ‘ä»¬åœ¨åˆ›å»ºå­˜å‚¨è¿‡ç¨‹æ—¶ï¼Œä¸ºäº†ä¸è®©å®Œæ•´çš„å­˜å‚¨è¿‡ç¨‹è¯­å¥ç”±äºåˆ†å·è€Œæå‰æ‰§è¡Œï¼Œéœ€è¦ä¸´æ—¶è§„å®šä»¥//æˆ–è€…$$æ¥ä½œä¸ºç»“æŸç¬¦å·ã€‚è¿™æ ·çš„è¯ï¼Œåˆ›å»ºå­˜å‚¨è¿‡ç¨‹æ—¶ï¼Œä¸­é—´çš„åˆ†å·ä¼šè¢«å¿½ç•¥ï¼Œç›´åˆ°é‡åˆ°//ç¬¦å·æ‰æ‰§è¡Œè¯­å¥ã€‚</p><h5 id="12-3-3ã€å­˜å‚¨è¿‡ç¨‹å‚æ•°åˆ†ç±»"><a href="#12-3-3ã€å­˜å‚¨è¿‡ç¨‹å‚æ•°åˆ†ç±»" class="headerlink" title="12.3.3ã€å­˜å‚¨è¿‡ç¨‹å‚æ•°åˆ†ç±»"></a>12.3.3ã€å­˜å‚¨è¿‡ç¨‹å‚æ•°åˆ†ç±»</h5><p>å­˜å‚¨è¿‡ç¨‹å¯ä»¥æœ‰0ä¸ªæˆ–å¤šä¸ªå‚æ•°ï¼Œç”¨äºå­˜å‚¨è¿‡ç¨‹çš„å®šä¹‰ã€‚</p><p>3ç§å‚æ•°ç±»å‹ï¼š</p><p><strong>INè¾“å…¥å‚æ•°</strong>ï¼šè¡¨ç¤ºè°ƒç”¨è€…å‘è¿‡ç¨‹ä¼ å…¥å€¼ï¼ˆä¼ å…¥å€¼å¯ä»¥æ˜¯å­—é¢é‡æˆ–å˜é‡ï¼‰</p><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs oxygene">delimiter <span class="hljs-comment">//</span><br><span class="hljs-keyword">create</span> <span class="hljs-function"><span class="hljs-keyword">procedure</span> å­˜å‚¨è¿‡ç¨‹<span class="hljs-params">(<span class="hljs-keyword">in</span> å˜é‡å ç±»å‹)</span></span><br><span class="hljs-function"><span class="hljs-title">begin</span></span><br><span class="hljs-function"><span class="hljs-title">set</span> å˜é‡å=å€¼;</span><br>SQLè¯­å¥<br><span class="hljs-keyword">end</span> <span class="hljs-comment">//</span><br><br>call å­˜å‚¨è¿‡ç¨‹å(å‚æ•°å€¼)<br></code></pre></td></tr></table></figure><p><strong>OUTè¾“å‡ºå‚æ•°</strong>ï¼šè¡¨ç¤ºè¿‡ç¨‹å‘è°ƒç”¨è€…ä¼ å‡ºå€¼(å¯ä»¥è¿”å›å¤šä¸ªå€¼)ï¼ˆä¼ å‡ºå€¼åªèƒ½æ˜¯å˜é‡ï¼‰</p><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs oxygene">delimiter <span class="hljs-comment">//</span><br><span class="hljs-keyword">create</span> <span class="hljs-function"><span class="hljs-keyword">procedure</span> å­˜å‚¨è¿‡ç¨‹<span class="hljs-params">(<span class="hljs-keyword">out</span> å˜é‡å ç±»å‹)</span></span><br><span class="hljs-function"><span class="hljs-title">begin</span></span><br><span class="hljs-function">    <span class="hljs-title">set</span> å˜é‡å=å€¼;</span><br>    SQLè¯­å¥<br><span class="hljs-keyword">end</span> <span class="hljs-comment">//</span><br>call å­˜å‚¨è¿‡ç¨‹å(å‚æ•°å€¼)<br></code></pre></td></tr></table></figure><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs oxygene"><span class="hljs-keyword">create</span> <span class="hljs-function"><span class="hljs-keyword">procedure</span> <span class="hljs-title">out_param</span><span class="hljs-params">(<span class="hljs-keyword">out</span> p_out int)</span></span><br><span class="hljs-function">      <span class="hljs-title">begin</span></span><br><span class="hljs-function">        <span class="hljs-title">select</span> <span class="hljs-title">p_out</span>;</span><br>        <span class="hljs-keyword">set</span> p_out=<span class="hljs-number">2</span>;<br>        <span class="hljs-keyword">select</span> p_out;<br>      <span class="hljs-keyword">end</span><br><br><span class="hljs-keyword">set</span> @p_out=<span class="hljs-number">1</span>;<br>call out_param(@p_out);<br><span class="hljs-keyword">select</span> @p_out;<br></code></pre></td></tr></table></figure><p><strong>INOUTè¾“å…¥è¾“å‡ºå‚æ•°</strong>ï¼šæ—¢è¡¨ç¤ºè°ƒç”¨è€…å‘è¿‡ç¨‹ä¼ å…¥å€¼ï¼Œåˆè¡¨ç¤ºè¿‡ç¨‹å‘è°ƒç”¨è€…ä¼ å‡ºå€¼ï¼ˆå€¼åªèƒ½æ˜¯å˜é‡ï¼‰</p><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs oxygene"><span class="hljs-keyword">create</span> <span class="hljs-function"><span class="hljs-keyword">procedure</span> <span class="hljs-title">out_param</span><span class="hljs-params">(inout p_out int)</span></span><br><span class="hljs-function">  <span class="hljs-title">begin</span></span><br><span class="hljs-function">   <span class="hljs-title">select</span> <span class="hljs-title">p_out</span>;</span><br>   <span class="hljs-keyword">set</span> p_out=<span class="hljs-number">2</span>;<br>   <span class="hljs-keyword">select</span> p_out;<br>  <span class="hljs-keyword">end</span><br><span class="hljs-keyword">set</span> @p_out=<span class="hljs-number">1</span>;<br>call out_param(@p_out);<br><span class="hljs-keyword">select</span> @p_out;<br></code></pre></td></tr></table></figure><h5 id="12-3-4ã€è°ƒç”¨å­˜å‚¨è¿‡ç¨‹"><a href="#12-3-4ã€è°ƒç”¨å­˜å‚¨è¿‡ç¨‹" class="headerlink" title="12.3.4ã€è°ƒç”¨å­˜å‚¨è¿‡ç¨‹"></a>12.3.4ã€è°ƒç”¨å­˜å‚¨è¿‡ç¨‹</h5><p>è°ƒç”¨å­˜å‚¨è¿‡ç¨‹è¯­æ³•</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-keyword">set</span> @å‚æ•°å<br><span class="hljs-keyword">call</span> å­˜å‚¨è¿‡ç¨‹åå­—([å‚æ•°])<br></code></pre></td></tr></table></figure><h3 id="13ã€æ­£åˆ™è¡¨è¾¾å¼"><a href="#13ã€æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="13ã€æ­£åˆ™è¡¨è¾¾å¼"></a>13ã€æ­£åˆ™è¡¨è¾¾å¼</h3><p>åœ¨å‰é¢çš„ç« èŠ‚æˆ‘ä»¬å·²ç»äº†è§£åˆ°MySQLå¯ä»¥é€šè¿‡ LIKE â€¦%æ¥è¿›è¡Œæ¨¡ç³ŠåŒ¹é…ã€‚ </p><p>MySQL åŒæ ·ä¹Ÿæ”¯æŒå…¶ä»–æ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…ï¼Œ MySQLä¸­ä½¿ç”¨ REGEXP æ“ä½œç¬¦æ¥è¿›è¡Œæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…</p><p><img src="/2019/11/16/MySQL/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F.png"></p><p>éœ€æ±‚ï¼šæŸ¥æ‰¾nameå­—æ®µä¸­ä»¥â€™Yâ€™ä¸ºå¼€å¤´çš„æ‰€æœ‰æ•°æ®ï¼š</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">SELECT</span> <span class="hljs-type">name</span> <span class="hljs-keyword">FROM</span> emp <span class="hljs-keyword">WHERE</span> <span class="hljs-type">name</span> REGEXP <span class="hljs-string">&#x27;^Y&#x27;</span>;<br></code></pre></td></tr></table></figure><h3 id="14ã€æ•°æ®å¤‡ä»½"><a href="#14ã€æ•°æ®å¤‡ä»½" class="headerlink" title="14ã€æ•°æ®å¤‡ä»½"></a>14ã€æ•°æ®å¤‡ä»½</h3><p>åœ¨å‘½ä»¤è¡Œçª—å£è¿›è¡Œï¼Œè‹¥æ“ä½œç³»ç»Ÿç‰ˆæœ¬é«˜ï¼Œåˆ™ä½¿ç”¨ç®¡ç†å‘˜æ¨¡å¼</p><p>å¯¼å‡ºï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs css">mysqldump -uè´¦æˆ· -<span class="hljs-selector-tag">p</span>å¯†ç  æ•°æ®åº“åç§°&gt;è„šæœ¬æ–‡ä»¶å­˜å‚¨åœ°<br>mysqldump -uroot -padmin jdbcdemo&gt; C:/shop_bak.sql<br></code></pre></td></tr></table></figure><p>å¯¼å…¥ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs css">mysql -uè´¦æˆ· -<span class="hljs-selector-tag">p</span>å¯†ç  æ•°æ®åº“åç§°&lt; è„šæœ¬æ–‡ä»¶å­˜å‚¨åœ°å€<br>mysql -uroot -padmin jdbcdemo&lt; C:/shop_bak.sql<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨å¯è§†åŒ–å¯¼å…¥å¯¼å‡ºï¼ŒNavicatå·¥å…·çš„å¯¼å…¥å’Œå¯¼å‡º/Navicatå·¥å…·çš„å¤‡ä»½å’Œè¿˜åŸ</p><h3 id="15ã€ä»å®¹é¢è¯•"><a href="#15ã€ä»å®¹é¢è¯•" class="headerlink" title="15ã€ä»å®¹é¢è¯•"></a>15ã€ä»å®¹é¢è¯•</h3><p>1ã€è¯´è¯´è‡ªè¿æ¥çš„åº”ç”¨åœºæ™¯ï¼›</p><p>2ã€ä½ ä¸€èˆ¬éƒ½ä½¿ç”¨ä»€ä¹ˆæ–¹å¼è¿›è¡Œæ•°æ®å¤‡ä»½ï¼Œåœ¨ä½ ä¹‹å‰çš„é¡¹ç›®ä¸­å¤‡ä»½çš„å‘¨æœŸéƒ½æ˜¯å¤šå°‘ï¼Ÿ</p>]]></content>
    
    
    <categories>
      
      <category>MySQL</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ•°æ®åº“</tag>
      
      <tag>MySQL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>FTPæœåŠ¡æ­å»º</title>
    <link href="/2019/11/15/FTP%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA/"/>
    <url>/2019/11/15/FTP%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA/</url>
    
    <content type="html"><![CDATA[<h2 id="FTPæœåŠ¡æ­å»º"><a href="#FTPæœåŠ¡æ­å»º" class="headerlink" title="FTPæœåŠ¡æ­å»º"></a>FTPæœåŠ¡æ­å»º</h2><p><a href="https://baike.baidu.com/item/FTP%E5%8D%8F%E8%AE%AE">FTPåè®®</a>ï¼ˆFile Transfer Protocolï¼Œæ–‡ä»¶ä¼ è¾“åè®®ï¼‰ æ˜¯ TCP/IP åè®®ç»„ä¸­çš„åè®®ä¹‹ä¸€ã€‚</p><p>FTPåè®®ä¸¤éƒ¨åˆ†ç»„æˆï¼Œ<code>FTPæœåŠ¡å™¨</code>å’Œ<code>FTPå®¢æˆ·ç«¯</code>ã€‚å…¶ä¸­FTPæœåŠ¡å™¨ç”¨æ¥å­˜å‚¨æ–‡ä»¶ï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨FTPå®¢æˆ·ç«¯é€šè¿‡FTPåè®®è®¿é—®ä½äºFTPæœåŠ¡å™¨ä¸Šçš„èµ„æºã€‚</p><p>åœ¨å¼€å‘ç½‘ç«™çš„æ—¶å€™ï¼Œé€šå¸¸åˆ©ç”¨FTPåè®®æŠŠç½‘é¡µæˆ–ç¨‹åºä¼ åˆ°WebæœåŠ¡å™¨ä¸Šã€‚æ­¤å¤–ï¼Œç”±äºFTPä¼ è¾“æ•ˆç‡éå¸¸é«˜ï¼Œåœ¨ç½‘ç»œä¸Šä¼ è¾“å¤§çš„æ–‡ä»¶æ—¶ï¼Œä¸€èˆ¬ä¹Ÿé‡‡ç”¨è¯¥åè®®ã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹FTPåè®®ä½¿ç”¨TCPç«¯å£ä¸­çš„ <code>20[ä¼ è¾“æ•°æ®]</code>å’Œ<code>21[ä¼ è¾“æ§åˆ¶ä¿¡æ¯]</code>è¿™ä¸¤ä¸ªç«¯å£ã€‚<strong>ä½†æ˜¯ï¼Œæ˜¯å¦ä½¿ç”¨20ä½œä¸ºä¼ è¾“æ•°æ®çš„ç«¯å£ä¸FTPä½¿ç”¨çš„ä¼ è¾“æ¨¡å¼æœ‰å…³</strong>ã€‚</p><p>FTPæ”¯æŒä¸¤ç§ä¼ è¾“æ¨¡å¼ï¼Œå¦‚æœé‡‡ç”¨<code>ä¸»åŠ¨æ¨¡å¼ï¼ˆStandardä¹Ÿå°±æ˜¯ PORTæ–¹å¼ï¼‰</code>ï¼Œé‚£ä¹ˆæ•°æ®ä¼ è¾“ç«¯å£å°±æ˜¯20ï¼›å¦‚æœé‡‡ç”¨<code>è¢«åŠ¨æ¨¡å¼ ï¼ˆPassiveä¹Ÿå°±æ˜¯PASVæ–¹å¼ï¼‰</code>ï¼Œåˆ™å…·ä½“æœ€ç»ˆä½¿ç”¨å“ªä¸ªç«¯å£è¦<code>æœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯åå•†å†³å®š</code>ã€‚</p><blockquote><p><strong>Standardæ¨¡å¼ï¼š</strong>FTP å®¢æˆ·ç«¯é¦–å…ˆå’ŒFTPæœåŠ¡å™¨çš„TCP 21ç«¯å£å»ºç«‹è¿æ¥ï¼Œé€šè¿‡è¿™ä¸ªé€šé“å‘é€å‘½ä»¤ï¼Œå®¢æˆ·ç«¯éœ€è¦æ¥æ”¶æ•°æ®çš„æ—¶å€™åœ¨è¿™ä¸ªé€šé“ä¸Šå‘é€PORTå‘½ä»¤ã€‚ PORTå‘½ä»¤åŒ…å«äº†<code>å®¢æˆ·ç«¯ç”¨ä»€ä¹ˆç«¯å£æ¥æ”¶æ•°æ®</code>ï¼Œåœ¨ä¼ é€æ•°æ®çš„æ—¶å€™ï¼Œ<code>æœåŠ¡å™¨ç«¯é€šè¿‡è‡ªå·±çš„TCP 20ç«¯å£</code>è¿æ¥è‡³å®¢æˆ·ç«¯çš„æŒ‡å®šç«¯å£å‘é€æ•°æ®ï¼Œ FTP serverå¿…é¡»å’Œå®¢æˆ·ç«¯å»ºç«‹è¿™æ ·ä¸€ä¸ªæ–°çš„è¿æ¥ç”¨æ¥ä¼ é€æ•°æ®ã€‚</p><p><strong>Passiveæ¨¡å¼ï¼š</strong>åœ¨å»ºç«‹æ§åˆ¶é€šé“çš„æ—¶å€™å’ŒStandardæ¨¡å¼ç±»ä¼¼ï¼Œä½†å»ºç«‹è¿æ¥åå‘é€çš„ä¸æ˜¯Portå‘½ä»¤ï¼Œè€Œæ˜¯Pasvå‘½ä»¤ã€‚FTPæœåŠ¡å™¨æ”¶åˆ°Pasvå‘½ä»¤åï¼Œéšæœºæ‰“å¼€ä¸€ä¸ªé«˜ç«¯ç«¯å£ï¼ˆ<a href="https://baike.baidu.com/item/%E7%AB%AF%E5%8F%A3%E5%8F%B7">ç«¯å£å·</a>å¤§äº1024ï¼‰å¹¶ä¸”é€šçŸ¥å®¢æˆ·ç«¯åœ¨è¿™ä¸ªç«¯å£ä¸Šä¼ é€æ•°æ®ï¼Œå®¢æˆ·ç«¯é€šè¿‡<code>ä¸‰æ¬¡æ¡æ‰‹</code>ä¸FTPæœåŠ¡å™¨æŒ‡å®šçš„è¿™ä¸ªç«¯å£<code>å»ºç«‹æ•°æ®é€šé“</code>ï¼ŒFTPæœåŠ¡å™¨å°†é€šè¿‡è¿™ä¸ªç«¯å£è¿›è¡Œæ•°æ®çš„ä¼ é€ã€‚</p><p>å¾ˆå¤š<a href="https://baike.baidu.com/item/%E9%98%B2%E7%81%AB%E5%A2%99">é˜²ç«å¢™</a>åœ¨è®¾ç½®çš„æ—¶å€™éƒ½æ˜¯ä¸å…è®¸æ¥å—å¤–éƒ¨å‘èµ·çš„è¿æ¥çš„ï¼Œæ‰€ä»¥è®¸å¤šä½äºé˜²ç«å¢™åæˆ–å†…ç½‘çš„FTPæœåŠ¡å™¨ä¸æ”¯æŒPASVæ¨¡å¼ï¼Œå› ä¸ºå®¢æˆ·ç«¯æ— æ³•ç©¿è¿‡é˜²ç«å¢™æ‰“å¼€FTPæœåŠ¡å™¨çš„é«˜ç«¯ç«¯å£ï¼›è€Œè®¸å¤šå†…ç½‘çš„å®¢æˆ·ç«¯ä¸èƒ½ç”¨PORTæ¨¡å¼ç™»é™†FTPæœåŠ¡å™¨ï¼Œå› ä¸ºä»æœåŠ¡å™¨çš„TCP 20æ— æ³•å’Œå†…éƒ¨ç½‘ç»œçš„å®¢æˆ·ç«¯å»ºç«‹ä¸€ä¸ªæ–°çš„è¿æ¥ï¼Œé€ æˆæ— æ³•å·¥ä½œã€‚</p></blockquote><p>åŒå¤§å¤šæ•°InternetæœåŠ¡ä¸€æ ·ï¼ŒFTPä¹Ÿæ˜¯ä¸€ä¸ªå®¢æˆ·/æœåŠ¡å™¨ç³»ç»Ÿã€‚ä¾ç…§ FTP åè®®æä¾›æœåŠ¡ï¼Œè¿›è¡Œæ–‡ä»¶ä¼ é€çš„è®¡ç®—æœºå°±æ˜¯ FTPæœåŠ¡å™¨ï¼Œè€Œè¿æ¥FTPæœåŠ¡å™¨ï¼Œéµå¾ªFTPåè®®ä¸æœåŠ¡å™¨ä¼ é€æ–‡ä»¶çš„ç”µè„‘å°±æ˜¯FTPå®¢æˆ·ç«¯ã€‚ç”¨æˆ·è¦è¿ä¸ŠFTP æœåŠ¡å™¨ï¼Œå°±è¦ç”¨åˆ° FTP çš„å®¢æˆ·ç«¯è½¯ä»¶ï¼Œé€šå¸¸ Windowsè‡ªå¸¦â€œftpâ€å‘½ä»¤ï¼Œè¿™æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œçš„ FTPå®¢æˆ·ç¨‹åºï¼Œå¦å¤–å¸¸ç”¨çš„ FTP å®¢æˆ·ç¨‹åºè¿˜æœ‰FileZillaã€ CuteFTPã€Ws_FTPã€Flashfxpã€LeapFTPç­‰ã€‚</p><p>äº’è”ç½‘ä¸­æœ‰å¾ˆå¤§ä¸€éƒ¨åˆ† FTP æœåŠ¡å™¨è¢«ç§°ä¸º<code>â€œåŒ¿åâ€ï¼ˆAnonymousï¼‰FTP æœåŠ¡å™¨</code>ã€‚è¿™ç±»æœåŠ¡å™¨çš„ç›®çš„æ˜¯å‘å…¬ä¼—æä¾›æ–‡ä»¶æ‹·è´æœåŠ¡ï¼Œä¸è¦æ±‚ç”¨æˆ·äº‹å…ˆåœ¨è¯¥æœåŠ¡å™¨è¿›è¡Œç™»è®°æ³¨å†Œï¼Œä¹Ÿä¸ç”¨å–å¾—FTPæœåŠ¡å™¨çš„æˆæƒã€‚è™½ç„¶ç›®å‰ä½¿ç”¨WWWç¯å¢ƒå·²å–ä»£åŒ¿åFTPæˆä¸ºæœ€ä¸»è¦çš„ä¿¡æ¯æŸ¥è¯¢æ–¹å¼ï¼Œä½†æ˜¯åŒ¿åFTPä»æ˜¯ Internetä¸Šä¼ è¾“åˆ†å‘è½¯ä»¶çš„ä¸€ç§åŸºæœ¬æ–¹æ³•ã€‚å¦‚red hat ã€autodeskç­‰å…¬å¸çš„åŒ¿åç«™ç‚¹ã€‚</p><p>FTPåè®®çš„ä»»åŠ¡æ˜¯ä»ä¸€å°è®¡ç®—æœºå°†æ–‡ä»¶ä¼ é€åˆ°å¦ä¸€å°è®¡ç®—æœºï¼Œå®ƒä¸è¿™ä¸¤å°è®¡ç®—æœºæ‰€å¤„çš„ä½ç½®ã€è”æ¥çš„æ–¹å¼ã€ç”šè‡³æ˜¯æ˜¯å¦ä½¿ç”¨ç›¸åŒçš„æ“ä½œç³»ç»Ÿæ— å…³ã€‚å‡è®¾ä¸¤å°è®¡ç®—æœºé€šè¿‡ftpåè®®å¯¹è¯ï¼Œå¹¶ä¸”èƒ½è®¿é—®Internetï¼Œä½ å¯ä»¥ç”¨ftpå‘½ä»¤æ¥ä¼ è¾“æ–‡ä»¶ã€‚å°½ç®¡æ¯ç§æ“ä½œç³»ç»Ÿä½¿ç”¨ä¸Šæœ‰æŸä¸€äº›ç»†å¾®å·®åˆ«ï¼Œä½†æ˜¯æ¯ç§åè®®åŸºæœ¬çš„å‘½ä»¤ç»“æ„æ˜¯ç›¸åŒçš„ã€‚</p><p>FTPçš„ä¼ è¾“æ•°æ®æœ‰ä¸¤ç§æ–¹å¼ï¼š<code>ASCIIä¼ è¾“æ¨¡å¼</code>å’Œ<code>äºŒè¿›åˆ¶æ•°æ®ä¼ è¾“æ¨¡å¼</code>ã€‚æ³¨æ„ä¼ è¾“äºŒè¿›åˆ¶æ–‡ä»¶å’Œæ–‡æœ¬æ–‡ä»¶æ‰€ç”¨çš„æ•°æ®ä¼ è¾“æ¨¡å¼ã€‚ åœ¨å¤§å¤šæ•°è®¡ç®—æœºä¸Šï¼ŒASCIIæ–¹å¼ä¸€èˆ¬å‡è®¾æ¯ä¸€å­—ç¬¦çš„ç¬¬ä¸€æœ‰æ•ˆä½æ— æ„ä¹‰ï¼Œå› ä¸ºASCIIå­—ç¬¦ç»„åˆä¸ä½¿ç”¨å®ƒã€‚å¦‚æœä½ ä¼ è¾“äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæ‰€æœ‰çš„ä½éƒ½æ˜¯é‡è¦çš„ã€‚ </p><h3 id="1ã€åœ¨CentOSä¸Šå®‰è£…FTPæœåŠ¡"><a href="#1ã€åœ¨CentOSä¸Šå®‰è£…FTPæœåŠ¡" class="headerlink" title="1ã€åœ¨CentOSä¸Šå®‰è£…FTPæœåŠ¡"></a>1ã€åœ¨CentOSä¸Šå®‰è£…FTPæœåŠ¡</h3><p>vsftpd(very secure FTP daemon),æ˜¯ä¸€ä¸ªUNIXç±»æ“ä½œç³»ç»Ÿä¸Šè¿è¡ŒFTPåè®®çš„æœåŠ¡å™¨ã€‚</p><p>æ£€æµ‹ç³»ç»Ÿæ˜¯å¦å·²å®‰è£…è¿‡vsftpdï¼š        <strong>rpm -q vsftpd</strong>æˆ–<strong>vsftpd -v</strong><br>å®‰è£…ï¼š        <strong>yum -y install vsftpd</strong><br>æŸ¥çœ‹å®‰è£…ä½ç½®ï¼š    <strong>whereis vsftpd</strong><br>å¼€æœºè‡ªå¯åŠ¨ï¼š    <strong>systemctl enable vsftpd.service</strong></p><blockquote><p>Created symlink from /etc/systemd/system/multi-user.target.wants/vsftpd.service to /usr/lib/systemd/system/vsftpd.service.<br>å¦‚æœæƒ³è®©ä¸€ä¸ªè¿›ç¨‹å¼€æœºè‡ªå¯åŠ¨ï¼Œä½¿ç”¨ systemctl enable XXXX.service å‘½ä»¤å°±æ˜¯äº†<br>è®©è¿™ä¸ªç¨‹åºè‡ªå·±çš„å¯åŠ¨é…ç½®åˆ›å»ºä¸€ä¸ªé“¾æ¥åˆ°ç³»ç»Ÿçš„å¯åŠ¨é…ç½®æ–‡ä»¶ä¸‹ï¼Œç³»ç»Ÿå¼€æœºçš„æ—¶å€™å°±èƒ½è¿è¡Œ /usr/lib/systemd/system/ æ–‡ä»¶ä¸‹çš„é…ç½®æ–‡ä»¶å¯¹åº”çš„ç¨‹åºã€‚</p></blockquote><p>æœåŠ¡å¯åŠ¨/é‡å¯/åœæ­¢ï¼š    <strong>systemctl start/restart/stop vsftpd</strong><br>æŸ¥çœ‹æœåŠ¡çŠ¶æ€ï¼š    <strong>systemctl status vsftpd</strong></p><h3 id="2ã€é…ç½®æ–‡ä»¶"><a href="#2ã€é…ç½®æ–‡ä»¶" class="headerlink" title="2ã€é…ç½®æ–‡ä»¶"></a>2ã€é…ç½®æ–‡ä»¶</h3><p>vim /etc/vsftpd/vsftpd.conf</p><p>vimç¼–è¾‘å™¨:set numberæ˜¾ç¤ºè¡Œå·</p><p>æ³¨æ„ï¼švsftpd é…ç½®æ–‡ä»¶å¦‚æœä¿®æ”¹ï¼Œéœ€è¦é‡æ–°å¯åŠ¨ vsftpd ï¼šsystemctl restart vsftpd.service</p><h4 id="2-1ã€åŒ¿åæƒé™æ§åˆ¶"><a href="#2-1ã€åŒ¿åæƒé™æ§åˆ¶" class="headerlink" title="2.1ã€åŒ¿åæƒé™æ§åˆ¶"></a>2.1ã€åŒ¿åæƒé™æ§åˆ¶</h4><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">anonymous_enable</span>=<span class="hljs-literal">NO</span><span class="hljs-comment">#æ˜¯å¦å…è®¸åŒ¿åè®¿é—®ï¼ŒNOç¦ç”¨åŒ¿åç™»å½•</span><br><span class="hljs-attr">no_anon_password</span>=<span class="hljs-literal">YES</span><span class="hljs-comment">#åŒ¿åç”¨æˆ·loginæ—¶ä¸è¯¢é—®å£ä»¤</span><br></code></pre></td></tr></table></figure><p>ä¸‹é¢è¿™å››ä¸ªä¸»è¦è¯­å¥æ§åˆ¶è¿™æ–‡ä»¶å’Œæ–‡ä»¶å¤¹çš„ä¸Šä¼ ã€ä¸‹è½½ã€åˆ›å»ºã€åˆ é™¤å’Œé‡å‘½å</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">anon_upload_enable</span>=<span class="hljs-literal">yes</span>|<span class="hljs-literal">no</span><span class="hljs-comment">#æ§åˆ¶åŒ¿åç”¨æˆ·å¯¹æ–‡ä»¶ï¼ˆéç›®å½•ï¼‰ä¸Šä¼ æƒé™ã€‚</span><br><span class="hljs-attr">anon_world_readable_only</span>=<span class="hljs-literal">yes</span>|<span class="hljs-literal">no</span> <span class="hljs-comment">#æ§åˆ¶åŒ¿åç”¨æˆ·å¯¹æ–‡ä»¶çš„ä¸‹è½½æƒé™</span><br><span class="hljs-attr">anon_mkdir_write_enable</span>=<span class="hljs-literal">yes</span>|<span class="hljs-literal">no</span> <span class="hljs-comment">#æ§åˆ¶åŒ¿åç”¨æˆ·å¯¹æ–‡ä»¶å¤¹çš„åˆ›å»ºæƒé™</span><br><span class="hljs-attr">anon_other_write_enable</span>=<span class="hljs-literal">yes</span>|<span class="hljs-literal">no</span> <span class="hljs-comment">#æ§åˆ¶åŒ¿åç”¨æˆ·å¯¹æ–‡ä»¶å’Œæ–‡ä»¶å¤¹çš„åˆ é™¤å’Œé‡å‘½å</span><br></code></pre></td></tr></table></figure><p>æ³¨ï¼šåŒ¿åç”¨æˆ·ä¸‹è½½æ˜¯ä½¿ç”¨çš„æ˜¯nobodyè¿™ä¸ªç”¨æˆ·ï¼Œæ‰€ä»¥ç›¸åº”çš„oè¿™ä¸ªä½ç½®è¦æœ‰ræƒé™æ‰èƒ½è¢«ä¸‹è½½ã€‚è‹¥æƒ³è®©åŒ¿åç”¨æˆ·èƒ½ä¸Šä¼ å’Œåˆ é™¤æƒé™ï¼Œå¿…éœ€è®¾ç½®ã€‚</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs makefile">write_enable=YES<span class="hljs-comment">#å…¨å±€è®¾ç½®ï¼Œæ˜¯å¦å®¹è®¸å†™å…¥ï¼ˆæ— è®ºæ˜¯åŒ¿åè¿˜æ˜¯æœ¬åœ°ç”¨æˆ·ï¼Œè‹¥è¦å†™å…¥çš„è¯ï¼Œå°±è¦å¼€å¯ï¼‰</span><br>anon_root=&#x27;dir&#x27;<span class="hljs-comment">#åŒ¿åç”¨æˆ·ä¸»ç›®å½•ï¼Œé»˜è®¤/var/ftp/</span><br>anon_max_rateï¼<span class="hljs-comment">#åŒ¿åç”¨æˆ·é€Ÿåº¦é™åˆ¶ï¼Œå•ä½b/s</span><br>anon_umaskï¼077<span class="hljs-comment">#åŒ¿åç”¨æˆ·ä¸Šä¼ æ–‡ä»¶çš„æ©ç (è‹¥ä½¿åŒ¿åç”¨æˆ·ä¸Šä¼ çš„æ–‡ä»¶èƒ½ç›´æ¥è¢«åŒ¿åä¸‹è½½ï¼Œå°±è®¾ç½®è¿™é‡Œä¸º073)</span><br>chown_uploads=YES<span class="hljs-comment">#æ‰€æœ‰åŒ¿åä¸Šä¼ çš„æ–‡ä»¶çš„æ‰€å±ç”¨æˆ·å°†ä¼šè¢«æ›´æ”¹æˆchown_username</span><br>chown_username=whoever <span class="hljs-comment">#ä¸Šä¼ æ–‡ä»¶æ‰€å±çš„ç”¨æˆ·</span><br></code></pre></td></tr></table></figure><h4 id="2-2ã€æœ¬åœ°ç”¨æˆ·æƒé™æ§åˆ¶"><a href="#2-2ã€æœ¬åœ°ç”¨æˆ·æƒé™æ§åˆ¶" class="headerlink" title="2.2ã€æœ¬åœ°ç”¨æˆ·æƒé™æ§åˆ¶"></a>2.2ã€æœ¬åœ°ç”¨æˆ·æƒé™æ§åˆ¶</h4><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs makefile">write_enable=YES <span class="hljs-comment">#å¯ä»¥ä¸Šä¼ (å…¨å±€æ§åˆ¶) åˆ é™¤ï¼Œé‡å‘½å</span><br>local_umask=022  <span class="hljs-comment">#è®¾ç½®æœ¬åœ°ç”¨æˆ·ä¸Šä¼ æ–‡ä»¶é»˜è®¤æ–‡ä»¶æ©ç 022</span><br><span class="hljs-comment">#FTPä¸Šæœ¬åœ°çš„æ–‡ä»¶æƒé™ï¼Œé»˜è®¤æ˜¯077ï¼Œä¸è¿‡vsftpdå®‰è£…åçš„é…ç½®æ–‡ä»¶é‡Œé»˜è®¤æ˜¯022</span><br><br>local_root=  <span class="hljs-comment">#è®¾ç½®ä¸€ä¸ªæœ¬åœ°ç”¨æˆ·ç™»å½•åè¿›å…¥åˆ°çš„ç›®å½•</span><br>download_enable=  <span class="hljs-comment">#é™åˆ¶ç”¨æˆ·çš„ä¸‹è½½æƒé™</span><br><br>userlist_enable=YES <span class="hljs-comment">#é™åˆ¶äº†è¿™é‡Œçš„ç”¨æˆ·ä¸èƒ½è®¿é—®</span><br>userlist_file=/etc/vsftpd/user_list <span class="hljs-comment">#åœ¨æ–‡ä»¶ä¸­æŒ‡å®šé™åˆ¶çš„ç”¨æˆ·</span><br><span class="hljs-comment"># vsftpd userlist</span><br><span class="hljs-comment"># If userlist_deny=NO, only allow users in this file</span><br><span class="hljs-comment"># If userlist_deny=YES (default), never allow users in this file, and</span><br><span class="hljs-comment"># do not even prompt for a password.</span><br><span class="hljs-comment"># Note that the default vsftpd pam config also checks /etc/vsftpd/ftpusers</span><br><span class="hljs-comment"># for users that are denied.</span><br></code></pre></td></tr></table></figure><p>å¯ä»¥é€šè¿‡ä»¥ä¸‹é…ç½®é¡¹æ¥æ§åˆ¶ç”¨æˆ·åˆ‡æ¢ç›®å½•ã€‚</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">chroot_list_enable</span>=<span class="hljs-literal">YES</span>ã€€<span class="hljs-comment">#å¦‚æœå¯åŠ¨è¿™é¡¹åŠŸèƒ½ï¼Œåˆ™æ‰€æœ‰åˆ—åœ¨chroot_list_fileä¹‹ä¸­çš„ä½¿ç”¨è€…ä¸èƒ½æ›´æ”¹æ ¹ç›®å½•</span><br><span class="hljs-attr">chroot_list_file</span>=/etc/vsftpd/chroot_list <span class="hljs-comment">#æŒ‡å®šé™åˆ¶çš„ç”¨æˆ·æ–‡ä»¶ï¼ŒæŒ‡å‡ºè¢«é”å®šåœ¨è‡ªå®¶ç›®å½•ä¸­çš„ç”¨æˆ·</span><br></code></pre></td></tr></table></figure><p>é€šè¿‡ä¸chroot_local_user=YES|NOæ­é…èƒ½å®ç°ä»¥ä¸‹å‡ ç§æ•ˆæœï¼š<br>1ã€å½“chroot_list_enable=YESï¼Œchroot_local_user=YESæ—¶ï¼Œåœ¨/etc/vsftpd.chroot_listæ–‡ä»¶ä¸­åˆ—å‡ºçš„ç”¨æˆ·ï¼Œå¯ä»¥åˆ‡æ¢åˆ°å…¶ä»–ç›®å½•ï¼›æœªåœ¨æ–‡ä»¶ä¸­åˆ—å‡ºçš„ç”¨æˆ·ï¼Œä¸èƒ½åˆ‡æ¢åˆ°å…¶ä»–ç›®å½•ã€‚<br>2ã€å½“chroot_list_enable=YESï¼Œchroot_local_user=NOæ—¶ï¼Œåœ¨/etc/vsftpd.chroot_listæ–‡ä»¶ä¸­åˆ—å‡ºçš„ç”¨æˆ·ï¼Œä¸èƒ½åˆ‡æ¢åˆ°å…¶ä»–ç›®å½•ï¼›æœªåœ¨æ–‡ä»¶ä¸­åˆ—å‡ºçš„ç”¨æˆ·ï¼Œå¯ä»¥åˆ‡æ¢åˆ°å…¶ä»–ç›®å½•ã€‚<br>3ã€å½“chroot_list_enable=NOï¼Œchroot_local_user=YESæ—¶ï¼Œæ‰€æœ‰çš„ç”¨æˆ·å‡ä¸èƒ½åˆ‡æ¢åˆ°å…¶ä»–ç›®å½•ã€‚<br>4ã€å½“chroot_list_enable=NOï¼Œchroot_local_user=NOæ—¶ï¼Œæ‰€æœ‰çš„ç”¨æˆ·å‡å¯ä»¥åˆ‡æ¢åˆ°å…¶ä»–ç›®å½•ã€‚</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs crmsh"><span class="hljs-attr">user_config_dir=</span> <span class="hljs-comment">#åé¢è·Ÿå­˜æ”¾é…ç½®æ–‡ä»¶çš„ç›®å½•</span><br><span class="hljs-comment">#åœ¨è¿™ä¸ªç›®å½•ä¸­ï¼Œåˆ›å»ºç”¨æˆ·çš„å•ç‹¬é…ç½®æ–‡ä»¶ï¼Œç”¨å“ªä¸ªå¸æˆ·ç™»é™†å°±ç”¨å“ªä¸ªå¸æˆ·å‘½åï¼Œç”¨æ¥å®ç°ä¸åŒç”¨æˆ·ä¸åŒæƒé™ã€‚</span><br><br><span class="hljs-comment">#åœ¨æ¯ä¸ªç”¨æˆ·å•ç‹¬çš„é…ç½®æ–‡ä»¶ä¸­ï¼Œç”¨ä¸‹è¾¹çš„é…ç½®å„ç”¨æˆ·çš„å‘½ä»¤æ‰§è¡Œæƒé™</span><br>cmds_allowedï¼[ABOR,ACCT,APPE,CWD,CDUP,DELE,HELP,LIST,MODE,MDTM,MKD,NOOP,NLST,PASS,PASV,PORT,PWD,QUIT,REIN,RETR,RMD,RNFR,RNTO,SITE,SIZE,STOR,STAT,STOU,STRU,SYST,<span class="hljs-keyword">TYPE</span>,USER]<span class="hljs-comment">#æŒ‡ä»¤æƒé™è®¾ç½®</span><br></code></pre></td></tr></table></figure><p>1ã€ä¸èƒ½ä¸‹è½½ã€åˆ é™¤ã€é‡å‘½åï¼Œåªèƒ½ä¸Šä¼ </p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stata">cmds_allowedï¼FEAT,REST,CWD,<span class="hljs-keyword">LIST</span>,MDTM,MKD,NLST,PASS,PASV,PORT,<span class="hljs-keyword">PWD</span>,QUIT,RMD,SIZE,STOR,<span class="hljs-keyword">TYPE</span>,USER,ACCT,<span class="hljs-keyword">APPE</span>,CDUP,<span class="hljs-keyword">HELP</span>,MODE,NOOP,REIN,STAT,STOU,STRU,SYST<br></code></pre></td></tr></table></figure><p>2ã€ä¸èƒ½ä¸Šä¼ ã€åˆ é™¤ã€é‡å‘½åï¼Œåªèƒ½ä¸‹è½½</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">write_enable</span>=<span class="hljs-literal">NO</span><br></code></pre></td></tr></table></figure><p>3ã€åªèƒ½ä¸Šä¼ ã€åˆ é™¤å’Œé‡å‘½åï¼Œä¸èƒ½ä¸‹è½½</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gams">download_enableï¼<span class="hljs-keyword">NO</span><br></code></pre></td></tr></table></figure><p>4ã€åªèƒ½ä¸‹è½½ã€åˆ é™¤å’Œé‡å‘½åï¼Œä¸èƒ½ä¸Šä¼ </p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stata">cmds_allowed=FEAT,REST,CWD,<span class="hljs-keyword">LIST</span>,MDTM,MKD,NLST,PASS,PASV,PORT,<span class="hljs-keyword">PWD</span>,QUIT,RMD,RNFR,RNTO,RETR,DELE,SIZE,<span class="hljs-keyword">TYPE</span>,USER,ACCT,<span class="hljs-keyword">APPE</span>,CDUP,<span class="hljs-keyword">HELP</span>,MODE,NOOP,REIN,STAT,STOU,STRU,SYST<br></code></pre></td></tr></table></figure><blockquote><p>å‚æ•°çš„è¯¦ç»†è§£é‡Šï¼š<br>ABOR - abort a file transfer å–æ¶ˆæ–‡ä»¶ä¼ è¾“<br>CWD - change working directory æ›´æ”¹ç›®å½•<br>DELE - delete a remote file åˆ é™¤æ–‡ä»¶<br>LIST - list remote files åˆ—ç›®å½•<br>MDTM - return the modification time of a file è¿”å›æ–‡ä»¶çš„æ›´æ–°æ—¶é—´<br>MKD - make a remote directory æ–°å»ºæ–‡ä»¶å¤¹<br>NLST - name list of remote directory<br>PASS - send password<br>PASV - enter passive mode<br>PORT - open a data port æ‰“å¼€ä¸€ä¸ªä¼ è¾“ç«¯å£<br>PWD - print working directory æ˜¾ç¤ºå½“å‰å·¥ä½œç›®å½•<br>QUIT - terminate the connection é€€å‡º<br>RETR - retrieve a remote file ä¸‹è½½æ–‡ä»¶<br>RMD - remove a remote directory<br>RNFR - rename from<br>RNTO - rename to<br>SITE - site-specific commands<br>SIZE - return the size of a file è¿”å›æ–‡ä»¶å¤§å°<br>STOR - store a file on the remote host ä¸Šä¼ æ–‡ä»¶<br>TYPE - set transfer type<br>USER - send username<br> less common commands:<br>ACCT - send account information<br>APPE - append to a remote file<br>CDUP - CWD to the parent of the current directory<br>HELP - return help on using the server<br>MODE - set transfer mode<br>NOOP - do nothing<br>REIN - reinitialize the connection<br>STAT - return server status<br>STOU - store a file uniquely<br>STRU - set file transfer structure<br>SYST - return system type</p></blockquote><h4 id="2-3ã€è™šæ‹Ÿç”¨æˆ·è®¾ç½®"><a href="#2-3ã€è™šæ‹Ÿç”¨æˆ·è®¾ç½®" class="headerlink" title="2.3ã€è™šæ‹Ÿç”¨æˆ·è®¾ç½®"></a>2.3ã€è™šæ‹Ÿç”¨æˆ·è®¾ç½®</h4><p>è™šæ‹Ÿç”¨æˆ·ä½¿ç”¨PAMè®¤è¯æ–¹å¼</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">pam_service_name</span>=vsftpd<span class="hljs-comment">#è®¾ç½®PAMä½¿ç”¨çš„åç§°ï¼Œé»˜è®¤å€¼ä¸º/etc/pam.d/vsftpd</span><br><span class="hljs-attr">check_shell</span>=<span class="hljs-literal">YES</span>   <span class="hljs-comment">#æ³¨æ„ï¼šä»…åœ¨æ²¡æœ‰paméªŒè¯ç‰ˆæœ¬æ—¶æœ‰ç”¨,æ˜¯å¦æ£€æŸ¥ç”¨æˆ·æœ‰ä¸€ä¸ªæœ‰æ•ˆçš„shellæ¥ç™»å½•</span><br><span class="hljs-attr">guest_enable</span>= <span class="hljs-literal">YES</span>|<span class="hljs-literal">NO</span>  <span class="hljs-comment">#å¯ç”¨è™šæ‹Ÿç”¨æˆ·ï¼Œé»˜è®¤å€¼ä¸ºNO</span><br><span class="hljs-attr">guest_username</span>=ftp  <span class="hljs-comment">#æ˜ å°„è™šæ‹Ÿç”¨æˆ·ï¼Œé»˜è®¤å€¼ä¸ºftpï¼›æŠŠè™šæ‹Ÿç”¨æˆ·æ˜ å°„åˆ°æœ¬åœ°ç”¨æˆ·ï¼Œè™šæ‹Ÿç”¨æˆ·=æœ¬åœ°ç”¨æˆ·</span><br><br><span class="hljs-attr">virtual_use_local_privs</span>=<span class="hljs-literal">YES</span>|<span class="hljs-literal">NO</span> <br><span class="hljs-comment">#å½“è¯¥å‚æ•°æ¿€æ´»YESæ—¶ï¼Œè™šæ‹Ÿç”¨æˆ·ä½¿ç”¨ä¸æœ¬åœ°ç”¨æˆ·ç›¸åŒçš„æƒé™ï¼Œå½“æ­¤å‚æ•°å…³é—­NOæ—¶ï¼Œè™šæ‹Ÿç”¨æˆ·ä½¿ç”¨ä¸åŒ¿åç”¨æˆ·ç›¸åŒçš„æƒé™ï¼Œé»˜è®¤æƒ…å†µä¸‹æ­¤å‚æ•°æ˜¯å…³é—­çš„ï¼ˆNOï¼‰ã€‚</span><br></code></pre></td></tr></table></figure><h4 id="2-4ã€è®¿é—®æ§åˆ¶è®¾ç½®"><a href="#2-4ã€è®¿é—®æ§åˆ¶è®¾ç½®" class="headerlink" title="2.4ã€è®¿é—®æ§åˆ¶è®¾ç½®"></a>2.4ã€è®¿é—®æ§åˆ¶è®¾ç½®</h4><p>ä¸¤ç§æ§åˆ¶æ–¹å¼ï¼šä¸€ç§æ§åˆ¶ä¸»æœºè®¿é—®ï¼Œå¦ä¸€ç§æ§åˆ¶ç”¨æˆ·è®¿é—®</p><h5 id="2-4-1ã€æ§åˆ¶ä¸»æœºè®¿é—®ï¼š"><a href="#2-4-1ã€æ§åˆ¶ä¸»æœºè®¿é—®ï¼š" class="headerlink" title="2.4.1ã€æ§åˆ¶ä¸»æœºè®¿é—®ï¼š"></a>2.4.1ã€æ§åˆ¶ä¸»æœºè®¿é—®ï¼š</h5><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">tcp_wrappers</span>=<span class="hljs-literal">YES</span>|<span class="hljs-literal">NO</span><br></code></pre></td></tr></table></figure><p>è®¾ç½®vsftpdæ˜¯å¦ä¸tcp wrapperç›¸ç»“åˆæ¥è¿›è¡Œä¸»æœºçš„è®¿é—®æ§åˆ¶ã€‚é»˜è®¤å€¼ä¸ºYESã€‚å¦‚æœå¯ç”¨ï¼Œåˆ™vsftpdæœåŠ¡å™¨ä¼šæ£€æŸ¥/etc/hosts.allow å’Œ/etc/hosts.deny ä¸­çš„è®¾ç½®ï¼Œæ¥å†³å®šè¯·æ±‚è¿æ¥çš„ä¸»æœºï¼Œæ˜¯å¦å…è®¸è®¿é—®è¯¥FTPæœåŠ¡å™¨ã€‚è¿™ä¸¤ä¸ªæ–‡ä»¶å¯ä»¥èµ·åˆ°ç®€æ˜“çš„é˜²ç«å¢™åŠŸèƒ½ã€‚</p><p>æ¯”å¦‚ï¼šè‹¥è¦ä»…å…è®¸192.168.10.1â€”192.168.10.254çš„ç”¨æˆ·å¯ä»¥è¿æ¥FTPæœåŠ¡å™¨ï¼Œåˆ™åœ¨<br>/etc/hosts.allow<br>/etc/hosts.deny<br>æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p><p>å…¶æ ¼å¼: é™åˆ¶çš„æœåŠ¡ï¼šip(ç½‘æ®µ)<br>vsftpd:192.168.1.<br>vsftpd:192.168.1.12<br>vsftpd:192.168.1.0/255.255.255.0    #è¿™é‡Œä¸èƒ½å†™æˆ192.168.1.0/24</p><h5 id="2-4-2ã€æ§åˆ¶ç”¨æˆ·è®¿é—®ï¼š"><a href="#2-4-2ã€æ§åˆ¶ç”¨æˆ·è®¿é—®ï¼š" class="headerlink" title="2.4.2ã€æ§åˆ¶ç”¨æˆ·è®¿é—®ï¼š"></a>2.4.2ã€æ§åˆ¶ç”¨æˆ·è®¿é—®ï¼š</h5><p>/etc/vsftpd/ä¸‹ftpuserså’Œuser_listæ–‡ä»¶    #ç”¨äºä¿å­˜ä¸å…è®¸è¿›è¡ŒFTPç™»å½•çš„æœ¬åœ°ç”¨æˆ·å¸å·ï¼Œå°±æ˜¯vsftpç”¨æˆ·çš„é»‘åå•</p><p>1ã€è®¾ç½®ç¦æ­¢user_listæ–‡ä»¶ä¸­çš„ç”¨æˆ·ç™»å½•ï¼šè¦åœ¨ä¸»é…ç½®æ–‡ä»¶vsftpd.confä¸­ä¿®æ”¹å¦‚ä¸‹ä¸¤é¡¹ï¼Œ</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">userlist_enable</span>=<span class="hljs-literal">yes</span><br><span class="hljs-attr">userlist_deny</span>=<span class="hljs-literal">yes</span><br></code></pre></td></tr></table></figure><p>è¯´æ˜ï¼šé…ç½®å®Œä»¥åï¼Œé™¤äº†ftpusersæ–‡ä»¶å’Œuser_listæ–‡ä»¶ä¸­è®°å½•çš„ftpç”¨æˆ·ä¸èƒ½ç™»å½•vsftpæœåŠ¡ä»¥å¤–ï¼Œå…¶ä»–çš„ftpç”¨æˆ·éƒ½å¯ä»¥ç™»å½•ã€‚</p><p>2ã€è®¾ç½®åªå…è®¸user_listæ–‡ä»¶ä¸­çš„ç”¨æˆ·ç™»å½•ï¼šåŒæ ·çš„é“ç†è¦æŠŠä¸»é…ç½®æ–‡ä»¶vsftpd.conf ä¸­çš„è¯­å¥ä¿®æ”¹å¦‚ä¸‹ä¸¤é¡¹ï¼š </p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">userlist_enable</span>=<span class="hljs-literal">yes</span><br><span class="hljs-attr">userlist_deny</span>=<span class="hljs-literal">no</span><br></code></pre></td></tr></table></figure><p>è¯´æ˜ï¼šé…ç½®å®Œä»¥åï¼Œåªå…è®¸vsftpd.user_listæ–‡ä»¶ä¸­è®°å½•çš„ftpç”¨æˆ·èƒ½ç™»å½•vsftpæœåŠ¡ï¼Œå…¶ä»–çš„ftpç”¨æˆ·éƒ½ä¸å¯ä»¥ç™»å½•ã€‚</p><h4 id="2-5ã€è¶…æ—¶è®¾ç½®"><a href="#2-5ã€è¶…æ—¶è®¾ç½®" class="headerlink" title="2.5ã€è¶…æ—¶è®¾ç½®"></a>2.5ã€è¶…æ—¶è®¾ç½®</h4><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">idle_session_timeout</span>=<span class="hljs-number">600</span> <span class="hljs-comment">#ç©ºé—²è¿æ¥è¶…æ—¶</span><br><span class="hljs-attr">data_connection_timeout</span>=<span class="hljs-number">120</span> <span class="hljs-comment">#æ•°æ®ä¼ è¾“è¶…æ—¶</span><br><span class="hljs-attr">ACCEPT_TIMEOUT</span>=<span class="hljs-number">60</span>  <span class="hljs-comment">#PAVSè¯·æ±‚è¶…æ—¶</span><br><span class="hljs-attr">connect_timeout</span>=<span class="hljs-number">60</span>  <span class="hljs-comment">#PROTæ¨¡å¼è¿æ¥è¶…æ—¶</span><br></code></pre></td></tr></table></figure><h4 id="2-6ã€æœåŠ¡å™¨åŠŸèƒ½é€‰é¡¹"><a href="#2-6ã€æœåŠ¡å™¨åŠŸèƒ½é€‰é¡¹" class="headerlink" title="2.6ã€æœåŠ¡å™¨åŠŸèƒ½é€‰é¡¹"></a>2.6ã€æœåŠ¡å™¨åŠŸèƒ½é€‰é¡¹</h4><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs makefile">xferlog_enable=YES<span class="hljs-comment">#å¼€å¯æ—¥è®°åŠŸèƒ½</span><br>xferlog_std_format=YES<span class="hljs-comment">#ä½¿ç”¨æ ‡å‡†æ ¼å¼</span><br>log_ftp_protocol=NO<span class="hljs-comment">#å½“xferlog_std_formatå…³é—­ä¸”æœ¬é€‰é¡¹å¼€å¯æ—¶,è®°å½•æ‰€æœ‰ftpè¯·æ±‚å’Œå›å¤,å¸¸ä½œè°ƒè¯•ç”¨</span><br>pasv_enable=YES<span class="hljs-comment">#å…è®¸ä½¿ç”¨pasvæ¨¡å¼</span><br>pasv_promiscuous=NO<span class="hljs-comment">#å…³é—­å®‰å…¨æ£€æŸ¥ï¼Œè¯·æ…é‡è€ƒè™‘</span><br>port_enable=YES<span class="hljs-comment">#å…è®¸ä½¿ç”¨portæ¨¡å¼</span><br>tcp_wrappers=YES<span class="hljs-comment">#å¼€å¯tcp_wrappersæ”¯æŒ</span><br>pam_service_name=vsftpd<span class="hljs-comment">#å®šä¹‰PAM æ‰€ä½¿ç”¨çš„åç§°ï¼Œé¢„è®¾ä¸ºvsftpd</span><br>nopriv_user=nobody<span class="hljs-comment">#å½“æœåŠ¡å™¨è¿è¡Œäºæœ€åº•å±‚æ—¶ä½¿ç”¨çš„ç”¨æˆ·å</span><br>pasv_address=<span class="hljs-comment">#ä½¿vsftpdåœ¨pasvå‘½ä»¤å›å¤æ—¶è·³è½¬åˆ°æŒ‡å®šçš„IPåœ°å€ã€‚ã€æœåŠ¡å™¨è”æ¥è·³è½¬ï¼Ÿï¼Ÿï¼Ÿã€‘</span><br></code></pre></td></tr></table></figure><h4 id="2-7ã€æœåŠ¡å™¨æ€§èƒ½é€‰é¡¹"><a href="#2-7ã€æœåŠ¡å™¨æ€§èƒ½é€‰é¡¹" class="headerlink" title="2.7ã€æœåŠ¡å™¨æ€§èƒ½é€‰é¡¹"></a>2.7ã€æœåŠ¡å™¨æ€§èƒ½é€‰é¡¹</h4><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs makefile">ls_recurse_enable=YES<span class="hljs-comment">#æ˜¯å¦èƒ½ä½¿ç”¨ls -Rå‘½ä»¤ä»¥é˜²æ­¢æµªè´¹å¤§é‡çš„æœåŠ¡å™¨èµ„æº</span><br>one_process_model<span class="hljs-comment">#æ˜¯å¦ä½¿ç”¨å•è¿›ç¨‹æ¨¡å¼</span><br>listen=YES<span class="hljs-comment">#ç»‘å®šåˆ°listen_portæŒ‡å®šçš„ç«¯å£,æš¨ç«¯å£å¸¸éƒ½å¼€,äº¦å³standaloneæ¨¡å¼</span><br><br>text_userdb_names=NO<br><span class="hljs-comment">#å½“ä½¿ç”¨è€…ç™»å…¥åä½¿ç”¨ls -al ä¹‹ç±»çš„æŒ‡ä»¤æŸ¥è¯¢è¯¥æ¡£æ¡ˆçš„ç®¡ç†æƒæ—¶ï¼Œé¢„è®¾ä¼šå‡ºç°æ‹¥æœ‰è€…çš„UIDï¼Œè€Œä¸æ˜¯è¯¥æ¡£æ¡ˆæ‹¥æœ‰è€…çš„å   #ç§°ã€‚è‹¥æ˜¯å¸Œæœ›å‡ºç°æ‹¥æœ‰è€…çš„åç§°ï¼Œåˆ™å°†æ­¤åŠŸèƒ½å¼€å¯ã€‚</span><br><br>use_localtime=NO<span class="hljs-comment">#æ˜¾ç¤ºç›®å½•æ¸…å•æ—¶æ˜¯ç”¨æœ¬åœ°æ—¶é—´è¿˜æ˜¯GMTæ—¶é—´,å¯ä»¥é€šè¿‡mdtmå‘½ä»¤æ¥è¾¾åˆ°ä¸€æ ·çš„æ•ˆæœ</span><br>use_sendfile=YES<span class="hljs-comment">#æµ‹è¯•å¹³å°ä¼˜åŒ–</span><br></code></pre></td></tr></table></figure><h4 id="2-8ã€ä¿¡æ¯ç±»è®¾ç½®"><a href="#2-8ã€ä¿¡æ¯ç±»è®¾ç½®" class="headerlink" title="2.8ã€ä¿¡æ¯ç±»è®¾ç½®"></a>2.8ã€ä¿¡æ¯ç±»è®¾ç½®</h4><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">ftpd_banner</span>=welcome to FTP<span class="hljs-comment">#loginæ—¶æ˜¾ç¤ºæ¬¢è¿ä¿¡æ¯.å¦‚æœè®¾ç½®äº†banner_fileåˆ™æ­¤è®¾ç½®æ— æ•ˆ</span><br><span class="hljs-attr">dirmessage_enable</span>=<span class="hljs-literal">YES</span><span class="hljs-comment">#å…è®¸ä¸ºç›®å½•é…ç½®æ˜¾ç¤ºä¿¡æ¯,æ˜¾ç¤ºæ¯ä¸ªç›®å½•ä¸‹é¢çš„message_fileæ–‡ä»¶çš„å†…å®¹</span><br><span class="hljs-attr">setproctitle_enable</span>=<span class="hljs-literal">YES</span><span class="hljs-comment">#æ˜¾ç¤ºä¼šè¯çŠ¶æ€ä¿¡æ¯,é»˜è®¤å…³</span><br></code></pre></td></tr></table></figure><h4 id="2-9ã€æ–‡ä»¶å®šä¹‰"><a href="#2-9ã€æ–‡ä»¶å®šä¹‰" class="headerlink" title="2.9ã€æ–‡ä»¶å®šä¹‰"></a>2.9ã€æ–‡ä»¶å®šä¹‰</h4><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">chroot_list_file</span>=/etc/vsftpd/vsftpd.chroot_list<span class="hljs-comment">#å®šä¹‰ä¸èƒ½æ›´æ”¹ç”¨æˆ·ä¸»ç›®å½•çš„æ–‡ä»¶</span><br><span class="hljs-attr">userlist_file</span>=/etc/vsftpd/vsftpd.user_list<span class="hljs-comment">#å®šä¹‰é™åˆ¶/å…è®¸ç”¨æˆ·ç™»å½•çš„æ–‡ä»¶</span><br><span class="hljs-attr">banner_file</span>=/etc/vsftpd/banner<span class="hljs-comment">#å®šä¹‰ç™»å½•ä¿¡æ¯æ–‡ä»¶çš„ä½ç½®</span><br><span class="hljs-attr">banned_email_file</span>=/etc/vsftpd.banned_emails<span class="hljs-comment">#ç¦æ­¢ä½¿ç”¨çš„åŒ¿åç”¨æˆ·ç™»é™†æ—¶ä½œä¸ºå¯†ç çš„ç”µå­é‚®ä»¶åœ°å€</span><br><span class="hljs-attr">xferlog_file</span>=/var/log/vsftpd.log<span class="hljs-comment">#æ—¥å¿—æ–‡ä»¶ä½ç½®</span><br><span class="hljs-attr">message_file</span>=.message<span class="hljs-comment">#ç›®å½•ä¿¡æ¯æ–‡ä»¶</span><br></code></pre></td></tr></table></figure><h4 id="2-10ã€ç›®å½•å®šä¹‰"><a href="#2-10ã€ç›®å½•å®šä¹‰" class="headerlink" title="2.10ã€ç›®å½•å®šä¹‰"></a>2.10ã€ç›®å½•å®šä¹‰</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs awk">user_config_dir=<span class="hljs-regexp">/etc/</span>vsftpd/userconf<span class="hljs-comment">#å®šä¹‰ç”¨æˆ·é…ç½®æ–‡ä»¶çš„ç›®å½•</span><br>local_root=<span class="hljs-comment">#æ­¤é¡¹è®¾ç½®æ¯ä¸ªç”¨æˆ·ç™»é™†åçš„æ ¹ç›®å½•</span><br><span class="hljs-comment">#å®šä¹‰æœ¬åœ°ç”¨æˆ·ç™»é™†çš„æ ¹ç›®å½•ï¼Œæ³¨æ„å®šä¹‰æ ¹ç›®å½•å¯ä»¥æ˜¯ç›¸å¯¹è·¯å¾„ä¹Ÿå¯ä»¥æ˜¯ç»å¯¹è·¯å¾„ï¼Œç›¸å¯¹è·¯å¾„æ˜¯é’ˆå¯¹ç”¨æˆ·å®¶ç›®å½•æ¥è¯´çš„</span><br>anon_root=<span class="hljs-regexp">/var/</span>ftp<span class="hljs-comment">#åŒ¿åç”¨æˆ·ç™»é™†åçš„æ ¹ç›®å½•ï¼Œé»˜è®¤/var/ftp</span><br></code></pre></td></tr></table></figure><h4 id="2-11ã€ç”¨æˆ·è¿æ¥é€‰é¡¹"><a href="#2-11ã€ç”¨æˆ·è¿æ¥é€‰é¡¹" class="headerlink" title="2.11ã€ç”¨æˆ·è¿æ¥é€‰é¡¹"></a>2.11ã€ç”¨æˆ·è¿æ¥é€‰é¡¹</h4><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">max_clients</span>=<span class="hljs-number">100</span><span class="hljs-comment">#å¯æ¥å—çš„æœ€å¤§clientæ•°ç›®</span><br><span class="hljs-attr">max_per_ip</span>=<span class="hljs-number">5</span><span class="hljs-comment">#æ¯ä¸ªipçš„æœ€å¤§clientæ•°ç›®</span><br><span class="hljs-attr">connect_from_port_20</span>=<span class="hljs-literal">YES</span><span class="hljs-comment">#ä½¿ç”¨æ ‡å‡†çš„20ç«¯å£æ¥è¿æ¥ftp</span><br><span class="hljs-attr">listen_address</span>=<span class="hljs-number">192.168</span>.<span class="hljs-number">0.2</span><span class="hljs-comment">#ç»‘å®šåˆ°æŸä¸ªIP,å…¶å®ƒIPä¸èƒ½è®¿é—®</span><br><span class="hljs-attr">listen_port</span>=<span class="hljs-number">2121</span><span class="hljs-comment">#ç»‘å®šåˆ°æŸä¸ªç«¯å£</span><br><span class="hljs-attr">ftp_data_port</span>=<span class="hljs-number">2020</span><span class="hljs-comment">#æ•°æ®ä¼ è¾“ç«¯å£</span><br><span class="hljs-attr">pasv_max_port</span>=<span class="hljs-number">0</span><span class="hljs-comment">#pasvè¿æ¥æ¨¡å¼æ—¶å¯ä»¥ä½¿ç”¨port èŒƒå›´çš„ä¸Šç•Œï¼Œé»˜è®¤å€¼0è¡¨ç¤ºä»»æ„</span><br><span class="hljs-attr">pasv_min_port</span>=<span class="hljs-number">0</span><span class="hljs-comment">#pasvè¿æ¥æ¨¡å¼æ—¶å¯ä»¥ä½¿ç”¨port èŒƒå›´çš„ä¸‹ç•Œï¼Œé»˜è®¤å€¼0è¡¨ç¤ºä»»æ„</span><br></code></pre></td></tr></table></figure><h4 id="2-12ã€æ•°æ®ä¼ è¾“é€‰é¡¹"><a href="#2-12ã€æ•°æ®ä¼ è¾“é€‰é¡¹" class="headerlink" title="2.12ã€æ•°æ®ä¼ è¾“é€‰é¡¹"></a>2.12ã€æ•°æ®ä¼ è¾“é€‰é¡¹</h4><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">anon_max_rate</span>=<span class="hljs-number">51200</span>  <span class="hljs-comment">#åŒ¿åç”¨æˆ·çš„ä¼ è¾“æ¯”ç‡(b/s)</span><br><span class="hljs-attr">local_max_rate</span>=<span class="hljs-number">5120000</span>  <span class="hljs-comment">#æœ¬åœ°ç”¨æˆ·çš„ä¼ è¾“æ¯”ç‡(b/s)</span><br></code></pre></td></tr></table></figure><h4 id="2-13ã€å®‰å…¨é€‰é¡¹"><a href="#2-13ã€å®‰å…¨é€‰é¡¹" class="headerlink" title="2.13ã€å®‰å…¨é€‰é¡¹"></a>2.13ã€å®‰å…¨é€‰é¡¹</h4><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">idle_session_timeout</span>=<span class="hljs-number">600</span> <span class="hljs-comment">#ç”¨æˆ·ä¼šè¯ç©ºé—²å10åˆ†é’Ÿ</span><br><span class="hljs-attr">data_connection_timeout</span>=<span class="hljs-number">120</span> <span class="hljs-comment">#å°†æ•°æ®è¿æ¥ç©ºé—²2åˆ†é’Ÿæ–­</span><br><span class="hljs-attr">accept_timeout</span>=<span class="hljs-number">60</span>  <span class="hljs-comment">#å°†å®¢æˆ·ç«¯ç©ºé—²1åˆ†é’Ÿåæ–­</span><br><span class="hljs-attr">connect_timeout</span>=<span class="hljs-number">60</span>  <span class="hljs-comment">#ä¸­æ–­1åˆ†é’Ÿååˆé‡æ–°è¿æ¥</span><br><span class="hljs-attr">local_max_rate</span>=<span class="hljs-number">50000</span>  <span class="hljs-comment">#æœ¬åœ°ç”¨æˆ·ä¼ è¾“ç‡50K</span><br><span class="hljs-attr">anon_max_rate</span>=<span class="hljs-number">30000</span>  <span class="hljs-comment">#åŒ¿åç”¨æˆ·ä¼ è¾“ç‡30K</span><br><span class="hljs-attr">pasv_min_port</span>=<span class="hljs-number">50000</span>  <span class="hljs-comment">#å°†å®¢æˆ·ç«¯çš„æ•°æ®è¿æ¥ç«¯å£æ”¹åœ¨</span><br><span class="hljs-attr">pasv_max_port</span>=<span class="hljs-number">60000</span>  <span class="hljs-comment">#50000â€”60000ä¹‹é—´</span><br><span class="hljs-attr">max_clients</span>=<span class="hljs-number">200</span>   <span class="hljs-comment">#FTPçš„æœ€å¤§è¿æ¥æ•°</span><br><span class="hljs-attr">max_per_ip</span>=<span class="hljs-number">4</span>   <span class="hljs-comment">#æ¯IPçš„æœ€å¤§è¿æ¥æ•°</span><br><span class="hljs-attr">listen_port</span>=<span class="hljs-number">5555</span>  <span class="hljs-comment">#ä»5555ç«¯å£è¿›è¡Œæ•°æ®è¿æ¥</span><br><span class="hljs-attr">local_enable</span>=<span class="hljs-literal">YES</span>      <span class="hljs-comment"># å…è®¸ä½¿ç”¨æœ¬åœ°å¸æˆ·è¿›è¡ŒFTPç”¨æˆ·ç™»å½•éªŒè¯</span><br><span class="hljs-attr">allow_writeable_chroot</span>=<span class="hljs-literal">YES</span> <span class="hljs-comment"># å¦‚æœå¯ç”¨äº†é™å®šç”¨æˆ·åœ¨å…¶ä¸»ç›®å½•ä¸‹éœ€è¦æ·»åŠ è¿™ä¸ªé…ç½®ï¼Œè§£å†³æŠ¥é”™ 500 OOPS: vsftpd: refusing to run with writable root inside chroot()</span><br></code></pre></td></tr></table></figure><h4 id="2-14ã€â€œä¸å®‰å…¨çš„æœåŠ¡ï¼Œä¸æ”¯æŒFTP-over-TLSâ€"><a href="#2-14ã€â€œä¸å®‰å…¨çš„æœåŠ¡ï¼Œä¸æ”¯æŒFTP-over-TLSâ€" class="headerlink" title="2.14ã€â€œä¸å®‰å…¨çš„æœåŠ¡ï¼Œä¸æ”¯æŒFTP over TLSâ€"></a>2.14ã€â€œä¸å®‰å…¨çš„æœåŠ¡ï¼Œä¸æ”¯æŒFTP over TLSâ€</h4><p>é…ç½®vsftpdåœ¨centosä¸Šä½¿ç”¨SSL/TLS</p><h5 id="2-14-1ã€å»ºç«‹vsftpdä½¿ç”¨çš„å‡­è¯æ•°æ®ï¼ŒCentOSå»ºç«‹å‡­è¯çš„åœ°æ–¹-etc-pki-tls-certs"><a href="#2-14-1ã€å»ºç«‹vsftpdä½¿ç”¨çš„å‡­è¯æ•°æ®ï¼ŒCentOSå»ºç«‹å‡­è¯çš„åœ°æ–¹-etc-pki-tls-certs" class="headerlink" title="2.14.1ã€å»ºç«‹vsftpdä½¿ç”¨çš„å‡­è¯æ•°æ®ï¼ŒCentOSå»ºç«‹å‡­è¯çš„åœ°æ–¹/etc/pki/tls/certs/"></a>2.14.1ã€å»ºç«‹vsftpdä½¿ç”¨çš„å‡­è¯æ•°æ®ï¼ŒCentOSå»ºç«‹å‡­è¯çš„åœ°æ–¹/etc/pki/tls/certs/</h5><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs awk">cd <span class="hljs-regexp">/etc/</span>pki<span class="hljs-regexp">/tls/</span>certs/<br><br>make vsftpd.pem<span class="hljs-comment">#å»ºç«‹è¯ä¹¦è§£æé…ç½®</span><br>Country Name:CN<br>State or Province Name:CHINA<br>Locality Name:<br>Organization Name: <br>...<br>Common Name:kongweiliao<br>Email Address []:lia*****ei@outlook.com<br><br>cp -a vsftpd.pem <span class="hljs-regexp">/etc/</span>vsftpsd/<br>ll <span class="hljs-regexp">/etc/</span>vsftpd/vsftpd.pem<br></code></pre></td></tr></table></figure><h5 id="2-14-2ã€ä¿®æ”¹vsftpd-conf"><a href="#2-14-2ã€ä¿®æ”¹vsftpd-conf" class="headerlink" title="2.14.2ã€ä¿®æ”¹vsftpd.conf"></a>2.14.2ã€ä¿®æ”¹vsftpd.conf</h5><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs routeros">+<br><span class="hljs-attribute">ssl_enable</span>=<span class="hljs-literal">YES</span><br><span class="hljs-attribute">force_anon_data_ssl</span>=<span class="hljs-literal">YES</span><br><span class="hljs-attribute">force_anon_logins_ssl</span>=<span class="hljs-literal">YES</span><br><span class="hljs-attribute">force_local_data_ssl</span>=<span class="hljs-literal">YES</span><br><span class="hljs-attribute">force_local_logins_ssl</span>=<span class="hljs-literal">YES</span><br><span class="hljs-attribute">ssl_tlsv1</span>=<span class="hljs-literal">YES</span>#tlsv1,tlsv2,tlsv3; é¦–é€‰tlsv1,é»˜è®¤<span class="hljs-literal">YES</span>ï¼›æ¬¡é€‰tlsv2,tlsv3ï¼Œé»˜è®¤<span class="hljs-literal">NO</span><br><span class="hljs-attribute">rsa_cert_file</span>=/etc/vsftpd/vsftpd.pem<br></code></pre></td></tr></table></figure><p><img src="/2019/11/15/FTP%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA/filezillaFTPoverSTL.png" alt="1"></p><h3 id="3ã€é˜²ç«å¢™è®¾ç½®"><a href="#3ã€é˜²ç«å¢™è®¾ç½®" class="headerlink" title="3ã€é˜²ç«å¢™è®¾ç½®"></a>3ã€é˜²ç«å¢™è®¾ç½®</h3><p>æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€ï¼š</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># systemctl status firewalld.service</span><br></code></pre></td></tr></table></figure><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¦‚æœå¤–éƒ¨æ— æ³•é“¾æ¥ vsftp ï¼Œæ’é™¤ç½‘ç»œçš„é—®é¢˜ï¼Œå¾ˆæœ‰å¯èƒ½æ˜¯é˜²ç«å¢™åœ¨ä½œç¥Ÿã€‚</p><p>å¼€å¯é˜²ç«å¢™ï¼š</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># systemctl start firewalld.service</span><br></code></pre></td></tr></table></figure><p>å…³é—­é˜²ç«å¢™ï¼š</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># systemctl stop firewalld.service</span><br></code></pre></td></tr></table></figure><p>é‡å¯é˜²ç«å¢™ï¼š</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># systemctl restart firewalld.service</span><br></code></pre></td></tr></table></figure><p>ç¦æ­¢å¼€æœºå¯åŠ¨ï¼š</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># systemctl disable firewalld.service</span><br></code></pre></td></tr></table></figure><p>å¼€å¯å¼€æœºå¯åŠ¨ï¼š</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># systemctl enable firewalld.service</span><br></code></pre></td></tr></table></figure><p>è¯´æ˜ï¼šå¦‚æœä½ ä¸æ„¿æ„å…³é—­é˜²ç«å¢™ï¼Œéœ€è¦é˜²ç«å¢™æ·»åŠ FTPæœåŠ¡ã€‚</p><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs brainfuck"><span class="hljs-comment">firewall</span><span class="hljs-literal">-</span><span class="hljs-comment">cmd</span> --<span class="hljs-comment">permanent</span> --<span class="hljs-comment">zone=public</span> --<span class="hljs-comment">add</span><span class="hljs-literal">-</span><span class="hljs-comment">service=ftp</span><br><span class="hljs-comment">firewall</span><span class="hljs-literal">-</span><span class="hljs-comment">cmd</span> --<span class="hljs-comment">reload</span> <br></code></pre></td></tr></table></figure><h3 id="4ã€æ£€æµ‹èƒ½å¦è¿æ¥æˆåŠŸ"><a href="#4ã€æ£€æµ‹èƒ½å¦è¿æ¥æˆåŠŸ" class="headerlink" title="4ã€æ£€æµ‹èƒ½å¦è¿æ¥æˆåŠŸ"></a>4ã€æ£€æµ‹èƒ½å¦è¿æ¥æˆåŠŸ</h3><p>å…ˆåœ¨ linux ç³»ç»Ÿä¸Šè¿›è¡Œæ£€æµ‹ï¼š</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># ftp localhostï¼ˆæœ¬ä¸»æœºåç§°ï¼‰</span><br></code></pre></td></tr></table></figure><p>å‡ºç°æç¤ºç™»å½•ç”¨æˆ·åï¼Œä½¿ç”¨åŒ¿åç”¨æˆ·ç™»å½• anonymousï¼ˆå¯†ç æœªè®¾ç½®ï¼Œæ‰€ä»¥ä¸ºç©ºï¼‰ï¼Œè¾“å…¥ ls å‘½ä»¤å¯æ˜¾ç¤ºä¿¡æ¯ï¼Œæ•ˆæœå¦‚å›¾ï¼š</p><p>åœ¨Windowsä¸Šè®¿é—®ï¼š</p><p>ä½¿ç”¨ windows ping ä¸€ä¸‹ linux æœåŠ¡å™¨ï¼Œæ£€æŸ¥æ˜¯å¦èƒ½è”ç½‘</p><p>ä»ä¸‹å›¾å¯ä»¥çœ‹å‡ºï¼Œwindows èƒ½ä¸ linux ç½‘ç»œè”é€šï¼Œå½“å¯ä»¥æ­£å¸¸è”é€šç½‘ç»œå†è¿›è¡Œ ftp é“¾æ¥æµ‹è¯•ï¼Œ</p><p>ä¹Ÿå¯ä½¿ç”¨ root å¸å·è¿›è¡Œç™»å½•ï¼Œroot å¸å·ç™»å½•ä¹‹åå¯ä»¥æ“ä½œç³»ç»Ÿå†…ä»»æ„æ–‡ä»¶ã€‚ä»¥ä¸‹ç« èŠ‚åˆ—å‡ºå¯ä»¥é“¾æ¥ä¹‹åé€šè¿‡ ftp è½¯ä»¶é“¾æ¥åå‡ºç°çš„ä¸€äº›å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆã€‚</p><h3 id="5ã€SELinuxçŠ¶æ€"><a href="#5ã€SELinuxçŠ¶æ€" class="headerlink" title="5ã€SELinuxçŠ¶æ€"></a>5ã€SELinuxçŠ¶æ€</h3><p>é“¾æ¥ ftp çš„æ—¶å€™å¦‚æœå‡ºç°æ— æ³•è®¿é—®ç›®å½•åˆ—è¡¨é—®é¢˜ï¼š<br>æŸ¥çœ‹ftpçš„SelinuxçŠ¶æ€ï¼š</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># sestatus -b | grep ftp</span><br></code></pre></td></tr></table></figure><p>å°†çŠ¶æ€æ”¹ä¸ºonï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-attr">[root@localhost ~]</span># setsebool -<span class="hljs-selector-tag">P</span> tftp_home_dir on ï¼ˆæ³¨æ„ï¼š<span class="hljs-selector-tag">P</span>ä¸ºå¤§å†™ï¼‰<br><span class="hljs-selector-attr">[root@localhost ~]</span># setsebool -<span class="hljs-selector-tag">P</span> ftpd_full_access on ï¼ˆæ³¨æ„ï¼š<span class="hljs-selector-tag">P</span>ä¸ºå¤§å†™ï¼‰ <br></code></pre></td></tr></table></figure><h3 id="6ã€FTPè¿æ¥å¸¸è§é”™è¯¯ä»£ç "><a href="#6ã€FTPè¿æ¥å¸¸è§é”™è¯¯ä»£ç " class="headerlink" title="6ã€FTPè¿æ¥å¸¸è§é”™è¯¯ä»£ç "></a>6ã€FTPè¿æ¥å¸¸è§é”™è¯¯ä»£ç </h3><p>è¯´æ˜ï¼š é…ç½®çš„ftpæ— æ³•è¿æ¥ï¼Œä¼šè¿”å›é”™è¯¯ä»£ç ã€‚å…·ä½“é”™è¯¯ä»£ç åˆä»£è¡¨äº†ä»€ä¹ˆå‘¢ï¼Ÿ</p><h4 id="6-1ã€Connect-è¿æ¥è¢«æ‹’ç»ï¼š"><a href="#6-1ã€Connect-è¿æ¥è¢«æ‹’ç»ï¼š" class="headerlink" title="6.1ã€Connect è¿æ¥è¢«æ‹’ç»ï¼š"></a>6.1ã€Connect è¿æ¥è¢«æ‹’ç»ï¼š</h4><blockquote><p>å¯èƒ½åŸå› æ˜¯vsftpdæœåŠ¡æ²¡è¢«å¯åŠ¨</p></blockquote><h4 id="6-2ã€500-OOPS"><a href="#6-2ã€500-OOPS" class="headerlink" title="6.2ã€500 OOPS:"></a>6.2ã€500 OOPS:</h4><h5 id="6-2-1ã€cannot-open-user-list-fileï¼š"><a href="#6-2-1ã€cannot-open-user-list-fileï¼š" class="headerlink" title="6.2.1ã€cannot open user list fileï¼š"></a>6.2.1ã€cannot open user list fileï¼š</h5><blockquote><p>å¯èƒ½åŸå› æ˜¯ä¸å­˜åœ¨æ–‡ä»¶â€œ/etc/vsftpd/user_listâ€æˆ–æ–‡ä»¶ä¸­ä¸å­˜åœ¨è¯¥å¸æˆ·ï¼Œè§£å†³ï¼šè§£å†³: cho username &gt;&gt; /etc/vsftpd/user_list</p></blockquote><h5 id="6-2-2ã€cannot-open-chroot-user-list-file-500-OOPS-could-not-read-chroot-list-file-etc-vsftpd-chroot-listï¼š"><a href="#6-2-2ã€cannot-open-chroot-user-list-file-500-OOPS-could-not-read-chroot-list-file-etc-vsftpd-chroot-listï¼š" class="headerlink" title="6.2.2ã€cannot open chroot() user list file | 500 OOPS: could not read chroot() list file:/etc/vsftpd/chroot_listï¼š"></a>6.2.2ã€cannot open chroot() user list file | 500 OOPS: could not read chroot() list file:/etc/vsftpd/chroot_listï¼š</h5><blockquote><p>å¯èƒ½åŸå› æ˜¯ä¸å­˜åœ¨æ–‡ä»¶â€œ/etc/vsftpd/chroot_listâ€</p></blockquote><h5 id="6-2-3ã€missing-value-in-config-file"><a href="#6-2-3ã€missing-value-in-config-file" class="headerlink" title="6.2.3ã€missing value in config file:"></a>6.2.3ã€missing value in config file:</h5><blockquote><p>å¯èƒ½åŸå› æ˜¯é…ç½®æ–‡ä»¶â€œ=â€ç­‰å·å‰å€¼æœ‰é—®é¢˜ï¼Œæˆ–åªæœ‰ä¸€ä¸ªç©ºæ ¼</p></blockquote><h5 id="6-2-4ã€bad-bool-value-in-config-file"><a href="#6-2-4ã€bad-bool-value-in-config-file" class="headerlink" title="6.2.4ã€bad bool value in config file:"></a>6.2.4ã€bad bool value in config file:</h5><blockquote><p>å¯èƒ½åŸå› æ˜¯é…ç½®æ–‡ä»¶=â€ç­‰å·åå€¼æœ‰é—®é¢˜</p></blockquote><h5 id="6-2-5ã€unrecognised-variable-in-config-file"><a href="#6-2-5ã€unrecognised-variable-in-config-file" class="headerlink" title="6.2.5ã€unrecognised variable in config file:"></a>6.2.5ã€unrecognised variable in config file:</h5><blockquote><p>å¯èƒ½åŸå› æ˜¯å‚æ•°å‰æœ‰ç©ºæ ¼</p></blockquote><h5 id="6-2-6ã€chdirï¼Œchild-died-chrootï¼š"><a href="#6-2-6ã€chdirï¼Œchild-died-chrootï¼š" class="headerlink" title="6.2.6ã€chdirï¼Œchild died, chrootï¼š"></a>6.2.6ã€chdirï¼Œchild died, chrootï¼š</h5><blockquote><p>å¯èƒ½åŸå› æ˜¯ç”¨æˆ·ä¸»ç›®å½•æ²¡æœ‰æƒé™æˆ–æ²¡æœ‰ä¸»ç›®å½•ï¼Œæˆ–è€…è¿˜æ˜¯selinuxå½±å“çš„</p></blockquote><h5 id="6-2-7ã€vsftpd-both-local-and-anonymous-access-disabled"><a href="#6-2-7ã€vsftpd-both-local-and-anonymous-access-disabled" class="headerlink" title="6.2.7ã€vsftpd: both local and anonymous access disabled!"></a>6.2.7ã€vsftpd: both local and anonymous access disabled!</h5><blockquote><p>åŒ¿åç”¨æˆ·å’Œæœ¬åœ°ç”¨æˆ·ç™»å½•éƒ½è¢«ç¦ç”¨</p></blockquote><h5 id="6-2-8ã€vsftpd-refusing-to-run-with-writable-root-inside-chroot-ï¼š"><a href="#6-2-8ã€vsftpd-refusing-to-run-with-writable-root-inside-chroot-ï¼š" class="headerlink" title="6.2.8ã€vsftpd: refusing to run with writable root inside chroot() ï¼š"></a>6.2.8ã€vsftpd: refusing to run with writable root inside chroot() ï¼š</h5><blockquote><p>å¦‚æœå¯ç”¨äº†é™å®šç”¨æˆ·åœ¨å…¶ä¸»ç›®å½•ä¸‹éœ€è¦æ·»åŠ è¿™ä¸ªé…ç½®ï¼Œè§£å†³æŠ¥é”™  allow_writeable_chroot=YES </p></blockquote><h4 id="6-3ã€522"><a href="#6-3ã€522" class="headerlink" title="6.3ã€522"></a>6.3ã€522</h4><p>522 SSL connection failed; session reuse required: see require_ssl_reuse option in vsftpd.conf man pageã€‚åŸæ¥æ˜¯FTPçš„require_ssl_reuse=YESå¯¼è‡´çš„ï¼Œå½“é€‰é¡¹<strong>require_ssl_reuse</strong>è®¾ç½®ä¸º<code>YES</code>æ—¶ï¼Œæ‰€æœ‰SSLæ•°æ®è¿æ¥éƒ½éœ€è¦æ˜¾ç¤ºSSLä¼šè¯é‡ç”¨;è¯æ˜ä»–ä»¬çŸ¥é“ä¸æ§åˆ¶ä¿¡é“ç›¸åŒçš„ä¸»ç§˜é’¥ã€‚ </p><p>è¿™ä¸ªé—®é¢˜å¯èƒ½å¯¼è‡´å®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨èƒ½å¤Ÿæ­£å¸¸è¿æ¥ï¼Œä½†æ˜¯å®¢æˆ·ç«¯çœ‹ä¸åˆ°æœåŠ¡å™¨ä¸Šçš„ä»»ä½•å†…å®¹ã€‚</p><h4 id="6-3ã€530-ï¼š"><a href="#6-3ã€530-ï¼š" class="headerlink" title="6.3ã€530 ï¼š"></a>6.3ã€530 ï¼š</h4><h5 id="6-3-1ã€Permission-deniedï¼š"><a href="#6-3-1ã€Permission-deniedï¼š" class="headerlink" title="6.3.1ã€Permission deniedï¼š"></a>6.3.1ã€Permission deniedï¼š</h5><blockquote><p>å¯èƒ½åŸå› æ˜¯userlist_enable=YESå¹¶ä¸”/etc/vsftpd/user_listä¸­åŒ…å«è¦ç™»å½•çš„ftpç”¨æˆ·åï¼Œå³user_listç¦æ­¢äº†è¯¥ç”¨æˆ·çš„ç™»å½•ã€æˆ–è€…å¯èƒ½æ˜¯æ²¡æœ‰æŒ‡å®šuserlist_file=/etc/vsftpd/user_list</p></blockquote><h5 id="6-3-2ã€Login-incorrectï¼š"><a href="#6-3-2ã€Login-incorrectï¼š" class="headerlink" title="6.3.2ã€Login incorrectï¼š"></a>6.3.2ã€Login incorrectï¼š</h5><blockquote><p>è¦ç¡®ä¿ç”¨æˆ·åã€å¯†ç æ˜¯æ­£ç¡®çš„ï¼›</p><p>å¯èƒ½åŸå› æ˜¯ç™»å½•çš„ftpç”¨æˆ·åè¢«åŒ…å«åœ¨ç¦æ­¢ç™»å½•åˆ—è¡¨/etc/vsftpd/ftpusersä¸­  ï¼›</p><p>ä¹Ÿå¯èƒ½æ˜¯é…ç½®æ–‡ä»¶ä¸­å°‘äº†ä¸€è¡Œpam_service_name=vsftpd ï¼›</p></blockquote><p>Linux-PAMï¼ˆå³linuxå¯æ’å…¥è®¤è¯æ¨¡å—ï¼‰</p><blockquote><p>æ£€æŸ¥/etc/pam.d/vsftpd æ–‡ä»¶é‡Œé¢libçš„è·¯å¾„ï¼›</p><p>æ£€æŸ¥/etc/pam.d/vsftpd æ–‡ä»¶å†…å®¹æ˜¯å¦å¯¼è‡´localç”¨æˆ·å’Œè™šæ‹Ÿç”¨æˆ·ç™»å½•å†²çªï¼ˆå…·ä½“çš„è§ä¹‹åé…ç½®è™šæ‹Ÿç”¨æˆ·çš„æ¡ˆä¾‹7.1.3ï¼‰ï¼›</p><p>ç¼–è¾‘/etc/pam.d/vsftpæ–‡ä»¶ï¼Œæ³¨é‡Šæ‰auth required pam_shells.soï¼ˆè¿™ä¸ªè¯­å¥çš„æ„æ€æ˜¯åªæœ‰åŒ…å«shellçš„ç”¨æˆ·æ‰èƒ½ç™»å½•ï¼‰ï¼›</p></blockquote><h5 id="6-3-3ã€Non-anonymous-sessions-must-use-encryptionï¼š"><a href="#6-3-3ã€Non-anonymous-sessions-must-use-encryptionï¼š" class="headerlink" title="6.3.3ã€Non-anonymous sessions must use encryptionï¼š"></a>6.3.3ã€Non-anonymous sessions must use encryptionï¼š</h5><blockquote><p>æœåŠ¡å™¨çš„å¼ºåˆ¶ï¼ŒéåŒ¿åç”¨æˆ·å¿…é¡»ä½¿ç”¨åŠ å¯†è¿æ¥</p></blockquote><h4 id="6-4ã€GnuTLS-error-12-A-TLS-fatal-alert-has-been-receivedï¼š"><a href="#6-4ã€GnuTLS-error-12-A-TLS-fatal-alert-has-been-receivedï¼š" class="headerlink" title="6.4ã€GnuTLS error -12: A TLS fatal alert has been receivedï¼š"></a>6.4ã€GnuTLS error -12: A TLS fatal alert has been receivedï¼š</h4><blockquote><p>Filezillaæœ€æ–°ç‰ˆæœ¬è®¤ä¸ºvsftpdé»˜è®¤çš„åŠ å¯†ç®—æ³•â€DES-CBC3-SHAâ€ä¸å¤Ÿå®‰å…¨è€Œæ‹’ç»è¿æ¥å¯¼è‡´çš„ã€‚æœ‰ä¸¤ç§åŠæ³•è§£å†³è¯¥é—®é¢˜ï¼Œä¸€æ˜¯é™çº§ä½ çš„Filezillaå®¢æˆ·ç«¯ç‰ˆæœ¬åˆ°3.5.3ä»¥ä¸‹ï¼ŒäºŒæ˜¯æ›´æ”¹æœåŠ¡å™¨ç«¯vsftpdçš„é…ç½®,å¢åŠ å‚æ•°ï¼šssl_ciphers=HIGH</p></blockquote><h4 id="6-5ã€ECONNREFUSED-â€“-Connection-refused-by-serverï¼š"><a href="#6-5ã€ECONNREFUSED-â€“-Connection-refused-by-serverï¼š" class="headerlink" title="6.5ã€ECONNREFUSED â€“ Connection refused by serverï¼š"></a>6.5ã€ECONNREFUSED â€“ Connection refused by serverï¼š</h4><blockquote><p>å½“å¯ç”¨éšå¼sslè¿æ¥ï¼Œç”¨filezillaã€winscpå®¢æˆ·ç«¯è¿æ¥æ—¶æŠ¥é”™ï¼Œå› ä¸ºvsftpdæ­¤æ—¶æœåŠ¡å™¨ç«¯çš„ç«¯å£è¿˜æ˜¯21ï¼Œä½†æ˜¯å®¢æˆ·ç«¯ç¡®ä»¥990æ¥è¿æ¥ã€‚ä¿®æ”¹å®¢æˆ·ç«¯è¿æ¥æ—¶ä½¿ç”¨çš„å‚æ•°æˆ–è€…æœåŠ¡å™¨çš„é€šè¿‡å‚æ•°listen_portè®¾ç½®ç«¯å£ä¸º990ï¼Œé—®é¢˜è§£å†³</p></blockquote><h3 id="7ã€æ¡ˆä¾‹"><a href="#7ã€æ¡ˆä¾‹" class="headerlink" title="7ã€æ¡ˆä¾‹"></a>7ã€æ¡ˆä¾‹</h3><h4 id="7-1ã€æ¡ˆä¾‹ä¸€ã€å»ºç«‹åŸºäºè™šæ‹Ÿç”¨æˆ·çš„FTPæœåŠ¡å™¨ï¼Œå¹¶æ ¹æ®ä»¥ä¸‹è¦æ±‚é…ç½®FTPæœåŠ¡å™¨ã€‚"><a href="#7-1ã€æ¡ˆä¾‹ä¸€ã€å»ºç«‹åŸºäºè™šæ‹Ÿç”¨æˆ·çš„FTPæœåŠ¡å™¨ï¼Œå¹¶æ ¹æ®ä»¥ä¸‹è¦æ±‚é…ç½®FTPæœåŠ¡å™¨ã€‚" class="headerlink" title="7.1ã€æ¡ˆä¾‹ä¸€ã€å»ºç«‹åŸºäºè™šæ‹Ÿç”¨æˆ·çš„FTPæœåŠ¡å™¨ï¼Œå¹¶æ ¹æ®ä»¥ä¸‹è¦æ±‚é…ç½®FTPæœåŠ¡å™¨ã€‚"></a>7.1ã€æ¡ˆä¾‹ä¸€ã€å»ºç«‹åŸºäºè™šæ‹Ÿç”¨æˆ·çš„FTPæœåŠ¡å™¨ï¼Œå¹¶æ ¹æ®ä»¥ä¸‹è¦æ±‚é…ç½®FTPæœåŠ¡å™¨ã€‚</h4><blockquote><p>é…ç½®FTPåŒ¿åç”¨æˆ·çš„ä¸»ç›®å½•ä¸º/var/ftp/anonï¼›ä¸‹è½½å¸¦å®½é™åˆ¶ä¸º100kB/s ï¼›å»ºç«‹ä¸€ä¸ªåä¸ºabcï¼Œå£ä»¤ä¸ºxyzçš„FTPè´¦æˆ·ï¼›ä¸‹è½½å¸¦å®½é™åˆ¶ä¸º500kB/sï¼›è®¾ç½®FTPæœåŠ¡å™¨åŒæ—¶ç™»å½•åˆ°FTPæœåŠ¡å™¨çš„æœ€å¤§é“¾æ¥æ•°ä¸º100ï¼›æ¯ä¸ªIPæœ€å¤§é“¾æ¥æ•°ä¸º3ï¼›ç”¨æˆ·ç©ºé—²æ—¶é—´è¶…è¿‡é™å€¼ä¸º5åˆ†é’Ÿã€‚</p></blockquote><h5 id="7-1-1ã€åˆ›å»ºç›®å½•-var-fpt-anon"><a href="#7-1-1ã€åˆ›å»ºç›®å½•-var-fpt-anon" class="headerlink" title="7.1.1ã€åˆ›å»ºç›®å½•/var/fpt/anon"></a>7.1.1ã€åˆ›å»ºç›®å½•/var/fpt/anon</h5><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-built_in">mkdir</span> /var/fpt/anon <br>å»ºç«‹ä¸€ä¸ªåä¸º<span class="hljs-keyword">abc</span>ï¼Œå£ä»¤ä¸ºxyzçš„FTPè´¦æˆ·<br>useradd <span class="hljs-keyword">abc</span><br>passwd <span class="hljs-keyword">abc</span> <br></code></pre></td></tr></table></figure><h5 id="7-1-2ã€æœ¬åœ°çš„Localç”¨æˆ·é…ç½®"><a href="#7-1-2ã€æœ¬åœ°çš„Localç”¨æˆ·é…ç½®" class="headerlink" title="7.1.2ã€æœ¬åœ°çš„Localç”¨æˆ·é…ç½®"></a>7.1.2ã€æœ¬åœ°çš„Localç”¨æˆ·é…ç½®</h5><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs routeros">vim /etc/vsftpd/vsftpd.conf<br>-&gt;<br><span class="hljs-attribute">anonymous_enable</span>=<span class="hljs-literal">YES</span>#å…è®¸åŒ¿åç™»å½•<br><span class="hljs-attribute">anon_root</span>=/var/ftp/anon#é…ç½®FTPåŒ¿åç”¨æˆ·çš„ä¸»ç›®å½•ä¸º/var/ftp/anon<br><span class="hljs-attribute">anon_max_rate</span>=100#ä¸‹è½½å¸¦å®½é™åˆ¶ä¸º100kB/s<br><span class="hljs-attribute">local_enable</span>=<span class="hljs-literal">YES</span>#å…è®¸æœ¬åœ°ç”¨æˆ·ç™»å½•<br><span class="hljs-attribute">local_max_rate</span>=500ä¸‹è½½å¸¦å®½é™åˆ¶ä¸º500kB/s<br><span class="hljs-attribute">max_clients</span>=100#è®¾ç½®FTPæœåŠ¡å™¨åŒæ—¶ç™»å½•åˆ°FTPæœåŠ¡å™¨çš„æœ€å¤§é“¾æ¥æ•°ä¸º100<br><span class="hljs-attribute">max_per_ip</span>=3#æ¯ä¸ªIPæœ€å¤§é“¾æ¥æ•°ä¸º3<br><span class="hljs-attribute">connect_timeout</span>=300#ç”¨æˆ·ç©ºé—²æ—¶é—´è¶…è¿‡é™å€¼ä¸º5åˆ†é’Ÿ<br></code></pre></td></tr></table></figure><h5 id="7-1-3ã€ä¸‹é¢æ˜¯è™šæ‹Ÿç”¨æˆ·é…ç½®"><a href="#7-1-3ã€ä¸‹é¢æ˜¯è™šæ‹Ÿç”¨æˆ·é…ç½®" class="headerlink" title="7.1.3ã€ä¸‹é¢æ˜¯è™šæ‹Ÿç”¨æˆ·é…ç½®"></a>7.1.3ã€ä¸‹é¢æ˜¯è™šæ‹Ÿç”¨æˆ·é…ç½®</h5><p>æ·»åŠ è™šæ‹Ÿç”¨æˆ·å£ä»¤æ–‡ä»¶</p><p>æ·»åŠ è™šæ‹Ÿç”¨æˆ·åå’Œå¯†ç ï¼Œä¸€è¡Œç”¨æˆ·åï¼Œä¸€è¡Œå¯†ç ï¼Œä»¥æ­¤ç±»æ¨ã€‚å¥‡æ•°è¡Œä¸ºç”¨æˆ·åï¼Œå¶æ•°è¡Œä¸ºå¯†ç ã€‚</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs awk">vim <span class="hljs-regexp">/etc/</span>vsftpd/virtuser<br>-&gt;<br>tom<br><span class="hljs-number">123</span><br></code></pre></td></tr></table></figure><p>å°†virtuseræ–‡ä»¶çš„å…¶ä»–ç”¨æˆ·è®¿é—®æƒé™æ”¹æˆ0ï¼Œé˜²æ­¢å…¶ä»–ç”¨æˆ·è½»æ˜“çš„å¾—åˆ°å¯†ç ã€‚<br>ä¿®æ”¹ä¹‹å‰ï¼š-rw-râ€“râ€“ 1 root root    47 Nov 15 16:14 virtusers å…¶å®ƒç”¨æˆ·å¯¹æ­¤æ–‡ä»¶å¯è¯»ã€‚</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">chmod <span class="hljs-number">640</span> <span class="hljs-regexp">/etc/</span>vsftpd/virtuser<br></code></pre></td></tr></table></figure><p>ç”Ÿæˆæ•°æ®åº“æ–‡ä»¶</p><p>ä½¿ç”¨db_loadå‘½ä»¤ç”Ÿæˆè™šæ‹Ÿç”¨æˆ·å£ä»¤è®¤è¯æ–‡ä»¶ï¼Œå¦‚æœä¸èƒ½ä½¿ç”¨db_loadå‘½ä»¤è¯·å…ˆå®‰è£…db4_utils</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">rpm</span> â€“qa |grep db<span class="hljs-number">4</span>-utils#æŸ¥çœ‹æ˜¯å¦å®‰è£…<br><span class="hljs-attribute">rpm</span> â€“ivh db<span class="hljs-number">4</span>-utils-<span class="hljs-number">4</span>.<span class="hljs-number">3</span>.<span class="hljs-number">29</span>-<span class="hljs-number">9</span>.fc<span class="hljs-number">6</span>.i<span class="hljs-number">386</span>.rpm#å®‰è£…<br></code></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">db_load -T -t hash -f <span class="hljs-regexp">/etc/</span>vsftpd<span class="hljs-regexp">/virtuser /</span>etc<span class="hljs-regexp">/vsftpd/</span>virtuser.db<br>chmod <span class="hljs-number">600</span> <span class="hljs-regexp">/etc/</span>vsftpd/vuser.db<br></code></pre></td></tr></table></figure><p>ç¼–è¾‘/etc/pam.d/vsftpd</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs awk">vim <span class="hljs-regexp">/etc/</span>pam.d/vsftpd<br>-&gt;<br>auth      sufficient   pam_userdb.so  db=<span class="hljs-regexp">/etc/</span>vsftpd/virtuser<br>account   sufficient   pam_userdb.so  db=<span class="hljs-regexp">/etc/</span>vsftpd/virtuser<br></code></pre></td></tr></table></figure><blockquote><p>è¯¯åŒºï¼šç½‘ä¸ŠæŸ¥é˜…è¿‡è®¸å¤šé…ç½®è™šæ‹Ÿç”¨æˆ·çš„èµ„æ–™ï¼Œå¤§å¤šéƒ½æ˜¯è¯´å°†/etc/pam.d/vsftpdä¸­çš„åŸæ¥çš„authå’Œaccountå†…å®¹æ³¨é‡Šæ‰ï¼Œä½†æ˜¯è¿™æ ·åšçš„è¯ä¼šå¯¼è‡´localç”¨æˆ·æ— æ³•è®¿é—®ftpæœåŠ¡ã€‚<br>åŠ å…¥ä»¥ä¸‹ï¼š<br>auth      required   pam_userdb.so  db=/etc/vsftpd/virtuser<br>account   required   pam_userdb.so  db=/etc/vsftpd/virtuser</p><p>è‹¥è¦è™šæ‹Ÿå’Œæœ¬åœ°ç”¨æˆ·éƒ½èƒ½å¤Ÿè®¿é—®ftpæœåŠ¡<br>åŠ å…¥ä»¥ä¸‹ï¼š<br>auth      sufficient   pam_userdb.so  db=/etc/vsftpd/virtuser<br>account   sufficient   pam_userdb.so  db=/etc/vsftpd/virtuser<br>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜åº”è¯¥æ³¨æ„æ–°æ·»åŠ çš„è¿™ä¸¤è¡Œåœ¨æ–‡ä»¶ä¸­çš„ä½ç½®</p></blockquote><p>ç¼–è¾‘vsftpd.confæ˜ å°„è™šæ‹Ÿç”¨æˆ·</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs routeros">vim /etc/vsftpd/vsftpd.conf<br>-&gt;<br><span class="hljs-attribute">guest_enable</span>=<span class="hljs-literal">YES</span><br><span class="hljs-attribute">guest_username</span>=abc<br></code></pre></td></tr></table></figure><p><img src="/2019/11/15/FTP%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA/ftp.png" alt="1"></p><h4 id="7-2ã€æ¡ˆä¾‹äºŒã€ä¸€ä¸ªç®€å•çš„å…¬å¸éƒ¨é—¨FTPæœåŠ¡"><a href="#7-2ã€æ¡ˆä¾‹äºŒã€ä¸€ä¸ªç®€å•çš„å…¬å¸éƒ¨é—¨FTPæœåŠ¡" class="headerlink" title="7.2ã€æ¡ˆä¾‹äºŒã€ä¸€ä¸ªç®€å•çš„å…¬å¸éƒ¨é—¨FTPæœåŠ¡"></a>7.2ã€æ¡ˆä¾‹äºŒã€ä¸€ä¸ªç®€å•çš„å…¬å¸éƒ¨é—¨FTPæœåŠ¡</h4><p>1ã€æ–°å»ºä¸€åˆ†åŒºï¼Œ10Gç©ºé—´ï¼Œext3 æ–‡ä»¶ç³»ç»Ÿï¼ŒæŒ‚åœ¨åˆ° /ftpä¸‹ï¼Œä½œä¸º ftpæœåŠ¡å™¨æ•°æ®å­˜æ”¾åœ°æ–¹ã€‚<br>2ã€å››ä¸ªéƒ¨é—¨ï¼šdep1ï¼Œdep2ï¼Œ dep3ï¼Œ dep4ï¼Œåˆ†åˆ«å¯¹åº”ç›®å½• /ftp/dep1ï¼Œ/ftp/dep2ï¼Œ/ftp/dep3ï¼Œ/ftp/dep4ã€‚å¦å¤–è®¾å®šä¸€ä¸ªå…¬å…±ç›®å½• /ftp/publicã€‚<br>3ã€äº”ä¸ªç”¨æˆ·ï¼šadminï¼Œuser1ï¼Œuser2ï¼Œuser3ï¼Œuser4ã€‚å…¶ä¸­ï¼šuser 1/2/3/4åˆ†åˆ«å¯¹åº”éƒ¨é—¨dep 1/2/3/4ï¼Œä»–ä»¬åªèƒ½è®¿é—®è‡ªå·±æ‰€å±éƒ¨é—¨çš„ç›®å½•å’Œpublicç›®å½•ã€‚å¦‚ï¼šuser1åªèƒ½è®¿é—®dep1å’Œpublicç›®å½•ï¼Œä¸èƒ½è®¿é—®å…¶å®ƒç›®å½•ã€‚adminä¸ºç®¡ç†å‘˜ç”¨æˆ·ï¼Œå¯ä»¥è®¿é—® ftp æœåŠ¡å™¨ä¸Šçš„ä»»ä½•ç›®å½•ã€‚<br>4ã€ç”¨æˆ·è®¿é—®æƒé™é™åˆ¶ï¼šuser1/2/3/4åœ¨æ‰€èƒ½è®¿é—®çš„ç›®å½•ï¼Œå…·æœ‰ä¸Šä¼ æ–‡ä»¶ã€ä¸‹è½½æ–‡ä»¶çš„åŠŸèƒ½ï¼Œä½†æ˜¯ä¸èƒ½å¤Ÿåˆ é™¤æ–‡ä»¶ã€æ›´æ”¹æ–‡ä»¶æƒé™ç­‰åŠŸèƒ½ã€‚adminç®¡ç†å‘˜ç”¨æˆ·å¯¹æ‰€æœ‰ç›®å½•å…·æœ‰æ–‡ä»¶ä¸Šä¼ ã€ä¸‹è½½ã€åˆ é™¤ã€æƒé™æ›´æ”¹ç­‰åŠŸèƒ½ã€‚<br>5ã€å¯¹æ¯ä¸ªéƒ¨é—¨å®šåˆ¶ä¸€ä¸ª quotaï¼Œè®¾ç½®è¯¥è´¦æˆ·çš„æ–‡ä»¶é…é¢ä¸º1000ä¸ªï¼›ç£ç›˜é…é¢ä¸º2Gã€‚<br>6ã€åŒ¿åç”¨æˆ·ä¸èƒ½è®¿é—®ã€‚</p><h5 id="7-2-1ã€å¢åŠ ä¸€å—ç¡¬ç›˜ï¼Œç„¶ååˆ†åŒºï¼ŒæŠŠåˆ†åŒºæŒ‚è½½æƒ…å†µå†™å…¥-etc-fstab"><a href="#7-2-1ã€å¢åŠ ä¸€å—ç¡¬ç›˜ï¼Œç„¶ååˆ†åŒºï¼ŒæŠŠåˆ†åŒºæŒ‚è½½æƒ…å†µå†™å…¥-etc-fstab" class="headerlink" title="7.2.1ã€å¢åŠ ä¸€å—ç¡¬ç›˜ï¼Œç„¶ååˆ†åŒºï¼ŒæŠŠåˆ†åŒºæŒ‚è½½æƒ…å†µå†™å…¥/etc/fstab"></a>7.2.1ã€å¢åŠ ä¸€å—ç¡¬ç›˜ï¼Œç„¶ååˆ†åŒºï¼ŒæŠŠåˆ†åŒºæŒ‚è½½æƒ…å†µå†™å…¥/etc/fstab</h5><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs awk">fdisk <span class="hljs-regexp">/dev/</span>hdb<br>mkfs ext3 <span class="hljs-regexp">/dev/</span>hdb1<br>mkidr /ftp<br>mount <span class="hljs-regexp">/dev/</span>hdb1 /ftp -o usrquota,grpquota <br>vim <span class="hljs-regexp">/etc/</span>fstab<br>åŠ å…¥ä¸‹é¢ä¸€å¥:<br><span class="hljs-regexp">/dev/</span>hdb1       /ftp      ext3     defaults,usrquota,grpquota      <span class="hljs-number">0</span>      <span class="hljs-number">0</span> <br></code></pre></td></tr></table></figure><h5 id="7-2-2ã€å»ºç«‹ç”¨æˆ·ç»„å’Œç”¨æˆ·å’Œç›¸åº”çš„æ–‡ä»¶å¤¹å¹¶æ›´æ”¹æƒé™ï¼Œè¾¾åˆ°é¢˜ç›®è¦æ±‚"><a href="#7-2-2ã€å»ºç«‹ç”¨æˆ·ç»„å’Œç”¨æˆ·å’Œç›¸åº”çš„æ–‡ä»¶å¤¹å¹¶æ›´æ”¹æƒé™ï¼Œè¾¾åˆ°é¢˜ç›®è¦æ±‚" class="headerlink" title="7.2.2ã€å»ºç«‹ç”¨æˆ·ç»„å’Œç”¨æˆ·å’Œç›¸åº”çš„æ–‡ä»¶å¤¹å¹¶æ›´æ”¹æƒé™ï¼Œè¾¾åˆ°é¢˜ç›®è¦æ±‚"></a>7.2.2ã€å»ºç«‹ç”¨æˆ·ç»„å’Œç”¨æˆ·å’Œç›¸åº”çš„æ–‡ä»¶å¤¹å¹¶æ›´æ”¹æƒé™ï¼Œè¾¾åˆ°é¢˜ç›®è¦æ±‚</h5><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">groupadd</span> dep<span class="hljs-number">1</span><br><span class="hljs-attribute">groupadd</span> dep<span class="hljs-number">2</span><br><span class="hljs-attribute">groupadd</span> dep<span class="hljs-number">3</span><br><span class="hljs-attribute">groupadd</span> dep<span class="hljs-number">4</span><br><span class="hljs-attribute">groupadd</span> **e <br><span class="hljs-attribute">usradd</span>  -G dep<span class="hljs-number">1</span>,**e user<span class="hljs-number">1</span><br><span class="hljs-attribute">usradd</span>  -G dep<span class="hljs-number">2</span>,**e user<span class="hljs-number">2</span><br><span class="hljs-attribute">usradd</span>  -G dep<span class="hljs-number">3</span>,**e user<span class="hljs-number">3</span><br><span class="hljs-attribute">usradd</span>  -G dep<span class="hljs-number">4</span>,**e user<span class="hljs-number">4</span><br><span class="hljs-attribute">usradd</span>  -G dep<span class="hljs-number">1</span>,dep<span class="hljs-number">2</span>,dep<span class="hljs-number">3</span>,dep<span class="hljs-number">4</span>,**e admin <br><span class="hljs-attribute">passwd</span> user<span class="hljs-number">1</span><br><span class="hljs-attribute">passwd</span> user<span class="hljs-number">2</span><br><span class="hljs-attribute">passwd</span> user<span class="hljs-number">3</span><br><span class="hljs-attribute">passwd</span> user<span class="hljs-number">4</span><br><span class="hljs-attribute">passwd</span> admin <br><span class="hljs-attribute">mkdir</span> /ftp/dep<span class="hljs-number">1</span><br><span class="hljs-attribute">mkdir</span> /ftp/dep<span class="hljs-number">2</span><br><span class="hljs-attribute">mkdir</span> /ftp/dep<span class="hljs-number">3</span><br><span class="hljs-attribute">mkdir</span> /ftp/dep<span class="hljs-number">4</span><br><span class="hljs-attribute">mkdir</span> /ftp/public <br><span class="hljs-attribute">chmod</span> uesr<span class="hljs-number">1</span>:dep<span class="hljs-number">1</span> /ftp/dep<span class="hljs-number">1</span><br><span class="hljs-attribute">chmod</span> uesr<span class="hljs-number">2</span>:dep<span class="hljs-number">2</span> /ftp/dep<span class="hljs-number">2</span><br><span class="hljs-attribute">chmod</span> uesr<span class="hljs-number">3</span>:dep<span class="hljs-number">3</span> /ftp/dep<span class="hljs-number">3</span><br><span class="hljs-attribute">chmod</span> uesr<span class="hljs-number">4</span>:dep<span class="hljs-number">4</span> /ftp/dep<span class="hljs-number">4</span><br><span class="hljs-attribute">chmod</span> admin:**e /ftp/public <br><span class="hljs-attribute">chmod</span> <span class="hljs-number">770</span> /ftp/dep<span class="hljs-number">1</span><br><span class="hljs-attribute">chmod</span> <span class="hljs-number">770</span> /ftp/dep<span class="hljs-number">2</span><br><span class="hljs-attribute">chmod</span> <span class="hljs-number">770</span> /ftp/dep<span class="hljs-number">3</span><br><span class="hljs-attribute">chmod</span> <span class="hljs-number">770</span> /ftp/dep<span class="hljs-number">4</span><br><span class="hljs-attribute">chmod</span> <span class="hljs-number">770</span> /ftp/pubic <br></code></pre></td></tr></table></figure><p>æœ€ç»ˆç»“æœå¦‚ä¸‹ :</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs tap">-rw-------<span class="hljs-number"> 1 </span>root  root     <span class="hljs-number"> 8192 </span>Jul<span class="hljs-number"> 26 </span>11:46 aquota.group<br>-rw-------<span class="hljs-number"> 1 </span>root  root     <span class="hljs-number"> 7168 </span>Jul<span class="hljs-number"> 26 </span>11:46 aquota.user<br>drwxrwx---<span class="hljs-number"> 2 </span>user1 dep1     <span class="hljs-number"> 4096 </span>Jul<span class="hljs-number"> 25 </span>20:47 dep1<br>drwxrwx---<span class="hljs-number"> 2 </span>user2 dep2     <span class="hljs-number"> 4096 </span>Jul<span class="hljs-number"> 25 </span>20:47 dep2<br>drwxrwx---<span class="hljs-number"> 2 </span>user3 dep3     <span class="hljs-number"> 4096 </span>Jul<span class="hljs-number"> 25 </span>20:47 dep3<br>drwxrwx---<span class="hljs-number"> 2 </span>user4 dep4     <span class="hljs-number"> 4096 </span>Jul<span class="hljs-number"> 25 </span>20:47 dep4<br>drwx------<span class="hljs-number"> 2 </span>root  root    <span class="hljs-number"> 16384 </span>Jul<span class="hljs-number"> 25 </span>20:44 lost+found<br>drwxrwx---<span class="hljs-number"> 2 </span>admin **e <span class="hljs-number"> 4096 </span>Jul<span class="hljs-number"> 25 </span>20:48 public <br></code></pre></td></tr></table></figure><h5 id="7-2-3ã€åˆ›å»ºquotaï¼Œé…ç½®ç£ç›˜é…é¢"><a href="#7-2-3ã€åˆ›å»ºquotaï¼Œé…ç½®ç£ç›˜é…é¢" class="headerlink" title="7.2.3ã€åˆ›å»ºquotaï¼Œé…ç½®ç£ç›˜é…é¢"></a>7.2.3ã€åˆ›å»ºquotaï¼Œé…ç½®ç£ç›˜é…é¢</h5><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs gradle">mount <span class="hljs-regexp">/dev/</span>hdb1 /ftp -o usrquota,grpquota<br>quotacheck -cuvg <span class="hljs-regexp">/dev/</span>sdb1<br>quotaon -a<br>edquota -g dep1 <br>-&gt;Disk quotas <span class="hljs-keyword">for</span> <span class="hljs-keyword">group</span> dep1 (gid <span class="hljs-number">503</span>):<br>  Filesystem                   blocks       soft       hard     inodes     soft     hard<br>  <span class="hljs-regexp">/dev/</span>hdb1                         <span class="hljs-number">0</span>    <span class="hljs-number">1024000</span>    <span class="hljs-number">2048000</span>          <span class="hljs-number">0</span>      <span class="hljs-number">500</span>     <span class="hljs-number">1000</span> <br>edquota -g -p dep1 dep2 dep3 dep4(-u -gå°†æºç”¨æˆ·ç»„å’Œç¾¤ç»„çš„quotaè®¾ç½®å¥—ç”¨è‡³å…¶ä»–ç”¨æˆ·æˆ–ç¾¤ç»„ã€‚) <br></code></pre></td></tr></table></figure><h5 id="7-2-4ã€ç¼–è¾‘vsftpdé…ç½®æ–‡ä»¶"><a href="#7-2-4ã€ç¼–è¾‘vsftpdé…ç½®æ–‡ä»¶" class="headerlink" title="7.2.4ã€ç¼–è¾‘vsftpdé…ç½®æ–‡ä»¶"></a>7.2.4ã€ç¼–è¾‘vsftpdé…ç½®æ–‡ä»¶</h5><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-comment"># vim /etc/vsftpd/vsftpd.conf </span><br><span class="hljs-attribute">anonymous_enable</span>=<span class="hljs-literal">NO</span> <br>åŠ å…¥<br><span class="hljs-attribute">local_root</span>=/ftp<br><span class="hljs-attribute">user_config_dir</span>=/etc/vsftpd/ftp_config_dir  <br><br>å¼€å¯chroot <br><span class="hljs-attribute">chroot_list_enable</span>=<span class="hljs-literal">YES</span><br><span class="hljs-attribute">chroot_list_file</span>=/etc/vsftpd/chroot_list <br></code></pre></td></tr></table></figure><h5 id="7-2-5ã€å»ºç«‹ç”¨æˆ·çš„ç‹¬ç«‹é…ç½®æ–‡ä»¶"><a href="#7-2-5ã€å»ºç«‹ç”¨æˆ·çš„ç‹¬ç«‹é…ç½®æ–‡ä»¶" class="headerlink" title="7.2.5ã€å»ºç«‹ç”¨æˆ·çš„ç‹¬ç«‹é…ç½®æ–‡ä»¶"></a>7.2.5ã€å»ºç«‹ç”¨æˆ·çš„ç‹¬ç«‹é…ç½®æ–‡ä»¶</h5><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs gradle">mkdir <span class="hljs-regexp">/etc/</span>vsftpd/ftp_config_dir<br>vim <span class="hljs-regexp">/etc/</span>vsftpd<span class="hljs-regexp">/ftp_config_dir/u</span>ser1 <br><br>-&gt;cmds_allowed=ABOR,ACCT,APPE,CWD,CDUP,HELP,LIST,MODE,MDTM,NOOP,NLST,PASS,PASV,PORT,PWD,QUIT,REIN,RETR,SITE,<span class="hljs-keyword">SIZE</span>,STOR,STAT,STOU,STRU,SYST,TYPE,USER <br><br>cp <span class="hljs-regexp">/etc/</span>vsftpd<span class="hljs-regexp">/ftp_config_dir/u</span>ser1 <span class="hljs-regexp">/etc/</span>vsftpd<span class="hljs-regexp">/ftp_config_dir/u</span>ser2<br>cp <span class="hljs-regexp">/etc/</span>vsftpd<span class="hljs-regexp">/ftp_config_dir/u</span>ser1 <span class="hljs-regexp">/etc/</span>vsftpd<span class="hljs-regexp">/ftp_config_dir/u</span>ser3<br>cp <span class="hljs-regexp">/etc/</span>vsftpd<span class="hljs-regexp">/ftp_config_dir/u</span>ser1 <span class="hljs-regexp">/etc/</span>vsftpd<span class="hljs-regexp">/ftp_config_dir/u</span>ser4<br></code></pre></td></tr></table></figure><h4 id="7-3ã€æ¡ˆä¾‹ä¸‰ã€userlist-enableå’Œuserlist-denyé…ç½®é¡¹"><a href="#7-3ã€æ¡ˆä¾‹ä¸‰ã€userlist-enableå’Œuserlist-denyé…ç½®é¡¹" class="headerlink" title="7.3ã€æ¡ˆä¾‹ä¸‰ã€userlist_enableå’Œuserlist_denyé…ç½®é¡¹"></a>7.3ã€æ¡ˆä¾‹ä¸‰ã€userlist_enableå’Œuserlist_denyé…ç½®é¡¹</h4><p>å»ºç«‹ä¸‰ä¸ªç”¨æˆ·chkin1 ã€chkin2ã€ chkin3ï¼Œå°†chkin1æ·»åŠ åˆ°/etc/vsftpd/ftpusersæ–‡ä»¶ä¸­ï¼Œå°†chkin2æ·»åŠ åˆ°/etc/vsftpd/user_listæ–‡ä»¶ä¸­ï¼Œchkin3ä¸æ·»åŠ åˆ°è¿™ä¸¤ä¸ªæ–‡ä»¶ä¸­ã€‚</p><p>1ã€å½“userlist_enable=NOæ—¶ï¼Œftpusersæ–‡ä»¶ä¸­çš„ç”¨æˆ·å°†è¢«ç¦æ­¢è®¿é—®ftpæœåŠ¡ã€‚æ­¤æ—¶åªæœ‰chkin2å’Œchkin3èƒ½å¤Ÿè®¿é—®ftpæœåŠ¡ã€‚</p><p>2ã€å½“userlist_enable=YESï¼Œuserlist_deny=NOæ—¶,FTPæœåŠ¡å™¨åªå…è®¸user_listä¸­çš„ç”¨æˆ·è®¿é—®ã€‚æ­¤æ—¶åªæœ‰chkin2èƒ½å¤Ÿè®¿é—®ftpæœåŠ¡ã€‚</p><p>3ã€å½“userlist_enable=YESï¼Œuserlist_deny=YESæ—¶ï¼Œuser_listå’Œftpusersä¸­çš„ç”¨æˆ·å‡ä¸èƒ½è®¿é—®FTPæœåŠ¡ã€‚æ­¤æ—¶ä»…chkin3èƒ½è®¿é—®FTPæœåŠ¡ã€‚</p><h3 id="8ã€è¡¥å……å†…å®¹"><a href="#8ã€è¡¥å……å†…å®¹" class="headerlink" title="8ã€è¡¥å……å†…å®¹"></a>8ã€è¡¥å……å†…å®¹</h3><h4 id="8-1ã€å¦‚ä½•å¯¹ç£ç›˜é™é¢"><a href="#8-1ã€å¦‚ä½•å¯¹ç£ç›˜é™é¢" class="headerlink" title="8.1ã€å¦‚ä½•å¯¹ç£ç›˜é™é¢"></a>8.1ã€å¦‚ä½•å¯¹ç£ç›˜é™é¢</h4><p>ç”¨quotaå¯¹/etc/fstabè¿›è¡Œé™åˆ¶ï¼Œç„¶åå¯¹ç‰¹å®šç”¨æˆ·è¿›è¡Œé™åˆ¶</p><h4 id="8-2ã€å¦‚ä½•è®©ç»‘å®šIPåˆ°vsFTPï¼Ÿ"><a href="#8-2ã€å¦‚ä½•è®©ç»‘å®šIPåˆ°vsFTPï¼Ÿ" class="headerlink" title="8.2ã€å¦‚ä½•è®©ç»‘å®šIPåˆ°vsFTPï¼Ÿ"></a>8.2ã€å¦‚ä½•è®©ç»‘å®šIPåˆ°vsFTPï¼Ÿ</h4><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚ä½•è®©ç”¨æˆ·åªèƒ½é€šè¿‡æŸä¸ªIPæ¥è®¿é—®FTPã€‚å…¶å®è¿™ä¸ªåŠŸèƒ½å¾ˆæœ‰æ„æ€ã€‚å¦‚æœç»‘å®šçš„æ˜¯å†…ç½‘çš„IPï¼Œå¤–éƒ¨æ˜¯æ²¡æœ‰åŠæ³•è®¿é—®çš„ã€‚å¦‚æœç»‘å®šçš„æ˜¯å¯¹å¤–æœåŠ¡çš„IPï¼Œå†…ç½‘ä¹Ÿåªèƒ½é€šè¿‡å¯¹å¤–æœåŠ¡çš„IPæ¥è®¿é—®FTP ã€‚</p><p>åœ¨/etc/vsftpd/vsftpd.confä¸­åŠ ä¸€è¡Œï¼Œä»¥æˆ‘çš„å±€åŸŸç½‘ä¸ºä¾‹ï¼Œè¯·çœ‹ç¬¬ä¸€å¸–ä¸­çš„æ“ä½œç¯å¢ƒï¼Œè¿™æ ·å¤–ç½‘å°±ä¸èƒ½è®¿é—®æˆ‘çš„FTPäº†ï¼Œå†…ç½‘ä¹Ÿå¯èƒ½é€šè¿‡192.168.0.2æ¥è®¿é—®FTP<br>listen_address=192.168.0.2 </p><p>åŠ å®Œåï¼Œè¦é‡å¯vsFTPæœåŠ¡å™¨ </p><h4 id="8-3ã€Linux-PAM"><a href="#8-3ã€Linux-PAM" class="headerlink" title="8.3ã€Linux-PAM"></a>8.3ã€Linux-PAM</h4><p>Linux-PAMï¼ˆå³linuxå¯æ’å…¥è®¤è¯æ¨¡å—ï¼‰æ˜¯ä¸€å¥—å…±äº«åº“,ä½¿æœ¬åœ°ç³»ç»Ÿç®¡ç†å‘˜å¯ä»¥éšæ„é€‰æ‹©ç¨‹åºçš„è®¤è¯æ–¹å¼ã€‚</p><p><a href="https://www.cnblogs.com/kevingrace/p/8671964.html">Linuxä¸‹PAMæ¨¡å—å­¦ä¹ æ€»ç»“</a></p><p><a href="https://www.ibm.com/developerworks/cn/linux/l-pam/">äº†è§£å’Œé…ç½®PAM</a></p><p><strong>è™šæ‹Ÿç”¨æˆ·å’Œæœ¬åœ°ç”¨æˆ·ä¸èƒ½å…±å­˜çš„é”™è¯¯æ’é™¤è¿‡ç¨‹</strong></p><p>ç½‘ä¸Šå¤§éƒ¨åˆ†æ•™ç¨‹æ•™å»ºç«‹è™šæ‹Ÿç”¨æˆ·ï¼Œå°†/etc/pam.d/vsftpdä¸­çš„åŸæ¥çš„authå’Œaccountå†…å®¹æ³¨é‡Šæ‰ï¼ŒåŠ å…¥ä»¥ä¸‹å†…å®¹ï¼š</p><blockquote><p>auth      required   pam_userdb.so  db=/etc/vsftpd/virtuser<br>account   required   pam_userdb.so  db=/etc/vsftpd/virtuser</p></blockquote><p>1ã€åœ¨é…ç½®vsftpdçš„è¿‡ç¨‹ä¸­ï¼Œå¬ä¿¡äº†ç½‘ä¸Šçš„å¦–è¨€ï¼ŒæŠŠvsftpdé…äº†ä¸€éï¼Œå‘ç°é…å®Œï¼Œè™šæ‹Ÿç”¨æˆ·å’Œæœ¬åœ°ç”¨æˆ·ä¸èƒ½å…±å­˜ï¼Œå³è™šæ‹Ÿç”¨æˆ·å¯ä»¥ç™»å½•ftpï¼Œä½†æ˜¯æœ¬åœ°ç”¨æˆ·ä¸èƒ½ç™»å½•çš„ftpã€‚</p><p>2ã€ä¸Šç½‘æ‰¾è¿‡å¾ˆå¤šå†…å®¹éƒ½æ‰¾ä¸åˆ°è§£å†³æ–¹æ³•ï¼Œå¤§å®¶è²Œä¼¼éƒ½æ²¡æœ‰è¿™æ ·çš„é—®é¢˜ï¼Œæˆ–è€…æ‰¾ä¸åˆ°è§£å†³åŠæ³•ã€‚</p><p>3ã€åœ¨çœ‹ä¼—å¤šæ•™ç¨‹ä¸­æœ‰çœ‹åˆ°è¿‡å’Œæœ¬æ–¹æ³•ä¸€æ ·çš„é…ç½®ï¼Œä½†æ˜¯é‚£ä»½å†…å®¹é‡Œé¢å®Œå…¨æ²¡æœ‰æåˆ°/etc/pam.d/vsftpdé‡Œé¢ä¸ºä»€ä¹ˆè¦è¿™æ ·å†™</p><p>4ã€æœ¬åœ°ç”¨æˆ·æ— æ³•ç™»å½•ï¼Œé‚£åº”è¯¥æ˜¯paméªŒè¯çš„æ—¶å€™å°±æ²¡æœ‰ç»™æœ¬åœ°ç”¨æˆ·è¿‡</p><p>å¦‚æœæŠŠ**/etc/pam.d/vsftpd** ä¸­çš„<strong>auth required pam_userdb.so db=/etc/vsftpd/vuser_passwd</strong>å’Œ<strong>account required pam_userdb.so db=/etc/vsftpd/vuser_passwd</strong>æ³¨é‡Šæ‰ï¼Œç„¶åæŠŠé‡Œé¢å…¶å®ƒçš„å†…å®¹éƒ½æ‰“å¼€æ³¨é‡Šã€‚</p><p>è¿™æ—¶å€™å†å°è¯•ï¼Œå‘ç°æœ¬åœ°ç”¨æˆ·èƒ½ç™»å½•</p><p>5ã€è¿™ä¹Ÿè¯æ˜äº†æ˜¯pamæ¨¡å—è®¤è¯é…ç½®å†²çªçš„é—®é¢˜è®©è™šæ‹Ÿç”¨æˆ·å’Œæœ¬åœ°ç”¨æˆ·ä¸èƒ½å…±å­˜</p><p><strong>requiredï¼š</strong>å †æ ˆä¸­çš„æ‰€æœ‰ Required æ¨¡å—å¿…é¡»çœ‹ä½œä¸€ä¸ªæˆåŠŸçš„ç»“æœã€‚å¦‚æœä¸€ä¸ªæˆ–å¤šä¸ª Required æ¨¡å—å¤±è´¥ï¼Œåˆ™å®ç°å †æ ˆä¸­çš„æ‰€æœ‰ Required æ¨¡å—ï¼Œä½†æ˜¯å°†è¿”å›ç¬¬ä¸€ä¸ªé”™è¯¯ã€‚</p><p>ä¹Ÿå°±æ„å‘³ç€ï¼Œrequiredéœ€è¦æ‰€æœ‰å†…å®¹éƒ½æ»¡è¶³æ‰è¡Œï¼Œå½“æˆ‘ä»¬å‰ä¸¤æ¡é…ç½®è™šæ‹Ÿç”¨æˆ·ç™»å½•éªŒè¯é€šè¿‡åï¼Œç»§ç»­å‘ä¸‹é¢çš„é…ç½®æ¡ç›®è¿›è¡ŒéªŒè¯ï¼ŒéªŒè¯æ˜¯å¦æ˜¯æœ¬åœ°ç”¨æˆ·æ—¶ç»“æœå‘ç°ä¸æ˜¯ï¼Œåˆå› ä¸ºï¼ŒéªŒè¯æœ¬åœ°ç”¨æˆ·çš„control_flagä¹Ÿä¸ºrequiredï¼Œæ‰€ä»¥è¿™æ—¶å€™ï¼Œå°±ä¼šè¿”å›é”™è¯¯ï¼Œä¹Ÿå³éªŒè¯ä¸æˆåŠŸã€‚</p><p>6ã€æ‰€ä»¥æˆ‘ä»¬ä¸èƒ½åŒæ—¶è®¾ç½®è™šæ‹Ÿç”¨æˆ·å’Œæœ¬åœ°ç”¨æˆ·çš„control_flagä¸ºrequiredã€‚æŒ‰ç…§ä¸Šé¢çš„ç½‘å€æ‰€è¯´ï¼š</p><p><strong>sufficientï¼š</strong>å¦‚æœæ ‡è®°ä¸º sufficient çš„æ¨¡å—æˆåŠŸå¹¶ä¸”å…ˆå‰æ²¡æœ‰ Required æˆ– sufficient æ¨¡å—å¤±è´¥ï¼Œåˆ™å¿½ç•¥å †æ ˆä¸­çš„æ‰€æœ‰å…¶ä½™æ¨¡å—å¹¶è¿”å›æˆåŠŸã€‚</p><p>7ã€æˆ‘ä»¬å¯ä»¥æŠŠè™šæ‹Ÿç”¨æˆ·çš„éªŒè¯é…ç½®æ”¾åœ¨æœ€å‰é¢ï¼Œä¸”æŠŠcontrol_flagè®¾ä¸ºsufficientã€‚è¿™æ ·çš„è¯ï¼Œå¦‚æœé‡åˆ°æ˜¯è™šæ‹Ÿç”¨æˆ·ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡éªŒè¯ï¼Œå¦‚æœæ˜¯æœ¬åœ°ç”¨æˆ·ï¼Œå¿½ç•¥æ‰sufficientçš„ä¸¤æ¡é…ç½®è§„åˆ™ï¼Œåªè¦æ»¡è¶³requiredå°±è¡Œï¼Œæ‰€ä»¥ä¹Ÿèƒ½é€šè¿‡éªŒè¯ã€‚</p><p><img src="/2019/11/15/FTP%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA/ftp.png" alt="2"></p><h4 id="8-4ã€MySqlæ•°æ®åº“ä¸­åˆ›å»ºç”¨æˆ·å£ä»¤æ•°æ®åº“"><a href="#8-4ã€MySqlæ•°æ®åº“ä¸­åˆ›å»ºç”¨æˆ·å£ä»¤æ•°æ®åº“" class="headerlink" title="8.4ã€MySqlæ•°æ®åº“ä¸­åˆ›å»ºç”¨æˆ·å£ä»¤æ•°æ®åº“"></a>8.4ã€MySqlæ•°æ®åº“ä¸­åˆ›å»ºç”¨æˆ·å£ä»¤æ•°æ®åº“</h4><h5 id="8-4-1ã€å®‰è£…MySql"><a href="#8-4-1ã€å®‰è£…MySql" class="headerlink" title="8.4.1ã€å®‰è£…MySql"></a>8.4.1ã€å®‰è£…MySql</h5><h5 id="8-4-2ã€å»ºç«‹æœ¬åœ°æ˜ å°„ç”¨æˆ·å¹¶è®¾ç½®å®¿ä¸»ç›®å½•æƒé™"><a href="#8-4-2ã€å»ºç«‹æœ¬åœ°æ˜ å°„ç”¨æˆ·å¹¶è®¾ç½®å®¿ä¸»ç›®å½•æƒé™" class="headerlink" title="8.4.2ã€å»ºç«‹æœ¬åœ°æ˜ å°„ç”¨æˆ·å¹¶è®¾ç½®å®¿ä¸»ç›®å½•æƒé™"></a>8.4.2ã€å»ºç«‹æœ¬åœ°æ˜ å°„ç”¨æˆ·å¹¶è®¾ç½®å®¿ä¸»ç›®å½•æƒé™</h5><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">[root@CentOS <span class="hljs-regexp">/]#useradd â€“d /</span>home<span class="hljs-regexp">/vftpsite â€“s /</span>sbin/nologin vftpuser<br>[root@CentOS <span class="hljs-regexp">/]#chmod 700 /</span>home/vftpsite<br></code></pre></td></tr></table></figure><h5 id="8-4-3ã€é…ç½®vsftpd-confï¼ˆè®¾ç½®è™šæ‹Ÿç”¨æˆ·é…ç½®é¡¹ï¼‰"><a href="#8-4-3ã€é…ç½®vsftpd-confï¼ˆè®¾ç½®è™šæ‹Ÿç”¨æˆ·é…ç½®é¡¹ï¼‰" class="headerlink" title="8.4.3ã€é…ç½®vsftpd.confï¼ˆè®¾ç½®è™šæ‹Ÿç”¨æˆ·é…ç½®é¡¹ï¼‰"></a>8.4.3ã€é…ç½®vsftpd.confï¼ˆè®¾ç½®è™šæ‹Ÿç”¨æˆ·é…ç½®é¡¹ï¼‰</h5><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[root@CentOS /]</span><span class="hljs-comment">#vi /etc/vsftpd/vsftpd.conf</span><br><span class="hljs-attr">guest_enable</span>=<span class="hljs-literal">YES</span> <span class="hljs-comment">#å¼€å¯è™šæ‹Ÿç”¨æˆ·</span><br><span class="hljs-attr">guest_username</span>=vftpuser <span class="hljs-comment">#FTPè™šæ‹Ÿç”¨æˆ·å¯¹åº”çš„ç³»ç»Ÿç”¨æˆ·</span><br><span class="hljs-attr">pam_service_name</span>=vsftpd <span class="hljs-comment">#PAMè®¤è¯æ–‡ä»¶</span><br></code></pre></td></tr></table></figure><h5 id="8-4-4ã€å»ºç«‹è™šæ‹Ÿç”¨æˆ·æ•°æ®åº“ï¼Œæ•°æ®åº“åå¦‚vftpusers"><a href="#8-4-4ã€å»ºç«‹è™šæ‹Ÿç”¨æˆ·æ•°æ®åº“ï¼Œæ•°æ®åº“åå¦‚vftpusers" class="headerlink" title="8.4.4ã€å»ºç«‹è™šæ‹Ÿç”¨æˆ·æ•°æ®åº“ï¼Œæ•°æ®åº“åå¦‚vftpusers"></a>8.4.4ã€å»ºç«‹è™šæ‹Ÿç”¨æˆ·æ•°æ®åº“ï¼Œæ•°æ®åº“åå¦‚vftpusers</h5><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs csharp">[<span class="hljs-meta">root@CentOS /</span>]<span class="hljs-meta">#mysql â€“u root â€“p</span><br>mysql&gt; create database vftpuser;   <span class="hljs-meta">#å»ºç«‹è™šæ‹Ÿç”¨æˆ·æ•°æ®åº“ï¼Œåº“åvftpuser</span><br>mysql&gt; use vftpuser;  <span class="hljs-meta">#è¿›å…¥vftpuseræ•°æ®åº“</span><br><br><span class="hljs-meta">#å»ºç«‹è™šæ‹Ÿç”¨æˆ·å£ä»¤è¡¨ï¼Œè¡¨åusers</span><br>mysql&gt; <span class="hljs-function">create table <span class="hljs-title">users</span>(<span class="hljs-params">name <span class="hljs-built_in">char</span>(<span class="hljs-number">16</span></span>) binary,passwd <span class="hljs-title">char</span>(<span class="hljs-params"><span class="hljs-number">16</span></span>) binary)</span>;  <br><br><span class="hljs-meta">#å»ºç«‹ä¸¤ä¸ªè™šæ‹Ÿç”¨æˆ·ï¼Œbobyuanå’Œmarkwang</span><br>mysql&gt; <span class="hljs-function">insert <span class="hljs-keyword">into</span> <span class="hljs-title">users</span> (<span class="hljs-params">name,passwd</span>) <span class="hljs-title">values</span> (<span class="hljs-params"><span class="hljs-string">&#x27;bobyuan&#x27;</span>,password(<span class="hljs-string">&#x27;111&#x27;</span></span>))</span>; <br>mysql&gt; <span class="hljs-function">insert <span class="hljs-keyword">into</span> <span class="hljs-title">users</span> (<span class="hljs-params">name,passwd</span>) <span class="hljs-title">values</span> (<span class="hljs-params"><span class="hljs-string">&#x27;markwang&#x27;</span>,password(<span class="hljs-string">&#x27;111&#x27;</span></span>))</span>;<br><span class="hljs-meta">#æ³¨ï¼šåœ¨è¿™é‡Œæˆ‘ç”¨è¿™ç§æ–¹æ³•æ·»åŠ çš„è™šæ‹Ÿç”¨æˆ·å¯†ç éƒ½æ˜¯ç»è¿‡MySQLåŠ å¯†çš„ï¼ŒåŠ å¯†åçš„å¯†ç pam-mysqlä¸èƒ½è¯†</span><br><span class="hljs-meta">#åˆ«ï¼ˆMySQLå’Œpam-mysqlå…¼å®¹æ€§æœ‰äº›é—®é¢˜ï¼‰ï¼Œå› æ­¤æœ¬æ¬¡å®éªŒä½¿ç”¨æ˜æ–‡ä¿å­˜å¯†ç ã€‚</span><br><br><span class="hljs-meta">#é€ä¸ªæ·»åŠ ç”¨æˆ·</span><br>mysql&gt; <span class="hljs-function">insert <span class="hljs-keyword">into</span> <span class="hljs-title">users</span> (<span class="hljs-params">name,passwd</span>) <span class="hljs-title">values</span> (<span class="hljs-params"><span class="hljs-string">&#x27;bobyuan&#x27;</span>, <span class="hljs-string">&#x27;111&#x27;</span></span>)</span>;<br>mysql&gt; <span class="hljs-function">insert <span class="hljs-keyword">into</span> <span class="hljs-title">users</span> (<span class="hljs-params">name,passwd</span>) <span class="hljs-title">values</span> (<span class="hljs-params"><span class="hljs-string">&#x27;markwang&#x27;</span>,â€˜<span class="hljs-number">111&#x27;</span></span>)</span>;<br><br><span class="hljs-meta">#æ‰¹é‡æ·»åŠ ç”¨æˆ·</span><br>[<span class="hljs-meta">root@CentOS /</span>]<span class="hljs-meta">#vim vftpuser.txt</span><br><span class="hljs-meta">#æ·»åŠ ç”¨æˆ·åå’Œå¯†ç ï¼Œæ³¨æ„å­—æ®µæ•°æ®ä¹‹é—´è¦ç”¨Tabé”®éš”å¼€ã€‚</span><br>bobyuan  <span class="hljs-number">111</span><br>markwang <span class="hljs-number">111</span><br><br>mysql&gt;use vftpuser;<br>mysql&gt;load data local infile <span class="hljs-string">&quot;/vftpuser.txt&quot;</span> <span class="hljs-keyword">into</span> table users;<br>mysql&gt;flush privileges;<br><br>mysql&gt; grant <span class="hljs-keyword">select</span> <span class="hljs-keyword">on</span> vftpuser.users to vftpuser@localhost identified <span class="hljs-keyword">by</span> <span class="hljs-string">&#x27;111111&#x27;</span>;  <span class="hljs-meta">#æˆæƒvftpuserè¿™ä¸ªè´¦å·å¯ä»¥è¯»å–vftpuseræ•°æ®åº“çš„userè¡¨</span><br><br></code></pre></td></tr></table></figure><h5 id="8-4-5ã€éªŒè¯è®¾ç½®æ˜¯å¦æˆåŠŸ"><a href="#8-4-5ã€éªŒè¯è®¾ç½®æ˜¯å¦æˆåŠŸ" class="headerlink" title="8.4.5ã€éªŒè¯è®¾ç½®æ˜¯å¦æˆåŠŸ"></a>8.4.5ã€éªŒè¯è®¾ç½®æ˜¯å¦æˆåŠŸ</h5><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">[root@CentOS /]#mysql â€“u vftpuser â€“p<br>mysql&gt;<span class="hljs-keyword">show</span> databases;<br>mysql&gt;use vftpuser;<br>mysql&gt;<span class="hljs-keyword">show</span> <span class="hljs-keyword">tables</span>;<br>mysql&gt;<span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> users;<br>mysql&gt;quit<br></code></pre></td></tr></table></figure><h5 id="8-4-6ã€ç¼–è¯‘MySqlçš„PAMè®¤è¯æ¨¡å—"><a href="#8-4-6ã€ç¼–è¯‘MySqlçš„PAMè®¤è¯æ¨¡å—" class="headerlink" title="8.4.6ã€ç¼–è¯‘MySqlçš„PAMè®¤è¯æ¨¡å—"></a>8.4.6ã€ç¼–è¯‘MySqlçš„PAMè®¤è¯æ¨¡å—</h5><p>æŸ¥çœ‹/usr/lib64/securityç›®å½•ä¸‹æœ‰æ²¡æœ‰MySQLå¯¹åº”çš„PAMæ¨¡å—pam-mysqlã€‚</p><p>å¦‚æœæ²¡æœ‰åˆ™ä¸‹è½½pam-mysqlå®‰è£…ï¼ˆ<a href="http://sourceforge.net/projects/pam-mysql%EF%BC%89%EF%BC%8C">http://sourceforge.net/projects/pam-mysqlï¼‰ï¼Œ</a></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">wget http:<span class="hljs-regexp">//</span>prdownloads.sourceforge.net<span class="hljs-regexp">/pam-mysql/</span>pam_mysql-<span class="hljs-number">0.7</span>RC1.tar.gz<br></code></pre></td></tr></table></figure><p>æˆ‘ä¸‹è½½çš„æ˜¯pam_mysql-0.7RC1.tar.gzã€‚</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@CentOS</span> /]<span class="hljs-meta">#cd /usr/local/src</span><br>[root<span class="hljs-symbol">@CentOS</span> src]<span class="hljs-meta">#tar â€“zxvf pam_mysql-0.7RC1.tar.gz</span><br>[root<span class="hljs-symbol">@CentOS</span> src]<span class="hljs-meta">#cd pam_mysql-0.7RC1</span><br>[root<span class="hljs-symbol">@CentOS</span> pam_mysql<span class="hljs-number">-0.7</span>RC1]<span class="hljs-meta"># ./configure --with-pam=/usr --with-mysql=/usr --with-pam-mods-dir=/usr/lib64/security</span><br>[root<span class="hljs-symbol">@CentOS</span> pam_mysql<span class="hljs-number">-0.7</span>RC1]<span class="hljs-meta">#make</span><br>[root<span class="hljs-symbol">@CentOS</span> pam_mysql<span class="hljs-number">-0.7</span>RC1]<span class="hljs-meta">#make install</span><br></code></pre></td></tr></table></figure><h5 id="8-4-7ã€ç¼–è¾‘vsftpdçš„PAMè®¤è¯æ–‡ä»¶"><a href="#8-4-7ã€ç¼–è¾‘vsftpdçš„PAMè®¤è¯æ–‡ä»¶" class="headerlink" title="8.4.7ã€ç¼–è¾‘vsftpdçš„PAMè®¤è¯æ–‡ä»¶"></a>8.4.7ã€ç¼–è¾‘vsftpdçš„PAMè®¤è¯æ–‡ä»¶</h5><p><strong>æ–¹æ³•ä¸€ã€åœ¨ç°æœ‰çš„vsftpdæ–‡ä»¶ä¸­</strong></p><p>åœ¨/etc/pam.dç›®å½•ä¸‹ï¼Œç¼–è¾‘vsftpdæ–‡ä»¶ï¼Œå°†é‡Œé¢å…¶ä»–çš„éƒ½æ³¨é‡Šæ‰ï¼ˆåˆæ˜¯è¿™ï¼Ÿä¸ç”¨ç†å®ƒçœ‹å‰é¢çš„ï¼‰ï¼Œæ·»åŠ ä¸‹é¢è¿™ä¸¤è¡Œï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros">auth required pam_mysql.so <span class="hljs-attribute">user</span>=vftpuser <span class="hljs-attribute">passwd</span>=111111 <span class="hljs-attribute">host</span>=localhost <span class="hljs-attribute">db</span>=vftpuser <span class="hljs-attribute">table</span>=users <span class="hljs-attribute">usercolumn</span>=name <span class="hljs-attribute">passwdcolumn</span>=passwd <span class="hljs-attribute">crypt</span>=0<br><br>account required pam_mysql.so <span class="hljs-attribute">user</span>=vftpuser <span class="hljs-attribute">passwd</span>=111111 <span class="hljs-attribute">host</span>=localhost <span class="hljs-attribute">db</span>=vftpuser <span class="hljs-attribute">table</span>=users <span class="hljs-attribute">usercolumn</span>=name <span class="hljs-attribute">passwdcolumn</span>=passwd <span class="hljs-attribute">crypt</span>=0<br></code></pre></td></tr></table></figure><p>crypt=0ï¼šè¡¨ç¤ºå£ä»¤ä½¿ç”¨æ˜æ–‡æ–¹å¼ä¿å­˜åœ¨æ•°æ®åº“ä¸­<br>crypt=1ï¼šè¡¨ç¤ºå£ä»¤ä½¿ç”¨UNIXçš„DESåŠ å¯†æ–¹å¼åŠ å¯†åä¿å­˜åœ¨æ•°æ®åº“ä¸­<br>crypt=2ï¼šè¡¨ç¤ºå£ä»¤ä½¿ç”¨MySQLçš„password()å‡½æ•°åŠ å¯†åä¿å­˜åœ¨æ•°æ®åº“ä¸­<br>crypt=3ï¼šè¡¨ç¤ºå£ä»¤ä½¿ç”¨MD5æ•£åˆ—å€¼çš„æ–¹å¼ä¿å­˜åœ¨æ•°æ®åº“ä¸­</p><p><strong>æ–¹æ³•äºŒã€æ–°å»ºç”¨äºè®¤è¯çš„é…ç½®æ–‡ä»¶/etc/pam.d/vsftpd.vusers</strong></p><p>/usr/local/src/pam_mysql-0.7RC1/README  è¿™ä¸ªæ–‡ä»¶æœ‰è¯¦ç»†è§£é‡Š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">auth required /usr/lib64/security/pam_mysql.so <span class="hljs-attribute">user</span>=vsftpd <span class="hljs-attribute">passwd</span>=vsftpd  <span class="hljs-attribute">host</span>=127.0.0.1 <span class="hljs-attribute">db</span>=vsftpd <span class="hljs-attribute">table</span>=users <span class="hljs-attribute">usercolumn</span>=name <span class="hljs-attribute">passwdcolumn</span>=password <span class="hljs-attribute">crypt</span>=2<br>account required /usr/lib64/security/pam_mysql.so <span class="hljs-attribute">user</span>=vsftpd <span class="hljs-attribute">passwd</span>=vsftpd <span class="hljs-attribute">host</span>=127.0.0.1 <span class="hljs-attribute">db</span>=vsftpd <span class="hljs-attribute">table</span>=users <span class="hljs-attribute">usercolumn</span>=name <span class="hljs-attribute">passwdcolumn</span>=password <span class="hljs-attribute">crypt</span>=2<br></code></pre></td></tr></table></figure><p>ä¿®æ”¹ä¸»é…ç½®æ–‡ä»¶/etc/vsftpd/vsftpd.conf</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">pam_service_name</span>=vsftpd.vusers  <span class="hljs-comment">##è¿™ä¸ªæ˜¯ä¸Šä¸€æ­¥æˆ‘ä»¬åˆ›å»ºçš„æ–‡ä»¶çš„æ–‡ä»¶å</span><br></code></pre></td></tr></table></figure><h5 id="8-4-8ã€é‡å¯vsftpdæœåŠ¡"><a href="#8-4-8ã€é‡å¯vsftpdæœåŠ¡" class="headerlink" title="8.4.8ã€é‡å¯vsftpdæœåŠ¡"></a>8.4.8ã€é‡å¯vsftpdæœåŠ¡</h5><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@CentOS</span> /]<span class="hljs-meta">#systemctl restart vsftpd</span><br></code></pre></td></tr></table></figure><h5 id="8-4-9ã€æµ‹è¯•è™šæ‹Ÿç”¨æˆ·ç™»å½•FTP"><a href="#8-4-9ã€æµ‹è¯•è™šæ‹Ÿç”¨æˆ·ç™»å½•FTP" class="headerlink" title="8.4.9ã€æµ‹è¯•è™šæ‹Ÿç”¨æˆ·ç™»å½•FTP"></a>8.4.9ã€æµ‹è¯•è™šæ‹Ÿç”¨æˆ·ç™»å½•FTP</h5><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">C:\User\Administrator&gt;<span class="hljs-keyword">ftp</span> <span class="hljs-number">192.168</span><span class="hljs-number">.120</span><span class="hljs-number">.240</span><br>Connected <span class="hljs-built_in">to</span> <span class="hljs-number">192.168</span><span class="hljs-number">.120</span><span class="hljs-number">.240</span>.<br><span class="hljs-number">220</span> Welcome <span class="hljs-built_in">to</span> BOB FTP server<br>User (<span class="hljs-number">192.168</span><span class="hljs-number">.120</span><span class="hljs-number">.240</span>:(<span class="hljs-literal">none</span>)): bobyuan<br><span class="hljs-number">331</span> Please specify <span class="hljs-keyword">the</span> password.<br>Password:<br><span class="hljs-number">230</span> Login successful.<br><span class="hljs-keyword">ftp</span>&gt; quit<br><span class="hljs-number">221</span> Goodbye.<br></code></pre></td></tr></table></figure><p><a href="https://www.cnblogs.com/116970u/p/10788285.html">è§£å†³æœåŠ¡å™¨å‘å›äº†ä¸å¯è·¯ç”±çš„åœ°å€ã€‚ä½¿ç”¨æœåŠ¡å™¨åœ°å€ä»£æ›¿çš„é—®é¢˜</a>             </p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>FTP</tag>
      
      <tag>Linux</tag>
      
      <tag>vsftpd</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Maven</title>
    <link href="/2019/11/14/Maven/"/>
    <url>/2019/11/14/Maven/</url>
    
    <content type="html"><![CDATA[<h3 id="1ã€Maven-ä¸€ä¸ªä¼˜ç§€çš„é¡¹ç›®æ„å»ºå·¥å…·"><a href="#1ã€Maven-ä¸€ä¸ªä¼˜ç§€çš„é¡¹ç›®æ„å»ºå·¥å…·" class="headerlink" title="1ã€Maven:ä¸€ä¸ªä¼˜ç§€çš„é¡¹ç›®æ„å»ºå·¥å…·"></a>1ã€Maven:ä¸€ä¸ªä¼˜ç§€çš„é¡¹ç›®æ„å»ºå·¥å…·</h3><h4 id="1-1ã€ä»€ä¹ˆæ˜¯Maven"><a href="#1-1ã€ä»€ä¹ˆæ˜¯Maven" class="headerlink" title="1.1ã€ä»€ä¹ˆæ˜¯Maven"></a>1.1ã€ä»€ä¹ˆæ˜¯Maven</h4><p>Mavençš„å«ä¹‰ï¼š**<a href="https://baike.baidu.com/item/Maven">Maven</a>**é¡¹ç›®å¯¹è±¡æ¨¡å‹(POM)ï¼Œå¯ä»¥é€šè¿‡ä¸€å°æ®µæè¿°ä¿¡æ¯æ¥ç®¡ç†é¡¹ç›®çš„æ„å»ºï¼ŒæŠ¥å‘Šå’Œæ–‡æ¡£çš„è½¯ä»¶<a href="https://baike.baidu.com/item/%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7">é¡¹ç›®ç®¡ç†å·¥å…·</a>ã€‚</p><p>Maven æ˜¯ä¸€ä¸ªé¡¹ç›®ç®¡ç†å’Œæ•´åˆå·¥å…·ã€‚Maven ä¸ºå¼€å‘è€…æä¾›äº†ä¸€å¥—å®Œæ•´çš„æ„å»ºç”Ÿå‘½å‘¨æœŸæ¡†æ¶ã€‚å¼€å‘å›¢é˜Ÿå‡ ä¹ä¸ç”¨èŠ±å¤šå°‘æ—¶é—´å°±èƒ½å¤Ÿè‡ªåŠ¨å®Œæˆå·¥ç¨‹çš„åŸºç¡€æ„å»ºé…ç½®ï¼Œå› ä¸º Maven ä½¿ç”¨äº†ä¸€ä¸ªæ ‡å‡†çš„ç›®å½•ç»“æ„å’Œä¸€ä¸ªé»˜è®¤çš„æ„å»ºç”Ÿå‘½å‘¨æœŸã€‚</p><p>åœ¨æœ‰å¤šä¸ªå¼€å‘å›¢é˜Ÿç¯å¢ƒçš„æƒ…å†µä¸‹ï¼ŒMaven èƒ½å¤Ÿåœ¨å¾ˆçŸ­çš„æ—¶é—´å†…ä½¿å¾—æ¯é¡¹å·¥ä½œéƒ½æŒ‰ç…§æ ‡å‡†è¿›è¡Œã€‚å› ä¸ºå¤§éƒ¨åˆ†çš„å·¥ç¨‹é…ç½®æ“ä½œéƒ½éå¸¸ç®€å•å¹¶ä¸”å¯å¤ç”¨ï¼Œåœ¨åˆ›å»ºæŠ¥å‘Šã€æ£€æŸ¥ã€æ„å»ºå’Œæµ‹è¯•è‡ªåŠ¨é…ç½®æ—¶ï¼ŒMaven å¯ä»¥è®©å¼€å‘è€…çš„å·¥ä½œå˜å¾—æ›´ç®€å•ã€‚</p><p><strong>Maven</strong>çš„ä¼˜åŠ¿:<strong><code>è‡ªåŠ¨æ„å»º</code>,<code>jaråŒ…ä¾èµ–ç®¡ç†</code>,<code>å¥‘çº¦ç¼–ç¨‹</code></strong></p><p><img src="/2019/11/14/Maven/story.png" alt="story"></p><blockquote><ul><li>POMï¼šproject object model é¡¹ç›®å¯¹è±¡æ¨¡å‹</li><li>DOM document object model æ–‡æ¡£å¯¹è±¡æ¨¡å‹</li><li>pom.xmlæ˜¯mavençš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼Œæ„å»ºè¿‡ç¨‹ç›¸å…³çš„ä¸€åˆ‡è®¾ç½®éƒ½åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­é…ç½®ï¼Œç›¸å½“äºåŠ¨æ€webå·¥ç¨‹çš„web.xmlæ–‡ä»¶</li></ul></blockquote><h5 id="1-1-1ã€è‡ªåŠ¨æ„å»º"><a href="#1-1-1ã€è‡ªåŠ¨æ„å»º" class="headerlink" title="1.1.1ã€è‡ªåŠ¨æ„å»º"></a>1.1.1ã€è‡ªåŠ¨æ„å»º</h5><p>ä½¿ç”¨Mavenå¯ä»¥ä¸ºæˆ‘ä»¬å®Œæˆå¾ˆå¤šç›¸åº”çš„åŠŸèƒ½ï¼šæ¸…ç†ä»£ç ï¼Œè‡ªåŠ¨ç¼–è¯‘ï¼Œå®Œæˆæµ‹è¯•ï¼Œç”Ÿæˆç«™ç‚¹æŠ¥å‘Šï¼Œè¿›è¡Œæ‰“åŒ…(jar,war)ï¼Œé¡¹ç›®éƒ¨ç½²ã€‚</p><ol><li>æ¸…ç†ä»£ç :ç›¸å½“äºæˆ‘ä»¬è¿è¡Œclearçš„æ•ˆæœ</li><li>è‡ªåŠ¨ç¼–è¯‘:å¯ä»¥ä¸ºå’±ä»¬è‡ªåŠ¨å®Œæˆç¼–è¯‘(ç±»ä¼¼äºæ‰§è¡Œjavacç”Ÿæˆclassæ–‡ä»¶)</li><li>å®Œæˆæµ‹è¯•:å®ç°æµ‹è¯•åŠŸèƒ½ï¼Œå¸®å’±ä»¬å®Œæˆ</li><li>ç”ŸæˆæŠ¥å‘Š:å¯ä»¥è¾ƒä¸ºæ–¹ä¾¿çš„å®ç°å¯¹é¡¹ç›®çš„ç®¡ç†</li><li>æ‰“åŒ…:æ™®é€šé¡¹ç›®æ‰“jaråŒ…ï¼Œwebé¡¹ç›®æ‰“æˆwaråŒ…</li><li>é¡¹ç›®éƒ¨ç½²:åªéœ€è¦ä¸€å¥å‘½ä»¤<strong>mvn jetty:run</strong>å³å¯å®ç°é¡¹ç›®çš„éƒ¨ç½²</li></ol><p><img src="/2019/11/14/Maven/autoc.png" alt="1"></p><h5 id="1-1-2ã€JaråŒ…ä¾èµ–ç®¡ç†"><a href="#1-1-2ã€JaråŒ…ä¾èµ–ç®¡ç†" class="headerlink" title="1.1.2ã€JaråŒ…ä¾èµ–ç®¡ç†"></a>1.1.2ã€JaråŒ…ä¾èµ–ç®¡ç†</h5><p>å’±ä»¬åˆšå­¦è¿‡æ¡†æ¶çš„é›†æˆï¼Œå¯¼åŒ…ç¡®å®æ˜¯ä¸€ä¸ªæ¯”è¾ƒç—›è‹¦çš„è¿‡ç¨‹ã€‚ç‰¹åˆ«æ˜¯æˆ‘ä»¬å¯¼å…¥ä¸€ä¸ªåŠŸèƒ½jaråŒ…ï¼Œè€Œå®ƒåˆä¾èµ–äºå…¶å®ƒçš„jaråŒ…ã€ä½†æˆ‘ä»¬æ€ä¹ˆçŸ¥é“æœ‰å“ªäº›ä¾èµ–åŒ…ã€‘ï¼Œé æ­»è®°ç¡¬èƒŒï¼Œå³èŠ±æ—¶é—´åˆæ²¡æœ‰å¤ªå¤§çš„æ„ä¹‰ï¼Œè€ŒMavenå®Œç¾çš„è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬åªéœ€è¦å¯¼å…¥åŠŸèƒ½åŒ…ï¼Œå®ƒä¼šä¸ºæˆ‘ä»¬<strong>è‡ªåŠ¨æŠŠå¯¹åº”çš„ä¾èµ–åŒ…å¯¼å…¥</strong>ã€‚</p><p>ä¸è¿‡ä½¿ç”¨mavenå¯¼åŒ…éœ€è¦æˆ‘ä»¬è¿›è¡Œç›¸åº”çš„xmlé…ç½®(<strong>pom.xml</strong>),å¥½å§ï¼Œå¯¹åˆå­¦è€…æ¥è¯´è¿™ä¸ªxmlé…ç½®çœ‹èµ·æ¥ä¹Ÿç¡®å®æ˜¯æ¯”è¾ƒéº»çƒ¦ï¼Œä¸è¿‡å¤§å®¶ä¸ç”¨æ‹…å¿ƒã€‚ç­‰ä½ å­¦äº†Mavençš„ä»“åº“ï¼Œä¸€åˆ‡éƒ½ä¼šå˜å¾—easyèµ·æ¥ã€‚</p><h5 id="1-1-3ã€å¥‘çº¦ç¼–ç¨‹"><a href="#1-1-3ã€å¥‘çº¦ç¼–ç¨‹" class="headerlink" title="1.1.3ã€å¥‘çº¦ç¼–ç¨‹"></a>1.1.3ã€å¥‘çº¦ç¼–ç¨‹</h5><p>çº¦å®šå¥½é¡¹ç›®çš„åŸºæœ¬ç»“æ„ã€‚å’±ä»¬ä½¿ç”¨Mavenï¼Œé¡¹ç›®çš„ç»“æ„å°±å¿…éœ€æ˜¯Mavenè¦æ±‚çš„ç»“æ„ï¼Œåˆšå¼€å§‹ä½¿ç”¨è¿™ç§ç»“æ„ç¡®å®è®©äººå¾ˆåˆ«æ‰­ï¼Œä½†æ˜¯ï¼Œè¿™ç§å¥‘çº¦ç¼–ç¨‹å´è®©ä»£ç ç»“æ„æœ‰<strong>ç»Ÿä¸€çš„è§„èŒƒ</strong>,è®©å¤šäºº(å¤šå›¢é˜Ÿ)å¼€å‘å˜å¾—æ›´åŠ çš„ç®€å•ã€‚</p><p><img src="/2019/11/14/Maven/tools.png" alt="1"></p><h4 id="1-2ã€Mavençš„å®‰è£…ä¸é…ç½®"><a href="#1-2ã€Mavençš„å®‰è£…ä¸é…ç½®" class="headerlink" title="1.2ã€Mavençš„å®‰è£…ä¸é…ç½®"></a>1.2ã€Mavençš„å®‰è£…ä¸é…ç½®</h4><p>Mavenæ˜¯ä¸€ä¸ªåŸºäºJavaçš„å·¥å…·ï¼Œæ‰€ä»¥ç¬¬ä¸€ä»¶äº‹å°±æ˜¯å®‰è£…JDKã€‚</p><h5 id="1-2-1ã€å®‰è£…JDKï¼Œå·²ç»å®‰è£…å¯è·³è¿‡ï¼"><a href="#1-2-1ã€å®‰è£…JDKï¼Œå·²ç»å®‰è£…å¯è·³è¿‡ï¼" class="headerlink" title="1.2.1ã€å®‰è£…JDKï¼Œå·²ç»å®‰è£…å¯è·³è¿‡ï¼"></a>1.2.1ã€å®‰è£…JDKï¼Œå·²ç»å®‰è£…å¯è·³è¿‡ï¼</h5><p>JDKä¸‹è½½åœ°å€: <a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">http://www.oracle.com/technetwork/java/javase/downloads/index.html</a></p><p>é…ç½®ç¯å¢ƒå˜é‡ï¼š</p><p>JAVA_HOME</p><p>Path+=%JAVA_HOME%\bin</p><p>æµ‹è¯•ï¼šcmd&lt;java -version</p><h5 id="1-2-2ã€å®‰è£…Maven"><a href="#1-2-2ã€å®‰è£…Maven" class="headerlink" title="1.2.2ã€å®‰è£…Maven"></a>1.2.2ã€å®‰è£…Maven</h5><p>ä»ç½‘ä¸Šä¸‹è½½ Mavenï¼š<strong><a href="http://maven.apache.org/download.html">http://maven.apache.org/download.html</a></strong></p><p>è§£å‹å®‰è£…ã€é…ç½®ç¯å¢ƒå˜é‡</p><p>æµ‹è¯•ï¼šmvn -v</p><p>mvnä¼šåœ¨å½“å‰è·¯å¾„å¯»æ‰¾srcå’Œpom.xml</p><p>è‡ªåŠ¨ç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼šC:\Users\Administrator.m2\repository æœ¬åœ°ä»“åº“ç›®å½•  </p><h5 id="1-2-3ã€é…ç½®æœ¬åœ°ä»“åº“"><a href="#1-2-3ã€é…ç½®æœ¬åœ°ä»“åº“" class="headerlink" title="1.2.3ã€é…ç½®æœ¬åœ°ä»“åº“"></a>1.2.3ã€é…ç½®æœ¬åœ°ä»“åº“</h5><p>Mavenä¼šè‡ªåŠ¨ä¸ºæˆ‘ä»¬æ·»åŠ ç›¸åº”çš„jaråŒ…ï¼Œè€Œè¿™ä¸ªjaråŒ…ä¼šå…ˆåœ¨<strong>æœ¬åœ°ä»“åº“</strong>ä¸­æŸ¥æ‰¾ï¼Œå¦‚æœæœ¬åœ°ä»“åº“ä¸­æ‰¾ä¸åˆ°ï¼Œåˆ™ä¼šåœ¨ä¸­å¤®ä»“åº“ï¼ˆç½‘ç»œä¸Šï¼‰å»è¿›è¡Œä¸‹è½½ã€‚</p><p>æ³¨æ„ï¼šæœ€å¥½å°†æœ¬åœ°ä»“åº“é…ç½®åœ¨éç³»ç»Ÿç›˜ã€‚</p><p>æœ¬åœ°çš„é»˜è®¤ä»“åº“åœ¨Cç›˜ï¼ˆç³»ç»Ÿç›˜ï¼‰ä¸­ï¼Œ<strong>ç”¨æˆ·å®¶ç›®å½•çš„.m2ç›®å½•ä¸‹</strong>ã€‚</p><h6 id="ç¬¬ä¸€æ­¥ï¼šç§»åŠ¨settings-xmlæ–‡ä»¶"><a href="#ç¬¬ä¸€æ­¥ï¼šç§»åŠ¨settings-xmlæ–‡ä»¶" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šç§»åŠ¨settings.xmlæ–‡ä»¶"></a><strong>ç¬¬ä¸€æ­¥ï¼šç§»åŠ¨settings.xmlæ–‡ä»¶</strong></h6><p><strong>å…¨å±€çš„é…ç½®æ–‡ä»¶ï¼š</strong>æ‰¾åˆ°ä½ çš„Mavenå®‰è£…è·¯å¾„ï¼Œè¿›å…¥MAVEN_HOME/conf/settings.xml</p><p><strong>ç”¨æˆ·çš„é…ç½®æ–‡ä»¶ï¼š</strong>ç”¨æˆ·æ ¹è·¯å¾„C:\Users\Administrator/.m2/settings.xml å•ä¸ªç”¨æˆ·çš„,ä¿®æ”¹</p><p>ä¿®æ”¹settings.xmlæ–‡ä»¶ï¼Œå°†ä¸­å¤®ä»“åº“åˆ‡æ¢ä¸ºé˜¿é‡Œè¿œç¨‹ä»“åº“</p><blockquote><p>ä¸­å¤®ä»“åº“:Mavençš„é»˜è®¤çš„è¿œç¨‹ä»“åº“(<a href="http://repo1.maven.org/maven2">http://repo1.maven.org/maven2</a>)</p><p>ç§æœ:æ˜¯ä¸€ç§ç‰¹æ®Šçš„è¿œç¨‹ä»“åº“ï¼Œå®ƒæ˜¯æ¶è®¾åœ¨å±€åŸŸç½‘å†…çš„ä»“åº“</p><p>é•œåƒï¼šç”¨æ¥æ›¿ä»£ä¸­å¤®ä»“åº“ï¼Œé€Ÿåº¦ä¸€èˆ¬æ¯”ä¸­å¤®ä»“åº“å¿«(ç™¾åº¦ csdnï¼Œoschina,<strong>é˜¿é‡Œäº‘</strong>)</p></blockquote><p>åœ¨mavençš„settings.xmlæ–‡ä»¶é‡Œçš„mirrorsç»“ç‚¹ï¼Œæ·»åŠ å¦‚ä¸‹å­èŠ‚ç‚¹ï¼šï¼ˆä¸¤ä¸ªsettings.xmlæ–‡ä»¶éƒ½è¦ä¿®æ”¹ï¼‰</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">mirror</span>&gt;</span>  <br>    <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>nexus-aliyun<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>  <br>    <span class="hljs-tag">&lt;<span class="hljs-name">mirrorOf</span>&gt;</span>central<span class="hljs-tag">&lt;/<span class="hljs-name">mirrorOf</span>&gt;</span>    <br>    <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>Nexus aliyun<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>  <br><span class="hljs-tag">&lt;<span class="hljs-name">url</span>&gt;</span>http://maven.aliyun.com/nexus/content/groups/public<span class="hljs-tag">&lt;/<span class="hljs-name">url</span>&gt;</span>  <br><span class="hljs-tag">&lt;/<span class="hljs-name">mirror</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="/2019/11/14/Maven/settings.png" alt="1"></p><h6 id="ç¬¬äºŒæ­¥ï¼šå‡†å¤‡å¥½æœ¬åœ°ä»“åº“"><a href="#ç¬¬äºŒæ­¥ï¼šå‡†å¤‡å¥½æœ¬åœ°ä»“åº“" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šå‡†å¤‡å¥½æœ¬åœ°ä»“åº“"></a>ç¬¬äºŒæ­¥ï¼šå‡†å¤‡å¥½æœ¬åœ°ä»“åº“</h6><p>åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ä½œä¸ºæœ¬åœ°ä»“åº“ï¼Œå¦‚ï¼šD:\Program Files\apache-maven-3.6.1\repo</p><p><img src="/2019/11/14/Maven/repo.png" alt="1"></p><h6 id="ç¬¬ä¸‰æ­¥ï¼šé…ç½®æ–‡ä»¶ä¸­è®¾ç½®è·¯å¾„åˆ°æœ¬åœ°ä»“åº“"><a href="#ç¬¬ä¸‰æ­¥ï¼šé…ç½®æ–‡ä»¶ä¸­è®¾ç½®è·¯å¾„åˆ°æœ¬åœ°ä»“åº“" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼šé…ç½®æ–‡ä»¶ä¸­è®¾ç½®è·¯å¾„åˆ°æœ¬åœ°ä»“åº“"></a>ç¬¬ä¸‰æ­¥ï¼šé…ç½®æ–‡ä»¶ä¸­è®¾ç½®è·¯å¾„åˆ°æœ¬åœ°ä»“åº“</h6><p>settings.xmlæ–‡ä»¶ä¸­ï¼š</p><p>å¢åŠ <localRepository>D:/OpenSource/repository</localRepository>ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š</p><p><img src="/2019/11/14/Maven/repo1.png" alt="1"></p><p><img src="/2019/11/14/Maven/repo2.png" alt="1"></p><h4 id="1-3ã€Mavenå¸¸ç”¨å‘½ä»¤"><a href="#1-3ã€Mavenå¸¸ç”¨å‘½ä»¤" class="headerlink" title="1.3ã€Mavenå¸¸ç”¨å‘½ä»¤"></a>1.3ã€Mavenå¸¸ç”¨å‘½ä»¤</h4><h5 id="1-3-1ã€æµ‹è¯•Mavenå¸¸ç”¨å‘½ä»¤ï¼ˆé‡ç‚¹ï¼‰"><a href="#1-3-1ã€æµ‹è¯•Mavenå¸¸ç”¨å‘½ä»¤ï¼ˆé‡ç‚¹ï¼‰" class="headerlink" title="1.3.1ã€æµ‹è¯•Mavenå¸¸ç”¨å‘½ä»¤ï¼ˆé‡ç‚¹ï¼‰"></a>1.3.1ã€æµ‹è¯•Mavenå¸¸ç”¨å‘½ä»¤ï¼ˆé‡ç‚¹ï¼‰</h5><p>æ³¨ï¼šå‰é¢å‡ æ­¥åªæ˜¯ç¯å¢ƒæ­å»ºï¼Œå‘½ä»¤æ‰æ˜¯æˆ‘ä»¬éœ€è¦æŒæ¡çš„é‡ç‚¹</p><p>CMDè¿›å…¥å·¥ç¨‹ç›®å½•pom.xmlåŒçº§ä¸€å±‚ç›®å½•ï¼Œæœ‰ç¼–è¯‘ã€æµ‹è¯•ã€æ‰“åŒ…ã€‚ã€‚ã€‚</p><blockquote><ol><li>   ç¼–è¯‘ä¸»ç¨‹åºï¼šæ‰§è¡Œ mvn compileå‘½ä»¤ï¼ŒæŸ¥çœ‹æ ¹ç›®å½•å˜åŒ–</li><li>   ç¼–è¯‘æµ‹è¯•ç¨‹åºï¼šæ‰§è¡Œmvn test-compile</li><li>   æ¸…ç†ï¼šmvn cleanå‘½ä»¤ï¼Œç„¶åå†æ¬¡æŸ¥çœ‹æ ¹ç›®å½•å˜åŒ–</li><li>   mvn clean compileå‘½ä»¤, æŸ¥çœ‹æ ¹ç›®å½•å˜åŒ–</li><li>   mvn clean testå‘½ä»¤ï¼ŒæŸ¥çœ‹æ ¹ç›®å½•å˜åŒ–</li><li>   æ‰“åŒ…ï¼šmvn clean packageå‘½ä»¤,æŸ¥çœ‹æ ¹ç›®å½•å˜åŒ–</li><li>   mvn source:jarå‘½ä»¤,æŸ¥çœ‹æ ¹ç›®å½•å˜åŒ–,æºç åŒ…</li><li>   ç”Ÿæˆç«™ç‚¹ï¼šmvn clean siteå‘½ä»¤,æŸ¥çœ‹æ ¹ç›®å½•å˜åŒ–</li><li>   å®‰è£…ï¼šmvn installå‘½ä»¤,æŸ¥çœ‹æœ¬åœ°ä»“åº“å˜åŒ–ï¼Œå°†è‡ªå·±çš„mvnå®‰è£…åˆ°ä»“åº“ï¼Œè§£å†³ä»¥æ¥æŸäº›ä¾èµ–é—®é¢˜</li><li>   ç”ŸæˆEclipseçš„éœ€è¦2ä¸ªæ–‡ä»¶mvn eclipse:eclipse</li><li>   mavenæ‰“åŒ…ä¸æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹çš„å‘½ä»¤mvn package -D maven.test.skip=true</li></ol></blockquote><h4 id="1-4ã€Mavenå¯¼åŒ…"><a href="#1-4ã€Mavenå¯¼åŒ…" class="headerlink" title="1.4ã€Mavenå¯¼åŒ…"></a>1.4ã€Mavenå¯¼åŒ…</h4><h5 id="1-4-1ã€è®¤è¯†pom-xmlçš„åŸºæœ¬é…ç½®ï¼ˆé‡ç‚¹ï¼‰"><a href="#1-4-1ã€è®¤è¯†pom-xmlçš„åŸºæœ¬é…ç½®ï¼ˆé‡ç‚¹ï¼‰" class="headerlink" title="1.4.1ã€è®¤è¯†pom.xmlçš„åŸºæœ¬é…ç½®ï¼ˆé‡ç‚¹ï¼‰"></a>1.4.1ã€è®¤è¯†pom.xmlçš„åŸºæœ¬é…ç½®ï¼ˆé‡ç‚¹ï¼‰</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag"><span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span><br><span class="hljs-comment">&lt;!-- ç»„idï¼šåŒ…å --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>cn.itsource.maven<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br><span class="hljs-comment">&lt;!-- æ¨¡å—åï¼šå’Œå·¥ç¨‹åä¸€è‡´ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>Hello<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-comment">&lt;!-- ç‰ˆæœ¬å· --&gt;</span><br>SNAPSHOTå¿«ç…§ï¼Œä¸ç¨³å®šï¼Œéšæ—¶éƒ½åœ¨ä¿®æ”¹bug<br>RELEASE é‡Šæ”¾ï¼Œç¨³å®šç‰ˆæœ¬<br><span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-comment">&lt;!-- é¡¹ç›®å --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>hello<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br><span class="hljs-comment">&lt;!-- jaræ–‡ä»¶ä¾èµ– --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.9<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-comment">&lt;!-- åªèƒ½åœ¨æµ‹è¯•é‡Œé¢ä½¿ç”¨src/test/java --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span><br></code></pre></td></tr></table></figure><h5 id="1-4-2ã€ï¼ˆä¾èµ–ï¼‰ä¿®æ”¹pom-xmlçš„å¯¼åŒ…é…ç½®"><a href="#1-4-2ã€ï¼ˆä¾èµ–ï¼‰ä¿®æ”¹pom-xmlçš„å¯¼åŒ…é…ç½®" class="headerlink" title="1.4.2ã€ï¼ˆä¾èµ–ï¼‰ä¿®æ”¹pom.xmlçš„å¯¼åŒ…é…ç½®"></a>1.4.2ã€ï¼ˆä¾èµ–ï¼‰ä¿®æ”¹pom.xmlçš„å¯¼åŒ…é…ç½®</h5><p>mavenè§£æä¾èµ–ä¿¡æ¯æ—¶ä¼šåˆ°æœ¬åœ°ä»“åº“ä¸­æŸ¥æ‰¾è¢«ä»¥æ¥çš„jaråŒ…ï¼Œæœ‰æ—¶è‡ªå·±ç¼–å†™çš„jarå¹¶æœªå®‰è£…åœ¨æœ¬åœ°ä»“åº“ä¸­</p><p>mvn install å°†è‡ªå·±çš„mvnå®‰è£…åˆ°ä»“åº“ï¼Œè§£å†³ä»¥æ¥æŸäº›ä¾èµ–é—®é¢˜</p><pre><code>ä¾èµ–èŒƒå›´ï¼š&lt;scope&gt;compile|test|provided&lt;/scope&gt;    compile:å…¸å‹çš„æœ‰spring-core:ã€ä¸»ç¨‹åº[yes]ã€æµ‹è¯•ç¨‹åº[yes]ã€å‚ä¸æ‰“åŒ…[yes]ã€å¼€å‘[yes]ã€å‚ä¸éƒ¨ç½²[yes]ã€è¿è¡Œ[yes]ã€‘    test:ä»¥juintä¸ºä¾‹ï¼štestèŒƒå›´ï¼Œæµ‹è¯•èŒƒå›´å¯¹ä¸»ç¨‹åºæ— ç”¨ ã€ä¸»ç¨‹åº[no]ã€æµ‹è¯•ç¨‹åº[yes]ã€å‚ä¸æ‰“åŒ…[no]ã€å‚ä¸éƒ¨ç½²[no]ã€‘    provided:ä¸compileæ¯”è¾ƒï¼šä»¥æä¾›çš„servlet-api.jaræ¥çœ‹ï¼Œå¼€å‘æ—¶æ²¡æœ‰servletç¯å¢ƒï¼Œè€Œéƒ¨ç½²è¿è¡Œæ—¶ä¸éœ€è¦æä¾› ã€å‚ä¸å¼€å‘[yes]ã€å‚ä¸éƒ¨ç½²[no]ã€å‚ä¸è¿è¡Œ[no]ã€‘ä¾èµ–çš„ä¼ é€’æ€§ï¼š    ç›´æ¥ä¾èµ–   å’Œ   ä¼ é€’ä¾èµ–    å¯ä¼ é€’ä¾èµ–ä¸å¿…åœ¨æ¯ä¸ªæ¨¡å—å·¥ç¨‹ä¸­éƒ½é‡å¤å£°æ˜ï¼Œåœ¨æœ€ â€œä¸‹é¢â€ çš„å·¥ç¨‹ä¾èµ–ä¸€æ¬¡å³å¯    écompileèŒƒå›´çš„ä¾èµ–ä¸èƒ½ä¼ é€’ï¼Œéœ€è¦åœ¨å„æ¨¡å—å„è‡ªä¾èµ–ä¾èµ–æ’é™¤(å°æ¦‚ç‡æƒ…å†µ)ï¼šæ’é™¤ä¸ç¨³å®šçš„ä¾èµ–jaråŒ…ï¼Œä¸å¸Œæœ›åŠ å…¥å½“å‰å·¥ç¨‹    &lt;exclusions&gt;&lt;exclusion&gt;&lt;groupId&gt;&lt;artifactId&gt;ä¾èµ–åŸåˆ™ï¼šè§£å†³æ¨¡å—å·¥ç¨‹ä¹‹é—´çš„jaråŒ…å†²çªé—®é¢˜    æƒ…æ™¯ä¸€ï¼šæ‰€éœ€ä¾èµ–ä¸åŒå±‚çº§ï¼Œè·¯å¾„æœ€çŸ­ä¼˜å…ˆ    æƒ…æ™¯äºŒï¼šæ‰€éœ€ä¾èµ–åŒä¸€å±‚ï¼Œ å…ˆå£°æ˜çš„dependencyä¼˜å…ˆç»Ÿä¸€ç®¡ç†ä¾èµ–ç‰ˆæœ¬ï¼š    æƒ…æ™¯ä¸€ï¼šspring-*-4.0.0.*ä¸ªç‰ˆæœ¬springä¾èµ–åŒ…ç‰ˆæœ¬éƒ½æ˜¯4.0.0ï¼Œå¦‚è‹¥ç»Ÿä¸€å‡çº§åˆ°4.1.1        æ‰‹å·¥é€ä¸ªæ›´æ”¹        é…ç½®æ›´æ”¹&lt;properties&gt;&lt;è‡ªå®šä¹‰æ ‡ç­¾å&gt;4.1.1.RELEASE&lt;/è‡ªå®šä¹‰æ ‡ç­¾å&gt;&lt;/properties&gt;            &lt;dependency&gt;...&lt;version&gt;$&#123;è‡ªå®šä¹‰æ ‡ç­¾å&#125;&lt;/version&gt;&lt;/dependency&gt;    propertieså¹¶ä¸æ˜¯åªèƒ½ç”¨äºä¾èµ–ç‰ˆæœ¬æ§åˆ¶</code></pre><p>åŠ å…¥å¯¼åŒ…é…ç½®ï¼ˆç¯å¢ƒï¼‰</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- jaræ–‡ä»¶ä¾èµ– --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>         <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.2.5.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span><br></code></pre></td></tr></table></figure><p>åŠ å…¥å¯¼åŒ…é…ç½®åçš„jaråŒ…ï¼šç¡®å®šæœ¬åœ°ä»“åº“æœ‰ç›¸åº”çš„jaråŒ…ä»æœ¬åœ°å¯¼å…¥ï¼Œå¦åˆ™è‹¥ç”µè„‘æœ‰è”ç½‘å¯ä»¥ä»ä¸­å¤®åº“ä¸‹è½½ã€‚</p><p><img src="/2019/11/14/Maven/pom.png" alt="1"></p><h5 id="1-4-3ã€ï¼ˆåæ ‡ï¼‰äº’è”ç½‘æœç´¢åæ ‡ï¼ˆç½‘ç»œè¿æ¥ç•…é€šï¼‰"><a href="#1-4-3ã€ï¼ˆåæ ‡ï¼‰äº’è”ç½‘æœç´¢åæ ‡ï¼ˆç½‘ç»œè¿æ¥ç•…é€šï¼‰" class="headerlink" title="1.4.3ã€ï¼ˆåæ ‡ï¼‰äº’è”ç½‘æœç´¢åæ ‡ï¼ˆç½‘ç»œè¿æ¥ç•…é€šï¼‰"></a>1.4.3ã€ï¼ˆåæ ‡ï¼‰äº’è”ç½‘æœç´¢åæ ‡ï¼ˆç½‘ç»œè¿æ¥ç•…é€šï¼‰</h5><p>åæ ‡çš„ç»„æˆï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-orm<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.0.5.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><blockquote><p>ä¸Šè¿°ï¼Œåæ ‡ä¸ä»“åº“å®šä½:org/springframework/spring-orm/3.0.5.RELEASE/spring-orm-3.0.5.RELEASE.jar</p><p><strong><groupId></groupId></strong> ç»„idï¼šå®šä¹‰å½“å‰Mavené¡¹ç›®éš¶å±é¡¹ç›®,åŒ…åï¼Œä¸€èˆ¬æ˜¯å…¬å¸ã€ç»„ç»‡åç§°å€’å™+é¡¹ç›®åŒ…å</p><p><strong><artifactId></artifactId></strong> æ¨¡å—idï¼šå®šä¹‰å®é™…é¡¹ç›®ä¸­çš„ä¸€ä¸ªæ¨¡å—,æ¨¡å—å(å·¥ç¨‹åç§°)</p><p>**<version>**ï¼šå®šä¹‰å½“å‰é¡¹ç›®çš„å½“å‰ç‰ˆæœ¬</version></p><p><strong>SNAPSHOT</strong>å¿«ç…§ç‰ˆæœ¬ï¼Œå°±æ˜¯å¼€å‘ç‰ˆæœ¬</p><p><strong>RELEASE</strong>é‡Šæ”¾ç‰ˆæœ¬ï¼Œæ­£å¼ç‰ˆæœ¬ï¼Œç¨³å®š ä½¿ç”¨å…¶ä»–æœºæ„æä¾›çš„jaræ–‡ä»¶,å¿…é¡»ä½¿ç”¨é‡Šæ”¾ç‰ˆæœ¬</p><p><strong>packaging</strong>ï¼šå®šä¹‰è¯¥é¡¹ç›®çš„æ‰“åŒ…æ–¹å¼(jar/war) é»˜è®¤å€¼jar</p></blockquote><p>å’±ä»¬åªéœ€è¦åŠ ä¸€ä¸ªåŒ…ï¼Œå®ƒå°±ä¼šæŠŠè¿™ä¸ªåŒ…ä»¥åŠå¯¹åº”çš„ä¾èµ–åŒ…å…¨éƒ¨å¯¼å…¥ï¼Œè¿™ç¡®å®æ˜¯å¤ªæ£’äº†ï¼Œä½†æ˜¯åˆæœ‰åŒå­¦ä¼šè§‰å¾—ï¼Œå³ä¾¿æ˜¯è¿™æ ·ï¼Œå¼•å…¥è¿™ä¸€ä¸ªåŒ…çš„xmlä¹Ÿè¿˜æ˜¯æŒºéº»çƒ¦çš„ã€‚</p><p>å…¶å®ï¼Œå¯¹äºè¿™ä¸ªå¼•å…¥ï¼Œä¹Ÿæ˜¯å¯ä»¥ç›´æ¥åœ¨ç½‘ä¸Šæœç´¢ï¼š</p><p>ç½‘å€ï¼š<a href="http://mvnrepository.com/">http://mvnrepository.com/</a></p><p>è¿›å…¥ç½‘ç«™ç›´æ¥è¿›è¡Œæœç´¢ï¼š</p><p><img src="/2019/11/14/Maven/mvnrepo.png" alt="img"></p><p>ä»æœç´¢ç»“æœä¸­é€‰æ‹©ä¸€ä¸ªè‡ªå·±éœ€è¦çš„ï¼š</p><p><img src="/2019/11/14/Maven/mvnrepo1.png" alt="img"></p><p>é€‰æ‹©ä¸€ä¸ªç›¸åº”ç‰ˆæœ¬ï¼š</p><p><img src="/2019/11/14/Maven/mvnrepo2.png" alt="1"></p><p>å°†æ•°æ®æ‹·è´è¿‡æ¥å³å¯ï¼š</p><p><img src="/2019/11/14/Maven/mvnrepo3.png" alt="1"></p><h5 id="1-4-4ã€ç”Ÿå‘½å‘¨æœŸ-æ’ä»¶-ç›®æ ‡"><a href="#1-4-4ã€ç”Ÿå‘½å‘¨æœŸ-æ’ä»¶-ç›®æ ‡" class="headerlink" title="1.4.4ã€ç”Ÿå‘½å‘¨æœŸ/æ’ä»¶/ç›®æ ‡"></a>1.4.4ã€ç”Ÿå‘½å‘¨æœŸ/æ’ä»¶/ç›®æ ‡</h5><p>å„æ„ä»¶ç¯èŠ‚æ‰§è¡Œé¡ºåº</p><ul><li>mavenæ ¸å¿ƒç¨‹åºä¸­å®šä¹‰æŠ½è±¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œç”Ÿå‘½å‘¨æœŸä¸­å„é˜¶æ®µçš„å…·ä½“ä»»åŠ¡ç”±æ’ä»¶æ¥å®Œæˆ</li><li>mavenæ ¸å¿ƒç¨‹åºä¸ºäº†æ›´å¥½çš„å®ç°è‡ªåŠ¨åŒ–æ„å»ºï¼ŒæŒ‰ç…§è¿™ä¸€ç‰¹ç‚¹æ‰§è¡Œç”Ÿå‘½å‘¨æœŸä¸­çš„å„ä¸ªé˜¶æ®µï¼Œä¸è®ºç°åœ¨è¦æ‰§è¡Œç”Ÿå‘½å‘¨æœŸçš„å“ªä¸€é˜¶æ®µï¼Œéƒ½æ˜¯ä»è¿™ä¸ªç”Ÿå‘½å‘¨æœŸçš„æœ€åˆçš„ä½ç½®å¼€å§‹æ‰§è¡Œçš„ã€‚</li><li>æ’ä»¶å’Œç›®æ ‡ï¼š<pre><code>ç”Ÿå‘½å‘¨æœŸçš„å„ä¸ªé˜¶æ®µä»…ä»…å®šä¹‰è¦æ‰§è¡Œçš„ä»»åŠ¡æ˜¯ä»€ä¹ˆå„ä¸ªé˜¶æ®µå’Œæ’ä»¶çš„ç›®æ ‡æ˜¯å¯¹åº”çš„ç›¸ä¼¼çš„ç›®æ ‡ç”±ç‰¹å®šçš„æ’ä»¶æ¥å®Œæˆ</code></pre></li></ul><h5 id="1-4-5ã€ç»§æ‰¿"><a href="#1-4-5ã€ç»§æ‰¿" class="headerlink" title="1.4.5ã€ç»§æ‰¿"></a>1.4.5ã€ç»§æ‰¿</h5><pre><code>ç°çŠ¶ï¼š    hello        ä¾èµ–junit4.0    helloFriend    ä¾èµ–junit4.0    helloFriends    ä¾èµ–junit4.9éœ€æ±‚ï¼šç»Ÿä¸€ç®¡ç†å„æ¨¡å—ä¸­å¯¹junitä¾èµ–çš„ç‰ˆæœ¬è§£å†³æ€è·¯ï¼šå°†junitä¾èµ–ç»Ÿä¸€æå–åˆ°â€œçˆ¶â€å·¥ç¨‹ä¸­ï¼Œåœ¨å­å·¥ç¨‹å£°æ˜junitä¾èµ–æ—¶ä¸å£°æ˜ç‰ˆæœ¬ï¼Œä»¥çˆ¶å·¥ç¨‹ç»Ÿä¸€è®¾å®šä¸ºå‡†    æ­¥éª¤ï¼šåˆ›å»ºmavençˆ¶å·¥ç¨‹ï¼Œæ‰“åŒ…æ–¹å¼pom        --ã€‹å­å·¥ç¨‹å£°æ˜å¯¹çˆ¶å·¥ç¨‹çš„å¼•ç”¨&lt;parent&gt;&lt;groupId&gt;&lt;artifactId&gt;&lt;relativePath&gt;ä»¥å½“å‰åŸºå‡†çš„çˆ¶å·¥ç¨‹çš„pom.xmlè·¯å¾„        --ã€‹åˆ é™¤å­å·¥ç¨‹åæ ‡é‡å¤        --ã€‹çˆ¶å·¥ç¨‹ç»Ÿä¸€junitä¾èµ–&lt;dependencyManagement&gt;&lt;dependencies&gt;&lt;denpendency&gt;&lt;groupId&gt;&lt;artifactId&gt;&lt;version&gt;        --ã€‹åˆ é™¤å­å·¥ç¨‹junitç‰ˆæœ¬å·æ§åˆ¶</code></pre><p><img src="/2019/11/14/Maven/inh.png" alt="1"></p><h5 id="1-4-6ã€èšåˆ"><a href="#1-4-6ã€èšåˆ" class="headerlink" title="1.4.6ã€èšåˆ"></a>1.4.6ã€èšåˆ</h5><p>ä¸€é”®å®‰è£…å„ä¸ªå‚ä¸èšåˆçš„æ¨¡å—</p><p><modules><module>æŒ‡å®šå„å­å·¥ç¨‹çš„ç›¸å¯¹è·¯å¾„ï¼Œå¹¶ä¸”ä¸éœ€è¦è€ƒè™‘é¡ºåº</module><module></module>â€¦</modules></p><h4 id="1-5ã€Mavençš„æ’ä»¶"><a href="#1-5ã€Mavençš„æ’ä»¶" class="headerlink" title="1.5ã€Mavençš„æ’ä»¶"></a>1.5ã€Mavençš„æ’ä»¶</h4><p>å…¶å®Mavençš„æœ¬è´¨æ˜¯ä¸€ä¸ªæ’ä»¶æ¡†æ¶ï¼Œå®ƒçš„æ ¸å¿ƒå¹¶ä¸æ‰§è¡Œä»»ä½•å…·ä½“çš„æ„å»ºä»»åŠ¡ï¼Œæ‰€ä»¥è¿™äº›ä»»åŠ¡éƒ½æ˜¯äº¤ç»™æ’ä»¶è¿˜å®Œæˆçš„ï¼Œä¾‹å¦‚ç¼–è¯‘æºä»£ç æ˜¯ç”±maven- compiler-pluginå®Œæˆçš„ã€‚</p><p>Maven æ’ä»¶é€šå¸¸è¢«ç”¨æ¥ï¼š</p><blockquote><p>1ã€åˆ›å»º jar æ–‡ä»¶    2ã€åˆ›å»º war æ–‡ä»¶    3ã€ç¼–è¯‘ä»£ç æ–‡ä»¶    </p><p>4ã€ä»£ç å•å…ƒæµ‹è¯•    5ã€åˆ›å»ºå·¥ç¨‹æ–‡æ¡£    6ã€åˆ›å»ºå·¥ç¨‹æŠ¥å‘Š</p></blockquote><p>ä¸‹é¢æ˜¯æ’ä»¶ä»£ç ï¼š</p><figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs django"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">project</span> //è¿™æ˜¯ä¸€é¡¶å±‚æ ‡ç­¾ï¼Œå†…å®¹æœ‰çœç•¥</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">finalName</span>&gt;</span>pss<span class="hljs-tag">&lt;/<span class="hljs-name">finalName</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span></span><br><span class="xml">              <span class="hljs-comment">&lt;!-- Mavençš„ç¼–è¯‘æ’ä»¶--&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">source</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">source</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">target</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">target</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span></span><br><span class="xml">               <span class="hljs-comment">&lt;!-- jettyæ’ä»¶--&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mortbay.jetty<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jetty-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>8.1.15.v20140411<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">webAppConfig</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">contextPath</span>&gt;</span>/<span class="hljs-tag">&lt;/<span class="hljs-name">contextPath</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">webAppConfig</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h4 id="1-6ã€ä»“åº“çš„è®¤è¯†"><a href="#1-6ã€ä»“åº“çš„è®¤è¯†" class="headerlink" title="1.6ã€ä»“åº“çš„è®¤è¯†"></a>1.6ã€ä»“åº“çš„è®¤è¯†</h4><p>åœ¨ Maven çš„æœ¯è¯­ä¸­ï¼Œä»“åº“æ˜¯ä¸€ä¸ªä½ç½®ï¼ˆplaceï¼‰ï¼Œä¾‹å¦‚ç›®å½•ï¼Œå¯ä»¥å­˜å‚¨æ‰€æœ‰çš„å·¥ç¨‹ jar æ–‡ä»¶ã€library jar æ–‡ä»¶ã€æ’ä»¶æˆ–ä»»ä½•å…¶ä»–çš„å·¥ç¨‹æŒ‡å®šçš„æ–‡ä»¶ã€‚</p><p>Mavençš„ä»“åº“æœ‰ä¸¤ç§:<code>æœ¬åœ°ä»“åº“</code>ä¸<code>è¿œç¨‹ä»“åº“</code></p><h5 id="1-6-1ã€æœ¬åœ°ä»“åº“ï¼š"><a href="#1-6-1ã€æœ¬åœ°ä»“åº“ï¼š" class="headerlink" title="1.6.1ã€æœ¬åœ°ä»“åº“ï¼š"></a>1.6.1ã€æœ¬åœ°ä»“åº“ï¼š</h5><blockquote><ul><li>è§£é‡Š:å½“å‰ç”µè„‘ä¸Šéƒ¨ç½²çš„ä»“åº“ç›®å½•ï¼Œä¸ºå½“å‰ç”µè„‘æä¾›mavenå·¥ç¨‹æœåŠ¡</li><li>é»˜è®¤è·¯å¾„:~/.m2/repository/</li><li>æ³¨:æ¯ä¸ªç”¨æˆ·åªæœ‰ä¸€ä¸ªæœ¬åœ°ä»“åº“ </li></ul></blockquote><h5 id="1-6-2ã€è¿œç¨‹ä»“åº“ï¼š"><a href="#1-6-2ã€è¿œç¨‹ä»“åº“ï¼š" class="headerlink" title="1.6.2ã€è¿œç¨‹ä»“åº“ï¼š"></a>1.6.2ã€è¿œç¨‹ä»“åº“ï¼š</h5><blockquote><ul><li>ç§æœ(Nexus)ï¼šå±€åŸŸç½‘ç¯å¢ƒ</li><li>ä¸­å¤®ä»“åº“ï¼šInternetä¸Šï¼Œä¸ºä¸–ç•Œmavenå·¥ç¨‹æœåŠ¡</li><li>ä¸­å¤®ä»“åº“çš„é•œåƒï¼šåˆ†æ‹…ä¸­å¤®ä»“åº“çš„æµé‡å‹åŠ›ï¼Œæå‡è®¿é—®é€Ÿåº¦</li></ul></blockquote><h5 id="1-6-3ã€ä»“åº“å†…å®¹ï¼š"><a href="#1-6-3ã€ä»“åº“å†…å®¹ï¼š" class="headerlink" title="1.6.3ã€ä»“åº“å†…å®¹ï¼š"></a>1.6.3ã€ä»“åº“å†…å®¹ï¼š</h5><blockquote><ul><li>mavenå·¥ç¨‹</li><li>mavenè‡ªèº«éœ€è¦çš„æ’ä»¶</li><li>ç¬¬ä¸‰æ–¹çš„æ¡†æ¶å·¥å…·jar</li><li>æˆ‘ä»¬è‡ªå·±çš„mavenå·¥ç¨‹ mvn install å°†è‡ªå·±çš„mvnå®‰è£…åˆ°ä»“åº“ï¼Œè§£å†³ä»¥æ¥æŸäº›ä¾èµ–é—®é¢˜</li></ul></blockquote><h4 id="1-7ã€Mavené¡¹ç›®åˆ›å»º"><a href="#1-7ã€Mavené¡¹ç›®åˆ›å»º" class="headerlink" title="1.7ã€Mavené¡¹ç›®åˆ›å»º"></a>1.7ã€Mavené¡¹ç›®åˆ›å»º</h4><h5 id="1-7-1ã€åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®"><a href="#1-7-1ã€åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®" class="headerlink" title="1.7.1ã€åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®"></a>1.7.1ã€åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®</h5><p><img src="/2019/11/14/Maven/new1.png" alt="1"></p><h5 id="1-7-2ã€é€‰æ‹©å¯¹åº”çš„Mavené¡¹ç›®"><a href="#1-7-2ã€é€‰æ‹©å¯¹åº”çš„Mavené¡¹ç›®" class="headerlink" title="1.7.2ã€é€‰æ‹©å¯¹åº”çš„Mavené¡¹ç›®"></a>1.7.2ã€é€‰æ‹©å¯¹åº”çš„Mavené¡¹ç›®</h5><p><img src="/2019/11/14/Maven/new2.png" alt="1"></p><h5 id="1-7-3ã€å¡«å†™ç»„idï¼ˆGroupIdï¼‰ä¸æ¨¡å—idï¼ˆArtifactIdï¼‰"><a href="#1-7-3ã€å¡«å†™ç»„idï¼ˆGroupIdï¼‰ä¸æ¨¡å—idï¼ˆArtifactIdï¼‰" class="headerlink" title="1.7.3ã€å¡«å†™ç»„idï¼ˆGroupIdï¼‰ä¸æ¨¡å—idï¼ˆArtifactIdï¼‰"></a>1.7.3ã€å¡«å†™ç»„idï¼ˆGroupIdï¼‰ä¸æ¨¡å—idï¼ˆArtifactIdï¼‰</h5><p><img src="/2019/11/14/Maven/new3.png" alt="1"></p><h5 id="1-7-4ã€ç›´æ¥åˆ›å»ºï¼ˆé€‰æ‹©Mavenä»“åº“è®¾ç½®ï¼Œæœ‰çš„IDEé›†æˆçš„æœ‰Mavenæœ‰çš„æ˜¯è‡ªå·±å®‰è£…çš„Mavenï¼‰"><a href="#1-7-4ã€ç›´æ¥åˆ›å»ºï¼ˆé€‰æ‹©Mavenä»“åº“è®¾ç½®ï¼Œæœ‰çš„IDEé›†æˆçš„æœ‰Mavenæœ‰çš„æ˜¯è‡ªå·±å®‰è£…çš„Mavenï¼‰" class="headerlink" title="1.7.4ã€ç›´æ¥åˆ›å»ºï¼ˆé€‰æ‹©Mavenä»“åº“è®¾ç½®ï¼Œæœ‰çš„IDEé›†æˆçš„æœ‰Mavenæœ‰çš„æ˜¯è‡ªå·±å®‰è£…çš„Mavenï¼‰"></a>1.7.4ã€ç›´æ¥åˆ›å»ºï¼ˆé€‰æ‹©Mavenä»“åº“è®¾ç½®ï¼Œæœ‰çš„IDEé›†æˆçš„æœ‰Mavenæœ‰çš„æ˜¯è‡ªå·±å®‰è£…çš„Mavenï¼‰</h5><p><img src="/2019/11/14/Maven/new4.png" alt="1"></p><h5 id="1-7-5ã€é¡¹ç›®åä¸é¡¹ç›®ä½ç½®"><a href="#1-7-5ã€é¡¹ç›®åä¸é¡¹ç›®ä½ç½®" class="headerlink" title="1.7.5ã€é¡¹ç›®åä¸é¡¹ç›®ä½ç½®"></a>1.7.5ã€é¡¹ç›®åä¸é¡¹ç›®ä½ç½®</h5><p>å»ºè®®æ”¾åœ¨éç³»ç»Ÿç›˜</p><p><img src="/2019/11/14/Maven/new5.png" alt="1"></p><h5 id="1-7-6ã€åˆ›å»ºæˆåŠŸåçš„ç›®å½•ç»“æ„"><a href="#1-7-6ã€åˆ›å»ºæˆåŠŸåçš„ç›®å½•ç»“æ„" class="headerlink" title="1.7.6ã€åˆ›å»ºæˆåŠŸåçš„ç›®å½•ç»“æ„"></a>1.7.6ã€åˆ›å»ºæˆåŠŸåçš„ç›®å½•ç»“æ„</h5><p><img src="/2019/11/14/Maven/new6.png" alt="1"></p><h5 id="1-7-7ã€è§£å†³Mavené¡¹ç›®ç›®å½•ç»“æ„ä¸æ­£ç¡®çš„é—®é¢˜"><a href="#1-7-7ã€è§£å†³Mavené¡¹ç›®ç›®å½•ç»“æ„ä¸æ­£ç¡®çš„é—®é¢˜" class="headerlink" title="1.7.7ã€è§£å†³Mavené¡¹ç›®ç›®å½•ç»“æ„ä¸æ­£ç¡®çš„é—®é¢˜"></a>1.7.7ã€è§£å†³Mavené¡¹ç›®ç›®å½•ç»“æ„ä¸æ­£ç¡®çš„é—®é¢˜</h5><p>çº¦å®šçš„ç›®å½•ç»“æ„ï¼šä¸ºä»€ä¹ˆè¦éµå®ˆçº¦å®šçš„ç›®å½•ç»“æ„ï¼Ÿ</p><p>mavenè´Ÿè´£è¿™ä¸ªé¡¹ç›®çš„è‡ªåŠ¨åŒ–æ„å»ºï¼Œä»¥ç¼–è¯‘ä¸ºä¾‹ï¼Œmavenè¦æƒ³è‡ªåŠ¨è¿›è¡Œç¼–è¯‘ï¼Œé‚£ä¹ˆä»–å¿…é¡»è¦çŸ¥é“Javaæºæ–‡ä»¶å­˜æ”¾ä½ç½®ã€‚è‡ªå®šä¹‰ä»¥é…ç½®å½¢å¼å‘ŠçŸ¥</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">hello//å·¥ç¨‹å<br>|<span class="hljs-params">---src//</span>æºç <br>|<span class="hljs-params">---</span>|<span class="hljs-params">---main//</span>å­˜æ”¾ä¸»ç¨‹åº<br>|<span class="hljs-params">---</span>|<span class="hljs-params">---</span>|<span class="hljs-params">---java//</span>å­˜æ”¾javaæºæ–‡ä»¶<br>|<span class="hljs-params">---</span>|<span class="hljs-params">---</span>|<span class="hljs-params">---resources//</span>å­˜æ”¾æ¡†æ¶æˆ–å…¶å®ƒå·¥å…·çš„é…ç½®æ–‡ä»¶<br>|<span class="hljs-params">---</span>|<span class="hljs-params">---test//</span>å­˜æ”¾æµ‹è¯•ç¨‹åº<br>|<span class="hljs-params">---</span>|<span class="hljs-params">---</span>|<span class="hljs-params">---java</span><br>|<span class="hljs-params">---</span>|<span class="hljs-params">---</span>|<span class="hljs-params">---resources</span><br>|<span class="hljs-params">---pom</span>.xml/<span class="hljs-string">/maven</span>å·¥ç¨‹çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶<br></code></pre></td></tr></table></figure><p>åœ¨ä½¿ç”¨IDEAåˆ›å»ºmaven-archetype-webappé¡¹ç›®çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šå‘ç°mainæ–‡ä»¶å¤¹ä¸‹å°‘äº†ä¸€ä¸ªjavaèµ„æºæ–‡ä»¶å¤¹ï¼Œé‚£ä¹ˆï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥å°±è¯´ä¸€ä¸‹å®ƒçš„è§£å†³æ–¹æ¡ˆï¼š</p><p><img src="/2019/11/14/Maven/new7.png" alt="1"></p><p>ç¬¬ä¸€æ­¥ï¼šé€‰æ‹©File-&gt;Project Structureâ€¦</p><p><img src="/2019/11/14/Maven/new8.png" alt="1"></p><p>ç¬¬äºŒæ­¥ï¼šé€‰æ‹©Modulesé€‰é¡¹å¡ä¸‹é¢çš„Sourcesé¡¹ï¼Œåœ¨mainæ–‡ä»¶å¤¹ä¸Šå³é”®ï¼Œé€‰æ‹©New Folderâ€¦å¹¶ç‚¹å‡»OK ,</p><p>è¾“å…¥è¦åˆ›å»ºçš„æ–‡ä»¶å¤¹åç§°ç¡®è®¤åˆ›å»ºï¼Œ</p><p>é€‰æ‹©åˆ›å»ºçš„æ–‡ä»¶å¤¹é¼ æ ‡å³é”®ï¼Œ</p><p>æ ¹æ®ç›®çš„é€‰æ‹©Sourcesï¼ˆæºæ–‡ä»¶ï¼‰ã€Testsï¼ˆæµ‹è¯•æ–‡ä»¶ï¼‰å’ŒResourcesï¼ˆèµ„æºæ–‡ä»¶ï¼‰ç­‰ã€‚</p><p><img src="/2019/11/14/Maven/new9.png" alt="1"></p><p>è®¾ç½®å®Œæˆåçš„ç›®å½•ç»“æ„ï¼š</p><p><img src="/2019/11/14/Maven/new10.png" alt="1"></p><h5 id="1-7-8ã€è§£å†³åˆ›å»ºé¡¹ç›®çš„JDKç‰ˆæœ¬é—®é¢˜"><a href="#1-7-8ã€è§£å†³åˆ›å»ºé¡¹ç›®çš„JDKç‰ˆæœ¬é—®é¢˜" class="headerlink" title="1.7.8ã€è§£å†³åˆ›å»ºé¡¹ç›®çš„JDKç‰ˆæœ¬é—®é¢˜"></a>1.7.8ã€è§£å†³åˆ›å»ºé¡¹ç›®çš„JDKç‰ˆæœ¬é—®é¢˜</h5><p>è¿™ä¸ªé—®é¢˜åœ¨æœ‰çš„ideaä¸­ä¼šå‡ºç°ï¼Œå°±æ˜¯åˆ›å»ºå¥½é¡¹ç›®åï¼Œjdkçš„ç‰ˆæœ¬å¯¹åº”ä¸ä¸Šï¼Œé‚£ä¹ˆè§£å†³æ–¹æ¡ˆæœ‰ä¸¤ä¸ª:</p><h6 id="æ–¹æ¡ˆä¸€-æŒ‡å®šmavençš„é…ç½®æ–‡ä»¶ï¼ˆä¸€åŠ³æ°¸é€¸-å»ºè®®ä½¿ç”¨ï¼‰"><a href="#æ–¹æ¡ˆä¸€-æŒ‡å®šmavençš„é…ç½®æ–‡ä»¶ï¼ˆä¸€åŠ³æ°¸é€¸-å»ºè®®ä½¿ç”¨ï¼‰" class="headerlink" title="æ–¹æ¡ˆä¸€:æŒ‡å®šmavençš„é…ç½®æ–‡ä»¶ï¼ˆä¸€åŠ³æ°¸é€¸,å»ºè®®ä½¿ç”¨ï¼‰"></a>æ–¹æ¡ˆä¸€:æŒ‡å®šmavençš„é…ç½®æ–‡ä»¶ï¼ˆä¸€åŠ³æ°¸é€¸,å»ºè®®ä½¿ç”¨ï¼‰</h6><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs xml">ç›´æ¥ä¿®æ”¹mavençš„setting.xmlæ–‡ä»¶<br>åœ¨é‡Œé¢æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š<br><span class="hljs-tag">&lt;<span class="hljs-name">profile</span>&gt;</span><br>           <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>jdk-1.8<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span><br>           <span class="hljs-tag">&lt;<span class="hljs-name">activation</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">activeByDefault</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">activeByDefault</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">jdk</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">jdk</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">activation</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span><br>                       <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.source</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.source</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.target</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.target</span>&gt;</span><br>                             <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.compilerVersion</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.compilerVersion</span>&gt;</span> <br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">profile</span>&gt;</span><br><br></code></pre></td></tr></table></figure><p><img src="/2019/11/14/Maven/new11.png" alt="1"></p><h6 id="æ–¹æ¡ˆäºŒ-é’ˆå¯¹maven-é¡¹ç›®çš„-pom-æ–‡ä»¶åˆ¶å®šjdk"><a href="#æ–¹æ¡ˆäºŒ-é’ˆå¯¹maven-é¡¹ç›®çš„-pom-æ–‡ä»¶åˆ¶å®šjdk" class="headerlink" title="æ–¹æ¡ˆäºŒ:é’ˆå¯¹maven é¡¹ç›®çš„ pom æ–‡ä»¶åˆ¶å®šjdk"></a>æ–¹æ¡ˆäºŒ:é’ˆå¯¹maven é¡¹ç›®çš„ pom æ–‡ä»¶åˆ¶å®šjdk</h6><p>æ‘˜è‡ªç½‘ç»œ:<a href="http://blog.csdn.net/geekun/article/details/51325510">http://blog.csdn.net/geekun/article/details/51325510</a></p><p>åœ¨<strong>IntelliJ IDEA 15</strong>ä¸­ä½¿ç”¨Mavenæ—¶ï¼ŒIDEAå°†é»˜è®¤çš„ç¼–è¯‘ç‰ˆæœ¬ã€æºç ç‰ˆæœ¬è®¾ç½®ä¸ºjdk5ã€‚ç¼–è¯‘é¡¹ç›®çš„æ—¶å€™å‡ºç°è­¦å‘Šï¼šâ€Warning:java: æºå€¼1.5å·²è¿‡æ—¶, å°†åœ¨æœªæ¥æ‰€æœ‰å‘è¡Œç‰ˆä¸­åˆ é™¤â€ï¼Œå¹¶ä¸”æ— æ³•ç¼–è¯‘jdk1.5ä»¥ä¸Šçš„ä»£ç ã€‚</p><p>å‡ºç°è¿™æ ·çš„åŸå› åº”è¯¥æ˜¯Mavenæ’ä»¶çš„é»˜è®¤é…ç½®æœ‰é—®é¢˜ã€‚è§£å†³æ–¹æ³•æ˜¯åœ¨â€pom.xmlâ€é‡ŒåŠ å…¥å¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-symbol">&lt;properties&gt;</span><br>    &lt;maven.<span class="hljs-keyword">compiler</span>.<span class="hljs-keyword">source</span>&gt;<span class="hljs-number">1.8</span>&lt;/maven.<span class="hljs-keyword">compiler</span>.<span class="hljs-keyword">source</span>&gt;<br>&lt;maven.<span class="hljs-keyword">compiler</span>.target&gt;<span class="hljs-number">1.8</span>&lt;/maven.<span class="hljs-keyword">compiler</span>.target&gt;<br>&lt;/properties&gt;<br></code></pre></td></tr></table></figure><p>ç„¶åæŒ‰â€Ctrl+Shift+Alt+Sâ€æ‰“å¼€é¡¹ç›®é…ç½®ï¼Œè®¾ç½®Modulesçš„Language Levelä¸ºâ€8â€ï¼š</p><p><img src="/2019/11/14/Maven/new12.png" alt="1"></p><p>æœ€åæŒ‰â€Ctrl+Alt+Sâ€æ‰“å¼€è®¾ç½®ï¼Œæœç´¢â€Java Compilerâ€ï¼Œå°†é»˜è®¤jdkå’Œå½“å‰modualçš„jdkç‰ˆæœ¬åˆ‡æ¢ä¸º1.8å³å¯ï¼š</p><p><img src="/2019/11/14/Maven/new13.png" alt="1">   </p><p>å†™æ®µJDK8çš„ä»£ç ï¼Œè¿è¡Œæµ‹è¯•ä¸€ä¸‹æ˜¯å¦æ­£å¸¸ï¼š</p><p>æ³¨ï¼šalt+Enterç»„åˆå¿«æ·é”®å¯ä»¥å¯¼åŒ…</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Test</span> &#123;</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">String</span>[] args)</span> </span>&#123;<br>        List&lt;<span class="hljs-keyword">String</span>&gt; <span class="hljs-built_in">list</span> = Arrays.asList(<span class="hljs-string">&quot;Hello&quot;</span>, <span class="hljs-string">&quot;World!&quot;</span>);<br>        <span class="hljs-built_in">list</span>.stream().forEach(System.out::<span class="hljs-built_in">println</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="1-7-9ã€Tomcatä¸­è¿è¡ŒMavené¡¹ç›®"><a href="#1-7-9ã€Tomcatä¸­è¿è¡ŒMavené¡¹ç›®" class="headerlink" title="1.7.9ã€Tomcatä¸­è¿è¡ŒMavené¡¹ç›®"></a>1.7.9ã€Tomcatä¸­è¿è¡ŒMavené¡¹ç›®</h5><h6 id="1ã€Run-gt-Edit-Configurations"><a href="#1ã€Run-gt-Edit-Configurations" class="headerlink" title="1ã€Run-&gt;Edit Configurations"></a>1ã€Run-&gt;Edit Configurations</h6><p><img src="/2019/11/14/Maven/new14.png" alt="1"></p><h6 id="2ã€å¡«å†™Tomcat-Serveré…ç½®åç§°"><a href="#2ã€å¡«å†™Tomcat-Serveré…ç½®åç§°" class="headerlink" title="2ã€å¡«å†™Tomcat Serveré…ç½®åç§°"></a>2ã€å¡«å†™Tomcat Serveré…ç½®åç§°</h6><p><img src="/2019/11/14/Maven/new15.png" alt="1"></p><h6 id="3ã€ç‚¹å‡»deployMenté€‰é¡¹å¡ä¸‹çš„-å·ï¼ŒæŠŠè¦å‘å¸ƒçš„é¡¹ç›®æ·»åŠ è¿›å»"><a href="#3ã€ç‚¹å‡»deployMenté€‰é¡¹å¡ä¸‹çš„-å·ï¼ŒæŠŠè¦å‘å¸ƒçš„é¡¹ç›®æ·»åŠ è¿›å»" class="headerlink" title="3ã€ç‚¹å‡»deployMenté€‰é¡¹å¡ä¸‹çš„+å·ï¼ŒæŠŠè¦å‘å¸ƒçš„é¡¹ç›®æ·»åŠ è¿›å»"></a>3ã€ç‚¹å‡»deployMenté€‰é¡¹å¡ä¸‹çš„+å·ï¼ŒæŠŠè¦å‘å¸ƒçš„é¡¹ç›®æ·»åŠ è¿›å»</h6><p><img src="/2019/11/14/Maven/new16.png" alt="1"></p><p><img src="/2019/11/14/Maven/new17.png" alt="1"></p><h6 id="4ã€åˆ°è¿™æˆ‘ä»¬å·²ç»é…ç½®å®Œæˆäº†ï¼Œåœ¨å³ä¸Šè§’é€‰æ‹©åˆšåˆšé…ç½®å®Œæˆçš„è¿è¡Œé¡¹ï¼Œç‚¹å‡»è¿è¡Œå³å¯"><a href="#4ã€åˆ°è¿™æˆ‘ä»¬å·²ç»é…ç½®å®Œæˆäº†ï¼Œåœ¨å³ä¸Šè§’é€‰æ‹©åˆšåˆšé…ç½®å®Œæˆçš„è¿è¡Œé¡¹ï¼Œç‚¹å‡»è¿è¡Œå³å¯" class="headerlink" title="4ã€åˆ°è¿™æˆ‘ä»¬å·²ç»é…ç½®å®Œæˆäº†ï¼Œåœ¨å³ä¸Šè§’é€‰æ‹©åˆšåˆšé…ç½®å®Œæˆçš„è¿è¡Œé¡¹ï¼Œç‚¹å‡»è¿è¡Œå³å¯"></a>4ã€åˆ°è¿™æˆ‘ä»¬å·²ç»é…ç½®å®Œæˆäº†ï¼Œåœ¨å³ä¸Šè§’é€‰æ‹©åˆšåˆšé…ç½®å®Œæˆçš„è¿è¡Œé¡¹ï¼Œç‚¹å‡»è¿è¡Œå³å¯</h6><p><img src="/2019/11/14/Maven/new18.png" alt="1"></p><p><img src="/2019/11/14/Maven/new19.png" alt="1"></p><h4 id="1-8ã€æ³¨æ„äº‹é¡¹"><a href="#1-8ã€æ³¨æ„äº‹é¡¹" class="headerlink" title="1.8ã€æ³¨æ„äº‹é¡¹"></a>1.8ã€æ³¨æ„äº‹é¡¹</h4><p>1ã€mavençš„æ ¸å¿ƒç¨‹åºä¸­ä»…ä»…å®šä¹‰äº†æŠ½è±¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œä½†æ˜¯å…·ä½“çš„å·¥ä½œå¿…é¡»ç”±ç‰¹å®šçš„æ’ä»¶å®Œæˆã€‚<br>æ’ä»¶æœ¬èº«å¹¶ä¸åŒ…å«åœ¨mavençš„æ ¸å¿ƒç¨‹åºä¸­ã€‚<br>2ã€å½“æˆ‘ä»¬æ‰§è¡Œmavenå‘½ä»¤éœ€è¦ç”¨åˆ°æŸäº›æ’ä»¶æ—¶ï¼Œmavenæ ¸å¿ƒç¨‹åºé¦–å…ˆåˆ°æœ¬åœ°ä»“åº“ä¸­æŸ¥æ‰¾ã€‚<br>3ã€æœ¬åœ°ä»“åº“çš„ã€é»˜è®¤ã€‘ä½ç½®ï¼šå®¶ç›®å½•.m2\repository<br>4ã€mavenæ‰¾ä¸åˆ°çš„æ’ä»¶ï¼Œè‡ªåŠ¨è¿æ¥å¤–ç½‘åˆ°ä¸­å¤®ä»“åº“ä¸‹è½½<br>5ã€æ— ç½‘ç»œè¿æ¥ä¼šå¯¼è‡´æ„å»ºå¤±è´¥<br>6ã€ä¿®æ”¹é»˜è®¤æœ¬åœ°ä»“åº“çš„ä½ç½®åˆ°äº‹å…ˆå‡†å¤‡å¥½çš„ç›®å½•ä¸‹æŸ¥æ‰¾æ’ä»¶<br>    ä¿®æ”¹maven\conf\setting.xml  <localRepository>æ ‡ç­¾ å†…å®¹æ”¹ä¸ºç›®çš„ç›®å½•</localRepository></p><h4 id="1-9ã€Eclipseä¸­ä½¿ç”¨Maven"><a href="#1-9ã€Eclipseä¸­ä½¿ç”¨Maven" class="headerlink" title="1.9ã€Eclipseä¸­ä½¿ç”¨Maven"></a>1.9ã€Eclipseä¸­ä½¿ç”¨Maven</h4><pre><code>å·²ç»å†…ç½®mavenä¸è®¸å®‰è£…mavenæ’ä»¶è®¾ç½®ï¼šä¸€èˆ¬å†…ç½®çš„æœ‰ä¸€ä¸ªå®Œæ•´çš„mavenæ ¸å¿ƒç¨‹åºï¼Œä½†é‰´äºç¨³å®šæ€§æ¬ ä½³ä¸€èˆ¬ä¸ç”¨è¿™ä¸ªå†…ç½®çš„ï¼Œè€Œæ˜¯æ·»åŠ     ä½¿ç”¨å¤–éƒ¨å®‰è£…çš„mavenæ ¸å¿ƒç¨‹åºã€‚window-ã€‹preference-ã€‹maven-ã€‹installation-ã€‹addwindow-ã€‹preference-ã€‹maven-ã€‹user settingæŒ‡å®šconf/settings.xml è¿›è€Œè·å–æœ¬åœ°ä»“åº“ç›®å½•åŸºæœ¬æ“ä½œï¼šåˆ›å»ºmavenç‰ˆJavaç¨‹åºã€åˆ›å»ºmavenç‰ˆwebç¨‹åºã€æ‰§è¡Œmavenå‘½ä»¤    file-&gt;new-&gt;maven project-&gt;create a simple project-&gt;...-&gt;finish    mavenå‘½ä»¤æ‰§è¡Œ pom.xmlé¼ æ ‡å³run as &#123;build|clean|install|...&#125;mavenä¸­compileèŒƒå›´çš„jsp-api.jarä¸tomcatä¸­jsp-api.jarå†²çªmavené¡¹ç›®å¯¼å…¥eclipseï¼Œä¾é pom.xmlè¯†åˆ«mavenå·¥ç¨‹ï¼Œã€å¯¼å…¥ä¹‹ååŒæ—¶ä¼šåˆ›å»ºeclipseå·¥ç¨‹è¯†åˆ«é¡¹ã€‘</code></pre>]]></content>
    
    
    <categories>
      
      <category>Maven</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Maven</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Javaå¼‚å¸¸å¤„ç†</title>
    <link href="/2019/11/14/Java%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/"/>
    <url>/2019/11/14/Java%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/</url>
    
    <content type="html"><![CDATA[<h3 id="Javaå¼‚å¸¸å¤„ç†"><a href="#Javaå¼‚å¸¸å¤„ç†" class="headerlink" title="Javaå¼‚å¸¸å¤„ç†"></a>Javaå¼‚å¸¸å¤„ç†</h3><p>â€‹         ä¸€èˆ¬æ¥è¯´å‘ç”Ÿå¼‚å¸¸ä¹‹åï¼Œä¼šç»ˆæ­¢ä¹‹å‰æœ¬åº”è¯¥æ‰§è¡Œçš„æµç¨‹  </p><h4 id="1ã€ä»€ä¹ˆæ˜¯Javaä¸­çš„å¼‚å¸¸"><a href="#1ã€ä»€ä¹ˆæ˜¯Javaä¸­çš„å¼‚å¸¸" class="headerlink" title="1ã€ä»€ä¹ˆæ˜¯Javaä¸­çš„å¼‚å¸¸"></a>1ã€ä»€ä¹ˆæ˜¯Javaä¸­çš„å¼‚å¸¸</h4><p>â‘  Javaä»£ç åœ¨ <strong>ç¼–è¯‘</strong> æˆ– <strong>è¿è¡Œæ—¶æœŸ</strong> å‘ç”Ÿçš„é”™è¯¯å°±æ˜¯å¼‚å¸¸ã€‚  </p><p>â‘¡ ä¹Ÿå¯ä»¥çœ‹æˆæ˜¯å¯¼è‡´ç¨‹åºç»ˆæ­¢çš„ä¸€ç§é”™è¯¯æŒ‡ä»¤æµï¼ˆä¸€æ—¦å‘ç”Ÿå¯èƒ½ä¼šç»ˆæ­¢ç¨‹åºï¼‰</p><p>â‘¢ <strong>Exceptionç±»ï¼š</strong>JavaæŠŠå¼‚å¸¸ä¿¡æ¯å°è£…æˆäº†ä¸€ä¸ªç±»ï¼Œç”¨æ¥è¡¨ç¤ºJavaç¨‹åºä¸­å¯èƒ½ä¼šäº§ç”Ÿçš„å¼‚å¸¸ï¼Œ<strong>åˆ›å»ºå¼‚å¸¸ç±»å¯¹è±¡æŠ›å‡ºå¼‚å¸¸ç›¸å…³çš„ä¿¡æ¯</strong>ï¼ˆå¦‚å¼‚å¸¸å‡ºç°çš„<strong>ä½ç½®</strong>ã€<strong>ç±»å‹</strong>å’Œ<strong>åŸå› </strong>ç­‰ï¼‰ï¼Œå¹¶è¦æ±‚å¯¹äº§ç”Ÿçš„å¼‚å¸¸è¿›è¡Œåˆç†çš„å¼‚å¸¸å¤„ç†ã€‚</p><p><img src="/2019/11/14/Java%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/Exception.png" alt="1"></p><p>â‘£ <strong>Throwable</strong>æ˜¯Java è¯­è¨€ä¸­æ‰€æœ‰é”™è¯¯æˆ–å¼‚å¸¸çš„è¶…ç±»ï¼Œå³<strong>ç¥–å®—ç±»</strong>ã€‚  </p><p><img src="/2019/11/14/Java%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/Throwable.png" alt="1"></p><p>å¦å¤–ï¼Œåœ¨å¼‚å¸¸Exceptionç±»ä¸­ï¼Œæœ‰ä¸€ä¸ªå­ç±»è¦ç‰¹æ®Šè¯´æ˜ä¸€ä¸‹ï¼Œ<strong>RuntimeException</strong>å­ç±»ï¼ŒRuntimeExceptionåŠå®ƒçš„å­ç±»åªèƒ½åœ¨<strong>Javaç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­å‡ºç°</strong>ã€‚</p><p><img src="/2019/11/14/Java%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/Error.png" alt="1"></p><p><strong>ä¸å¼‚å¸¸Exceptionå¹³çº§çš„æœ‰ä¸€ä¸ªError</strong>ï¼Œå®ƒæ˜¯Throwableçš„å­ç±»ï¼Œå®ƒç”¨æ¥è¡¨ç¤ºjavaç¨‹åºä¸­å¯èƒ½ä¼šäº§ç”Ÿçš„ä¸¥é‡é”™è¯¯<strong>ï¼ˆä¸åº”è¯¥è¢«æ•è·çš„ä¸¥é‡é—®é¢˜ï¼‰</strong>ã€‚è§£å†³åŠæ³•åªæœ‰ä¸€ä¸ªï¼Œä¿®æ”¹ä»£ç é¿å…Erroré”™è¯¯çš„äº§ç”Ÿã€‚</p><h4 id="2ã€æœ€è¿‘æˆ‘ä»¬é‡åˆ°è¿‡çš„å¼‚å¸¸"><a href="#2ã€æœ€è¿‘æˆ‘ä»¬é‡åˆ°è¿‡çš„å¼‚å¸¸" class="headerlink" title="2ã€æœ€è¿‘æˆ‘ä»¬é‡åˆ°è¿‡çš„å¼‚å¸¸"></a>2ã€æœ€è¿‘æˆ‘ä»¬é‡åˆ°è¿‡çš„å¼‚å¸¸</h4><h5 id="â‘ -æ•°ç»„è¶Šç•Œ-ArrayIndexOutOfBoundsException"><a href="#â‘ -æ•°ç»„è¶Šç•Œ-ArrayIndexOutOfBoundsException" class="headerlink" title="â‘  æ•°ç»„è¶Šç•Œ: ArrayIndexOutOfBoundsException"></a>â‘  æ•°ç»„è¶Šç•Œ: <strong>ArrayIndexOutOfBoundsException</strong></h5><p><img src="/2019/11/14/Java%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/AIOB.png" alt="aiob"></p><h5 id="â‘¡-é™¤æ•°ä¸º0-ArithmeticException-by-zero"><a href="#â‘¡-é™¤æ•°ä¸º0-ArithmeticException-by-zero" class="headerlink" title="â‘¡ é™¤æ•°ä¸º0: **ArithmeticException: / by zero  **"></a>â‘¡ é™¤æ•°ä¸º0: **ArithmeticException: / by zero  **</h5><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-built_in">int</span> a = <span class="hljs-number">10</span><span class="hljs-operator"> / </span><span class="hljs-number">0</span>;<br><span class="hljs-comment">//Exception in thread &quot;main&quot; java.lang.ArithmeticException: / by zero</span><br>at cn.kongwei_liao.<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">ExceptionDemo</span>.</span></span>main(<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">ExceptionDemo</span>.</span></span>java:<span class="hljs-number">5</span>)<br></code></pre></td></tr></table></figure><p>ä¸€æ—¦å‘ç”Ÿäº†å¼‚å¸¸ï¼Œå°±ç»ˆæ­¢äº†jvmçš„è¿è¡Œï¼Œé™¤æ•°ä¸º0ï¼Œå‡ºç°äº†å¼‚å¸¸ï¼Œjvmç»ˆæ­¢äº†è¿è¡Œã€‚ä¸‹é¢è¾“å‡ºâ€endâ€å°±æ²¡æœ‰è¿è¡Œäº†ã€‚</p><h5 id="â‘¢-ç©ºæŒ‡é’ˆå¼‚å¸¸-NullPointerException"><a href="#â‘¢-ç©ºæŒ‡é’ˆå¼‚å¸¸-NullPointerException" class="headerlink" title="â‘¢ ç©ºæŒ‡é’ˆå¼‚å¸¸: NullPointerException"></a>â‘¢ ç©ºæŒ‡é’ˆå¼‚å¸¸: <strong>NullPointerException</strong></h5><h5 id="æºç åˆ†æï¼š"><a href="#æºç åˆ†æï¼š" class="headerlink" title="æºç åˆ†æï¼š"></a>æºç åˆ†æï¼š</h5><p><img src="/2019/11/14/Java%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/throwable1.png" alt="1"></p><p><img src="/2019/11/14/Java%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/Exception1.png" alt="1"></p><p><strong>å°ç»“ï¼š</strong></p><p>1ã€ä¸€èˆ¬æ¥è¯´ä¸€ä¸ªå¼‚å¸¸ç±»å°±è¡¨ç¤ºä¸€ç§å¼‚å¸¸æƒ…å†µï¼ŒJavaä¸­å®šä¹‰äº†å¾ˆå¤šå¼‚å¸¸ç±»è¡¨ç¤ºå¾ˆå¤šçš„å¼‚å¸¸æƒ…å†µã€‚</p><p>2ã€åœ¨å®é™…å¼€å‘ä¸­å¼‚å¸¸æƒ…å†µæœ‰å¾ˆå¤šï¼ŒJavaä¸å¯èƒ½æŠŠæ‰€æœ‰çš„å¼‚å¸¸æƒ…å†µéƒ½åˆ—å‡ºæ¥ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰å¼‚å¸¸ç±»æ¥å¤„ç†æˆ‘ä»¬è‡ªå·±å…³å¿ƒçš„å¼‚å¸¸ã€‚</p><p>3ã€å¤„ç†å¼‚å¸¸ç›®çš„ï¼š</p><ol><li><p>ç»™ç”¨æˆ·æœ‰è‰¯å¥½çš„åé¦ˆ</p></li><li><p>ä¸èƒ½è®©å¼‚å¸¸å½±å“ç¨‹åºä¸‹é¢æ­£å¸¸çš„è¿è¡Œ</p></li></ol><p>4ã€å‡ºç°å¼‚å¸¸æ—¶ï¼Œå¼‚å¸¸è¢«ä¸€å±‚ä¸€å±‚å‘ä¸ŠæŠ›å‡ºï¼Œæœ€ç»ˆæŠ›ç»™JVMï¼Œä½†æ˜¯ä¸€èˆ¬ä¸è¦æŠ›ç»™JVMï¼Œè€Œæ˜¯åº”è¯¥åœ¨æŸä¸€å±‚è¢«<strong>å¼‚å¸¸å¤„ç†ç¨‹åº</strong>å¤„ç†æ‰ã€‚</p><h4 id="3ã€å¼‚å¸¸çš„å¤„ç†æ–¹å¼"><a href="#3ã€å¼‚å¸¸çš„å¤„ç†æ–¹å¼" class="headerlink" title="3ã€å¼‚å¸¸çš„å¤„ç†æ–¹å¼"></a>3ã€å¼‚å¸¸çš„å¤„ç†æ–¹å¼</h4><p>ç¨‹åºå‡ºç°äº†å¼‚å¸¸ï¼Œæˆ‘ä»¬éœ€è¦å¤„ç†ï¼Œä¿è¯åŠŸèƒ½èƒ½é¡ºåˆ©å®Œæˆã€‚æ€ä¹ˆå¤„ç†ï¼Ÿ<strong>æœ‰ä¸¤ç§æ–¹å¼</strong></p><p><img src="/2019/11/14/Java%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/liangzhong.png" alt="1"></p><p>çœ‹ä¸‹é¢ä¸€å¼ æˆªå›¾ï¼š</p><p><img src="/2019/11/14/Java%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/exception.jpg" alt="ex"></p><p>åˆ†æï¼š</p><p>1ã€æœ¬å¸Œæœ›ç¬¬ä¸€å¥å’Œç¬¬ä¸‰å¥éƒ½æ­£å¸¸æ‰§è¡Œï¼Œä½†æ˜¯ï¼š åœ¨ç¬¬äºŒå¥é‡åˆ°äº†å¼‚å¸¸ï¼Œç¨‹åºå°±ç»ˆæ­¢äº†</p><p>2ã€ä¸ºä»€ä¹ˆç¨‹åºå°±ç»ˆæ­¢äº†å‘¢ï¼Ÿ</p><p>ç¬¬10è¡Œäº§ç”Ÿä¸€ä¸ªå¼‚å¸¸å¯¹è±¡ï¼Œæˆ‘ä»¬æ²¡æœ‰åšä»»ä½•çš„å¤„ç†ï¼Œè¢«äº¤ç”±JVMå¤„ç†çš„ã€‚JVMçš„å¤„ç†æ–¹å¼å°±æ˜¯æŠŠå¼‚å¸¸ä¿¡æ¯æ‰“å°åˆ°æ§åˆ¶å°ï¼Œå¹¶ä¸”é€€å‡ºJVMã€‚</p><p>3ã€å¦‚ä½•ä½¿ç¬¬äºŒå¥å‡ºç°å¼‚å¸¸åï¼Œä¸é€€å‡ºJVMï¼ŸæŠŠå‡ºç°å¼‚å¸¸çš„åŸå› è®°å½•èµ·æ¥æˆ–è€…æ‰“å°å‡ºæ¥ï¼Œæ–¹ä¾¿å¼€å‘è€…å®šä½é—®é¢˜ï¼Œç„¶åç»§ç»­è¿è¡Œç¬¬ä¸‰å¥ä»£ç ã€‚</p><p>4ã€æˆ‘ä»¬å¯ä»¥catchå®ƒï¼Œç„¶åæ ¹æ®catchåˆ°çš„å¼‚å¸¸åšå¯¹åº”çš„å¼‚å¸¸å¤„ç†ï¼Œè¿™æ ·ä¾¿ä¸å¿…é€€å‡ºJVMã€‚</p><p>ä¾‹å¦‚ï¼Œè®¡ç®—å™¨ï¼Œå‘ç°é™¤æ•°ä¸º0åï¼ŒæŒ‰ç…§æ­£å¸¸æƒ…å†µä¸‹ï¼Œåº”è¯¥ç»ˆæ­¢è®¡ç®—å™¨ï¼Œå…³é—­å®ƒã€‚ä½†æ˜¯æ²¡æœ‰ï¼Œäººå®¶å¤„ç†äº†ï¼Œä½ è¿˜å¯ä»¥ç»§ç»­è¿ç®—ã€‚å› ä¸ºè®¡ç®—å™¨è‡ªå·±å¤„ç†äº†è¿™ä¸ªå¼‚å¸¸ã€‚</p><p><img src="/2019/11/14/Java%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/clip_image001.png" alt="img"></p><h5 id="æ–¹å¼ä¸€ï¼štry-catch-finallyç»“æ„å¤„ç†å¼‚å¸¸"><a href="#æ–¹å¼ä¸€ï¼štry-catch-finallyç»“æ„å¤„ç†å¼‚å¸¸" class="headerlink" title="æ–¹å¼ä¸€ï¼štry-catch-finallyç»“æ„å¤„ç†å¼‚å¸¸"></a>æ–¹å¼ä¸€ï¼štry-catch-finallyç»“æ„å¤„ç†å¼‚å¸¸</h5><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs awk">try&#123;<br><span class="hljs-regexp">//</span> å†™å¯èƒ½å‡ºç°å¼‚å¸¸çš„ä»£ç ï¼Œå¯ä»¥æœ‰å¾ˆå¤šå¥ä»£ç <br><br><span class="hljs-regexp">//</span>throw new Exception();<br><span class="hljs-regexp">//</span>äº§ç”Ÿå¼‚å¸¸ï¼Œç›´æ¥æ•è·å¤„ç†ï¼Œthrowåä¸èƒ½å†æœ‰è¯­å¥ï¼Œè¯­å¥ä¸å¯è¾¾ï¼Œç¼–è¯‘å™¨æ‹’ç»ç¼–è¯‘<br>&#125;catch(å¼‚å¸¸ç±»å‹ å˜é‡å)&#123;<br><span class="hljs-regexp">//</span> å¤„ç†å¼‚å¸¸ï¼Œå¹¶ä¸æ˜¯æŠŠä¸Šé¢çš„ä»£ç æ”¹æ­£ç¡®ã€‚<br><span class="hljs-regexp">//</span> å¸¸è§çš„ä¸€äº›æ–¹å¼ï¼š<br><span class="hljs-regexp">//</span> â‘ æ‰“å°å¼‚å¸¸çš„ä¿¡æ¯åˆ°æ§åˆ¶å°ï¼›<br><span class="hljs-regexp">//</span>å¤„ç†æ–¹å¼<span class="hljs-number">1</span> ï¼šå¼‚å¸¸åŸå›   ä¸€èˆ¬å¤„ç†åç»™å‰å°é¡µé¢è¿”å›ï¼Œç»™ç”¨æˆ·æç¤ºé—®é¢˜åŸå›  <br>String message = e.getMessage();<br>System.out.println(message);<br><br><span class="hljs-regexp">//</span>å¤„ç†æ–¹å¼<span class="hljs-number">2</span> ï¼šå¼‚å¸¸ç±»å‹å’Œå¼‚å¸¸åŸå› <br>String str = e.toString();<br>System.out.println(str);<br><br><span class="hljs-regexp">//</span>å¤„ç†æ–¹å¼<span class="hljs-number">3</span>ï¼šæ‰“å°æ—¥å¿— æ¨è ç»™ç¨‹åºå‘˜çœ‹çš„<br>e.printStackTrace(); <br><br><span class="hljs-regexp">//</span>â‘¡ å¯ä»¥æŠŠå¼‚å¸¸ä¿¡æ¯ä¿å­˜åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œå¯ä»¥æŒä¹…çš„å­˜å‚¨èµ·æ¥ï¼›<br><span class="hljs-regexp">//</span> å› ä¸ºå®é™…é¡¹ç›®æœ‰å¯èƒ½æœ‰å¾ˆå¤šå¼‚å¸¸æ‰“å°åˆ°æ§åˆ¶å°ï¼Œä¸èƒ½éšæ—¶å…³æ³¨ï¼Œè¿™æ—¶å°±éœ€è¦å°†æ—¥å¿—ä¿å­˜ã€‚<br><br><span class="hljs-regexp">//</span>â‘¢ å¯ä»¥æŠ“ä½ä¹‹åï¼Œå‘å¤–åœ¨æŠ›å‡ºå¦å¤–çš„ä¸€ä¸ªå¼‚å¸¸ï¼ˆäº†è§£ï¼‰ï¼Œå°±æ˜¯è°è°ƒç”¨è°å¤„ç†ã€‚<br>&#125;finally&#123;<br><span class="hljs-regexp">//</span>ä¸è®ºæœ‰æ— å¼‚å¸¸ä¸€å®šä¼šè¢«æ‰§è¡Œçš„è¯­å¥ï¼›<br><span class="hljs-regexp">//</span>è¿™é‡Œä¸€èˆ¬æ”¾ï¼šå…³é—­æµæˆ–è€…é‡Šæ”¾èµ„æºçš„ä»£ç <br><br><span class="hljs-regexp">//</span>åœ¨returnä¹‹å‰æ‰§è¡Œï¼Œä½†æ˜¯returnçš„è¿˜æ˜¯æ‰§è¡Œfinallyå—ä¹‹å‰çš„å†…å®¹ï¼›<br><span class="hljs-regexp">//</span>æ­¤å¤„ä¸åº”è¯¥æ”¾ä»»ä½•çš„ä¸šåŠ¡ä»£ç ï¼Œå°¤å…¶æ˜¯è¿”å›ä¸€ä¸ªæ•°æ®ï¼ˆå¾ˆå¤šé¢è¯•é¢˜é‡Œå¯èƒ½ä¼šæ–¹æ³•ï¼‰<br><br><span class="hljs-regexp">//</span>ä¸ç®¡ä¸Šé¢æ˜¯å¦æœ‰å¼‚å¸¸äº§ç”Ÿï¼Œè¿™é‡Œçš„ä»£ç éƒ½ä¼šæ‰§è¡Œï¼ˆé™¤éå‰é¢æœ‰æ‰§è¡Œé€€å‡ºJVMçš„ä»£ç å¦‚System.<span class="hljs-keyword">exit</span>()ï¼‰<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="/2019/11/14/Java%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/clip_image002.jpg" alt="img"></p><h5 id="è·å¾—å¼‚å¸¸ä¿¡æ¯çš„æ–¹å¼"><a href="#è·å¾—å¼‚å¸¸ä¿¡æ¯çš„æ–¹å¼" class="headerlink" title="è·å¾—å¼‚å¸¸ä¿¡æ¯çš„æ–¹å¼"></a>è·å¾—å¼‚å¸¸ä¿¡æ¯çš„æ–¹å¼</h5><p>åœ¨APIä¸­éšæ„æŸ¥çœ‹ä¸€ä¸ªå¼‚å¸¸ç±»ï¼Œæ¯”å¦‚ArithmeticExceptionæˆ–è€…åœ¨eclipseä¸­æŸ¥çœ‹æºç ï¼Œå‘ç°<strong>å¼‚å¸¸ç±»ä¸­åŸºæœ¬ä¸Šå…¨æ˜¯æ„é€ æ–¹æ³•ï¼Œæ‰€æœ‰çš„æ–¹æ³•éƒ½åœ¨è¶…ç±»Throwableä¸­ã€‚</strong></p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œæœ‰å…³æˆ‘ä»¬çš„ä»£ç å‡ºç°äº†å¼‚å¸¸ï¼Œè¿™äº›æ‰€æœ‰çš„å¼‚å¸¸ä¿¡æ¯éƒ½è¢«å°è£…åˆ°Throwableä¸­ï¼Œæˆ‘ä»¬å»Throwableä¸­æ‰¾å¯¹åº”çš„æ–¹æ³•ï¼Œçœ‹æºç (api)å‘ç°ï¼š</p><p><img src="/2019/11/14/Java%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/throwable1.png" alt="1"></p><h6 id="â‘ -åœ¨Throwableç±»ä¸­å®šä¹‰äº†ä¸€ä¸ªå­—æ®µï¼š-ä¿å­˜å¼‚å¸¸æè¿°ä¿¡æ¯"><a href="#â‘ -åœ¨Throwableç±»ä¸­å®šä¹‰äº†ä¸€ä¸ªå­—æ®µï¼š-ä¿å­˜å¼‚å¸¸æè¿°ä¿¡æ¯" class="headerlink" title="â‘  åœ¨Throwableç±»ä¸­å®šä¹‰äº†ä¸€ä¸ªå­—æ®µï¼š ä¿å­˜å¼‚å¸¸æè¿°ä¿¡æ¯"></a>â‘  åœ¨Throwableç±»ä¸­å®šä¹‰äº†ä¸€ä¸ªå­—æ®µï¼š ä¿å­˜å¼‚å¸¸æè¿°ä¿¡æ¯</h6><p>é€šè¿‡<strong>ArithmeticException</strong>æºç <strong>ä¸€ç›´è·Ÿè¸ªsuperæ–¹æ³•</strong>ï¼Œç›´åˆ°å¼‚å¸¸çš„é¡¶å±‚<strong>Throwableç±»</strong>å‘ç°ä¸€ä¸ª<strong>detailMessageå­—æ®µ</strong>ï¼Œè¿™ä¸ªå­—æ®µæ¥å­˜å‚¨å¼‚å¸¸ä¿¡æ¯ã€‚</p><p><img src="/2019/11/14/Java%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/detailMessage.png" alt="1"></p><h6 id="â‘¡-åœ¨Throwableçˆ¶ç±»ä¸­å®šä¹‰äº†å¤šä¸ªæ–¹æ³•ç”¨æ¥è·å¾—å¯¹è±¡ä¸­çš„å¼‚å¸¸æè¿°ä¿¡æ¯"><a href="#â‘¡-åœ¨Throwableçˆ¶ç±»ä¸­å®šä¹‰äº†å¤šä¸ªæ–¹æ³•ç”¨æ¥è·å¾—å¯¹è±¡ä¸­çš„å¼‚å¸¸æè¿°ä¿¡æ¯" class="headerlink" title="â‘¡ åœ¨Throwableçˆ¶ç±»ä¸­å®šä¹‰äº†å¤šä¸ªæ–¹æ³•ç”¨æ¥è·å¾—å¯¹è±¡ä¸­çš„å¼‚å¸¸æè¿°ä¿¡æ¯"></a>â‘¡ åœ¨Throwableçˆ¶ç±»ä¸­å®šä¹‰äº†å¤šä¸ªæ–¹æ³•ç”¨æ¥è·å¾—å¯¹è±¡ä¸­çš„å¼‚å¸¸æè¿°ä¿¡æ¯</h6><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-keyword">String</span> getMessage()  è¿”å›æ­¤ <span class="hljs-built_in">throwable</span> çš„è¯¦ç»†æ¶ˆæ¯å­—ç¬¦ä¸² <br><span class="hljs-keyword">String</span> toString() è¿”å›æ­¤ <span class="hljs-built_in">throwable</span> çš„ç®€çŸ­æè¿° <br><span class="hljs-keyword">void</span> printStackTrace() è°ƒç”¨æ­¤æ–¹æ³•ä¼šæŠŠå®Œæ•´å¼‚å¸¸ä¿¡æ¯æ‰“å°åˆ°æ§åˆ¶å°<br></code></pre></td></tr></table></figure><p>ä¸¾ä¾‹ï¼š</p><figure class="highlight roboconf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs roboconf">try &#123;<br><span class="hljs-attribute">System.out.println(1 / 0);</span><br><span class="hljs-attribute">&#125; catch (ArithmeticException e) &#123;</span><br><span class="hljs-attribute">System.out.println(e.getMessage());//è¿”å›æ­¤ throwable çš„è¯¦ç»†æ¶ˆæ¯å­—ç¬¦ä¸²</span>: by zero<br>System<span class="hljs-variable">.out</span><span class="hljs-variable">.println</span>(e<span class="hljs-variable">.toString</span>());//è¿”å›æ­¤ <span class="hljs-attribute">throwable çš„ç®€çŸ­æè¿°</span>:java<span class="hljs-variable">.lang</span><span class="hljs-variable">.ArithmeticException</span>: / by zero<br>e<span class="hljs-variable">.printStackTrace</span>();//å°†æ­¤ <span class="hljs-attribute">throwable åŠå…¶è¿½è¸ªè¾“å‡ºè‡³æ ‡å‡†é”™è¯¯æµ</span>:<br>/**<br> * java<span class="hljs-variable">.lang</span><span class="hljs-variable">.ArithmeticException</span>: / by zero at cn<span class="hljs-variable">.itsource</span><span class="hljs-variable">.wrapper</span><span class="hljs-variable">.Test</span><span class="hljs-variable">.main</span>(Test<span class="hljs-variable">.java</span>:7)<br> */<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="æˆ‘ä»¬åœ¨å¼€å‘ä¸­ä¸€èˆ¬æ€ä¹ˆç”¨å¼‚å¸¸ä¿¡æ¯å‘¢ï¼Ÿ"><a href="#æˆ‘ä»¬åœ¨å¼€å‘ä¸­ä¸€èˆ¬æ€ä¹ˆç”¨å¼‚å¸¸ä¿¡æ¯å‘¢ï¼Ÿ" class="headerlink" title="æˆ‘ä»¬åœ¨å¼€å‘ä¸­ä¸€èˆ¬æ€ä¹ˆç”¨å¼‚å¸¸ä¿¡æ¯å‘¢ï¼Ÿ"></a>æˆ‘ä»¬åœ¨å¼€å‘ä¸­ä¸€èˆ¬æ€ä¹ˆç”¨å¼‚å¸¸ä¿¡æ¯å‘¢ï¼Ÿ</h5><p>é”™è¯¯ä¿¡æ¯è¶Šè¯¦ç»†è¶Šå¥½ï¼Œå¸®åŠ©æˆ‘ä»¬å¿«é€Ÿå®šä½å’Œè§£å†³é—®é¢˜ã€‚</p><p>å½“ç„¶ä¹Ÿè¦è€ƒè™‘å®¹é‡é—®é¢˜ã€‚å‡å¦‚æ‰“å°è¿‡å¤šçš„ä¿¡æ¯ï¼Œä¼šå ç”¨æœåŠ¡å™¨èµ„æºå’Œå½±å“æ‰§è¡Œæ•ˆç‡(å¼€å‘é‡å‘ï¼Œå¯¼è‡´æ€§èƒ½å¾ˆä½ä¸‹ã€‚)</p><p>ä¸€èˆ¬ä½¿ç”¨ï¼še.printStackTrace();ä½†æ˜¯ä¼šæŠŠè¿™ä¸ªä¿¡æ¯<strong>å•ç‹¬è®°å½•åœ¨å…¶ä»–ä½ç½®</strong>ï¼Œæ–¹ä¾¿ç»´æŠ¤ã€‚<strong>å…·ä½“çœ‹è‡ªå·±å…¬å¸çš„æ¶æ„è€Œå®šã€‚</strong></p><h5 id="å¤šå¼‚å¸¸å¤„ç†ä»¥åŠæ‰§è¡Œæµç¨‹åˆ†æ"><a href="#å¤šå¼‚å¸¸å¤„ç†ä»¥åŠæ‰§è¡Œæµç¨‹åˆ†æ" class="headerlink" title="å¤šå¼‚å¸¸å¤„ç†ä»¥åŠæ‰§è¡Œæµç¨‹åˆ†æ"></a>å¤šå¼‚å¸¸å¤„ç†ä»¥åŠæ‰§è¡Œæµç¨‹åˆ†æ</h5><h6 id="â‘ ï¼šä»€ä¹ˆæ˜¯å¤šå¼‚å¸¸ï¼Ÿ"><a href="#â‘ ï¼šä»€ä¹ˆæ˜¯å¤šå¼‚å¸¸ï¼Ÿ" class="headerlink" title="â‘ ï¼šä»€ä¹ˆæ˜¯å¤šå¼‚å¸¸ï¼Ÿ"></a>â‘ ï¼šä»€ä¹ˆæ˜¯å¤šå¼‚å¸¸ï¼Ÿ</h6><p>å°±æ˜¯è¯´æˆ‘ä»¬å†™ä¸€ä¸ªåŠŸèƒ½ä»£ç ï¼Œé‡Œé¢å¯èƒ½å‡ºç°<strong>å¤šç§ç±»å‹çš„å¼‚å¸¸</strong>ã€‚å°±è¦å¤šå¼‚å¸¸ã€‚æˆ‘ä»¬æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ</p><h6 id="â‘¡ï¼šå¤šå¼‚å¸¸çš„å¤„ç†"><a href="#â‘¡ï¼šå¤šå¼‚å¸¸çš„å¤„ç†" class="headerlink" title="â‘¡ï¼šå¤šå¼‚å¸¸çš„å¤„ç†"></a>â‘¡ï¼šå¤šå¼‚å¸¸çš„å¤„ç†</h6><p><strong>Aã€ç¬¼ç»Ÿï¼šå¯ä»¥å†™ä¸€ä¸ªå¤§çš„ï¼ˆçˆ¶ç±»ï¼‰å¼‚å¸¸æ¥æ•è·å¼‚å¸¸ï¼Œå°±æ˜¯ç”¨Exceptionã€‚</strong></p><p>ä½†æ˜¯è¿™æ ·ä¸å¥½ï¼Œè¦è¢«æ‰£å·¥èµ„çš„ï¼Œä½ è‡ªå·±å†™çš„ä»£ç éƒ½çŸ¥ä¸é“å¯èƒ½ä¼šå‡ºç°ä»€ä¹ˆé—®é¢˜ï¼Œä»¥åç»´æŠ¤ã€äº¤æ¥æˆ–è€…æµ‹è¯•çš„æ—¶å€™å°±ä¸èƒ½å°½é‡çš„é¿å…å·²çŸ¥çš„é—®é¢˜ã€‚</p><p>ä¸Šå¥è¨€å¤–ä¹‹æ„å°±æ˜¯ï¼šæå‰å‘ŠçŸ¥æµ‹è¯•äººå‘˜æˆ–è€…åŒäº‹ï¼šæ³¨æ„å“ˆï¼æˆ‘è¿™é‡Œå¯èƒ½å‡ºé—®é¢˜å“¦ï¼Œæˆ‘ä¹Ÿä¸æ™“å¾—é™¤å•¥å­é—®é¢˜ï¼Œåæ­£å‘¢ï¼Œè¿™ä¸ªåœ°æ–¹ä½ æ³¨æ„ç‚¹å°±æ˜¯äº†ï¼Œé™¤äº†é—®é¢˜ä¸è¦æ¥æ‰¾æˆ‘ï¼Œæˆ‘æ˜¯æå‰ç»™ä½ è¯´äº†çš„å“ˆï¼ˆæ¨å¸è´£ä»»ï¼Œä¸è´Ÿè´£ï¼‰ï¼›</p><p>æ‰€ä»¥åœ¨è´Ÿè´£ä»»çš„æƒ…å†µä¸‹åº”å°½é‡å‘ŠçŸ¥ä»–äººæ­¤å¤„å¯èƒ½å‡ºç°çš„<strong>å…·ä½“ä½•ç§å¼‚å¸¸</strong>ï¼Œä¸åº”ç¬¼ç»Ÿã€‚</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">//ä¸¾ä¾‹å¦‚ä¸‹ï¼šå®šä¹‰ä¸ªé™¤æ³•ï¼Œè®¡ç®—ä¸¤ä¸ªå‚æ•°çš„ç†µã€‚<br><span class="hljs-built_in">public</span> static <span class="hljs-type">void</span> main(String[] args) &#123;<br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(div(&quot;2&quot;, &quot;0&quot;));<br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(div(&quot;a&quot;, &quot;0&quot;));<br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(div(&quot;10&quot;, &quot;2&quot;));<br>&#125;<br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * è®¡ç®—ä¸¤ä¸ªæ•´æ•°çš„å•†çš„æ–¹æ³• String ---ã€‹ int / Integer</span><br><span class="hljs-comment"> */</span><br><span class="hljs-built_in">public</span> static <span class="hljs-type">int</span> div(String a, String b) &#123;<br><span class="hljs-type">Integer</span> ret = <span class="hljs-number">0</span>;<br>try &#123;<br><span class="hljs-type">Integer</span> i1 = <span class="hljs-built_in">new</span> <span class="hljs-type">Integer</span>(a);<br><span class="hljs-type">Integer</span> i2 = <span class="hljs-built_in">new</span> <span class="hljs-type">Integer</span>(b);<br>ret = i1 / i2;<br>&#125; catch (<span class="hljs-keyword">Exception</span> e) &#123;<br>e.printStackTrace();<br>&#125;<br><span class="hljs-keyword">return</span> ret;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="/2019/11/14/Java%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/clip_image003.jpg" alt="img"></p><p><strong>Bã€å°½é‡ç»†åŒ–å¼‚å¸¸ï¼Œä¸€å±‚ä¸€å±‚çš„catchã€‚</strong></p><p>åªæœ‰å½“ä½ ä¸èƒ½æ˜ç¡®çŸ¥é“è‡ªå·±çš„ä»£ç ä¼šå‡ºç°ä»€ä¹ˆå¼‚å¸¸ï¼Œä¸‡ä¸å¾—å·²æƒ…å†µä¸‹æ‰ä½¿ç”¨ä¸€ä¸ªæœ€å¤§çš„Exceptionæ¥æ•è·å¼‚å¸¸ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">//ä¸¾ä¾‹å¦‚ä¸‹ï¼šå®šä¹‰ä¸ªé™¤æ³•ï¼Œè®¡ç®—ä¸¤ä¸ªå‚æ•°çš„ç†µã€‚</span><br><span class="hljs-comment">//mainæ–¹æ³•çœç•¥ï¼Œå…·ä½“è§ä¹‹å‰çš„ä¾‹å­</span><br><br><span class="hljs-keyword">public</span> <span class="hljs-built_in">static</span> <span class="hljs-keyword">int</span> div(<span class="hljs-keyword">String</span> a, <span class="hljs-keyword">String</span> b) &#123;<br><span class="hljs-keyword">Integer</span> ret = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">try</span> &#123;<br><span class="hljs-keyword">Integer</span> i1 = <span class="hljs-keyword">new</span> <span class="hljs-keyword">Integer</span>(a);<br><span class="hljs-keyword">Integer</span> i2 = <span class="hljs-keyword">new</span> <span class="hljs-keyword">Integer</span>(b);<br>ret = i1 / i2;<br>&#125; <span class="hljs-keyword">catch</span> (NumberFormatException e) &#123;<br>e.printStackTrace();<br>System.out.println(<span class="hljs-string">&quot;æ•°å­—è§£æé”™è¯¯&quot;</span>);<br>&#125; <span class="hljs-keyword">catch</span> (ArithmeticException e) &#123;<br>e.printStackTrace();<br>System.out.println(<span class="hljs-string">&quot;äº²ï¼Œé™¤æ•°ä¸èƒ½ä¸º0å“¦&quot;</span>);<br>&#125; <span class="hljs-keyword">catch</span> (<span class="hljs-built_in">Exception</span> e) &#123;<br>e.printStackTrace();<br>System.out.println(<span class="hljs-string">&quot;æœªçŸ¥é”™è¯¯ï¼&quot;</span>);<br>&#125;<br><span class="hljs-keyword">return</span> ret;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="/2019/11/14/Java%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/clip_image004.jpg" alt="img"></p><h6 id="å¤šå¼‚å¸¸å¤„ç†åˆ†ææ€»ç»“å¦‚ä¸‹"><a href="#å¤šå¼‚å¸¸å¤„ç†åˆ†ææ€»ç»“å¦‚ä¸‹" class="headerlink" title="å¤šå¼‚å¸¸å¤„ç†åˆ†ææ€»ç»“å¦‚ä¸‹"></a>å¤šå¼‚å¸¸å¤„ç†åˆ†ææ€»ç»“å¦‚ä¸‹</h6><p>1ã€å¤šå¼‚å¸¸å¤„ç†çš„ç»“æ„ï¼Œå¯ä»¥æœ‰å¤šä¸ªcatch;</p><p>2ã€å¤šä¸ªcatchä¸­çš„å¼‚å¸¸ç±»å‹ï¼Œå­ç±»æ”¾åœ¨å‰é¢ï¼Œçˆ¶ç±»åœ¨åé¢</p><p>3ã€ä¸€æ—¦tryä¸­äº§ç”Ÿäº†ä¸€ä¸ªå¼‚å¸¸å¯¹è±¡ï¼Œç«‹å³å°±ä¼šä»ç¬¬ä¸€ä¸ªcatchå¼€å§‹åŒ¹é…ï¼Œä¸€æ—¦è¢«æŠ“ä½å°±æ‰§è¡Œcatchä¸­çš„ä»£ç ï¼Œç„¶åæ•´ä¸ªtry-catchå—å°±ç»“æŸ</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs awk">/*<br>catchç»†åŒ–è§„åˆ™ï¼š<br>è¦æ±‚å¤šä¸ªcatchä¸­çš„å¼‚å¸¸ä¸èƒ½ç›¸åŒï¼Œå¹¶ä¸”è‹¥catchä¸­çš„å¤šä¸ªå¼‚å¸¸ä¹‹é—´æœ‰å­çˆ¶ç±»å¼‚å¸¸çš„å…³ç³»ï¼Œé‚£ä¹ˆå­ç±»å¼‚å¸¸è¦æ±‚åœ¨ä¸Šé¢çš„catchå¤„ç†ï¼Œå¹³çº§ä¹‹é—´æ²¡æœ‰é¡ºåºå…³ç³»ã€‚<br>*/<br>try&#123;<br>throw new Exception();<span class="hljs-regexp">//</span>äº§ç”Ÿå¼‚å¸¸ï¼Œç›´æ¥æ•è·å¤„ç†<br><span class="hljs-regexp">//</span>throwåä¸èƒ½å†æœ‰è¯­å¥ï¼Œè¯­å¥ä¸å¯è¾¾ï¼Œç¼–è¯‘å™¨æ‹’ç»ç¼–è¯‘<br>&#125;catch(XxxException e)&#123;<span class="hljs-regexp">//</span>å­<br><span class="hljs-regexp">//</span>å¤„ç†æ–¹å¼<br>&#125;catch(YyyException e)&#123;<span class="hljs-regexp">//</span>çˆ¶<br><span class="hljs-regexp">//</span>å¤„ç†æ–¹å¼<br>&#125;catch(ZzzException e)&#123;<span class="hljs-regexp">//</span>ç¥–<br><span class="hljs-regexp">//</span>å¤„ç†æ–¹å¼<br>&#125;<br></code></pre></td></tr></table></figure><p>4ã€å¦‚æœæ‰€æœ‰çš„catchéƒ½æŠ“ä¸ä½ï¼Œå¯èƒ½å°±ç›¸å½“äºæˆ‘ä»¬æ²¡æœ‰å¤„ç†åˆ°ï¼Œåˆå¯èƒ½ç”±JVMå¤„ç†</p><h5 id="finallyç»“æ„"><a href="#finallyç»“æ„" class="headerlink" title="finallyç»“æ„"></a>finallyç»“æ„</h5><p>finallyè¿™ä¸ªé‡Œé¢çš„ä»£ç ï¼Œè¡¨ç¤ºæ— è®ºå¦‚ä½•ï¼Œéƒ½è¦æ‰§è¡Œï¼Œé™¤é**System.exit()**é€€å‡ºJVM  </p><p>å®ä¾‹ï¼š</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">//mainæ–¹æ³•çœç•¥ï¼Œå…·ä½“è§ä¹‹å‰çš„ä¾‹å­<br><span class="hljs-built_in">public</span> static <span class="hljs-type">int</span> div(String a, String b) &#123;<br><span class="hljs-type">Integer</span> ret = <span class="hljs-number">0</span>;<br>try &#123;<br><span class="hljs-type">Integer</span> i1 = <span class="hljs-built_in">new</span> <span class="hljs-type">Integer</span>(a);<br><span class="hljs-type">Integer</span> i2 = <span class="hljs-built_in">new</span> <span class="hljs-type">Integer</span>(b);<br>ret = i1 / i2;<br>&#125; catch (NumberFormatException e) &#123;<br>e.printStackTrace();<br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(&quot;æ•°å­—è§£æé”™è¯¯&quot;);<br>&#125; catch (ArithmeticException e) &#123;<br>e.printStackTrace();<br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(&quot;äº²ï¼Œé™¤æ•°ä¸èƒ½ä¸º0å“¦&quot;);<br>&#125; catch (<span class="hljs-keyword">Exception</span> e) &#123;<br>e.printStackTrace();<br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(&quot;æœªçŸ¥é”™è¯¯ï¼&quot;);<br>&#125;finally&#123;<br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(&quot;æˆ‘æ˜¯Finally:&quot;+&quot;a=&quot;+a+&quot;;b=&quot;+b);<br>&#125;<br><span class="hljs-keyword">return</span> ret;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="/2019/11/14/Java%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/clip_image005.jpg" alt="img"></p><figure class="highlight nim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs nim"><span class="hljs-keyword">try</span><span class="hljs-meta">&#123;...&#125;</span>catch(å¼‚å¸¸ç±»å‹ e)<span class="hljs-meta">&#123;...&#125;</span><span class="hljs-keyword">finally</span><span class="hljs-meta">&#123;...&#125;</span><br><br>æˆ–è€…ï¼ˆæœ‰æ—¶å€™ä¸ºäº†é‡Šæ”¾æŸäº›èµ„æºï¼ˆä¾‹å¦‚é”ï¼‰ï¼Œä½†å¿…é¡»ä¿è¯å¼‚å¸¸å¾€ä¸Šå±‚æŠ›å‡ºï¼Œå¯ä»¥é‡‡ç”¨ï¼‰<br><span class="hljs-keyword">try</span><span class="hljs-meta">&#123;...&#125;</span><span class="hljs-keyword">finally</span><span class="hljs-meta">&#123;...//é‡Šæ”¾é”æ“ä½œ&#125;</span><br></code></pre></td></tr></table></figure><h5 id="æ–¹å¼äºŒï¼šThrowså‘ä¸Šå±‚æŠ›å‡ºå¼‚å¸¸"><a href="#æ–¹å¼äºŒï¼šThrowså‘ä¸Šå±‚æŠ›å‡ºå¼‚å¸¸" class="headerlink" title="æ–¹å¼äºŒï¼šThrowså‘ä¸Šå±‚æŠ›å‡ºå¼‚å¸¸"></a>æ–¹å¼äºŒï¼šThrowså‘ä¸Šå±‚æŠ›å‡ºå¼‚å¸¸</h5><p>å½“æˆ‘ä»¬æœ‰äº›å¼‚å¸¸è‡ªå·±å¤„ç†ä¸äº†ï¼Œæˆ–è€…ä¸æ–¹ä¾¿å¤„ç†ï¼Œæˆ–è€…å…¶ä»–åŸå› ï¼Œæˆ‘ä»¬å°±æŠŠå¼‚å¸¸æŠ›å‡ºå»ï¼Œ<strong>æŠ›ç»™æ–¹æ³•çš„è°ƒç”¨è€…å¤„ç†</strong>ã€‚</p><p>è°ƒç”¨è€…è°ƒç”¨ä¸€ä¸ªä¼šå‘å¤–æŠ›å¼‚å¸¸çš„å‡½æ•°æ—¶ï¼Œéœ€è¦å¯¹è¯¥å‡½æ•°è¿›è¡Œå¼‚å¸¸å¤„ç†ï¼ˆç»§ç»­å‘ä¸ŠæŠ›å‡ºæˆ–è€…try-catchå¤„ç†ï¼‰ã€‚</p><p>ç›®å‰ï¼Œå¤§å®¶èƒ½å¤„ç†çš„å¼‚å¸¸å°±å¤„ç†ï¼Œå°½é‡ä¸è¦æŠ›ã€‚  </p><p>å…³é”®å­—ï¼šthrows</p><p>è¯­æ³•ï¼šåœ¨æ–¹æ³•ä¸Šï¼Œ<strong>â€œ{â€å‰å†™å…³é”®å­—throws</strong> ï¼Œåé¢å†™å¼‚å¸¸ç±»ï¼Œ**å¯ä»¥åŒæ—¶æŠ›å¤šç§å¼‚å¸¸ç±»(ç”¨,åˆ†éš”)**ã€‚  </p><p>å®ä¾‹ï¼š</p><p><img src="/2019/11/14/Java%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/clip_image006.jpg" alt="img"></p><p><img src="/2019/11/14/Java%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/clip_image007.jpg" alt="img"></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">//mainæ–¹æ³•çœç•¥ï¼Œè¯¦è§ä¹‹å‰æ¡ˆä¾‹</span><br><br><span class="hljs-keyword">public</span> <span class="hljs-built_in">static</span> <span class="hljs-keyword">int</span> div(<span class="hljs-keyword">String</span> a, <span class="hljs-keyword">String</span> b) throws NumberFormatException, ArithmeticException&#123;<br><span class="hljs-comment">//æ–¹æ³•å†…éƒ¨ä¸æä¾›å¼‚å¸¸å¤„ç†ï¼Œè€Œæ˜¯å°†å¼‚å¸¸å‘å¤–æŠ›å‡º</span><br><span class="hljs-keyword">Integer</span> ret = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">Integer</span> i1 = <span class="hljs-keyword">new</span> <span class="hljs-keyword">Integer</span>(a);<br><span class="hljs-keyword">Integer</span> i2 = <span class="hljs-keyword">new</span> <span class="hljs-keyword">Integer</span>(b);<br>ret = i1 / i2;<br><span class="hljs-keyword">return</span> ret;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="4ã€å¼‚å¸¸çš„åˆ†ç±»"><a href="#4ã€å¼‚å¸¸çš„åˆ†ç±»" class="headerlink" title="4ã€å¼‚å¸¸çš„åˆ†ç±»"></a>4ã€å¼‚å¸¸çš„åˆ†ç±»</h4><h5 id="â‘ -è¿è¡Œæ—¶å¼‚å¸¸ï¼š-RuntimeExceptionä»¥åŠå®ƒçš„æ‰€æœ‰çš„å­ç±»"><a href="#â‘ -è¿è¡Œæ—¶å¼‚å¸¸ï¼š-RuntimeExceptionä»¥åŠå®ƒçš„æ‰€æœ‰çš„å­ç±»" class="headerlink" title="â‘  è¿è¡Œæ—¶å¼‚å¸¸ï¼š RuntimeExceptionä»¥åŠå®ƒçš„æ‰€æœ‰çš„å­ç±»"></a>â‘  è¿è¡Œæ—¶å¼‚å¸¸ï¼š RuntimeExceptionä»¥åŠå®ƒçš„æ‰€æœ‰çš„å­ç±»</h5><p>æ–¹æ³•ä¸­æŠ›å‡ºè¿è¡Œæ—¶æœŸå¼‚å¸¸ï¼Œæ–¹æ³•å®šä¹‰ä¸­æ— throwså£°æ˜ï¼Œè°ƒç”¨è€…ä¹Ÿæ— å¼‚å¸¸å¤„ç†è¿è¡Œæ—¶æœŸå¼‚å¸¸ï¼ˆè°ƒç”¨è€…å¯ä»¥ç”¨tryè¿›è¡Œè¿è¡Œæ—¶å¼‚å¸¸å¤„ç†ï¼‰ä¸€æ—¦å‘ç”Ÿ,éœ€è¦ç¨‹åºäººå‘˜ä¿®æ”¹æºä»£ç .</p><p>åœ¨ä»£ç ç¼–è¯‘çš„æ—¶å€™ä¸ä¼šæç¤ºé”™è¯¯ï¼Œæ¯”å¦‚æˆ‘ä»¬å¸¸è§çš„NullPointerExceptionï¼ŒArrayIndexOutOfBoundsExceptionç­‰  </p><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs processing"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> main(<span class="hljs-keyword">String</span>[] args) &#123;<br><span class="hljs-keyword">String</span> <span class="hljs-built_in">str</span> = <span class="hljs-keyword">null</span>;<br>System.out.<span class="hljs-built_in">println</span>(<span class="hljs-built_in">str</span>.length());<span class="hljs-comment">//ç¼–è¯‘çš„æ—¶å€™ï¼Œä¸ä¼šæŠ¥é”™ï¼Œè¿è¡Œåå°±ä¼šæŠ¥é”™ã€‚å› ä¸ºstræ²¡æœ‰åˆ›å»ºå¯¹è±¡</span><br>&#125;<br></code></pre></td></tr></table></figure><h5 id="â‘¡-éè¿è¡Œæ—¶å¼‚å¸¸-ï¼š-Exceptionä»¥åŠå®ƒçš„æ‰€æœ‰å­ç±»é™¤å»RuntimeExceptionä½“ç³»çš„å…¶å®ƒå¼‚å¸¸"><a href="#â‘¡-éè¿è¡Œæ—¶å¼‚å¸¸-ï¼š-Exceptionä»¥åŠå®ƒçš„æ‰€æœ‰å­ç±»é™¤å»RuntimeExceptionä½“ç³»çš„å…¶å®ƒå¼‚å¸¸" class="headerlink" title="â‘¡ éè¿è¡Œæ—¶å¼‚å¸¸ ï¼š Exceptionä»¥åŠå®ƒçš„æ‰€æœ‰å­ç±»é™¤å»RuntimeExceptionä½“ç³»çš„å…¶å®ƒå¼‚å¸¸"></a>â‘¡ éè¿è¡Œæ—¶å¼‚å¸¸ ï¼š Exceptionä»¥åŠå®ƒçš„æ‰€æœ‰å­ç±»é™¤å»RuntimeExceptionä½“ç³»çš„å…¶å®ƒå¼‚å¸¸</h5><p>æ­¤ç±»å¼‚å¸¸åœ¨ç¼–è¯‘æ—¶æœŸå¿…é¡»å¤„ç†  ï¼›</p><p>åœ¨IDEç¼–è¯‘çš„æ—¶å€™<strong>ä¼šæœ‰æç¤º</strong>ï¼š è¦ä¹ˆtryå¤„ç†ï¼Œè¦ä¹ˆthrowså‘å¤–æŠ›å‡º</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">main</span>(<span class="hljs-params"><span class="hljs-built_in">String</span>[] args</span>)</span> &#123;<br>SimpleDateFormat sdf = <span class="hljs-keyword">new</span> SimpleDateFormat();<br><span class="hljs-keyword">try</span> &#123;<br>sdf.parse(<span class="hljs-string">&quot;2017-04-24&quot;</span>);<br>&#125; <span class="hljs-keyword">catch</span> (ParseException e) &#123;<br><span class="hljs-comment">// TODO Auto-generated catch block</span><br>e.printStackTrace();<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¯´æ˜ï¼šä¸è¦å¤ªè¿‡æ„çš„è®°ä½å“ªäº›æ˜¯è¿è¡Œæ—¶å“ªäº›æ—¶éè¿è¡Œæ—¶å¼‚å¸¸ï¼Œåœ¨å†™çš„æ—¶å€™ï¼Œå¦‚æœæ˜¯éè¿è¡Œæ—¶å¼‚å¸¸ï¼Œä¼šæœ‰é”™è¯¯æç¤º(çº¢è‰²)å¯¹å¼‚å¸¸çš„å¤„ç†ã€‚</p><h4 id="5ã€è‡ªå®šä¹‰å¼‚å¸¸"><a href="#5ã€è‡ªå®šä¹‰å¼‚å¸¸" class="headerlink" title="5ã€è‡ªå®šä¹‰å¼‚å¸¸"></a>5ã€è‡ªå®šä¹‰å¼‚å¸¸</h4><p>æˆ‘ä»¬è§åˆ°çš„ä¸Šé¢æåˆ°çš„å¼‚å¸¸æ˜¯Javaåˆ—å‡ºçš„å¸¸è§çš„ï¼Œè€Œå®é™…å¼€å‘ä¸­è¿˜æœ‰æ›´å¤šæ›´å¤šçš„å¼‚å¸¸æƒ…å†µï¼Œjavaä¸­ä¸å¯èƒ½æœ‰æ‰€æœ‰æƒ…å†µçš„å¼‚å¸¸ï¼›</p><p>æœ‰çš„æ—¶å€™ä¸èƒ½æ»¡è¶³æˆ‘ä»¬çš„éœ€è¦ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥ç»§æ‰¿Exceptionç±»ï¼Œå®ç°è‡ªå®šä¹‰å¼‚å¸¸ã€‚</p><h5 id="è‡ªå®šä¹‰å¼‚å¸¸çš„æµç¨‹-amp-è‡ªå®šä¹‰å¼‚å¸¸çš„è¯­æ³•ï¼š"><a href="#è‡ªå®šä¹‰å¼‚å¸¸çš„æµç¨‹-amp-è‡ªå®šä¹‰å¼‚å¸¸çš„è¯­æ³•ï¼š" class="headerlink" title="è‡ªå®šä¹‰å¼‚å¸¸çš„æµç¨‹&amp;è‡ªå®šä¹‰å¼‚å¸¸çš„è¯­æ³•ï¼š"></a>è‡ªå®šä¹‰å¼‚å¸¸çš„æµç¨‹&amp;è‡ªå®šä¹‰å¼‚å¸¸çš„è¯­æ³•ï¼š</h5><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-comment">//ç»§æ‰¿å…¶å®ƒå¼‚å¸¸ï¼Œç¼–å†™è‡ªå®šä¹‰å¼‚å¸¸</span><br>public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">å¼‚å¸¸ç±»å</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Exception</span></span>&#123;<br><span class="hljs-keyword">private</span> static <span class="hljs-keyword">final</span> long serialVersionUID = è‡ªåŠ¨ç”Ÿæˆ;<span class="hljs-comment">//ç”¨äºåºåˆ—åŒ–</span><br>å†™ä¸¤ä¸ªæ„é€ ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰<br>æ— å‚æ„é€ <br>æœ‰å‚æ„é€ <br>&#125;<br></code></pre></td></tr></table></figure><p>1ã€è‡ªå®šä¹‰ä¸€ä¸ªå¼‚å¸¸ç±»</p><p>ä¾‹å¦‚ï¼š <strong>Javaä¸­è®¾è®¡å¥½çš„</strong>ä¸€ä¸ªå¼‚å¸¸ç±» NumberFormatException</p><p>2ã€è®¾è®¡ä¸€æ®µä»£ç ï¼ˆæ–¹æ³•ï¼‰ï¼Œè¿™é‡Œé¢å°±ä¼šäº§ç”Ÿä¸Šé¢çš„ä¸€ä¸ªå¼‚å¸¸å¯¹è±¡</p><p>ä¾‹å¦‚ï¼šJavaä¸­åœ¨å†™Integerçš„æ„é€ æ–¹æ³•çš„æ—¶å€™ï¼Œå…¶å†…éƒ¨å°±ä¼šåˆ›å»ºä¸€ä¸ªå¼‚å¸¸å¯¹è±¡å¹¶å‘å¤–æŠ›å‡º</p><p>3ã€æœ‰äººè°ƒç”¨ä¸Šé¢çš„æ–¹æ³•ï¼Œç„¶åå¯¹å¼‚å¸¸è¿›è¡Œå¤„ç†</p><p>ä¾‹å¦‚ï¼š æˆ‘ä»¬è‡ªå·±åœ¨è°ƒç”¨æ„é€ æ–¹æ³•åˆ›å»ºå¯¹è±¡</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">try&#123;<br><span class="hljs-type">Integer</span> i = <span class="hljs-built_in">new</span> <span class="hljs-type">Integer</span>(&quot;abc&quot;);<br>&#125;catch(NumberFormatException e)&#123;<br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(â€œå‡ºå¼‚å¸¸äº†â€);<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="å®ä¾‹ï¼š"><a href="#å®ä¾‹ï¼š" class="headerlink" title="å®ä¾‹ï¼š"></a>å®ä¾‹ï¼š</h5><p>æˆ‘ä»¬éœ€è¦åšä¸Šé¢çš„3ä»¶äº‹æƒ…</p><p>1ã€è‡ªå®šä¹‰ä¸€ä¸ªå¼‚å¸¸ç±»MultipleExceptionï¼šå‡è®¾å½“æˆ‘ä»¬ç”¨æˆ·æ³¨å†Œçš„æ—¶å€™ï¼Œå¦‚æœç”¨æˆ·åå·²ç»å­˜åœ¨äº†</p><p>è¯­æ³•ï¼š</p><p>â‘  è‡ªå®šä¹‰ä¸€ä¸ªç±»    â‘¡ ç»§æ‰¿ <strong>Exception</strong> æˆ–è€… <strong>RuntimeException</strong>    </p><p>â‘¢ æä¾›ä¸€ä¸ªå…¬å…±æ— å‚æ•°çš„æ„é€ æ–¹æ³•å’Œä¸€ä¸ªStringå‚æ•°çš„æ„é€ æ–¹æ³•ï¼ˆæ¯”å¦‚å‚è€ƒï¼šNumberFormatExceptionï¼‰</p><p><img src="/2019/11/14/Java%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/NumberFormatException.png" alt="1"></p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-comment">//å‚ç…§NumberFormatExceptionè‡ªå®šå†™ä¸€ä¸ªè‡ªå®šä¹‰çš„å¤šç”¨æˆ·å¼‚å¸¸ç±»</span><br><br>public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MultipleException</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Exception</span> </span>&#123;<br><span class="hljs-keyword">private</span> static <span class="hljs-keyword">final</span> long serialVersionUID = <span class="hljs-number">1</span>L;<br><br><span class="hljs-comment">//æ— å‚çš„æ„é€ æ–¹æ³•</span><br>public <span class="hljs-type">MultipleException</span>() &#123;<br><span class="hljs-keyword">super</span>();<br>&#125;<br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æœ‰å‚çš„æ„é€ æ–¹æ³•</span><br><span class="hljs-comment"> * @param s ä¿¡æ¯æç¤º</span><br><span class="hljs-comment"> */</span><br>public <span class="hljs-type">MultipleException</span>(<span class="hljs-type">String</span> s) &#123;<br><span class="hljs-keyword">super</span>(s);<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>2ã€è®¾è®¡ä¸€ä¸ªæ³¨å†ŒRegisterçš„æ–¹æ³•ï¼Œæ ¹æ®æ¡ä»¶åˆ¤æ–­åœ¨é€‚å½“çš„æ—¶å€™æŠ›å‡ºï¼ˆäº§ç”Ÿï¼‰ä¸€ä¸ªä¸Šé¢1çš„å¼‚å¸¸å¯¹è±¡ï¼ŒæŠ›å‡ºå»ã€‚</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-comment">//ç”¨æˆ·æ³¨å†Œ</span><br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Register</span> &#123;</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">String</span>[] users = &#123; <span class="hljs-string">&quot;å°ç‹&quot;</span>, <span class="hljs-string">&quot;å°æ&quot;</span>, <span class="hljs-string">&quot;å°æ˜&quot;</span> &#125;;<span class="hljs-comment">// å†™ä¸€ä¸ªæ•°ç»„ï¼Œæ¨¡æ‹Ÿå·²ç»æ³¨å†Œçš„ç”¨æˆ·</span><br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * ç”¨æˆ·æ³¨å†ŒåŠŸèƒ½</span><br><span class="hljs-comment"> * @param userName</span><br><span class="hljs-comment"> *            æ–°æ³¨å†Œçš„ç”¨æˆ·å</span><br><span class="hljs-comment"> * @throws MultipleException</span><br><span class="hljs-comment"> *             ç”¨æˆ·åå­˜åœ¨çš„å¼‚å¸¸</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">register</span><span class="hljs-params">(<span class="hljs-keyword">String</span> userName)</span> throws MultipleException </span>&#123;<br><span class="hljs-comment">// éå†å·²ç»å­˜åœ¨çš„ç”¨æˆ·åï¼Œåˆ¤æ–­æ˜¯å¦æ–°æ³¨å†Œçš„ç”¨æˆ·åå·²ç»å­˜åœ¨</span><br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; users.length; i++) &#123;<br><span class="hljs-comment">// æ¡ä»¶åˆ¤æ–­ï¼Œå¦‚æœç”¨æˆ·åä¸ä¸ºç©ºï¼Œä¸”å·²ç»å­˜åœ¨ï¼Œåˆ™æŠ›å‡ºä¸€ä¸ªMultipleExceptionå¼‚å¸¸</span><br><span class="hljs-keyword">if</span> (userName != <span class="hljs-string">&quot;&quot;</span> &amp;&amp; userName.equals(users[i])) &#123;<br><span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MultipleException(<span class="hljs-string">&quot;äº²ï¼Œç”¨æˆ·åï¼š&quot;</span> + userName + <span class="hljs-string">&quot;å·²ç»æ³¨å†Œï¼Œè¯·é‡æ–°è¾“å…¥!&quot;</span>);<br><span class="hljs-comment">// throw:åœ¨æ–¹æ³•é‡Œå‘è°ƒç”¨è€…æŠ›å‡ºå¼‚å¸¸</span><br>&#125;<br>&#125;<br><span class="hljs-comment">//æ²¡æœ‰é‡å¤ï¼Œåˆ™æ³¨å†ŒæˆåŠŸ</span><br>System.out.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;æ­å–œä½ ï¼Œæ³¨å†ŒæˆåŠŸ!ç©çš„å¼€å¿ƒï¼ï¼&quot;</span>);<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>3ã€æˆ‘ä»¬å»è°ƒç”¨æ³¨å†Œçš„æ–¹æ³•æ¥æ³¨å†Œä¸€ä¸ªè´¦å·  </p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">String</span>[] args)</span> </span>&#123;<br><span class="hljs-keyword">try</span> &#123;<br>Register.<span class="hljs-keyword">register</span>(<span class="hljs-string">&quot;å°åˆš&quot;</span>);<br>&#125; <span class="hljs-keyword">catch</span> (MultipleException e) &#123;<br><span class="hljs-comment">// TODO Auto-generated catch block</span><br>e.printStackTrace();<br>&#125;<br><span class="hljs-keyword">try</span> &#123;<br>Register.<span class="hljs-keyword">register</span>(<span class="hljs-string">&quot;å°æ˜&quot;</span>);<br>&#125; <span class="hljs-keyword">catch</span> (MultipleException e) &#123;<br><span class="hljs-comment">// TODO Auto-generated catch block</span><br>e.printStackTrace();<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="6ã€throwå’Œthrows"><a href="#6ã€throwå’Œthrows" class="headerlink" title="6ã€throwå’Œthrows"></a>6ã€throwå’Œthrows</h4><p>ç”¨throwä¸»åŠ¨åˆ¶é€ å¼‚å¸¸ï¼Œthrowåä¸èƒ½å†æœ‰è¯­å¥ï¼Œè¯­å¥ä¸å¯è¾¾ï¼Œç¼–è¯‘å™¨æ‹’ç»ç¼–è¯‘ï¼›</p><p>å¦‚æœæŠ›å‡ºï¼ˆthrowï¼‰çš„æ˜¯<strong>ç¼–è¯‘æ—¶æœŸï¼ˆå¿…é¡»è¦å¤„ç†çš„ï¼‰å¼‚å¸¸</strong>ï¼Œå¿…é¡»åœ¨æ–¹æ³•å£°æ˜å¤„æŠ›å‡ºï¼ˆthrowsï¼‰ï¼›</p><p>å£°æ˜throwsçš„æ–¹æ³•è¢«è°ƒç”¨è€…è°ƒç”¨æ—¶å¿…é¡»å¼‚å¸¸å¤„ç†ï¼ˆç»§ç»­æŠ›å‡ºæˆ–å°±åœ°try-catchå¤„ç†ï¼‰ï¼Œæ— è®ºè¿è¡Œå¼‚å¸¸ç¼–è¯‘å¼‚å¸¸  ã€‚</p><p><img src="/2019/11/14/Java%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/throws.png" alt="1"></p>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Javaå¼‚å¸¸å¤„ç†</tag>
      
      <tag>Exception</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Javaé¢è¯•é¢˜é›†æ±‡æ€»</title>
    <link href="/2019/11/13/Java%E9%9D%A2%E8%AF%95%E9%A2%98%E9%9B%86%E6%B1%87%E6%80%BB/"/>
    <url>/2019/11/13/Java%E9%9D%A2%E8%AF%95%E9%A2%98%E9%9B%86%E6%B1%87%E6%80%BB/</url>
    
    <content type="html"><![CDATA[<p>1ã€<a href="https://www.cnblogs.com/xiaoxi/p/7364623.html">java é¢è¯•é¢˜æ•´ç†ï¼ˆä¸å®šæœŸæ›´æ–°ï¼‰</a></p>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
    </categories>
    
    
    <tags>
      
      <tag>é¢è¯•é¢˜é›†</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Javaåƒåœ¾å›æ”¶</title>
    <link href="/2019/11/13/Java%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/"/>
    <url>/2019/11/13/Java%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/</url>
    
    <content type="html"><![CDATA[<h3 id="å †-Heap-å’Œéå †-Non-heap-å†…å­˜"><a href="#å †-Heap-å’Œéå †-Non-heap-å†…å­˜" class="headerlink" title="å †(Heap)å’Œéå †(Non-heap)å†…å­˜"></a><strong>å †(Heap)å’Œéå †(Non-heap)å†…å­˜</strong></h3><p>æŒ‰ç…§å®˜æ–¹çš„è¯´æ³•ï¼šâ€œJava è™šæ‹Ÿæœºå…·æœ‰ä¸€ä¸ªå †ï¼Œå †æ˜¯è¿è¡Œæ—¶æ•°æ®åŒºåŸŸï¼Œæ‰€æœ‰ç±»å®ä¾‹å’Œæ•°ç»„çš„å†…å­˜å‡ä»æ­¤å¤„åˆ†é…ã€‚å †æ˜¯åœ¨ Java è™šæ‹Ÿæœºå¯åŠ¨æ—¶åˆ›å»ºçš„ã€‚â€</p><p>â€œåœ¨JVMä¸­å †ä¹‹å¤–çš„å†…å­˜ç§°ä¸ºéå †å†…å­˜(Non-heap memory)â€ã€‚</p><p>å¯ä»¥çœ‹å‡ºJVMä¸»è¦ç®¡ç†ä¸¤ç§ç±»å‹çš„å†…å­˜ï¼šå †å’Œéå †ã€‚ç®€å•æ¥è¯´å †å°±æ˜¯Javaä»£ç å¯åŠçš„å†…å­˜ï¼Œæ˜¯ç•™ç»™å¼€å‘äººå‘˜ä½¿ç”¨çš„ï¼Œéå †å°±æ˜¯JVMç•™ç»™è‡ªå·±ç”¨çš„ï¼Œ</p><h3 id="ä»€ä¹ˆæ˜¯è‡ªåŠ¨åƒåœ¾å›æ”¶ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯è‡ªåŠ¨åƒåœ¾å›æ”¶ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯è‡ªåŠ¨åƒåœ¾å›æ”¶ï¼Ÿ"></a><strong>ä»€ä¹ˆæ˜¯è‡ªåŠ¨åƒåœ¾å›æ”¶ï¼Ÿ</strong></h3><p>è‡ªåŠ¨åƒåœ¾å›æ”¶æ˜¯ä¸€ç§åœ¨å †å†…å­˜ä¸­æ‰¾å‡ºå“ªäº›å¯¹è±¡åœ¨è¢«ä½¿ç”¨ï¼Œè¿˜æœ‰å“ªäº›å¯¹è±¡æ²¡è¢«ä½¿ç”¨ï¼Œå¹¶ä¸”å°†åè€…åˆ æ‰çš„æœºåˆ¶ã€‚æ‰€è°“ä½¿ç”¨ä¸­çš„å¯¹è±¡ï¼ˆå·²å¼•ç”¨å¯¹è±¡ï¼‰ï¼ŒæŒ‡çš„æ˜¯ç¨‹åºä¸­æœ‰æŒ‡é’ˆæŒ‡å‘çš„å¯¹è±¡ï¼›è€Œæœªä½¿ç”¨ä¸­çš„å¯¹è±¡ï¼ˆæœªå¼•ç”¨å¯¹è±¡ï¼‰ï¼Œåˆ™æ²¡æœ‰è¢«ä»»ä½•æŒ‡é’ˆç»™æŒ‡å‘ï¼Œå› æ­¤å ç”¨çš„å†…å­˜ä¹Ÿå¯ä»¥è¢«å›æ”¶æ‰ã€‚</p><p>åœ¨ç”¨ C ä¹‹ç±»çš„ç¼–ç¨‹è¯­è¨€æ—¶ï¼Œç¨‹åºå‘˜éœ€è¦è‡ªå·±æ‰‹åŠ¨åˆ†é…å’Œé‡Šæ”¾å†…å­˜ã€‚è€Œ Java ä¸ä¸€æ ·ï¼Œå®ƒæœ‰åƒåœ¾å›æ”¶å™¨ï¼Œé‡Šæ”¾å†…å­˜ç”±å›æ”¶å™¨è´Ÿè´£ã€‚æœ¬æ–‡æ¥ä¸‹æ¥å°†ä»‹ç»åƒåœ¾å›æ”¶æœºåˆ¶çš„åŸºæœ¬è¿‡ç¨‹ã€‚</p><h3 id="åƒåœ¾å›æ”¶æœºåˆ¶çš„åŸºæœ¬è¿‡ç¨‹"><a href="#åƒåœ¾å›æ”¶æœºåˆ¶çš„åŸºæœ¬è¿‡ç¨‹" class="headerlink" title="åƒåœ¾å›æ”¶æœºåˆ¶çš„åŸºæœ¬è¿‡ç¨‹"></a>åƒåœ¾å›æ”¶æœºåˆ¶çš„åŸºæœ¬è¿‡ç¨‹</h3><h4 id="ç¬¬ä¸€æ­¥ï¼šæ ‡è®°ï¼ˆå‘ç°æ— ç”¨å¯¹è±¡ï¼‰"><a href="#ç¬¬ä¸€æ­¥ï¼šæ ‡è®°ï¼ˆå‘ç°æ— ç”¨å¯¹è±¡ï¼‰" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šæ ‡è®°ï¼ˆå‘ç°æ— ç”¨å¯¹è±¡ï¼‰"></a><strong>ç¬¬ä¸€æ­¥ï¼šæ ‡è®°ï¼ˆå‘ç°æ— ç”¨å¯¹è±¡ï¼‰</strong></h4><p>åƒåœ¾å›æ”¶çš„ç¬¬ä¸€æ­¥æ˜¯æ ‡è®°ã€‚åƒåœ¾å›æ”¶å™¨æ­¤æ—¶ä¼šæ‰¾å‡ºå“ªäº›å†…å­˜åœ¨ä½¿ç”¨ä¸­ï¼Œè¿˜æœ‰å“ªäº›ä¸æ˜¯ã€‚</p><p><img src="/2019/11/13/Java%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/a.jpg" alt="img"></p><p>ä¸Šå›¾ä¸­ï¼Œè“è‰²è¡¨ç¤ºå·²å¼•ç”¨å¯¹è±¡ï¼Œæ©™è‰²è¡¨ç¤ºæœªå¼•ç”¨å¯¹è±¡ã€‚åƒåœ¾å›æ”¶å™¨è¦æ£€æŸ¥å®Œæ‰€æœ‰çš„å¯¹è±¡ï¼Œæ‰èƒ½çŸ¥é“å“ªäº›æœ‰è¢«å¼•ç”¨ï¼Œå“ªäº›æ²¡ã€‚å¦‚æœç³»ç»Ÿé‡Œæ‰€æœ‰çš„å¯¹è±¡éƒ½è¦æ£€æŸ¥ï¼Œé‚£è¿™ä¸€æ­¥å¯èƒ½ä¼šç›¸å½“è€—æ—¶é—´ã€‚</p><h4 id="ç¬¬äºŒæ­¥ï¼šæ¸…é™¤ï¼ˆå›æ”¶è¢«æ— ç”¨å¯¹è±¡å ç”¨çš„å†…å­˜ç©ºé—´ï¼‰"><a href="#ç¬¬äºŒæ­¥ï¼šæ¸…é™¤ï¼ˆå›æ”¶è¢«æ— ç”¨å¯¹è±¡å ç”¨çš„å†…å­˜ç©ºé—´ï¼‰" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šæ¸…é™¤ï¼ˆå›æ”¶è¢«æ— ç”¨å¯¹è±¡å ç”¨çš„å†…å­˜ç©ºé—´ï¼‰"></a><strong>ç¬¬äºŒæ­¥ï¼šæ¸…é™¤ï¼ˆå›æ”¶è¢«æ— ç”¨å¯¹è±¡å ç”¨çš„å†…å­˜ç©ºé—´ï¼‰</strong></h4><p>å›æ”¶è¢«æ— ç”¨å¯¹è±¡å ç”¨çš„å†…å­˜ç©ºé—´â€“jvmå †å†…å­˜ï¼ˆè¿è¡Œæ—¶æ•°æ®åŒºï¼Œç”¨ä»¥ä¿å­˜ç±»çš„å®ä¾‹ï¼Œå³å¯¹è±¡ï¼‰ï¼Œä½¿ä¹‹å†æ¬¡è¢«ç¨‹åºä½¿ç”¨(<strong>ä¸€èˆ¬æ˜¯åœ¨CPUç©ºé—²æˆ–è€…å†…å­˜ä¸è¶³æ—¶</strong>)ã€‚</p><p>Javaè¯­è¨€æ²¡æœ‰æ˜¾å¼çš„æä¾›åˆ†é…å†…å­˜å’Œåˆ é™¤å†…å­˜çš„æ–¹æ³•ï¼Œä¸€äº›å¼€å‘äººå‘˜å°†<code>å¼•ç”¨å¯¹è±¡è®¾ç½®ä¸ºnull</code>æˆ–è€…<code>è°ƒç”¨System.gc()</code>æˆ–è€…<code>Runtime.getRuntime.gc()</code>æ¥é‡Šæ”¾å†…å­˜(<strong>åä¸¤ç§æ–¹æ³•ä»…æ˜¯å»ºè®®ï¼Œæ…é‡ä½¿ç”¨</strong>)ï¼›</p><p>æ³¨ï¼šäº‹å®ä¸Šï¼Œé™¤äº†é‡Šæ”¾æ²¡ç”¨å¯¹è±¡å ç”¨çš„å†…å­˜ç©ºé—´å¤–ï¼Œåƒåœ¾å›æ”¶ä¹Ÿå¯ä»¥æ¸…é™¤å†…å­˜çºªå½•ç¢ç‰‡ï¼ˆç”±äºåˆ›å»ºå¯¹è±¡å’Œåƒåœ¾å›æ”¶å™¨é‡Šæ”¾ä¸¢å¼ƒå¯¹è±¡æ‰€å çš„å†…å­˜ç©ºé—´ï¼‰</p><p>åˆ æ‰æ ‡è®°å‡ºçš„æœªå¼•ç”¨å¯¹è±¡ã€‚</p><p><img src="/2019/11/13/Java%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/b.jpg" alt="img"></p><p>å†…å­˜åˆ†é…å™¨ä¼šä¿ç•™æŒ‡å‘å¯ç”¨å†…å­˜çš„å¼•ç”¨ï¼Œä»¥ä¾›åˆ†é…æ–°å¯¹è±¡ã€‚</p><h4 id="ç¬¬ä¸‰æ­¥ï¼šå‹ç¼©"><a href="#ç¬¬ä¸‰æ­¥ï¼šå‹ç¼©" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼šå‹ç¼©"></a><strong>ç¬¬ä¸‰æ­¥ï¼šå‹ç¼©</strong></h4><p>ä¸ºäº†æå‡æ€§èƒ½ï¼Œåˆ é™¤äº†æœªå¼•ç”¨å¯¹è±¡åï¼Œè¿˜å¯ä»¥å°†å‰©ä¸‹çš„å·²å¼•ç”¨å¯¹è±¡æ”¾åœ¨ä¸€èµ·ï¼ˆå‹ç¼©ï¼‰ï¼Œè¿™æ ·å°±èƒ½æ›´ç®€å•å¿«æ·åœ°åˆ†é…æ–°å¯¹è±¡äº†ã€‚</p><p><img src="/2019/11/13/Java%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/c.jpg" alt="img"></p><h3 id="ä¸ºä»€ä¹ˆéœ€è¦åˆ†ä»£åƒåœ¾æ”¶é›†ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆéœ€è¦åˆ†ä»£åƒåœ¾æ”¶é›†ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦åˆ†ä»£åƒåœ¾æ”¶é›†ï¼Ÿ"></a><strong>ä¸ºä»€ä¹ˆéœ€è¦åˆ†ä»£åƒåœ¾æ”¶é›†ï¼Ÿ</strong></h3><p>ä¹‹å‰è¯´è¿‡ï¼Œé€ä¸€æ ‡è®°å’Œå‹ç¼© Java è™šæ‹Ÿæœºé‡Œçš„æ‰€æœ‰å¯¹è±¡éå¸¸ä½æ•ˆï¼šåˆ†é…çš„å¯¹è±¡è¶Šå¤šï¼Œåƒåœ¾å›æ”¶éœ€æ—¶å°±è¶Šä¹…ã€‚ä¸è¿‡ï¼Œæ ¹æ®ç»Ÿè®¡ï¼Œå¤§éƒ¨åˆ†çš„å¯¹è±¡ï¼Œå…¶å®ç”¨æ²¡å¤šä¹…å°±ä¸ç”¨äº†ã€‚</p><p>æ¥çœ‹ä¸ªä¾‹å­å§ã€‚ï¼ˆä¸‹å›¾ä¸­ï¼Œç«–è½´ä»£è¡¨å·²åˆ†é…çš„å­—èŠ‚ï¼Œè€Œæ¨ªè½´ä»£è¡¨ç¨‹åºè¿è¡Œæ—¶é—´ï¼‰</p><p><img src="/2019/11/13/Java%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/d.jpg" alt="img"></p><p>ä¸Šå›¾å¯è§ï¼Œå­˜æ´»ï¼ˆæ²¡è¢«é‡Šæ”¾ï¼‰çš„å¯¹è±¡éšè¿è¡Œæ—¶é—´è¶Šæ¥è¶Šå°‘ã€‚è€Œå›¾ä¸­å·¦ä¾§çš„é‚£äº›å³°å€¼ï¼Œä¹Ÿè¡¨æ˜äº†å¤§éƒ¨åˆ†å¯¹è±¡å…¶å®éƒ½æŒºçŸ­å‘½çš„ã€‚</p><h4 id="JVM-åˆ†ä»£"><a href="#JVM-åˆ†ä»£" class="headerlink" title="JVM åˆ†ä»£"></a><strong>JVM åˆ†ä»£</strong></h4><p>æ ¹æ®ä¹‹å‰çš„è§„å¾‹ï¼Œå°±å¯ä»¥ç”¨æ¥æå‡JVMçš„æ•ˆç‡äº†ã€‚æ–¹æ³•æ˜¯ï¼ŒæŠŠå †åˆ†æˆå‡ ä¸ªéƒ¨åˆ†ï¼ˆå°±æ˜¯æ‰€è°“çš„åˆ†ä»£ï¼‰ï¼Œåˆ†åˆ«æ˜¯<code>æ–°ç”Ÿä»£</code>ã€<code>è€å¹´ä»£</code>ï¼Œä»¥åŠ<code>æ°¸ç”Ÿä»£</code>ã€‚</p><p><img src="/2019/11/13/Java%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/910900.png" alt="img"></p><p><img src="/2019/11/13/Java%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/e.jpg" alt="img"></p><p><strong>æ–°ç”Ÿä»£:<strong>æ‰€æœ‰æ–°ç”Ÿå¯¹è±¡ä¼šè¢«åˆ†é…åœ¨æ–°ç”Ÿä»£å†…å­˜ã€‚å¹´è½»ä»£çš„ç›®æ ‡å°±æ˜¯å°½å¯èƒ½å¿«é€Ÿçš„æ”¶é›†æ‰é‚£äº›ç”Ÿå‘½å‘¨æœŸçŸ­çš„å¯¹è±¡ã€‚ä¸€æ—¦æ–°ç”Ÿä»£å†…å­˜æ»¡äº†ï¼Œå°±ä¼šå¼€å§‹å¯¹æ­»æ‰çš„å¯¹è±¡ï¼Œè¿›è¡Œæ‰€è°“çš„**<em>\</em>å°å‹åƒåœ¾å›æ”¶Minor GC\</strong></strong>è¿‡ç¨‹ã€‚ä¸€ç‰‡æ–°ç”Ÿä»£å†…å­˜é‡Œï¼Œæ­»æ‰çš„è¶Šå¤šï¼Œå›æ”¶è¿‡ç¨‹å°±è¶Šå¿«ï¼›è‡³äºé‚£äº›è¿˜æ´»ç€çš„å¯¹è±¡ï¼Œæ­¤æ—¶å°±ä¼šè€åŒ–ï¼Œå¹¶æœ€ç»ˆè€åˆ°è¿›å…¥è€å¹´ä»£å†…å­˜ã€‚</p><p><strong>Stop the World äº‹ä»¶</strong>â€”â€” å°å‹åƒåœ¾å›æ”¶å±äºä¸€ç§å« â€œStop the Worldâ€ çš„äº‹ä»¶ã€‚åœ¨è¿™ç§äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œæ‰€æœ‰çš„ç¨‹åºçº¿ç¨‹éƒ½è¦æš‚åœï¼Œç›´åˆ°äº‹ä»¶å®Œæˆï¼ˆæ¯”å¦‚è¿™é‡Œå°±æ˜¯å®Œæˆäº†æ‰€æœ‰å›æ”¶å·¥ä½œï¼‰ä¸ºæ­¢ã€‚</p><p>**è€å¹´ä»£:**ç”¨æ¥ä¿å­˜é•¿æ—¶é—´å­˜æ´»çš„å¯¹è±¡ã€‚é€šå¸¸ï¼Œè®¾ç½®ä¸€ä¸ªé˜ˆå€¼ï¼Œå½“è¾¾åˆ°è¯¥å¹´é¾„æ—¶ï¼Œå¹´è½»ä»£å¯¹è±¡ä¼šè¢«ç§»åŠ¨åˆ°è€å¹´ä»£ã€‚æœ€ç»ˆè€å¹´ä»£ä¹Ÿä¼šè¢«å›æ”¶ã€‚è¿™ä¸ªäº‹ä»¶æˆä¸º Major GCã€‚</p><p>Major GC ä¹Ÿä¼šè§¦å‘STWï¼ˆStop the Worldï¼‰ã€‚é€šå¸¸ï¼ŒMajor GCä¼šæ…¢å¾ˆå¤šï¼Œå› ä¸ºå®ƒæ¶‰åŠåˆ°æ‰€æœ‰å­˜æ´»å¯¹è±¡ã€‚æ‰€ä»¥ï¼Œå¯¹äºå“åº”æ€§çš„åº”ç”¨ç¨‹åºï¼Œåº”è¯¥å°½é‡é¿å…Major GCã€‚è¿˜è¦æ³¨æ„ï¼ŒMajor GCçš„STWçš„æ—¶é•¿å—å¹´è€ä»£åƒåœ¾å›æ”¶å™¨ç±»å‹çš„å½±å“ã€‚</p><p>**æ°¸ä¹…ä»£:**ç”¨äºå­˜æ”¾é™æ€æ–‡ä»¶ï¼Œå¦‚ä»ŠJavaç±»ã€æ–¹æ³•ç­‰åŒ…å«JVMç”¨äºæè¿°åº”ç”¨ç¨‹åºä¸­ç±»å’Œæ–¹æ³•çš„å…ƒæ•°æ®ã€‚æ°¸ä¹…ä»£æ˜¯ç”±JVMåœ¨è¿è¡Œæ—¶æ ¹æ®åº”ç”¨ç¨‹åºä½¿ç”¨çš„ç±»æ¥å¡«å……çš„ã€‚æ­¤å¤–ï¼ŒJava SEç±»åº“å’Œæ–¹æ³•ä¹Ÿå­˜å‚¨åœ¨è¿™é‡Œã€‚æŒä¹…ä»£å¯¹åƒåœ¾å›æ”¶æ²¡æœ‰æ˜¾è‘—å½±å“ï¼Œä½†æ˜¯æœ‰äº›åº”ç”¨å¯èƒ½åŠ¨æ€ç”Ÿæˆæˆ–è€…è°ƒç”¨ä¸€äº›classï¼Œä¾‹å¦‚Hibernateç­‰ï¼Œåœ¨è¿™ç§æ—¶å€™éœ€è¦è®¾ç½®ä¸€ä¸ªæ¯”è¾ƒå¤§çš„æŒä¹…ä»£ç©ºé—´æ¥å­˜æ”¾è¿™äº›è¿è¡Œè¿‡ç¨‹ä¸­æ–°å¢çš„ç±»ã€‚æŒä¹…ä»£å¤§å°é€šè¿‡-XX:MaxPermSize=<N>è¿›è¡Œè®¾ç½®ã€‚</N></p><p>å¦‚æœJVMå‘ç°æŸäº›ç±»ä¸å†éœ€è¦ï¼Œå¹¶ä¸”å…¶ä»–ç±»å¯èƒ½éœ€è¦ç©ºé—´ï¼Œåˆ™è¿™äº›ç±»å¯èƒ½ä¼šè¢«å›æ”¶ã€‚</p><h4 id="ä¸–ä»£åƒåœ¾æ”¶é›†è¿‡ç¨‹"><a href="#ä¸–ä»£åƒåœ¾æ”¶é›†è¿‡ç¨‹" class="headerlink" title="ä¸–ä»£åƒåœ¾æ”¶é›†è¿‡ç¨‹"></a><strong>ä¸–ä»£åƒåœ¾æ”¶é›†è¿‡ç¨‹</strong></h4><p>ç°åœ¨ä½ å·²ç»ç†è§£äº†ä¸ºä»€ä¹ˆå †è¢«åˆ†æˆä¸åŒçš„ä»£ï¼Œç°åœ¨æ˜¯æ—¶å€™çœ‹çœ‹è¿™äº›ç©ºé—´æ˜¯å¦‚ä½•ç›¸äº’ä½œç”¨çš„ã€‚ åé¢çš„å›¾ç‰‡å°†ä»‹ç»JVMä¸­çš„å¯¹è±¡åˆ†é…å’Œè€åŒ–è¿‡ç¨‹ã€‚</p><p><strong>ç¬¬ä¸€ã€æ–°ç”Ÿä»£ï¼š</strong>é¦–å…ˆï¼Œå°†ä»»ä½•æ–°å¯¹è±¡åˆ†é…ç»™ eden ç©ºé—´ã€‚ ä¸¤ä¸ª survivor ç©ºé—´éƒ½æ˜¯ç©ºçš„ã€‚</p><p><img src="/2019/11/13/Java%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/f.jpg" alt="img"></p><p>å½“ edenåŒºå¡«æ»¡æ—¶ï¼Œä¼šè§¦å‘è½»å¾®çš„åƒåœ¾æ”¶é›†ï¼Œè¿˜å­˜æ´»çš„å¯¹è±¡å°†è¢«å¤åˆ¶åˆ°SurvivoråŒºã€‚</p><p><img src="/2019/11/13/Java%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/g.jpg" alt="img"></p><p>å¼•ç”¨çš„å¯¹è±¡è¢«ç§»åŠ¨åˆ°ç¬¬ä¸€ä¸ª survivor ç©ºé—´ã€‚ æ¸…é™¤ eden ç©ºé—´æ—¶ï¼Œå°†åˆ é™¤æœªå¼•ç”¨çš„å¯¹è±¡ã€‚</p><p><img src="/2019/11/13/Java%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/h.jpg" alt="img"></p><p>åœ¨ä¸‹ä¸€æ¬¡Minor GCä¸­ï¼ŒEdenåŒºä¹Ÿä¼šåšåŒæ ·çš„æ“ä½œã€‚åˆ é™¤æœªè¢«å¼•ç”¨çš„å¯¹è±¡ï¼Œå¹¶å°†è¢«å¼•ç”¨çš„å¯¹è±¡ç§»åŠ¨åˆ°SurvivoråŒºã€‚ç„¶è€Œè¿™é‡Œï¼Œä»–ä»¬è¢«ç§»åŠ¨åˆ°äº†ç¬¬äºŒä¸ªSurvivoråŒºï¼ˆS1ï¼‰ã€‚æ­¤å¤–ï¼Œç¬¬ä¸€ä¸ªSurvivoråŒºï¼ˆS0ï¼‰ä¸­ï¼Œåœ¨ä¸Šä¸€æ¬¡Minor GCå¹¸å­˜çš„å¯¹è±¡ï¼Œä¼šå¢åŠ å¹´é¾„ï¼Œå¹¶è¢«ç§»åŠ¨åˆ°S1ä¸­ã€‚å¾…æ‰€æœ‰å¹¸å­˜å¯¹è±¡éƒ½è¢«ç§»åŠ¨åˆ°S1åï¼Œ<code>S0å’ŒEdenåŒºéƒ½ä¼šè¢«æ¸…ç©º</code>ã€‚æ³¨æ„ï¼ŒSurvivoråŒºä¸­<code>æœ‰äº†ä¸åŒå¹´é¾„çš„å¯¹è±¡</code>ã€‚</p><p><img src="/2019/11/13/Java%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/i.jpg" alt="img"></p><p>åœ¨ä¸‹ä¸€æ¬¡Minor GCä¸­ï¼Œä¼šé‡å¤åŒæ ·çš„æ“ä½œã€‚ä¸è¿‡ï¼Œè¿™ä¸€æ¬¡SurvivoråŒºä¼šäº¤æ¢<code>(Survivorçš„Fromå’ŒToèº«ä»½äº¤æ›¿äº’æ¢)</code>ã€‚è¢«å¼•ç”¨çš„å¯¹è±¡ç§»åŠ¨åˆ°S0ã€‚å¹¸å­˜çš„å¯¹è±¡å¢åŠ å¹´é¾„ã€‚EdenåŒºå’ŒS1è¢«æ¸…ç©ºã€‚</p><p><img src="/2019/11/13/Java%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/j.jpg" alt="img"></p><p>æ­¤å¹»ç¯ç‰‡æ¼”ç¤ºäº† promotionã€‚ åœ¨è¾ƒå°çš„GCä¹‹åï¼Œå½“è€åŒ–çš„ç‰©ä½“è¾¾åˆ°ä¸€å®šçš„<code>å¹´é¾„é˜ˆå€¼</code>ï¼ˆåœ¨è¯¥ç¤ºä¾‹ä¸­ä¸º8ï¼‰æ—¶ï¼Œå®ƒä»¬ä»å¹´è½»ä¸€ä»£æ™‹å‡åˆ°è€ä¸€ä»£ã€‚</p><p><img src="/2019/11/13/Java%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/k.jpg" alt="img"></p><p><strong>ç¬¬äºŒã€å¹´è€ä»£ï¼š</strong></p><p>åœ¨<code>å¹´è½»ä»£</code>ä¸­ç»å†äº†Næ¬¡åƒåœ¾å›æ”¶åä»ç„¶å­˜æ´»çš„å¯¹è±¡ï¼Œå°±ä¼šè¢«æ”¾åˆ°<code>å¹´è€ä»£</code>ä¸­ã€‚å› æ­¤ï¼Œå¯ä»¥è®¤ä¸ºå¹´è€ä»£ä¸­å­˜æ”¾çš„éƒ½æ˜¯ä¸€äº›ç”Ÿå‘½å‘¨æœŸè¾ƒé•¿çš„å¯¹è±¡ã€‚</p><p><img src="/2019/11/13/Java%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/Snipaste_2019-11-13_11-17-10.png" alt="img"></p><p>æ‰€ä»¥è¿™å‡ ä¹æ¶µç›–äº†å¹´è½»ä¸€ä»£çš„æ•´ä¸ªè¿‡ç¨‹ã€‚ æœ€ç»ˆï¼Œå°†ä¸»è¦å¯¹è€ä¸€ä»£è¿›è¡ŒGCï¼Œæ¸…ç†å¹¶æœ€ç»ˆå‹ç¼©è¯¥ç©ºé—´ã€‚</p><p><img src="/2019/11/13/Java%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/m.jpg" alt="img"></p><h3 id="ä»€ä¹ˆæƒ…å†µä¼šè§¦å‘åƒåœ¾å›æ”¶ï¼Ÿ"><a href="#ä»€ä¹ˆæƒ…å†µä¼šè§¦å‘åƒåœ¾å›æ”¶ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæƒ…å†µä¼šè§¦å‘åƒåœ¾å›æ”¶ï¼Ÿ"></a>ä»€ä¹ˆæƒ…å†µä¼šè§¦å‘åƒåœ¾å›æ”¶ï¼Ÿ</h3><p>ç”±äºå¯¹è±¡è¿›è¡Œäº†åˆ†ä»£å¤„ç†ï¼Œå› æ­¤åƒåœ¾å›æ”¶åŒºåŸŸã€æ—¶é—´ä¹Ÿä¸ä¸€æ ·ã€‚GCæœ‰ä¸¤ç§ç±»å‹ï¼šMinor GCå’ŒFull GCã€‚</p><h4 id="Minor-GC"><a href="#Minor-GC" class="headerlink" title="Minor GC:"></a><strong>Minor GC:</strong></h4><p> ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå½“æ–°å¯¹è±¡ç”Ÿæˆï¼Œå¹¶ä¸”åœ¨Edenç”³è¯·ç©ºé—´å¤±è´¥æ—¶ï¼Œå°±ä¼šè§¦å‘Minor GCï¼Œå¯¹EdenåŒºåŸŸè¿›è¡ŒGCï¼Œæ¸…é™¤éå­˜æ´»å¯¹è±¡ï¼Œå¹¶ä¸”æŠŠå°šä¸”å­˜æ´»çš„å¯¹è±¡ç§»åŠ¨åˆ°SurvivoråŒºï¼Œç„¶åæ•´ç†Survivorçš„ä¸¤ä¸ªåŒºã€‚</p><p>è¿™ç§æ–¹å¼çš„GCæ˜¯å¯¹å¹´è½»ä»£çš„EdenåŒºè¿›è¡Œï¼Œä¸ä¼šå½±å“åˆ°å¹´è€ä»£ã€‚</p><p>å› ä¸ºå¤§éƒ¨åˆ†å¯¹è±¡éƒ½æ˜¯ä»EdenåŒºå¼€å§‹çš„ï¼ŒåŒæ—¶EdenåŒºä¸ä¼šåˆ†é…çš„å¾ˆå¤§ï¼Œæ‰€ä»¥EdenåŒºçš„GCä¼šé¢‘ç¹è¿›è¡Œã€‚å› è€Œï¼Œä¸€èˆ¬åœ¨è¿™é‡Œéœ€è¦ä½¿ç”¨é€Ÿåº¦å¿«ã€æ•ˆç‡é«˜çš„ç®—æ³•ï¼Œä½¿Edenå»èƒ½å°½å¿«ç©ºé—²å‡ºæ¥ã€‚</p><h4 id="Full-GCï¼š"><a href="#Full-GCï¼š" class="headerlink" title="Full GCï¼š"></a><strong>Full GCï¼š</strong></h4><p>å¯¹æ•´ä¸ªå †è¿›è¡Œæ•´ç†ï¼ŒåŒ…æ‹¬Youngã€Tenuredå’ŒPermã€‚Full GCå› ä¸ºéœ€è¦å¯¹æ•´ä¸ªå¯¹è¿›è¡Œå›æ”¶ï¼Œæ‰€ä»¥æ¯”Full GCè¦æ…¢ï¼Œå› æ­¤åº”è¯¥å°½å¯èƒ½å‡å°‘Full GCçš„æ¬¡æ•°ã€‚åœ¨å¯¹JVMè°ƒä¼˜çš„è¿‡ç¨‹ä¸­ï¼Œå¾ˆå¤§ä¸€éƒ¨åˆ†å·¥ä½œå°±æ˜¯å¯¹äºFull GCçš„è°ƒèŠ‚ã€‚</p><p>æœ‰å¦‚ä¸‹åŸå› <code>å¯èƒ½å¯¼è‡´</code>Full GCï¼š</p><blockquote><p>1ã€å¹´è€ä»£ï¼ˆTenuredï¼‰è¢«å†™æ»¡</p><p>2ã€æŒä¹…ä»£ï¼ˆPermï¼‰è¢«å†™æ»¡</p><p>3ã€System.gc()è¢«æ˜¾ç¤ºè°ƒç”¨</p><p>4ã€ä¸Šä¸€æ¬¡GCä¹‹åHeapçš„å„åŸŸåˆ†é…ç­–ç•¥åŠ¨æ€å˜åŒ–</p></blockquote><p><img src="/2019/11/13/Java%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/Snipaste_2019-11-13_15-28-53.png" alt="m"></p><blockquote><ol><li>ä¸€ä¸ªå¯¹è±¡å®ä¾‹åŒ–æ—¶ï¼Œå…ˆå»æŸ¥çœ‹Edenæœ‰æ²¡æœ‰è¶³å¤Ÿçš„ç©ºé—´</li><li>å¦‚æœæœ‰ï¼Œä¸è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œå¯¹è±¡ç›´æ¥åˆ†é…åœ¨Edenå­˜å‚¨</li><li>å¦‚æœEdenå†…å­˜å·²æ»¡ï¼Œä¼šè¿›è¡Œä¸€æ¬¡Minor GC</li><li>ç„¶åå†è¿›è¡Œåˆ¤æ–­Edençš„å†…å­˜æ˜¯å¦è¶³å¤Ÿ</li><li>å¦‚æœä»ç„¶ä¸è¶³ï¼Œåˆ™å»çœ‹å­˜æ´»åŒºçš„å†…å­˜æ˜¯å¦è¶³å¤Ÿ</li><li>å¦‚æœå†…å­˜è¶³å¤Ÿï¼ŒæŠŠEdenéƒ¨åˆ†æ´»è·ƒå¯¹è±¡ä¿å­˜å†å­˜æ´»åŒºï¼Œç„¶åæŠŠå¯¹è±¡ä¿å­˜åœ¨Eden</li><li>å¦‚æœå†…å­˜ä¸è¶³ï¼Œå‘è€å¹´ä»£å‘å‡ºè¯·æ±‚ï¼ŒæŸ¥è¯¢è€å¹´ä»£çš„å†…å­˜æ˜¯å¦è¶³å¤Ÿ</li><li>å¦‚æœè€å¹´ä»£å†…å­˜è¶³å¤Ÿï¼Œå°†éƒ¨åˆ†å­˜æ´»åŒºçš„æ´»è·ƒå¯¹è±¡å­˜å…¥è€å¹´ä»£ï¼Œç„¶åæŠŠEdençš„æ´»è·ƒå¯¹è±¡æ”¾å…¥å­˜æ´»åŒºï¼Œæ–°çš„å¯¹è±¡ä¾æ—§ä¿å­˜åœ¨Eden</li><li>å¦‚æœè€å¹´ä»£å†…å­˜ä¸è¶³ï¼Œä¼šè¿›è¡Œä¸€æ¬¡full gc,ä¹‹åè€å¹´ä»£ä¼šå†è¿›è¡Œåˆ¤æ–­ å†…å­˜æ˜¯å¦è¶³å¤Ÿ,å¦‚æœè¶³å¤Ÿ åŒä¸Š.</li><li>å¦‚æœè¿˜ä¸è¶³ï¼Œä¼šæŠ›å‡º OutOfMemoryError</li></ol></blockquote><p>èµ„æ–™æŸ¥è¯¢ï¼š</p><p>1ã€åˆ†æ­§ï¼šå½“EdenåŒºæ»¡æ—¶ï¼Œè¿˜å­˜æ´»çš„å¯¹è±¡å°†è¢«å¤åˆ¶åˆ°SurvivoråŒºï¼ˆä¸¤ä¸ªä¸­çš„ä¸€ä¸ªï¼‰ï¼ˆYGCï¼Œå¹´è½»ä»£åƒåœ¾å›æ”¶ï¼‰ï¼Œå½“è¿™ä¸ªSurvivoråŒºæ»¡æ—¶ï¼Œæ­¤åŒºçš„å­˜æ´»å¯¹è±¡å°†è¢«å¤åˆ¶åˆ°å¦å¤–ä¸€ä¸ªSurvivoråŒºï¼Œå½“è¿™ä¸ªSurvivorå»ä¹Ÿæ»¡äº†çš„æ—¶å€™ï¼Œä»ç¬¬ä¸€ä¸ªSurvivoråŒºå¤åˆ¶è¿‡æ¥çš„å¹¶ä¸”æ­¤æ—¶è¿˜å­˜æ´»çš„å¯¹è±¡ï¼Œå°†è¢«å¤åˆ¶â€œå¹´è€åŒº(Tenured)â€ã€‚éœ€è¦æ³¨æ„ï¼ŒSurvivorçš„ä¸¤ä¸ªåŒºæ˜¯å¯¹ç§°çš„ï¼Œæ²¡å…ˆåå…³ç³»ï¼Œæ‰€ä»¥åŒä¸€ä¸ªåŒºä¸­å¯èƒ½åŒæ—¶å­˜åœ¨ä»Edenå¤åˆ¶è¿‡æ¥ å¯¹è±¡ï¼Œå’Œä»å‰ä¸€ä¸ªSurvivorå¤åˆ¶è¿‡æ¥çš„å¯¹è±¡ï¼Œè€Œå¤åˆ¶åˆ°å¹´è€åŒºçš„åªæœ‰ä»ç¬¬ä¸€ä¸ªSurvivorå»è¿‡æ¥çš„å¯¹è±¡ã€‚è€Œä¸”ï¼ŒSurvivoråŒºæ€»æœ‰ä¸€ä¸ªæ˜¯ç©ºçš„ã€‚åŒæ—¶ï¼Œæ ¹æ®ç¨‹åºéœ€è¦ï¼ŒSurvivoråŒºæ˜¯å¯ä»¥é…ç½®ä¸ºå¤šä¸ªçš„ï¼ˆå¤šäºä¸¤ä¸ªï¼‰ï¼Œè¿™æ ·å¯ä»¥å¢åŠ å¯¹è±¡åœ¨å¹´è½»ä»£ä¸­çš„å­˜åœ¨æ—¶é—´ï¼Œå‡å°‘è¢«æ”¾åˆ°å¹´è€ä»£çš„å¯èƒ½ã€‚</p><p>2ã€<a href="https://www.cnblogs.com/xiaoxi/p/6486852.html">Javaåƒåœ¾å›æ”¶ï¼ˆGCï¼‰æœºåˆ¶è¯¦è§£</a></p><p>3ã€<a href="https://www.cnblogs.com/liuligang/p/10624077.html">javaåƒåœ¾å›æ”¶</a></p>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Javaåƒåœ¾å›æ”¶</tag>
      
      <tag>Garbage Collection</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Javaå¤šçº¿ç¨‹</title>
    <link href="/2019/11/12/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/"/>
    <url>/2019/11/12/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<p>å•çº¿ç¨‹</p><p><img src="/2019/11/12/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/Snipaste_2019-11-13_17-27-01.png" alt="1"></p><h4 id="å¤šçº¿ç¨‹"><a href="#å¤šçº¿ç¨‹" class="headerlink" title="å¤šçº¿ç¨‹"></a>å¤šçº¿ç¨‹</h4><p>ç”¨å¤šçº¿ç¨‹åªæœ‰ä¸€ä¸ªç›®çš„ï¼Œé‚£å°±æ˜¯æ›´å¥½çš„åˆ©ç”¨cpuçš„èµ„æºï¼Œå› ä¸ºæ‰€æœ‰çš„å¤šçº¿ç¨‹ä»£ç éƒ½å¯ä»¥ç”¨å•çº¿ç¨‹æ¥å®ç°ã€‚</p><p>è¯´è¿™ä¸ªè¯å…¶å®åªæœ‰ä¸€åŠå¯¹ï¼Œå› ä¸ºååº”â€œå¤šè§’è‰²â€çš„ç¨‹åºä»£ç ï¼Œæœ€èµ·ç æ¯ä¸ªè§’è‰²è¦ç»™ä»–ä¸€ä¸ªçº¿ç¨‹å§ï¼Œå¦åˆ™è¿å®é™…åœºæ™¯éƒ½æ— æ³•æ¨¡æ‹Ÿï¼Œå½“ç„¶ä¹Ÿæ²¡æ³•è¯´èƒ½ç”¨å•çº¿ç¨‹æ¥å®ç°ï¼šæ¯”å¦‚æœ€å¸¸è§çš„â€œç”Ÿäº§è€…ï¼Œæ¶ˆè´¹è€…æ¨¡å‹â€ã€‚</p><p>å¾ˆå¤šäººéƒ½å¯¹å…¶ä¸­çš„ä¸€äº›æ¦‚å¿µä¸å¤Ÿæ˜ç¡®ï¼Œå¦‚åŒæ­¥ã€å¹¶å‘ç­‰ç­‰ï¼Œè®©æˆ‘ä»¬å…ˆå»ºç«‹ä¸€ä¸ªæ•°æ®å­—å…¸ï¼Œä»¥å…äº§ç”Ÿè¯¯ä¼šã€‚</p><blockquote><ul><li>å¤šçº¿ç¨‹ï¼šæŒ‡çš„æ˜¯è¿™ä¸ªç¨‹åºï¼ˆä¸€ä¸ªè¿›ç¨‹ï¼‰è¿è¡Œæ—¶äº§ç”Ÿäº†ä¸æ­¢ä¸€ä¸ªçº¿ç¨‹</li><li>å¹¶è¡Œä¸å¹¶å‘ï¼š <ul><li>å¹¶è¡Œï¼šå¤šä¸ªcpuå®ä¾‹æˆ–è€…å¤šå°æœºå™¨åŒæ—¶æ‰§è¡Œä¸€æ®µå¤„ç†é€»è¾‘ï¼Œæ˜¯çœŸæ­£çš„åŒæ—¶ã€‚</li><li>å¹¶å‘ï¼šé€šè¿‡cpuè°ƒåº¦ç®—æ³•ï¼Œè®©ç”¨æˆ·çœ‹ä¸Šå»åŒæ—¶æ‰§è¡Œï¼Œå®é™…ä¸Šä»cpuæ“ä½œå±‚é¢ä¸æ˜¯çœŸæ­£çš„åŒæ—¶ã€‚å¹¶å‘å¾€å¾€åœ¨åœºæ™¯ä¸­æœ‰å…¬ç”¨çš„èµ„æºï¼Œé‚£ä¹ˆé’ˆå¯¹è¿™ä¸ªå…¬ç”¨çš„èµ„æºå¾€å¾€äº§ç”Ÿç“¶é¢ˆï¼Œæˆ‘ä»¬ä¼šç”¨TPSæˆ–è€…QPSæ¥ååº”è¿™ä¸ªç³»ç»Ÿçš„å¤„ç†èƒ½åŠ›ã€‚</li></ul></li></ul></blockquote><p><img src="/2019/11/12/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/CAPP.png" alt="img"></p><h4 id="å¹¶å‘ï¼ˆConcurrentï¼‰ä¸å¹¶è¡Œï¼ˆParallelï¼‰"><a href="#å¹¶å‘ï¼ˆConcurrentï¼‰ä¸å¹¶è¡Œï¼ˆParallelï¼‰" class="headerlink" title="å¹¶å‘ï¼ˆConcurrentï¼‰ä¸å¹¶è¡Œï¼ˆParallelï¼‰"></a>å¹¶å‘ï¼ˆConcurrentï¼‰ä¸å¹¶è¡Œï¼ˆParallelï¼‰</h4><blockquote><p><strong>çº¿ç¨‹å®‰å…¨</strong>ï¼šç»å¸¸ç”¨æ¥æç»˜ä¸€æ®µä»£ç </p><p>åœ¨åŒä¸€ç¨‹åºä¸­è¿è¡Œå¤šä¸ªçº¿ç¨‹æœ¬èº«ä¸ä¼šå¯¼è‡´é—®é¢˜ï¼Œé—®é¢˜åœ¨äºå¤šä¸ªçº¿ç¨‹è®¿é—®äº†ç›¸åŒçš„èµ„æºã€‚å¦‚åŒä¸€å†…å­˜åŒºï¼ˆå˜é‡ï¼Œæ•°ç»„ï¼Œæˆ–å¯¹è±¡ï¼‰ã€ç³»ç»Ÿï¼ˆæ•°æ®åº“ï¼Œweb servicesç­‰ï¼‰æˆ–æ–‡ä»¶ã€‚</p><p>å®é™…ä¸Šï¼Œè¿™äº›é—®é¢˜åªæœ‰åœ¨ä¸€æˆ–å¤šä¸ªçº¿ç¨‹å‘è¿™äº›èµ„æºåšäº†å†™æ“ä½œæ—¶æ‰æœ‰å¯èƒ½å‘ç”Ÿï¼Œåªè¦èµ„æºæ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œå¤šä¸ªçº¿ç¨‹è¯»å–ç›¸åŒçš„èµ„æºå°±æ˜¯å®‰å…¨çš„ã€‚</p><p>å½“ä¸¤ä¸ªçº¿ç¨‹ç«äº‰åŒä¸€èµ„æºæ—¶ï¼Œå¦‚æœå¯¹èµ„æºçš„è®¿é—®é¡ºåºæ•æ„Ÿï¼Œå°±ç§°å­˜åœ¨ç«æ€æ¡ä»¶ã€‚å¯¼è‡´ç«æ€æ¡ä»¶å‘ç”Ÿçš„ä»£ç åŒºç§°ä½œä¸´ç•ŒåŒºã€‚</p><p>å¦‚æœä¸€ä¸ªèµ„æºçš„åˆ›å»ºï¼Œä½¿ç”¨ï¼Œé”€æ¯éƒ½åœ¨åŒä¸€ä¸ªçº¿ç¨‹å†…å®Œæˆï¼Œä¸”æ°¸è¿œä¸ä¼šè„±ç¦»è¯¥çº¿ç¨‹çš„æ§åˆ¶ï¼Œåˆ™è¯¥èµ„æºçš„ä½¿ç”¨å°±æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</p><p>åè¿‡æ¥ï¼Œçº¿ç¨‹ä¸å®‰å…¨å°±æ„å‘³ç€çº¿ç¨‹çš„è°ƒåº¦é¡ºåºä¼šå½±å“æœ€ç»ˆç»“æœï¼Œå¦‚ï¼š </p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">public <span class="hljs-keyword">class</span> TicketThread implements Runnable &#123;<br><span class="hljs-built_in">int</span> tickets = <span class="hljs-number">100</span>;<span class="hljs-comment">//ç«è½¦ç¥¨æ•°é‡</span><br>@Override<br>public void run<span class="hljs-literal">()</span> &#123;<br><span class="hljs-comment">//å‡ºå”®ç«è½¦ç¥¨</span><br><span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>) &#123;<br><span class="hljs-comment">//å½“ç«è½¦ç¥¨å°äº0å¼ ï¼Œåˆ™åœæ­¢å”®ç¥¨</span><br><span class="hljs-keyword">if</span>(tickets &gt; <span class="hljs-number">0</span>) &#123;<br><span class="hljs-comment">/*</span><br><span class="hljs-comment"> * t1,t2,t3</span><br><span class="hljs-comment"> * å‡è®¾åªå‰©ä¸€å¼ ç¥¨</span><br><span class="hljs-comment"> * t1è¿‡æ¥äº†ï¼Œä»–ä¸€çœ‹æœ‰ç¥¨ï¼Œä»–å°±è¿›ï¼ˆåˆ¤æ–­è¯­å¥é‡Œï¼‰æ¥äº†ï¼Œä½†æ˜¯ä»–çªç„¶è‚šå­ä¸èˆ’æœï¼Œç„¶åä»–å°±å»ä¸Šå«ç”Ÿé—´äº†</span><br><span class="hljs-comment"> * t2ä¹Ÿè¿‡æ¥äº†ï¼Œä»–ä¸€çœ‹ä¹Ÿæœ‰ç¥¨ï¼Œä»–ä¹Ÿè¿›ï¼ˆåˆ¤æ–­è¯­å¥é‡Œï¼‰æ¥äº†ï¼Œä½†æ˜¯ä»–çš„è‚šå­ä¹Ÿä¸èˆ’æœï¼Œä»–ä¹Ÿå»ä¸Šå«ç”Ÿé—´äº†</span><br><span class="hljs-comment"> * </span><br><span class="hljs-comment"> * t1ä¸Šå®Œäº†å«ç”Ÿé—´å›æ¥äº†ï¼Œå¼€å§‹å”®ç¥¨</span><br><span class="hljs-comment"> * tickets = 0;</span><br><span class="hljs-comment"> * t2ä¹Ÿä¸Šå®Œå«ç”Ÿé—´å›æ¥äº†ï¼Œä»–ä¹Ÿè¿›è¡Œå”®ç¥¨</span><br><span class="hljs-comment"> *  tickets = -1; </span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">try</span> &#123;<br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Thread</span>.</span></span>sleep(<span class="hljs-number">100</span>);<br>&#125; catch (InterruptedException e) &#123;<br><span class="hljs-comment">// TODO Auto-generated catch block</span><br>e.print<span class="hljs-constructor">StackTrace()</span>;<br>&#125;<br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Thread</span>.</span></span>current<span class="hljs-constructor">Thread()</span>.get<span class="hljs-constructor">Name()</span> + <span class="hljs-string">&quot;:&quot;</span> +tickets--);<br>&#125;<br>&#125;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>åŒæ­¥</strong>ï¼šJavaä¸­çš„åŒæ­¥æŒ‡çš„æ˜¯é€šè¿‡äººä¸ºçš„æ§åˆ¶å’Œè°ƒåº¦ï¼Œä¿è¯å…±äº«èµ„æºçš„å¤šçº¿ç¨‹è®¿é—®æˆä¸ºçº¿ç¨‹å®‰å…¨ï¼Œæ¥ä¿è¯ç»“æœçš„å‡†ç¡®ã€‚</p><p>Javaä¸­çš„åŒæ­¥å—ç”¨synchronizedæ ‡è®°ã€‚åŒæ­¥å—åœ¨Javaä¸­æ˜¯åŒæ­¥åœ¨æŸä¸ªå¯¹è±¡ä¸Šã€‚<code>æ‰€æœ‰åŒæ­¥åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šçš„åŒæ­¥å—åœ¨åŒæ—¶åªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹è¿›å…¥å¹¶æ‰§è¡Œæ“ä½œ</code>ã€‚æ‰€æœ‰å…¶ä»–ç­‰å¾…è¿›å…¥è¯¥åŒæ­¥å—çš„çº¿ç¨‹å°†è¢«é˜»å¡ï¼Œç›´åˆ°æ‰§è¡Œè¯¥åŒæ­¥å—ä¸­çš„çº¿ç¨‹é€€å‡ºã€‚</p><p>å¦‚ä¸Šé¢çš„ä»£ç ç®€å•åŠ å…¥<code>@synchronized</code>å…³é”®å­—ã€‚åœ¨ä¿è¯ç»“æœå‡†ç¡®çš„åŒæ—¶ï¼Œæé«˜æ€§èƒ½ï¼Œæ‰æ˜¯ä¼˜ç§€çš„ç¨‹åºã€‚çº¿ç¨‹å®‰å…¨çš„ä¼˜å…ˆçº§é«˜äºæ€§èƒ½ã€‚</p><ol><li>å®ä¾‹æ–¹æ³•:</li></ol><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs aspectj"><span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-keyword">int</span> value)</span></span>&#123;<br><span class="hljs-keyword">this</span>.count += value;<br>&#125;<br></code></pre></td></tr></table></figure><p>Javaå®ä¾‹æ–¹æ³•åŒæ­¥æ˜¯åŒæ­¥åœ¨æ‹¥æœ‰è¯¥æ–¹æ³•çš„å¯¹è±¡ä¸Šã€‚è¿™æ ·ï¼Œæ¯ä¸ªå®ä¾‹å…¶æ–¹æ³•åŒæ­¥éƒ½åŒæ­¥åœ¨ä¸åŒçš„å¯¹è±¡ä¸Šï¼Œå³è¯¥æ–¹æ³•æ‰€å±çš„å®ä¾‹ã€‚åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿåœ¨å®ä¾‹æ–¹æ³•åŒæ­¥å—ä¸­è¿è¡Œã€‚å¦‚æœæœ‰å¤šä¸ªå®ä¾‹å­˜åœ¨ï¼Œé‚£ä¹ˆä¸€ä¸ªçº¿ç¨‹ä¸€æ¬¡å¯ä»¥åœ¨ä¸€ä¸ªå®ä¾‹åŒæ­¥å—ä¸­æ‰§è¡Œæ“ä½œã€‚ä¸€ä¸ªå®ä¾‹ä¸€ä¸ªçº¿ç¨‹ã€‚</p><ol start="2"><li>é™æ€æ–¹æ³•:</li></ol><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs aspectj"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-keyword">int</span> value)</span></span>&#123;<br>count += value;<br>&#125;<br></code></pre></td></tr></table></figure><p>é™æ€æ–¹æ³•çš„åŒæ­¥æ˜¯æŒ‡åŒæ­¥åœ¨è¯¥æ–¹æ³•æ‰€åœ¨çš„ç±»å¯¹è±¡ä¸Šã€‚å› ä¸ºåœ¨Javaè™šæ‹Ÿæœºä¸­ä¸€ä¸ªç±»åªèƒ½å¯¹åº”ä¸€ä¸ªç±»å¯¹è±¡ï¼Œæ‰€ä»¥åŒæ—¶åªå…è®¸ä¸€ä¸ªçº¿ç¨‹æ‰§è¡ŒåŒä¸€ä¸ªç±»ä¸­çš„é™æ€åŒæ­¥æ–¹æ³•ã€‚</p><ol start="3"><li>å®ä¾‹æ–¹æ³•ä¸­çš„åŒæ­¥å—:</li></ol><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">add</span>(<span class="hljs-params">int value</span>)</span>&#123;<br> <span class="hljs-function"><span class="hljs-title">synchronized</span>(<span class="hljs-params"><span class="hljs-built_in">this</span></span>)</span>&#123;<br>    <span class="hljs-built_in">this</span>.count += value;<br> &#125;<br><span class="hljs-comment">//    Object obj=new Object();</span><br><span class="hljs-comment">//    synchronized(obj)&#123;</span><br><span class="hljs-comment">//       this.count += value;</span><br><span class="hljs-comment">//    &#125;</span><br>&#125;<br></code></pre></td></tr></table></figure><p>æ³¨æ„JavaåŒæ­¥å—æ„é€ å™¨ç”¨æ‹¬å·å°†å¯¹è±¡æ‹¬èµ·æ¥ã€‚åœ¨ä¸Šä¾‹ä¸­ï¼Œä½¿ç”¨äº†â€œthisâ€ï¼Œå³ä¸ºè°ƒç”¨addæ–¹æ³•çš„å®ä¾‹æœ¬èº«ã€‚åœ¨åŒæ­¥æ„é€ å™¨ä¸­ç”¨æ‹¬å·æ‹¬èµ·æ¥çš„å¯¹è±¡å«åšç›‘è§†å™¨å¯¹è±¡ã€‚ä¸Šè¿°ä»£ç ä½¿ç”¨ç›‘è§†å™¨å¯¹è±¡åŒæ­¥ï¼ŒåŒæ­¥å®ä¾‹æ–¹æ³•ä½¿ç”¨è°ƒç”¨æ–¹æ³•æœ¬èº«çš„å®ä¾‹ä½œä¸ºç›‘è§†å™¨å¯¹è±¡ã€‚ä¸€æ¬¡åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿåœ¨åŒæ­¥äºåŒä¸€ä¸ªç›‘è§†å™¨å¯¹è±¡çš„Javaæ–¹æ³•å†…æ‰§è¡Œã€‚</p><p>ä¸‹é¢ä¸¤ä¸ªä¾‹å­éƒ½åŒæ­¥ä»–ä»¬æ‰€è°ƒç”¨çš„å®ä¾‹å¯¹è±¡ä¸Šï¼Œå› æ­¤ä»–ä»¬åœ¨åŒæ­¥çš„æ‰§è¡Œæ•ˆæœä¸Šæ˜¯ç­‰æ•ˆçš„ã€‚</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyClass</span> &#123;</span><br><br><span class="hljs-function"><span class="hljs-keyword">public</span> synchronized <span class="hljs-keyword">void</span> <span class="hljs-title">log1</span><span class="hljs-params">(<span class="hljs-keyword">String</span> msg1, <span class="hljs-keyword">String</span> msg2)</span></span>&#123;<br>   <span class="hljs-built_in">log</span>.writeln(msg1);<br>   <span class="hljs-built_in">log</span>.writeln(msg2);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">log2</span><span class="hljs-params">(<span class="hljs-keyword">String</span> msg1, <span class="hljs-keyword">String</span> msg2)</span></span>&#123;<br>   synchronized(<span class="hljs-keyword">this</span>)&#123;<br>      <span class="hljs-built_in">log</span>.writeln(msg1);<br>      <span class="hljs-built_in">log</span>.writeln(msg2);<br>   &#125;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><ol start="4"><li>é™æ€æ–¹æ³•ä¸­çš„åŒæ­¥å—:</li></ol><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyClass</span> </span>&#123;<br> <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> synchronized <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">log1</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> msg1, <span class="hljs-built_in">String</span> msg2</span>)</span>&#123;<br>    log.writeln(msg1);<br>    log.writeln(msg2);<br> &#125;<br><br> <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">log2</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> msg1, <span class="hljs-built_in">String</span> msg2</span>)</span>&#123;<br>    <span class="hljs-function"><span class="hljs-title">synchronized</span>(<span class="hljs-params">MyClass.<span class="hljs-keyword">class</span></span>)</span>&#123;<br>       log.writeln(msg1);<br>       log.writeln(msg2);<br>    &#125;<br> &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™ä¸¤ä¸ªæ–¹æ³•ä¸å…è®¸åŒæ—¶è¢«çº¿ç¨‹è®¿é—®ã€‚å¦‚æœç¬¬äºŒä¸ªåŒæ­¥å—ä¸æ˜¯åŒæ­¥åœ¨MyClass.classè¿™ä¸ªå¯¹è±¡ä¸Šã€‚é‚£ä¹ˆè¿™ä¸¤ä¸ªæ–¹æ³•å¯ä»¥åŒæ—¶è¢«çº¿ç¨‹è®¿é—®ã€‚</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-comment">/*</span><br><span class="hljs-comment"> * é—®é¢˜å‡ºç°çš„åŸå› ï¼š</span><br><span class="hljs-comment"> * è¦æœ‰å¤šä¸ªçº¿ç¨‹</span><br><span class="hljs-comment"> * è¦æœ‰è¢«å¤šä¸ªçº¿ç¨‹æ‰€å…±äº«çš„æ•°æ®</span><br><span class="hljs-comment"> * å¤šä¸ªçº¿ç¨‹å¹¶å‘çš„è®¿é—®å…±äº«çš„æ•°æ®</span><br><span class="hljs-comment"> * </span><br><span class="hljs-comment"> * åœ¨ç«è½¦ä¸Šä¸Šå•æ‰€</span><br><span class="hljs-comment"> * å¼ ä¸‰æ¥äº†ï¼Œä¸€çœ‹é—¨æ˜¯ç»¿çš„ï¼Œä»–å°±è¿›å»äº†ï¼ŒæŠŠé—¨é”ä¸Šäº†ï¼Œé—¨å°±å˜çº¢äº†</span><br><span class="hljs-comment"> * æå››æ¥äº†ï¼Œä¸€çœ‹é—¨å¸‚çº¢è‰²çš„ï¼Œä»–å°±åªèƒ½æ†‹ç€</span><br><span class="hljs-comment"> * å¼ ä¸‰ç”¨å®Œäº†å•æ‰€ï¼ŒæŠŠé”æ‰“å¼€äº†ï¼Œé—¨å°±å˜æˆäº†ç»¿è‰²</span><br><span class="hljs-comment"> * æå››ä¸€çœ‹é—¨å˜ç»¿äº†ï¼Œä»–å°±è¿›å»äº†ï¼ŒæŠŠé—¨é”ä¸Šï¼Œé—¨å°±å˜çº¢äº†</span><br><span class="hljs-comment"> * ç‹äº”æ¥äº†ï¼Œä¸€çœ‹ä»¬æ˜¯çº¢è‰²çš„ï¼Œä»–ä¹Ÿåªèƒ½æ†‹ç€</span><br><span class="hljs-comment"> * æå››ç”¨å®Œæµ‹è¯•äº†ï¼ŒæŠŠé”æ‰“å¼€äº†ï¼Œè‚šå­åˆä¸èˆ’æœäº†ï¼Œæ‰­å¤´å›å»äº†ï¼ŒåˆæŠŠé—¨é”ä¸Šäº†ï¼Œ</span><br><span class="hljs-comment"> * </span><br><span class="hljs-comment"> * synchronized:åŒæ­¥ï¼ˆé”ï¼‰ï¼Œå¯ä»¥ä¿®é¥°ä»£ç å—å’Œæ–¹æ³•ï¼Œè¢«ä¿®é¥°çš„ä»£ç å—å’Œæ–¹æ³•ä¸€æ—¦è¢«æŸä¸ªçº¿ç¨‹è®¿é—®ï¼Œåˆ™ç›´æ¥é”ä½ï¼Œå…¶ä»–çš„çº¿ç¨‹å°†æ— æ³•è®¿é—®</span><br><span class="hljs-comment"> * </span><br><span class="hljs-comment"> * åŒæ­¥ä»£ç å—ï¼š</span><br><span class="hljs-comment"> * synchronized(é”å¯¹è±¡)&#123;</span><br><span class="hljs-comment"> * </span><br><span class="hljs-comment"> * &#125;</span><br><span class="hljs-comment"> * </span><br><span class="hljs-comment"> * æ³¨æ„ï¼šé”å¯¹è±¡éœ€è¦è¢«æ‰€æœ‰çš„çº¿ç¨‹æ‰€å…±äº«</span><br><span class="hljs-comment"> * </span><br><span class="hljs-comment"> * åŒæ­¥ï¼šå®‰å…¨æ€§é«˜ï¼Œæ•ˆç‡ä½</span><br><span class="hljs-comment"> * éåŒæ­¥ï¼šæ•ˆç‡é«˜ï¼Œä½†æ˜¯å®‰å…¨æ€§ä½</span><br><span class="hljs-comment"> * </span><br><span class="hljs-comment"> */</span><br>public <span class="hljs-keyword">class</span> TicketThread implements Runnable &#123;<br><span class="hljs-built_in">int</span> tickets = <span class="hljs-number">100</span>;<span class="hljs-comment">//ç«è½¦ç¥¨æ•°é‡</span><br>Object obj = <span class="hljs-keyword">new</span> <span class="hljs-constructor">Object()</span>;<span class="hljs-comment">//é”å¯¹è±¡éœ€è¦è¢«æ‰€æœ‰çš„çº¿ç¨‹æ‰€å…±äº«</span><br><br>@Override<br>public void run<span class="hljs-literal">()</span> &#123;<br><span class="hljs-comment">//å‡ºå”®ç«è½¦ç¥¨</span><br><span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>) &#123;<br>synchronized (obj) &#123;<br><br><span class="hljs-keyword">if</span>(tickets &gt; <span class="hljs-number">0</span>) &#123;<br><br><span class="hljs-keyword">try</span> &#123;<br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Thread</span>.</span></span>sleep(<span class="hljs-number">100</span>);<br>&#125; catch (InterruptedException e) &#123;<br><span class="hljs-comment">// TODO Auto-generated catch block</span><br>e.print<span class="hljs-constructor">StackTrace()</span>;<br>&#125;<br><br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Thread</span>.</span></span>current<span class="hljs-constructor">Thread()</span>.get<span class="hljs-constructor">Name()</span> + <span class="hljs-string">&quot;:&quot;</span> +tickets--);<br>&#125;<br>&#125;<br>&#125;<br>&#125;<br>&#125;<br><span class="hljs-comment">/////////////////////////////////////////////////////</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment"> * åŒæ­¥æ–¹æ³•:ä½¿ç”¨å…³é”®å­—synchronizedä¿®é¥°çš„æ–¹æ³•ï¼Œä¸€æ—¦è¢«ä¸€ä¸ªçº¿ç¨‹è®¿é—®ï¼Œåˆ™æ•´ä¸ªæ–¹æ³•å…¨éƒ¨é”ä½ï¼Œå…¶ä»–çº¿ç¨‹åˆ™æ— æ³•è®¿é—®</span><br><span class="hljs-comment"> * </span><br><span class="hljs-comment"> * synchronized</span><br><span class="hljs-comment"> * æ³¨æ„ï¼š</span><br><span class="hljs-comment"> * éé™æ€åŒæ­¥æ–¹æ³•çš„é”å¯¹è±¡æ˜¯this</span><br><span class="hljs-comment"> * é™æ€çš„åŒæ­¥æ–¹æ³•çš„é”å¯¹è±¡æ˜¯å½“å‰ç±»çš„å­—èŠ‚ç å¯¹è±¡ï¼Œé™æ€æ–¹æ³•æ²¡æœ‰this</span><br><span class="hljs-comment"> */</span><br>public <span class="hljs-keyword">class</span> TicketThread implements Runnable &#123;<br>static <span class="hljs-built_in">int</span> tickets = <span class="hljs-number">100</span>;<span class="hljs-comment">// ç«è½¦ç¥¨æ•°é‡</span><br>Object obj = <span class="hljs-keyword">new</span> <span class="hljs-constructor">Object()</span>;<br>@Override<br>public void run<span class="hljs-literal">()</span> &#123;<br><span class="hljs-comment">// å‡ºå”®ç«è½¦ç¥¨</span><br><span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;<br><span class="hljs-comment">/*synchronized (obj) &#123;</span><br><span class="hljs-comment">method();</span><br><span class="hljs-comment">&#125;*/</span><br><span class="hljs-comment">//method();</span><br>method2<span class="hljs-literal">()</span>;<br>&#125;<br>&#125;<br><span class="hljs-keyword">private</span> synchronized void <span class="hljs-keyword">method</span><span class="hljs-literal">()</span> &#123;<br><span class="hljs-keyword">if</span> (tickets &gt; <span class="hljs-number">0</span>) &#123; <br><span class="hljs-keyword">try</span> &#123;<br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Thread</span>.</span></span>sleep(<span class="hljs-number">100</span>);<br>&#125; catch (InterruptedException e) &#123;<br><span class="hljs-comment">// TODO Auto-generated catch block</span><br>e.print<span class="hljs-constructor">StackTrace()</span>;<br>&#125;<br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Thread</span>.</span></span>current<span class="hljs-constructor">Thread()</span>.get<span class="hljs-constructor">Name()</span> + <span class="hljs-string">&quot;:&quot;</span> + tickets--);<br>&#125;<br>&#125;<br><span class="hljs-keyword">private</span> static synchronized void method2<span class="hljs-literal">()</span> &#123;<br><span class="hljs-keyword">if</span> (tickets &gt; <span class="hljs-number">0</span>) &#123;<br><span class="hljs-keyword">try</span> &#123;<br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Thread</span>.</span></span>sleep(<span class="hljs-number">100</span>);<br>&#125; catch (InterruptedException e) &#123;<br><span class="hljs-comment">// TODO Auto-generated catch block</span><br>e.print<span class="hljs-constructor">StackTrace()</span>;<br>&#125;<br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Thread</span>.</span></span>current<span class="hljs-constructor">Thread()</span>.get<span class="hljs-constructor">Name()</span> + <span class="hljs-string">&quot;:&quot;</span> + tickets--);<br>&#125;<br>&#125;<br>&#125;<br><span class="hljs-comment">/////////////////////////////////////////////////////</span><br>public <span class="hljs-keyword">class</span> TicktetTest &#123;<br>public static void main(String<span class="hljs-literal">[]</span> args) &#123;<br><span class="hljs-comment">//åˆ›å»ºçº¿ç¨‹å¯¹è±¡</span><br>TicketThread tt = <span class="hljs-keyword">new</span> <span class="hljs-constructor">TicketThread()</span>;<br><br>Thread t = <span class="hljs-keyword">new</span> <span class="hljs-constructor">Thread(<span class="hljs-params">tt</span>)</span>;<br>t.set<span class="hljs-constructor">Name(<span class="hljs-string">&quot;çª—å£1&quot;</span>)</span>;<br>Thread t2 = <span class="hljs-keyword">new</span> <span class="hljs-constructor">Thread(<span class="hljs-params">tt</span>)</span>;<br>t2.set<span class="hljs-constructor">Name(<span class="hljs-string">&quot;çª—å£2&quot;</span>)</span>;<br>Thread t3 = <span class="hljs-keyword">new</span> <span class="hljs-constructor">Thread(<span class="hljs-params">tt</span>)</span>;<br>t3.set<span class="hljs-constructor">Name(<span class="hljs-string">&quot;çª—å£3&quot;</span>)</span>;<br><br><span class="hljs-comment">//å¯åŠ¨çº¿ç¨‹å¯¹è±¡</span><br>t.start<span class="hljs-literal">()</span>;<br>t2.start<span class="hljs-literal">()</span>;<br>t3.start<span class="hljs-literal">()</span>;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure></blockquote><h4 id="æ‰é©¬æ­¥ï¼šçº¿ç¨‹çš„çŠ¶æ€ï¼ˆçº¿ç¨‹é€šä¿¡ï¼‰"><a href="#æ‰é©¬æ­¥ï¼šçº¿ç¨‹çš„çŠ¶æ€ï¼ˆçº¿ç¨‹é€šä¿¡ï¼‰" class="headerlink" title="æ‰é©¬æ­¥ï¼šçº¿ç¨‹çš„çŠ¶æ€ï¼ˆçº¿ç¨‹é€šä¿¡ï¼‰"></a>æ‰é©¬æ­¥ï¼šçº¿ç¨‹çš„çŠ¶æ€ï¼ˆçº¿ç¨‹é€šä¿¡ï¼‰</h4><p>çº¿ç¨‹é€šä¿¡çš„ç›®æ ‡æ˜¯ä½¿çº¿ç¨‹é—´èƒ½å¤Ÿäº’ç›¸å‘é€ä¿¡å·ã€‚å¦ä¸€æ–¹é¢ï¼Œçº¿ç¨‹é€šä¿¡ä½¿çº¿ç¨‹èƒ½å¤Ÿç­‰å¾…å…¶ä»–çº¿ç¨‹çš„ä¿¡å·ã€‚</p><p>Javaæœ‰ä¸€ä¸ªå†…å»ºçš„ç­‰å¾…æœºåˆ¶æ¥å…è®¸çº¿ç¨‹åœ¨ç­‰å¾…ä¿¡å·çš„æ—¶å€™å˜ä¸ºéè¿è¡ŒçŠ¶æ€ã€‚java.lang.Object ç±»å®šä¹‰äº†ä¸‰ä¸ªæ–¹æ³•ï¼Œwait()ã€notify()å’ŒnotifyAll()æ¥å®ç°è¿™ä¸ªç­‰å¾…æœºåˆ¶ã€‚</p><p>ä¸€ä¸ªçº¿ç¨‹ä¸€æ—¦è°ƒç”¨äº†ä»»æ„å¯¹è±¡çš„wait()æ–¹æ³•ï¼Œå°±ä¼šå˜ä¸ºéè¿è¡ŒçŠ¶æ€ï¼Œç›´åˆ°å¦ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨äº†åŒä¸€ä¸ªå¯¹è±¡çš„notify()æ–¹æ³•ã€‚ä¸ºäº†è°ƒç”¨wait()æˆ–è€…notify()ï¼Œçº¿ç¨‹å¿…é¡»å…ˆè·å¾—é‚£ä¸ªå¯¹è±¡çš„é”ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>çº¿ç¨‹å¿…é¡»åœ¨åŒæ­¥å—é‡Œè°ƒç”¨wait()æˆ–è€…notify()</code>ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs typescript">package cn.kongwei_liao.ThreadsDemo;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyWaitNotify</span> </span>&#123;<br><br><span class="hljs-comment">//MonitorObject myMonitorObject = new MonitorObject();</span><br>  <span class="hljs-built_in">boolean</span> wasSignalled = <span class="hljs-literal">false</span>;<br> <br>  <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">doWait</span>(<span class="hljs-params"></span>)</span>&#123;<br><span class="hljs-comment">//    synchronized(myMonitorObject)&#123;</span><br>  <span class="hljs-function"><span class="hljs-title">synchronized</span>(<span class="hljs-params"><span class="hljs-built_in">this</span></span>)</span>&#123;<br>      <span class="hljs-keyword">while</span>(!wasSignalled)&#123;<br>        <span class="hljs-keyword">try</span>&#123;<br><span class="hljs-comment">//          myMonitorObject.wait();</span><br>        <span class="hljs-built_in">this</span>.wait();<br>         &#125; <span class="hljs-keyword">catch</span>(InterruptedException e)&#123;<br>         <br>         &#125;<br>      &#125;<br>      <span class="hljs-comment">//clear signal and continue running.</span><br>      wasSignalled = <span class="hljs-literal">false</span>;<br>    &#125;<br>  &#125;<br> <br>  <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">doNotify</span>(<span class="hljs-params"></span>)</span>&#123;<br><span class="hljs-comment">//    synchronized(myMonitorObject)&#123;</span><br>  <span class="hljs-function"><span class="hljs-title">synchronized</span>(<span class="hljs-params"><span class="hljs-built_in">this</span></span>)</span>&#123;<br>      wasSignalled = <span class="hljs-literal">true</span>;<br><span class="hljs-comment">//      myMonitorObject.notify();</span><br>      <span class="hljs-built_in">this</span>.notify();<br>    &#125;<br>  &#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">main</span>(<span class="hljs-params"><span class="hljs-built_in">String</span>[] args</span>)</span> &#123;<br><span class="hljs-comment">// TODO Auto-generated method stub</span><br>&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</p><blockquote><p>1ã€ä¸ç®¡æ˜¯ç­‰å¾…çº¿ç¨‹è¿˜æ˜¯å”¤é†’çº¿ç¨‹éƒ½åœ¨åŒæ­¥å—é‡Œè°ƒç”¨wait()å’Œnotify()ã€‚è¿™æ˜¯å¼ºåˆ¶æ€§çš„ï¼ä¸€ä¸ªçº¿ç¨‹å¦‚æœæ²¡æœ‰æŒæœ‰å¯¹è±¡é”ï¼Œå°†ä¸èƒ½è°ƒç”¨wait()ï¼Œnotify()æˆ–è€…notifyAll()ã€‚å¦åˆ™ï¼Œä¼šæŠ›å‡ºIllegalMonitorStateExceptionå¼‚å¸¸ã€‚</p><p>2ã€ä¸€æ—¦çº¿ç¨‹è°ƒç”¨äº†wait()æ–¹æ³•ï¼Œå®ƒå°±é‡Šæ”¾äº†æ‰€æŒæœ‰çš„ç›‘è§†å™¨å¯¹è±¡ä¸Šçš„é”ã€‚è¿™å°†å…è®¸å…¶ä»–çº¿ç¨‹ä¹Ÿå¯ä»¥è°ƒç”¨wait()æˆ–è€…notify()ã€‚</p><p>3ã€ä¸ºäº†é¿å…ä¸¢å¤±ä¿¡å·ï¼Œå¿…é¡»æŠŠå®ƒä»¬ä¿å­˜åœ¨ä¿¡å·ç±»é‡Œã€‚å¦‚ä¸Šé¢çš„wasSignalledå˜é‡ã€‚</p><p>4ã€å‡å”¤é†’ï¼šç”±äºè«åå…¶å¦™çš„åŸå› ï¼Œçº¿ç¨‹æœ‰å¯èƒ½åœ¨æ²¡æœ‰è°ƒç”¨è¿‡notify()å’ŒnotifyAll()çš„æƒ…å†µä¸‹é†’æ¥ã€‚è¿™å°±æ˜¯æ‰€è°“çš„å‡å”¤é†’ï¼ˆspurious wakeupsï¼‰ã€‚ä¸ºäº†é˜²æ­¢å‡å”¤é†’ï¼Œä¿å­˜ä¿¡å·çš„æˆå‘˜å˜é‡å°†åœ¨ä¸€ä¸ªwhileå¾ªç¯é‡Œæ¥å—æ£€æŸ¥ï¼Œè€Œä¸æ˜¯åœ¨ifè¡¨è¾¾å¼é‡Œã€‚è¿™æ ·çš„ä¸€ä¸ªwhileå¾ªç¯å«åš<code>è‡ªæ—‹é”</code>ã€‚</p><p>5ã€ä¸è¦åœ¨å­—ç¬¦ä¸²å¸¸é‡æˆ–å…¨å±€å¯¹è±¡ä¸­è°ƒç”¨wait()ã€‚å³ä¸Šé¢MonitorObjectä¸èƒ½æ˜¯å­—ç¬¦ä¸²å¸¸é‡æˆ–æ˜¯å…¨å±€å¯¹è±¡ã€‚æ¯ä¸€ä¸ªMyWaitNotifyçš„å®ä¾‹éƒ½æ‹¥æœ‰ä¸€ä¸ªå±äºè‡ªå·±çš„ç›‘è§†å™¨å¯¹è±¡ï¼Œè€Œä¸æ˜¯åœ¨ç©ºå­—ç¬¦ä¸²ä¸Šè°ƒç”¨wait()/notify()ã€‚</p></blockquote><p><img src="/2019/11/12/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/status.png" alt="img"></p><p><img src="/2019/11/12/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/status2.png" alt="img"></p><p>å„ç§çŠ¶æ€ä¸€ç›®äº†ç„¶ï¼Œå€¼å¾—ä¸€æçš„æ˜¯â€œBlockedâ€è¿™ä¸ªçŠ¶æ€ï¼š</p><p>çº¿ç¨‹åœ¨Runningçš„è¿‡ç¨‹ä¸­å¯èƒ½ä¼šé‡åˆ°é˜»å¡Blockedæƒ…å†µ</p><blockquote><ol><li>è°ƒç”¨join()å’Œsleep()æ–¹æ³•ï¼Œsleep()æ—¶é—´ç»“æŸæˆ–è¢«æ‰“æ–­ï¼Œjoin()ä¸­æ–­,IOå®Œæˆéƒ½ä¼šå›åˆ°RunnableçŠ¶æ€ï¼Œç­‰å¾…JVMçš„è°ƒåº¦ã€‚</li><li>è°ƒç”¨wait()ï¼Œä½¿è¯¥çº¿ç¨‹å¤„äº<code>ç­‰å¾…æ± (wait blocked pool)</code>,ç›´åˆ°notify()/notifyAll()ï¼Œçº¿ç¨‹è¢«å”¤é†’è¢«æ”¾åˆ°<code>é”å®šæ± (lock blocked pool )</code>ï¼Œé‡Šæ”¾åŒæ­¥é”ä½¿çº¿ç¨‹å›åˆ°å¯è¿è¡ŒçŠ¶æ€ï¼ˆRunnableï¼‰</li><li>å¯¹RunningçŠ¶æ€çš„çº¿ç¨‹åŠ åŒæ­¥é”(Synchronized)ä½¿å…¶è¿›å…¥(lock blocked pool ),åŒæ­¥é”è¢«é‡Šæ”¾è¿›å…¥å¯è¿è¡ŒçŠ¶æ€(Runnable)ã€‚</li></ol></blockquote><p>æ­¤å¤–ï¼Œåœ¨RunnableçŠ¶æ€çš„çº¿ç¨‹æ˜¯å¤„äºè¢«è°ƒåº¦çš„çº¿ç¨‹ï¼Œæ­¤æ—¶çš„è°ƒåº¦é¡ºåºæ˜¯ä¸ä¸€å®šçš„ã€‚Threadç±»ä¸­çš„yieldæ–¹æ³•å¯ä»¥è®©ä¸€ä¸ªRunningçŠ¶æ€çš„çº¿ç¨‹è½¬å…¥Runnableã€‚</p><h4 id="ç»ƒå†…åŠŸï¼šæ¯ä¸ªå¯¹è±¡éƒ½æœ‰çš„æ–¹æ³•å’Œæœºåˆ¶"><a href="#ç»ƒå†…åŠŸï¼šæ¯ä¸ªå¯¹è±¡éƒ½æœ‰çš„æ–¹æ³•å’Œæœºåˆ¶" class="headerlink" title="ç»ƒå†…åŠŸï¼šæ¯ä¸ªå¯¹è±¡éƒ½æœ‰çš„æ–¹æ³•å’Œæœºåˆ¶"></a>ç»ƒå†…åŠŸï¼šæ¯ä¸ªå¯¹è±¡éƒ½æœ‰çš„æ–¹æ³•å’Œæœºåˆ¶</h4><h5 id="åˆ›å»ºå¤šçº¿ç¨‹"><a href="#åˆ›å»ºå¤šçº¿ç¨‹" class="headerlink" title="åˆ›å»ºå¤šçº¿ç¨‹"></a>åˆ›å»ºå¤šçº¿ç¨‹</h5><p>æ–¹æ³•ä¸€ï¼šå®ç°Runnableæ¥å£</p><p><img src="/2019/11/12/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/image-20191113163347390.png" alt="image-20191113163347390"></p><blockquote><p>1ã€å®šä¹‰ç±»å®ç°Runnableæ¥å£ã€‚</p><p>2ã€è¦†ç›–æ¥å£ä¸­çš„runæ–¹æ³•ã€‚ã€‚</p><p>3ã€åˆ›å»ºThreadç±»çš„å¯¹è±¡</p><p>4ã€å°†Runnableæ¥å£çš„å­ç±»å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ é€’ç»™Threadç±»çš„æ„é€ å‡½æ•°ã€‚</p><p>5ã€è°ƒç”¨Threadç±»çš„startæ–¹æ³•å¼€å¯çº¿ç¨‹ã€‚</p></blockquote><p>æ–¹æ³•æ‘˜è¦ï¼š</p><blockquote><p>void run()ä½¿ç”¨å®ç°æ¥å£Runnableçš„å¯¹è±¡åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ—¶ï¼Œå¯åŠ¨çº¿ç¨‹æ—¶è°ƒç”¨</p></blockquote><p>ç¬¬ä¸€ç§ç¼–å†™çº¿ç¨‹æ‰§è¡Œä»£ç çš„æ–¹å¼æ˜¯æ–°å»ºä¸€ä¸ªå®ç°äº†java.lang.Runnableæ¥å£çš„ç±»çš„å®ä¾‹ï¼Œå®ä¾‹ä¸­çš„æ–¹æ³•å¯ä»¥è¢«çº¿ç¨‹è°ƒç”¨ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs ruby">public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyRunnable</span> <span class="hljs-title">implements</span> <span class="hljs-title">Runnable</span> &#123;</span><br>   public void run()&#123;<br>    System.out.println(<span class="hljs-string">&quot;MyRunnable running&quot;</span>);<br>   &#125;<br>&#125;<br> <br>Thread thread = new Thread(new MyRunnable());<br>thread.start();<br><br>/<span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">/åŒ¿ååˆ›å»º/</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><br>Runnable myRunnable = new Runnable()&#123;<br>   public void run()&#123;<br>     System.out.println(<span class="hljs-string">&quot;Runnable running&quot;</span>);<br>   &#125;<br>&#125;<br>Thread thread = new Thread(myRunnable);<br>thread.start();<br></code></pre></td></tr></table></figure><p>æ–¹æ³•äºŒï¼šç»§æ‰¿Threadç±»ï¼Œé‡å†™runæ–¹æ³•</p><blockquote><p>1.å®šä¹‰ä¸€ä¸ªç±»ç»§æ‰¿Threadã€‚</p><p>2.é‡å†™runæ–¹æ³•ã€‚</p><p>3.åˆ›å»ºå­ç±»å¯¹è±¡ï¼Œå°±æ˜¯åˆ›å»ºçº¿ç¨‹å¯¹è±¡ã€‚</p><p>4.è°ƒç”¨startæ–¹æ³•ï¼Œå¼€å¯çº¿ç¨‹å¹¶è®©çº¿ç¨‹æ‰§è¡Œï¼ŒåŒæ—¶è¿˜ä¼šå‘Šè¯‰jvmå»è°ƒç”¨runæ–¹æ³•</p></blockquote><p>Threadå®ç°äº†java.lang.Runnableæ¥å£ï¼Œåˆ›å»ºThreadå­ç±»çš„ä¸€ä¸ªå®ä¾‹å¹¶é‡å†™runæ–¹æ³•ï¼Œrunæ–¹æ³•ä¼šåœ¨è°ƒç”¨start()æ–¹æ³•ä¹‹åè¢«æ‰§è¡Œã€‚</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs perl">public class MyThread extends Thread &#123;<br>   public void run()&#123;<br>     System.out.println(<span class="hljs-string">&quot;MyThread running&quot;</span>);<br>   &#125;<br>&#125;<br><br>MyThread myThread = new MyThread();<br>myTread.start();<br><br>//<span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">/åŒ¿ååˆ›å»º/</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span>/<br>Thread thread = new Thread()&#123;<br>   public void run()&#123;<br>     System.out.println(<span class="hljs-string">&quot;Thread Running&quot;</span>);<br>   &#125;<br>&#125;;<br>thread.start();<br></code></pre></td></tr></table></figure><p>synchronized, wait, notifyæ˜¯ä»»ä½•å¯¹è±¡éƒ½å…·æœ‰çš„<code>åŒæ­¥å·¥å…·</code>ã€‚</p><p><img src="/2019/11/12/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/tools.png" alt="img"></p><h5 id="Monitorç›‘è§†å™¨"><a href="#Monitorç›‘è§†å™¨" class="headerlink" title="Monitorç›‘è§†å™¨"></a><strong>Monitorç›‘è§†å™¨</strong></h5><p>ä»–ä»¬æ˜¯åº”ç”¨äºåŒæ­¥é—®é¢˜çš„äººå·¥çº¿ç¨‹è°ƒåº¦å·¥å…·ã€‚è®²å…¶æœ¬è´¨ï¼Œå®ç°å°±è¦æ˜ç¡®Monitorè¿™ä¸ªæ¦‚å¿µï¼ŒJavaä¸­çš„æ¯ä¸€ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªç›‘è§†å™¨ï¼Œæ¥æ£€æµ‹å¹¶å‘ä»£ç çš„é‡å…¥ã€‚åœ¨éå¤šçº¿ç¨‹ç¼–ç æ—¶è¯¥Monitorä¸å‘æŒ¥ä½œç”¨ï¼Œåä¹‹å¦‚æœåœ¨synchronizedèŒƒå›´å†…ï¼Œç›‘è§†å™¨å‘æŒ¥ä½œç”¨ã€‚</p><p>wait/notifyå¿…é¡»å­˜åœ¨äºsynchronizedå—ä¸­ã€‚å¹¶ä¸”ï¼Œè¿™ä¸‰ä¸ªå…³é”®å­—é’ˆå¯¹çš„æ˜¯åŒä¸€ä¸ªç›‘è§†å™¨ï¼ˆæŸå¯¹è±¡çš„ç›‘è§†å™¨ï¼‰ã€‚è¿™æ„å‘³ç€waitä»¥åï¼Œå…¶å®ƒçº¿ç¨‹å¯ä»¥è¿›å…¥åŒæ­¥å—æ‰§è¡Œã€‚</p><p>å½“æŸæ®µä»£ç å¹¶ä¸æŒæœ‰ç›‘è§†å™¨çš„ä½¿ç”¨æƒæ—¶ï¼ˆå¦‚å›¾ä¸­5çš„çŠ¶æ€ï¼Œå³è„±ç¦»åŒæ­¥å—ï¼‰å»waitæˆ–notifyï¼Œä¼šæŠ›å‡ºjava.lang.IllegalMonitorStateExceptionã€‚ä¹ŸåŒ…æ‹¬åœ¨synchronizedå—ä¸­å»è°ƒç”¨å¦ä¸€ä¸ªå¯¹è±¡çš„wait/notifyï¼Œå› ä¸ºä¸åŒå¯¹è±¡çš„ç›‘è§†å™¨ä¸åŒï¼ŒåŒæ ·ä¼šæŠ›å‡ºæ­¤å¼‚å¸¸ã€‚</p><p>å†è®²ç”¨æ³•ï¼š</p><ul><li><p><strong>synchronized</strong>å•ç‹¬ä½¿ç”¨ï¼š </p></li><li><p>ä»£ç å—ï¼šå¦‚ä¸‹ï¼Œåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œsynchronizedå—ä¸­çš„æ–¹æ³•è·å–äº†lockå®ä¾‹çš„monitorï¼Œå¦‚æœå®ä¾‹ç›¸åŒï¼Œé‚£ä¹ˆåªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½æ‰§è¡Œè¯¥å—å†…å®¹ </p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyRunnable1</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Runnable</span> </span>&#123;<br>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">run</span><span class="hljs-params">()</span> </span>&#123;  <br>       <span class="hljs-keyword">synchronized</span>(<span class="hljs-keyword">this</span>)&#123;<br>         ..<span class="hljs-keyword">do</span> something<br>       &#125;<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>ç›´æ¥ç”¨äºæ–¹æ³•ï¼š ç›¸å½“äºä¸Šé¢ä»£ç ä¸­ç”¨lockæ¥é”å®šçš„æ•ˆæœï¼Œå®é™…è·å–çš„æ˜¯Thread1ç±»çš„monitorã€‚æ›´è¿›ä¸€æ­¥ï¼Œå¦‚æœä¿®é¥°çš„æ˜¯staticæ–¹æ³•ï¼Œåˆ™é”å®šè¯¥ç±»æ‰€æœ‰å®ä¾‹ã€‚ </li></ul><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs ruby">  public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyRunnable1</span> <span class="hljs-title">implements</span> <span class="hljs-title">Runnable</span> &#123;</span><br>     public synchronized void run() &#123;  <br>          ..<span class="hljs-keyword">do</span> something<br>     &#125;<br>  &#125;<br>  /<span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">/åˆ›å»ºçº¿ç¨‹/</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><br>public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Test</span> &#123;</span><br>  public static void main(String[]args) &#123;<br>  Thread MT1=new Thread(new MyRunnable1());<br>  MT1.start();<br>  &#125;<br>  &#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>synchronized, wait, notify</strong>ç»“åˆ:å…¸å‹åœºæ™¯ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜</p></li></ul><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-comment">/**</span><br><span class="hljs-comment">   * ç”Ÿäº§è€…ç”Ÿäº§å‡ºæ¥çš„äº§å“äº¤ç»™åº—å‘˜</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-keyword">public</span> synchronized void produce()<br>  &#123;<br>      <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.product &gt;= MAX_PRODUCT)<br>      &#123;<br>          <span class="hljs-keyword">try</span><br>          &#123;<br>              wait();  <br>              System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;äº§å“å·²æ»¡,è¯·ç¨å€™å†ç”Ÿäº§&quot;</span>);<br>          &#125;<br>          <span class="hljs-keyword">catch</span>(InterruptedException e)<br>          &#123;<br>              e.printStackTrace();<br>          &#125;<br>          <span class="hljs-keyword">return</span>;<span class="hljs-comment">//</span><br>      &#125;<br><br>      <span class="hljs-keyword">this</span>.product++;<br>      System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;ç”Ÿäº§è€…ç”Ÿäº§ç¬¬&quot;</span> + <span class="hljs-keyword">this</span>.product + <span class="hljs-string">&quot;ä¸ªäº§å“.&quot;</span>);<br>      notifyAll();   <span class="hljs-comment">//é€šçŸ¥ç­‰å¾…åŒºçš„æ¶ˆè´¹è€…å¯ä»¥å–å‡ºäº§å“äº†</span><br>  &#125;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * æ¶ˆè´¹è€…ä»åº—å‘˜å–äº§å“</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-keyword">public</span> synchronized void consume()<br>  &#123;<br>      <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.product &lt;= MIN_PRODUCT)<br>      &#123;<br>          <span class="hljs-keyword">try</span> <br>          &#123;<br>              wait(); <br>              System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;ç¼ºè´§,ç¨å€™å†å–&quot;</span>);<br>          &#125; <br>          <span class="hljs-keyword">catch</span> (InterruptedException e) <br>          &#123;<br>              e.printStackTrace();<br>          &#125;<br>          <span class="hljs-keyword">return</span>;<span class="hljs-comment">//</span><br>      &#125;<br><br>      System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;æ¶ˆè´¹è€…å–èµ°äº†ç¬¬&quot;</span> + <span class="hljs-keyword">this</span>.product + <span class="hljs-string">&quot;ä¸ªäº§å“.&quot;</span>);<br>      <span class="hljs-keyword">this</span>.product--;<br>      notifyAll();   <span class="hljs-comment">//é€šçŸ¥ç­‰å¾…å»çš„ç”Ÿäº§è€…å¯ä»¥ç”Ÿäº§äº§å“äº†</span><br>  &#125;<br></code></pre></td></tr></table></figure><h5 id="Volatileå…³é”®å­—"><a href="#Volatileå…³é”®å­—" class="headerlink" title="Volatileå…³é”®å­—"></a><strong>Volatileå…³é”®å­—</strong></h5><p>å¤šçº¿ç¨‹çš„å†…å­˜æ¨¡å‹ï¼šmain memoryï¼ˆä¸»å­˜ï¼‰ã€working memoryï¼ˆçº¿ç¨‹æ ˆï¼‰ï¼Œåœ¨å¤„ç†æ•°æ®æ—¶ï¼Œçº¿ç¨‹ä¼šæŠŠå€¼ä»ä¸»å­˜loadåˆ°æœ¬åœ°æ ˆï¼Œå®Œæˆæ“ä½œåå†saveå›å»(volatileå…³é”®è¯çš„ä½œç”¨ï¼šæ¯æ¬¡é’ˆå¯¹è¯¥å˜é‡çš„æ“ä½œéƒ½æ¿€å‘ä¸€æ¬¡<code>load and save</code>)ã€‚</p><p><img src="/2019/11/12/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/volatile.png" alt="img"></p><p>é’ˆå¯¹å¤šçº¿ç¨‹ä½¿ç”¨çš„å˜é‡å¦‚æœä¸æ˜¯volatileæˆ–è€…finalä¿®é¥°çš„ï¼Œå¾ˆæœ‰å¯èƒ½äº§ç”Ÿä¸å¯é¢„çŸ¥çš„ç»“æœï¼ˆå¦ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†è¿™ä¸ªå€¼ï¼Œä½†æ˜¯ä¹‹ååœ¨æŸçº¿ç¨‹çœ‹åˆ°çš„æ˜¯ä¿®æ”¹ä¹‹å‰çš„å€¼ï¼‰ã€‚å…¶å®é“ç†ä¸Šè®²åŒä¸€å®ä¾‹çš„åŒä¸€å±æ€§æœ¬èº«åªæœ‰ä¸€ä¸ªå‰¯æœ¬ã€‚ä½†æ˜¯å¤šçº¿ç¨‹æ˜¯ä¼šç¼“å­˜å€¼çš„ï¼Œæœ¬è´¨ä¸Šï¼Œvolatileå°±æ˜¯ä¸å»ç¼“å­˜ï¼Œç›´æ¥å–å€¼ã€‚<code>åœ¨çº¿ç¨‹å®‰å…¨çš„æƒ…å†µä¸‹åŠ volatileä¼šç‰ºç‰²æ€§èƒ½</code>ã€‚</p><h4 id="å¤ªç¥–é•¿æ‹³ï¼šåŸºæœ¬çº¿ç¨‹ç±»"><a href="#å¤ªç¥–é•¿æ‹³ï¼šåŸºæœ¬çº¿ç¨‹ç±»" class="headerlink" title="å¤ªç¥–é•¿æ‹³ï¼šåŸºæœ¬çº¿ç¨‹ç±»"></a>å¤ªç¥–é•¿æ‹³ï¼šåŸºæœ¬çº¿ç¨‹ç±»</h4><p>åŸºæœ¬çº¿ç¨‹ç±»æŒ‡çš„æ˜¯Threadç±»ï¼ŒRunnableæ¥å£å’ŒCallableæ¥å£</p><p><img src="/2019/11/12/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/Thread1.png" alt="t"></p><p>æ–¹æ³•æ‘˜è¦ï¼š</p><blockquote><p>æ„é€ æ–¹æ³•ï¼š</p><ul><li>Thread()åˆ†é…æ–°çš„Threadå¯¹è±¡ï¼›</li><li>Thread(Runnable target)åˆ†é…æ–°çš„Threadå¯¹è±¡ã€‚</li></ul><p>æˆå‘˜æ–¹æ³•ï¼š</p><ul><li>void start()ä½¿è¯¥çº¿ç¨‹å¼€å§‹æ‰§è¡Œï¼›Javaè™šæ‹Ÿæœºè°ƒç”¨è¯¥çº¿ç¨‹çš„runæ–¹æ³•ï¼›</li><li>void run()è¯¥çº¿ç¨‹è¦æ‰§è¡Œçš„æ“ä½œï¼Œéœ€è¦è‡ªå·±æ¥é‡å†™</li><li>String getName()è¿”å›çº¿ç¨‹å</li><li>void setName(String Name)æ”¹å˜çº¿ç¨‹åç§°</li><li>public static yield() å½“å‰çº¿ç¨‹å¯è½¬è®©CPUæ§åˆ¶æƒï¼Œè®©åˆ«çš„å°±ç»ªçŠ¶æ€çš„çº¿ç¨‹è¿è¡Œï¼ˆçº¿ç¨‹åˆ‡æ¢ï¼‰</li><li>public join()åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­è°ƒç”¨other.join(),å°†ç­‰å¾…otheræ‰§è¡Œå®Œå å†ç»§ç»­æœ¬çº¿ç¨‹ã€‚</li><li>static void sleep(long millis)åœ¨æŒ‡å®šçš„æ¯«ç§’æ•°å†…è®©å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹ä¼‘çœ ã€‚</li><li>public interrupt()//åä¸¤ä¸ªå‡½æ•°çš†å¯ä»¥è¢«æ‰“æ–­</li></ul></blockquote><p>Threadç±»å®ç°äº†Runnableæ¥å£ï¼Œå¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ï¼š</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs perl">public class MyThread extends Thread &#123;<span class="hljs-regexp">//</span>ç»§æ‰¿Threadç±»ï¼Œé‡å†™runæ–¹æ³•<br>   public void run()&#123;<br>     System.out.println(<span class="hljs-string">&quot;MyThread running&quot;</span>);<br>   &#125;<br>&#125;<br>//<span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">/åˆ›å»ºçº¿ç¨‹/</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span>/<br>MyThread <span class="hljs-keyword">my</span> = new MyThread();<br>my.start();<br></code></pre></td></tr></table></figure><h5 id><a href="#" class="headerlink" title></a></h5><h5 id="å…³äºä¸­æ–­ï¼š"><a href="#å…³äºä¸­æ–­ï¼š" class="headerlink" title="å…³äºä¸­æ–­ï¼š"></a><strong>å…³äºä¸­æ–­ï¼š</strong></h5><p>å®ƒå¹¶ä¸åƒstopæ–¹æ³•é‚£æ ·ä¼šä¸­æ–­ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹ã€‚</p><p>çº¿ç¨‹ä¼šä¸æ—¶åœ°æ£€æµ‹ä¸­æ–­æ ‡è¯†ä½ï¼Œä»¥åˆ¤æ–­çº¿ç¨‹æ˜¯å¦åº”è¯¥è¢«ä¸­æ–­ï¼ˆä¸­æ–­æ ‡è¯†å€¼æ˜¯å¦ä¸ºtrueï¼‰ã€‚</p><p>ä¸­æ–­åªä¼šå½±å“åˆ°<code>waitçŠ¶æ€ã€sleepçŠ¶æ€å’ŒjoinçŠ¶æ€</code>ã€‚è¢«æ‰“æ–­çš„çº¿ç¨‹ä¼šæŠ›å‡ºInterruptedExceptionã€‚</p><p>Thread.interrupted()æ£€æŸ¥å½“å‰çº¿ç¨‹æ˜¯å¦å‘ç”Ÿä¸­æ–­ï¼Œè¿”å›boolean<br>synchronizedåœ¨è·é”çš„è¿‡ç¨‹ä¸­æ˜¯ä¸èƒ½è¢«ä¸­æ–­çš„ã€‚</p><p>ä¸­æ–­æ˜¯ä¸€ä¸ªçŠ¶æ€ï¼interrupt()æ–¹æ³•åªæ˜¯å°†è¿™ä¸ªçŠ¶æ€ç½®ä¸ºtrueè€Œå·²ã€‚</p><p>æ‰€ä»¥è¯´æ­£å¸¸è¿è¡Œçš„ç¨‹åºä¸å»æ£€æµ‹çŠ¶æ€ï¼Œå°±ä¸ä¼šç»ˆæ­¢ï¼Œè€Œwaitç­‰é˜»å¡æ–¹æ³•ä¼šå»æ£€æŸ¥å¹¶æŠ›å‡ºå¼‚å¸¸ã€‚</p><p>å¦‚æœåœ¨æ­£å¸¸è¿è¡Œçš„ç¨‹åºä¸­æ·»åŠ while(!Thread.interrupted()) ï¼Œåˆ™åŒæ ·å¯ä»¥åœ¨ä¸­æ–­åç¦»å¼€ä»£ç ä½“ã€‚</p><h5 id="Threadç±»æœ€ä½³å®è·µï¼š"><a href="#Threadç±»æœ€ä½³å®è·µï¼š" class="headerlink" title="Threadç±»æœ€ä½³å®è·µï¼š"></a><strong>Threadç±»æœ€ä½³å®è·µ</strong>ï¼š</h5><p>å†™çš„æ—¶å€™æœ€å¥½è¦è®¾ç½®çº¿ç¨‹åç§° Thread.nameï¼Œå¹¶è®¾ç½®çº¿ç¨‹ç»„ ThreadGroupï¼Œç›®çš„æ˜¯æ–¹ä¾¿ç®¡ç†ã€‚åœ¨å‡ºç°é—®é¢˜çš„æ—¶å€™ï¼Œæ‰“å°çº¿ç¨‹æ ˆ (jstack -pid) ä¸€çœ¼å°±å¯ä»¥çœ‹å‡ºæ˜¯å“ªä¸ªçº¿ç¨‹å‡ºçš„é—®é¢˜ï¼Œè¿™ä¸ªçº¿ç¨‹æ˜¯å¹²ä»€ä¹ˆçš„ã€‚</p><h5 id="å¦‚ä½•è·å–çº¿ç¨‹ä¸­çš„å¼‚å¸¸"><a href="#å¦‚ä½•è·å–çº¿ç¨‹ä¸­çš„å¼‚å¸¸" class="headerlink" title="å¦‚ä½•è·å–çº¿ç¨‹ä¸­çš„å¼‚å¸¸"></a><strong>å¦‚ä½•è·å–çº¿ç¨‹ä¸­çš„å¼‚å¸¸</strong></h5><p><img src="/2019/11/12/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/Thread.png" alt="img"></p><p>ä¸èƒ½ç”¨try,catchæ¥è·å–çº¿ç¨‹ä¸­çš„å¼‚å¸¸</p><h5 id="Runnableä¸Threadç±»ä¼¼"><a href="#Runnableä¸Threadç±»ä¼¼" class="headerlink" title="Runnableä¸Threadç±»ä¼¼"></a><strong>Runnable</strong>ä¸Threadç±»ä¼¼</h5><h5 id="Callable"><a href="#Callable" class="headerlink" title="Callable"></a><strong>Callable</strong></h5><p>futureæ¨¡å¼ï¼šå¹¶å‘æ¨¡å¼çš„ä¸€ç§ï¼Œå¯ä»¥æœ‰ä¸¤ç§å½¢å¼ï¼Œå³<code>æ— é˜»å¡</code>å’Œ<code>é˜»å¡</code>ï¼Œåˆ†åˆ«æ˜¯isDoneå’Œgetã€‚å…¶ä¸­Futureå¯¹è±¡ç”¨æ¥å­˜æ”¾è¯¥çº¿ç¨‹çš„è¿”å›å€¼ä»¥åŠçŠ¶æ€</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">ExecutorService e = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Executors</span>.</span></span><span class="hljs-keyword">new</span><span class="hljs-constructor">FixedThreadPool(3)</span>;<br> <span class="hljs-comment">//submitæ–¹æ³•æœ‰å¤šé‡å‚æ•°ç‰ˆæœ¬ï¼ŒåŠæ”¯æŒcallableä¹Ÿèƒ½å¤Ÿæ”¯æŒrunnableæ¥å£ç±»å‹.</span><br>Future future = e.submit(<span class="hljs-keyword">new</span> my<span class="hljs-constructor">Callable()</span>);<br>future.is<span class="hljs-constructor">Done()</span> <span class="hljs-comment">//return true,false æ— é˜»å¡</span><br>future.get<span class="hljs-literal">()</span> <span class="hljs-comment">// return è¿”å›å€¼ï¼Œé˜»å¡ç›´åˆ°è¯¥çº¿ç¨‹è¿è¡Œç»“æŸ</span><br></code></pre></td></tr></table></figure><h4 id="ä¹é˜´æ­£ç»ï¼šé«˜çº§å¤šçº¿ç¨‹æ§åˆ¶ç±»"><a href="#ä¹é˜´æ­£ç»ï¼šé«˜çº§å¤šçº¿ç¨‹æ§åˆ¶ç±»" class="headerlink" title="ä¹é˜´æ­£ç»ï¼šé«˜çº§å¤šçº¿ç¨‹æ§åˆ¶ç±»"></a>ä¹é˜´æ­£ç»ï¼šé«˜çº§å¤šçº¿ç¨‹æ§åˆ¶ç±»</h4><p>ä»¥ä¸Šéƒ½å±äºå†…åŠŸå¿ƒæ³•ï¼Œæ¥ä¸‹æ¥æ˜¯å®é™…é¡¹ç›®ä¸­å¸¸ç”¨åˆ°çš„å·¥å…·äº†ï¼ŒJava1.5æä¾›äº†ä¸€ä¸ªéå¸¸é«˜æ•ˆå®ç”¨çš„<code>å¤šçº¿ç¨‹åŒ…:java.util.concurrent</code>, æä¾›äº†å¤§é‡é«˜çº§å·¥å…·,å¯ä»¥å¸®åŠ©å¼€å‘è€…ç¼–å†™é«˜æ•ˆã€æ˜“ç»´æŠ¤ã€ç»“æ„æ¸…æ™°çš„Javaå¤šçº¿ç¨‹ç¨‹åºã€‚</p><h5 id="1-ThreadLocalç±»"><a href="#1-ThreadLocalç±»" class="headerlink" title="1.ThreadLocalç±»"></a><strong>1.ThreadLocalç±»</strong></h5><p>ç”¨å¤„ï¼šä¿å­˜çº¿ç¨‹çš„ç‹¬ç«‹å˜é‡ã€‚å¯¹ä¸€ä¸ªçº¿ç¨‹ç±»ï¼ˆç»§æ‰¿è‡ªThread)<br>å½“ä½¿ç”¨ThreadLocalç»´æŠ¤å˜é‡æ—¶ï¼ŒThreadLocalä¸ºæ¯ä¸ªä½¿ç”¨è¯¥å˜é‡çš„çº¿ç¨‹æä¾›ç‹¬ç«‹çš„å˜é‡å‰¯æœ¬ï¼Œæ‰€ä»¥æ¯ä¸€ä¸ªçº¿ç¨‹éƒ½å¯ä»¥ç‹¬ç«‹åœ°æ”¹å˜è‡ªå·±çš„å‰¯æœ¬ï¼Œè€Œä¸ä¼šå½±å“å…¶å®ƒçº¿ç¨‹æ‰€å¯¹åº”çš„å‰¯æœ¬ã€‚å¸¸ç”¨äºç”¨æˆ·ç™»å½•æ§åˆ¶ï¼Œå¦‚è®°å½•sessionä¿¡æ¯ã€‚</p><p>å®ç°ï¼šæ¯ä¸ªThreadéƒ½æŒæœ‰ä¸€ä¸ªTreadLocalMapç±»å‹çš„å˜é‡ï¼ˆè¯¥ç±»æ˜¯ä¸€ä¸ªè½»é‡çº§çš„Mapï¼ŒåŠŸèƒ½ä¸mapä¸€æ ·ï¼ŒåŒºåˆ«æ˜¯æ¡¶é‡Œæ”¾çš„æ˜¯entryè€Œä¸æ˜¯entryçš„é“¾è¡¨ã€‚åŠŸèƒ½è¿˜æ˜¯ä¸€ä¸ªmapã€‚ï¼‰ä»¥æœ¬èº«ä¸ºkeyï¼Œä»¥ç›®æ ‡ä¸ºvalueã€‚<br>ä¸»è¦æ–¹æ³•æ˜¯get()å’Œset(T a)ï¼Œsetä¹‹ååœ¨mapé‡Œç»´æŠ¤ä¸€ä¸ªthreadLocal -&gt; aï¼Œgetæ—¶å°†aè¿”å›ã€‚ThreadLocalæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å®¹å™¨ã€‚</p><h5 id="2-åŸå­ç±»ï¼ˆAtomicIntegerã€AtomicBooleanâ€¦â€¦ï¼‰"><a href="#2-åŸå­ç±»ï¼ˆAtomicIntegerã€AtomicBooleanâ€¦â€¦ï¼‰" class="headerlink" title="2.åŸå­ç±»ï¼ˆAtomicIntegerã€AtomicBooleanâ€¦â€¦ï¼‰"></a><strong>2.åŸå­ç±»ï¼ˆAtomicIntegerã€AtomicBooleanâ€¦â€¦ï¼‰</strong></h5><p>å¦‚æœä½¿ç”¨atomic wrapper classå¦‚atomicIntegerï¼Œæˆ–è€…ä½¿ç”¨è‡ªå·±ä¿è¯åŸå­çš„æ“ä½œï¼Œåˆ™ç­‰åŒäºsynchronized</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-comment">//è¿”å›å€¼ä¸ºboolean</span><br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">AtomicInteger</span>.</span></span>compare<span class="hljs-constructor">AndSet(<span class="hljs-params">int</span> <span class="hljs-params">expect</span>,<span class="hljs-params">int</span> <span class="hljs-params">update</span>)</span><br></code></pre></td></tr></table></figure><p>è¯¥æ–¹æ³•å¯ç”¨äº<code>å®ç°ä¹è§‚é”</code>ï¼Œè€ƒè™‘æ–‡ä¸­æœ€åˆæåˆ°çš„å¦‚ä¸‹åœºæ™¯ï¼šaç»™bä»˜æ¬¾10å…ƒï¼Œaæ‰£äº†10å…ƒï¼Œbè¦åŠ 10å…ƒã€‚æ­¤æ—¶cç»™b2å…ƒï¼Œä½†æ˜¯bçš„åŠ åå…ƒä»£ç çº¦ä¸ºï¼š</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-keyword">if</span>(b.value.compare<span class="hljs-constructor">AndSet(<span class="hljs-params">old</span>, <span class="hljs-params">value</span>)</span>)&#123;<br>   return ;<br>&#125;<span class="hljs-keyword">else</span>&#123;<br>   <span class="hljs-comment">//try again</span><br>   <span class="hljs-comment">//if that fails, rollback and log</span><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>AtomicReference</strong><br>å¯¹äºAtomicReference æ¥è®²ï¼Œä¹Ÿè®¸å¯¹è±¡ä¼šå‡ºç°ï¼Œå±æ€§ä¸¢å¤±çš„æƒ…å†µï¼Œå³oldObject == currentï¼Œä½†æ˜¯oldObject.getPropertyA != current.getPropertyAã€‚<br>è¿™æ—¶å€™ï¼ŒAtomicStampedReferenceå°±æ´¾ä¸Šç”¨åœºäº†ã€‚è¿™ä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆå¸¸ç”¨çš„æ€è·¯ï¼Œå³åŠ ä¸Šç‰ˆæœ¬å·</p><h5 id="3-Lockç±»"><a href="#3-Lockç±»" class="headerlink" title="3.Lockç±»"></a><strong>3.Lockç±»</strong></h5><p>lock: åœ¨java.util.concurrent.locksåŒ…å†…ã€‚å…±æœ‰ä¸‰ä¸ªç±»ï¼š</p><figure class="highlight julia"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs julia"><span class="hljs-built_in">ReentrantLock</span><br>ReentrantReadWriteLock<br>ReentrantReadWriteLock.ReadLock<br>ReentrantReadWriteLock.WriteLock<br></code></pre></td></tr></table></figure><p>ä¸»è¦ç›®çš„æ˜¯å’Œsynchronizedä¸€æ ·ï¼Œ ä¸¤è€…éƒ½æ˜¯ä¸ºäº†è§£å†³åŒæ­¥é—®é¢˜ï¼Œå¤„ç†èµ„æºäº‰ç«¯è€Œäº§ç”Ÿçš„æŠ€æœ¯ã€‚åŠŸèƒ½ç±»ä¼¼ä½†æœ‰ä¸€äº›åŒºåˆ«ã€‚</p><p>åŒºåˆ«å¦‚ä¸‹ï¼š</p><blockquote><p>lockæ›´çµæ´»ï¼Œå¯ä»¥è‡ªç”±å®šä¹‰å¤šæŠŠé”çš„åŠ é”è§£é”é¡ºåºï¼ˆsynchronizedè¦æŒ‰ç…§å…ˆåŠ çš„åè§£é¡ºåºï¼‰ æä¾›å¤šç§åŠ é”æ–¹æ¡ˆï¼Œ<code>lock é˜»å¡å¼</code>,<code> trylock æ— é˜»å¡å¼</code>, <code>lockInterruptily å¯æ‰“æ–­å¼</code>ï¼Œ è¿˜æœ‰<code>trylockçš„å¸¦è¶…æ—¶æ—¶é—´ç‰ˆæœ¬</code>ã€‚ æœ¬è´¨ä¸Šå’Œç›‘è§†å™¨é”ï¼ˆå³synchronizedæ˜¯ä¸€æ ·çš„ï¼‰ èƒ½åŠ›è¶Šå¤§ï¼Œè´£ä»»è¶Šå¤§ï¼Œå¿…é¡»æ§åˆ¶å¥½åŠ é”å’Œè§£é”ï¼Œå¦åˆ™ä¼šå¯¼è‡´ç¾éš¾ã€‚ å’ŒConditionç±»çš„ç»“åˆã€‚ æ€§èƒ½æ›´é«˜ï¼Œå¯¹æ¯”å¦‚ä¸‹å›¾ï¼š(Throughputååé‡)</p><p><img src="/2019/11/12/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/thre.png" alt="img"></p><p>synchronizedå’ŒLockæ€§èƒ½å¯¹æ¯”</p></blockquote><h6 id="ReentrantLock"><a href="#ReentrantLock" class="headerlink" title="ReentrantLock"></a><strong>ReentrantLock</strong></h6><p>å¯é‡å…¥çš„æ„ä¹‰åœ¨äºæŒæœ‰é”çš„çº¿ç¨‹å¯ä»¥ç»§ç»­æŒæœ‰ï¼Œå¹¶ä¸”è¦é‡Šæ”¾å¯¹ç­‰çš„æ¬¡æ•°åæ‰çœŸæ­£é‡Šæ”¾è¯¥é”ã€‚<br>ä½¿ç”¨æ–¹æ³•æ˜¯ï¼š</p><blockquote><p>1.å…ˆnewä¸€ä¸ªå®ä¾‹</p><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs haxe"><span class="hljs-keyword">static</span> ReentrantLock r=<span class="hljs-keyword">new</span> <span class="hljs-type">ReentrantLock</span>();<br></code></pre></td></tr></table></figure><p>2.åŠ é”</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-tag">r</span><span class="hljs-selector-class">.lock</span>()æˆ–<span class="hljs-selector-tag">r</span><span class="hljs-selector-class">.lockInterruptibly</span>();<br></code></pre></td></tr></table></figure><p>æ­¤å¤„ä¹Ÿæ˜¯ä¸ªä¸åŒï¼Œåè€…å¯è¢«æ‰“æ–­ã€‚å½“açº¿ç¨‹lockåï¼Œbçº¿ç¨‹é˜»å¡ï¼Œæ­¤æ—¶å¦‚æœæ˜¯lockInterruptiblyï¼Œé‚£ä¹ˆåœ¨è°ƒç”¨b.interrupt()ä¹‹åï¼Œbçº¿ç¨‹é€€å‡ºé˜»å¡ï¼Œå¹¶æ”¾å¼ƒå¯¹èµ„æºçš„äº‰æŠ¢ï¼Œè¿›å…¥catchå—ã€‚ï¼ˆå¦‚æœä½¿ç”¨åè€…ï¼Œå¿…é¡»throw interruptable exception æˆ–catchï¼‰ã€€ã€€ã€€ã€€</p><p>3.é‡Šæ”¾é”ã€€ã€€ã€€</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-tag">r</span><span class="hljs-selector-class">.unlock</span>()<br></code></pre></td></tr></table></figure><p><code>å¿…é¡»åšï¼ä½•ä¸ºå¿…é¡»åšå‘¢ï¼Œè¦æ”¾åœ¨finallyé‡Œé¢ã€‚</code>ä»¥é˜²æ­¢å¼‚å¸¸è·³å‡ºäº†æ­£å¸¸æµç¨‹ï¼Œå¯¼è‡´ç¾éš¾ã€‚è¿™é‡Œè¡¥å……ä¸€ä¸ªå°çŸ¥è¯†ç‚¹ï¼Œfinallyæ˜¯å¯ä»¥ä¿¡ä»»çš„ï¼šç»è¿‡æµ‹è¯•ï¼Œå“ªæ€•æ˜¯å‘ç”Ÿäº†OutofMemoryErrorï¼Œfinallyå—ä¸­çš„è¯­å¥æ‰§è¡Œä¹Ÿèƒ½å¤Ÿå¾—åˆ°ä¿è¯ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> cn.kongwei_liao.ThreadsDemo;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyReentrantLock</span></span>&#123;<br><br><span class="hljs-keyword">boolean</span> isLocked = <span class="hljs-keyword">false</span>;<br>    Thread  lockedBy = <span class="hljs-keyword">null</span>;<br>    <span class="hljs-keyword">int</span> lockedCount = <span class="hljs-number">0</span>;<br> <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title">lock</span><span class="hljs-params">()</span></span>&#123;<br>        Thread callingThread = Thread.currentThread();<br>        <span class="hljs-keyword">while</span>(isLocked &amp;&amp; lockedBy != callingThread)&#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>wait();<br>&#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br><span class="hljs-comment">// TODO Auto-generated catch block</span><br>e.printStackTrace();<br>&#125;<br>        &#125;<br>        isLocked = <span class="hljs-keyword">true</span>;<br>        lockedCount++;<br>        lockedBy = callingThread;<br>    &#125;<br> <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title">unlock</span><span class="hljs-params">()</span></span>&#123;<br>        <span class="hljs-keyword">if</span>(Thread.currentThread() == <span class="hljs-keyword">this</span>.lockedBy)&#123;<br>            lockedCount--;<br>            <span class="hljs-keyword">if</span>(lockedCount == <span class="hljs-number">0</span>)&#123;<br>                isLocked = <span class="hljs-keyword">false</span>;<br>                notify();<br>            &#125;<br>        &#125;<br>    &#125;<br><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br><span class="hljs-comment">// TODO Auto-generated method stub</span><br>MyReentrantLock mrl=<span class="hljs-keyword">new</span> MyReentrantLock();<br>mrl.lock();<br><span class="hljs-keyword">try</span> &#123;<br><br>&#125;<span class="hljs-keyword">finally</span> &#123;<br>mrl.unlock();<br>&#125;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure></blockquote><h6 id="ReentrantReadWriteLock"><a href="#ReentrantReadWriteLock" class="headerlink" title="ReentrantReadWriteLock"></a><strong>ReentrantReadWriteLock</strong></h6><p>å¯é‡å…¥è¯»å†™é”ï¼ˆè¯»å†™é”çš„ä¸€ä¸ªå®ç°ï¼‰</p><figure class="highlight cos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cos">ReentrantReadWriteLock <span class="hljs-keyword">lock</span> = <span class="hljs-keyword">new</span> ReentrantReadWriteLock()<br>ReadLock <span class="hljs-keyword">r</span> = <span class="hljs-keyword">lock</span>.readLock()<span class="hljs-comment">;</span><br>WriteLock <span class="hljs-keyword">w</span> = <span class="hljs-keyword">lock</span>.writeLock()<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><p>ä¸¤è€…éƒ½æœ‰lock,unlockæ–¹æ³•ã€‚å†™å†™ï¼Œå†™è¯»äº’æ–¥ï¼›è¯»è¯»ä¸äº’æ–¥ã€‚å¯ä»¥å®ç°å¹¶å‘è¯»çš„é«˜æ•ˆçº¿ç¨‹å®‰å…¨ä»£ç </p><h5 id="4-å®¹å™¨ç±»"><a href="#4-å®¹å™¨ç±»" class="headerlink" title="4.å®¹å™¨ç±»"></a><strong>4.å®¹å™¨ç±»</strong></h5><p>è¿™é‡Œå°±è®¨è®ºæ¯”è¾ƒå¸¸ç”¨çš„ä¸¤ä¸ªï¼š</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">BlockingQueue</span><br><span class="hljs-attribute">ConcurrentHashMap</span><br></code></pre></td></tr></table></figure><h6 id="BlockingQueue"><a href="#BlockingQueue" class="headerlink" title="BlockingQueue"></a><strong>BlockingQueue</strong></h6><p>é˜»å¡é˜Ÿåˆ—ã€‚è¯¥ç±»æ˜¯java.util.concurrentåŒ…ä¸‹çš„é‡è¦ç±»ï¼Œé€šè¿‡å¯¹Queueçš„å­¦ä¹ å¯ä»¥å¾—çŸ¥ï¼Œè¿™ä¸ªqueueæ˜¯å•å‘é˜Ÿåˆ—ï¼Œå¯ä»¥åœ¨é˜Ÿåˆ—å¤´æ·»åŠ å…ƒç´ å’Œåœ¨é˜Ÿå°¾åˆ é™¤æˆ–å–å‡ºå…ƒç´ ã€‚ç±»ä¼¼äºä¸€ä¸ªç®¡é“ï¼Œç‰¹åˆ«é€‚ç”¨äºå…ˆè¿›å…ˆå‡ºç­–ç•¥çš„ä¸€äº›åº”ç”¨åœºæ™¯ã€‚æ™®é€šçš„queueæ¥å£ä¸»è¦å®ç°æœ‰PriorityQueueï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰ï¼Œæœ‰å…´è¶£å¯ä»¥ç ”ç©¶</p><p>BlockingQueueåœ¨é˜Ÿåˆ—çš„åŸºç¡€ä¸Šæ·»åŠ äº†å¤šçº¿ç¨‹åä½œçš„åŠŸèƒ½ï¼š</p><p><img src="/2019/11/12/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/contain.png" alt="img"></p><p>BlockingQueue<br>é™¤äº†ä¼ ç»Ÿçš„queueåŠŸèƒ½ï¼ˆè¡¨æ ¼å·¦è¾¹çš„ä¸¤åˆ—ï¼‰ä¹‹å¤–ï¼Œè¿˜æä¾›äº†é˜»å¡æ¥å£putå’Œtakeï¼Œå¸¦è¶…æ—¶åŠŸèƒ½çš„é˜»å¡æ¥å£offerå’Œpollã€‚putä¼šåœ¨é˜Ÿåˆ—æ»¡çš„æ—¶å€™é˜»å¡ï¼Œç›´åˆ°æœ‰ç©ºé—´æ—¶è¢«å”¤é†’ï¼›takeåœ¨é˜Ÿåˆ—ç©ºçš„æ—¶å€™é˜»å¡ï¼Œç›´åˆ°æœ‰ä¸œè¥¿æ‹¿çš„æ—¶å€™æ‰è¢«å”¤é†’ã€‚ç”¨äºç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹å°¤å…¶å¥½ç”¨ï¼Œå ªç§°ç¥å™¨ã€‚</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BlockingQueue</span> &#123;</span><br>    <span class="hljs-keyword">private</span> List <span class="hljs-built_in">queue</span> = <span class="hljs-keyword">new</span> LinkedList();<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> limit = <span class="hljs-number">10</span>;<br> <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">BlockingQueue</span><span class="hljs-params">(<span class="hljs-keyword">int</span> limit)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.limit = limit;<br>    &#125;<br> <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> synchronized <span class="hljs-keyword">void</span> <span class="hljs-title">enqueue</span><span class="hljs-params">(Object item)</span> throws InterruptedException </span>&#123;<br>        <span class="hljs-keyword">while</span> (<span class="hljs-keyword">this</span>.<span class="hljs-built_in">queue</span>.<span class="hljs-built_in">size</span>() == <span class="hljs-keyword">this</span>.limit) &#123;<br>            wait();<br>        &#125;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.<span class="hljs-built_in">queue</span>.<span class="hljs-built_in">size</span>() == <span class="hljs-number">0</span>) &#123;<br>            notifyAll();<br>        &#125;<br>        <span class="hljs-keyword">this</span>.<span class="hljs-built_in">queue</span>.add(item);<br>    &#125;<br> <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> synchronized Object <span class="hljs-title">dequeue</span><span class="hljs-params">()</span> throws InterruptedException </span>&#123;<br>        <span class="hljs-keyword">while</span> (<span class="hljs-keyword">this</span>.<span class="hljs-built_in">queue</span>.<span class="hljs-built_in">size</span>() == <span class="hljs-number">0</span>) &#123;<br>            wait();<br>        &#125;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.<span class="hljs-built_in">queue</span>.<span class="hljs-built_in">size</span>() == <span class="hljs-keyword">this</span>.limit) &#123;<br>            notifyAll();<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.<span class="hljs-built_in">queue</span>.<span class="hljs-built_in">remove</span>(<span class="hljs-number">0</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å¸¸è§çš„é˜»å¡é˜Ÿåˆ—æœ‰ï¼š</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">ArrayListBlockingQueue</span><br><span class="hljs-attribute">LinkedListBlockingQueue</span><br><span class="hljs-attribute">DelayQueue</span><br><span class="hljs-attribute">SynchronousQueue</span><br></code></pre></td></tr></table></figure><h6 id="ConcurrentHashMap"><a href="#ConcurrentHashMap" class="headerlink" title="ConcurrentHashMap"></a><strong>ConcurrentHashMap</strong></h6><p>é«˜æ•ˆçš„çº¿ç¨‹å®‰å…¨å“ˆå¸Œmapã€‚è¯·å¯¹æ¯”hashTable , concurrentHashMap, HashMap</p><h5 id="5-ä¿¡å·é‡"><a href="#5-ä¿¡å·é‡" class="headerlink" title="5.ä¿¡å·é‡"></a><strong>5.ä¿¡å·é‡</strong></h5><p>java.util.concurrent.Semaphore</p><h5 id="6-ç®¡ç†ç±»"><a href="#6-ç®¡ç†ç±»" class="headerlink" title="6.ç®¡ç†ç±»"></a><strong>6.ç®¡ç†ç±»</strong></h5><p>ç®¡ç†ç±»çš„æ¦‚å¿µæ¯”è¾ƒæ³›ï¼Œç”¨äºç®¡ç†çº¿ç¨‹ï¼Œæœ¬èº«ä¸æ˜¯å¤šçº¿ç¨‹çš„ï¼Œä½†æä¾›äº†ä¸€äº›æœºåˆ¶æ¥åˆ©ç”¨ä¸Šè¿°çš„å·¥å…·åšä¸€äº›å°è£…ã€‚<br>äº†è§£åˆ°çš„å€¼å¾—ä¸€æçš„ç®¡ç†ç±»ï¼šThreadPoolExecutorå’Œ JMXæ¡†æ¶ä¸‹çš„ç³»ç»Ÿçº§ç®¡ç†ç±» ThreadMXBean<br><strong>ThreadPoolExecutor</strong><br>å¦‚æœä¸äº†è§£è¿™ä¸ªç±»ï¼Œåº”è¯¥äº†è§£å‰é¢æåˆ°çš„ExecutorServiceï¼Œå¼€ä¸€ä¸ªè‡ªå·±çš„çº¿ç¨‹æ± éå¸¸æ–¹ä¾¿ï¼š</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">ExecutorService e = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Executors</span>.</span></span><span class="hljs-keyword">new</span><span class="hljs-constructor">CachedThreadPool()</span>;<br>ExecutorService e = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Executors</span>.</span></span><span class="hljs-keyword">new</span><span class="hljs-constructor">SingleThreadExecutor()</span>;<br>ExecutorService e = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Executors</span>.</span></span><span class="hljs-keyword">new</span><span class="hljs-constructor">FixedThreadPool(3)</span>;<br><span class="hljs-comment">// ç¬¬ä¸€ç§æ˜¯å¯å˜å¤§å°çº¿ç¨‹æ± ï¼ŒæŒ‰ç…§ä»»åŠ¡æ•°æ¥åˆ†é…çº¿ç¨‹ï¼Œ</span><br><span class="hljs-comment">// ç¬¬äºŒç§æ˜¯å•çº¿ç¨‹æ± ï¼Œç›¸å½“äºFixedThreadPool(1)</span><br><span class="hljs-comment">// ç¬¬ä¸‰ç§æ˜¯å›ºå®šå¤§å°çº¿ç¨‹æ± ã€‚</span><br><span class="hljs-comment">// ç„¶åè¿è¡Œ</span><br>e.execute(<span class="hljs-keyword">new</span> <span class="hljs-constructor">MyRunnableImpl()</span>);<br></code></pre></td></tr></table></figure><p>è¯¥ç±»å†…éƒ¨æ˜¯é€šè¿‡ThreadPoolExecutorå®ç°çš„ï¼ŒæŒæ¡è¯¥ç±»æœ‰åŠ©äºç†è§£çº¿ç¨‹æ± çš„ç®¡ç†ï¼Œæœ¬è´¨ä¸Šï¼Œä»–ä»¬éƒ½æ˜¯ThreadPoolExecutorç±»çš„å„ç§å®ç°ç‰ˆæœ¬ã€‚è¯·å‚è§javadocï¼š</p><p><img src="/2019/11/12/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/javadoc.png" alt="img"></p><p>ThreadPoolExecutorå‚æ•°è§£é‡Š</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-symbol">corePoolSize:</span>æ± å†…çº¿ç¨‹åˆå§‹å€¼ä¸æœ€å°å€¼ï¼Œå°±ç®—æ˜¯ç©ºé—²çŠ¶æ€ï¼Œä¹Ÿä¼šä¿æŒè¯¥æ•°é‡çº¿ç¨‹ã€‚<br><span class="hljs-symbol">maximumPoolSize:</span>çº¿ç¨‹æœ€å¤§å€¼ï¼Œçº¿ç¨‹çš„å¢é•¿å§‹ç»ˆä¸ä¼šè¶…è¿‡è¯¥å€¼ã€‚<br>keepAliveTimeï¼šå½“æ± å†…çº¿ç¨‹æ•°é«˜äºcorePoolSizeæ—¶ï¼Œç»è¿‡å¤šå°‘æ—¶é—´å¤šä½™çš„ç©ºé—²çº¿ç¨‹æ‰ä¼šè¢«å›æ”¶ã€‚å›æ”¶å‰å¤„äºwaitçŠ¶æ€<br>unitï¼š<br>æ—¶é—´å•ä½ï¼Œå¯ä»¥ä½¿ç”¨TimeUnitçš„å®ä¾‹ï¼Œå¦‚TimeUnit.MILLISECONDSã€€<br><span class="hljs-symbol">workQueue:</span>å¾…å…¥ä»»åŠ¡ï¼ˆRunnableï¼‰çš„ç­‰å¾…åœºæ‰€ï¼Œè¯¥å‚æ•°ä¸»è¦å½±å“è°ƒåº¦ç­–ç•¥ï¼Œå¦‚å…¬å¹³ä¸å¦ï¼Œæ˜¯å¦äº§ç”Ÿé¥¿æ­»(starving)<br><span class="hljs-symbol">threadFactory:</span>çº¿ç¨‹å·¥å‚ç±»ï¼Œæœ‰é»˜è®¤å®ç°ï¼Œå¦‚æœæœ‰è‡ªå®šä¹‰çš„éœ€è¦åˆ™éœ€è¦è‡ªå·±å®ç°ThreadFactoryæ¥å£å¹¶ä½œä¸ºå‚æ•°ä¼ å…¥ã€‚<br></code></pre></td></tr></table></figure><p>Javaé€šè¿‡Executorsæä¾›å››ç§çº¿ç¨‹æ± ï¼Œåˆ†åˆ«ä¸ºï¼š</p><blockquote><p>newCachedThreadPool</p><p>åˆ›å»ºä¸€ä¸ªå¯ç¼“å­˜çš„çº¿ç¨‹æ± ã€‚å¦‚æœçº¿ç¨‹æ± çš„å¤§å°è¶…è¿‡äº†å¤„ç†ä»»åŠ¡æ‰€éœ€è¦çš„çº¿ç¨‹ï¼Œé‚£ä¹ˆå°±ä¼šå›æ”¶éƒ¨åˆ†ç©ºé—²ï¼ˆ60ç§’ä¸æ‰§è¡Œä»»åŠ¡ï¼‰çš„çº¿ç¨‹ï¼Œå½“ä»»åŠ¡æ•°å¢åŠ æ—¶ï¼Œæ­¤çº¿ç¨‹æ± åˆå¯ä»¥æ™ºèƒ½çš„æ·»åŠ æ–°çº¿ç¨‹æ¥å¤„ç†ä»»åŠ¡ã€‚æ­¤çº¿ç¨‹æ± ä¸ä¼šå¯¹çº¿ç¨‹æ± å¤§å°åšé™åˆ¶ï¼Œçº¿ç¨‹æ± å¤§å°å®Œå…¨ä¾èµ–äºæ“ä½œç³»ç»Ÿï¼ˆæˆ–è€…è¯´JVMï¼‰èƒ½å¤Ÿåˆ›å»ºçš„æœ€å¤§çº¿ç¨‹å¤§å°ã€‚</p><p>newFixedThreadPool </p><p>åˆ›å»ºå›ºå®šå¤§å°çš„çº¿ç¨‹æ± ã€‚æ¯æ¬¡æäº¤ä¸€ä¸ªä»»åŠ¡å°±åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œç›´åˆ°çº¿ç¨‹è¾¾åˆ°çº¿ç¨‹æ± çš„æœ€å¤§å¤§å°ã€‚çº¿ç¨‹æ± çš„å¤§å°ä¸€æ—¦è¾¾åˆ°æœ€å¤§å€¼å°±ä¼šä¿æŒä¸å˜ï¼Œå¦‚æœæŸä¸ªçº¿ç¨‹å› ä¸ºæ‰§è¡Œå¼‚å¸¸è€Œç»“æŸï¼Œé‚£ä¹ˆçº¿ç¨‹æ± ä¼šè¡¥å……ä¸€ä¸ªæ–°çº¿ç¨‹ã€‚</p><p>newScheduledThreadPool </p><p>åˆ›å»ºä¸€ä¸ªå¤§å°æ— é™åˆ¶çš„çº¿ç¨‹æ± ã€‚æ­¤çº¿ç¨‹æ± æ”¯æŒå®šæ—¶ä»¥åŠå‘¨æœŸæ€§æ‰§è¡Œä»»åŠ¡ã€‚</p><p>newSingleThreadExecutor</p><p>åˆ›å»ºä¸€ä¸ªå•çº¿ç¨‹çš„çº¿ç¨‹æ± ã€‚æ­¤çº¿ç¨‹æ± æ”¯æŒå®šæ—¶ä»¥åŠå‘¨æœŸæ€§æ‰§è¡Œä»»åŠ¡ã€‚è¿™ä¸ªçº¿ç¨‹æ± åªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨å·¥ä½œï¼Œä¹Ÿå°±æ˜¯ç›¸å½“äºå•çº¿ç¨‹ä¸²è¡Œæ‰§è¡Œæ‰€æœ‰ä»»åŠ¡ã€‚å¦‚æœè¿™ä¸ªå”¯ä¸€çš„çº¿ç¨‹å› ä¸ºå¼‚å¸¸ç»“æŸï¼Œé‚£ä¹ˆä¼šæœ‰ä¸€ä¸ªæ–°çš„çº¿ç¨‹æ¥æ›¿ä»£å®ƒã€‚æ­¤çº¿ç¨‹æ± ä¿è¯æ‰€æœ‰ä»»åŠ¡çš„æ‰§è¡Œé¡ºåºæŒ‰ç…§ä»»åŠ¡çš„æäº¤é¡ºåºæ‰§è¡Œã€‚</p></blockquote><p><img src="/2019/11/12/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/Snipaste_2019-11-13_09-26-28.png" alt="i"></p>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å¤šçº¿ç¨‹</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Javaæ³›å‹</title>
    <link href="/2019/11/12/Java%E6%B3%9B%E5%9E%8B/"/>
    <url>/2019/11/12/Java%E6%B3%9B%E5%9E%8B/</url>
    
    <content type="html"><![CDATA[<h3 id="æ³›å‹"><a href="#æ³›å‹" class="headerlink" title="æ³›å‹"></a>æ³›å‹</h3><h4 id="å•¥æ˜¯æ³›å‹ï¼Ÿ"><a href="#å•¥æ˜¯æ³›å‹ï¼Ÿ" class="headerlink" title="å•¥æ˜¯æ³›å‹ï¼Ÿ"></a>å•¥æ˜¯æ³›å‹ï¼Ÿ</h4><p>æ³›å‹æ˜¯Java SE 1.5çš„æ–°ç‰¹æ€§ï¼Œæ³›å‹çš„æœ¬è´¨æ˜¯å‚æ•°åŒ–ç±»å‹ï¼Œä¹Ÿå°±æ˜¯è¯´æ‰€æ“ä½œçš„æ•°æ®ç±»å‹è¢«æŒ‡å®šä¸ºä¸€ä¸ªå‚æ•°ã€‚è¿™ç§å‚æ•°ç±»å‹å¯ä»¥ç”¨åœ¨ç±»ã€æ¥å£å’Œæ–¹æ³•çš„åˆ›å»ºä¸­ï¼Œåˆ†åˆ«ç§°ä¸ºæ³›å‹ç±»ã€æ³›å‹æ¥å£ã€æ³›å‹æ–¹æ³•ã€‚ Javaè¯­è¨€å¼•å…¥æ³›å‹çš„å¥½å¤„æ˜¯å®‰å…¨ç®€å•ã€‚</p><p>ç®€å•çš„ç†è§£ï¼šå°±æ˜¯åœ¨è®¾è®¡ç±»ï¼ˆæ¥å£ç­‰ï¼‰çš„æ—¶å€™ï¼Œæ²¡æœ‰ç»™è§„å®šå…·ä½“æ˜¯ä»€ä¹ˆç±»å‹çš„å‚æ•°ï¼Œåœ¨å®ä¾‹åŒ–æˆ–è°ƒç”¨çš„æ—¶å€™å†ä¼ å…¥å…·ä½“çš„ç±»å‹ï¼Œå‘Šè¯‰ç¼–è¯‘å™¨è¿™æ˜¯ä»€ä¹ˆç±»å‹ã€‚</p><p>æ³¨æ„ï¼š</p><ol><li><p>æ³›å‹ä¸ä¼šå½±å“ç¨‹åºçš„è¿è¡Œçš„é€Ÿåº¦ï¼Œå› ä¸ºåœ¨ç¼–è¯‘æœŸå°±ä¼šç›´æ¥ç¼–è¯‘æˆå…·ä½“çš„ç±»å‹ã€‚</p></li><li><p>ä½¿ç”¨æ³›å‹çš„æ–¹æ³•æˆ–å®ä¾‹åŒ–æ³›å‹çš„ç±»ï¼Œåªèƒ½ç”¨ä¼ å…¥å¼•ç”¨æ•°æ®ç±»å‹ï¼Œä¸èƒ½ä¼ å…¥åŸºæœ¬æ•°æ®ç±»å‹</p></li></ol><h4 id="è§„åˆ™é™åˆ¶ï¼š"><a href="#è§„åˆ™é™åˆ¶ï¼š" class="headerlink" title="è§„åˆ™é™åˆ¶ï¼š"></a>è§„åˆ™é™åˆ¶ï¼š</h4><p>1ã€æ³›å‹çš„ç±»å‹å‚æ•°åªèƒ½æ˜¯ç±»ç±»å‹ï¼ˆåŒ…æ‹¬è‡ªå®šä¹‰ç±»ï¼‰ï¼Œä¸èƒ½æ˜¯ç®€å•ç±»å‹ã€‚<br>2ã€åŒä¸€ç§æ³›å‹å¯ä»¥å¯¹åº”å¤šä¸ªç‰ˆæœ¬ï¼ˆå› ä¸ºå‚æ•°ç±»å‹æ˜¯ä¸ç¡®å®šçš„ï¼‰ï¼Œä¸åŒç‰ˆæœ¬çš„æ³›å‹ç±»å®ä¾‹æ˜¯ä¸å…¼å®¹çš„ã€‚<br>3ã€æ³›å‹çš„ç±»å‹å‚æ•°å¯ä»¥æœ‰å¤šä¸ªã€‚<br>4ã€æ³›å‹çš„å‚æ•°ç±»å‹å¯ä»¥ä½¿ç”¨extendsè¯­å¥ï¼Œä¾‹å¦‚<T extends superclass>ã€‚ä¹ æƒ¯ä¸Šç§°ä¸ºâ€œæœ‰ç•Œç±»å‹â€ã€‚<br>5ã€æ³›å‹çš„å‚æ•°ç±»å‹è¿˜å¯ä»¥æ˜¯é€šé…ç¬¦ç±»å‹ã€‚ä¾‹å¦‚Class&lt;?&gt; classType = Class.forName(â€œjava.lang.Stringâ€);</T></p><p>æ³›å‹ä½œç”¨</p><p>æ³›å‹çš„ä½œç”¨ï¼šåœ¨ç¼–è¯‘çš„æ—¶å€™æ£€æŸ¥<a href="https://baike.baidu.com/item/%E7%B1%BB%E5%9E%8B%E5%AE%89%E5%85%A8/7308285">ç±»å‹å®‰å…¨</a>ï¼Œå¹¶ä¸”æ‰€æœ‰çš„<a href="https://baike.baidu.com/item/%E5%BC%BA%E5%88%B6%E8%BD%AC%E6%8D%A2/4463315">å¼ºåˆ¶è½¬æ¢</a>éƒ½æ˜¯è‡ªåŠ¨å’Œ<a href="https://baike.baidu.com/item/%E9%9A%90%E5%BC%8F/957024">éšå¼</a>çš„ï¼Œä»¥æé«˜ä»£ç çš„é‡ç”¨ç‡ã€‚</p><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs processing"><span class="hljs-comment">// å‡†å¤‡ä¸€ä¸ªListç”¨æ¥å­˜å‚¨å…¬å¸å‘˜å·¥å¯¹è±¡  å‡è®¾æœ‰ä¸€ä¸ªç±» Employee</span><br>List  emp = <span class="hljs-keyword">new</span> ArrayList();<br>emp.<span class="hljs-built_in">add</span>(<span class="hljs-keyword">new</span> Employee(<span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>));<br>emp.<span class="hljs-built_in">add</span>(<span class="hljs-keyword">new</span> Employee(<span class="hljs-string">&quot;æä¸‰&quot;</span>));<br>emp.<span class="hljs-built_in">add</span>(<span class="hljs-keyword">new</span> Employee(<span class="hljs-string">&quot;ç‹ä¸‰&quot;</span>));<br>ç”±äºListä¸­å¯ä»¥å­˜å‚¨ä»»æ„ç±»å‹çš„æ•°æ®ï¼Œå› æ­¤å¯ä»¥è¿™æ ·<br>emp.<span class="hljs-built_in">add</span>(<span class="hljs-string">&quot;ç‹éº»å­&quot;</span>);<br>emp.<span class="hljs-built_in">add</span>(<span class="hljs-keyword">new</span> Dog(<span class="hljs-string">&quot;æ—ºè´¢&quot;</span>));<br><br><br><span class="hljs-comment">// å†™ä¸€ä¸ªå‘å·¥èµ„çš„æ–¹æ³•</span><br><span class="hljs-keyword">for</span>(<span class="hljs-keyword">Object</span> o : emp)&#123;<br>syso(<span class="hljs-string">&quot;ç»™&quot;</span>+o.getName() + <span class="hljs-number">50000</span>);<br>&#125;<br><span class="hljs-comment">/*</span><br><span class="hljs-comment">ä¸Šé¢ä»£ç å¯èƒ½å¼•å‘çš„é—®é¢˜ï¼š å½“æˆ‘ä»¬è·å¾—ä¸€ä¸ªå­—ç¬¦ä¸²  æˆ–è€…ä¸€æ¡ç‹—çš„æ—¶å€™å¯èƒ½å°±è°ƒç”¨ä¸å‡ºæ¥getName()æ–¹æ³•</span><br><span class="hljs-comment">ç»“æœï¼š ä»ä¸šåŠ¡ä¸Šæ¥è®²ï¼Œempé›†åˆä¸­åªåº”è¯¥æ”¾Employeeç±»å‹çš„æ•°æ®ï¼Œä½†æ˜¯Listå¯ä»¥æ”¾ä»»æ„çš„ç±»å‹çš„æ•°æ®ï¼Œåœ¨ç¼–è¯‘çš„æ—¶å€™æˆ‘ä»¬æ— æ³•é˜»æ­¢</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">å¦‚ä½•è§£å†³ï¼Ÿä½¿ç”¨æ³›å‹  ---ã€‹é™å®šæˆ‘ä»¬ä¸Šé¢çš„empä¸­åªèƒ½å¤Ÿæ”¾Employee</span><br><span class="hljs-comment">List&lt;Employee&gt;  emp = new ArrayList&lt;Employee&gt;();</span><br><span class="hljs-comment">*/</span><br><br></code></pre></td></tr></table></figure><h4 id="æ³›å‹ç±»ï¼ˆæ¥å£ï¼‰çš„è®¾è®¡"><a href="#æ³›å‹ç±»ï¼ˆæ¥å£ï¼‰çš„è®¾è®¡" class="headerlink" title="æ³›å‹ç±»ï¼ˆæ¥å£ï¼‰çš„è®¾è®¡"></a>æ³›å‹ç±»ï¼ˆæ¥å£ï¼‰çš„è®¾è®¡</h4><p>éœ€æ±‚ï¼šè®¾è®¡ä¸€ä¸ªç‚¹ç±»Point,å…¶ä¸­è®¾è®¡å­—æ®µ x y;</p><p>é—®é¢˜ï¼šé‡Œé¢çš„å­—æ®µx y ä½¿ç”¨ä»€ä¹ˆç±»å‹å¥½å‘¢ï¼Ÿ double  int  ã€‚ã€‚ã€‚</p><p>æ•ˆæœï¼šéœ€è¦è®¾è®¡ä¸Šé¢çš„ç±»ï¼Œæ»¡è¶³ä¸åŒçš„äººçš„éœ€æ±‚ï¼Œæœ‰äº›å¸Œæœ›ä½¿ç”¨double  int..</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-keyword">class</span> <span class="hljs-symbol">Point</span>&#123;<br>  <span class="hljs-built_in">double</span> x;<br>  <span class="hljs-built_in">double</span> y;<br>&#125;  <br><span class="hljs-keyword">class</span> <span class="hljs-symbol">Point</span>&#123;<br>  <span class="hljs-built_in">int</span> x;<br>  <span class="hljs-built_in">int</span> y;<br>&#125; <br><span class="hljs-comment">//ä¸€ä¸ªç±»æœ¬è´¨çœ‹æˆæ˜¯ä¸€ä¸ªæ¨¡æ¿ï¼Œç„¶åå¸Œæœ›æ˜¯ä¸€ä¸ªé€šç”¨çš„æ¨¡æ¿ï¼š</span><br><span class="hljs-keyword">class</span> <span class="hljs-symbol">Point</span>&#123;<br>  æ•°æ®ç±»å‹ x;<br>  æ•°æ®ç±»å‹ y;<br>&#125; <br></code></pre></td></tr></table></figure><p>å¸Œæœ›åœ¨è®¾è®¡ç±»çš„æ—¶å€™ï¼Œå…¶ä¸­çš„æ•°æ®ç±»å‹æˆ‘ä»¬å°±å†™ä¸€ä¸ªç¬¦å·ï¼Œæ³›æŒ‡æ‰€æœ‰çš„ç±»å‹ï¼Œä½†æ˜¯ä¸æŒ‡å…·ä½“çš„æŸç§ç±»å‹</p><p>å½“æœ‰äººä½¿ç”¨æˆ‘ä»¬ä¸Šé¢çš„æ¨¡æ¿æ¥åˆ›å»ºä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™ä»–ä»¬è‡ªå·±å¯ä»¥æŒ‡å®šè‡ªå·±çš„ç±»å‹</p><p>æ€ä¹ˆåšï¼š</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-keyword">class</span> <span class="hljs-symbol">Point</span>&lt;æ•°æ®ç±»å‹&gt;&#123;  <span class="hljs-comment">// è¡¨ç¤ºåœ¨ç±»å£°æ˜äº†ä¸€ä¸ªç¬¦å· æ•°æ®ç±»å‹ï¼Œæ˜¯ä¸€ç§æ³›æŒ‡</span><br>  æ•°æ®ç±»å‹ x;<br>  æ•°æ®ç±»å‹ y;<br>&#125; <br></code></pre></td></tr></table></figure><p>è§„èŒƒçš„å†™æ³•åº”è¯¥æ˜¯ä½¿ç”¨ä¸€äº›å­—æ¯ï¼ˆå¸¸è§çš„å­—æ¯ï¼‰ï¼š</p><p>E  Element å…ƒç´ </p><p>T  Type  ç±»å‹</p><p>K     Key   é”®</p><p>V  Value  å€¼</p><p>ä¹Ÿå¯ä»¥æ”¯æŒå¤šä¸ªæ³›å‹å‚æ•°ä¾‹å¦‚Map&lt;K,V&gt;</p><h4 id="æ³›å‹çš„å…·ä½“ä½¿ç”¨æ¡ˆä¾‹"><a href="#æ³›å‹çš„å…·ä½“ä½¿ç”¨æ¡ˆä¾‹" class="headerlink" title="æ³›å‹çš„å…·ä½“ä½¿ç”¨æ¡ˆä¾‹"></a>æ³›å‹çš„å…·ä½“ä½¿ç”¨æ¡ˆä¾‹</h4><p>1ã€æŠŠå­¦ç”Ÿå¯¹è±¡å­˜å…¥TreeSetä¸­ï¼Œè‡ªç„¶æ’åº æˆ–è€… æ¯”è¾ƒå™¨</p><p>2ã€ç»Ÿè®¡å­—ç¬¦ä¸²ä¸­å­—æ¯ä¸ªæ•°çš„ç¤ºä¾‹</p><p><img src="/2019/11/12/Java%E6%B3%9B%E5%9E%8B/clip_image002.jpg" alt="im"></p><p>æ³›å‹çš„ä¸Šã€ä¸‹é™</p><p><img src="/2019/11/12/Java%E6%B3%9B%E5%9E%8B/clip_im002.jpg" alt="img"></p><p><img src="/2019/11/12/Java%E6%B3%9B%E5%9E%8B/clip_im02.jpg" alt="img"></p><h4 id="æ³›å‹æ–¹æ³•çš„è®¾è®¡å’Œä½¿ç”¨"><a href="#æ³›å‹æ–¹æ³•çš„è®¾è®¡å’Œä½¿ç”¨" class="headerlink" title="æ³›å‹æ–¹æ³•çš„è®¾è®¡å’Œä½¿ç”¨"></a>æ³›å‹æ–¹æ³•çš„è®¾è®¡å’Œä½¿ç”¨</h4><p><img src="/2019/11/12/Java%E6%B3%9B%E5%9E%8B/clip_im01.png" alt="img"></p><p>é”™è¯¯åŸå› ï¼š åœ¨ç±»è®¾è®¡ä¸Šé¢ã€‚å› ä¸ºè¢«staticä¿®é¥°çš„æ–¹æ³•ï¼Œæ˜¯åœ¨ç±»åŠ è½½çš„æ—¶å€™å°±åŠ è½½çš„åˆ°é™æ€åŒºä¸­ï¼Œè€Œè¿™æ—¶å€™åŠ è½½åˆ°jvmä¸­çš„Tç±»å‹ï¼ŒJVMæ ¹æœ¬å°±ä¸çŸ¥é“æ˜¯ä»€ä¹ˆç±»å‹ã€‚</p><p>è§£å†³æ–¹æ³•ï¼šåœ¨æ–¹æ³•ä¸ŠåŠ ä¸€ä¸ªæ³›å‹</p><p><img src="/2019/11/12/Java%E6%B3%9B%E5%9E%8B/ge001.png" alt="img"></p><p>ä»€ä¹ˆæ˜¯æ³›å‹æ–¹æ³•</p><p>1ã€å°±æ˜¯æŠŠæ³›å‹ç±»å‹çš„å£°æ˜æ”¾åœ¨æŸä¸ªæ–¹æ³•ä¸Šé¢ï¼Œåªéœ€å°†æ³›å‹å‚æ•°åˆ—è¡¨ç½®äºè¿”å›å€¼å‰ï¼›åªèƒ½å¤Ÿæœ¬æ–¹æ³•ä¸Šæˆ–è€…å†…éƒ¨å¯ä»¥ä½¿ç”¨è¿™ä¸ªç¬¦å·ï¼›</p><p>2ã€æ³›å‹ç±»ï¼Œå£°æ˜çš„æ³›å‹ç±»å‹å¯ä»¥ä½¿ç”¨åˆ°æ•´ä¸ªç±»çš„</p><p>3ã€æ³›å‹æ–¹æ³•æ¥è¯´ï¼Œæ˜¯å†è°ƒç”¨æ–¹æ³•çš„æ—¶å€™ä¼ å…¥çš„å®é™…å‚æ•°ä¸ºçœŸå®çš„ç±»å‹</p><h4 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h4><p>é™åˆ¶æ³›å‹</p><blockquote><p>1ï¼‰<T extends collection>è¿™é‡Œçš„é™å®šä½¿ç”¨å…³é”®å­—extendsï¼Œåé¢å¯ä»¥æ˜¯ç±»ä¹Ÿå¯ä»¥æ˜¯æ¥å£ã€‚ä½†è¿™é‡Œçš„extendså·²ç»ä¸æ˜¯ç»§æ‰¿çš„å«ä¹‰äº†ï¼Œåº”è¯¥ç†è§£ä¸ºTç±»å‹æ˜¯å®ç°Collectionæ¥å£çš„ç±»å‹ï¼Œæˆ–è€…Tæ˜¯ç»§æ‰¿äº†XXç±»çš„ç±»å‹ã€‚<br>2ï¼‰&lt;T extends SomeClass &amp; interface1 &amp; interface2 &amp; interface3&gt;</T></p></blockquote><p>é€šé…ç¬¦æ³›å‹</p><blockquote><p>1ã€å¦‚æœåªæŒ‡å®šäº†&lt;?&gt;ï¼Œè€Œæ²¡æœ‰extendsï¼Œåˆ™é»˜è®¤æ˜¯å…è®¸ObjectåŠå…¶ä¸‹çš„ä»»ä½•Javaç±»äº†ã€‚ä¹Ÿå°±æ˜¯ä»»æ„ç±»ã€‚<br>2ã€é€šé…ç¬¦æ³›å‹ä¸å•å¯ä»¥å‘ä¸Šé™åˆ¶ï¼Œå¦‚&lt;? extends Collection&gt;ï¼Œè¿˜å¯ä»¥å‘ä¸‹é™åˆ¶ï¼Œå¦‚&lt;? super Double&gt;ï¼Œè¡¨ç¤ºç±»å‹åªèƒ½æ¥å—DoubleåŠå…¶ä¸Šå±‚çˆ¶ç±»ç±»å‹ï¼Œå¦‚Numberã€Objectç±»å‹çš„å®ä¾‹ã€‚<br>3ã€æ³›å‹ç±»å®šä¹‰å¯ä»¥æœ‰å¤šä¸ªæ³›å‹å‚æ•°ï¼Œä¸­é—´ç”¨é€—å·éš”å¼€ï¼Œè¿˜å¯ä»¥å®šä¹‰æ³›å‹æ¥å£ï¼Œæ³›å‹æ–¹æ³•ã€‚è¿™äº›éƒ½ä¸æ³›å‹ç±»ä¸­æ³›å‹çš„ä½¿ç”¨è§„åˆ™ç±»ä¼¼ã€‚</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ³›å‹</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Javaå¸¸è§ç±»åŠå…¶ç»§æ‰¿å…³ç³»ï¼ˆä¸‰ï¼‰</title>
    <link href="/2019/11/11/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB%EF%BC%88%E4%B8%89%EF%BC%89/"/>
    <url>/2019/11/11/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB%EF%BC%88%E4%B8%89%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<h3 id="æ•°æ®ç»“æ„"><a href="#æ•°æ®ç»“æ„" class="headerlink" title="æ•°æ®ç»“æ„"></a>æ•°æ®ç»“æ„</h3><p>åœ¨å¤§å­¦æœŸé—´ï¼Œä¸“é—¨æœ‰é—¨è¯¾ç¨‹å«æ•°æ®ç»“æ„ï¼Œé‚£æ•°æ®ç»“æ„æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿ</p><p>ç®€å•ç†è§£æ•°æ®ç»“æ„æ˜¯ç”¨æ¥å­˜å‚¨æ•°æ®çš„ï¼›ï¼ˆæ¯”å¦‚å †æ ˆï¼Œé˜Ÿåˆ—ï¼ŒäºŒå‰æ ‘)</p><p>æ•°æ®ç»“æ„å®šä¹‰ï¼šæ•°æ®ç»“æ„æ˜¯ è®¡ç®—æœºå¯¹æ•°æ®å­˜å‚¨çš„ä¸€ç§å®‰æ’ï¼›</p><h4 id="æ•°æ®å­˜å‚¨æ–¹å¼"><a href="#æ•°æ®å­˜å‚¨æ–¹å¼" class="headerlink" title="æ•°æ®å­˜å‚¨æ–¹å¼"></a>æ•°æ®å­˜å‚¨æ–¹å¼</h4><h5 id="å˜é‡å­˜å‚¨"><a href="#å˜é‡å­˜å‚¨" class="headerlink" title="å˜é‡å­˜å‚¨"></a>å˜é‡å­˜å‚¨</h5><blockquote><p>æ³¨æ„ï¼š</p><p>å€¼å’Œç±»å‹åŒ¹é…é—®é¢˜ï¼šæ•°æ®ç±»å‹é™å®šäº†å˜é‡å¯ä»¥å­˜å‚¨çš„æ•°æ®ç±»å‹</p><p>æˆå‘˜å˜é‡å’Œå±€éƒ¨å˜é‡é—®é¢˜ï¼šåœ¨ä½¿ç”¨å±€éƒ¨å˜é‡ä¹‹å‰ï¼Œå¿…é¡»èµ‹å€¼</p><p>æˆå‘˜å˜é‡æœ‰é»˜è®¤å€¼ä½†æ˜¯é»˜è®¤å€¼éƒ½æ²¡æœ‰å¤šå¤§æ„ä¹‰ï¼Œåœ¨åšé¡¹ç›®çš„æ—¶å€™ï¼Œç»™å®ƒèµ‹ä¸€äº›å€¼</p></blockquote><h5 id="æ•°ç»„å­˜å‚¨"><a href="#æ•°ç»„å­˜å‚¨" class="headerlink" title="æ•°ç»„å­˜å‚¨"></a>æ•°ç»„å­˜å‚¨</h5><blockquote><p>ç‰¹ç‚¹ï¼šé•¿åº¦å›ºå®šï¼Œåªèƒ½å¤Ÿæ˜¯å­˜å‚¨åŒç§ç±»å‹ï¼›  </p></blockquote><h5 id="è‡ªå®šä¹‰å­˜å‚¨â€“é¡ºåºè¡¨"><a href="#è‡ªå®šä¹‰å­˜å‚¨â€“é¡ºåºè¡¨" class="headerlink" title="è‡ªå®šä¹‰å­˜å‚¨â€“é¡ºåºè¡¨"></a>è‡ªå®šä¹‰å­˜å‚¨â€“é¡ºåºè¡¨</h5><blockquote><p>â‘  å¸Œæœ›å¯ä»¥å­˜å‚¨ä»»æ„å¤šä¸ªå…ƒç´ ï¼›</p><p>â‘¡ å¸Œæœ›å¯ä»¥å­˜å‚¨ä»»æ„ç±»å‹çš„æ•°æ®;</p><p><strong>åˆ†æï¼šâ€”â€”â€”&gt;</strong></p><p>   åœ¨Javaä¸­ï¼Œä¸‡ç‰©çš†å¯¹è±¡ï¼Œå¯ä»¥è®¾ç½®ä¸€ä¸ªç±»è¡¨ç¤ºä¸Šé¢çš„å®¹å™¨ï¼Œé‚£æ€ä¹ˆè®¾è®¡?</p><p><strong>æç¤ºï¼šâ€”â€”â€”&gt;</strong></p><p>   æ¯”å¦‚ï¼š Integerç±» é‡Œé¢æœ‰ä¸ªint value å˜é‡å­˜å‚¨å€¼,</p><p>â€‹       Stringç±» é‡Œé¢æœ‰ä¸ª char[] value å­—ç¬¦æ•°ç»„å˜é‡å­˜å‚¨å€¼.</p><p>  å¦‚ä¸‹å›¾æ‰€ç¤º:</p><p>   <img src="/2019/11/11/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB%EF%BC%88%E4%B8%89%EF%BC%89/clip_image001.png" alt="1"> <img src="/2019/11/11/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB%EF%BC%88%E4%B8%89%EF%BC%89/clip_image002.png" alt="2"></p><p><strong>æ­¥éª¤ï¼šâ€”â€”â€”&gt;</strong></p><p>  â‘ è‡ªå®šä¹‰ä¸€ä¸ªå®¹å™¨ç±»ï¼Œæ¯”å¦‚ï¼ˆIntArrayç±»ï¼‰ï¼›</p><p>  â‘¡å…ˆåšåˆ°å¯ä»¥å­˜å‚¨å¤šä¸ªintå€¼ï¼Œå†…éƒ¨ä½¿ç”¨intæ•°ç»„ï¼›</p><p>  â‘¢ç±»é‡Œé¢ åˆ›å»ºäº†ä¸€ä¸ªintæ•°ç»„ï¼Œå½“intæ•°ç»„æ»¡è¶³ä¹‹åï¼Œåœ¨åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„ï¼›å¹¶ä¸”æŠŠè€çš„æ•°ç»„å€¼æ‹·è´åˆ°æ–°çš„æ•°ç»„é‡Œé¢(<strong>å®ç°è‡ªåŠ¨æ‰©å®¹</strong>)ï¼›</p><p>  <img src="/2019/11/11/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB%EF%BC%88%E4%B8%89%EF%BC%89/clip_image004.jpg" alt="im"></p><p>è‡ªå®šä¹‰ç±»å·²ç»è®¾è®¡å¥½äº†ï¼Œé‚£ç”¨æˆ·åœ¨æ“ä½œçš„æ—¶å€™ï¼Œæ€ä¹ˆä½¿ç”¨ï¼Ÿä¹Ÿå°±æ˜¯æ€ä¹ˆå­˜å€¼ï¼Œæ€ä¹ˆå–å€¼?</p><ul><li>  æ–¹æ¡ˆä¸€ï¼šæŠŠé‡Œé¢çš„æ•°ç»„è®¾ç½®ä¸ºprivateï¼Œæä¾›getï¼Œsetæ–¹æ³•ï¼›é€šè¿‡getå°±å¯ä»¥å–å¾—æ•°ç»„çš„å€¼ï¼›</li><li>  æ–¹æ¡ˆäºŒï¼šåœ¨ç±»é‡Œé¢æä¾›ä¸€ä¸ªæ–¹æ³•ï¼Œæ¯”å¦‚addï¼Œè°ƒç”¨ä¸€æ¬¡ï¼Œå°±å¾€é‡Œé¢æ·»åŠ ä¸€ä¸ªå€¼ï¼›</li></ul><p>å“ªç§æ–¹å¼å¥½ï¼Œç¬¬ä¸€ä¸ªç§å¥½å—ï¼Œç”¨æˆ·åœ¨è°ƒç”¨çš„æ—¶å€™ï¼Œé€šè¿‡getæ–¹æ³•ï¼Œå–åˆ°äº†ä¸€ä¸ªæ•°ç»„ï¼Œåœ¨è®¾ç½®çš„æ—¶å€™ï¼Œåˆéœ€è¦ä¼ ä¸€ä¸ªæ•°ç»„. åœ¨æ“ä½œçš„æ—¶å€™å·²ç»æš´éœ²å‡ºæ•°ç»„; ä½†æ˜¯ç”¨æˆ·åœ¨æ“ä½œçš„æ—¶å€™ï¼Œå¹¶ä¸æƒ³çŸ¥é“è¿™äº›å…·ä½“çš„å®ç°ï¼›</p><p>ç¬¬äºŒç§æ–¹å¼ï¼Œç›´æ¥æä¾›æ–¹æ³•ï¼Œå°è£…æ€§æ›´å¼ºæ›´å¥½;ä¹Ÿå°±æ˜¯å­˜çš„æ—¶å€™ï¼Œæä¾›äº†ä¸€ä¸ªaddæ–¹æ³•ï¼Œè°ƒç”¨ä¸€æ¬¡addæ–¹æ³•å°±å‘å®¹å™¨é‡Œé¢æ·»åŠ ä¸€ä¸ªå…ƒç´ ;</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-comment">//è‡ªå®šä¹‰çš„</span><br><span class="hljs-comment">//é—®é¢˜ï¼šè¿™ä¸ªè‡ªå®šä¹‰å®¹å™¨åªèƒ½å­˜æ”¾intå‹æ•°æ®ï¼Œä¸ºä»€ä¹ˆæ”¹æˆObject[] data;å°±èƒ½å­˜æ”¾ä»»æ„æ•°æ®ç±»å‹åŒ…æ‹¬åŸºæœ¬æ•°æ®ç±»å‹</span><br>package cn.kongwei_liao.DataStruct;<br><br><span class="hljs-keyword">import</span> java.util.Arrays;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">IntArray</span> &#123;</span><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> *  â‘  å®šä¹‰ä¸€ä¸ªè‡ªå®šä¹‰å®¹å™¨ç±» IntArray</span><br><span class="hljs-comment">        â‘¡ åˆ›å»ºä¸€ä¸ªå­˜æ”¾æ•°æ®çš„æ•°ç»„ æ¯”å¦‚ int[] data= new int[10];</span><br><span class="hljs-comment">        â‘¢ å®šä¹‰ä¸€ä¸ªæ·»åŠ æ–¹æ³• add ï¼Œè°ƒç”¨ä¸€æ¬¡ç»™å½“å‰å®¹å™¨å¯¹è±¡æ·»åŠ ä¸€ä¸ªå…ƒç´ </span><br><span class="hljs-comment">        â‘£ åˆ›å»ºè‡ªå®šä¹‰å®¹å™¨ç±»å¯¹è±¡ï¼Œè°ƒç”¨addæ–¹æ³•ï¼Œæ·»åŠ å…ƒç´ </span><br><span class="hljs-comment"> */</span><br><span class="hljs-comment">//private int [] data= new int[10];</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> [] data;<br><span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªè®¡æ•°å™¨</span><br><span class="hljs-keyword">int</span> <span class="hljs-built_in">size</span> = <span class="hljs-number">0</span> ;<br><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">IntArray</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-comment">//data=new int[10];</span><br><span class="hljs-keyword">this</span>(<span class="hljs-number">10</span>);<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">IntArray</span><span class="hljs-params">(<span class="hljs-keyword">int</span> length)</span> </span>&#123;<br>data = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[length];<br>&#125;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment"> * æ·»åŠ æ–¹æ³• add ä¼ å…¥ä¸€ä¸ªå‚æ•°å€¼</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-keyword">int</span> str)</span></span>&#123;<br>     <span class="hljs-comment">//date[size] = str;</span><br>     <span class="hljs-comment">//size++;</span><br><br><span class="hljs-comment">//åˆ¤æ–­æ•°ç»„å·²æ»¡</span><br><span class="hljs-keyword">if</span>(<span class="hljs-built_in">size</span>==data.length) &#123;<br><span class="hljs-comment">//è‡ªåŠ¨æ‰©å……2å€é•¿åº¦</span><br><span class="hljs-keyword">int</span>[] new1=<span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[data.length*<span class="hljs-number">2</span>];<br><span class="hljs-comment">//å°†è€æ•°ç»„å†…å®¹æ‹·è´çš„æ‰©å®¹çš„æ–°æ•°ç»„</span><br>System.arraycopy(data, <span class="hljs-number">0</span>, new1, <span class="hljs-number">0</span>, <span class="hljs-built_in">size</span>);<br><span class="hljs-comment">//åŸè€æ•°ç»„çš„å¼•ç”¨æŒ‡å‘æ–°æ•°ç»„</span><br>data=new1;<br>&#125;<br><br>data[<span class="hljs-built_in">size</span>++] = str;<br><br>&#125;<br><span class="hljs-comment">//è¦†å†™toStringæ–¹æ³•</span><br>@Override<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">String</span> <span class="hljs-title">toString</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-comment">// TODO Auto-generated method stub</span><br><span class="hljs-comment">//return Arrays.toString(date);</span><br><span class="hljs-comment">//æŠŠå…ƒç´ æ•°ç»„çš„å€¼ï¼Œæ‹·è´åˆ°æ–°æ•°ç»„é‡Œé¢</span><br><span class="hljs-keyword">int</span> [] newArr = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[<span class="hljs-built_in">size</span>];<br>System.arraycopy(data, <span class="hljs-number">0</span>, newArr, <span class="hljs-number">0</span>, <span class="hljs-built_in">size</span>);<br><span class="hljs-keyword">return</span> Arrays.toString(newArr);<br>&#125;<br><br><span class="hljs-comment">//æ·»åŠ è¿”å›æ•°ç»„å¤§å°æ–¹æ³•ï¼šgetSize</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getSize</span><span class="hljs-params">()</span></span>&#123;<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">size</span>;<br>&#125;<br><br><span class="hljs-comment">//è‡ªå®šä¹‰å®¹å™¨æŸ¥æ‰¾</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">getElementByIndex</span><span class="hljs-params">(<span class="hljs-keyword">int</span> index)</span> </span>&#123;<br><span class="hljs-keyword">if</span>(index&lt;<span class="hljs-number">0</span>||index&gt;=<span class="hljs-built_in">size</span>) &#123;<br><span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ArrayIndexOutOfBoundsException(<span class="hljs-string">&quot;æŸ¥æ‰¾å¤±è´¥ï¼&quot;</span>);<br>&#125;<br><span class="hljs-keyword">return</span> data[index];<br>&#125;<br><br><span class="hljs-comment">//æŸ¥æ‰¾æŒ‡å®šå…ƒç´ ç¬¬ä¸€æ¬¡å‡ºç°çš„ç´¢å¼•</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getFirstIndex</span><span class="hljs-params">(<span class="hljs-keyword">int</span> ele)</span> </span>&#123;<br><span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-built_in">size</span>;i++) &#123;<br><span class="hljs-keyword">if</span>(data[i]==ele) &#123;<br><span class="hljs-keyword">return</span> i;<br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br><br><span class="hljs-comment">//è‡ªå®šä¹‰å®¹å™¨ï¼Œåˆ é™¤å…ƒç´ </span><br><span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">deleteElementByIndex</span><span class="hljs-params">(<span class="hljs-keyword">int</span> index)</span> </span>&#123;<br><span class="hljs-comment">//è¶Šç•Œåˆ¤æ–­</span><br><span class="hljs-keyword">if</span>(index&lt;<span class="hljs-number">0</span>||index&gt;=<span class="hljs-built_in">size</span>) &#123;<br><span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ArrayIndexOutOfBoundsException(<span class="hljs-string">&quot;è¶Šç•Œï¼&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">//åˆ é™¤å…ƒç´   åŸä½ç½®index+1</span><br>System.arraycopy(data, index+<span class="hljs-number">1</span>, data, index, <span class="hljs-built_in">size</span>-index<span class="hljs-number">-1</span>);<br><span class="hljs-built_in">size</span>--;<br>Object ele =data[index];<br><span class="hljs-keyword">return</span> ele;<br>&#125;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * åˆ é™¤æŒ‡å®šçš„ç¬¬ä¸€ä¸ªå…ƒç´ </span><br><span class="hljs-comment"> * 1ã€æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªä¸‹æ ‡</span><br><span class="hljs-comment"> * 2ã€åˆ é™¤ç¬¬ä¸€ä¸ªå…ƒç´ </span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">deleteFirstElement</span><span class="hljs-params">(<span class="hljs-keyword">int</span> ele)</span> </span>&#123;<br><span class="hljs-keyword">int</span> index=<span class="hljs-keyword">this</span>.getFirstIndex(ele);<br><span class="hljs-keyword">this</span>.deleteElementByIndex(index);<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="/2019/11/11/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB%EF%BC%88%E4%B8%89%EF%BC%89/del.png" alt="del"></p></blockquote><p>è¡¥å……ï¼šåŸºæœ¬æ•°æ®ç±»å‹ä¸Objectçš„å…³ç³»</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Test</span> </span>&#123;<br>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">main</span>(<span class="hljs-params"><span class="hljs-built_in">String</span>[] args</span>)</span>&#123;<br>                int  a = <span class="hljs-number">33</span>;<br>        sop(a);    <span class="hljs-comment">//å¯ä»¥è¯´æ˜åŸºæœ¬æ•°æ®ç±»å‹å’ŒObjectä¹‹é—´å­˜åœ¨å¤šæ€å…³ç³»å—ï¼Ÿ</span><br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">sop</span>(<span class="hljs-params"><span class="hljs-built_in">Object</span> obj</span>)</span> &#123;<br>        System.out.println(obj);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åŸå› ï¼šjavaåœ¨å¯»æ‰¾æœ€ä½³åŒ¹é…æ–¹æ³•æ—¶æ— æ³•æ‰¾åˆ°å®Œå…¨åŒ¹é…çš„å‚æ•°æ—¶ä¼šè¿›è¡Œè‡ªåŠ¨æå‡è½¬æ¢æˆ–è€…å…¶å®ƒç›¸åº”è½¬æ¢ã€‚</p><p>Debugä¸‹æŸ¥çœ‹ï¼š</p><p><img src="/2019/11/11/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB%EF%BC%88%E4%B8%89%EF%BC%89/debug.png" alt="de"></p><h5 id="è‡ªå®šä¹‰å­˜å‚¨â€“é“¾è¡¨"><a href="#è‡ªå®šä¹‰å­˜å‚¨â€“é“¾è¡¨" class="headerlink" title="è‡ªå®šä¹‰å­˜å‚¨â€“é“¾è¡¨"></a>è‡ªå®šä¹‰å­˜å‚¨â€“é“¾è¡¨</h5><p>å·²ç»ä½¿ç”¨å˜é‡ã€æ•°ç»„å’Œè‡ªå®šä¹‰å®¹å™¨ç±»å­˜æ”¾æ•°æ®ï¼›</p><blockquote><ul><li>å˜é‡ï¼šå­˜å‚¨ä¸€ä¸ªå€¼ï¼›</li><li>æ•°ç»„ï¼šå­˜å‚¨å¤šä¸ªå€¼ï¼›</li><li>è‡ªå®šä¹‰å®¹å™¨ï¼šåœ¨ç±»ä¸­å°è£…ä¸€ä¸ªæ•°ç»„</li></ul><p>å¯¹äºå˜é‡ç›´æ¥èµ‹å€¼ä½¿ç”¨; å¯¹äºæ•°ç»„ï¼Œé€šè¿‡ä¸‹æ ‡ä½¿ç”¨; å¯¹äºè‡ªå®šä¹‰å®¹å™¨ç±»çš„æ“ä½œï¼Œæˆ‘ä»¬é€šè¿‡æ·»åŠ addæ–¹æ³•ï¼Œè¿›è¡Œä½¿ç”¨.å®ƒçš„åŸç†æ˜¯å†…éƒ¨ä½¿ç”¨æ•°ç»„æ¥å­˜å‚¨å®ç°ï¼Œä½†æ˜¯ç”¨æˆ·å¹¶ä¸å…³å¿ƒå†…éƒ¨æ€ä¹ˆå®ç°.</p></blockquote><p>éœ€æ±‚ï¼š</p><blockquote><p>å¦‚æœåœ¨è®¾è®¡ä¸€ä¸ªå®¹å™¨ç±»ï¼ˆè‡ªå®šä¹‰ä¸€ä¸ªå®¹å™¨ç±»ï¼‰ï¼Œå¯¹äºå®¹å™¨ç±»çš„æ“ä½œï¼Œä¸€èˆ¬æä¾›ä¸€ä¸ªaddæ–¹æ³•ï¼Œè°ƒç”¨addæ–¹æ³•çš„æ—¶å€™ï¼Œéœ€è¦ä¼ ä¸€ä¸ªå€¼ï¼Œç„¶åæŠŠå€¼å­˜æ”¾åœ¨å®¹å™¨é‡Œé¢ï¼Œ</p><p>ä½†æ˜¯ç°åœ¨ã€ä¸ç”¨æ•°ç»„ã€‘, é‚£è¿˜å¯ä»¥ç”¨ä»€ä¹ˆç±»å‹æ–¹å¼å­˜å‚¨ï¼Ÿ</p></blockquote><p>åˆ†æï¼š</p><blockquote><p>ç°åœ¨åŸºäºå˜é‡çš„æ–¹å¼æ¥å­˜å‚¨ï¼Œæ¯”å¦‚ä¸€ç»„é›¶æ•£çš„æ•°æ®æ”¾åˆ°å®¹å™¨é‡Œé¢ï¼Œå¯¹äºå®¹å™¨ç±»ï¼Œèƒ½å¤Ÿå‡†ç¡®çš„æä¾›æ–¹æ³•æ¥æ·»åŠ ï¼Œèƒ½å¤Ÿæ“ä½œå°±å¯ä»¥äº†ï¼Œæˆ‘ä»¬ä¹Ÿä¸å…³å¿ƒæ€ä¹ˆå­˜æ”¾ï¼›</p><p>å¯¹äºè¿™äº›æ•°æ®ï¼Œå¯èƒ½æ˜¯æ•´å‹ï¼Œå­—ç¬¦ä¸²ï¼Œå‡å¦‚ç°åœ¨æŠŠè¿™äº›é›¶æ•£çš„æ•°æ®éƒ½çœ‹æˆå¯¹è±¡.</p><p>æ¯”å¦‚ä½¿ç”¨å˜é‡ :  int i1 = 11ï¼›  int i2 = 4ï¼›</p><p>å¦‚æœçœ‹æˆå¯¹è±¡ä½¿ç”¨Integerçš„å†™æ³•ï¼š  Integer i11 = 11;  Integer i12 = 4;</p><p>å¦‚æœçœ‹æˆå¯¹è±¡æ¥çœ‹çš„è¯ï¼Œåœ¨å †æ ˆå›¾ä¸­æ˜¯æ€æ ·çš„?</p><ul><li>æ ˆé‡Œé¢i11ï¼ŒæŒ‡å‘å †é‡Œé¢åœ°å€ï¼Œæ‰€ä»¥æ“ä½œè¿™äº›åœ°å€å°±æ˜¯ç›¸å½“äºæ“ä½œå€¼äº†ã€‚ç°åœ¨æˆ‘æŠŠè¿™äº›é›¶æ•£çš„å¯¹è±¡è¿èµ·æ¥ã€‚</li><li>ç¬¬ä¸€ä¸ªå¯¹è±¡åœ°å€ï¼Œæ¯”å¦‚0x1234ï¼Œå®¹å™¨ç±»é‡Œé¢å­˜æ”¾ä¸€ä¸ªå˜é‡ï¼ˆInteger i11ï¼‰ï¼Œæ‹¿åˆ°i11çš„åœ°å€ï¼Œå› ä¸ºè·Ÿå…¶ä»–å¯¹è±¡æ˜¯å…³è”çš„ï¼Œé‚£å®ƒæ˜¯ä¸æ˜¯ä¹Ÿå°±æ‹¿åˆ°çš„å…¶ä»–å…³è”ä¸Šå¯¹è±¡çš„åœ°å€ã€‚<br><img src="/2019/11/11/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB%EF%BC%88%E4%B8%89%EF%BC%89/clip_image002.jpg" alt="img"></li></ul></blockquote><p>é—®é¢˜ï¼šå¦‚ä½•å°†4å’Œ11è¿æ¥èµ·æ¥ï¼Ÿ</p><blockquote><p>åˆ†æï¼š</p><p>æ¯”å¦‚ç°åœ¨æŠŠInteger i11 å˜é‡æŒ‡å‘å®ƒçš„å¼•ç”¨ï¼Œç›¸ç­‰äºæŠŠi11å­˜æ”¾åœ¨å®¹å™¨ç±»é‡Œé¢äº†ï¼Œç°åœ¨</p><p>è®©11å¯¹è±¡é‡Œé¢å­˜æ”¾4çš„åœ°å€ï¼Œä½†æ˜¯éƒ½æ˜¯Integer å¯¹è±¡ï¼Œæ€ä¹ˆå­˜æ”¾åˆ«å¯¹è±¡çš„åœ°å€ï¼Ÿ</p><p>æ€è·¯: </p><p>æ ¹æ®åˆšæ‰åˆ†æï¼Œåœ¨å®¹å™¨å½“ä¸­å­˜æ”¾ä¸€ä¸ªå˜é‡ï¼Œä¹Ÿå°±æ˜¯å®šä¹‰ä¸€ä¸ªå˜é‡ï¼ŒæŒ‡å‘è¯¥å¯¹è±¡;</p><p>åœ¨å¯¹è±¡å½“ä¸­ï¼Œåˆæœ‰å˜é‡æŒ‡å‘å…¶ä»–å¯¹è±¡.è¿™å°±å°±è¿æ¥èµ·æ¥;</p><p>ç°åœ¨è‡ªå®šä¹‰ä¸€ä¸ªç±»Nodeï¼ˆç›¸å½“äºå£è¢‹ï¼‰ï¼Œç±»é‡Œé¢å®šä¹‰ä¸¤ä¸ªå­—æ®µï¼Œ</p><ul><li> ä¸€ä¸ªObjectç±»å‹å­˜æ”¾å€¼ï¼Œ</li><li> ä¸€ä¸ªNodeç±»å‹å­—æ®µï¼Œå­˜æ”¾ä¸‹ä¸€ä¸ªNodeå¯¹è±¡åœ°å€. </li></ul><p>æŠŠ11å°è£…æˆä¸€ä¸ªNodeå¯¹è±¡ï¼ŒæŠŠå¯¹è±¡æ”¾åˆ°å®¹å™¨é‡Œé¢ï¼Œä½†æ˜¯ç°åœ¨ä¸æ”¾åœ¨å®¹å™¨é‡Œé¢ï¼Œè€Œåœ¨å†…éƒ¨å®šä¹‰Nodeç±»å‹å˜é‡firstï¼ŒæŠŠfirstæŒ‡å‘11åœ°å€ï¼›å¦‚æœåœ¨æ·»åŠ ä¸€ä¸ªã€‚æ¯”å¦‚22ï¼Œé€šè¿‡ä¸€ä¸ªæ–¹æ³•ï¼ŒæŠŠ22å°è£…æˆNodeå¯¹è±¡ï¼Œç„¶åè®©11å’Œ22è”ç³»èµ·æ¥ï¼Œé‚£æ€ä¹ˆè®©11å’Œ22è”ç³»èµ·æ¥ï¼Ÿ</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">class <span class="hljs-keyword">Node</span><span class="hljs-title">&#123;</span><br><span class="hljs-title">Object</span> data;//ç”¨äºæ·»åŠ æ•°æ®...<br><span class="hljs-keyword">Node</span> <span class="hljs-title">node</span>;//ç”¨äºä¿å­˜ä¸‹ä¸€ä¸ªå¯¹è±¡çš„åœ°å€<br>&#125;<br></code></pre></td></tr></table></figure><p>å¯ä»¥åœ¨11å¯¹è±¡ä¸­å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œè®©è¿™ä¸ªå˜é‡æŒ‡å‘22è¿™ä¸ªå¯¹è±¡ï¼Œé‚£å°±åº”è¯¥åœ¨Nodeç±»é‡Œé¢å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œè¿™ä¸ªå˜é‡å­˜æ”¾ä»€ä¹ˆå€¼ï¼Œå°±æ˜¯å­˜æ”¾Nodeå¯¹è±¡ï¼Œæ‰€ä»¥åº”è¯¥å®šä¹‰æˆNodeç±»å‹ã€‚</p><p>å¦‚ä¸‹å›¾:</p><p><img src="/2019/11/11/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB%EF%BC%88%E4%B8%89%EF%BC%89/clip_image01.png" alt="img"></p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-comment">//è‡ªå®šä¹‰çš„</span><br><span class="hljs-keyword">package</span> cn.kongwei_liao.DataStruct;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> MyLinkedList &#123;<br><br><span class="hljs-keyword">class</span> Node&#123;<br>Object data;<span class="hljs-comment">//ç”¨äºæ·»åŠ æ•°æ®</span><br>Node <span class="hljs-keyword">next</span>;<span class="hljs-comment">//ä¿å­˜ä¸‹ä¸€ç»“ç‚¹å¯¹è±¡åœ°å€</span><br>Node(Object data)&#123;<br><span class="hljs-keyword">this</span>.data=data;<br>&#125;<br>&#125;<br><br><span class="hljs-keyword">private</span> Node first;<br><span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> <span class="hljs-keyword">size</span>;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> add(Object obj) &#123;<br><span class="hljs-comment">//å°†ç”¨æˆ·ä¼ å…¥çš„æ•°æ®æ‰“åŒ…</span><br>Node n=<span class="hljs-keyword">new</span> Node(obj);<br><span class="hljs-comment">//æ‰“åŒ…å¥½çš„æ•°æ®æŒ‚åˆ°firstä¸Šé¢</span><br><span class="hljs-comment">//å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡æ·»åŠ ç›´æ¥æŒ‚åˆ°firstä¸Šé¢ï¼Œå¦åˆ™ï¼Œå› è¯¥æŒ‚åœ¨æœ€åæ·»åŠ çš„Nodeå¯¹è±¡ä¸Šé¢</span><br><span class="hljs-keyword">if</span>(first==<span class="hljs-keyword">null</span>) &#123;<br>first=n;<br>&#125;<span class="hljs-keyword">else</span> &#123;<br>Node temp=first;<br><span class="hljs-keyword">while</span>(temp.<span class="hljs-keyword">next</span>!=<span class="hljs-keyword">null</span>) &#123;<br>temp=temp.<span class="hljs-keyword">next</span>;<br>&#125;<br>temp.<span class="hljs-keyword">next</span>=n;<br>&#125;<br><span class="hljs-keyword">size</span>++;<br>&#125;<br>@Override<br><span class="hljs-keyword">public</span> String toString() &#123;<br>StringBuffer sb=<span class="hljs-keyword">new</span> StringBuffer(<span class="hljs-string">&quot;[&quot;</span>);<br>Node temp=first;<span class="hljs-comment">//ä¸´æ—¶å˜é‡æŒ‡å‘é“¾è¡¨å¤´éƒ¨</span><br><span class="hljs-keyword">while</span>(temp!=<span class="hljs-keyword">null</span>) &#123;<br><span class="hljs-keyword">if</span>(temp.data!=<span class="hljs-keyword">null</span>&amp;&amp;temp.<span class="hljs-keyword">next</span>!=<span class="hljs-keyword">null</span>) &#123;<span class="hljs-comment">//æ•°æ®ä¸ä¸ºç©ºï¼Œä¸”ä¸‹ä¸€ç»“ç‚¹å­˜åœ¨</span><br>sb.<span class="hljs-keyword">append</span>(temp.data).<span class="hljs-keyword">append</span>(<span class="hljs-string">&quot;,&quot;</span>);<br>&#125;<span class="hljs-keyword">else</span> &#123;<br>sb.<span class="hljs-keyword">append</span>(temp.data);<span class="hljs-comment">//æœ€åä¸€ä¸ªç»“ç‚¹</span><br>&#125;<br>temp=temp.<span class="hljs-keyword">next</span>;<span class="hljs-comment">//tempæŒ‡å‘ä¸‹ä¸€ä¸ªç»“ç‚¹</span><br>&#125;<br>sb.<span class="hljs-keyword">append</span>(<span class="hljs-string">&quot;]&quot;</span>);<br><span class="hljs-keyword">return</span> sb.toString();<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> getSize() &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-keyword">size</span>;<br>&#125;<br><br>&#125;<br></code></pre></td></tr></table></figure></blockquote><h3 id="é›†åˆæ¡†æ¶"><a href="#é›†åˆæ¡†æ¶" class="headerlink" title="é›†åˆæ¡†æ¶"></a>é›†åˆæ¡†æ¶</h3><blockquote><p>1ã€æœ¬é˜¶æ®µä¼šå­¦ä¹ ï¼šå¸¸è§çš„Javaä¸­å†™å¥½çš„é›†åˆæ¡†æ¶çš„ç±»å’Œæ¥å£ï¼›</p><p>2ã€é›†åˆæ¡†æ¶ï¼š çœ‹æˆæ˜¯å­¦ä¹ ä¸€äº›Javaä¸­è®¾è®¡å¥½çš„å®¹å™¨ç±»ï¼›</p><p>3ã€å®¹å™¨ï¼šç››è£…ä¸œè¥¿çš„</p><p>4ã€å¦‚ä½•åˆ›å»ºå®¹å™¨å¯¹è±¡ï¼›</p><p>5ã€å¦‚ä½•æŠŠæ•°æ®è£…åˆ°å®¹å™¨ä¸­â€”&gt; è°ƒç”¨æ–¹æ³•ï¼›</p><p>6ã€å¦‚ä½•æŠŠå®¹å™¨ä¸­çš„æ•°æ®å–å‡ºâ€”&gt;è¿˜æ˜¯è°ƒç”¨æ–¹æ³•ï¼›</p><p>7ã€å¯èƒ½çš„éš¾ç‚¹ï¼šæˆ‘ä»¬ä¼šå­¦ä¹ å„ç§å„æ ·çš„é›†åˆå®¹å™¨ç±»ï¼Œå®ƒä»¬æœ‰å„è‡ªçš„å­˜å‚¨ç‰¹ç‚¹ï¼Œéš¾ä»¥é€‰æ‹©</p><p>è§£å†³ï¼šåˆ†ææ¸…æ¥šæ¯ä¸€ä¸ªçš„ç‰¹ç‚¹ï¼Œå®é™…åœºæ™¯ä¸­è‡ªå·±çš„éœ€æ±‚ï¼Œå¦‚æœå¾ˆå¤šéƒ½å¯ä»¥ï¼Œé‚£å°±éšä¾¿é€‰</p><p>8ã€åœ¨æœ¬é˜¶æ®µä»»åŠ¡è¦æ±‚ï¼š</p><p>â‘  å­¦ä¼šä½¿ç”¨</p><p>â‘¡ äº†è§£æˆ‘ä»¬æåˆ°çš„Javaä¸­çš„è¿™äº›å®¹å™¨ç±»çš„è®¾è®¡åŸç†</p><p>9ã€æœ€è¿‘çœ‹åˆ°ç±»å‹åé¢æœ‰<E> <T> <K> <V>â€¦ ç›´æ¥å¿½ç•¥ï¼Œè¿‡å‡ å¤©å­¦ä¹ çš„æ³›å‹ï¼›ç›´æ¥çœ‹æˆObject</V></K></T></E></p><p>10ã€é›†åˆæ¡†æ¶ä¸­å­˜å‚¨çš„å…ƒç´ å…¨éƒ¨éƒ½æ˜¯å¯¹è±¡ï¼Œä»1.5å¼€å§‹æ”¯æŒè‡ªåŠ¨è£…ç®±æ‹†ç®±ï¼Œæ‰€ä»¥åŸºæœ¬æ•°æ®ç±»å‹ä¹Ÿå¯ä»¥ç›´æ¥æ·»åŠ </p></blockquote><h4 id="æ‰€æœ‰é›†åˆçš„è¶…ç±»"><a href="#æ‰€æœ‰é›†åˆçš„è¶…ç±»" class="headerlink" title="æ‰€æœ‰é›†åˆçš„è¶…ç±»"></a>æ‰€æœ‰é›†åˆçš„è¶…ç±»</h4><p><img src="/2019/11/11/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB%EF%BC%88%E4%B8%89%EF%BC%89/superclass.jpg" alt="img"></p><p><img src="/2019/11/11/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB%EF%BC%88%E4%B8%89%EF%BC%89/superclass1.jpg" alt="img"></p><p><img src="/2019/11/11/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB%EF%BC%88%E4%B8%89%EF%BC%89/clip.jpg" alt="img"></p><h4 id="ArrayList"><a href="#ArrayList" class="headerlink" title="ArrayList"></a>ArrayList</h4><p>åŸºäºæ•°ç»„ï¼ŒæŸ¥è¯¢å’Œä¿®æ”¹é€Ÿåº¦å¿«ï¼ˆç›¸æ¯”äºLinkedListï¼‰ï¼›</p><p>æ–¹æ³•ï¼šæ·»åŠ ã€åˆ é™¤ã€æŸ¥è¯¢ã€æ’å…¥ã€ä¿®æ”¹ç­‰ï¼›</p><p><img src="/2019/11/11/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB%EF%BC%88%E4%B8%89%EF%BC%89/alf.png" alt="alf"></p><p>ä¸æ˜¯åŒæ­¥çš„ï¼ˆå­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼‰ï¼Œå¦‚ä½•è§£å†³ï¼Ÿï¼Ÿ</p><p><img src="/2019/11/11/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB%EF%BC%88%E4%B8%89%EF%BC%89/arrayl.png" alt="al"></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs awk">package cn.kongwei_liao.DataStruct;<br><br>import java.util.ArrayList;<br>import java.util.Iterator;<br>import java.util.ListIterator;<br><br>public class ArrayListDemo &#123;<br><br>public static void main(String[] args) &#123;<br><span class="hljs-regexp">//</span> TODO Auto-generated method stub<br>ArrayList bag = new ArrayList();<br>bag.add(<span class="hljs-string">&quot;ç”µè„‘&quot;</span>);<br>bag.add(<span class="hljs-number">200</span>);<br>bag.add(<span class="hljs-string">&quot;é¼ æ ‡&quot;</span>);<br>bag.add(<span class="hljs-string">&quot;å°äººä¹¦&quot;</span>);<br>bag.add(<span class="hljs-string">&quot;æ•™æ&quot;</span>);<br>bag.add(<span class="hljs-string">&quot;ç‰›å¥¶&quot;</span>);<br><br><span class="hljs-regexp">//</span><span class="hljs-keyword">for</span>(int i=<span class="hljs-number">0</span>;i&lt;bag.size();i++)&#123;<br><span class="hljs-regexp">//</span>System.out.println(bag.get(i));<br><span class="hljs-regexp">//</span>&#125;<br><br><span class="hljs-regexp">//</span><span class="hljs-keyword">for</span>(æºä¸­çš„æ•°æ®ç±»å‹ å˜é‡å : æº)&#123;<br><span class="hljs-regexp">//</span><br><span class="hljs-regexp">//</span>&#125;<br><span class="hljs-regexp">//</span>æ³¨æ„ï¼šæºå¯ä»¥æ˜¯æ•°ç»„æˆ–è€…é›†åˆï¼ˆIterableçš„å®ä¾‹ï¼‰<br><br><span class="hljs-regexp">//</span><span class="hljs-keyword">for</span>(Object obj:bag)&#123;<span class="hljs-regexp">//</span>å¢å¼º<span class="hljs-keyword">for</span>å¾ªç¯ï¼ˆforeachï¼‰<br><span class="hljs-regexp">//</span>System.out.println(obj);<br><span class="hljs-regexp">//</span>&#125;<br><br><span class="hljs-regexp">//</span>Iterator it = bag.iterator();<br><span class="hljs-regexp">//</span><span class="hljs-keyword">while</span>(it.hasNext())&#123;<br><span class="hljs-regexp">//</span>System.out.println(it.<span class="hljs-keyword">next</span>());<br><span class="hljs-regexp">//</span>&#125;<br><span class="hljs-regexp">//</span><span class="hljs-keyword">while</span>(it.hasNext())&#123;<span class="hljs-regexp">//</span>è¿™ä¸€æ¬¡è¿­ä»£å™¨éå†è¾“å‡ºä¸ºç©º<br><span class="hljs-regexp">//</span>System.out.println(it.<span class="hljs-keyword">next</span>());<br><span class="hljs-regexp">//</span>&#125;<br><br>ListIterator iterator = bag.listIterator();<br><span class="hljs-keyword">while</span>(iterator.hasNext())&#123;<br>System.out.println(iterator.<span class="hljs-keyword">next</span>());<br>&#125;<br>System.out.println(<span class="hljs-string">&quot;------------------------------------------&quot;</span>);<br><span class="hljs-keyword">while</span>(iterator.hasPrevious())&#123;<span class="hljs-regexp">//</span>å¦‚æœå°†ä¸Šé¢çš„å‘åè¿­ä»£æ³¨é‡Šæ‰ï¼Œå‘å‰è¿­ä»£çš„è¾“å‡ºä¸ºç©º<br>System.out.println(iterator.previous());<br>&#125;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="è¿­ä»£å™¨"><a href="#è¿­ä»£å™¨" class="headerlink" title="è¿­ä»£å™¨"></a>è¿­ä»£å™¨</h4><p>Iterator å°±æ˜¯ä¸€ä¸ªè¿­ä»£å™¨ï¼ˆä¹Ÿæ˜¯ä¸€ä¸ªæ¥å£ï¼‰</p><p>å…¶ä¸­çš„æ–¹æ³•å¦‚ä¸‹ï¼š</p><blockquote><p>boolean hasNext() åˆ¤æ–­æ˜¯å¦æœ‰ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œå¦‚æœè¿”å›trueè¡¨ç¤ºæœ‰ä¸‹ä¸€ä¸ªï¼›</p><p>Object next() è°ƒç”¨ä¸€æ¬¡è·å¾—ä¸€ä¸ªå…ƒç´ ï¼ˆæ¯è°ƒç”¨ä¸€æ¬¡æŒ‡é’ˆä¼šå‘åç§»åŠ¨ä¸€ä¸ªï¼‰ï¼›</p><p>void remove() ä¼šä»è¿­ä»£å™¨æŒ‡å‘çš„ç»“åˆå®¹å™¨ä¸­åˆ é™¤ä¸€ä¸ªå…ƒç´ </p></blockquote><p>ä¸€ä¸ªè¿­ä»£å™¨ï¼Œå¾ªç¯å®Œæ¯•å°±æŠŠæŒ‡é’ˆç§»åŠ¨åˆ°æœ«å°¾äº†ã€‚</p><p><img src="/2019/11/11/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB%EF%BC%88%E4%B8%89%EF%BC%89/iter.jpg" alt="img"></p><h4 id="åŒå‘è¿­ä»£å™¨"><a href="#åŒå‘è¿­ä»£å™¨" class="headerlink" title="åŒå‘è¿­ä»£å™¨"></a>åŒå‘è¿­ä»£å™¨</h4><p>Iterator å•é¡¹çš„è¿­ä»£å™¨æ¥å£ï¼Œä»å·¦åˆ°å³ä¾æ¬¡è·å¾—æ•°æ®ï¼Œåˆ¤æ–­æ˜¯å¦æœ‰ä¸‹ä¸€ä¸ªï¼›è·å¾—ä¸‹ä¸€ä¸ª</p><p>â€‹      |â€“ ListIterator  åŒå‘çš„è¿­ä»£å™¨æ¥å£ï¼Œå®ƒçš„ä¸»è¦æ–¹æ³•å¦‚ä¸‹ï¼š</p><p>â€‹                             Iteratorä¸­æœ‰çš„å®ƒä¹Ÿæœ‰ï¼›</p><p>â€‹                             boolean hasPrevious() åˆ¤æ–­æ˜¯å¦æœ‰ä¸Šä¸€ä¸ªï¼›</p><pre><code>                         Object previous() è·å¾—ä¸Šä¸€ä¸ªå…ƒç´ ï¼›</code></pre><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">ListIterator iterator = bag.<span class="hljs-built_in">list</span><span class="hljs-constructor">Iterator()</span>;<br><span class="hljs-keyword">while</span>(iterator.has<span class="hljs-constructor">Next()</span>)&#123;<br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(iterator.next<span class="hljs-literal">()</span>);<br>&#125;<br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(<span class="hljs-string">&quot;------------------------------------------&quot;</span>);<br><span class="hljs-keyword">while</span>(iterator.has<span class="hljs-constructor">Previous()</span>)&#123;<span class="hljs-comment">//å¦‚æœå°†ä¸Šé¢çš„å‘åè¿­ä»£æ³¨é‡Šæ‰ï¼Œå‘å‰è¿­ä»£çš„è¾“å‡ºä¸ºç©º</span><br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(iterator.previous<span class="hljs-literal">()</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="LinkedList"><a href="#LinkedList" class="headerlink" title="LinkedList"></a>LinkedList</h4><p>åŸºäºé“¾è¡¨ç»“æ„ï¼Œæ·»åŠ å’Œåˆ é™¤æ“ä½œæ•ˆç‡é«˜ï¼ˆç›¸å¯¹äºä¸Šé¢çš„æ•°ç»„ç»“æ„ï¼‰</p><p>å†…éƒ¨ç›¸å¯¹äºArrayListè€Œè¨€å¤šäº†å†™æ“ä½œå¤´å’Œå°¾çš„æ–¹æ³•</p><p><img src="/2019/11/11/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB%EF%BC%88%E4%B8%89%EF%BC%89/llf.png" alt="llf"></p><p>å¯ä»¥å……å½“é˜Ÿåˆ—å’Œå †æ ˆ</p><p>ä¸æ˜¯åŒæ­¥çš„ï¼ˆå­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼‰</p><p><img src="/2019/11/11/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB%EF%BC%88%E4%B8%89%EF%BC%89/ll.png" alt="img"></p><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs processing"><span class="hljs-keyword">package</span> cn.kongwei_liao.DataStruct;<br><br><span class="hljs-keyword">import</span> java.util.LinkedList;<br><br><span class="hljs-keyword">public</span> class LinkedListDemo &#123;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> main(<span class="hljs-keyword">String</span>[]args) &#123;<br>LinkedList list = <span class="hljs-keyword">new</span> LinkedList();<br>list.<span class="hljs-built_in">add</span>(<span class="hljs-string">&quot;A&quot;</span>);<br>list.<span class="hljs-built_in">add</span>(<span class="hljs-string">&quot;B&quot;</span>);<br>list.<span class="hljs-built_in">add</span>(<span class="hljs-string">&quot;C&quot;</span>);<br>list.<span class="hljs-built_in">add</span>(<span class="hljs-string">&quot;D&quot;</span>);<br>list.<span class="hljs-built_in">add</span>(<span class="hljs-string">&quot;E&quot;</span>);<br>System.out.<span class="hljs-built_in">println</span>(list);<br><span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; list.<span class="hljs-built_in">size</span>(); i++) &#123;<br>System.out.<span class="hljs-built_in">println</span>(list.pop());<span class="hljs-comment">//è¾“å‡ºA B Cï¼Œè€ŒDå’ŒEæ²¡æœ‰æ‰“å°å‡ºæ¥ï¼Œå› ä¸ºæ¯popä¸€æ¬¡sizeå‡1</span><br>&#125;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="/2019/11/11/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB%EF%BC%88%E4%B8%89%EF%BC%89/res.png" alt="rs"></p><h3 id="ä¸é‡å¤å…ƒç´ çš„å®¹å™¨"><a href="#ä¸é‡å¤å…ƒç´ çš„å®¹å™¨" class="headerlink" title="ä¸é‡å¤å…ƒç´ çš„å®¹å™¨"></a>ä¸é‡å¤å…ƒç´ çš„å®¹å™¨</h3><p><strong>å¦‚ä½•è‡ªå®šä¹‰ä¸èƒ½å­˜æ”¾é‡å¤å…ƒç´ çš„å®¹å™¨</strong></p><blockquote><p>1ã€ç°åœ¨éœ€è¦æˆ‘ä»¬è‡ªå·±è®¾è®¡ä¸€ä¸ªå®¹å™¨ç±»ï¼Œä¸èƒ½å¤Ÿæ·»åŠ é‡å¤å…ƒç´ ï¼ˆå¦‚æœå…ƒç´ é‡å¤äº†å°±æ·»åŠ ä¸è¿›å»ï¼‰</p><p>2ã€åœ¨å‰é¢æˆ‘ä»¬è®¾è®¡çš„åŸºäºæ•°ç»„çš„è‡ªå®šä¹‰å®¹å™¨ç±»çš„åŸºç¡€ä¸Šæ”¹ç‰ˆ</p><p>3ã€éœ€è¦åœ¨addæ–¹æ³•å†…éƒ¨åˆ¤æ–­é‡å¤</p><p>4ã€å¦‚ä½•åˆ¤æ–­ï¼š</p><ul><li>æ¯ä¸€æ¬¡è°ƒç”¨addä¼šä¼ å…¥ä¸€ä¸ªå‚æ•°ï¼š ç”¨æˆ·å¸Œæœ›æ·»åŠ çš„å…ƒç´  ele</li><li>éå†å†…éƒ¨çš„æ•°ç»„ï¼Œåˆ¤æ–­æ•°ç»„ä¸­æ˜¯å¦åŒ…å«ele</li></ul></blockquote><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs processing"><span class="hljs-keyword">public</span> <span class="hljs-built_in">boolean</span> <span class="hljs-built_in">add</span>(<span class="hljs-keyword">Object</span> <span class="hljs-built_in">str</span>)&#123;<br><span class="hljs-comment">//åˆ¤æ–­å½“å‰å®¹å™¨æ˜¯å¦å·²ç»å­˜åœ¨å¾…æ’å…¥å…ƒç´ </span><br><span class="hljs-comment">//æ–¹æ³•ä¸€</span><br><span class="hljs-comment">//for(int i=0;i&lt;size;i++) &#123;</span><br><span class="hljs-comment">//if(data[i].equals(str))</span><br><span class="hljs-comment">//return false;</span><br><span class="hljs-comment">//&#125;</span><br><span class="hljs-comment">//æ–¹æ³•äºŒ</span><br><span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.getFirstIndex(<span class="hljs-built_in">str</span>)&gt;=<span class="hljs-number">0</span>)<br><span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;<br><br><br>     <span class="hljs-comment">//date[size] = str;</span><br>     <span class="hljs-comment">//size++;</span><br><br><span class="hljs-comment">//åˆ¤æ–­æ•°ç»„å·²æ»¡</span><br><span class="hljs-keyword">if</span>(<span class="hljs-built_in">size</span>==data.length) &#123;<br><span class="hljs-comment">//è‡ªåŠ¨æ‰©å……2å€é•¿åº¦</span><br><span class="hljs-keyword">Object</span>[] new1=<span class="hljs-keyword">new</span> <span class="hljs-keyword">Object</span>[data.length*<span class="hljs-number">2</span>];<br><span class="hljs-comment">//å°†è€æ•°ç»„å†…å®¹æ‹·è´çš„æ‰©å®¹çš„æ–°æ•°ç»„</span><br>System.arraycopy(data, <span class="hljs-number">0</span>, new1, <span class="hljs-number">0</span>, <span class="hljs-built_in">size</span>);<br><span class="hljs-comment">//åŸè€æ•°ç»„çš„å¼•ç”¨æŒ‡å‘æ–°æ•°ç»„</span><br>data=new1;<br>&#125;<br><br>data[<span class="hljs-built_in">size</span>++] = <span class="hljs-built_in">str</span>;<br><span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="HashSet"><a href="#HashSet" class="headerlink" title="HashSet"></a>HashSet</h3><p>ç‰¹ç‚¹ï¼šä¸é‡å¤ï¼ˆä¸æ·»åŠ é‡å¤å…ƒç´ ï¼‰ï¼Œæ— åºï¼ˆä¸ä¿è¯å’Œæ·»åŠ é¡ºåºçš„ä¸€è‡´ï¼‰</p><p>æˆå‘˜æ–¹æ³•ï¼š</p><p><img src="/2019/11/11/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB%EF%BC%88%E4%B8%89%EF%BC%89/HashSetFunctions.png" alt="hsf"></p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">package cn.kongwei_liao.DataStruct;<br><br><span class="hljs-keyword">import</span> java.util.HashSet;<br><br><span class="hljs-built_in">public</span> <span class="hljs-keyword">class</span> HashSetDemo &#123;<br><span class="hljs-built_in">public</span> static <span class="hljs-type">void</span> main(String[]args) &#123;<br>HashSet set1=<span class="hljs-built_in">new</span> HashSet();<br>set1.<span class="hljs-keyword">add</span>(<span class="hljs-number">123</span>);<br>set1.<span class="hljs-keyword">add</span>(<span class="hljs-number">123</span>);//æœªæ’å…¥HashSetä¸­<br><br><span class="hljs-type">Integer</span> i1=<span class="hljs-built_in">new</span> <span class="hljs-type">Integer</span>(<span class="hljs-number">123</span>);<br><span class="hljs-type">Integer</span> i2=<span class="hljs-built_in">new</span> <span class="hljs-type">Integer</span>(<span class="hljs-number">123</span>);<br><span class="hljs-type">Integer</span> i3=<span class="hljs-built_in">new</span> <span class="hljs-type">Integer</span>(<span class="hljs-number">456</span>);<br><span class="hljs-type">Integer</span> i4=<span class="hljs-built_in">new</span> <span class="hljs-type">Integer</span>(<span class="hljs-number">456</span>);<br>set1.<span class="hljs-keyword">add</span>(i1);//æœªæ’å…¥HashSetä¸­<br>set1.<span class="hljs-keyword">add</span>(i2);//æœªæ’å…¥HashSetä¸­<br>set1.<span class="hljs-keyword">add</span>(i3);<br>set1.<span class="hljs-keyword">add</span>(i4);//æœªæ’å…¥HashSetä¸­<br><br>set1.<span class="hljs-keyword">add</span>(&quot;123&quot;);<br><br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(set1);<br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(set1.size());<br>&#125;<br>&#125;<br><br><span class="hljs-comment">/*æ§åˆ¶å°æ‰“å°ç»“æœ</span><br><span class="hljs-comment">[123, 456, 123]</span><br><span class="hljs-comment">3</span><br><span class="hljs-comment">*/</span><br></code></pre></td></tr></table></figure><p>éœ€è¦è€ƒè™‘ï¼ŒHashSetå†…éƒ¨åˆ°åº•æ˜¯å¦‚ä½•åˆ¤æ–­é‡å¤çš„ï¼Ÿ</p><blockquote><p>â‘  é€šè¿‡æ·»åŠ è¿›å»çš„å…ƒç´ çš„hashCode+eqauls ä¸¤è€…è¿›è¡Œæ¯”è¾ƒ</p><p>â‘¡ å¦‚æœä¸¤ä¸ªå¯¹è±¡çš„hashCodeç›¸ç­‰ å¹¶ä¸” ä¸¤ä¸ªå¯¹è±¡è°ƒç”¨equalsç»“æœæ˜¯true æ‰è®¤ä¸ºä¸¤ä¸ªå…ƒç´ é‡å¤</p><p><img src="/2019/11/11/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB%EF%BC%88%E4%B8%89%EF%BC%89/HSrepeat.jpg" alt="img"></p><p>â‘¢  éªŒè¯ä¸Šé¢çš„è§„åˆ™</p><ul><li>æ‰“å°ä¸Šé¢ç¤ºä¾‹ä¸­çš„å…ƒç´ çš„hashCodeå’Œequalsçš„ç»“æœ</li><li>å°è¯•è‡ªå®šä¹‰ç±»ï¼Œè¦†å†™hashCode å’Œ equals è¿™ä¸¤ä¸ªæ–¹æ³•ä¸­çš„ä»£ç éšä¾¿å†™</li></ul><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">//è¿™æ ·é‡å†™HashCodeå’Œequalsæ–¹æ³•æ˜¯ä¸å¯¹çš„ï¼Œæƒ³æƒ³æ¸…æ¥šä¸ºä»€ä¹ˆï¼Ÿï¼Ÿ<br>//å› ä¸ºè¿™æ ·é‡å†™çš„æ˜¯HashSetçš„HashCodeå’Œequalsæ–¹æ³•ï¼Œå…¶å®åº”è¯¥é‡å†™çš„æ˜¯å¾…æ’å…¥å¯¹è±¡ç±»çš„è¿™ä¸¤ä¸ªæ–¹æ³•<br><span class="hljs-built_in">public</span> <span class="hljs-keyword">class</span> HashSetDemo extends HashSet&#123;<br>@Override<br><span class="hljs-built_in">public</span> <span class="hljs-type">int</span> hashCode() &#123;<br>Random rd=<span class="hljs-built_in">new</span> Random(<span class="hljs-keyword">System</span>.currentTimeMillis());<br><span class="hljs-keyword">return</span> rd.nextInt();<br>&#125;<br>@Override<br><span class="hljs-built_in">public</span> <span class="hljs-type">boolean</span> equals(<span class="hljs-keyword">Object</span> obj) &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;<br>&#125;<br><br><span class="hljs-built_in">public</span> static <span class="hljs-type">void</span> main(String[]args) &#123;<br>HashSetDemo set1=<span class="hljs-built_in">new</span> HashSetDemo();<br>set1.<span class="hljs-keyword">add</span>(<span class="hljs-number">123</span>);<br>set1.<span class="hljs-keyword">add</span>(<span class="hljs-number">123</span>);//æœªæ’å…¥HashSetä¸­<br><br><span class="hljs-type">Integer</span> i1=<span class="hljs-built_in">new</span> <span class="hljs-type">Integer</span>(<span class="hljs-number">123</span>);<br><span class="hljs-type">Integer</span> i2=<span class="hljs-built_in">new</span> <span class="hljs-type">Integer</span>(<span class="hljs-number">123</span>);<br><span class="hljs-type">Integer</span> i3=<span class="hljs-built_in">new</span> <span class="hljs-type">Integer</span>(<span class="hljs-number">456</span>);<br><span class="hljs-type">Integer</span> i4=<span class="hljs-built_in">new</span> <span class="hljs-type">Integer</span>(<span class="hljs-number">456</span>);<br>set1.<span class="hljs-keyword">add</span>(i1);//æœªæ’å…¥HashSetä¸­<br>set1.<span class="hljs-keyword">add</span>(i2);//æœªæ’å…¥HashSetä¸­<br>set1.<span class="hljs-keyword">add</span>(i3);<br>set1.<span class="hljs-keyword">add</span>(i4);//æœªæ’å…¥HashSetä¸­<br><br>set1.<span class="hljs-keyword">add</span>(&quot;123&quot;);<br><br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(set1);<br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(set1.size());<br>&#125;<br>&#125;<br><span class="hljs-comment">/*æœ¬æ¥ä¹‹æ„æ˜¯å°†é‡å¤å…ƒç´ æ’å…¥HashSetï¼Œä½†ä¸Šé¢çš„ä»£ç æ²¡æœ‰æˆåŠŸ</span><br><span class="hljs-comment">[123, 456, 123]</span><br><span class="hljs-comment">3</span><br><span class="hljs-comment">*/</span><br></code></pre></td></tr></table></figure><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">//MDZZ  ä¸Šä¾‹æƒ³æ˜ç™½åŸå› åå°±æƒ³ç€é‡å†™Integerç±»ä¸­çš„HashCodeå’Œequalsæ–¹æ³•ï¼ŒIntegeræ˜¯è¢«finalä¿®é¥°çš„ã€‚</span><br><span class="hljs-comment">//æ­£ç¡®æ¡ˆä¾‹</span><br><span class="hljs-comment">//public class HashSetDemo extends HashSet&#123;</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HashSetDemo</span></span>&#123;<br>int i;<br><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-title">HashSetDemo</span>(<span class="hljs-params">int i</span>)</span> &#123;<br><span class="hljs-built_in">this</span>.i=i;<br>&#125;<br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> int <span class="hljs-function"><span class="hljs-title">hashCode</span>(<span class="hljs-params"></span>)</span> &#123;<br>Random rd=<span class="hljs-keyword">new</span> Random(System.currentTimeMillis());<br><span class="hljs-keyword">return</span> rd.nextInt();<br>&#125;<br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-built_in">boolean</span> <span class="hljs-function"><span class="hljs-title">equals</span>(<span class="hljs-params"><span class="hljs-built_in">Object</span> obj</span>)</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>&#125;<br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-built_in">String</span> <span class="hljs-function"><span class="hljs-title">toString</span>(<span class="hljs-params"></span>)</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&quot;</span>+i;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">main</span>(<span class="hljs-params"><span class="hljs-built_in">String</span>[]args</span>)</span> &#123;<br>HashSet set1=<span class="hljs-keyword">new</span> HashSet();<br><br>HashSetDemo hsd1=<span class="hljs-keyword">new</span> HashSetDemo(<span class="hljs-number">1234</span>);<br>HashSetDemo hsd2=<span class="hljs-keyword">new</span> HashSetDemo(<span class="hljs-number">1234</span>);<br>set1.add(hsd1);<br>set1.add(hsd2);<br><br>System.out.println(set1);<br>System.out.println(set1.size());<br>&#125;<br>&#125;<br><span class="hljs-comment">/*é‡å†™è‡ªå®šä¹‰å¯¹è±¡çš„HashCodeå’Œequalsæ–¹æ³•</span><br><span class="hljs-comment">[1234, 1234]</span><br><span class="hljs-comment">2</span><br><span class="hljs-comment">*/</span><br></code></pre></td></tr></table></figure><p>â‘£  å®é™…å¼€å‘æƒ…å†µåˆ†æï¼ˆ<strong>é‡ç‚¹</strong>ï¼‰</p><p>1ã€ä»ä¸Šé¢çš„ç¤ºä¾‹æ¥çœ‹ï¼Œç»“æœä¸¤ä¸ªéƒ½æ·»åŠ è¿›å»äº†ï¼ŒåŸå› ï¼šhashCodeä¸ç­‰ï¼Œequalsä¸ºfalse</p><p>2ã€ä»ä¸šåŠ¡ä¸Šæ¥çœ‹ï¼ˆéœ€è¦å‘æºç æ—¶ä»£å­¦ç”Ÿç®¡ç†ç³»ç»Ÿä¸­æ·»åŠ ä¸¤ä¸ªå­¦ç”Ÿä¿¡æ¯ï¼‰ï¼Œè§‰å¾—è¿™ä¸¤å¤©æ•°æ®æ˜¯åŒä¸€ä¸ªäºº</p><p>3ã€åº”è¯¥æ€ä¹ˆåšï¼š åœ¨Studentä¸­è¦†å†™hashCode å’Œequalsæ–¹æ³•</p><p>4ã€æ€ä¹ˆè¦†å†™ï¼Ÿ</p><p>è¦†å†™çš„æ—¶å€™åº”è¯¥å‚è€ƒå®é™…ä¸šåŠ¡ä¸­çš„æ¯”è¾ƒè§„åˆ™ï¼Œä¾‹å¦‚å§“åï¼Œå¹´é¾„ç­‰ï¼ˆè¿˜å¾—çœ‹Studentç±»ä¸­æœ‰å“ªäº›å­—æ®µï¼Œå¹¶ä¸”è¿™äº›å­—æ®µæ˜¯ä¸šåŠ¡äººå‘˜åˆ¤æ–­çš„æ ‡å‡†ï¼‰</p></blockquote><h3 id="TreeSet"><a href="#TreeSet" class="headerlink" title="TreeSet"></a>TreeSet</h3><p>ç‰¹ç‚¹ï¼šæ— åºï¼ˆä¸ä¿è¯æˆ‘ä»¬æ·»åŠ å…ƒç´ çš„é¡ºåºï¼‰ï¼›ä¸é‡å¤ï¼ˆä¸èƒ½æ·»åŠ é‡å¤å…ƒç´ ï¼‰ï¼›</p><p>å†…éƒ¨å­˜å‚¨æœ‰ä¸€å®šçš„é¡ºåº</p><p>TreeSetä¸€æ—¦æ·»åŠ äº†ç¬¬ä¸€ä¸ªå…ƒç´ åå°±ä¸èƒ½åœ¨æ·»åŠ å…¶ä»–æ•°æ®ç±»å‹çš„å…ƒç´ ï¼Œåªèƒ½æ·»åŠ ç›¸åŒæ•°æ®ç±»å‹çš„å…ƒç´ ï¼Œé™¤éå°†å®¹å™¨ä¸­æ‰€æœ‰çš„å…ƒç´ å…¨éƒ¨æ¸…ç©ºï¼Œæ‰èƒ½æ·»åŠ æ–°çš„æ•°æ®ç±»å‹çš„å…ƒç´ ã€‚</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">package cn.kongwei_liao.DataStruct;<br><span class="hljs-keyword">import</span> java.util.TreeSet;<br><span class="hljs-built_in">public</span> <span class="hljs-keyword">class</span> TreeSetDemo &#123;<br><span class="hljs-built_in">public</span> static <span class="hljs-type">void</span> main(String[] args) &#123;<br>// TODO Auto-<span class="hljs-keyword">generated</span> <span class="hljs-keyword">method</span> stub<br>TreeSet ts=<span class="hljs-built_in">new</span> TreeSet();<br>ts.<span class="hljs-keyword">add</span>(<span class="hljs-number">1</span>);<br>ts.<span class="hljs-keyword">add</span>(<span class="hljs-number">1</span>);<br>ts.<span class="hljs-keyword">add</span>(<span class="hljs-number">4</span>);<br>ts.<span class="hljs-keyword">add</span>(<span class="hljs-number">5</span>);<br>ts.<span class="hljs-keyword">add</span>(<span class="hljs-number">2</span>);<br>ts.<span class="hljs-keyword">add</span>(<span class="hljs-number">3</span>);<br>//ts.<span class="hljs-keyword">add</span>(&quot;3&quot;);//RuntimeException<br><br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(ts);<br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(ts.size());<br>&#125;<br>&#125;<br><span class="hljs-comment">/*æ˜æ˜æ˜¯ä¹±åºæ·»åŠ çš„ï¼Œä¸ºä»€ä¹ˆæ‰“å°ç»“æœæ˜¯æœ‰é¡ºåºçš„ï¼Ÿ</span><br><span class="hljs-comment">[1, 2, 3, 4, 5]</span><br><span class="hljs-comment">5</span><br><span class="hljs-comment">*/</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">ç»“æœï¼š è™½ç„¶æ‰“å°ç»“æœçš„é¡ºåºå’Œæ·»åŠ é¡ºåºå¯èƒ½ä¸ä¸€è‡´ï¼Œä½†æ˜¯æ„Ÿè§‰ç»“æœæ˜¯æœ‰æŸç§è§„åˆ™æ’åºçš„</span><br><span class="hljs-comment">     Stringç±»ä¹Ÿå®ç°äº†Comparableæ¥å£ï¼ŒStringå¯¹è±¡å¯ä»¥è°ƒç”¨compareToæ–¹æ³•</span><br><span class="hljs-comment">*/</span><br></code></pre></td></tr></table></figure><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs processing"><span class="hljs-keyword">package</span> cn.kongwei_liao.DataStruct;<br><span class="hljs-keyword">import</span> java.util.TreeSet;<br><span class="hljs-keyword">public</span> class TreeSetDemo &#123;<br><span class="hljs-built_in">int</span> i;<br><span class="hljs-keyword">public</span> TreeSetDemo(<span class="hljs-built_in">int</span> i)&#123;<br><span class="hljs-keyword">this</span>.i=i;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> main(<span class="hljs-keyword">String</span>[] args) &#123;<br><span class="hljs-comment">// TODO Auto-generated method stub</span><br>TreeSet ts=<span class="hljs-keyword">new</span> TreeSet();<br><br>TreeSetDemo tsd1=<span class="hljs-keyword">new</span> TreeSetDemo(<span class="hljs-number">1</span>);<br>TreeSetDemo tsd2=<span class="hljs-keyword">new</span> TreeSetDemo(<span class="hljs-number">1</span>);<br>TreeSetDemo tsd3=<span class="hljs-keyword">new</span> TreeSetDemo(<span class="hljs-number">2</span>);<br>ts.<span class="hljs-built_in">add</span>(tsd1);<br>ts.<span class="hljs-built_in">add</span>(tsd2);<br>ts.<span class="hljs-built_in">add</span>(tsd3);<br><br>System.out.<span class="hljs-built_in">println</span>(ts);<br>System.out.<span class="hljs-built_in">println</span>(ts.<span class="hljs-built_in">size</span>());<br>&#125;<br>&#125;<br><span class="hljs-comment">/*</span><br><span class="hljs-comment">ç»“æœï¼š </span><br><span class="hljs-comment">ç–‘é—®1ï¼šä¸Šé¢çš„ä»£ç æ·»åŠ çš„éƒ½æ˜¯åŒç§ç±»å‹çš„æ•°æ®ï¼Œä¸ºä»€ä¹ˆè¿˜æŠ¥é”™ï¼›</span><br><span class="hljs-comment">ç–‘é—®2ï¼šä¸ºä»€ä¹ˆæç¤ºè¦æŠŠStudentè½¬æˆComparable</span><br><span class="hljs-comment">æ­£å¸¸æƒ…å†µ   ----ã€‹ TreeSet  æˆ–è€…  Comparableçš„æ–‡æ¡£</span><br><span class="hljs-comment">*/</span><br></code></pre></td></tr></table></figure><p><img src="/2019/11/11/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB%EF%BC%88%E4%B8%89%EF%BC%89/tse.png" alt="tse"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> cn.kongwei_liao.DataStruct;<br><span class="hljs-keyword">import</span> java.util.TreeSet;<br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TreeSetDemo</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Comparable</span> </span>&#123;<br><span class="hljs-keyword">int</span> i;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">TreeSetDemo</span><span class="hljs-params">(<span class="hljs-keyword">int</span> i)</span></span>&#123;<br><span class="hljs-keyword">this</span>.i=i;<br>&#125;<br><span class="hljs-meta">@Override</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">compareTo</span><span class="hljs-params">(Object o)</span> </span>&#123;<br><span class="hljs-comment">// TODO Auto-generated method stub</span><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br><span class="hljs-comment">// TODO Auto-generated method stub</span><br>TreeSet ts=<span class="hljs-keyword">new</span> TreeSet();<br><br>TreeSetDemo tsd1=<span class="hljs-keyword">new</span> TreeSetDemo(<span class="hljs-number">1</span>);<br>TreeSetDemo tsd2=<span class="hljs-keyword">new</span> TreeSetDemo(<span class="hljs-number">1</span>);<br>TreeSetDemo tsd3=<span class="hljs-keyword">new</span> TreeSetDemo(<span class="hljs-number">2</span>);<br>ts.add(tsd1);<br>ts.add(tsd2);<br>ts.add(tsd3);<br><br><br>System.out.println(ts);<br>System.out.println(ts.size());<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="/2019/11/11/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB%EF%BC%88%E4%B8%89%EF%BC%89/compare.png" alt="c"></p><p><img src="/2019/11/11/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB%EF%BC%88%E4%B8%89%EF%BC%89/ts.jpg" alt="im"></p><blockquote><p>TreeSetå†…éƒ¨å­˜å‚¨æ•°æ®æ˜¯æŒ‰ç…§å¤§å°è¿›è¡Œæ’åºå­˜å‚¨çš„</p><p>é—®é¢˜ï¼šå¯¹è±¡çš„å¤§å°æ˜¯è°å†³å®šçš„ï¼ŸTreeSetèƒ½ç¡®å®šå—ï¼Ÿ</p><p>ä¾‹å¦‚ï¼š</p><p>â€‹    éœ€è¦å‘TreeSetä¸­æ·»åŠ ä¸¤ä¸ªå¯¹è±¡å…ƒç´ </p><p>â€‹    new Student(â€œaliâ€,18)</p><p>â€‹    new Student(â€œajieâ€,19)</p><p>â€‹    TreeSetä¸å¯èƒ½ä¹Ÿä¸åº”è¯¥è‡ªå·±æƒ³ä¸€ä¸ªè§„åˆ™æ¥å†³å®šå¤§å°ï¼Œè€Œåº”è¯¥æœ‰æˆ‘ä»¬æ¥æŒ‡å®šå¥½è§„åˆ™ï¼ˆå¦‚æŒ‰å¹´é¾„å¤§å°ï¼‰</p><p>â€‹    â€“ã€‹ç»™æ‰€æœ‰çš„å¯¹è±¡éƒ½æä¾›ä¸€ä¸ªæ¯”è¾ƒå¤§å°çš„æ–¹æ³•</p><p>â€‹    TreeSetæ€ä¹ˆæ¯”è¾ƒï¼šç›´æ¥è°ƒç”¨å¯¹è±¡ä¸Šé¢æ¯”è¾ƒå¤§å°çš„æ–¹æ³•çœ‹ç»“æœ</p><p>é—®é¢˜ï¼šTreeSetæ—©å°±å†™å¥½äº†ï¼Œæˆ‘ä»¬æ€ä¹ˆå‘Šè¯‰ä»–ä»¬ä½¿ç”¨å“ªä¸ªæ¯”è¾ƒæ–¹æ³•å‘¢ï¼Ÿ</p><p>å…¶å®åœ¨è®¾è®¡TreeSetä¹‹å‰Javaè®¾è®¡äº†ä¸€ä¸ªæ¥å£   Comparableæ¥å£     æœ‰compareTo(Object obj)æ¯”è¾ƒå¤§å°çš„æ–¹æ³•</p><p>æ‰€ä»¥ï¼š</p><p>â€‹    TreeSetä¸­ä¼šè°ƒç”¨å¯¹è±¡çš„compareTo(Object obj)æ–¹æ³•è¿›è¡Œæ¯”è¾ƒ</p><p>â€‹    æˆ‘ä»¬å­˜å…¥TreeSetçš„å¯¹è±¡å¿…é¡»å®ç°äº†Comparableæ¥å£</p></blockquote><h3 id="è‡ªç„¶æ’åºå’Œå®šåˆ¶æ’åºï¼ˆæ¯”è¾ƒå™¨ï¼‰"><a href="#è‡ªç„¶æ’åºå’Œå®šåˆ¶æ’åºï¼ˆæ¯”è¾ƒå™¨ï¼‰" class="headerlink" title="è‡ªç„¶æ’åºå’Œå®šåˆ¶æ’åºï¼ˆæ¯”è¾ƒå™¨ï¼‰"></a>è‡ªç„¶æ’åºå’Œå®šåˆ¶æ’åºï¼ˆæ¯”è¾ƒå™¨ï¼‰</h3><h4 id="è‡ªç„¶æ’åº-Comparable"><a href="#è‡ªç„¶æ’åº-Comparable" class="headerlink" title="è‡ªç„¶æ’åº Comparable"></a>è‡ªç„¶æ’åº Comparable</h4><p>ä»TreeSetçš„APIæ–‡æ¡£ä¸­ç‚¹å‡» â€œè‡ªç„¶æ’åºâ€ â€”ã€‹ Comparableæ¥å£ä¸­</p><blockquote><p>æ–‡æ¡£ä¸­çš„æè¿°ï¼š</p><p>â€‹    æ­¤æ¥å£å¼ºè¡Œå¯¹å®ç°å®ƒçš„æ¯ä¸ªç±»çš„å¯¹è±¡è¿›è¡Œæ•´ä½“æ’åºã€‚è¿™ç§æ’åºè¢«ç§°ä¸ºç±»çš„è‡ªç„¶æ’åºï¼Œç±»çš„ compareTo æ–¹æ³•è¢«ç§°ä¸ºå®ƒçš„è‡ªç„¶æ¯”è¾ƒæ–¹æ³•</p><p>ç†è§£ï¼š</p><p>â€‹    å¦‚æœä¸€ä¸ªç±»å®ç°äº†Comparableæ¥å£ï¼Œå¯ä»¥è®¤ä¸ºè¿™ä¸ªç±»çš„å¯¹è±¡å…·æœ‰è‡ªç„¶æ’åºçš„èƒ½åŠ›ï¼ˆæœ¬è´¨å°±æ˜¯è¿™ä¸ªå¯¹è±¡å¯ä»¥è°ƒç”¨æ¯”è¾ƒçš„æ–¹æ³•compareToï¼‰ï¼Œè¿™ç§æ¯”è¾ƒå’Œæ’åºçš„è§„åˆ™å°±æ˜¯è‡ªç„¶æ’åº</p><p><img src="/2019/11/11/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB%EF%BC%88%E4%B8%89%EF%BC%89/clip_im.jpg" alt="img"></p><p><img src="/2019/11/11/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB%EF%BC%88%E4%B8%89%EF%BC%89/c02.jpg" alt="img"></p></blockquote><h4 id="å®šåˆ¶æ’åºï¼ˆæ¯”è¾ƒå™¨ï¼‰Comparator"><a href="#å®šåˆ¶æ’åºï¼ˆæ¯”è¾ƒå™¨ï¼‰Comparator" class="headerlink" title="å®šåˆ¶æ’åºï¼ˆæ¯”è¾ƒå™¨ï¼‰Comparator"></a>å®šåˆ¶æ’åºï¼ˆæ¯”è¾ƒå™¨ï¼‰Comparator</h4><blockquote><p>1ã€æ ¹æ®ä¸Šé¢çš„åˆ†æï¼Œå¦‚æœæˆ‘ä»¬çš„å¯¹è±¡æ²¡æœ‰å®ç°Comparableæ¥å£ï¼Œæ„Ÿè§‰å°±æ— æ³•æ·»åŠ åˆ°TreeSetä¸­å»ï¼›ï¼ˆè¿™äº›å¯¹è±¡å°±æ²¡æœ‰è‡ªç„¶æ’åºçš„èƒ½åŠ›ï¼‰ï¼›</p><p>2ã€ä¸Šé¢çš„ç¤ºä¾‹è®¾è®¡æœ‰ç‚¹é—®é¢˜ï¼šStudentç±»ä¸­è¦†å†™çš„compareToæ–¹æ³•æŒ‰ç…§å¹´é¾„ä»å°åˆ°å¤§æ’åˆ—çš„ï¼Œä¸‡ä¸€æœ‰çš„äººä¹Ÿæ˜¯ç”¨æˆ‘ä»¬çš„Studentï¼Œå¸Œæœ›å¹´é¾„ä»å¤§åˆ°å°è¿›è¡Œæ’åˆ—ï¼Œæ€ä¹ˆåŠï¼Ÿè¿˜ä¾‹å¦‚ï¼Œæœ‰äººå¸Œæœ›æŒ‰ç…§åå­—é•¿åº¦æ’åºï¼Œæ€ä¹ˆåŠï¼Ÿ</p><p>ä¸ç®¡Studenté‡Œé¢ä½¿ç”¨ä½•ç§è§„åˆ™éƒ½ä¸èƒ½æ»¡è¶³æ‰€æœ‰çš„äºº</p><p>3ã€è§£å†³åŠæ³•ï¼š å¯ä»¥ç»™TreeSetå•ç‹¬çš„æä¾›ä¸€ä¸ªæ¯”è¾ƒå™¨ï¼ˆç†è§£ä¸ºæ¯”è¾ƒçš„ä¸€ä¸ªå·¥å…·ï¼‰</p><p>4ã€Comparator æ˜¯ä¸€ä¸ªæ¯”è¾ƒå™¨çš„æ¥å£ï¼ˆæ ‡å‡†ï¼‰ï¼Œå¿…é¡»å¾—æœ‰è¿›è¡Œæ¯”è¾ƒçš„æ–¹æ³• ï¼šcompare(Object o1,Object o2);</p><p>è‡ªå®šä¹‰ä¸€ä¸ªç±»å®ç°Comparatoræ¥å£ï¼Œå…¶ä¸­å†™æ¯”è¾ƒè§„åˆ™ â€”ã€‹ æ¯”è¾ƒå™¨çš„æ¨¡æ¿</p><p>æˆ‘ä»¬ç°åœ¨éœ€è¦çš„æ˜¯ä¸€ä¸ªå…·ä½“çš„æ¯”è¾ƒå™¨å¯¹è±¡</p></blockquote><p><img src="/2019/11/11/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB%EF%BC%88%E4%B8%89%EF%BC%89/cge002.jpg" alt="img"></p><h4 id="åˆ¤æ–­é‡å¤çš„æ ‡å‡†"><a href="#åˆ¤æ–­é‡å¤çš„æ ‡å‡†" class="headerlink" title="åˆ¤æ–­é‡å¤çš„æ ‡å‡†"></a>åˆ¤æ–­é‡å¤çš„æ ‡å‡†</h4><p>1ã€å¦‚æœé‡‡ç”¨çš„æ˜¯è‡ªç„¶æ’åºè°ƒç”¨å¯¹è±¡çš„compareToæ–¹æ³•ï¼Œå¦‚æœè¿”å›0 è¡¨ç¤ºç›¸ç­‰ï¼›</p><ul><li>å¤§äºä¸”è¿”å›æ­£æ•°ï¼Œå‡åºæ’åˆ— =&gt; å°äºä¸”è¿”å›è´Ÿæ•°ï¼Œå‡åºæ’åˆ—  å¯¹åº”</li><li>å¤§äºä¸”è¿”å›è´Ÿæ•°ï¼Œé™åºæ’åˆ— =&gt; å°äºä¸”è¿”å›æ­£æ•°ï¼Œé™åºæ’åˆ—      å¯¹åº”</li></ul><p>2ã€å¦‚æœä½¿ç”¨çš„å®šåˆ¶æ’åºï¼ˆæ¯”è¾ƒå™¨ï¼‰ï¼Œè°ƒç”¨æ¯”è¾ƒå™¨çš„æ–¹æ³•compare è¿”å›0 è¡¨ç¤ºç›¸ç­‰ï¼›</p><ul><li>å¤§äºä¸”è¿”å›æ­£æ•°ï¼Œå‡åºæ’åˆ— =&gt; å°äºä¸”è¿”å›è´Ÿæ•°ï¼Œå‡åºæ’åˆ—  å¯¹åº”</li><li>å¤§äºä¸”è¿”å›è´Ÿæ•°ï¼Œé™åºæ’åˆ— =&gt; å°äºä¸”è¿”å›æ­£æ•°ï¼Œé™åºæ’åˆ—      å¯¹åº”</li></ul><p><strong>å¦‚æœä¸€ä¸ªç±»å·²ç»å®ç°äº†Comparableæ¥å£ï¼Œç„¶åæŠŠè¿™ä¸ªç±»çš„å¯¹è±¡æ”¾å…¥ä¸€ä¸ªå…·æœ‰æ¯”è¾ƒå™¨çš„TreeSet,é‚£ä¹ˆTreeSetä¼šæŒ‰ç…§å“ªç§è§„åˆ™æ¥æ¯”è¾ƒå‘¢ï¼Ÿ</strong></p><h3 id="Collectionä½“ç³»"><a href="#Collectionä½“ç³»" class="headerlink" title="Collectionä½“ç³»"></a>Collectionä½“ç³»</h3><p><img src="/2019/11/11/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB%EF%BC%88%E4%B8%89%EF%BC%89/Collection.png" alt="1"></p><p>é¢è¯•ç»å¸¸é—®çš„é—®é¢˜ï¼š</p><p>1ã€è¯·è¯´è¯´ArrayList LinkedList HashSet  TreeSet åº•å±‚çš„å®ç°åŸç†ï¼ˆå»ºè®®å¤šå¤šç™¾åº¦å‡ æ¬¡ï¼‰ï¼Œç›®å‰å…ˆäº†è§£ä¸€ä¸ªå¤§æ¦‚</p><p>2ã€è¯·è¯´è¯´==å’Œequalsçš„åŒºåˆ«</p><h3 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h3><h4 id="ä»€ä¹ˆæ˜¯Mapï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯Mapï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯Mapï¼Ÿ"></a>ä»€ä¹ˆæ˜¯Mapï¼Ÿ</h4><p>Mapä¹Ÿæ˜¯ä¸€ç§å®¹å™¨ï¼ŒAPIæ–‡æ¡£æè¿°å°†é”®æ˜ å°„åˆ°å€¼çš„å¯¹è±¡ã€‚ä¸€ä¸ªä¸€å°„ï¼ˆä¸€ä¸ªMapå¯¹è±¡ï¼‰ä¸èƒ½åŒ…å«é‡å¤çš„é”®ï¼Œæ¯ä¸€ä¸ªé”®åªèƒ½æ˜ å°„åˆ°ä¸€ä¸ªå€¼ã€‚</p><p>é”®ã€å€¼ã€é”®å€¼å¯¹å’Œæ˜ å°„</p><p><img src="/2019/11/11/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB%EF%BC%88%E4%B8%89%EF%BC%89/map.png" alt="img"></p><blockquote><p>Collectionä½“ç³»ä¸­ï¼Œå­˜å‚¨çš„éƒ½æ˜¯å•ä¸ªçš„æ•°æ®ï¼Œæ•°æ®ä¹‹é—´æ²¡æœ‰å…³ç³»ã€‚</p><p>Mapå’ŒCollectionæ˜¯ä¸¤ä¸ªæ²¡æœ‰å…³ç³»å¹¶åˆ—çš„ä½“ç³»ï¼ˆä¸»è¦ä»ä»£ç ç»“æ„æ¥çœ‹ï¼‰</p><p>Mapçš„å£°æ˜ï¼špublic interface Map{}</p></blockquote><h5 id="Mapçš„ç»“æ„"><a href="#Mapçš„ç»“æ„" class="headerlink" title="Mapçš„ç»“æ„"></a>Mapçš„ç»“æ„</h5><p><img src="/2019/11/11/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB%EF%BC%88%E4%B8%89%EF%BC%89/MapStruct.png" alt="map"></p><p>Mapåœºæ™¯ï¼šè´¦å·å¯†ç ã€æƒ…ä¾£å¤«å¦»å’ŒäºŒç»´åæ ‡ç­‰ï¼›</p><h5 id="Mapä¸­çš„é‡è¦æ–¹æ³•"><a href="#Mapä¸­çš„é‡è¦æ–¹æ³•" class="headerlink" title="Mapä¸­çš„é‡è¦æ–¹æ³•"></a>Mapä¸­çš„é‡è¦æ–¹æ³•</h5><blockquote><p>åŸºæœ¬æ–¹æ³•åˆ—è¡¨ï¼š==========================</p><p>1ã€ Object put(Object key,Object value);  å¦‚æœå½“å‰æ·»åŠ çš„è¿™ä¸ªkeyå·²ç»å­˜åœ¨äº†ï¼Œä¼šè¦†ç›–è¿™ä¸ªé”®ä¹‹å‰çš„å€¼ï¼Œè¿”å›çš„æ˜¯ä¹‹å‰çš„valueå€¼</p><p>2ã€ boolean containsKey(Object key) </p><p>3ã€ boolean containsValue(Object value) </p><p>4ã€ Object get(Object key) ;  æ ¹æ®æŒ‡å®šçš„é”®keyæ‰¾åˆ°å¯¹åº”çš„å€¼ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°è¿”å› null</p><p>5ã€ remove(Object key) ;   åˆ é™¤æŒ‡å®škeyå¯¹åº”çš„é‚£ä¸€å¯¹</p></blockquote><blockquote><p>é‡ç‚¹æ–¹æ³•åˆ—è¡¨ï¼š==========================</p><p>6ã€ Collection values()  è¿”å›ä¸€ä¸ªMapä¸­çš„æ‰€æœ‰çš„valueå€¼</p><p>7ã€ Set keySet()  è¿”å›æ‰€æœ‰çš„keyå€¼çš„é›†åˆ</p><p>8ã€ Set entrySet() è¿”å›æ‰€æœ‰çš„entryå¯¹è±¡</p><p>é—®é¢˜ï¼š ä¸ºä»€ä¹ˆç¬¬ä¸€ä¸ªæ˜¯è¿”å›Collection äºŒä¸‰ä¸ªè¿”å›çš„æ˜¯Set?</p><p>key  entryéƒ½æ˜¯ä¸èƒ½å¤Ÿé‡å¤çš„â€” Set</p></blockquote><h4 id="Mapçš„éå†"><a href="#Mapçš„éå†" class="headerlink" title="Mapçš„éå†"></a>Mapçš„éå†</h4><p>ä½¿ç”¨é€‰æ‹©ï¼š</p><ol><li>å¦‚æœåªæ˜¯è·å–æ‰€æœ‰ä¸€ä¸ªå€¼ï¼Œæ¨èä½¿ç”¨  values()æ–¹æ³•</li><li>å¦‚æœåªæ˜¯è·å–æ‰€æœ‰çš„keyï¼Œæ¨èä½¿ç”¨keySet()æ–¹æ³•,ä½†æ˜¯ä¸€èˆ¬ä¸ä¼šç”¨ï¼Œå› ä¸ºåªæœ‰keyï¼Œä¸€èˆ¬æ²¡æœ‰ä»»ä½•æ„ä¹‰</li><li>å¦‚æœè·å–æ‰€æœ‰çš„key-valueï¼Œå°±ä½¿ç”¨entrySet()ï¼Œä¸è¦ç”¨å…ˆé€šè¿‡keySet()è·å–keyï¼Œå†ç”¨get()è·å–å…·ä½“çš„valueï¼Œè¿™æ ·ä¼šå¯¼è‡´äºŒæ¬¡æŸ¥è¯¢ï¼Œæ•ˆç‡ä½ä¸‹</li></ol><blockquote><p>è¯´æ˜ï¼š åªè€ƒè™‘æˆ‘ä»¬è‡ªå·±æŠŠæ”¾è¿›å»çš„key-valueéƒ½ä¸€ä¸ªä¸€ä¸ªæ‹¿å‡ºæ¥</p><p>1ã€foreach å¤±è´¥äº†ï¼</p><p>â€‹    åŸå› ï¼šMapå’ŒIterableæ²¡æœ‰ä»»ä½•å…³ç³»</p><p>2ã€æ™®é€šfor/ while / do-while  å¤±è´¥</p><p>â€‹    åŸå› ï¼š Mapä¸­æ²¡æœ‰é€šè¿‡ç´¢å¼•æ¥è·å¾—æ•°æ®çš„æ–¹æ³•</p><p>3ã€è¿­ä»£å™¨ å¤±è´¥ï¼</p><p>â€‹    åŸå› ï¼š </p><p>â€‹    â‘  Mapæ²¡æœ‰å®ç°Iterableæ¥å£å°±æ²¡æœ‰å…¶ä¸­è·å¾—è¿­ä»£å™¨çš„æ–¹æ³•ï¼›</p><p>â€‹    â‘¡ Mapä¸­ä¹Ÿæ²¡æœ‰è‡ªå·±è®¾è®¡ä¸€ä¸ªè·å¾—è¿­ä»£å™¨çš„æ–¹æ³•</p></blockquote><p>éå†æ–¹æ³•ä¸€ï¼š</p><p>â‘ å…ˆè·å¾—æ‰€æœ‰çš„key  â€“ã€‹ set</p><p>â‘¡éå†set ï¼Œé€šè¿‡è°ƒç”¨Object get(Object key) è·å¾—å¯¹åº”çš„value</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs arduino">Map m = <span class="hljs-keyword">new</span> HashMap();<br>m.<span class="hljs-built_in">put</span>(<span class="hljs-string">&quot;å°æ˜&quot;</span>, <span class="hljs-number">90</span>);<br>m.<span class="hljs-built_in">put</span>(<span class="hljs-string">&quot;å°é©¬&quot;</span>, <span class="hljs-number">60</span>);<br>m.<span class="hljs-built_in">put</span>(<span class="hljs-string">&quot;å°éƒ­&quot;</span>, <span class="hljs-number">60</span>);<br>Set keys = m.keySet();<br><span class="hljs-keyword">for</span> (Object k : keys) &#123;<br>System.out.<span class="hljs-built_in">println</span>(k+<span class="hljs-string">&quot;&lt;----&gt;&quot;</span>+m.<span class="hljs-built_in">get</span>(k));<br>&#125;<br></code></pre></td></tr></table></figure><p>éå†æ–¹æ³•äºŒï¼š</p><p>â‘  å¾—åˆ°æ‰€æœ‰çš„Entryå¯¹è±¡ ï¼Œé€šè¿‡è°ƒç”¨æ–¹æ³• Set entrySet();</p><p>â‘¡ éå†ä¸Šé¢çš„entry çš„é›†åˆï¼Œä¾æ¬¡ä»æ¯ä¸€ä¸ªEntryå¯¹è±¡ä¸­å–å‡ºå¯¹åº”çš„key-value</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">Map m = <span class="hljs-keyword">new</span> <span class="hljs-constructor">HashMap()</span>;<br>m.put(<span class="hljs-string">&quot;å°æ˜&quot;</span>, <span class="hljs-number">90</span>);<br>m.put(<span class="hljs-string">&quot;å°é©¬&quot;</span>, <span class="hljs-number">60</span>);<br>m.put(<span class="hljs-string">&quot;å°éƒ­&quot;</span>, <span class="hljs-number">60</span>);<br>Set entrys = m.entry<span class="hljs-constructor">Set()</span>;<br><span class="hljs-keyword">for</span> (Object en : entrys) &#123;<span class="hljs-comment">//Setå®ç°äº†Iterable</span><br><span class="hljs-comment">// éœ€è¦æŠŠenå¼ºåˆ¶è½¬æˆ Entryç±»å‹</span><br>Entry e = (Entry)en;<br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(e.get<span class="hljs-constructor">Key()</span>+<span class="hljs-string">&quot;--&quot;</span>+e.get<span class="hljs-constructor">Value()</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="Mapçš„ç‰¹ç‚¹åŠä½¿ç”¨åœºæ™¯é€‰æ‹©"><a href="#Mapçš„ç‰¹ç‚¹åŠä½¿ç”¨åœºæ™¯é€‰æ‹©" class="headerlink" title="Mapçš„ç‰¹ç‚¹åŠä½¿ç”¨åœºæ™¯é€‰æ‹©"></a>Mapçš„ç‰¹ç‚¹åŠä½¿ç”¨åœºæ™¯é€‰æ‹©</h4><p>ç‰¹ç‚¹ï¼š</p><ol><li><p>HashMapä¸­kçš„å€¼æ²¡æœ‰é¡ºåºï¼Œå¸¸ç”¨æ¥åšç»Ÿè®¡ã€‚<br>jdk1.8ä»¥åhashMapæºç  å˜äº†ï¼Œåº•å±‚ä¼˜åŒ–äº†</p><p><img src="/2019/11/11/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB%EF%BC%88%E4%B8%89%EF%BC%89/treeify1.png" alt="img"></p><p>è¡¨ç¤ºå½“ç›¸åŒhashå€¼ç›¸åŒçš„å…ƒç´ å¤§äº8ä¸ªæ—¶å€™ï¼Œå­˜å‚¨ç»“æ„ä¼šå˜æˆçº¢é»‘æ ‘æ¥å­˜å‚¨ï¼Œè€Œä¹‹å‰æ˜¯é“¾è¡¨ç»“æ„</p></li><li><p>LinkedHashMapå§ã€‚å®ƒå†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªé“¾è¡¨ï¼Œä¿æŒKeyæ’å…¥çš„é¡ºåºã€‚è¿­ä»£çš„æ—¶å€™ï¼Œä¹Ÿæ˜¯æŒ‰ç…§æ’å…¥é¡ºåºè¿­ä»£ï¼Œè€Œä¸”è¿­ä»£æ¯”HashMapå¿«ã€‚</p></li><li><p>TreeMapçš„é¡ºåºæ˜¯Keyçš„è‡ªç„¶é¡ºåºï¼ˆå¦‚æ•´æ•°ä»å°åˆ°å¤§ï¼Œé»˜è®¤æ˜¯æŒ‰é”®å€¼çš„å‡åºæ’åºï¼‰ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šæ¯”è¾ƒå‡½æ•°ã€‚ä½†ä¸æ˜¯æ’å…¥çš„é¡ºåºã€‚</p></li><li><p>Hashtableä¸ HashMapç±»ä¼¼,å®ƒç»§æ‰¿è‡ªDictionaryç±»ã€ä¸åŒçš„æ˜¯:<code>å®ƒä¸å…è®¸è®°å½•çš„é”®æˆ–è€…å€¼ä¸ºç©º;</code>å®ƒæ”¯æŒ<code>çº¿ç¨‹çš„åŒæ­¥</code>ã€å³ä»»ä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å†™Hashtable,å› æ­¤ä¹Ÿå¯¼è‡´äº† Hashtableåœ¨å†™å…¥æ—¶ä¼šæ¯”è¾ƒæ…¢ã€‚</p><p>æ³¨æ„ï¼šLinkedHashMapåœ¨éå†çš„æ—¶å€™ä¼šæ¯”HashMapæ…¢ï¼Œä¸è¿‡æœ‰ç§æƒ…å†µä¾‹å¤–ï¼Œå½“HashMapå®¹é‡å¾ˆå¤§ï¼Œå®é™…æ•°æ®è¾ƒå°‘æ—¶ï¼Œéå†èµ·æ¥å¯èƒ½ä¼š æ¯”LinkedHashMapæ…¢ï¼Œå› ä¸ºLinkedHashMapçš„éå†é€Ÿåº¦åªå’Œå®é™…æ•°æ®æœ‰å…³ï¼Œå’Œå®¹é‡æ— å…³ï¼Œè€ŒHashMapçš„éå†é€Ÿåº¦å’Œä»–çš„å®¹é‡æœ‰å…³ </p></li></ol><p>ä½¿ç”¨é€‰æ‹©ï¼š</p><p>ä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬é€‰ç”¨HashMapï¼Œå› ä¸ºHashMapçš„é”®å€¼å¯¹åœ¨å–å‡ºæ—¶æ˜¯éšæœºçš„ï¼Œå…¶ä¾æ®é”®çš„hashCodeå’Œé”®çš„equalsæ–¹æ³•å­˜å–æ•°æ®ï¼Œå…·æœ‰å¾ˆå¿«çš„è®¿é—®é€Ÿåº¦ï¼Œæ‰€ä»¥åœ¨Mapä¸­æ’å…¥ã€åˆ é™¤åŠç´¢å¼•å…ƒç´ æ—¶å…¶æ˜¯æ•ˆç‡æœ€é«˜çš„å®ç°ã€‚è€ŒTreeMapçš„é”®å€¼å¯¹åœ¨å–å‡ºæ—¶æ˜¯æ’è¿‡åºçš„ï¼Œæ‰€ä»¥æ•ˆç‡ä¼šä½ç‚¹</p><blockquote><p>1ã€Mapä¸­ï¼ŒHashMapå…·æœ‰è¶…é«˜çš„è®¿é—®é€Ÿåº¦ï¼Œå¦‚æœæˆ‘ä»¬åªæ˜¯åœ¨Map ä¸­æ’å…¥ã€åˆ é™¤å’Œå®šä½å…ƒç´ ï¼Œè€Œæ— å…³çº¿ç¨‹å®‰å…¨æˆ–è€…åŒæ­¥é—®é¢˜ï¼ŒHashMap æ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚</p><p>2ã€å¦‚æœè€ƒè™‘çº¿ç¨‹å®‰å…¨æˆ–è€…å†™å…¥é€Ÿåº¦çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨HashTable</p><p>3ã€å¦‚æœæƒ³æŒ‰æ€ä¹ˆå­˜çš„é¡ºåºæ€ä¹ˆå–ï¼Œæ¯”å¦‚é˜Ÿåˆ—å½¢å¼ï¼Œæ’é˜Ÿï¼Œé‚£ä¹ˆä½¿ç”¨LinkedHashMap</p><p>4ã€å¦‚æœéœ€è¦è®©MapæŒ‰ç…§keyè¿›è¡Œå‡åºæˆ–è€…é™åºæ’åºï¼Œé‚£å°±ç”¨TreeMap </p></blockquote><h3 id="Properties"><a href="#Properties" class="headerlink" title="Properties"></a>Properties</h3><p><img src="/2019/11/11/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB%EF%BC%88%E4%B8%89%EF%BC%89/Properties.png" alt="p"></p><p>ä»ä¸Šé¢çš„å…³ç³»æ¥çœ‹ï¼ŒPropertieså°±å¯ä»¥å½“æˆä¸€ä¸ªç‰¹æ®Šçš„Mapè¿›è¡Œä½¿ç”¨</p><blockquote><p>â‘  å°±æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„Map,Mapä¸­çš„æ‰€æœ‰æ–¹æ³•ï¼Œå¯ä»¥è°ƒç”¨çš„;</p><p>â‘¡ æ”¾å…¥Propertiesä¸­çš„key-valueéƒ½æ˜¯Stringç±»å‹</p><p>â‘¢ é’ˆå¯¹äºç¬¬äºŒç‚¹Propertiesä¸­æä¾›äº†ç‰¹æ®Šçš„å­˜å€¼å’Œå–å€¼çš„æ–¹æ³•ï¼Œå°½é‡ä¸è¦ç”¨Mapçš„æ–¹æ³•</p></blockquote><p>ä½œç”¨ï¼š</p><blockquote><ul><li>å°†å†…å­˜ä¸­çš„æ•°æ®å†™å…¥åˆ°ç¡¬ç›˜ä¸­</li><li>å°†ç¡¬ç›˜ä¸­çš„æ•°æ®è¯»å–åˆ°å†…å­˜ä¸­</li></ul></blockquote><p>Propertiesçš„é‡è¦æ–¹æ³•</p><blockquote><p>1ã€Object setProperty(String key, String value) </p><p>2ã€String getProperty(String key)</p><p>3ã€String getProperty(String key, String defaultValue) ; å¦‚æœé€šè¿‡keyæ²¡æœ‰æ‰¾åˆ°å¯¹åº”çš„é”®å€¼å¯¹ï¼Œè¿”å›åé¢çš„defaultValue</p><p>// ä¸‹é¢æ‰æ˜¯æœ€é‡è¦çš„</p><p>4ã€void list(PrintStream out)    ç®€å•ç†è§£ï¼š æ­¤æ–¹æ³•å¯ä»¥æŠŠPropertiesä¸­çš„æ•°æ®å†™å…¥ç£ç›˜æ–‡ä»¶</p><p>5ã€void load(InputStream inStream) ç®€å•ç†è§£ï¼š å¯ä»¥æŠŠç£ç›˜æ–‡ä»¶ä¸­çš„æ•°æ®è¯»å–åˆ°Propertiesä¸­æ¥</p></blockquote><p><img src="/2019/11/11/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB%EF%BC%88%E4%B8%89%EF%BC%89/fpro.png" alt="1"></p><p><img src="/2019/11/11/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB%EF%BC%88%E4%B8%89%EF%BC%89/fpro2.png" alt="2"></p><p>ä½¿ç”¨åœºæ™¯ï¼šè¯»å†™èµ„æºæ–‡ä»¶</p><h3 id="Collections"><a href="#Collections" class="headerlink" title="Collections"></a>Collections</h3><p>1ã€static Object max(Collection coll) è¿”å›å®¹å™¨ä¸­çš„æœ€å¤§å€¼ï¼Œå†…éƒ¨ä¼šè°ƒç”¨collä¸­çš„å¯¹è±¡çš„compareToæ–¹æ³•è¿›è¡Œæ¯”è¾ƒå¤§å°â€”è‡ªç„¶æ’åºï¼‰</p><p>2ã€static Object max(Collection collï¼ŒComparator com) æ ¹æ®æ¯”è¾ƒå™¨æŒ‡å®šçš„æ¯”è¾ƒè§„åˆ™ï¼Œè¿”å›å®¹å™¨ä¸­çš„æœ€å¤§å€¼ï¼Œå†…éƒ¨ä¼šè°ƒç”¨æ¯”è¾ƒå™¨çš„æ¯”è¾ƒæ–¹æ³•Compareæ–¹æ³•</p><p>3ã€ã€‚ã€‚ã€‚</p><p> <img src="/2019/11/11/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB%EF%BC%88%E4%B8%89%EF%BC%89/collections.png" alt="c"></p><p>é˜Ÿåˆ—Queue</p><p>å…ˆè¿›å…ˆå‡ºFIFO</p><p><img src="/2019/11/11/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB%EF%BC%88%E4%B8%89%EF%BC%89/fifo.png" alt="img"></p><p>å †æ ˆStack</p><p>å…ˆè¿›åå‡ºï¼ˆFILOï¼‰/åè¿›å…ˆå‡º</p><p><img src="/2019/11/11/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB%EF%BC%88%E4%B8%89%EF%BC%89/FILO.png" alt="img"></p><p>åŒç«¯é˜Ÿåˆ—Deque</p>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ•°æ®ç»“æ„</tag>
      
      <tag>è‡ªå®šä¹‰å­˜å‚¨</tag>
      
      <tag>ArrayList</tag>
      
      <tag>LinkedList</tag>
      
      <tag>HashSet</tag>
      
      <tag>TreeSet</tag>
      
      <tag>Collectionä½“ç³»</tag>
      
      <tag>Map</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Javaå¸¸è§ç±»åŠå…¶ç»§æ‰¿å…³ç³»(äºŒ)</title>
    <link href="/2019/11/10/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB-%E4%BA%8C/"/>
    <url>/2019/11/10/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB-%E4%BA%8C/</url>
    
    <content type="html"><![CDATA[<p>æ•°å­¦ç›¸å…³ç±»Math/BigInteger/BigDecimal</p><p>Math</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gams"><span class="hljs-keyword">System</span>.out.println(Math.<span class="hljs-built_in">PI</span>);<span class="hljs-comment">//java.lang.Math</span><br></code></pre></td></tr></table></figure><p>1ã€ç±»åŒ…å«ç”¨äºæ‰§è¡ŒåŸºæœ¬æ•°å­¦è¿ç®—çš„æ–¹æ³•ï¼Œå¦‚åˆç­‰æŒ‡æ•°ã€å¯¹æ•°ã€å¹³æ–¹æ ¹å’Œä¸‰è§’å‡½æ•°<br>2ã€è®°ä½ä¸€ç‚¹ï¼š ä»¥åé‡åˆ°1ä¸­çš„æƒ…å†µçŸ¥é“è¿™é‡Œæ¥Mathç±»ä¸­æ‰¾ã€‚</p><p>ï¼ˆBIï¼‰BigInteger</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.math.BigInteger;<br></code></pre></td></tr></table></figure><p>1ã€èƒ½å¤Ÿè¡¨ç¤ºæ¯”longæ›´å¤§çš„æ•´æ•°</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver"><span class="hljs-keyword">long</span> <span class="hljs-keyword">a</span>=<span class="hljs-number">12333333333</span>L<span class="hljs-comment">;//æ²¡æœ‰è¶…è¿‡å¤§å°</span><br><span class="hljs-keyword">long</span> <span class="hljs-keyword">a</span>=<span class="hljs-number">1233333333333333333333333333333</span>L<span class="hljs-comment">;//è¶…è¿‡å¤§å°äº†</span><br></code></pre></td></tr></table></figure><p>2ã€å®ƒæ˜¯å¦‚ä½•å¤„ç†å­˜å‚¨æ›´å¤§çš„å€¼ï¼ŸBigIntegeræ˜¯ä¸€ä¸ªç±»</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">BigInteger b=<span class="hljs-number">123456</span>;<span class="hljs-regexp">//</span>Type mismatch: cannot convert from int to BigInteger<br><span class="hljs-regexp">//</span>å› ä¸ºBigIntegeræ˜¯ä¸€ä¸ªç±»ï¼Œå€¼å¤ªå¤§ï¼Œä¸èƒ½è®©å…¶ç›´æ¥èµ‹å€¼ï¼Œéœ€è¦æ„é€ æ–¹æ³•åˆ›å»º<br>BigInteger b=new BigInteger(<span class="hljs-string">&quot;9223372036854775807&quot;</span>);<span class="hljs-regexp">//</span><span class="hljs-number">9223372036854775807</span>æ˜¯Longçš„æœ€å¤§å€¼ï¼Œnewä¸€ä¸ªæ¯”å®ƒå¤§<span class="hljs-number">1</span>çš„æ•°<br></code></pre></td></tr></table></figure><p><img src="/2019/11/10/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB-%E4%BA%8C/Integer1.png" alt="1"></p><p>3ã€å¦‚ä½•å»æ“ä½œ</p><p>ä¸¤ä¸ªBigIntegerç›¸åŠ </p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">BigInteger b1=<span class="hljs-built_in">new</span> BigInteger(&quot;9223372036854775807&quot;);<br>BigInteger b2=<span class="hljs-built_in">new</span> BigInteger(&quot;9223372036854775807&quot;);<br>//<span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(b1+b2);//The <span class="hljs-keyword">operator</span> + <span class="hljs-keyword">is</span> undefined <span class="hljs-keyword">for</span> the argument <span class="hljs-keyword">type</span>(s) java.math.BigInteger, java.math.BigInteger<br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(b1.<span class="hljs-keyword">add</span>(b2));//ç»“æœï¼š<span class="hljs-number">18446744073709551614</span><br></code></pre></td></tr></table></figure><p>æ³¨æ„ï¼šåœ¨BigIntegerä¸­ï¼Œä¸èƒ½ç›´æ¥ä½¿ç”¨+-ç­‰è¿ç®—ç¬¦ï¼Œç”¨å·²ç»å†™æˆçš„BIæˆå‘˜æ–¹æ³•ï¼Œå…·ä½“æŸ¥çœ‹APIæ–‡æ¡£</p><p><img src="/2019/11/10/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB-%E4%BA%8C/BigInteger2.png" alt="2"></p><p>4ã€intã€Integerå’ŒBigIntegerä¹‹é—´çš„å…³ç³»</p><p>Integer æ˜¯int çš„åŒ…è£…ç±»ï¼Œä»–ä»¬ä¹‹é—´å­˜åœ¨è‡ªåŠ¨è£…ç®±æ‹†ç®±ï¼Œè€Œå’ŒBigIntegeræ²¡æœ‰ä»»ä½•å…³ç³»  </p><p><img src="/2019/11/10/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB-%E4%BA%8C/BI3.png" alt="3"></p><p>BigDecimal</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.math.BigDecimal;<br></code></pre></td></tr></table></figure><p>1ã€å¯ä»¥ç²¾ç¡®çš„è¡¨ç¤ºå°æ•°</p><p>doubleã€floatæµ®ç‚¹å°æ•°ï¼Œæ— çº¿æ¥è¿‘äºç»“æœï¼Œä¸ç²¾ç¡®ã€‚è¿™ä¸ªè¦çœ‹ä½¿ç”¨äºä»€ä¹ˆåœºæ™¯ï¼Œæ˜¯å¦è¦æ±‚ç²¾ç¡®ï¼Ÿ</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">double</span> d<span class="hljs-number">1</span>=<span class="hljs-number">0</span>.<span class="hljs-number">02</span>;<br><span class="hljs-attribute">double</span> d<span class="hljs-number">2</span>=<span class="hljs-number">0</span>.<span class="hljs-number">00002</span>;<br><span class="hljs-attribute">System</span>.out.println(d<span class="hljs-number">1</span>+d<span class="hljs-number">2</span>);//<span class="hljs-number">0</span>.<span class="hljs-number">02002</span><br><span class="hljs-attribute">System</span>.out.println(d<span class="hljs-number">1</span>-d<span class="hljs-number">2</span>);//<span class="hljs-number">0</span>.<span class="hljs-number">01998</span><br><span class="hljs-attribute">System</span>.out.println(d<span class="hljs-number">1</span>*d<span class="hljs-number">2</span>);//<span class="hljs-number">4</span>.<span class="hljs-number">0000000000000003</span>E-<span class="hljs-number">7</span><br><span class="hljs-attribute">System</span>.out.println(d<span class="hljs-number">1</span>/d<span class="hljs-number">2</span>);//<span class="hljs-number">999</span>.<span class="hljs-number">9999999999999</span>  ä¸ç²¾ç¡®<br></code></pre></td></tr></table></figure><p>2ã€åˆ›å»ºä½¿ç”¨BigDecimal</p><p>BigDecimalæ˜¯ä¸€ä¸ªç±»ï¼ˆéåŒ…è£…ç±»ï¼‰ï¼Œä¹Ÿä¸æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œéœ€è¦ä½¿ç”¨newåˆ›å»ºå¯¹è±¡ã€‚</p><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs haxe"><span class="hljs-comment">//BigDecimal bd=0.2;//Type mismatch: cannot convert from double to BigDecimal</span><br>BigDecimal bd1=<span class="hljs-keyword">new</span> <span class="hljs-type">BigDecimal</span>(<span class="hljs-number">0.02</span>);<br>BigDecimal bd2=<span class="hljs-keyword">new</span> <span class="hljs-type">BigDecimal</span>(<span class="hljs-number">0.00002</span>);<br><br>BigDecimal bd3=<span class="hljs-keyword">new</span> <span class="hljs-type">BigDecimal</span>(<span class="hljs-string">&quot;0.02&quot;</span>);<br>BigDecimal bd4=<span class="hljs-keyword">new</span> <span class="hljs-type">BigDecimal</span>(<span class="hljs-string">&quot;0.00002&quot;</span>);<br></code></pre></td></tr></table></figure><p><img src="/2019/11/10/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB-%E4%BA%8C/%E6%9C%AC%E5%9C%B0.png" alt="4"></p><p>3ã€BDè¿ç®—</p><p>å’ŒBigIntegerä¸€æ ·ï¼Œä¸èƒ½ç›´æ¥ä½¿ç”¨+-ï¼Œå·²ç»å®šä¹‰æˆæ–¹æ³•ï¼Œè¯¦è§APIã€‚</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">//<span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(bd1+bd2);//The <span class="hljs-keyword">operator</span> - <span class="hljs-keyword">is</span> undefined <span class="hljs-keyword">for</span> the argument <span class="hljs-keyword">type</span>(s) java.math.BigDecimal, java.math.BigDecimal<br>//<span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(bd1-bd2);<br>//<span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(bd1*bd2);<br>//<span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(bd1/bd2);<br><br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(bd1.<span class="hljs-keyword">add</span>(bd2));<br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(bd1.subtract(bd2));<br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(bd1.multiply(bd2));<br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(bd1.divide(bd2));<br></code></pre></td></tr></table></figure><p>æ³¨æ„ï¼š</p><p><img src="/2019/11/10/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB-%E4%BA%8C/BD2.png" alt="BD2"></p><p>æˆ‘ä»¬çœ‹åˆ°è¿ç®—å‡ºæ¥çš„ç»“æœä¹Ÿæ˜¯ä¸å‡†ç¡®çš„ï¼Œç”šè‡³ç›´æ¥å‡ºé”™äº†ã€‚ä¸ºä»€ä¹ˆè¿˜æ˜¯ä¸ç²¾ç¡®çš„å‘¢ï¼Ÿæ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ</p><p>å› ä¸ºæˆ‘ä»¬æ„é€ d1å’Œd2çš„æ—¶å€™ï¼Œå°±æ˜¯ä¼ å…¥çš„ä¸€ä¸ªä¸ç²¾ç¡®çš„doubleå€¼ï¼Œç»“æœè‚¯å®šä¸ç²¾ç¡®ã€‚</p><p>æˆ‘ä»¬å¯ä»¥é‡‡ç”¨ä¼ å…¥ç²¾ç¡®çš„å€¼ï¼šæŸ¥çœ‹APIæ„é€ æ–¹æ³•ï¼Œå‘ç°å¯ä»¥ä»¥å­—ç¬¦ä¸²çš„å½¢å¼ä¼ å…¥ï¼š</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">BigDecimal</span> d<span class="hljs-number">1</span>=new BigDecimal(<span class="hljs-string">&quot;0.02&quot;</span>);<br><span class="hljs-attribute">BigDecimal</span> d<span class="hljs-number">2</span>=new BigDecimal(<span class="hljs-string">&quot;0.00002&quot;</span>);<br><span class="hljs-attribute">System</span>.out.println(d<span class="hljs-number">1</span>.add(d<span class="hljs-number">2</span>));//<span class="hljs-number">0</span>.<span class="hljs-number">02002</span><br><span class="hljs-attribute">System</span>.out.println(d<span class="hljs-number">1</span>.subtract(d<span class="hljs-number">2</span>));//<span class="hljs-number">0</span>.<span class="hljs-number">01998</span><br><span class="hljs-attribute">System</span>.out.println(d<span class="hljs-number">1</span>.multiply(d<span class="hljs-number">2</span>));//<span class="hljs-number">4</span>E-<span class="hljs-number">7</span><br><span class="hljs-attribute">System</span>.out.println(d<span class="hljs-number">1</span>.divide(d<span class="hljs-number">2</span>));//<span class="hljs-number">1</span>E+<span class="hljs-number">3</span><br></code></pre></td></tr></table></figure><p>æ•°å­¦å¸¸ç”¨ç±»å°ç»“(ä¸€)</p><p>1ã€åŸºæœ¬æ•°å­¦è¿ç®—çš„æ–¹æ³•ï¼Œå¦‚åˆç­‰æŒ‡æ•°ã€å¯¹æ•°ã€å¹³æ–¹æ ¹å’Œä¸‰è§’å‡½æ•°åœ¨å“ªé‡Œå»æ‰¾æ–¹æ³•ï¼Ÿ<code>Math</code></p><p>2ã€BigInteger å’ŒBigDecimalæ€ä¹ˆè¿ç®—ï¼Ÿ</p><ul><li>æ˜¯ä»€ä¹ˆ?èƒ½å¹²ä»€ä¹ˆ?<ul><li>BigInteger â€“ã€‹æ¯”longæ›´å¤§çš„æ•°ï¼›</li><li>BigDecimalâ€“ã€‹è¡¨ç¤ºæ›´ç²¾ç¡®çš„å°æ•°</li></ul></li><li>æ€ä¹ˆåˆ›å»ºä¸€ä¸ªå¯¹è±¡?<ul><li>éƒ½æ˜¯é€šè¿‡æ„é€ å‡½æ•°ï¼›</li><li>BigDecimalâ€“ã€‹æƒ³è¦ç»“æœç²¾ç¡®ï¼Œé‚£ä¹ˆåˆå§‹å€¼å°±è¦ç²¾ç¡®â€“ã€‹newã€€BigDecimal(String val)</li></ul></li><li>æ€ä¹ˆå¹²?<ul><li> åŸºæœ¬çš„+ - * /ï¼Œè¦ä½¿ç”¨ä»–ä»¬è‡ªèº«çš„æ–¹æ³•</li></ul></li></ul><p>éšæœºæ•°</p><p>éšæœºæ•°çš„ä½¿ç”¨ï¼Ÿ</p><p>éªŒè¯ç ï¼Œæ‘‡å·ï¼Œå½©ç¥¨ï¼Œéšæœºåå­—ï¼Œéšæœºæ’­æ”¾ï¼Œè´ªåƒè›‡çš„é£Ÿç‰©ï¼Œæ‰“åœ°é¼ </p><p>Javaè·å¾—éšæœºæ•°</p><p>1ã€Mathç±»ä¸­çš„ä¸€ä¸ªæ–¹æ³•randomï¼Œè¯¥æ–¹æ³•è¿”å›æ­£å·ä»‹äº<code>[0.0, 1.0)</code>çš„doubleå€¼ã€‚</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Math</span>.</span></span>random<span class="hljs-literal">()</span>);<span class="hljs-comment">//0.9468330747092099</span><br><span class="hljs-comment">//å¦‚æœè¦ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œè·å–100ä»¥å†…çš„æ•´æ•°ï¼Ÿä¹˜ä»¥100å¾—åˆ°0---100çš„å°æ•°ï¼Œå†å–æ•´ã€‚</span><br></code></pre></td></tr></table></figure><p>2ã€Randomç±»ï¼ˆæœ‰å¾ˆå¤šæ–¹æ³•ï¼‰</p><p>booleanã€doubleã€intâ€¦                [ 0, n )</p><p>æ„é€ æ–¹æ³•ï¼š</p><table><thead><tr><th><strong>Random() åˆ›å»ºä¸€ä¸ªæ–°çš„éšæœºæ•°ç”Ÿæˆå™¨ã€‚</strong></th></tr></thead><tbody><tr><td><strong>Random<code>(long seed)</code>  ä½¿ç”¨å•ä¸ª <code>long</code> ç§å­åˆ›å»ºä¸€ä¸ªæ–°çš„éšæœºæ•°ç”Ÿæˆå™¨ã€‚</strong></td></tr></tbody></table><p>æ¼”ç¤ºå‘ç°ï¼Œå¦‚æœä½¿ç”¨äº†ä¸€ä¸ªseedæ„é€ æ–¹æ³•ï¼Œæ¯æ¬¡å¾—åˆ°çš„éšæœºæ•°æ˜¯ä¸€æ ·çš„ã€‚å› ä¸ºç§å­ä¸€æ ·çš„å˜›ã€‚é‚£æ€ä¹ˆåŠå‘¢ï¼Ÿæˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥å°†ç§å­ææˆä¸€ä¸ªéšæœºçš„å‘¢ï¼ŸSystem.currentTimeMillis().</p><p>å…¶å®çœ‹æºç ï¼Œå‘ç°æ— å‚çš„æ„é€ æ–¹æ³•ä¹Ÿæ˜¯æäº†ä¸€ä¸ªéšæœºçš„ç§å­çš„ã€‚ä½†æ˜¯ï¼Œå³ä½¿è¿™æ ·ï¼Œä¹Ÿå¯èƒ½ä¼šäº§ç”Ÿç›¸åŒçš„å€¼ï¼Œè®¡ç®—æœºå¤Ÿå¿«ã€‚  </p><p>å…¶ä»–æ–¹æ³•ä¹Ÿå¯ä»¥å¾—åˆ°ï¼šnextInt(n) -&gt; [ 0,  n )</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-comment">//ç°åœ¨è¦è·å–xâ€”yç›´æ¥çš„intæ€ä¹ˆåŠï¼Ÿæˆ‘ä»¬å…³é”®æ˜¯è¦ç¡®å®šè¿™ä¸ªnçš„å€¼ã€‚n=y-x;</span><br><span class="hljs-comment">//è·å–3-7ä¹‹é—´çš„éšæœºæ•´æ•°</span><br>Random r=<span class="hljs-keyword">new</span> <span class="hljs-constructor">Random()</span>;<br><span class="hljs-comment">//n=7-3=4</span><br><span class="hljs-built_in">int</span> m=r.next<span class="hljs-constructor">Int(4)</span>;<span class="hljs-comment">//å¾—åˆ°mä¸º0åˆ°nç›´æ¥çš„å€¼ï¼Œæœ€åå†åŠ ä¸Šn-1</span><br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(m+<span class="hljs-number">4</span>-<span class="hljs-number">1</span>);<br></code></pre></td></tr></table></figure><p>ä»1.7å¼€å§‹Randomçš„å­ç±»ï¼šThreadLocalRandom</p><p>ThreadLocalRandom:nextInt( int least, int bound )</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">ThreadLocalRandom</span>.</span></span>current<span class="hljs-literal">()</span>.next<span class="hljs-constructor">Int(3, 7)</span>);<br></code></pre></td></tr></table></figure><p>UUIDç»å¸¸ç”¨æ¥åšå”¯ä¸€çš„æ ‡è¯†IDï¼ˆæ ¹æ®å½“å‰æ—¶é—´+æœºå™¨ç ï¼‰</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-comment">//UUID:128ä½çš„å€¼</span><br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">UUID</span>.</span></span>random<span class="hljs-constructor">UUID()</span>);<span class="hljs-comment">//31db0a4d-4fcb-44e7-b607-fc358c28e828</span><br></code></pre></td></tr></table></figure><p>å†™ä¸€ä¸ªæ–¹æ³•ï¼šç”ŸæˆéªŒè¯ç </p><p>é—®é¢˜ï¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•å¯ä»¥è·å¾—ä¸€ä¸ªæŒ‡å®šä½æ•°çš„éšæœºå­—ç¬¦ä¸²ï¼›å…¶å†…å®¹å¯ä»¥æ˜¯ æ•°å­— å¤§å°å†™å­—æ¯ç»„æˆ</p><p> 4ä½éšæœºæ•°</p><p>åˆ†ææ€è·¯ï¼š</p><blockquote><p>â‘ å‡†å¤‡å­—ç¬¦ä¸²ï¼šæŠŠæ‰€æœ‰æ•°å­—å’Œå¤§å°å†™å­—æ¯æ”¾åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–è€…æ•°ç»„ä¸­</p><p>â‘¡åœ¨â‘ ä¸­éšæœºè·å–ä¸€ä¸ªå€¼ </p><p>â‘¢éå†æ­¥éª¤â‘¡lenæ¬¡ â‘£è¿”å›ç»“æœ</p></blockquote><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">String</span>[] args)</span> </span>&#123;<br><span class="hljs-keyword">String</span> <span class="hljs-built_in">random</span> = getRandom(<span class="hljs-number">4</span>);<br>System.out.<span class="hljs-built_in">println</span>(<span class="hljs-built_in">random</span>);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">String</span> <span class="hljs-title">getRandom</span><span class="hljs-params">(<span class="hljs-keyword">int</span> len)</span> </span>&#123;<br><span class="hljs-keyword">String</span> s = <span class="hljs-string">&quot;&quot;</span>;<br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; len; i++) &#123;<br>s += getOne();<br>&#125;<br><span class="hljs-keyword">return</span> s;<br><br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">String</span> <span class="hljs-title">getOne</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-comment">// â‘ å‡†å¤‡å­—ç¬¦ä¸²ï¼šæŠŠæ‰€æœ‰æ•°å­—å’Œå¤§å°å†™å­—æ¯æ”¾åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–è€…æ•°ç»„ä¸­</span><br><span class="hljs-keyword">String</span> str=<span class="hljs-string">&quot;0123456789QWERTYUIOPASDFGHJKLZXCVBNMqwertyuiopasdfghjklzxcvbnm&quot;</span>;<br><span class="hljs-comment">// â‘¡åœ¨â‘ ä¸­éšæœºè·å–ä¸€ä¸ªå€¼  </span><br><span class="hljs-comment">//int r=ThreadLocalRandom.current().nextInt(0,str.length());</span><br>Random <span class="hljs-built_in">random</span> = <span class="hljs-keyword">new</span> Random();<br><span class="hljs-keyword">int</span> r=<span class="hljs-built_in">random</span>.nextInt(str.length());<br><span class="hljs-keyword">return</span> <span class="hljs-keyword">String</span>.valueOf(str.charAt(r));<br>&#125;<br></code></pre></td></tr></table></figure><p>æ—¥æœŸï¼ˆæ—¶é—´ï¼‰ç›¸å…³ç±»</p><p>åº”ç”¨åœºæ™¯ï¼ˆä½¿ç”¨çš„ä¸€äº›è½¯ä»¶ä¸­ä½¿ç”¨åˆ°çš„åœ°æ–¹ï¼‰</p><p>é—¹é’Ÿï¼ŒæŒ‰ç…§æ—¶é—´æ®µæ¥ç»Ÿè®¡ä¸€äº›ä¸œè¥¿ï¼Œæ”¯ä»˜è®¢å•ä¸Šä¹Ÿç”¨åˆ°æ—¶é—´ï¼Œæ“ä½œæ—¥å¿—è®°å½•æ—¶é—´</p><p>Dateç±»</p><p>ç±» Date è¡¨ç¤ºç‰¹å®šçš„ç¬é—´ï¼Œç²¾ç¡®åˆ°æ¯«ç§’ã€‚åœ¨ JDK 1.1 ä¹‹å‰ï¼Œç±» Date æœ‰ä¸¤ä¸ªå…¶ä»–çš„å‡½æ•°ã€‚å®ƒå…è®¸æŠŠæ—¥æœŸè§£é‡Šä¸ºå¹´ã€æœˆã€æ—¥ã€å°æ—¶ã€åˆ†é’Ÿå’Œç§’å€¼ã€‚å®ƒä¹Ÿå…è®¸æ ¼å¼åŒ–å’Œè§£ææ—¥æœŸå­—ç¬¦ä¸²ã€‚ä¸è¿‡ï¼Œè¿™äº›å‡½æ•°çš„ API ä¸æ˜“äºå®ç°å›½é™…åŒ–. é—°ç§’. æ ¼æ—å¨æ²»æ ‡</p><p>æ„é€ æ–¹æ³•ï¼š</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-constructor">Date()</span>;   <span class="hljs-comment">//å°±è¡¨ç¤ºå½“å‰ç³»ç»Ÿæ—¶é—´å¯¹è±¡</span><br><span class="hljs-constructor">Date(<span class="hljs-params">long</span> <span class="hljs-params">date</span>)</span>   <span class="hljs-comment">//æ ¹æ®æŒ‡å®šçš„æ¯«ç§’å€¼åˆ›å»ºä¸€ä¸ªæŒ‡å®šçš„æ—¶é—´</span><br></code></pre></td></tr></table></figure><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">Date d=<span class="hljs-keyword">new</span> <span class="hljs-constructor">Date()</span>;<br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(d);<span class="hljs-comment">// Wed Apr 19 14:13:47 CST 2017</span><br> <br>long time=<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>current<span class="hljs-constructor">TimeMillis()</span>;<br>Date d1=<span class="hljs-keyword">new</span> <span class="hljs-constructor">Date(<span class="hljs-params">time</span>)</span>;<br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(d1);<span class="hljs-comment">// Wed Apr 19 14:13:47 CST 2017</span><br></code></pre></td></tr></table></figure><p>æˆå‘˜æ–¹æ³•ï¼š</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">after</span><span class="hljs-params">(Date when)</span></span> <span class="hljs-comment">//æµ‹è¯•æ­¤æ—¥æœŸæ˜¯å¦åœ¨æŒ‡å®šæ—¥æœŸä¹‹åã€‚</span><br><span class="hljs-function"><span class="hljs-title">before</span><span class="hljs-params">(Date when)</span></span> <span class="hljs-comment">//æµ‹è¯•æ­¤æ—¥æœŸæ˜¯å¦åœ¨æŒ‡å®šæ—¥æœŸä¹‹å‰ã€‚</span><br><span class="hljs-function"><span class="hljs-title">getTime</span><span class="hljs-params">()</span></span> <span class="hljs-comment">//è¿”å›è‡ª 1970 å¹´ 1 æœˆ 1 æ—¥ 00:00:00 GMT ä»¥æ¥æ­¤ Date å¯¹è±¡è¡¨ç¤ºçš„æ¯«ç§’æ•°ã€‚</span><br><span class="hljs-function"><span class="hljs-title">setTime</span><span class="hljs-params">(long time)</span></span> <span class="hljs-comment">//è®¾ç½®æ­¤ Date å¯¹è±¡ï¼Œä»¥è¡¨ç¤º 1970 å¹´ 1 æœˆ 1 æ—¥ 00:00:00 GMT ä»¥å time æ¯«ç§’çš„æ—¶é—´ç‚¹ã€‚</span><br></code></pre></td></tr></table></figure><p>ä¸ç›´è§‚é—®é¢˜ï¼š</p><p>ç›´æ¥æ‰“å°Dateå¯¹è±¡ ï¼šSat Apr 01 15:28:03 GMT+08:00 2017çœ‹èµ·æ¥ä¸ç›´è§‚ï¼Œç”¨æˆ·ä½“éªŒä¸å¥½ã€‚å¸Œæœ›æ ¹æ®ä¸åŒç”¨æˆ·çš„éœ€æ±‚æ˜¾ç¤ºä¸åŒçš„æ•ˆæœï¼Œæ€ä¹ˆåŠï¼Ÿéœ€è¦å¯¹ç»“æ„è¿›è¡Œæ ¼å¼åŒ–</p><blockquote><p>2017-04-01 15:03:24</p><p>2017/04/01</p><p>2017å¹´04æœˆ01æ—¥</p></blockquote><p>æ—¶é—´æ ¼å¼åŒ–ï¼šDateFormatå’ŒSimpleDateFormat</p><blockquote><p>1ã€ä½œç”¨ä¸€ï¼š æŠŠä¸€ä¸ªDateå¯¹è±¡å¯ä»¥è½¬æˆæˆ‘ä»¬å¸Œæœ›çš„ä¸€ä¸ªç»“æœæ ·å¼ï¼ˆå­—ç¬¦ä¸²ï¼‰</p><p>2ã€ä½œç”¨äºŒï¼š ä¹Ÿå¯ä»¥æŠŠä¸€ä¸ªå­—ç¬¦ä¸²è§£æä¸ºä¸€ä¸ªDateå¯¹è±¡</p><p>3ã€å­¦ä¹ é‡ç‚¹å°±æ˜¯å¦‚ä½•è°ƒç”¨ä¸Šé¢çš„æåˆ°çš„ä¸¤ä¸ªåŠŸèƒ½æ–¹æ³•ï¼Œæ³¨æ„æ€ä¹ˆç»™ä»–æ ¼å¼</p></blockquote><p><img src="/2019/11/10/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB-%E4%BA%8C/DF.png" alt="df"></p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">SimpleDateFormat sdf=<span class="hljs-keyword">new</span> <span class="hljs-constructor">SimpleDateFormat()</span>;<br>String p=<span class="hljs-string">&quot;yyyyMMdd HH:mm:ss&quot;</span>;<br>sdf.apply<span class="hljs-constructor">Pattern(<span class="hljs-params">p</span>)</span>;<br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(sdf.format(d1));<br><br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(sdf.parse(<span class="hljs-string">&quot;20170420 14:33:26&quot;</span>));<br></code></pre></td></tr></table></figure><p>Calenderï¼ˆæ—¥å†ï¼‰</p><p><img src="/2019/11/10/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB-%E4%BA%8C/Calender.png" alt="calender"></p><p>æ—¥å†ï¼ŒCalendar ç±»æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®ƒä¸ºç‰¹å®šç¬é—´ä¸ä¸€ç»„è¯¸å¦‚ YEARã€MONTHã€DAY_OF_MONTHã€HOUR ç­‰ æ—¥å†å­—æ®µä¹‹é—´çš„è½¬æ¢æä¾›äº†ä¸€äº›æ–¹æ³•ï¼Œå¹¶ä¸ºæ“ä½œæ—¥å†å­—æ®µï¼ˆä¾‹å¦‚è·å¾—ä¸‹æ˜ŸæœŸçš„æ—¥æœŸï¼‰æä¾›äº†ä¸€äº›æ–¹æ³•ã€‚</p><p>å­—æ®µï¼š</p><p>ç±»ä¸­æœ‰æ ‡è¯†å¹´ã€æœˆã€æ—¥ç­‰å­—æ®µ</p><p>å¸¸ç”¨æ–¹æ³•ï¼š</p><p>â‘ è·å–æ—¥å†å¯¹è±¡ï¼šstatic Calendar getInstance() å¾—ä¸€ä¸ªæ—¥å†ã€‚(æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå¤–éƒ¨å’Œå†…éƒ¨éƒ½ä¸èƒ½newï¼Œä¸èƒ½åˆ›å»ºå¯¹è±¡ã€‚é€šè¿‡æºç å‘ç°ï¼Œæ˜¯new äº†ä¸€ä¸ªå­ç±»èµ‹å€¼ç»™Calendarä¸­ã€‚)</p><p>â‘¡ è·å–æŒ‡å®šå­—æ®µå€¼ï¼ˆå¹´ã€æœˆã€æ—¥DAY_OF_MONTHç­‰ï¼‰ï¼šint get(int field) è¿”å›ç»™å®šæ—¥å†å­—æ®µçš„å€¼ã€‚</p><p>æ³¨æ„ï¼šæœˆæ˜¯ä»0â€”11ï¼Œæ‰€ä»¥è·å–åéœ€è¦+1</p><p>â‘¢ è®¾ç½®æŒ‡å®šå­—æ®µå€¼ï¼šset(int field,int value)  ç»™æŒ‡å®šçš„å­—æ®µè®¾ç½®å€¼ã€‚</p><p>è¿™æ˜¯ä¸€ç§é‡æ–°èµ‹å€¼æ“ä½œï¼Œä¼šè¦†ç›–åŸæ¥çš„å€¼ï¼Œä¼šè‡ªåŠ¨è¿›ä½</p><p>â‘£ ç»™æŒ‡å®šå­—æ®µå¢åŠ æˆ–è€…å‡å°‘å€¼ï¼šadd(int field,int amount) : è¿™ä¸ªæ–¹æ³•å’Œsetå·®ä¸å¤šï¼Œä½†æ˜¯æŠŠamountçš„å€¼ç´¯åŠ åˆ°å½“å‰è®¾ç½®çš„å­—æ®µåŸæœ‰çš„å€¼ä¹‹ä¸Š</p><p>â‘¤ä½¿ç”¨æŒ‡å®šæ—¶é—´åˆ›å»ºä¸€ä¸ªCalendarï¼š setTime(Date d)  å¯ä»¥ç›´æ¥æŠŠä¸€ä¸ªDateè®¾ç½®è¿›å»</p><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs vbnet">/**<br> * æŠŠ <span class="hljs-number">2033</span>å¹´<span class="hljs-number">3</span>æœˆ<span class="hljs-number">4</span>æ—¥ <span class="hljs-number">12</span>:<span class="hljs-number">34</span>:<span class="hljs-number">23</span> è®¾ç½®ç»™æ—¥å†ï¼š<br> *   åˆ†æï¼šå¯ä»¥é€šè¿‡<span class="hljs-keyword">set</span>æ–¹æ³•ä¸€ä¸ªä¸ªå­—æ®µçš„è®¾ç½®ï¼Œä¸å»ºè®®ã€‚ä½¿ç”¨<br> *     setTime(<span class="hljs-type">Date</span> <span class="hljs-type">date</span>)ä¸€ä¸ªæ–¹æ³•æå®šã€‚<br> *     æ­¥éª¤ï¼š<br> *      â‘ æŠŠ å­—ç¬¦ä¸² <span class="hljs-string">&quot;2033å¹´3æœˆ4æ—¥ 12:34:23&quot;</span> è½¬æ¢æˆ<span class="hljs-type">Date</span><br> *      â‘¡setTimeè®¾ç½®<br> */<br><span class="hljs-type">String</span> dateStr = <span class="hljs-string">&quot;2033å¹´3æœˆ4æ—¥ 12:34:23&quot;</span>;<br>SimpleDateFormat sdf = <span class="hljs-built_in">new</span> SimpleDateFormat();<br><span class="hljs-type">String</span> pattern = <span class="hljs-string">&quot;yyyyå¹´MMæœˆddæ—¥ HH:mm:ss&quot;</span>;<br>sdf.applyPattern(pattern);<br><span class="hljs-type">Date</span> <span class="hljs-type">date</span> = sdf.parse(dateStr);<br><br>Calendar c = Calendar.getInstance();<br>c.setTime(<span class="hljs-type">date</span>);<br><br>System.out.println(c.<span class="hljs-keyword">get</span>(Calendar.YEAR) + <span class="hljs-string">&quot;å¹´&quot;</span><br>+ (c.<span class="hljs-keyword">get</span>(Calendar.MONTH) + <span class="hljs-number">1</span>) + <span class="hljs-string">&quot;æœˆ&quot;</span><br>+ c.<span class="hljs-keyword">get</span>(Calendar.DAY_OF_MONTH) + <span class="hljs-string">&quot;æ—¥&quot;</span><br>+ c.<span class="hljs-keyword">get</span>(Calendar.HOUR_OF_DAY) + <span class="hljs-string">&quot;:&quot;</span> + c.<span class="hljs-keyword">get</span>(Calendar.MINUTE)<br>+ <span class="hljs-string">&quot;:&quot;</span> + c.<span class="hljs-keyword">get</span>(Calendar.SECOND));<br></code></pre></td></tr></table></figure><p>â‘¥ è·å–ä¸€ä¸ªDateå¯¹è±¡ï¼šDate getTime()  å¯ä»¥è·å¾—æ—¥å†å¯¹è±¡ä¸­çš„å½“å‰æ—¥æœŸå¯¹è±¡</p><p>å›é¡¾æ–¹æ³•è¦†å†™è¦æ±‚ï¼š</p><blockquote><p>â‘ ä¿è¯å­ç±»æ–¹æ³•å’Œçˆ¶ç±»æ–¹æ³•çš„æ–¹æ³•ç­¾å(æ–¹æ³•å+å‚æ•°åˆ—è¡¨)ä¸€è‡´;</p><p>â‘¡è®¿é—®æƒé™ : å­ç±»æ–¹æ³•çš„è®¿é—®æƒé™(ä¿®é¥°ç¬¦)ä¸èƒ½å¤Ÿæ¯”çˆ¶ç±»æ–¹æ³•çš„è®¿é—®æƒé™æ›´ä½;</p><p>â‘¢è¿”å›å€¼ç±»å‹ : å­ç±»æ–¹æ³•çš„è¿”å›å€¼ç±»å‹å¯ä»¥æ˜¯çˆ¶ç±»æ–¹æ³•çš„è¿”å›å€¼ç±»å‹çš„å­ç±»æˆ–è€…ç›¸ç­‰</p><p>â‘£å­ç±»æ–¹æ³•æŠ›å‡ºçš„å¼‚å¸¸ï¼ˆå¯ä»¥æ˜¯å¤šä¸ªï¼‰å¿…é¡»æ˜¯çˆ¶ç±»æ–¹æ³•æŠ›å‡ºçš„å¼‚å¸¸çš„å­ç±»æˆ–è€…ç›¸ç­‰ï¼ˆåªé’ˆå¯¹äºéRuntimeExceptionï¼‰</p></blockquote><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-comment">//é”™è¯¯ï¼šå­ç±»æŠ›å‡ºå¼‚å¸¸å¤§äºçˆ¶ç±»ï¼ˆå°†åœ¨ç¼–è¯‘æœŸé—´å‡ºé”™ï¼‰</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span> </span>&#123;<br>void test() &#123;<br>&#125;<br>&#125;<br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">B</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">A</span> </span>&#123;<br><span class="hljs-meta">@Override</span><br>void test() <span class="hljs-keyword">throws</span> <span class="hljs-type">Exception</span>&#123;<br><span class="hljs-comment">// TODO Auto-generated method stub</span><br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-comment">//æ­£ç¡®çš„å­ç±»å¼‚å¸¸æŠ›å‡º</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span> </span>&#123;<br>void test() <span class="hljs-keyword">throws</span> <span class="hljs-type">Exception</span> &#123;&#125;<br>&#125;<br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">B</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">A</span> </span>&#123;<br><span class="hljs-meta">@Override</span><br>void test() <span class="hljs-keyword">throws</span> <span class="hljs-type">Exception</span> &#123;<br>&#125;<br>&#125;<br><span class="hljs-comment">//æˆ–è€…</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span> </span>&#123;<br>void test() <span class="hljs-keyword">throws</span> <span class="hljs-type">Exception</span> &#123;<br>&#125;<br>&#125;<br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">B</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">A</span> </span>&#123;<br><span class="hljs-meta">@Override</span><br>void test() <span class="hljs-keyword">throws</span> <span class="hljs-type">AWTException</span>&#123;<br><span class="hljs-comment">// TODO Auto-generated method stub</span><br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>throwå’Œthrowsçš„åŒºåˆ«</p><p>throw</p><p>1ã€ä½ç½®ï¼šåœ¨æ–¹æ³•é‡Œé¢</p><p>2ã€åé¢åªèƒ½å¤Ÿè·Ÿä¸€ä¸ªå…·ä½“çš„å¼‚å¸¸å¯¹è±¡</p><p>throws</p><p>1ã€ä½ç½® ï¼š æ–¹æ³•ä¸Šï¼Œåœ¨ï¼ˆï¼‰åï¼Œ{}å‰ï¼Œå¯ä»¥æŠ›å‡ºå¤šä¸ªå¼‚å¸¸ï¼Œå¼‚å¸¸ä¹‹é—´ç”¨,éš”å¼€ï¼Œæ²¡æœ‰é¡ºåºä¹‹åˆ†</p><p>2ã€åé¢å¯ä»¥æœ‰å¤šä¸ªå¼‚å¸¸ç±»å‹</p><p><img src="/2019/11/10/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB-%E4%BA%8C/clip_image008.jpg" alt="img"></p><p>åªè¦æŠ›å‡ºäº†å¼‚å¸¸ï¼šæœ‰å‡ ç§å¤„ç†æ–¹å¼</p><p> *      1. å†å‘ä¸Šä¸ªæŠ›å‡º</p><p> *      2. try catch</p><p> * ç›®å‰ï¼Œå…ˆè‡ªå·±å¤„ç†ã€‚ä»¥åå­¦å¾—å¤šäº†åœ¨æ ¹æ®å®é™…æƒ…å†µæˆ–æŠ›å‡ºæˆ–æ•æ‰</p>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>Math</tag>
      
      <tag>BigInteger</tag>
      
      <tag>BigDecimal</tag>
      
      <tag>éšæœºæ•°</tag>
      
      <tag>Date</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Javaå¤šæ€</title>
    <link href="/2019/11/06/Java%E5%A4%9A%E6%80%81/"/>
    <url>/2019/11/06/Java%E5%A4%9A%E6%80%81/</url>
    
    <content type="html"><![CDATA[<h3 id="ä»€ä¹ˆæ˜¯å¤šæ€"><a href="#ä»€ä¹ˆæ˜¯å¤šæ€" class="headerlink" title="ä»€ä¹ˆæ˜¯å¤šæ€?"></a>ä»€ä¹ˆæ˜¯å¤šæ€?</h3><p>ç®€å•ç†è§£ : çœ‹æˆä¸€ç§äº‹ç‰©å¤šç§å½¢æ€</p><blockquote><p>Animal a1 = new Human();</p><p>a1æ˜¯äººï¼Ÿæ˜¯åŠ¨ç‰©ï¼Ÿè¿˜æ˜¯Beeï¼Ÿå®ƒçš„ç±»å‹æ˜¯ä»€ä¹ˆï¼Ÿ</p><ul><li>è¿è¡Œæ—¶ç±»å‹ï¼šå¯¹è±¡çš„çœŸæ­£ç±»å‹ï¼Œä»ä¸Šé¢ä»£ç æ¥çœ‹å°±æ˜¯ç­‰å·â€˜=â€™å³è¾¹çš„ç±»å‹ï¼›</li><li>ç¼–è¯‘æ—¶ç±»å‹ï¼šåœ¨ç¼–è¯‘çš„é˜¶æ®µï¼Œç¼–è¯‘å™¨åœ¨æ„çš„ç±»å‹æ˜¯ç­‰å· â€˜=â€™ å·¦è¾¹çš„ç±»å‹ï¼›</li><li>å½“ç¼–è¯‘æ—¶ç±»å‹å’Œè¿è¡Œæ—¶ç±»å‹ä¸ä¸€è‡´æ—¶â€”&gt;äº§ç”Ÿå¤šæ€ã€‚</li></ul></blockquote><blockquote><p>Animal a = new Human();<br>Human p = new Human();<br>å¤šæ€çš„å†™æ³•çš„å¥½å¤„ ï¼š å¯ä»¥å±è”½ä¸åŒçš„å­ç±»ä¹‹é—´çš„å®ç°å·®å¼‚</p></blockquote><p><strong>å­—æ®µæ²¡æœ‰è¦†å†™ä¸€è¯´ï¼šå®é™…å¼€å‘ä¸­ä¸€èˆ¬ä¸ä¼šå†å­ç±»ä¸­å®šä¹‰ä¸€ä¸ªå’Œçˆ¶ç±»åŒåçš„å­—æ®µ</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> cn.kongwei_liao.Polymorphism;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Animal</span> </span>&#123;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">walk</span><span class="hljs-params">()</span> </span>&#123;<br>System.out.println(<span class="hljs-string">&quot;åŠ¨ç‰©å‡ºè¡Œï¼\n&quot;</span>);<br>&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-keyword">package</span> cn.kongwei_liao.<span class="hljs-type">Polymorphism</span>;<br><br>public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Human</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Animal</span></span>&#123;<br><span class="hljs-meta">@Override</span><br>public void walk() &#123;<br><span class="hljs-type">System</span>.out.println(<span class="hljs-string">&quot;HumanåŒè¶³è¡Œèµ°ï¼\n&quot;</span>);<br>&#125;<br>public void playGames() &#123;<br><span class="hljs-type">System</span>.out.println(<span class="hljs-string">&quot;äººç±»Aä¼Ÿåˆåœ¨æ‰“ç”µåŠ¨å“¦ï¼\n&quot;</span>);<br>&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-keyword">package</span> cn.kongwei_liao.<span class="hljs-type">Polymorphism</span>;<br><br>public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Bee</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Animal</span></span>&#123;<br><span class="hljs-meta">@Override</span><br>public void walk() &#123;<br><span class="hljs-type">System</span>.out.println(<span class="hljs-string">&quot;Beeé£è¡Œï¼\n&quot;</span>);<br>&#125;<br>public void jiMi() &#123;<br><span class="hljs-type">System</span>.out.println(<span class="hljs-string">&quot;å°èœœèœ‚é‡‡é›†deèŠ±èœœï¼Œç»´å°¼å¯çˆ±åƒäº†ï¼\n&quot;</span>);<br>&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs awk">package cn.kongwei_liao.Polymorphism;<br><br>public class Test &#123;<br><br>public static void main(String[] args) &#123;<br><span class="hljs-regexp">//</span> TODO Auto-generated method stub<br>Object obj;<br>obj = new Animal();<br><span class="hljs-regexp">//</span>obj.walk();<span class="hljs-regexp">//</span>Error:The method walk() is undefined <span class="hljs-keyword">for</span> the type Object<br><br>Animal anm=new Animal();<br>anm.walk();<br><br>anm=new Human();<br>anm.walk();<br><span class="hljs-regexp">//</span>anm.playGames();<span class="hljs-regexp">//</span>Error:The method playGames() is undefined <span class="hljs-keyword">for</span> the type Animal<br><br>anm=new Bee();<br>anm.walk();<br><br>Human hu=new Human();<br>hu.playGames();<br><br><span class="hljs-regexp">//</span>Human hum = (Human)anm;<span class="hljs-regexp">//</span>anmå¼•ç”¨Beeç±»å‹å¯¹è±¡<br><span class="hljs-regexp">//</span>hum.walk();<br><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span>Exception <span class="hljs-keyword">in</span> thread <span class="hljs-string">&quot;main&quot;</span> java.lang.ClassCastException: <br><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span>cn.kongwei_liao.Polymorphism.<br><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span>Bee cannot be cast to cn.kongwei_liao.Polymorphism.Human<br><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span>at cn.kongwei_liao.Polymorphism.Test.main(Test.java:<span class="hljs-number">20</span>)<br><br>Bee bee=(Bee)anm;<span class="hljs-regexp">//</span>anmå½“å‰å¼•ç”¨Beeç±»å‹å¯¹è±¡<br>bee.walk();<br>bee.jiMi();<br><br><span class="hljs-regexp">//</span>Human h=new Bee();<span class="hljs-regexp">//</span>Error:Type mismatch: cannot convert from Bee to Human<br><br>&#125;<br>&#125;<br>/*<br> * ç¼–è¯‘è¿‡ç¨‹ï¼š<br> * ç¬¬åå››è¡ŒAnimalæ˜¯Humançš„çˆ¶ç±»ï¼Œç¼–è¯‘å™¨ç¼–è¯‘é€šè¿‡<br> * ç¬¬åäº”ã€åå…­è¡Œï¼š(ç¼–è¯‘å™¨æŠŠanmçœ‹æˆæ˜¯Animal) ç¼–è¯‘çš„æ—¶å€™ä¼šåˆ°anmçš„ç¼–è¯‘ç±»å‹ä¸­æ‰¾æ˜¯å¦æœ‰walkæ–¹æ³•å’ŒplayGamesæ–¹æ³•;<br> * å¦‚æœæ²¡æœ‰,ä¼šç»§ç»­å‘anmçš„ç¼–è¯‘ç±»å‹çš„çˆ¶ç±»ä¸­ä¸€ç›´å‘ä¸Šæ‰¾;<br> * å¦‚æœéƒ½æ²¡æœ‰æ‰¾åˆ°,ç¼–è¯‘æŠ¥é”™;<br> * å¦‚æœæ‰¾åˆ°äº†ç¼–è¯‘é€šè¿‡(ä¸ä¼šå‘ä¸‹åˆ°å­ç±»ä¸­,æ‰¾çš„æ—¶å€™å°±æ˜¯ç¼–è¯‘çš„æ—¶å€™æ˜¯ä¸ä¼šæ‰§è¡Œä»£ç çš„)ã€‚<br> * <br> * è¿è¡Œè¿‡ç¨‹ï¼š<br> * ç¬¬åäº”è¡Œï¼šå…ˆåˆ°è¿è¡Œæ—¶ç±»å‹(Person)æ‰¾walkæ–¹æ³•,å¦‚æœæ‰¾åˆ°å°±æ‰§è¡Œ,å¦åˆ™å°±å‘ä¸Šåˆ°çˆ¶ç±»ä¸­æ‰¾å¹¶æ‰§è¡Œã€‚<br> *<br> * æ€è€ƒ : æœ‰æ²¡æœ‰å¯èƒ½ç¼–è¯‘é€šè¿‡äº†,è€Œè¿è¡Œæ‰¾ä¸åˆ°æ–¹æ³•...    ä¸å¯èƒ½!æ°¸è¿œä¸ä¼šå‡ºç°è¿™ç§æƒ…å†µ<br> */<br><br></code></pre></td></tr></table></figure><p><img src="/2019/11/06/Java%E5%A4%9A%E6%80%81/staticfunccx.png" alt="1"></p><p><img src="/2019/11/06/Java%E5%A4%9A%E6%80%81/1.png" alt="2"></p><h3 id="å¤šæ€æ–¹æ³•è°ƒç”¨ä»¥åŠå‚æ•°ä¼ é€’"><a href="#å¤šæ€æ–¹æ³•è°ƒç”¨ä»¥åŠå‚æ•°ä¼ é€’" class="headerlink" title="å¤šæ€æ–¹æ³•è°ƒç”¨ä»¥åŠå‚æ•°ä¼ é€’"></a>å¤šæ€æ–¹æ³•è°ƒç”¨ä»¥åŠå‚æ•°ä¼ é€’</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-keyword">package</span> cn.kongwei_liao.<span class="hljs-type">Polymorphism</span>;<br><br>public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Bee</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Animal</span></span>&#123;<br><span class="hljs-meta">@Override</span><br>public void walk() &#123;<br><span class="hljs-type">System</span>.out.println(<span class="hljs-string">&quot;Beeé£è¡Œï¼&quot;</span>);<br>&#125;<br>public void jiMi() &#123;<br><span class="hljs-type">System</span>.out.println(<span class="hljs-string">&quot;å°èœœèœ‚é‡‡é›†deèŠ±èœœï¼Œç»´å°¼å¯çˆ±åƒäº†ï¼&quot;</span>);<br>&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-keyword">package</span> cn.kongwei_liao.<span class="hljs-type">Polymorphism</span>;<br><br>public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Bee1</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Bee</span></span>&#123;<br>public void jiMi() &#123;<br><span class="hljs-type">System</span>.out.println(<span class="hljs-string">&quot;Bee1é‡‡é›†deæ§æ ‘èŠ±èœœï¼&quot;</span>);<br>&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> cn.kongwei_liao.Polymorphism;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Bee2</span> </span>&#123;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">jiMi</span><span class="hljs-params">()</span> </span>&#123;<br>System.out.println(<span class="hljs-string">&quot;Bee2é‡‡é›†deæ²¹èœèŠ±èœœï¼&quot;</span>);<br>&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs typescript">package cn.kongwei_liao.Polymorphism;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Human</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Animal</span></span>&#123;<br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">walk</span>(<span class="hljs-params"></span>)</span> &#123;<br>System.out.println(<span class="hljs-string">&quot;HumanåŒè¶³è¡Œèµ°ï¼&quot;</span>);<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">playGames</span>(<span class="hljs-params"></span>)</span> &#123;<br>System.out.println(<span class="hljs-string">&quot;äººç±»Aä¼Ÿåˆåœ¨æ‰“ç”µåŠ¨å“¦ï¼&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">//@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">have</span>(<span class="hljs-params"></span>)</span> &#123;<br><span class="hljs-comment">//Error:The method have() of type Human must override or implement a supertype method</span><br>System.out.println(<span class="hljs-string">&quot;Humanåƒé¥­ï¼&quot;</span>);<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">have</span>(<span class="hljs-params">Bee bee</span>)</span> &#123;<br>System.out.print(<span class="hljs-string">&quot;åƒ&quot;</span>);<br>bee.jiMi();<br>&#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs haxe"><span class="hljs-keyword">package</span> cn.kongwei_liao.Polymorphism;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Test</span> </span>&#123;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> void main(<span class="hljs-keyword">String</span>[] args) &#123;<br><span class="hljs-comment">// TODO Auto-generated method stub</span><br><br>Bee bee1=<span class="hljs-keyword">new</span> <span class="hljs-type">Bee</span>();<br>Bee bee2=<span class="hljs-keyword">new</span> <span class="hljs-type">Bee</span>();<br><br>hu.have(bee1);<span class="hljs-comment">//Human.have(Bee bee):ä¼ å…¥Beeçš„ç»§æ‰¿ç±»Bee1çš„å¯¹è±¡ï¼Œä½†è°ƒç”¨çš„æ˜¯Beeçš„jiMi()</span><br>hu.have(bee2);<br><br>&#125;<br>&#125;<br><span class="hljs-comment">/*</span><br><span class="hljs-comment">*ç¼–è¯‘ï¼Œæˆ–è€…ä¼ é€’çš„è¿‡ç¨‹ä¸­ä¼ é€’çš„æ˜¯å¯¹è±¡çš„åœ°å€ï¼›</span><br><span class="hljs-comment">*è¿è¡Œç»“æœï¼šçœ‹è°ï¼ˆçœŸæ­£çš„å¯¹è±¡ï¼‰åœ¨è°ƒç”¨jiMi()</span><br><span class="hljs-comment">*/</span><br></code></pre></td></tr></table></figure><p><img src="/2019/11/06/Java%E5%A4%9A%E6%80%81/%E5%A4%9A%E6%80%81%E5%AF%B9%E8%B1%A1%E8%B0%83%E7%94%A8.png" alt="3"></p>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>é¢å¯¹å¯¹è±¡</tag>
      
      <tag>å¤šæ€</tag>
      
      <tag>ç»§æ‰¿</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ•°æ®ç»“æ„ï¼šæŸ¥æ‰¾</title>
    <link href="/2019/11/06/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%EF%BC%9A%E6%9F%A5%E6%89%BE/"/>
    <url>/2019/11/06/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%EF%BC%9A%E6%9F%A5%E6%89%BE/</url>
    
    <content type="html"><![CDATA[<p>æŸ¥æ‰¾çš„åŸºæœ¬æ¦‚å¿µ  </p><p>æŸ¥æ‰¾ï¼šåœ¨æ•°æ®é›†åˆä¸­å¯»æ‰¾æ»¡è¶³æŸç§æ¡ä»¶çš„æ•°æ®å…ƒç´ çš„è¿‡ç¨‹ç§°ä¸ºæŸ¥æ‰¾</p><p><img src="/2019/11/06/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%EF%BC%9A%E6%9F%A5%E6%89%BE/cha.png" alt="1"></p><p>æŸ¥æ‰¾è¡¨ï¼šç”¨äºæŸ¥æ‰¾çš„æ•°æ®é›†åˆç§°ä¸ºæŸ¥æ‰¾è¡¨</p><ul><li>æŸ¥è¯¢æŸä¸ªæ•°æ®å…ƒç´ æ˜¯å¦åœ¨æŸ¥æ‰¾è¡¨</li><li>æŸ¥è¯¢æŸä¸ªæ•°æ®å…ƒç´ çš„å±æ€§</li><li>å¯¹æŸ¥æ‰¾è¡¨è¿›è¡Œæ“ä½œï¼ˆæ’å…¥æˆ–åˆ é™¤æŸä¸ªå…ƒç´ ï¼‰</li></ul><p>é™æ€æŸ¥æ‰¾è¡¨ï¼šå¦‚æœä¸€ä¸ªæŸ¥æ‰¾è¡¨åªæ¶‰åŠæ“ä½œ1å’Œ2ï¼ˆä¸æ¶‰åŠä¿®æ”¹ï¼‰</p><ul><li>é¡ºåºæŸ¥æ‰¾</li><li>æŠ˜åŠæŸ¥æ‰¾</li></ul><p>åŠ¨æ€æŸ¥æ‰¾è¡¨ï¼š</p><ul><li>äºŒå‰æ’åºæ ‘</li><li>å¹³è¡¡äºŒå‰æ ‘</li></ul><p>æ•°æ®å…ƒç´ å¾€å¾€åŒ…å«é™¤äº†å…³é”®å­—ä»¥å¤–çš„å¾ˆå¤šæ•°æ®ï¼Œè¿™ä¸ªæ•°æ®å…ƒç´ ä¹Ÿå«åšæ˜¯è®°å½•</p><figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs elm">typedef struct&#123;<br>            <span class="hljs-type">Elemtype</span> key;  // å…³é”®å­—<br>            å…¶ä»–ä¿¡æ¯â€¦<br>&#125;æ•°æ®å…ƒç´ (è®°å½•)<br></code></pre></td></tr></table></figure><p>å¦‚æœä¸ç‰¹åˆ«è¯´æ˜ï¼Œè®°å½•å¯ä»¥çœ‹ä½œæ˜¯åªå«å…³é”®å­—</p><p>å…³é”®å­—ï¼ˆå³æŸ¥æ‰¾æ—¶æ¯”è¾ƒçš„å¯¹è±¡ï¼‰ï¼šæ•°æ®å…ƒç´ ä¸­æŸä¸ªå¯ä»¥å”¯ä¸€æ ‡è¯†è¯¥å…ƒç´ çš„æ•°æ®é¡¹</p><p>å¹³å‡æŸ¥æ‰¾é•¿åº¦ï¼ˆASL:Average Search Lengthï¼‰:åœ¨æŸ¥æ‰¾çš„è¿‡ç¨‹ä¸­ï¼Œä¸€æ¬¡æŸ¥æ‰¾é•¿åº¦æ˜¯æŒ‡éœ€æ¯”è¾ƒçš„å…³é”®å­—æ¬¡æ•°ï¼Œè€Œå¹³å‡æŸ¥æ‰¾é•¿åº¦åˆ™æ˜¯æ‰€æœ‰æŸ¥æ‰¾è¿‡ç¨‹ä¸­è¿›è¡Œå…³é”®å­—æ¯”è¾ƒæ¬¡æ•°çš„å¹³å‡å€¼ã€‚    <strong>ASLç›¸å½“äºæ˜¯æŸ¥æ‰¾ç®—æ³•çš„åŸºæœ¬æ“ä½œæ‰§è¡Œæ¬¡æ•°</strong></p><p><img src="/2019/11/06/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%EF%BC%9A%E6%9F%A5%E6%89%BE/ASL.png" alt="2"></p><p>é¡ºåºæŸ¥æ‰¾</p><p>é¡ºåºæŸ¥æ‰¾ï¼ˆçº¿æ€§æŸ¥æ‰¾ï¼‰ï¼Œä¸»è¦ç”¨äºåœ¨çº¿æ€§è¡¨ä¸­è¿›è¡ŒæŸ¥æ‰¾ã€‚</p><p>ä»æŸ¥æ‰¾è¡¨çš„ä¸€ç«¯å¼€å§‹ï¼Œé¡ºåºæ‰«ææŸ¥æ‰¾è¡¨ï¼Œä¾æ¬¡å°†æ‰«æåˆ°çš„å…³é”®å­—å’Œå¾…æŸ¥æ‰¾çš„å€¼keyè¿›è¡Œæ¯”è¾ƒã€‚</p><p>å¦‚æœç›¸ç­‰ï¼ŒæŸ¥æ‰¾æˆåŠŸã€‚</p><p>å¦‚æœæ‰«æç»“æŸä»æœªå‘ç°ç›¸ç­‰çš„æ•°æ®å…ƒç´ ï¼ŒæŸ¥æ‰¾å¤±è´¥ã€‚</p><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs processing"><span class="hljs-built_in">int</span> Search1(<span class="hljs-built_in">int</span> a[ ],<span class="hljs-built_in">int</span> n,<span class="hljs-built_in">int</span> <span class="hljs-built_in">key</span>)&#123;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-built_in">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++)&#123;  <span class="hljs-comment">//æ³¨æ„ä»1å¼€å§‹</span><br>          <span class="hljs-keyword">if</span>(a[i]==<span class="hljs-built_in">key</span>)<span class="hljs-keyword">return</span> i; <span class="hljs-comment">//æŸ¥æ‰¾æˆåŠŸ</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; <span class="hljs-comment">//æŸ¥æ‰¾å¤±è´¥</span><br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs processing"><span class="hljs-built_in">int</span> Search2(<span class="hljs-built_in">int</span> a[ ],<span class="hljs-built_in">int</span> n,<span class="hljs-built_in">int</span> <span class="hljs-built_in">key</span>)&#123;<br>     <span class="hljs-built_in">int</span> i=n;<br>     a[<span class="hljs-number">0</span>]=<span class="hljs-built_in">key</span>; <span class="hljs-comment">//è®¾ç½®â€œå“¨å…µâ€</span><br>     <span class="hljs-keyword">while</span>(a[i]!=<span class="hljs-built_in">key</span>)&#123; <span class="hljs-comment">//å¦‚æœä¸æ˜¯è¦æ‰¾çš„å…ƒç´ </span><br>            i--;  <span class="hljs-comment">//ä»åå¾€å‰æ‰¾</span><br>      &#125;<br>      <span class="hljs-keyword">return</span> i; <span class="hljs-comment">//å¦‚æœæŸ¥æ‰¾å¤±è´¥ä¹Ÿä¼šè¿”å›0</span><br>&#125;<br></code></pre></td></tr></table></figure><p><img src="/2019/11/06/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%EF%BC%9A%E6%9F%A5%E6%89%BE/shunxu.png" alt="2"></p><p><img src="/2019/11/06/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%EF%BC%9A%E6%9F%A5%E6%89%BE/%E9%A1%BA%E5%BA%8F%E6%88%90%E5%8A%9F.png" alt="3"></p><p><img src="/2019/11/06/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%EF%BC%9A%E6%9F%A5%E6%89%BE/%E9%A1%BA%E5%BA%8F%E5%A4%B1%E8%B4%A5.png" alt="4"></p>]]></content>
    
    
    <categories>
      
      <category>æ•°æ®ç»“æ„</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æŸ¥æ‰¾</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç¬¬ä¸€è®²ï¼šä¸ºä»€ä¹ˆå­¦ä¹ ç½‘ç»œåè®®</title>
    <link href="/2019/11/06/%E7%AC%AC%E4%B8%80%E8%AE%B2%EF%BC%9A%E4%B8%BA%E4%BB%80%E4%B9%88%E5%AD%A6%E4%B9%A0%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/"/>
    <url>/2019/11/06/%E7%AC%AC%E4%B8%80%E8%AE%B2%EF%BC%9A%E4%B8%BA%E4%BB%80%E4%B9%88%E5%AD%A6%E4%B9%A0%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/</url>
    
    <content type="html"><![CDATA[<p>ç¬¬1è®² | ä¸ºä»€ä¹ˆè¦å­¦ä¹ ç½‘ç»œåè®®ï¼Ÿ</p><p>ã€Šåœ£ç»ã€‹ä¸­æœ‰ä¸€ä¸ªé€šå¤©å¡”çš„æ•…äº‹ï¼Œå¤§è‡´æ˜¯è¯´ï¼Œä¸Šå¸ä¸ºäº†é˜»æ­¢äººç±»è”åˆèµ·æ¥ï¼Œå°±è®©äººç±»è¯´ä¸åŒçš„è¯­è¨€ã€‚äººç±» æ²¡æ³•å„¿æ²Ÿé€šï¼Œè¾¾ä¸æˆâ€œåè®®â€ï¼Œé€šå¤©å¡”çš„è®¡åˆ’å°±å¤±è´¥äº†ã€‚ ä½†æ˜¯åƒå¹´ä»¥åï¼Œæœ‰ä¸€ç§å«â€œç¨‹åºçŒ¿â€çš„ç‰©ç§ï¼Œæ•²ç€ä¸€ç§è¿™ä¸ªç¾¤ä½“é€šç”¨çš„è¯­è¨€ï¼Œè¿æ¥ç€å…¨ä¸–ç•Œæ‰€æœ‰çš„äººï¼Œæ‰“ é€ è¿™äº’è”ç½‘ä¸–ç•Œçš„é€šå¤©å¡”ã€‚å¦‚ä»Šçš„ä¸–ç•Œï¼Œæ­£æ˜¯å› ä¸ºäº’è”ç½‘ï¼Œæ‰è¿æ¥åœ¨ä¸€èµ·ã€‚ å½“ â€œHello World!â€ ä»æ˜¾ç¤ºå™¨æ‰“å°å‡ºæ¥çš„æ—¶å€™ï¼Œè¿˜è®°å¾—ä½ æ¿€åŠ¨çš„å¿ƒæƒ…å—ï¼Ÿ public class </p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs arduino">HelloWorld &#123; <br>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">String</span>[] args)</span></span>&#123; <br>    System.out.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;Hello World!&quot;</span>); <br>  &#125; <br>&#125;<br></code></pre></td></tr></table></figure><p>å¦‚æœä½ æ˜¯ç¨‹åºå‘˜ï¼Œä¸€å®šçœ‹å¾—æ‡‚ä¸Šé¢è¿™ä¸€æ®µæ–‡å­—ã€‚è¿™æ˜¯æ¯ä¸€ä¸ªç¨‹åºå‘˜å‘è®¡ç®—æœºä¸–ç•Œè¯´â€œä½ å¥½ï¼Œä¸–ç•Œâ€çš„æ–¹ å¼ã€‚ä½†æ˜¯ï¼Œä½ ä¸ä¸€å®šçŸ¥é“ï¼Œè¿™æ®µæ–‡å­—ä¹Ÿæ˜¯ä¸€ç§åè®®ï¼Œæ˜¯äººç±»å’Œè®¡ç®—æœºæ²Ÿé€šçš„åè®®ï¼Œåªæœ‰é€šè¿‡è¿™ç§åè®®ï¼Œè®¡ ç®—æœºæ‰çŸ¥é“æˆ‘ä»¬æƒ³è®©å®ƒåšä»€ä¹ˆã€‚ åè®®ä¸‰è¦ç´  å½“ç„¶ï¼Œè¿™ç§åè®®è¿˜æ˜¯æ›´æ¥è¿‘äººç±»è¯­è¨€ï¼Œæœºå™¨ä¸èƒ½ç›´æ¥è¯»æ‡‚ï¼Œéœ€è¦è¿›è¡Œç¿»è¯‘ï¼Œç¿»è¯‘çš„å·¥ä½œæ•™ç»™ç¼–è¯‘å™¨ï¼Œä¹Ÿå°± æ˜¯ç¨‹åºå‘˜å¸¸è¯´çš„ compileã€‚è¿™ä¸ªè¿‡ç¨‹æ¯”è¾ƒå¤æ‚ï¼Œå…¶ä¸­çš„ç¼–è¯‘åŸç†éå¸¸å¤æ‚ï¼Œæˆ‘åœ¨è¿™é‡Œä¸è¿›è¡Œè¯¦è¿°ã€‚  </p><p><img src="/2019/11/06/%E7%AC%AC%E4%B8%80%E8%AE%B2%EF%BC%9A%E4%B8%BA%E4%BB%80%E4%B9%88%E5%AD%A6%E4%B9%A0%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/1.png" alt="1"></p><p>ä½†æ˜¯å¯ä»¥çœ‹å¾—å‡ºï¼Œè®¡ç®—æœºè¯­è¨€ä½œä¸ºç¨‹åºå‘˜æ§åˆ¶ä¸€å°è®¡ç®—æœºå·¥ä½œçš„åè®®ï¼Œå…·å¤‡äº†<code>åè®®çš„ä¸‰è¦ç´ </code>ã€‚</p><ul><li><code>è¯­æ³•</code>ï¼Œå°±æ˜¯è¿™ä¸€æ®µå†…å®¹è¦ç¬¦åˆä¸€å®šçš„è§„åˆ™å’Œæ ¼å¼ã€‚ä¾‹å¦‚ï¼Œæ‹¬å·è¦æˆå¯¹ï¼Œç»“æŸè¦ä½¿ç”¨åˆ†å·ç­‰ã€‚ </li><li><code>è¯­ä¹‰</code>ï¼Œå°±æ˜¯è¿™ä¸€æ®µå†…å®¹è¦ä»£è¡¨æŸç§æ„ä¹‰ã€‚ä¾‹å¦‚æ•°å­—å‡å»æ•°å­—æ˜¯æœ‰æ„ä¹‰çš„ï¼Œæ•°å­—å‡å»æ–‡æœ¬ä¸€èˆ¬æ¥ è¯´å°±æ²¡æœ‰æ„ä¹‰ã€‚ </li><li><code>é¡ºåº</code>ï¼Œå°±æ˜¯å…ˆå¹²å•¥ï¼Œåå¹²å•¥ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥å…ˆåŠ ä¸ŠæŸä¸ªæ•°å€¼ï¼Œç„¶åå†å‡å»æŸä¸ªæ•°å€¼ã€‚</li></ul><p>ä¼šäº†è®¡ç®—æœºè¯­è¨€ï¼Œä½ å°±èƒ½å¤Ÿæ•™ç»™ä¸€å°è®¡ç®—æœºå®Œæˆä½ çš„å·¥ä½œäº†ã€‚æ­å–œä½ ï¼Œå…¥é—¨äº†ï¼ </p><p>ä½†æ˜¯ï¼Œè¦æƒ³æ‰“é€ äº’è”ç½‘ä¸–ç•Œçš„é€šå¤©å¡”ï¼Œåªæ•™ç»™ä¸€å°æœºå™¨åšä»€ä¹ˆæ˜¯ä¸å¤Ÿçš„ï¼Œä½ éœ€è¦å­¦ä¼šæ•™ç»™ä¸€å¤§ç‰‡æœºå™¨åšä»€ ä¹ˆã€‚è¿™å°±éœ€è¦ç½‘ç»œåè®®ã€‚åªæœ‰é€šè¿‡ç½‘ç»œåè®®ï¼Œæ‰èƒ½ä½¿ä¸€å¤§ç‰‡æœºå™¨äº’ç›¸åä½œã€å…±åŒå®Œæˆä¸€ä»¶äº‹ã€‚ </p><p>è¿™ä¸ªæ—¶å€™ï¼Œä½ å¯èƒ½ä¼šé—®ï¼Œç½‘ç»œåè®®é•¿å•¥æ ·ï¼Œè¿™ä¹ˆç¥å¥‡ï¼Œèƒ½å¹²æˆå•¥äº‹ï¼Ÿæˆ‘å…ˆæ‹¿ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œè®©ä½ å°å°é²œï¼Œç„¶åå†è®²ä¸€ä¸ªå¤§äº‹ã€‚ </p><p>å½“ä½ æƒ³è¦ä¹°ä¸€ä¸ªå•†å“ï¼Œå¸¸è§„çš„åšæ³•å°±æ˜¯æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥è´­ç‰©ç½‘ç«™çš„åœ°å€ã€‚æµè§ˆå™¨å°±ä¼šç»™ä½ æ˜¾ç¤ºä¸€ä¸ªç¼¤çº· å¤šå½©çš„é¡µé¢ã€‚ </p><p>é‚£ä½ æœ‰æ²¡æœ‰æ·±å…¥æ€è€ƒè¿‡ï¼Œæµè§ˆå™¨æ˜¯å¦‚ä½•åšåˆ°è¿™ä»¶äº‹æƒ…çš„ï¼Ÿå®ƒä¹‹æ‰€ä»¥èƒ½å¤Ÿæ˜¾ç¤ºç¼¤çº·å¤šå½©çš„é¡µé¢ï¼Œæ˜¯å› ä¸ºå®ƒæ”¶ åˆ°äº†ä¸€æ®µæ¥è‡ª HTTP åè®®çš„â€œä¸œè¥¿â€ã€‚æˆ‘æ‹¿ç½‘æ˜“è€ƒæ‹‰æ¥ä¸¾ä¾‹ï¼Œæ ¼å¼å°±åƒä¸‹é¢è¿™æ ·ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs xml">HTTP/1.1 200 OK <br>Date: Tue, 27 Mar 2018 16:50:26 GMT <br>Content-Type: text/html;charset=UTF-8 <br>Content-Language: zh-CN <br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">base</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://pages.kaola.com/&quot;</span> /&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span>/&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span> ç½‘æ˜“è€ƒæ‹‰ 3 å‘¨å¹´ä¸»ä¼šåœº <span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span> <br></code></pre></td></tr></table></figure><p>è¿™ç¬¦åˆåè®®çš„ä¸‰è¦ç´ å—ï¼Ÿæˆ‘å¸¦ä½ æ¥çœ‹ä¸€ä¸‹ã€‚ </p><ul><li>é¦–å…ˆï¼Œç¬¦åˆè¯­æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåªæœ‰æŒ‰ç…§ä¸Šé¢é‚£ä¸ªæ ¼å¼æ¥ï¼Œæµè§ˆå™¨æ‰è®¤ã€‚ä¾‹å¦‚ï¼Œä¸Šæ¥æ˜¯çŠ¶æ€ï¼Œç„¶åæ˜¯é¦–éƒ¨ï¼Œ ç„¶åæ˜¯å†…å®¹ã€‚ </li><li>ç¬¬äºŒï¼Œç¬¦åˆè¯­ä¹‰ï¼Œå°±æ˜¯è¦æŒ‰ç…§çº¦å®šçš„æ„æ€æ¥ã€‚ä¾‹å¦‚ï¼ŒçŠ¶æ€ 200ï¼Œè¡¨è¿°çš„æ„æ€æ˜¯ç½‘é¡µæˆåŠŸè¿”å›ã€‚å¦‚æœä¸æˆåŠŸï¼Œå°±æ˜¯æˆ‘ä»¬å¸¸è§çš„â€œ404â€ã€‚ </li><li>ç¬¬ä¸‰ï¼Œç¬¦åˆé¡ºåºï¼Œä½ ä¸€ç‚¹æµè§ˆå™¨ï¼Œå°±æ˜¯å‘é€å‡ºä¸€ä¸ª HTTP è¯·æ±‚ï¼Œç„¶åæ‰æœ‰ä¸Šé¢é‚£ä¸€ä¸² HTTP è¿”å›çš„ä¸œè¥¿ã€‚ æµè§ˆå™¨æ˜¾ç„¶æŒ‰ç…§åè®®å•†å®šå¥½çš„åšäº†ï¼Œåä¸€ä¸ªäº”å½©ç¼¤çº·çš„é¡µé¢å°±å‡ºç°åœ¨ä½ é¢å‰äº†ã€‚ æˆ‘ä»¬å¸¸ç”¨çš„ç½‘ç»œåè®®æœ‰å“ªäº›ï¼Ÿ </li></ul><p>æ¥ä¸‹æ¥æ­ç§˜æˆ‘è¦è¯´çš„å¤§äº‹æƒ…ï¼Œâ€œåŒåä¸€â€ã€‚è¿™å’Œæˆ‘ä»¬è¦è®²çš„ç½‘ç»œåè®®æœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿ </p><p>åœ¨ç»æµå­¦é¢†åŸŸï¼Œæœ‰ä¸ªä¼¦çº³å¾·âˆ™é‡Œå¾·ï¼ˆLeonard E. Readï¼‰åˆ›ä½œçš„ã€Šé“…ç¬”çš„æ•…äº‹ã€‹ã€‚è¿™ä¸ªæ•…äº‹é€šè¿‡ä¸€ä¸ªé“…ç¬”çš„ è¯ç”Ÿè¿‡ç¨‹ï¼Œæ¥è®²è¿°å¤æ‚çš„ç»æµå­¦ç†è®ºã€‚è¿™é‡Œï¼Œæˆ‘ä¹Ÿç”¨ä¸€ä¸ªä¸‹å•çš„è¿‡ç¨‹ï¼Œçœ‹çœ‹äº’è”ç½‘ä¸–ç•Œçš„è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œéƒ½ ä½¿ç”¨äº†å“ªäº›ç½‘ç»œåè®®ã€‚ </p><p>ä½ å…ˆåœ¨æµè§ˆå™¨é‡Œé¢è¾“å…¥ <a href="https://www.kaola.com/">https://www.kaola.com</a> ï¼Œè¿™æ˜¯ä¸€ä¸ªURLã€‚æµè§ˆå™¨åªçŸ¥é“åå­— æ˜¯â€œ<a href="http://www.kaola.comâ€,ä½†æ˜¯ä¸çŸ¥é“å…·ä½“çš„åœ°ç‚¹,æ‰€ä»¥ä¸çŸ¥é“åº”è¯¥å¦‚ä½•è®¿é—®.äºæ˜¯,å®ƒæ‰“å¼€åœ°å€ç°¿å»æŸ¥/">www.kaola.comâ€ï¼Œä½†æ˜¯ä¸çŸ¥é“å…·ä½“çš„åœ°ç‚¹ï¼Œæ‰€ä»¥ä¸çŸ¥é“åº”è¯¥å¦‚ä½•è®¿é—®ã€‚äºæ˜¯ï¼Œå®ƒæ‰“å¼€åœ°å€ç°¿å»æŸ¥</a> æ‰¾ã€‚å¯ä»¥ä½¿ç”¨ä¸€èˆ¬çš„åœ°å€ç°¿åè®®DNSï¼ˆæœ¬åœ°DNSï¼Ÿï¼‰å»æŸ¥æ‰¾ï¼Œè¿˜å¯ä»¥ä½¿ç”¨å¦ä¸€ç§æ›´åŠ ç²¾å‡†çš„åœ°å€ç°¿æŸ¥æ‰¾åè®®HTTPDNSï¼ˆDNSæœåŠ¡å™¨ï¼‰ã€‚ æ— è®ºç”¨å“ªä¸€ç§æ–¹æ³•æŸ¥æ‰¾ï¼Œç»ˆéƒ½ä¼šå¾—åˆ°è¿™ä¸ªåœ°å€ï¼š106.114.138.24ã€‚è¿™ä¸ªæ˜¯IPåœ°å€ï¼Œæ˜¯äº’è”ç½‘ä¸–ç•Œçš„â€œé—¨ç‰Œå·â€ã€‚</p><p>çŸ¥é“äº†ç›®æ ‡åœ°å€ï¼Œæµè§ˆå™¨å°±å¼€å§‹æ‰“åŒ…å®ƒçš„è¯·æ±‚ã€‚å¯¹äºæ™®é€šçš„æµè§ˆè¯·æ±‚ï¼Œå¾€å¾€ä¼šä½¿ç”¨HTTPåè®®ï¼›ä½†æ˜¯å¯¹äºè´­ç‰©çš„è¯·æ±‚ï¼Œå¾€å¾€éœ€è¦è¿›è¡ŒåŠ å¯†ä¼ è¾“ï¼Œå› è€Œä¼šä½¿ç”¨HTTPSåè®®ã€‚æ— è®ºæ˜¯ä»€ä¹ˆåè®®ï¼Œé‡Œé¢éƒ½ä¼šå†™æ˜â€œä½ è¦ä¹°ä»€ä¹ˆå’Œä¹°å¤šå°‘â€ã€‚ </p><p><img src="/2019/11/06/%E7%AC%AC%E4%B8%80%E8%AE%B2%EF%BC%9A%E4%B8%BA%E4%BB%80%E4%B9%88%E5%AD%A6%E4%B9%A0%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/2.png" alt="2"></p><p>DNSã€HTTPã€HTTPS æ‰€åœ¨çš„å±‚æˆ‘ä»¬ç§°ä¸ºåº”ç”¨å±‚ã€‚ç»è¿‡åº”ç”¨å±‚å°è£…åï¼Œæµè§ˆå™¨ä¼šå°†åº”ç”¨å±‚çš„åŒ…äº¤ç»™ä¸‹ä¸€å±‚ å»å®Œæˆï¼Œé€šè¿‡<code> socketç¼–ç¨‹</code>æ¥å®ç°ã€‚ä¸‹ä¸€å±‚æ˜¯ä¼ è¾“å±‚ã€‚ä¼ è¾“å±‚æœ‰ä¸¤ç§åè®®ï¼Œä¸€ç§æ˜¯<code>æ— è¿æ¥çš„åè®®UDP</code>ï¼Œä¸€ ç§æ˜¯<code>é¢å‘è¿æ¥çš„åè®®TCP</code>ã€‚å¯¹äºæ”¯ä»˜æ¥è®²ï¼Œå¾€å¾€ä½¿ç”¨ TCP åè®®ã€‚æ‰€è°“çš„é¢å‘è¿æ¥å°±æ˜¯ï¼ŒTCP ä¼šä¿è¯è¿™ä¸ªåŒ… èƒ½å¤Ÿåˆ°è¾¾ç›®çš„åœ°ã€‚å¦‚æœä¸èƒ½åˆ°è¾¾ï¼Œå°±ä¼šé‡æ–°å‘é€ï¼Œç›´è‡³åˆ°è¾¾ã€‚ </p><p>TCP åè®®é‡Œé¢ä¼šæœ‰ä¸¤ä¸ª<code>ç«¯å£</code>ï¼Œä¸€ä¸ªæ˜¯<code>æµè§ˆå™¨ç›‘å¬çš„ç«¯å£</code>ï¼Œä¸€ä¸ªæ˜¯ç”µå•†çš„<code>æœåŠ¡å™¨ç›‘å¬çš„ç«¯å£</code>ã€‚æ“ä½œç³»ç»Ÿå¾€å¾€é€šè¿‡ç«¯å£æ¥åˆ¤æ–­ï¼Œå®ƒå¾—åˆ°çš„åŒ…åº”è¯¥ç»™å“ªä¸ªè¿›ç¨‹ã€‚</p><p><img src="/2019/11/06/%E7%AC%AC%E4%B8%80%E8%AE%B2%EF%BC%9A%E4%B8%BA%E4%BB%80%E4%B9%88%E5%AD%A6%E4%B9%A0%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/3.png" alt="3"></p><p>ä¼ è¾“å±‚å°è£…å®Œæ¯•åï¼Œæµè§ˆå™¨ä¼šå°†åŒ…äº¤ç»™æ“ä½œç³»ç»Ÿçš„ç½‘ç»œå±‚ã€‚ç½‘ç»œå±‚çš„åè®®æ˜¯<code> IP åè®®</code>ã€‚åœ¨ IP åè®®é‡Œé¢ä¼šæœ‰<code>æºIPåœ°å€</code>ï¼Œå³æµè§ˆå™¨æ‰€åœ¨æœºå™¨çš„IPåœ°å€å’Œ<code>ç›®æ ‡IPåœ°å€</code>ï¼Œä¹Ÿå³ç”µå•†ç½‘ç«™æ‰€åœ¨æœåŠ¡å™¨çš„IPåœ°å€ã€‚</p><p><img src="/2019/11/06/%E7%AC%AC%E4%B8%80%E8%AE%B2%EF%BC%9A%E4%B8%BA%E4%BB%80%E4%B9%88%E5%AD%A6%E4%B9%A0%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/4.png" alt="4"></p><p>æ“ä½œç³»ç»Ÿæ—¢ç„¶çŸ¥é“äº†ç›®æ ‡ IP åœ°å€ï¼Œå°±å¼€å§‹æƒ³å¦‚ä½•æ ¹æ®è¿™ä¸ªé—¨ç‰Œå·æ‰¾åˆ°ç›®æ ‡æœºå™¨ã€‚æ“ä½œç³»ç»Ÿå¾€å¾€ä¼šåˆ¤æ–­ï¼Œè¿™ ä¸ªç›®æ ‡ IP åœ°å€æ˜¯æœ¬åœ°äººï¼Œè¿˜æ˜¯å¤–åœ°äººã€‚å¦‚æœæ˜¯æœ¬åœ°äººï¼Œä»é—¨ç‰Œå·å°±èƒ½çœ‹å‡ºæ¥ï¼Œä½†æ˜¯æ˜¾ç„¶ç”µå•†ç½‘ç«™ä¸åœ¨æœ¬ åœ°ï¼Œè€Œåœ¨é¥è¿œçš„åœ°æ–¹ã€‚</p><p>æ“ä½œç³»ç»ŸçŸ¥é“è¦ç¦»å¼€æœ¬åœ°å»è¿œæ–¹ã€‚è™½ç„¶ä¸çŸ¥é“è¿œæ–¹åœ¨ä½•å¤„ï¼Œä½†æ˜¯å¯ä»¥è¿™æ ·ç±»æ¯”ä¸€ä¸‹ï¼šå¦‚æœå»å›½å¤–è¦å»æµ· å…³ï¼Œå»å¤–åœ°å°±è¦å»ç½‘å…³ã€‚è€Œæ“ä½œç³»ç»Ÿå¯åŠ¨çš„æ—¶å€™ï¼Œå°±ä¼šè¢« <code>DHCP åè®®é…ç½® IP åœ°å€</code>ï¼Œä»¥åŠ<code>é»˜è®¤çš„ç½‘å…³çš„ IPåœ°å€ 192.168.1.1</code>ã€‚ </p><p>æ“ä½œç³»ç»Ÿå¦‚ä½•å°† IP åœ°å€å‘ç»™ç½‘å…³(ç½‘å…³åœ¨æœ¬åœ°)å‘¢ï¼Ÿåœ¨æœ¬åœ°é€šä¿¡åŸºæœ¬é å¼ï¼Œäºæ˜¯æ“ä½œç³»ç»Ÿå¤§å¼ä¸€å£°ï¼Œè°æ˜¯ 192.168.1.1  å•Šï¼Ÿç½‘å…³ä¼šå›ç­”å®ƒï¼Œæˆ‘å°±æ˜¯ï¼Œæˆ‘çš„æœ¬åœ°åœ°å€åœ¨æ‘ä¸œå¤´ã€‚è¿™ä¸ªæœ¬åœ°åœ°å€å°±æ˜¯MACåœ°å€ï¼Œè€Œå¤§å¼çš„é‚£ä¸€å£°æ˜¯ ARPåè®®ã€‚</p><p><img src="/2019/11/06/%E7%AC%AC%E4%B8%80%E8%AE%B2%EF%BC%9A%E4%B8%BA%E4%BB%80%E4%B9%88%E5%AD%A6%E4%B9%A0%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/5.png" alt="5"></p><p>äºæ˜¯æ“ä½œç³»ç»Ÿå°† IP åŒ…äº¤ç»™äº†ä¸‹ä¸€å±‚ï¼Œä¹Ÿå°±æ˜¯MAC å±‚ã€‚ç½‘å¡å†å°†åŒ…å‘å‡ºå»ã€‚ç”±äºè¿™ä¸ªåŒ…é‡Œé¢æ˜¯æœ‰ MAC åœ° å€çš„ï¼Œå› è€Œå®ƒèƒ½å¤Ÿåˆ°è¾¾ç½‘å…³ã€‚ </p><p>ç½‘å…³æ”¶åˆ°åŒ…ä¹‹åï¼Œä¼šæ ¹æ®è‡ªå·±çš„çŸ¥è¯†ï¼Œåˆ¤æ–­ä¸‹ä¸€æ­¥åº”è¯¥æ€ä¹ˆèµ°ã€‚<code>ç½‘å…³å¾€å¾€æ˜¯ä¸€ä¸ªè·¯ç”±å™¨</code>ï¼Œåˆ°æŸä¸ª IP åœ°å€åº”è¯¥æ€ä¹ˆèµ°ï¼Œè¿™ä¸ªå«ä½œ<code>è·¯ç”±è¡¨</code>ã€‚ </p><p>è·¯ç”±å™¨æœ‰ç‚¹åƒç„å¥˜è¥¿è¡Œè·¯è¿‡çš„ä¸€ä¸ªä¸ªå›½å®¶çš„ä¸€ä¸ªä¸ªåŸå…³ã€‚æ¯ä¸ªåŸå…³éƒ½è¿ç€ä¸¤ä¸ªå›½å®¶ï¼Œæ¯ä¸ªå›½å®¶ç›¸å½“äºä¸€ä¸ª å±€åŸŸç½‘ï¼Œåœ¨æ¯ä¸ªå›½å®¶å†…éƒ¨ï¼Œéƒ½å¯ä»¥ä½¿ç”¨æœ¬åœ°çš„åœ°å€ MAC è¿›è¡Œé€šä¿¡ã€‚ </p><p>ä¸€æ—¦è·¨è¶ŠåŸå…³ï¼Œå°±éœ€è¦æ‹¿å‡º IP å¤´æ¥ï¼Œé‡Œé¢å†™ç€è´«åƒ§æ¥è‡ªä¸œåœŸå¤§å”ï¼ˆå°±æ˜¯æº IP åœ°å€ï¼‰ï¼Œæ¬²å¾€è¥¿å¤©æ‹œä½›æ±‚ç» ï¼ˆæŒ‡çš„æ˜¯ç›®æ ‡ IP åœ°å€ï¼‰ã€‚è·¯è¿‡å®åœ°ï¼Œå€Ÿå®¿ä¸€æ™šï¼Œæ˜æ—¥å¯è¡Œï¼Œè¯·é—®æ¥ä¸‹æ¥è¯¥æ€ä¹ˆèµ°å•Šï¼Ÿ </p><p><img src="/2019/11/06/%E7%AC%AC%E4%B8%80%E8%AE%B2%EF%BC%9A%E4%B8%BA%E4%BB%80%E4%B9%88%E5%AD%A6%E4%B9%A0%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/6.png" alt="6"></p><p>åŸå…³å¾€å¾€æ˜¯çŸ¥é“è¿™äº›â€œçŸ¥è¯†â€çš„ï¼Œå› ä¸ºåŸå…³å’Œä¸´è¿‘çš„åŸå…³ä¹Ÿä¼šç»å¸¸æ²Ÿé€šã€‚åˆ°å“ªé‡Œåº”è¯¥æ€ä¹ˆèµ°ï¼Œè¿™ç§æ²Ÿé€šçš„åè®®ç§°ä¸º<code>è·¯ç”±åè®®</code>ï¼Œå¸¸ç”¨çš„æœ‰<code>OSPF</code>å’Œ<code>BGP</code>ã€‚ </p><p><img src="/2019/11/06/%E7%AC%AC%E4%B8%80%E8%AE%B2%EF%BC%9A%E4%B8%BA%E4%BB%80%E4%B9%88%E5%AD%A6%E4%B9%A0%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/7.png" alt="7"></p><p>åŸå…³ä¸åŸå…³ä¹‹é—´æ˜¯ä¸€ä¸ªå›½å®¶ï¼Œå½“ç½‘ç»œåŒ…çŸ¥é“äº†ä¸‹ä¸€æ­¥å»å“ªä¸ªåŸå…³ï¼Œè¿˜æ˜¯è¦ä½¿ç”¨å›½å®¶å†…éƒ¨çš„ MAC åœ°å€ï¼Œé€šè¿‡ä¸‹ä¸€ä¸ªåŸå…³çš„ MAC åœ°å€ï¼Œæ‰¾åˆ°ä¸‹ä¸€ä¸ªåŸå…³ï¼Œç„¶åå†é—®ä¸‹ä¸€æ­¥çš„è·¯æ€ä¹ˆèµ°ï¼Œä¸€ç›´åˆ°èµ°å‡ºæœ€åä¸€ä¸ªåŸå…³ã€‚ æœ€åä¸€ä¸ªåŸå…³çŸ¥é“è¿™ä¸ªç½‘ç»œåŒ…è¦å»çš„åœ°æ–¹ã€‚äºæ˜¯ï¼Œå¯¹ç€è¿™ä¸ªå›½å®¶å¼ä¸€å£°ï¼Œè°æ˜¯ç›®æ ‡ IP å•Šï¼Ÿç›®æ ‡æœåŠ¡å™¨å°±ä¼š å›å¤ä¸€ä¸ª MAC åœ°å€ã€‚ç½‘ç»œåŒ…è¿‡å…³åï¼Œé€šè¿‡è¿™ä¸ª MAC åœ°å€å°±èƒ½æ‰¾åˆ°ç›®æ ‡æœåŠ¡å™¨ã€‚ </p><p>ç›®æ ‡æœåŠ¡å™¨å‘ç° MAC åœ°å€å¯¹ä¸Šäº†ï¼Œå–ä¸‹ MAC å¤´æ¥ï¼Œå‘é€ç»™æ“ä½œç³»ç»Ÿçš„ç½‘ç»œå±‚ã€‚å‘ç° IP ä¹Ÿå¯¹ä¸Šäº†ï¼Œå°±å– ä¸‹ IP å¤´ã€‚IP å¤´é‡Œä¼šå†™ä¸Šä¸€å±‚å°è£…çš„æ˜¯ TCP åè®®ï¼Œç„¶åå°†å…¶äº¤ç»™ä¼ è¾“å±‚ï¼Œå³TCP å±‚ã€‚</p><p>åœ¨è¿™ä¸€å±‚ï¼ˆTCPï¼‰é‡Œï¼Œå¯¹äºæ”¶åˆ°çš„æ¯ä¸ªåŒ…ï¼Œéƒ½ä¼šæœ‰ä¸€ä¸ªå›å¤çš„åŒ…è¯´æ˜æ”¶åˆ°äº†ã€‚è¿™ä¸ªå›å¤çš„åŒ…ç»éè¿™æ¬¡ä¸‹å•è¯·æ±‚çš„ç»“æœï¼Œä¾‹å¦‚è´­ç‰©æ˜¯å¦æˆåŠŸï¼Œæ‰£äº†å¤šå°‘é’±ç­‰ï¼Œè€Œä»…ä»…æ˜¯ TCP å±‚çš„ä¸€ä¸ªè¯´æ˜ï¼Œå³æ”¶åˆ°ä¹‹åçš„å›å¤ã€‚å½“ç„¶è¿™ä¸ªå›å¤ï¼Œä¼šæ²¿ç€åˆšæ‰æ¥çš„æ–¹å‘èµ°å›å»ï¼ŒæŠ¥ä¸ªå¹³å®‰ã€‚ </p><p>å› ä¸ºä¸€æ—¦å‡ºäº†å›½é—¨ï¼Œè¥¿è¡Œè·¯ä¸Šåƒéš¾ä¸‡é™©ï¼Œå¦‚æœåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œç½‘ç»œåŒ…èµ°ä¸¢äº†ï¼Œä¾‹å¦‚è¿›äº†å¤§æ²™æ¼ ï¼Œæˆ–è€…è¢«å¼º ç›—æŠ¢åŠ«æ€å®³æ€ä¹ˆåŠå‘¢ï¼Ÿå› è€Œåˆ°äº†è¦æŠ¥ä¸ªå¹³å®‰ã€‚ </p><p>å¦‚æœè¿‡ä¸€æ®µæ—¶é—´è¿˜æ˜¯æ²¡åˆ°ï¼Œå‘é€ç«¯çš„ TCP å±‚ä¼šé‡æ–°å‘é€è¿™ä¸ªåŒ…ï¼Œè¿˜æ˜¯ä¸Šé¢çš„è¿‡ç¨‹ï¼Œç›´åˆ°æœ‰ä¸€å¤©æ”¶åˆ°å¹³å®‰åˆ° è¾¾çš„å›å¤ã€‚è¿™ä¸ªé‡è¯•ç»éä½ çš„æµè§ˆå™¨é‡æ–°å°†ä¸‹å•è¿™ä¸ªåŠ¨ä½œé‡æ–°è¯·æ±‚ä¸€æ¬¡ã€‚å¯¹äºæµè§ˆå™¨æ¥è®²ï¼Œå°±å‘é€äº†ä¸€æ¬¡ ä¸‹å•è¯·æ±‚ï¼ŒTCP å±‚ä¸æ–­è‡ªå·±é—·å¤´é‡è¯•ã€‚é™¤é TCP è¿™ä¸€å±‚å‡ºäº†é—®é¢˜ï¼Œä¾‹å¦‚è¿æ¥æ–­äº†ï¼Œæ‰è½®åˆ°æµè§ˆå™¨çš„åº”ç”¨å±‚ é‡æ–°å‘é€ä¸‹å•è¯·æ±‚ã€‚ </p><p>å½“ç½‘ç»œåŒ…å¹³å®‰åˆ°è¾¾ TCP å±‚ä¹‹åï¼ŒTCP å¤´ä¸­æœ‰ç›®æ ‡ç«¯å£å·ï¼Œé€šè¿‡è¿™ä¸ªç«¯å£å·ï¼Œå¯ä»¥æ‰¾åˆ°ç”µå•†ç½‘ç«™çš„è¿›ç¨‹æ­£åœ¨ ç›‘å¬è¿™ä¸ªç«¯å£å·ï¼Œå‡è®¾ä¸€ä¸ª Tomcatï¼Œå°†è¿™ä¸ªåŒ…å‘ç»™ç”µå•†ç½‘ç«™ã€‚ </p><p><img src="/2019/11/06/%E7%AC%AC%E4%B8%80%E8%AE%B2%EF%BC%9A%E4%B8%BA%E4%BB%80%E4%B9%88%E5%AD%A6%E4%B9%A0%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/8.png" alt="8"></p><p>ç”µå•†ç½‘ç«™çš„è¿›ç¨‹å¾—åˆ° HTTP è¯·æ±‚çš„å†…å®¹ï¼ŒçŸ¥é“äº†è¦ä¹°ä¸œè¥¿ï¼Œä¹°å¤šå°‘ã€‚å¾€å¾€ä¸€ä¸ªç”µå•†ç½‘ç«™åˆæ¥å¾…è¯·æ±‚çš„è¿™ ä¸ª Tomcat åªæ˜¯ä¸ªæ¥å¾…å‘˜ï¼Œè´Ÿè´£ç»Ÿç­¹å¤„ç†è¿™ä¸ªè¯·æ±‚ï¼Œè€Œä¸æ˜¯æ‰€æœ‰çš„äº‹æƒ…éƒ½è‡ªå·±åšã€‚ä¾‹å¦‚ï¼Œè¿™ä¸ªæ¥å¾…å‘˜è¦å‘Š è¯‰ä¸“é—¨ç®¡ç†è®¢å•çš„è¿›ç¨‹ï¼Œç™»è®°è¦ä¹°æŸä¸ªå•†å“ï¼Œä¹°å¤šå°‘ï¼Œè¦å‘Šè¯‰ç®¡ç†åº“å­˜çš„è¿›ç¨‹ï¼Œåº“å­˜è¦å‡å°‘å¤šå°‘ï¼Œè¦å‘Šè¯‰ æ”¯ä»˜çš„è¿›ç¨‹ï¼Œåº”è¯¥ä»˜å¤šå°‘é’±ï¼Œç­‰ç­‰ã€‚ </p><p>å¦‚æœå‘Šè¯‰ç›¸å…³çš„è¿›ç¨‹å‘¢ï¼Ÿå¾€å¾€é€šè¿‡<code>RPC è°ƒç”¨</code>ï¼Œå³è¿œç¨‹è¿‡ç¨‹è°ƒç”¨çš„æ–¹å¼æ¥å®ç°ã€‚è¿œç¨‹è¿‡ç¨‹è°ƒç”¨å°±æ˜¯å½“å‘Šè¯‰ç®¡ ç†è®¢å•è¿›ç¨‹çš„æ—¶å€™ï¼Œæ¥å¾…å‘˜ä¸ç”¨å…³å¿ƒä¸­é—´çš„ç½‘ç»œäº’è¿é—®é¢˜ï¼Œä¼šç”± RPC æ¡†æ¶ç»Ÿä¸€å¤„ç†ã€‚RPC æ¡†æ¶æœ‰å¾ˆå¤šç§ï¼Œ æœ‰åŸºäº HTTP åè®®æ”¾åœ¨ HTTP çš„æŠ¥æ–‡é‡Œé¢çš„ï¼Œæœ‰ç›´æ¥å°è£…åœ¨ TCP æŠ¥æ–‡é‡Œé¢çš„ã€‚ </p><p>å½“æ¥å¾…å‘˜å‘ç°ç›¸åº”çš„éƒ¨é—¨éƒ½å¤„ç†å®Œæ¯•ï¼Œå°±å›å¤ä¸€ä¸ª HTTPS çš„åŒ…ï¼Œå‘ŠçŸ¥ä¸‹å•æˆåŠŸã€‚è¿™ä¸ª HTTPS çš„åŒ…ï¼Œä¼šåƒ æ¥çš„æ—¶å€™ä¸€æ ·ï¼Œç»è¿‡åƒéš¾ä¸‡é™©åˆ°è¾¾ä½ çš„ä¸ªäººç”µè„‘ï¼Œç»ˆè¿›å…¥æµè§ˆå™¨ï¼Œæ˜¾ç¤ºæ”¯ä»˜æˆåŠŸã€‚ </p><p>å°ç»“ </p><p>çœ‹åˆ°äº†å§ï¼Œä¸€ä¸ªç®€ç®€å•å•çš„ä¸‹å•è¿‡ç¨‹ï¼Œä¸­é—´ç‰µæ‰¯åˆ°è¿™ä¹ˆå¤šçš„åè®®ã€‚è€Œç®¡ç†ä¸€å¤§ç‰‡æœºå™¨ï¼Œæ›´æ˜¯ä¸€ä»¶ç‰¹åˆ«æœ‰æŠ€ æœ¯å«é‡çš„äº‹æƒ…ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œåƒè¿‘æ¯”è¾ƒç«çš„äº‘è®¡ç®—ã€å®¹å™¨ã€å¾®æœåŠ¡ç­‰æŠ€æœ¯ï¼Œä¹Ÿéƒ½éœ€è¦å€ŸåŠ©å„ç§åè®®ï¼Œæ¥è¾¾ æˆå¤§è§„æ¨¡æœºå™¨ä¹‹é—´çš„åˆä½œã€‚ </p><p>æˆ‘åœ¨è¿™é‡Œåˆ—ä¸€ä¸‹ä¹‹åè¦è®²çš„ç½‘ç»œåè®®ï¼Œä¹‹åæˆ‘ä¼šæŒ‰ç…§ä»åº•å±‚åˆ°ä¸Šå±‚çš„é¡ºåºæ¥è®²è¿°ã€‚ </p><p><img src="/2019/11/06/%E7%AC%AC%E4%B8%80%E8%AE%B2%EF%BC%9A%E4%B8%BA%E4%BB%80%E4%B9%88%E5%AD%A6%E4%B9%A0%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/9.png" alt="9"></p><p>ä¸Šé¢çš„â€œåŒåä¸€â€æ•…äº‹åªæ˜¯ä¸ºäº†ç»™ä½ ä¸€ä¸ªå¤§è‡´çš„æ¡†æ¶ï¼Œè¿™é‡Œé¢æœ‰äº›åè®®ï¼Œæˆ‘åœ¨æ•…äº‹é‡Œå·²ç»æåˆ°äº†ï¼Œæœ‰äº›è¿˜ æ²¡æœ‰æåˆ°ã€‚åœ¨è¿™é—¨è¯¾çš„åä¸€ç« ï¼Œå½“æ‰€æœ‰çš„åè®®éƒ½è®²è¿‡ä¹‹åï¼Œæˆ‘ä¼šå†é‡æ–°è®²ä¸€éè¿™ä¸ªæ•…äº‹ï¼Œåˆ°æ—¶å€™ä½ å°±èƒ½ æ˜ç™½æ›´å¤šçš„ç»†èŠ‚ã€‚</p><p>æœ€åï¼Œå­¦å®Œäº†è¿™ä¸€èŠ‚ï¼Œç»™ä½ ç•™ä¸€ä¸ªé—®é¢˜å§ã€‚ å½“ç½‘ç»œåŒ…åˆ°è¾¾ä¸€ä¸ªåŸå…³çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡è·¯ç”±è¡¨å¾—åˆ°ä¸‹ä¸€ä¸ªåŸå…³çš„ IP åœ°å€ï¼Œç›´æ¥é€šè¿‡ IP åœ°å€æ‰¾å°±å¯ä»¥ äº†ï¼Œä¸ºä»€ä¹ˆè¿˜è¦é€šè¿‡æœ¬åœ°çš„ MAC åœ°å€å‘¢ï¼Ÿ æ¬¢è¿ä½ ç•™è¨€å’Œæˆ‘è®¨è®ºã€‚è¶£è°ˆç½‘ç»œåè®®ï¼Œæˆ‘ä»¬ä¸‹æœŸè§ï¼</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Javaå¸¸è§ç±»åŠå…¶ç»§æ‰¿å…³ç³»(ä¸€)</title>
    <link href="/2019/11/05/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB/"/>
    <url>/2019/11/05/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB/</url>
    
    <content type="html"><![CDATA[<h3 id="Javaå¸¸è§ç±»åŠå…¶ç»§æ‰¿å…³ç³»"><a href="#Javaå¸¸è§ç±»åŠå…¶ç»§æ‰¿å…³ç³»" class="headerlink" title="Javaå¸¸è§ç±»åŠå…¶ç»§æ‰¿å…³ç³»"></a>Javaå¸¸è§ç±»åŠå…¶ç»§æ‰¿å…³ç³»</h3><p>ä»¥åä¼šå­¦ä¹ å¾ˆå¤šJavaä¸­å†™å¥½çš„ç±»ï¼ˆå­¦äº›ä»€ä¹ˆå‘¢ï¼Ÿï¼‰</p><p>å®é™…å¼€å‘ä¸­ç»å¸¸ä½¿ç”¨åˆ°ä¸€äº›ç±»ï¼Œæ¯”å¦‚æ•°ç»„çš„ç›¸å…³æ–¹æ³•ï¼Œå­—ç¬¦ä¸²çš„ç›¸å…³æ–¹æ³•ç­‰ç­‰ï¼Œè¿™äº›ä½¿ç”¨é¢‘ç‡å¾ˆé«˜ï¼ŒJavaå°±å°†å¸¸ç”¨çš„æ–¹æ³•ä¸ºæˆ‘ä»¬å°è£…å¥½ï¼Œä¸ºå¼€å‘è€…çœäº‹ã€çœæ—¶é—´ï¼Œè®©å¼€å‘è€…çœŸæ­£çš„å»å…³å¿ƒè‡ªå·±ä¸ªäººåŒ–çš„ä¸šåŠ¡é€»è¾‘å®ç°ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦å­¦ä¹ å¸¸ç”¨ç±»ã€‚</p><p>å…³é”®ä¸€ç‚¹ç›®çš„ï¼šè¦çœ‹æ‡‚äººå®¶è¿™ä¸ªç±»æ˜¯å¹²ä»€ä¹ˆçš„ï¼Œå¤§è‡´æœ‰å“ªäº›æ–¹æ³•ï¼ŒçŸ¥é“æ€ä¹ˆç”¨ã€‚å…¶æ¬¡ï¼Œå¯ä»¥å€Ÿé‰´äººå®¶çš„ä¼˜ç§€æ€æƒ³å’Œè§„èŒƒï¼Œè¿›ä¸€æ­¥åŠ å¼ºè‡ªå·±ä½¿ç”¨apiçš„èƒ½åŠ›ã€‚</p><blockquote><p>ä»ç±»çš„æˆå‘˜å…¥æ‰‹ï¼š</p><ul><li>æ„é€ æ–¹æ³• ï¼š åˆ›å»ºå¯¹è±¡çš„ï¼Œé€šè¿‡å¯¹è±¡æ¥è°ƒç”¨æ–¹æ³•</li><li>å­—æ®µ   ï¼š é‡ç‚¹å…³æ³¨å…¨å±€å¸¸é‡</li><li>æ–¹æ³•      ï¼š é‡ç‚¹ä¸­é‡ç‚¹ï¼ ä¸€ä¸ªæ–¹æ³•çœ‹æˆæ˜¯ä¸€ä¸ªåŠŸèƒ½</li><li>å­¦ä¹ æ–¹æ³•ï¼šapiæ–‡æ¡£ï¼Œæ³¨é‡Šï¼Œå®ä¾‹(çœ‹ä¸æ‡‚å°±å®é™…è¿è¡Œèµ·æ¥çœ‹ç»“æœå¸®åŠ©ç†è§£),äº’è”ç½‘</li></ul></blockquote><ul><li>ä¸€ä¸ªç±» ï¼š <ul><li>å­—æ®µ ï¼š ç§æœ‰çš„å†…éƒ¨ç»“æœï¼Œä¸€èˆ¬ä¸ç”¨ç®¡ï¼› å…¨å±€å¸¸é‡ï¼Œç›´æ¥è®¿é—®ä½¿ç”¨å°±å¯ä»¥äº† ï¼ŒMath.PI Integer.SIZE</li><li><strong>æ–¹æ³• : é‡ç‚¹ï¼Œä¸€å®šä¼šä½¿ç”¨ï¼Œéœ€è¦è®°å¿†å¸¸ç”¨çš„æ–¹æ³•</strong></li><li>æ„é€ æ–¹æ³• ï¼š éœ€è¦è°ƒç”¨å®ä¾‹æ–¹æ³•å°±å¾—å…ˆè°ƒç”¨æ„é€ æ–¹æ³•æ¥åˆ›å»ºå¯¹è±¡</li></ul></li></ul><h3 id="Objectç±»"><a href="#Objectç±»" class="headerlink" title="Objectç±»"></a>Objectç±»</h3><p>ç±» <code>Object</code> æ˜¯ç±»å±‚æ¬¡ç»“æ„çš„æ ¹ç±»,æ¯ä¸ªç±»éƒ½ä½¿ç”¨ <code>Object</code> ä½œä¸ºè¶…ç±»ã€‚(å’Œæ¥å£æ²¡æœ‰å…³ç³»)</p><p>æ‰€æœ‰å¯¹è±¡ï¼ˆåŒ…æ‹¬æ•°ç»„ï¼‰éƒ½å®ç°è¿™ä¸ªç±»çš„æ–¹æ³• :ã€€æ‰€æœ‰çš„å¯¹è±¡éƒ½å¯ä»¥è°ƒç”¨åˆ°Objectä¸­çš„æ–¹æ³•;</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">Student s1 = <span class="hljs-keyword">new</span> <span class="hljs-constructor">Student()</span>;<br>s1.hash<span class="hljs-constructor">Code()</span>ï¼›     <span class="hljs-comment">//OK</span><br><br>String s2 = ``â€œç­‰ç­‰â€ï¼›<br>s2.hash<span class="hljs-constructor">Code()</span>;  <span class="hljs-comment">//OK</span><br><br><span class="hljs-built_in">int</span> i = <span class="hljs-number">5</span>;<br>i.hash<span class="hljs-constructor">Code()</span>;   <span class="hljs-comment">//NO,å› ä¸ºiæ˜¯ä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹ä¸æ˜¯ä¸€ä¸ªç±»</span><br><br><span class="hljs-built_in">int</span><span class="hljs-literal">[]</span> arr = <span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span><span class="hljs-literal">[<span class="hljs-number">6</span>]</span>;<br>arr.hash<span class="hljs-constructor">Code()</span>;  <span class="hljs-comment">//OKï¼Œæ•°ç»„ä¹Ÿæ˜¯ä¸€ä¸ªç±»</span><br></code></pre></td></tr></table></figure><p><img src="/2019/11/05/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB/demo.png" alt="demo"></p><h4 id="Objectç±»ä¸­çš„ä¸€äº›æ–¹æ³•"><a href="#Objectç±»ä¸­çš„ä¸€äº›æ–¹æ³•" class="headerlink" title="Objectç±»ä¸­çš„ä¸€äº›æ–¹æ³•"></a>Objectç±»ä¸­çš„ä¸€äº›æ–¹æ³•</h4><blockquote><p><strong>String toString()</strong> è¿”å›è°ƒç”¨æ­¤æ–¹æ³•çš„å½“å‰å¯¹è±¡çš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼(æŠŠå½“å‰å¯¹è±¡è½¬æˆå­—ç¬¦ä¸²)</p><p><strong>boolean equals(Object obj)</strong> æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰(æ¯”è¾ƒè°ƒç”¨æ­¤æ–¹æ³•çš„å¯¹è±¡æ˜¯å¦å’Œä¼ å…¥çš„objâ€ç›¸ç­‰â€)</p><p><strong>int hashCode()</strong> æŠŠå½“å‰å¯¹è±¡è½¬æˆä¸€ä¸ªintå€¼</p><p><strong>Class&lt;?&gt; getClass()</strong> è¿”å›æ­¤ Object çš„è¿è¡Œæ—¶ç±»(è·å¾—ä¸€ä¸ªå¯¹è±¡çš„çœŸæ­£çš„ç±»å‹) </p></blockquote><h4 id="Objectä¸­çš„toString-æ–¹æ³•"><a href="#Objectä¸­çš„toString-æ–¹æ³•" class="headerlink" title="Objectä¸­çš„toString()æ–¹æ³•"></a>Objectä¸­çš„toString()æ–¹æ³•</h4><img src="/2019/11/05/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB/toString.png" alt="to" style="zoom:150%;"><p>é€šè¿‡ä¸Šé¢ä¸¤ç§æƒ…å†µçš„æµ‹è¯•ï¼Œprintlnæ‰“å°æ–¹æ³•å†…éƒ¨ï¼Œæ‰“å°å¯¹è±¡å…¶å®æ‰“å°<code>å¯¹è±¡.toString()æ–¹æ³•</code>çš„è¿”å›å€¼</p><h5 id="ä¸‹é¢é€šè¿‡è¿½è¸ªæºç -äº†è§£"><a href="#ä¸‹é¢é€šè¿‡è¿½è¸ªæºç -äº†è§£" class="headerlink" title="ä¸‹é¢é€šè¿‡è¿½è¸ªæºç (äº†è§£)"></a>ä¸‹é¢é€šè¿‡è¿½è¸ªæºç (äº†è§£)</h5><p><img src="/2019/11/05/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB/Snipaste_2019-11-05_17-18-40.png" alt="l"></p><p>åˆ†æï¼šåˆ†ææ‰“å°å¯¹è±¡çš„ç»“æœä¸ºä»€ä¹ˆæ˜¯ XXX@1232e3 è¿™ç§æ ¼å¼</p><img src="/2019/11/05/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB/r.png" alt="1" style="zoom:150%;"><p><img src="/2019/11/05/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB/q.png" alt="qq"></p><p><strong>è‡ªå·±è¦†å†™toStringæ–¹æ³•</strong></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Student</span></span>&#123;<br><span class="hljs-keyword">private</span> <span class="hljs-built_in">String</span> name;<br><span class="hljs-keyword">private</span> int age;<br><span class="hljs-function"><span class="hljs-title">Student</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> name,int age</span>)</span>&#123;<br><span class="hljs-built_in">this</span>.name=name;<br><span class="hljs-built_in">this</span>.age=age;<br>&#125;<br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-built_in">String</span> <span class="hljs-function"><span class="hljs-title">toString</span>(<span class="hljs-params"></span>)</span>&#123;<br><span class="hljs-keyword">return</span> name + <span class="hljs-string">&quot;-&quot;</span> + age;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="Objectä¸­çš„equals-æ–¹æ³•"><a href="#Objectä¸­çš„equals-æ–¹æ³•" class="headerlink" title="Objectä¸­çš„equals()æ–¹æ³•"></a>Objectä¸­çš„equals()æ–¹æ³•</h5><p><strong>(equals ä¸ == çš„åŒºåˆ«)</strong>  </p><p>å‡¡æ˜¯newå‡ºæ¥çš„å¯¹è±¡éƒ½ä¼šåœ¨å †ä¸­å¼€è¾Ÿæ–°çš„ç©ºé—´, å æ®ä¸åŒåœ°å€å€¼çš„ç©ºé—´ã€‚</p><p>åŸæ¥Objectä¸­å®šä¹‰çš„equalsæ–¹æ³•çš„æ¯”è¾ƒè§„åˆ™å°±æ˜¯==,å¦‚æœæˆ‘ä»¬æƒ³è¦å†™è‡ªå·±çš„è§„åˆ™,åˆ™éœ€è¦åœ¨æˆ‘ä»¬è‡ªå·±çš„ç±»ä¸­è¦†å†™Objectçš„æ­¤æ–¹æ³•,åœ¨æ–¹æ³•é‡Œé¢å†™æˆ‘ä»¬è‡ªå·±çš„è§„åˆ™!</p><ul><li>== å’Œ equals éƒ½æ˜¯æ¯”è¾ƒæ˜¯å¦ç›¸ç­‰ï¼š<ul><li>ç›¸ç­‰ : a ä¼ ç»Ÿçš„ç†è§£ä¸€èˆ¬éƒ½æ˜¯æ•°å­—å€¼æ˜¯å¦ç›¸ç­‰;    b åœ¨ç¨‹åºä¸­ä»»ä½•ä¸œè¥¿éƒ½æ˜¯æ•°æ®,éƒ½ä¼šæ¯”è¾ƒæ˜¯å¦ç›¸ç­‰</li></ul></li><li><code>== </code>æ¯”è¾ƒçš„ç›¸ç­‰ï¼š<ul><li>åŸºæœ¬æ•°æ®ç±»å‹:  æ¯”è¾ƒçš„å°±æ˜¯å€¼æ˜¯å¦ç›¸ç­‰;</li><li>å¼•ç”¨æ•°æ®ç±»å‹:  æ¯”è¾ƒçš„æ˜¯å¯¹è±¡çš„åœ°å€æ˜¯å¦ä¸€æ ·;<strong>ï¼ˆå¦‚æœè¯´è¦æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„å†…å®¹æ˜¯å¦ç›¸åŒ==ä¾¿ä¸åœ¨é€‚ç”¨äº†ï¼‰</strong></li></ul></li><li><code>equals()</code>æ¯”è¾ƒçš„ç›¸ç­‰  (æœ€åˆå®šä¹‰åœ¨æ ¹ç±»Objectä¸­çš„)  ï¼š<ul><li>åŸºæœ¬æ•°æ®ç±»å‹ : ä¸èƒ½å¤Ÿä½¿ç”¨!  åŸºæœ¬æ•°æ®ç±»å‹ä¸æ˜¯å¯¹è±¡,ä¸èƒ½å¤Ÿè°ƒç”¨Objectä¸­çš„æ–¹æ³•</li><li>å¼•ç”¨æ•°æ®ç±»å‹ : åœ¨Objectçš„æºç ä¸­å®šä¹‰çš„å°±æ˜¯==è¿›è¡Œæ¯”è¾ƒæ¯”è¾ƒï¼Œé€šè¿‡é‡å†™equalsæ–¹æ³•è¿›è¡Œå¯¹è±¡å†…å®¹çš„æ¯”è¾ƒ</li></ul></li><li>å¦‚æœæˆ‘ä»¬æ²¡æœ‰å»è¦†å†™è¿‡equalsæ–¹æ³•è€Œæ˜¯ç›´æ¥è°ƒç”¨åˆ°äº†Objectä¸­çš„æ­¤æ–¹æ³•,é‚£ä¹ˆç»“æœå’Œ==æ¯”è¾ƒåº”ç”¨æ•°æ®ç±»å‹ä¸€æ ·çš„;</li><li>åœ¨å®é™…å¼€å‘ä¸­,æˆ‘ä»¬ä¸€èˆ¬æ¯”è¾ƒå¯¹è±¡éƒ½æ˜¯é€šè¿‡å¯¹è±¡çš„å±æ€§å€¼è¿›è¡Œæ¯”è¾ƒ(ä¸€èˆ¬æ¯”è¾ƒå¯¹è±¡çš„åœ°å€æ²¡æœ‰å¤šå¤§ç”¨å¤„),æ‰€ä»¥æˆ‘ä»¬ä¼šç»å¸¸è¦†å†™Objectä¸­çš„æ­¤æ–¹æ³•,æŠŠè‡ªå·±çš„è§„åˆ™å†™åœ¨æ–¹æ³•é‡Œé¢;</li></ul><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs perl">//é‡å†™equals()æ–¹æ³•<br>public boolean equals(Object obj)&#123;<br>//<span class="hljs-keyword">if</span>(this.name==obj.name &amp;&amp; this.age == obj.age)&#123;<br>//<span class="hljs-regexp">//</span>Objectç±»ä¸­æ²¡æœ‰nameå’Œageè¿™äº›å±æ€§ï¼Œæ‰€ä»¥è¿™é‡Œä¼šæŠ¥é”™<br>//<span class="hljs-keyword">return</span> true;<br>//&#125;<span class="hljs-keyword">else</span>&#123;<br>//<span class="hljs-keyword">return</span> false;<br>//&#125;<br>//<span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span>/<br>//Student s = (Student)obj;<br>//<span class="hljs-keyword">if</span>(this.name==s.name &amp;&amp; this.age == s.age)&#123;<br>//<span class="hljs-regexp">//</span>è¿™æ ·åšä»ç„¶æ˜¯ä¸å¤Ÿå®Œå–„çš„ï¼Œå› ä¸ºç±»ä¸­å±æ€§å­—æ®µä¸åº”è¯¥æ˜¯å…¬å¼€publicçš„<br>//<span class="hljs-regexp">//</span>åˆ©ç”¨getå’Œsetæ–¹æ³•å®Œå–„<br>//<span class="hljs-keyword">return</span> true;<br>//&#125;<span class="hljs-keyword">else</span>&#123;<br>//<span class="hljs-keyword">return</span> false;<br>//&#125;<br>//<span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><br>//Student s = (Student)obj;<br>//<span class="hljs-keyword">if</span>(this.name==s.getName() &amp;&amp; this.age == s.getAge())&#123;<br>//<span class="hljs-regexp">//</span>this.nameç±»å‹æ˜¯Stringå‹çš„æ˜¯å¼•ç”¨ç±»å‹ï¼Œåœ¨ä½¿ç”¨==æ¯”è¾ƒæ—¶æ¯”è¾ƒæœ‰é£é™©ï¼Œå¯èƒ½æ¯”è¾ƒçš„æ˜¯åœ°å€ï¼Œæœ¬åº”è¯¥æ¯”è¾ƒçš„æ˜¯Stringå‹çš„å­—é¢å€¼,æ‰€ä»¥åº”è¯¥ç”¨equalsæ–¹æ³•æ¯”è¾ƒ<br>//<span class="hljs-keyword">return</span> true;<br>//&#125;<span class="hljs-keyword">else</span>&#123;<br>//<span class="hljs-keyword">return</span> false;<br>//&#125;<br>//<span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><br>Student s = (Student)obj;<br><span class="hljs-keyword">if</span>(this.name.equals(s.getName()) &amp;&amp; this.age==s.getAge&#123;<br><span class="hljs-keyword">return</span> true;<br>&#125;<span class="hljs-keyword">else</span>&#123;<br><span class="hljs-keyword">return</span> false;<br>&#125;<br>&#125;<br>//<span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><br>//****************************************************<span class="hljs-regexp">//</span><br>public boolean equals(Object obj)&#123;<br>Student s = (Student)obj;<br><span class="hljs-keyword">return</span> this.name.equals(s.getName())&amp;&amp;this.age==s.getAge();<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>ç¼–è¯‘å™¨è®¤ä¸º ï¼šobjä¸­æ²¡æœ‰nameï¼Œ ç¼–è¯‘å™¨å¾ˆå‚»ï¼Œçœ‹åˆ°objæ˜¯Objectç±»å‹ï¼Œæ‰€æœ‰Objectä¸­æ˜¯æ²¡æœ‰nameçš„</p><p>ä½†æ˜¯æˆ‘ä»¬çŸ¥é“objå˜é‡ä¸­è£…çš„Studentå¯¹è±¡â€“&gt;æ‰€ä»¥æŠŠobj è½¬æˆStudent ï¼ˆè¿˜åŸå®ƒçš„çœŸå®ç±»å‹ï¼‰</p></blockquote><h3 id="åŒ…è£…ç±»"><a href="#åŒ…è£…ç±»" class="headerlink" title="åŒ…è£…ç±»"></a>åŒ…è£…ç±»</h3><h4 id="ä»€ä¹ˆæ˜¯åŒ…è£…ç±»"><a href="#ä»€ä¹ˆæ˜¯åŒ…è£…ç±»" class="headerlink" title="ä»€ä¹ˆæ˜¯åŒ…è£…ç±»"></a>ä»€ä¹ˆæ˜¯åŒ…è£…ç±»</h4><p>å°±æ˜¯åŸºæœ¬æ•°æ®ç±»å‹å¯¹åº”çš„ç±»ã€‚æä¾›å¾ˆå¤šæ–¹æ³•å’Œå­—æ®µï¼Œæ–¹ä¾¿æˆ‘ä»¬ä½¿ç”¨ã€‚</p><p>åŸºæœ¬æ•°æ®ç±»å‹ï¼šbyte short int long float double char boolean==&gt;éƒ½æ˜¯å°å†™ï¼Œæ²¡æœ‰æ–¹æ³•</p><p>Javaè¯­è¨€æ˜¯ä¸€ä¸ªé¢å‘å¯¹è±¡çš„è¯­è¨€ï¼Œä½†æ˜¯Javaä¸­çš„åŸºæœ¬æ•°æ®ç±»å‹å´æ˜¯ä¸é¢å‘å¯¹è±¡çš„ï¼Œè¿™åœ¨å®é™…ä½¿ç”¨æ—¶å­˜åœ¨å¾ˆå¤šçš„ä¸ä¾¿ï¼Œä¸èƒ½åƒå¯¹è±¡ä¸€æ ·æ‹¥æœ‰å¾ˆå¯¹å­—æ®µå’Œæ–¹æ³•ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªä¸è¶³ï¼Œåœ¨è®¾è®¡ç±»æ—¶ä¸ºæ¯ä¸ªåŸºæœ¬æ•°æ®ç±»å‹è®¾è®¡äº†ä¸€ä¸ªå¯¹åº”çš„ç±»è¿›è¡Œä»£è¡¨ï¼Œè¿™æ ·å…«ä¸ªç±»å’ŒåŸºæœ¬æ•°æ®ç±»å‹å¯¹åº”çš„ç±»ç»Ÿç§°ä¸ºåŒ…è£…ç±»(Wrapper Class)ï¼ŒåŒ…è£…ç±»å‡ä½äºjava.langåŒ…ã€‚å…ˆé€šè¿‡ç›´è§‚çš„ä»£ç çœ‹çœ‹intå’ŒIntegerï¼Œæ¼”ç¤ºä¸€ä¸‹Integerè°ƒç”¨æ–¹æ³•çš„æ–¹ä¾¿æ€§ã€‚</p><blockquote><p>â‘  åŒ…è£…ç±»å‹åªæ˜¯å°†å¯¹åº”åŸºæœ¬æ•°æ®ç±»å‹å°è£…æˆä¸€ä¸ªç±»è€Œå·²ã€‚</p><p>â‘¡ åŒ…è£…ç±»å‹æ¯”åŸºæœ¬æ•°æ®ç±»å‹æ›´æ–¹ä¾¿æ“ä½œï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨å¾ˆå¤šæ–¹æ³•ã€‚</p><p>â‘¢ åŒ…è£…ç±»å‹å’Œå…¶å¯¹åº”çš„åŸºæœ¬æ•°æ®ç±»å‹è¡¨ç¤ºçš„èŒƒå›´æ˜¯ä¸€æ ·çš„ã€‚</p></blockquote><p><img src="/2019/11/05/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB/Integer%E6%BA%90%E4%BB%A3%E7%A0%81.png" alt="1"></p><h4 id="Javaä¸­çš„åŒ…è£…ç±»æœ‰å“ªäº›ï¼Ÿ"><a href="#Javaä¸­çš„åŒ…è£…ç±»æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="Javaä¸­çš„åŒ…è£…ç±»æœ‰å“ªäº›ï¼Ÿ"></a>Javaä¸­çš„åŒ…è£…ç±»æœ‰å“ªäº›ï¼Ÿ</h4><table><thead><tr><th>åŸºæœ¬æ•°æ®ç±»å‹</th><th>åŒ…è£…ç±»(å¯ä»¥åœ¨APIæ–‡æ¡£ä¸­æŸ¥è¯¢åˆ°)</th></tr></thead><tbody><tr><td>byte</td><td>Byte</td></tr><tr><td>short</td><td>Short</td></tr><tr><td>int</td><td>Integer</td></tr><tr><td>long</td><td>Long</td></tr><tr><td>float</td><td>Float</td></tr><tr><td>double</td><td>Double</td></tr><tr><td>char</td><td>Character</td></tr><tr><td>boolean</td><td>Boolean</td></tr></tbody></table><h4 id="åŒ…è£…ç±»çš„ç»§æ‰¿ä½“ç³»"><a href="#åŒ…è£…ç±»çš„ç»§æ‰¿ä½“ç³»" class="headerlink" title="åŒ…è£…ç±»çš„ç»§æ‰¿ä½“ç³»"></a>åŒ…è£…ç±»çš„ç»§æ‰¿ä½“ç³»</h4><p><img src="/2019/11/05/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB/ONI.png" alt="2"></p><h4 id="åŒ…è£…ç±»å¯¹è±¡çš„å­¦ä¹ ï¼ˆIntegerï¼‰"><a href="#åŒ…è£…ç±»å¯¹è±¡çš„å­¦ä¹ ï¼ˆIntegerï¼‰" class="headerlink" title="åŒ…è£…ç±»å¯¹è±¡çš„å­¦ä¹ ï¼ˆIntegerï¼‰"></a>åŒ…è£…ç±»å¯¹è±¡çš„å­¦ä¹ ï¼ˆIntegerï¼‰</h4><p>é€šè¿‡ä¸€ä¸ªå¸¸ç”¨åŒ…è£…ç±»Integerçš„å­¦ä¹ ï¼Œæ•™ä¼šå¤§å®¶å­¦ä¹ åŒ…è£…ç±»çš„æ–¹æ³•ã€‚ä¸»è¦æ˜¯é€šè¿‡apiæ–‡æ¡£æ¥å­¦ä¹ åŒ…è£…ç±»çš„åˆ›å»ºæ–¹å¼å’Œå¸¸ç”¨æ–¹æ³•çš„ä½¿ç”¨</p><h5 id="æ„é€ æ–¹æ³•ï¼š"><a href="#æ„é€ æ–¹æ³•ï¼š" class="headerlink" title="æ„é€ æ–¹æ³•ï¼š"></a>æ„é€ æ–¹æ³•ï¼š</h5><p>Integer(int value) </p><p>Integer(String s) </p><p>ä¸ºä»€ä¹ˆè¦æä¾›è¿™ä¸¤ç§è½¬æ¢ï¼š</p><p>Integer i1 = <strong>new</strong> Integer(123);</p><p>Integer i2 = <strong>new</strong> Integer(â€œ123â€);</p><p>å› ä¸ºåœ¨é¡¹ç›®å¾ˆå¤šæ—¶å€™ä»å‰å°ä¼ è¾“æ•°æ®åˆ°åå°å‡ ä¹éƒ½æ˜¯å­—ç¬¦ä¸²çš„å½¢å¼ã€‚æ¯”å¦‚ï¼š</p><p>æˆ‘ä»¬æœ¬æ¥æƒ³ä¼ ä¸€ä¸ªå­—ç¬¦ä¸²ï¼šâ€00â€åˆ°åå°ï¼Œå¦‚æœä¸æ˜¯ç”¨å­—ç¬¦ä¸²çš„å½¢å¼çš„è¯ï¼Œä»¥æ•°å­—ä¼ åˆ°åå°çš„è¯ï¼Œåå°æ¥æ”¶åˆ°çš„å°±æ˜¯æ•°å­—0ï¼Œä¸æ˜¯â€00â€.</p><h5 id="å¸¸ç”¨çš„ä¸€äº›æ–¹æ³•ï¼šä»¥APIæ–‡æ¡£ä¸ºå‡†"><a href="#å¸¸ç”¨çš„ä¸€äº›æ–¹æ³•ï¼šä»¥APIæ–‡æ¡£ä¸ºå‡†" class="headerlink" title="å¸¸ç”¨çš„ä¸€äº›æ–¹æ³•ï¼šä»¥APIæ–‡æ¡£ä¸ºå‡†"></a>å¸¸ç”¨çš„ä¸€äº›æ–¹æ³•ï¼šä»¥APIæ–‡æ¡£ä¸ºå‡†</h5><p>å…«ä¸ªåŸºæœ¬ç±»å‹çš„åŒ…è£…ç±»ä¸­çš„æˆå‘˜æ–¹æ³•å¤§éƒ¨åˆ†éƒ½æ˜¯ç±»ä¼¼çš„ï¼Œå¦‚ä¸‹æ˜¯Byteå’ŒShortçš„å¯¹æ¯”ï¼š</p><p><img src="/2019/11/05/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB/Wrap.png" alt="4"></p><p>Stringç±»æä¾›çš„æ–¹æ³•ï¼š</p><p><img src="/2019/11/05/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB/String.png" alt="5"></p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">package cn.kongwei_liao.Classes;<br><br>public <span class="hljs-keyword">class</span> WrappersDemo &#123;<br><br>public static void main(String<span class="hljs-literal">[]</span> args) &#123;<br>byte b=<span class="hljs-number">1</span>;<br><span class="hljs-comment">//Byte B=new Byte(b);</span><br><span class="hljs-comment">//Byte B=1;</span><br><span class="hljs-comment">//Byte B=new Byte(&quot;1&quot;);</span><br><span class="hljs-comment">//Byte B=Byte.valueOf(b);</span><br>Byte B=<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Byte</span>.</span></span>parse<span class="hljs-constructor">Byte(<span class="hljs-string">&quot;1&quot;</span>)</span>;<br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(<span class="hljs-string">&quot;byte b=&quot;</span>+b+<span class="hljs-string">&quot;;\t&quot;</span>+<span class="hljs-string">&quot;Byte B=&quot;</span>+B+<span class="hljs-string">&quot;;&quot;</span>);<br><br>short s=<span class="hljs-number">2</span>;<br>Short S=<span class="hljs-keyword">new</span> <span class="hljs-constructor">Short(<span class="hljs-params">s</span>)</span>;<br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(<span class="hljs-string">&quot;short s=&quot;</span>+s+<span class="hljs-string">&quot;;\t&quot;</span>+<span class="hljs-string">&quot;Short S=&quot;</span>+<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">S</span>.</span></span>short<span class="hljs-constructor">Value()</span>+<span class="hljs-string">&quot;;&quot;</span>);<br><br><span class="hljs-built_in">int</span> i=<span class="hljs-number">3</span>;<br>Integer I=<span class="hljs-keyword">new</span> <span class="hljs-constructor">Integer(<span class="hljs-params">i</span>)</span>;<br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(<span class="hljs-string">&quot;int i=&quot;</span>+i+<span class="hljs-string">&quot;;\t&quot;</span>+<span class="hljs-string">&quot;Integer I=&quot;</span>+<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">I</span>.</span></span>long<span class="hljs-constructor">Value()</span>+<span class="hljs-string">&quot;;&quot;</span>);<br><br>long l=<span class="hljs-number">4</span>;<br>Long L=<span class="hljs-keyword">new</span> <span class="hljs-constructor">Long(<span class="hljs-params">l</span>)</span>;<br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(<span class="hljs-string">&quot;long l=&quot;</span>+l+<span class="hljs-string">&quot;;\t&quot;</span>+<span class="hljs-string">&quot;Long L=&quot;</span>+<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">L</span>.</span></span><span class="hljs-keyword">to</span><span class="hljs-constructor">String()</span>+<span class="hljs-string">&quot;;&quot;</span>);<br><br><span class="hljs-built_in">float</span> f=<span class="hljs-number">0.1</span>f;<br>Float F=<span class="hljs-keyword">new</span> <span class="hljs-constructor">Float(<span class="hljs-params">f</span>)</span>;<br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(<span class="hljs-string">&quot;float f=&quot;</span>+f+<span class="hljs-string">&quot;;\t&quot;</span>+<span class="hljs-string">&quot;Float F=&quot;</span>+<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">String</span>.</span></span>value<span class="hljs-constructor">Of(<span class="hljs-params">f</span>)</span>+<span class="hljs-string">&quot;;&quot;</span>);<br><br>double d=<span class="hljs-number">0.2</span>;<br>Double D=<span class="hljs-keyword">new</span> <span class="hljs-constructor">Double(<span class="hljs-params">d</span>)</span>;<br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(<span class="hljs-string">&quot;double d=&quot;</span>+d+<span class="hljs-string">&quot;;\t&quot;</span>+<span class="hljs-string">&quot;Double D=&quot;</span>+<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">D</span>.</span></span><span class="hljs-keyword">to</span><span class="hljs-constructor">String()</span>+<span class="hljs-string">&quot;;&quot;</span>);<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="åŒ…è£…ç±»çš„è‡ªåŠ¨æ‹†è£…ç®±"><a href="#åŒ…è£…ç±»çš„è‡ªåŠ¨æ‹†è£…ç®±" class="headerlink" title="åŒ…è£…ç±»çš„è‡ªåŠ¨æ‹†è£…ç®±"></a>åŒ…è£…ç±»çš„è‡ªåŠ¨æ‹†è£…ç®±</h5><p>ä»JDK5å¼€å§‹æ”¯æŒè‡ªåŠ¨æ‹†è£…ç®±çš„</p><p>ï¼ˆè‡ªåŠ¨ï¼‰è£…ç®±ï¼šæŠŠä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹çš„æ•°æ®èµ‹å€¼ç»™ä¸€ä¸ªå…¶å¯¹åº”çš„åŒ…è£…ç±»çš„è¿‡ç¨‹ </p><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs lasso"><span class="hljs-built_in">Integer</span> I1 = <span class="hljs-literal">new</span> <span class="hljs-built_in">Integer</span>(<span class="hljs-number">1</span>);<span class="hljs-comment">//æ‰‹åŠ¨è£…ç®±</span><br><span class="hljs-built_in">Integer</span> I2 = <span class="hljs-number">1</span>;<span class="hljs-comment">//è‡ªåŠ¨è£…ç®± </span><br></code></pre></td></tr></table></figure><p>ï¼ˆè‡ªåŠ¨ï¼‰æ‹†ç®±ï¼šæŠŠä¸€ä¸ªåŒ…è£…ç±»å¯¹è±¡èµ‹å€¼ç»™ä¸€ä¸ªå…¶å¯¹åº”çš„åŸºæœ¬æ•°æ®ç±»å‹çš„å˜é‡çš„è¿‡ç¨‹</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-built_in">int</span> i1 = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">I1</span>.</span></span><span class="hljs-built_in">int</span><span class="hljs-constructor">Value()</span>;<span class="hljs-comment">//æ‰‹åŠ¨æ‹†ç®±</span><br><span class="hljs-built_in">int</span> i2 = I2;<span class="hljs-comment">//è‡ªåŠ¨æ‹†ç®±</span><br></code></pre></td></tr></table></figure><p>æ³¨æ„ ï¼šè‡ªåŠ¨è£…ç®±æ‹†ç®±åªæ”¯æŒ åŸºæœ¬æ•°æ®ç±»å‹å’Œå…¶å¯¹åº”çš„åŒ…è£…ç±»  </p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Integer</span> i<span class="hljs-number">1</span> = <span class="hljs-number">123</span>;<br><span class="hljs-attribute">Double</span> d<span class="hljs-number">1</span> = <span class="hljs-number">123</span>.<span class="hljs-number">0</span>;<br><span class="hljs-attribute">Integer</span> integer<span class="hljs-number">1</span>=&#x27;a&#x27;;   // ä¸è¡Œ  â€˜aâ€™æ˜¯charï¼Œå¯¹åº”çš„åŒ…è£…ç±»æ˜¯Character<br></code></pre></td></tr></table></figure><h5 id="äº«å…ƒæ¨¡å¼"><a href="#äº«å…ƒæ¨¡å¼" class="headerlink" title="äº«å…ƒæ¨¡å¼"></a>äº«å…ƒæ¨¡å¼</h5><p>ç®€å•æ¥è¯´å°±æ˜¯æ•´æ•°ä¸­(Short,Byte,Integer,Long)çš„å‡ ä¸ªåŒ…è£…ç±»å†…éƒ¨æŠŠå¸¸ç”¨ [-128,127] çš„æ•°æ®ç¼“å­˜èµ·æ¥äº†ï¼Œæµ®ç‚¹æ•°æ˜¯æ²¡æœ‰çš„ï¼Œå€¼å¤ªå¤šäº†ã€‚ã€‚ã€‚</p><p>é€šè¿‡è¿™ä¸ªè§£é‡Šï¼Œä¸€æ˜¯è¦å¤§å®¶çŸ¥é“æœ‰è¿™ä¹ˆä¸€ä¸ªä¸œè¥¿ï¼ŒäºŒæ˜¯å†æ¬¡å¼ºè°ƒ==å’Œequalsçš„ä½¿ç”¨ï¼Œå°¤å…¶æ˜¯å…³å¿ƒå€¼çš„æ—¶å€™ï¼Œè¯·ä½¿ç”¨equalsã€‚</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">package cn.kongwei_liao.Classes;<br><br><span class="hljs-built_in">public</span> <span class="hljs-keyword">class</span> WrapShareSrc &#123;<br><span class="hljs-built_in">public</span> static <span class="hljs-type">void</span> main(String[] args) &#123;<br><span class="hljs-type">Integer</span> i1=<span class="hljs-built_in">new</span> <span class="hljs-type">Integer</span>(<span class="hljs-number">123</span>);<br><span class="hljs-type">Integer</span> i2=<span class="hljs-built_in">new</span> <span class="hljs-type">Integer</span>(<span class="hljs-number">123</span>);<br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(i1==i2);//<span class="hljs-keyword">false</span><br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(i1.equals(i2));//<span class="hljs-keyword">true</span><br><br>i1=<span class="hljs-number">123</span>;<br>i2=<span class="hljs-number">123</span>;<br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(i1==i2);//<span class="hljs-keyword">true</span><br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(i1.equals(i2));//<span class="hljs-keyword">true</span><br><br>i1=<span class="hljs-number">128</span>;<br>i2=<span class="hljs-number">128</span>;<br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(i1==i2);//<span class="hljs-keyword">false</span><br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(i1.equals(i2));//<span class="hljs-keyword">true</span><br>&#125;<br>&#125;<br><span class="hljs-comment">/*</span><br><span class="hljs-comment"> *äº«å…ƒæ¨¡å¼ï¼š</span><br><span class="hljs-comment"> *  ç®€å•ç†è§£å°±æ˜¯Integerä¸­æŠŠ[-128,127]ä¸­çš„æ•°æ®ç¼“å­˜èµ·æ¥äº†ï¼Œ</span><br><span class="hljs-comment"> *  ä»Integerçš„æºä»£ç ä¸­çœ‹åˆ°ä¸€ç‚¹</span><br><span class="hljs-comment"> */</span><br></code></pre></td></tr></table></figure><p><img src="/2019/11/05/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB/xiangyuan.png" alt="xy"></p><h5 id="åŒ…è£…ç±»å°ç»“ï¼š"><a href="#åŒ…è£…ç±»å°ç»“ï¼š" class="headerlink" title="åŒ…è£…ç±»å°ç»“ï¼š"></a>åŒ…è£…ç±»å°ç»“ï¼š</h5><ul><li><p>ä¸ºä»€ä¹ˆéœ€è¦åŒ…è£…ç±»ï¼Ÿ</p><ul><li>æä¾›äº†å¾ˆå¤šæ–¹æ³•å’Œå­—æ®µï¼Œæ–¹ä¾¿æˆ‘ä»¬å¼€å‘ä¸­ç›´æ¥ä½¿ç”¨</li></ul></li><li><p>åŸºæœ¬æ•°æ®ç±»å‹å’ŒåŒ…è£…ç±»å¯¹åº”å…³ç³»ï¼Ÿ</p><ul><li>åŒ…è£…ç±»æ˜¯åŸºæœ¬æ•°æ®ç±»å‹çš„é¦–å­—æ¯å¤§å†™ï¼Œé™¤äº†intå’Œchar ==ã€‹Integer Character</li></ul></li><li><p>åŒ…è£…ç±»çš„ç»§æ‰¿ä½“ç³»ï¼Ÿ</p><ul><li>è‡ªå·±çœ‹å›¾æˆ–è€…æŸ¥æ–‡æ¡£</li></ul></li><li><p>è§£å†³é”™è¯¯ä¸¤ç§æ–¹å¼ï¼Ÿ</p><ul><li> é€šè¿‡exceptionçš„ç±»åæ¥å®šä½ä»£ç </li><li> é€šè¿‡è‡ªå·±çš„é”™è¯¯ä»£ç ä¿¡æ¯ç‚¹å‡»è¿‡å»</li></ul></li><li><p>æ‹†è£…ç®±ï¼š</p><ul><li>è£…ç®±ï¼šåŸºæœ¬æ•°æ®ç±»å‹â€“å¯¹åº”â€“ã€‹åŒ…è£…ç±» </li><li>æ‹†ç®±ï¼šåŒ…è£…ç±»â€“å¯¹åº”â€“ã€‹åŸºæœ¬æ•°æ®ç±»å‹</li><li>è‡ªåŠ¨è£…ç®±ï¼šInteger integer=3;</li><li>è‡ªåŠ¨æ‹†ç®±ï¼šint i =integer;</li><li>è‡ªåŠ¨è£…ç®±å’Œæ‹†ç®±åªèƒ½æ˜¯åŸºæœ¬æ•°æ®ç±»å‹å’Œå…¶å¯¹åº”çš„åŒ…è£…ç±»ã€‚  </li></ul></li><li><p>äº«å…ƒæ¨¡å¼ï¼š</p><ul><li> æ•°å­—ç±»å‹ï¼šæ•´æ•° Byte Short Integer Long</li><li>  [-128,127]</li></ul></li></ul><h3 id="System-Javaåƒåœ¾å›æ”¶æœºåˆ¶-Runtime"><a href="#System-Javaåƒåœ¾å›æ”¶æœºåˆ¶-Runtime" class="headerlink" title="System/Javaåƒåœ¾å›æ”¶æœºåˆ¶/Runtime"></a>System/Javaåƒåœ¾å›æ”¶æœºåˆ¶/Runtime</h3><h4 id="Systemä¸­å¸¸ç”¨æ–¹æ³•"><a href="#Systemä¸­å¸¸ç”¨æ–¹æ³•" class="headerlink" title="Systemä¸­å¸¸ç”¨æ–¹æ³•"></a>Systemä¸­å¸¸ç”¨æ–¹æ³•</h4><p>Systemç±»åŒ…å«ä¸€äº›æœ‰ç”¨çš„ç±»å­—æ®µå’Œæ–¹æ³•ï¼Œå®ƒä¸èƒ½è¢«å®ä¾‹åŒ–ã€‚  Systemå°†æ„é€ æ–¹æ³•ç§æœ‰åŒ–ã€‚</p><p>å…¶å®ƒä¸èƒ½å®ä¾‹åŒ–çš„åŸå› æœ‰ï¼š1ã€æ¥å£        2ã€æŠ½è±¡ç±»        3ã€æšä¸¾        4ã€ç§æœ‰åŒ–æ„é€ å‡½æ•°</p><p><img src="/2019/11/05/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB/System.png" alt="s"></p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">package cn.kongwei_liao.Classes;<br><br><span class="hljs-built_in">public</span> <span class="hljs-keyword">class</span> SysDemo &#123;<br><br><span class="hljs-built_in">public</span> static <span class="hljs-type">void</span> main(String[] args) &#123;<br>// TODO Auto-<span class="hljs-keyword">generated</span> <span class="hljs-keyword">method</span> stub<br>long start = <span class="hljs-keyword">System</span>.currentTimeMillis();<br><span class="hljs-type">int</span>[] a= &#123;<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>&#125;;<br><span class="hljs-type">int</span>[] b=<span class="hljs-built_in">new</span> <span class="hljs-type">int</span>[<span class="hljs-number">5</span>];<br><span class="hljs-keyword">System</span>.arraycopy(a, <span class="hljs-number">0</span>, b, <span class="hljs-number">0</span>, <span class="hljs-number">3</span>);<br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i:b) &#123;<br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.print(i+&quot; &quot;);<br>&#125;<br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println();<br>long end = <span class="hljs-keyword">System</span>.currentTimeMillis();<br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(&quot;Start: &quot; + <span class="hljs-keyword">start</span>);<br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">exit</span>(<span class="hljs-number">0</span>);<br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(&quot;End: &quot; + <span class="hljs-keyword">end</span>);<br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(&quot;End-Start:&quot; + (<span class="hljs-keyword">end</span>-<span class="hljs-keyword">start</span>));<br>&#125;<br><br>&#125;<br><span class="hljs-comment">/*</span><br><span class="hljs-comment"> * System ç±»åŒ…å«ä¸€äº›æœ‰ç”¨çš„ç±»å­—æ®µå’Œæ–¹æ³•ã€‚å®ƒä¸èƒ½è¢«å®ä¾‹åŒ–ã€‚</span><br><span class="hljs-comment"> */</span><br><br></code></pre></td></tr></table></figure><p><img src="/2019/11/05/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB/Systemf.png" alt="sf"></p><h5 id="System-exit-0"><a href="#System-exit-0" class="headerlink" title="System.exit(0);"></a>System.exit(0);</h5><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs awk">public static int method()&#123;<br>try&#123;<br>        System.out.println(<span class="hljs-string">&quot;Hello&quot;</span>);<br>        System.<span class="hljs-keyword">exit</span>(<span class="hljs-number">0</span>);<span class="hljs-regexp">//</span><span class="hljs-number">1</span><br>        return <span class="hljs-number">0</span>;<span class="hljs-regexp">//</span><span class="hljs-number">2</span><br>        <span class="hljs-regexp">//</span>System.<span class="hljs-keyword">exit</span>(<span class="hljs-number">0</span>);<span class="hljs-regexp">//</span><span class="hljs-number">3</span><br>    &#125;finally&#123;<br>        System.out.println(<span class="hljs-string">&quot;good-bye&quot;</span>);<br>    &#125;<br>&#125;<br>/*<br>æ³¨æ‰<span class="hljs-number">3</span>æ‰“å°è¾“å‡ºï¼š<br>Hello<br>æ³¨æ‰<span class="hljs-number">1</span>å’Œ<span class="hljs-number">3</span>æ‰“å°è¾“å‡ºï¼š<br>Hello<br>good-bye<br>*/<br></code></pre></td></tr></table></figure><h4 id="Javaçš„åƒåœ¾å›æ”¶æœºåˆ¶"><a href="#Javaçš„åƒåœ¾å›æ”¶æœºåˆ¶" class="headerlink" title="Javaçš„åƒåœ¾å›æ”¶æœºåˆ¶"></a>Javaçš„åƒåœ¾å›æ”¶æœºåˆ¶</h4><ul><li><p>Javaä¸­çš„åƒåœ¾ï¼šå½“å¯¹è±¡å¤±å»æ‰€æœ‰å¼•ç”¨çš„æ—¶å€™ï¼Œä¾¿æˆä¸ºå ç”¨å†…å­˜çš„åƒåœ¾ï¼Œéœ€è¦å›æ”¶ã€‚</p></li><li><p>Javaåƒåœ¾å›æ”¶æœºåˆ¶ï¼š</p><ul><li>Javaä¸­çš„åƒåœ¾ï¼šæ²¡æœ‰ä»»ä½•å¼•ç”¨çš„å¯¹è±¡ï¼ˆç›®å‰javaçš„åƒåœ¾å›æ”¶æœºåˆ¶æ˜¯javaçš„é¥±å—äº‰è®®çš„è¯Ÿç—…ï¼‰</li><li>JVMä¼˜åŒ–ï¼šä¸€èˆ¬å°±æ˜¯ä¼˜åŒ–çš„åƒåœ¾å›æ”¶æ—¶é—´å’Œå†…å­˜åˆ†é…å¤§å°</li><li>jvmå›æ”¶åƒåœ¾æ˜¯æœ‰è‡ªå·±çš„æœºåˆ¶ï¼Œä¸å®šæ—¶ï¼Œéšæœºçš„ã€‚</li><li>è¯´ç™½äº†ï¼Œå°±æ˜¯ä½ ä¸çŸ¥é“jvmåˆ°åº•ä»€ä¹ˆæ—¶å€™è¿›è¡Œå›æ”¶ã€‚</li><li>ä½†æ˜¯æˆ‘ä»¬ä¹Ÿå¯ä»¥ä¸»åŠ¨è°ƒç”¨æ–¹æ³•ï¼Œä½†æ˜¯å‘¢ï¼Œå³ä½¿æˆ‘ä»¬ä¸»åŠ¨äº†ï¼Œä¹Ÿä¸ä¸€å®šè¯´jvmå°±é©¬ä¸Šè¿›è¡Œåƒåœ¾å›æ”¶ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªéšæœºçš„äº‹æƒ…ï¼Œæˆ‘ä»¬åªæ˜¯è¯´è‡ªå·±å»å¯¹åƒåœ¾å›æ”¶è¿™ä¸ªäº‹æƒ…è¿›è¡Œäº†åŠªåŠ›ã€‚</li></ul></li><li><p>åœ¨Javaä¸­æä¾›äº†ä¸¤ä¸ªå’Œåƒåœ¾å›æ”¶ç›¸å…³çš„æ–¹æ³•:</p><ul><li>Objectä¸­çš„<code>finalize()</code>:  æ‰€æœ‰çš„å¯¹è±¡éƒ½å¯ä»¥è°ƒç”¨æ­¤æ–¹æ³•ï¼Œå½“è¿™ä¸ªå¯¹è±¡è¢«å›æ”¶æ—¶å°±ä¼šè°ƒç”¨æ­¤æ–¹æ³•ã€‚</li><li>Systemä¸­çš„<code>gc()</code>:  è°ƒç”¨æ­¤æ–¹æ³•è¡¨ç¤ºæˆ‘ä»¬åšäº†ä¸€äº›åŠªåŠ›æ¥å›æ”¶åƒåœ¾ã€‚</li></ul></li></ul><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-comment">//è¦†å†™Objectçš„finalizeæ–¹æ³•</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> GcTest &#123;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Integer <span class="hljs-keyword">count</span> = <span class="hljs-number">0</span>;<br>@Override<br><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> finalize() <span class="hljs-keyword">throws</span> Throwable &#123;<br><span class="hljs-comment">// TODO Auto-generated method stub</span><br><span class="hljs-keyword">super</span>.finalize();<br>System.out.<span class="hljs-keyword">println</span>(<span class="hljs-string">&quot;æˆ‘è¢«å›æ”¶äº†ã€‚ã€‚ã€‚ã€‚&quot;</span>+<span class="hljs-keyword">count</span>++);<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-comment">//Jvmè‡ªå·±å›æ”¶</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Test</span> &#123;</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">String</span>[] args)</span> </span>&#123;<br><span class="hljs-comment">//å‚æ•°åƒåœ¾</span><br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100000</span>; i++) &#123;<br><span class="hljs-keyword">new</span> Test();<br>&#125;<br>&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p><img src="/2019/11/05/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB/gc1.png" alt="gc1"></p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-comment">//äººå·¥ä¸»åŠ¨å›æ”¶</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Test</span> &#123;</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">String</span>[] args)</span> </span>&#123;<br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) &#123;<br><span class="hljs-keyword">new</span> Test();<br>System.gc();<span class="hljs-comment">//ä¸»åŠ¨å›æ”¶</span><br>&#125;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="/2019/11/05/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB/gc2.png" alt="gc2"></p><p><img src="/2019/11/05/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB/gc3.png" alt="gc3"></p><h4 id="Runtimeç±»"><a href="#Runtimeç±»" class="headerlink" title="Runtimeç±»"></a>Runtimeç±»</h4><p>æ¯ä¸ª Java åº”ç”¨ç¨‹åºéƒ½æœ‰ä¸€ä¸ª Runtime ç±»å®ä¾‹ï¼Œä½¿åº”ç”¨ç¨‹åºèƒ½å¤Ÿä¸å…¶è¿è¡Œçš„ç¯å¢ƒç›¸è¿æ¥ã€‚å¯ä»¥é€šè¿‡ getRuntime æ–¹æ³•è·å–å½“å‰è¿è¡Œæ—¶ã€‚  </p><p>åº”ç”¨ç¨‹åºä¸èƒ½åˆ›å»ºè‡ªå·±çš„ Runtime ç±»å®ä¾‹ã€‚ä¸ºä»€ä¹ˆï¼Ÿè¯·è‡ªå·±çœ‹æºç </p><p><img src="/2019/11/05/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB/Runtime.png" alt="rt"></p><h5 id="exec-String-command-æ–¹æ³•"><a href="#exec-String-command-æ–¹æ³•" class="headerlink" title="exec(String command)æ–¹æ³•"></a>exec(String command)æ–¹æ³•</h5><p>Runtime.getRuntime().exec(â€œnotepadâ€);</p><p>å¯ä»¥æŒ‡å‘å­—ç¬¦ä¸²å‘½ä»¤ï¼šå¿…é¡»æ”¾åœ¨c:\windows\system32</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> cn.kongwei_liao.RuntimeDemo;<br><br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RuntimeDemo</span> </span>&#123;<br><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br><span class="hljs-comment">// TODO Auto-generated method stub</span><br><span class="hljs-keyword">try</span> &#123;<br>Runtime.getRuntime().exec(<span class="hljs-string">&quot;notepad&quot;</span>);<br>&#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br><span class="hljs-comment">// TODO Auto-generated catch block</span><br>e.printStackTrace();<br>&#125;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="/2019/11/05/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB/Runtime1.png" alt="rt1"></p><p><img src="/2019/11/05/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB/runtimef.png" alt="rtf"></p><h3 id="å­—ç¬¦ä¸²ç›¸å…³ç±»String-StringBuffer-StringBuilder"><a href="#å­—ç¬¦ä¸²ç›¸å…³ç±»String-StringBuffer-StringBuilder" class="headerlink" title="å­—ç¬¦ä¸²ç›¸å…³ç±»String/StringBuffer/StringBuilder"></a>å­—ç¬¦ä¸²ç›¸å…³ç±»String/StringBuffer/StringBuilder</h3><h4 id="String"><a href="#String" class="headerlink" title="String"></a>String</h4><p><strong>è½¬æ¢æˆå­—ç¬¦ä¸²çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿ</strong></p><blockquote><p>1ã€String.valueOf();</p><p>2ã€toString();</p><p>3ã€+</p><p>æ•ˆç‡æœ€é«˜çš„æ–¹å¼ä¸ºï¼štoString()   &gt;   valueOf()   &gt;   +               ä¸ºä»€ä¹ˆï¼Ÿï¼Ÿ</p></blockquote><p>Stringæ˜¯Javaä¸­å†™å¥½çš„ä¸€ä¸ªç±»ï¼šæè¿°ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œéå¸¸å¸¸ç”¨ï¼ï¼ï¼</p><p><strong>Stringå¯¹è±¡åˆ›å»ºï¼š</strong></p><blockquote><p>1ã€String s = â€œæˆ‘æ˜¯ä¸€ä¸ªéšä¾¿çš„å­—ç¬¦ä¸²â€;</p><p>2ã€é€šè¿‡è°ƒç”¨Stringç±»çš„æ„é€ æ–¹æ³•</p><p>â€‹        String()</p><p>â€‹        String(String str)</p></blockquote><p><strong>å…³äºç©ºå­—ç¬¦ä¸²</strong>ï¼š</p><blockquote><p>â‘ String str1 = null;//è¡¨ç¤ºstr1æ²¡æœ‰æŒ‡å‘ä¸€ä¸ªå¯¹è±¡</p><p>â‘¡String str2 = â€œâ€; //æœ‰ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡æ˜¯ç©º</p><p>â‘¢String str3 = new String();//  å’Œâ‘¡å·®ä¸å¤š</p><p>æ³¨æ„ä¸€ä¸‹ï¼šåœ¨å®é™…çš„å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¼šè¿™æ ·ç›´æ¥ç”³æ˜ä¸€ä¸ªç©ºçš„è€Œä¸åšä»»ä½•äº‹æƒ…ä¹ˆï¼Ÿç»å¯¹ä¸ä¼šã€‚æ‰€ä»¥å‘¢ï¼Œå¤§å®¶è®¤è¯†åˆ°è¿™ä¸ªå°±è¡Œäº†ï¼Œä¸»è¦æ˜¯ç»™å¤§å®¶æ¼”ç¤ºåŠ å¼ºä¸€ä¸‹==(å€¼å’Œåœ°å€éƒ½æ¯”è¾ƒ )å’Œequals(åªå…³å¿ƒå€¼)ã€‚</p></blockquote><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(str1==str2);<br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(str1==str3);<br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(str1.equals(str2));<span class="hljs-comment">//å°½é‡ä½¿ç”¨ä¸€ä¸ªå·²çŸ¥çš„å€¼å»å’ŒæœªçŸ¥çš„å€¼æ¯”è¾ƒã€‚å°½å¯èƒ½çš„é¿å…ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚</span><br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(str2==str3);<br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(str2.equals(str3));<br></code></pre></td></tr></table></figure><p><strong>å­—ç¬¦ä¸²çš„æ¯”è¾ƒ/å¸¸é‡æ± </strong>  </p><p>å­—ç¬¦ä¸²å¯¹è±¡å¼•ç”¨éƒ½æ˜¯å­˜å‚¨åœ¨æ ˆä¸­çš„ï¼Œå¦‚æœæ˜¯<code>ç¼–è¯‘æœŸ</code>å·²ç»åˆ›å»ºå¥½(ç›´æ¥ç”¨<code>åŒå¼•å·</code>å®šä¹‰çš„ï¼Œè¡¨ç¤ºè¿™ä¸ªå€¼æ˜¯å·²ç»ç¡®å®šçš„ï¼Œå·²çŸ¥çš„)çš„å°±å­˜å‚¨åœ¨<code>å¸¸é‡æ± </code>ä¸­ï¼Œå¦‚æœæ˜¯<code>è¿è¡ŒæœŸï¼ˆnewå‡ºæ¥çš„ï¼‰</code>æ‰èƒ½ç¡®å®šçš„å°±å­˜å‚¨åœ¨<code>å †</code>ä¸­ã€‚</p><p>(æ³¨ï¼šç¼–è¯‘æœŸï¼šå°±æ˜¯æˆ‘ä»¬çš„javacå‘½ä»¤ï¼Œè¿è¡ŒæœŸå°±æ˜¯javaã€‚Eclipseæ˜¯è‡ªåŠ¨ç¼–è¯‘çš„ï¼Œå°±æ˜¯å½“æˆ‘æŠŠä»£ç å†™å‡ºæ¥åï¼Œå°±è¿è¡Œäº†javacï¼Œç”Ÿæˆäº†classæ–‡ä»¶ã€‚æ¯”å¦‚ï¼šInteger i = new Integer(â€œAâ€)è¿™å¥ä»£ç ï¼Œåœ¨æˆ‘ä»¬çš„ç¼–è¯‘æœŸä¸ä¼šå‡ºé”™ï¼Œå°±æ˜¯è¯´å†™äº†è¿™å¥ä»£ç æ²¡æœ‰æŠ¥é”™(å› ä¸ºèƒ½å¤Ÿç¼–è¯‘æˆclassæ–‡ä»¶)ï¼Œä½†æ˜¯è¿è¡Œèµ·æ¥åï¼Œå°±å‡ºé”™äº†ã€‚)</p><figure class="highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs vhdl"><span class="hljs-built_in">String</span> str1=<span class="hljs-keyword">new</span> <span class="hljs-built_in">String</span>(<span class="hljs-string">&quot;abc&quot;</span>);<br><span class="hljs-built_in">String</span> str2=<span class="hljs-keyword">new</span> <span class="hljs-built_in">String</span>(<span class="hljs-string">&quot;abc&quot;</span>);<br>System.<span class="hljs-keyword">out</span>.println(str1==str2);//<span class="hljs-literal">true</span>?<span class="hljs-literal">false</span><br>System.<span class="hljs-keyword">out</span>.println(str1.equals(str2)); //<span class="hljs-literal">true</span>?<span class="hljs-literal">false</span><br><br><span class="hljs-built_in">String</span> str3=<span class="hljs-string">&quot;abc&quot;</span>;<br><span class="hljs-built_in">String</span> str4=<span class="hljs-string">&quot;abc&quot;</span>;<br>System.<span class="hljs-keyword">out</span>.println(str3==str4); //<span class="hljs-literal">true</span>?<span class="hljs-literal">false</span><br>System.<span class="hljs-keyword">out</span>.println(str3.equals(str4)); //<span class="hljs-literal">true</span>?<span class="hljs-literal">false</span><br></code></pre></td></tr></table></figure><p><img src="/2019/11/05/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB/str.png" alt="str1"></p><p><img src="/2019/11/05/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB/str2.png" alt="str2"></p><p>å…³äºå¸¸é‡æ± çš„è¡¥å……è¯´æ˜ï¼š</p><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs processing"><span class="hljs-keyword">String</span> s2=<span class="hljs-string">&quot;a&quot;</span>+<span class="hljs-string">&quot;b&quot;</span>;<br><span class="hljs-comment">//a å’Œbéƒ½æ˜¯ç¡®å®šçš„å¸¸é‡ï¼Œåœ¨ç¼–è¯‘æœŸå°±èƒ½ç¡®å®šå°±æ˜¯å­—æ¯aå’Œå­—æ¯bï¼ˆç¡®å®šçš„å€¼ä¸æ˜¯åªèƒ½æ˜¯å­—æ¯ï¼Œåªè¦æ˜¯åŒå¼•å·å¼•èµ·æ¥çš„ï¼Œéƒ½æ˜¯ç¡®å®šçš„ï¼‰è¿™å¥è¯ç¼–è¯‘æœŸç”Ÿæˆçš„classæ–‡ä»¶ç›¸å½“äºString s2=â€abâ€ã€‚å¦‚æœè¿™ä¸ªæ—¶å€™å¸¸é‡æ± ä¸­æ²¡æœ‰abï¼Œåˆ™åœ¨å¸¸é‡æ± ä¸­äº§ç”Ÿå†å°†s2çš„å¼•ç”¨æŒ‡å‘å¸¸é‡æ± ä¸­abï¼Œæœ‰å°±ç›´æ¥å°†s2çš„å¼•ç”¨æŒ‡å‘å¸¸é‡æ± ä¸­abã€‚æ‰€ä»¥ä¸ç®¡æ€ä¹ˆï¼Œç»“æœå°±æ˜¯å¸¸é‡æ± ä¸­æœ‰äº†abè¿™ä¸ªå¸¸é‡</span><br><br><span class="hljs-keyword">String</span> s3=<span class="hljs-string">&quot;ab&quot;</span>;<br><span class="hljs-comment">//å› ä¸ºs2å·²ç»äº§ç”Ÿäº†abå¸¸é‡ï¼Œæ‰€ä»¥s3ç›´æ¥åœ¨å¸¸é‡æ± ä¸­å°±æ‰¾åˆ°äº†ï¼Œè¿™ä¸ªæ—¶å€™s2å’Œs3éƒ½æ˜¯æŒ‡å‘äº†å¸¸é‡æ± ä¸­abï¼Œæ‰€ä»¥s2==s3.</span><br><br>System.out.<span class="hljs-built_in">println</span>(s2==s3);<span class="hljs-comment">//true</span><br><br><span class="hljs-keyword">String</span> s=<span class="hljs-string">&quot;a&quot;</span>;<br><span class="hljs-keyword">String</span> s1=<span class="hljs-string">&quot;b&quot;</span>;<br><span class="hljs-comment">//éƒ½æ˜¯ç¡®å®šçš„å€¼ï¼Œæ‰€ä»¥åœ¨å¸¸é‡æ± ä¸­äº§ç”Ÿaå’Œbä¸¤ä¸ªå¸¸é‡ã€‚</span><br><br><span class="hljs-keyword">String</span> <span class="hljs-built_in">str</span>=s+s1;<br><span class="hljs-comment">//å› ä¸ºStringæ˜¯ä¸€æ—¦åˆ›å»ºåå°±ä¸å¯ä»¥æ”¹å˜çš„ã€‚è¿™ä¸ª+å·æ“ä½œå°±æ˜¯è¯´ä½ åœ¨æ”¹å˜String str=s,æƒ³æŠŠå®ƒæ”¹å˜æˆs+s1.</span><br><br><span class="hljs-keyword">String</span> s3=<span class="hljs-string">&quot;ab&quot;</span>;<span class="hljs-comment">//</span><br>System.out.<span class="hljs-built_in">println</span>(<span class="hljs-built_in">str</span>==s3);<span class="hljs-comment">//false</span><br></code></pre></td></tr></table></figure><p><img src="/2019/11/05/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB/%E5%B8%B8%E9%87%8F%E6%B1%A0.png" alt="clc"></p><ul><li>æœ€åè®°ä½ä¸€å¥è¯ï¼šè¿™ç§å¯¹è±¡çš„æ¯”è¾ƒèƒ½æ‡‚å°±æ‡‚ï¼Œä¸æ‡‚å°±ç®—äº†ï¼Œä¸è¦å»æƒ³ã€‚å®é™…å¼€å‘ä¸­æ ¹æœ¬ä¸ä¼šå»æƒ³è¿™äº›äº‹æƒ…ï¼Œæ²¡æœ‰ä¸€ç‚¹ç”¨å¤„ã€‚ä½†æ˜¯æœ‰äº›é¢è¯•å®˜å–œæ¬¢(çœç•¥2ä¸ªå­—)ã€‚æ”¾å¿ƒï¼Œä»–ä»¬ä¹Ÿè¯´ä¸æ¸…æ¥šã€‚</li><li>å¼•ç”¨æ•°æ®ç±»å‹å¦‚æœæƒ³æ¯”è¾ƒå€¼ï¼Œä½¿ç”¨equals</li><li>Stringç±»è¦†å†™äº†Objectä¸­çš„equalsæ–¹æ³•ï¼Œæ¯”ä»·çš„å°±æ˜¯å­—ç¬¦ä¸²çš„å­—é¢å€¼</li></ul><h4 id="Stringä¸­çš„æ–¹æ³•ï¼š"><a href="#Stringä¸­çš„æ–¹æ³•ï¼š" class="headerlink" title="Stringä¸­çš„æ–¹æ³•ï¼š"></a>Stringä¸­çš„æ–¹æ³•ï¼š</h4><ul><li><img src="/2019/11/05/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB/String.png" alt="strf"></li></ul><h3 id="StringBuffer-StringBuilder-å®¹å™¨"><a href="#StringBuffer-StringBuilder-å®¹å™¨" class="headerlink" title="StringBuffer/StringBuilder(å®¹å™¨)"></a>StringBuffer/StringBuilder(å®¹å™¨)</h3><h4 id="æ‹¼æ¥æ•°å­—ç¤ºä¾‹"><a href="#æ‹¼æ¥æ•°å­—ç¤ºä¾‹" class="headerlink" title="æ‹¼æ¥æ•°å­—ç¤ºä¾‹"></a>æ‹¼æ¥æ•°å­—ç¤ºä¾‹</h4><p>å°†1åˆ°1000,1åˆ°10000,1åˆ°10wæ•°å­—æ‹¼æ¥èµ·æ¥ï¼Œçœ‹çœ‹éœ€è¦å¤šå°‘æ—¶é—´ï¼Ÿ</p><h4 id="String-StringBuffer-StringBuilderçš„å…³ç³»"><a href="#String-StringBuffer-StringBuilderçš„å…³ç³»" class="headerlink" title="String/StringBuffer/StringBuilderçš„å…³ç³»"></a>String/StringBuffer/StringBuilderçš„å…³ç³»</h4><blockquote><p>â‘  è¿™3ä¸ªç±»æ²¡æœ‰ç›´æ¥æˆ–è€…é—´æ¥çš„ç»§æ‰¿å…³ç³»<code>ï¼ˆä¸æ˜¯ç›´ç³»äº²å±ï¼‰</code></p><pre><code>      StringBuffer sb = â€œ1231432234455â€;  æŠ¥é”™</code></pre><p>â‘¡ éƒ½è¡¨ç¤ºå­—ç¬¦åºåˆ—ï¼ˆç®€å•ç†è§£ä¸ºå­—ç¬¦ä¸²ï¼‰</p><p>â€‹        CharSequence  ï¼ˆå­—ç¬¦åºåˆ—çš„<strong>æ¥å£</strong>ï¼‰</p><p>â€‹               |â€” String</p><p>â€‹               |â€”-StringBuffer</p><pre><code>           |----StringBuilder</code></pre><p>â‘¢ åŒºåˆ«</p><ul><li><p>String : å®ƒçš„å¯¹è±¡ä¸€æ—¦è¢«åˆ›å»ºé‚£ä¹ˆå€¼å’Œé•¿åº¦å°±å›ºå®šä¸å˜äº†</p><p><img src="/2019/11/05/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB/strc.png"></p></li><li><p>StringBuffer  : å®ƒçš„å¯¹è±¡å†…å®¹æ˜¯å¯ä»¥è¢«æ”¹å˜çš„;</p><p><img src="/2019/11/05/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB/strbuf.png"></p><ul><li>æ˜¯çº¿ç¨‹å®‰å…¨çš„</li><li>ç‰ˆæœ¬æ˜¯1.0</li><li>æ•ˆç‡ç›¸å¯¹äºæ¯”StringBuilderè¦ä½</li></ul></li><li><p>StringBuilder  : å®ƒçš„å¯¹è±¡å†…å®¹æ˜¯å¯ä»¥è¢«æ”¹å˜çš„;</p><p><img src="/2019/11/05/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB/strbuld.png" alt="strb"></p><ul><li>æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„</li><li>ç‰ˆæœ¬æ˜¯ 1.5</li><li>ç›¸å½“äºStringBufferæ•ˆç‡æ›´é«˜ä¸€ç‚¹</li><li>æ•ˆç‡ç›¸å¯¹äºæ¯”StringBufferè¦é«˜</li></ul></li></ul></blockquote><h4 id="StringBuffer-StringBuilderä¸­çš„å¸¸ç”¨æ–¹æ³•"><a href="#StringBuffer-StringBuilderä¸­çš„å¸¸ç”¨æ–¹æ³•" class="headerlink" title="StringBuffer/StringBuilderä¸­çš„å¸¸ç”¨æ–¹æ³•"></a>StringBuffer/StringBuilderä¸­çš„å¸¸ç”¨æ–¹æ³•</h4><p>â‘  è¿™ä¸¤ä¸ªä¸­çš„æ–¹æ³•å‡ ä¹æ˜¯ä¸€æ ·çš„ï¼›</p><p>â‘¡ ä¸Šé¢3ä¸ªéƒ½è¡¨ç¤ºå­—ç¬¦åºåˆ—ï¼Œå› æ­¤æœ‰å¾ˆå¤šä¸€æ ·çš„æ–¹æ³•ï¼ˆæš‚æ—¶å°±å¿½ç•¥ï¼‰</p><p>â‘¢ ä»Šå¤©é‡ç‚¹å…³æ³¨è¿™ä¸¤ä¸ªä¸­ç‰¹æœ‰çš„æ–¹æ³•ï¼š æ›´æ”¹å¯¹è±¡ä¸­æ•°æ®çš„æ–¹æ³•</p><p>æ€è€ƒï¼š</p><p>  å“ªäº›æ“ä½œå¯èƒ½ä¼šæ”¹å˜å¯¹è±¡ä¸­çš„æ•°æ®ï¼Ÿ</p><p>  æ’å…¥ã€æ›¿æ¢ã€åˆ é™¤ã€è¿½åŠ ã€‚ã€‚ã€‚</p><p>================================</p><p>â‘£ æ„é€ æ–¹æ³•ï¼š</p><ul><li>StringBuilder() <ul><li>æ„é€ ä¸€ä¸ªä¸å¸¦ä»»ä½•å­—ç¬¦çš„å­—ç¬¦ä¸²ç”Ÿæˆå™¨ï¼Œå…¶åˆå§‹å®¹é‡ä¸º 16 ä¸ªå­—ç¬¦ã€‚ </li><li>åˆå§‹å®¹é‡ä»€ä¹ˆæ„æ€ï¼Ÿ</li></ul></li><li>StringBuilder(CharSequence seq) <ul><li>æ„é€ ä¸€ä¸ªå­—ç¬¦ä¸²ç”Ÿæˆå™¨ï¼Œå®ƒåŒ…å«ä¸æŒ‡å®šçš„ CharSequence ç›¸åŒçš„å­—ç¬¦ã€‚ </li><li>new StringBuilder(â€œæ‡‚äº†å—ï¼Ÿâ€)</li><li>new StringBuilder(new StringBuffer(â€œè¿™ä¸‹å‘¢ï¼Ÿâ€))</li><li>new StringBuilder(new StringBuilder(â€œã€‚ã€‚ã€‚ã€‚â€))</li></ul></li><li>StringBuilder(int capacity) <ul><li> æ„é€ ä¸€ä¸ªä¸å¸¦ä»»ä½•å­—ç¬¦çš„å­—ç¬¦ä¸²ç”Ÿæˆå™¨ï¼Œå…¶åˆå§‹å®¹é‡ç”± capacity å‚æ•°æŒ‡å®šã€‚</li></ul></li><li>StringBuilder(String str) </li></ul><p>â‘¤ å¸¸ç”¨æ–¹æ³•ï¼š</p><ul><li>StringBuilder append(â€¦.) </li><li>StringBuilder delete(int start, int end) </li><li>StringBuilder insert(æ’å…¥ç‚¹ï¼Œæ’å…¥çš„æ•°æ®)</li><li>StringBuilder replace(int start, int end, String str) </li><li>StringBuilder reverse() ç¿»è½¬</li><li>String substring(int start)    è¿”å›ä¸€ä¸ªå‰¯æœ¬ï¼Œæœ¬èº«çš„å¯¹è±¡æ²¡æœ‰è¢«æ”¹å˜</li><li>String substring(int start, int end) è¿”å›ä¸€ä¸ªå‰¯æœ¬ï¼Œæœ¬èº«çš„å¯¹è±¡æ²¡æœ‰è¢«æ”¹å˜</li></ul><h3 id="é”™è¯¯ä¸å¼‚å¸¸åˆ†æ"><a href="#é”™è¯¯ä¸å¼‚å¸¸åˆ†æ" class="headerlink" title="é”™è¯¯ä¸å¼‚å¸¸åˆ†æ"></a>é”™è¯¯ä¸å¼‚å¸¸åˆ†æ</h3><p><img src="/2019/11/05/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB/Snipaste_2019-11-07_21-36-50.png" alt="3"></p><p>æ’é”™æ–¹å¼2ç§:</p><p>æ–¹å¼ä¸€ï¼šåˆ°APIæ–‡æ¡£ä¸­æŸ¥è¯¢ä»€ä¹ˆæ„æ€ NumberFormatException</p><p>æ–¹å¼äºŒï¼šè‡ªå·±æ ¹æ®é”™è¯¯ä¿¡æ¯å®šä½åˆ†æé—®é¢˜ï¼š</p><p>åˆ†æå…·ä½“è¿™è¡Œä»£ç ï¼Œå“ªäº›åœ°æ–¹å¯èƒ½å‡ºé”™ï¼Ÿ</p><p>Integer integer = <strong>new</strong> Integer(â€œä½ ç»™æˆ‘è½¬å•Šâ€);</p><h3 id="Javaé¢è¯•é¢˜ï¼š"><a href="#Javaé¢è¯•é¢˜ï¼š" class="headerlink" title="Javaé¢è¯•é¢˜ï¼š"></a>Javaé¢è¯•é¢˜ï¼š</h3><p>1ã€è¯·ä½ è¯´è¯´intå’ŒIntegerçš„åŒºåˆ«</p><p>â€‹        Int å’Œ Integerå®ƒä»¬éƒ½æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œå¹¶ä¸”èŒƒå›´éƒ½æ˜¯ä¸€æ ·çš„ï¼Œè€Œintæ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œè€ŒIntegeræ˜¯intåŒ…è£…ç±»ï¼Œintæ˜¯æ²¡æœ‰æ–¹æ³•å’Œå­—æ®µï¼Œè€ŒIntegeræä¾›äº†å¤§é‡çš„æ–¹æ³•ä¸å­—æ®µ</p><p>2ã€åˆ›å»ºäº†å‡ ä¸ªå­—ç¬¦ä¸²å¯¹è±¡çš„é¢è¯•é¢˜</p><p> æ³¨æ„ï¼šä¸€èˆ¬è¿™ç§é—®æ³•ä¸ä¼šè€ƒè™‘å¸¸é‡æ± ä¸­çš„å¯¹è±¡ï¼Œæ˜¯é—®å †ä¸­çš„å¯¹è±¡ï¼Œå¦‚æœæ˜¯å½“é¢é—®ï¼Œå¯ä»¥ç»™ä»–è¯´è¯´æœ‰å¸¸é‡æ± è¿™ä¹ˆä¸€ä¸ªä¸œè¥¿ï¼Œè¡¨ç¤ºä½ çŸ¥é“æœ‰è¿™ä¹ˆå›äº‹ã€‚</p><p>â‘ String s1 = â€œAâ€ + â€œhelloâ€ // æœ€å¤šåˆ›å»º1ä¸ªï¼Œæœ€å°‘0ä¸ªï¼Œè¦çœ‹å¸¸é‡æ± é‡Œé¢æœ‰æ²¡æœ‰Ahello</p><p>â‘¡ String s2 = â€œAâ€;// 1</p><p>  String s3 = s2 + â€œhelloâ€;//2</p><p>â‘¢ String s4 = new String(â€œAâ€) + new String(â€œhelloâ€); 3ä¸ª</p><p>3ã€String/StringBuffer/StringBuilder ä»–ä»¬çš„åŒºåˆ«</p><p>String: å®ƒè¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²ä¸€æ—¦åˆ›å»ºäº†ä¹‹åï¼Œå®ƒçš„é•¿åº¦ä¸å†…å®¹éƒ½æ˜¯ä¸å¯å˜çš„</p><p>StringBuffer:å®ƒä»¬éƒ½æ˜¯æ“ä½œå­—ç¬¦ä¸²çš„å®¹å™¨ï¼Œå®ƒä»¬çš„é•¿åº¦å’Œå¤§å°éƒ½æ˜¯å¯å˜çš„ï¼ŒStringBufferæ˜¯jdk1.0å¼€å§‹ï¼Œæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œæ•ˆç‡ç›¸å¯¹äºStringBuilderè¦ä½ï¼ŒStringBuilder æ˜¯1.5å¼€å§‹çš„  æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ æ•ˆç‡ç›¸å¯¹äºæ¯”StringBufferè¦é«˜</p><p>4ã€ç¼–ç¨‹é¢˜ä½“ç°ï¼Œè¯·çœ‹å¦‚ä¸‹çš„ä»£ç ï¼Œè¯·è¯´å‡ºæ§åˆ¶å°æ‰“å°çš„ç»“æœ</p><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs processing"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> main(<span class="hljs-keyword">String</span>[] args) &#123;<br><span class="hljs-keyword">String</span> s1=<span class="hljs-string">&quot;AAA&quot;</span>;<br><span class="hljs-keyword">String</span> s2=<span class="hljs-string">&quot;KKK&quot;</span>;<br>StringBuffer sb1=<span class="hljs-keyword">new</span> StringBuffer(<span class="hljs-string">&quot;QQQ&quot;</span>);<br>StringBuffer sb2=<span class="hljs-keyword">new</span> StringBuffer(<span class="hljs-string">&quot;JJJ&quot;</span>);<br><br>change(s1,s2,sb1,sb2);<br>System.out.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;æ”¹å˜ås1=&quot;</span>+s1);<span class="hljs-comment">//</span><br>System.out.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;æ”¹å˜ås2=&quot;</span>+s2);<span class="hljs-comment">//</span><br>System.out.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;æ”¹å˜åsb1=&quot;</span>+sb1);<span class="hljs-comment">//</span><br><br>System.out.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;æ”¹å˜åsb2=&quot;</span>+sb2);<span class="hljs-comment">//</span><br><br>&#125;<br><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> change(<span class="hljs-keyword">String</span> s1, <span class="hljs-keyword">String</span> s2, StringBuffer sb1, StringBuffer sb2) &#123;<br>s1=<span class="hljs-string">&quot;XXX&quot;</span>;<br>s2=s2.<span class="hljs-built_in">concat</span>(<span class="hljs-string">&quot;666&quot;</span>);<br>sb1.<span class="hljs-built_in">append</span>(<span class="hljs-string">&quot;999&quot;</span>);<br>sb2=sb2.<span class="hljs-built_in">append</span>(<span class="hljs-string">&quot;777&quot;</span>);<br>System.out.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;æ”¹å˜ä¸­s1=&quot;</span>+s1);<span class="hljs-comment">//xxx</span><br>System.out.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;æ”¹å˜ä¸­s2=&quot;</span>+s2);<span class="hljs-comment">//kkk666</span><br>System.out.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;æ”¹å˜ä¸­sb1=&quot;</span>+sb1);<span class="hljs-comment">//QQQ999</span><br>System.out.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;æ”¹å˜ä¸­sb2=&quot;</span>+sb2);<span class="hljs-comment">//JJJ777</span><br>&#125;<br></code></pre></td></tr></table></figure><p><img src="/2019/11/05/Java%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%8F%8A%E5%85%B6%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB/qw.png" alt="qw"></p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">String</span> <span class="hljs-title">stringReplace</span><span class="hljs-params">(<span class="hljs-keyword">String</span> <span class="hljs-built_in">text</span>)</span> </span>&#123;<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">text</span>.replace(<span class="hljs-string">&#x27;j&#x27;</span>, <span class="hljs-string">&#x27;L&#x27;</span>);<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> StringBuffer <span class="hljs-title">bufferReplace</span><span class="hljs-params">(StringBuffer <span class="hljs-built_in">text</span>)</span> </span>&#123;<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">text</span>.append(<span class="hljs-string">&quot;c&quot;</span>);<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">String</span> args[])</span> </span>&#123;<br><span class="hljs-keyword">String</span> textString = <span class="hljs-keyword">new</span> <span class="hljs-keyword">String</span>(<span class="hljs-string">&quot;java&quot;</span>);<br>StringBuffer textBuffer = <span class="hljs-keyword">new</span> StringBuffer(<span class="hljs-string">&quot;java&quot;</span>);<br>System.out.<span class="hljs-built_in">println</span>(stringReplace(textString) + bufferReplace(textBuffer));<br>System.out.<span class="hljs-built_in">println</span>(textString + textBuffer);<br>&#125;<br><span class="hljs-comment">/*</span><br><span class="hljs-comment">ç»“æœè¾“å‡ºï¼š</span><br><span class="hljs-comment">Lavajavac</span><br><span class="hljs-comment">javajavac</span><br><span class="hljs-comment">*/</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>Object</tag>
      
      <tag>åŒ…è£…ç±»</tag>
      
      <tag>System</tag>
      
      <tag>Runtime</tag>
      
      <tag>String</tag>
      
      <tag>StringBuilder</tag>
      
      <tag>StringBuffer</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Javaç»§æ‰¿ä¸åŒ…è®¿é—®æƒé™</title>
    <link href="/2019/11/05/Java%E7%BB%A7%E6%89%BF%E4%B8%8E%E5%8C%85%E8%AE%BF%E9%97%AE%E6%9D%83%E9%99%90/"/>
    <url>/2019/11/05/Java%E7%BB%A7%E6%89%BF%E4%B8%8E%E5%8C%85%E8%AE%BF%E9%97%AE%E6%9D%83%E9%99%90/</url>
    
    <content type="html"><![CDATA[<h3 id="Javaç»§æ‰¿ä¸åŒ…è®¿é—®æƒé™"><a href="#Javaç»§æ‰¿ä¸åŒ…è®¿é—®æƒé™" class="headerlink" title="Javaç»§æ‰¿ä¸åŒ…è®¿é—®æƒé™"></a>Javaç»§æ‰¿ä¸åŒ…è®¿é—®æƒé™</h3><p><img src="/2019/11/05/Java%E7%BB%A7%E6%89%BF%E4%B8%8E%E5%8C%85%E8%AE%BF%E9%97%AE%E6%9D%83%E9%99%90/jicheng.png" alt="jicheng"></p><p><img src="/2019/11/05/Java%E7%BB%A7%E6%89%BF%E4%B8%8E%E5%8C%85%E8%AE%BF%E9%97%AE%E6%9D%83%E9%99%90/override.png" alt="override"></p><p><img src="/2019/11/05/Java%E7%BB%A7%E6%89%BF%E4%B8%8E%E5%8C%85%E8%AE%BF%E9%97%AE%E6%9D%83%E9%99%90/cp.png" alt="java"></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><code class="hljs typescript">package cn.kongwei_liao.Inheritance;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Father</span> </span>&#123;<br><span class="hljs-keyword">public</span> <span class="hljs-built_in">String</span> pubstr=<span class="hljs-string">&quot;Public Father String!\n&quot;</span>;<br><span class="hljs-keyword">private</span> <span class="hljs-built_in">String</span> pristr=<span class="hljs-string">&quot;private Father String!\n&quot;</span>;<br><span class="hljs-keyword">protected</span> <span class="hljs-built_in">String</span> prostr=<span class="hljs-string">&quot;protected Father String!&quot;</span>;<br><br><span class="hljs-keyword">protected</span> Father_innerClass fif=<span class="hljs-keyword">new</span> Father_innerClass();<br><br>&#123;<br>System.out.println(<span class="hljs-string">&quot;ä»€ä¹ˆæ—¶å€™æ‰§è¡Œï¼ŸFatherç±»åŠ è½½åˆ°å†…å­˜çš„æ—¶å€™&quot;</span>);<br>&#125;<br><br><br><span class="hljs-keyword">public</span> <span class="hljs-built_in">String</span> <span class="hljs-function"><span class="hljs-title">getPubstr</span>(<span class="hljs-params"></span>)</span> &#123;<br><span class="hljs-keyword">return</span> pubstr;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">setPubstr</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> pubstr</span>)</span> &#123;<br><span class="hljs-built_in">this</span>.pubstr = pubstr;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-built_in">String</span> <span class="hljs-function"><span class="hljs-title">getPristr</span>(<span class="hljs-params"></span>)</span> &#123;<br><span class="hljs-keyword">return</span> pristr;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">setPristr</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> pristr</span>)</span> &#123;<br><span class="hljs-built_in">this</span>.pristr = pristr;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-built_in">String</span> <span class="hljs-function"><span class="hljs-title">getProstr</span>(<span class="hljs-params"></span>)</span> &#123;<br><span class="hljs-keyword">return</span> prostr;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">setProstr</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> prostr</span>)</span> &#123;<br><span class="hljs-built_in">this</span>.prostr = prostr;<br>&#125;<br><span class="hljs-keyword">public</span> Father_innerClass <span class="hljs-function"><span class="hljs-title">getFif</span>(<span class="hljs-params"></span>)</span> &#123;<br><span class="hljs-keyword">return</span> fif;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">setFif</span>(<span class="hljs-params">Father_innerClass fif</span>)</span> &#123;<br><span class="hljs-built_in">this</span>.fif = fif;<br>&#125;<br><br><span class="hljs-keyword">private</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">func1</span>(<span class="hljs-params"></span>)</span> &#123;<br>System.out.println(<span class="hljs-string">&quot;private Father function 1!\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">public</span> long <span class="hljs-function"><span class="hljs-title">func2</span>(<span class="hljs-params"></span>)</span> &#123;<br>System.out.println(<span class="hljs-string">&quot;public Father function 2!\n&quot;</span>);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-keyword">protected</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">func3</span>(<span class="hljs-params"></span>)</span> &#123;<br>System.out.println(<span class="hljs-string">&quot;protected Father function 3!\n&quot;</span>);<br>&#125;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Father_innerClass</span></span>&#123;<span class="hljs-comment">//Inner Class</span><br><br><span class="hljs-keyword">public</span> <span class="hljs-built_in">String</span> pubstr=<span class="hljs-string">&quot;Public String!&quot;</span>;<br><span class="hljs-keyword">private</span> <span class="hljs-built_in">String</span> pristr=<span class="hljs-string">&quot;private String!&quot;</span>;<br><span class="hljs-keyword">protected</span> <span class="hljs-built_in">String</span> prostr=<span class="hljs-string">&quot;protected String!&quot;</span>;<br><br><span class="hljs-keyword">private</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">func1</span>(<span class="hljs-params"></span>)</span> &#123;<br>System.out.println(<span class="hljs-string">&quot;private Father_innerClass_function 1!\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">func2</span>(<span class="hljs-params"></span>)</span> &#123;<br>System.out.println(<span class="hljs-string">&quot;public Father_innerClass_function 2!\n&quot;</span>);<br>&#125;<br><span class="hljs-keyword">protected</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">func3</span>(<span class="hljs-params"></span>)</span> &#123;<br>System.out.println(<span class="hljs-string">&quot;protected Father_innerClass_function 3!\n&quot;</span>);<br>&#125;<br>&#125;<br><br><span class="hljs-comment">//public class Father_fake&#123;</span><br><span class="hljs-comment">////Error:The public type Father_fake must be defined in its own file</span><br><span class="hljs-comment">//&#125;</span><br><br><span class="hljs-comment">//private class Father_infile&#123;</span><br><span class="hljs-comment">////Error:Illegal modifier for the class Father_infile; only public, abstract &amp; final are permitted</span><br><span class="hljs-comment">//&#125;</span><br><span class="hljs-comment">//protected class Father_protected_infile() &#123;</span><br><span class="hljs-comment">////Error:Illegal modifier for the class Father_protected_infile; only public, abstract &amp; final are permitted</span><br><span class="hljs-comment">//&#125;</span><br><br><span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Father_abstract_inOfile</span></span>&#123;<br><br><span class="hljs-keyword">public</span> <span class="hljs-built_in">String</span> pubstr=<span class="hljs-string">&quot;Public String!&quot;</span>;<br><span class="hljs-keyword">private</span> <span class="hljs-built_in">String</span> pristr=<span class="hljs-string">&quot;private String!&quot;</span>;<br><span class="hljs-keyword">protected</span> <span class="hljs-built_in">String</span> prostr=<span class="hljs-string">&quot;protected String!&quot;</span>;<br><br><span class="hljs-keyword">private</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">func1</span>(<span class="hljs-params"></span>)</span> &#123;<br>System.out.println(<span class="hljs-string">&quot;private function 1!&quot;</span>);<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">func2</span>(<span class="hljs-params"></span>)</span> &#123;<br>System.out.println(<span class="hljs-string">&quot;public function 2!&quot;</span>);<br>&#125;<br><span class="hljs-keyword">protected</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">func3</span>(<span class="hljs-params"></span>)</span> &#123;<br>System.out.println(<span class="hljs-string">&quot;protected function 3!&quot;</span>);<br>&#125;<br><span class="hljs-comment">//private abstract void func4();//Error:The abstract method func5 in type Father_abstract_inOfile can only set a visibility modifier, one of public or protected</span><br><span class="hljs-comment">//public final abstract void func4();//Error:The abstract method func5 in type Father_abstract_inOfile can only set a visibility modifier, one of public or protected</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-built_in">void</span> func4();<br>&#125;<br><br>final <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Father_final_inOfile</span></span>&#123;<br><br><span class="hljs-keyword">public</span> <span class="hljs-built_in">String</span> pubstr=<span class="hljs-string">&quot;Public String!&quot;</span>;<br><span class="hljs-keyword">private</span> <span class="hljs-built_in">String</span> pristr=<span class="hljs-string">&quot;private String!&quot;</span>;<br><span class="hljs-keyword">protected</span> <span class="hljs-built_in">String</span> prostr=<span class="hljs-string">&quot;protected String!&quot;</span>;<br><br><span class="hljs-keyword">private</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">func1</span>(<span class="hljs-params"></span>)</span> &#123;<br>System.out.println(<span class="hljs-string">&quot;private function 1!&quot;</span>);<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">func2</span>(<span class="hljs-params"></span>)</span> &#123;<br>System.out.println(<span class="hljs-string">&quot;public function 2!&quot;</span>);<br>&#125;<br><span class="hljs-keyword">protected</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">func3</span>(<span class="hljs-params"></span>)</span> &#123;<br>System.out.println(<span class="hljs-string">&quot;protected function 3!&quot;</span>);<br>&#125;<br><span class="hljs-comment">//public abstract void func4();//The abstract method func4 in type Father_final_inOfile can only be defined by an abstract class</span><br><br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><code class="hljs awk">package cn.kongwei_liao.Inheritance;<br><br>public class Son extends Father&#123;<br><span class="hljs-regexp">//</span>public String pubstr = <span class="hljs-string">&quot;public Son String!\n&quot;</span>;<br><span class="hljs-regexp">//</span>private String pristr = <span class="hljs-string">&quot;private Son String!\n&quot;</span>;<br><span class="hljs-regexp">//</span>protected String prostr = <span class="hljs-string">&quot;protected Son String!\n&quot;</span>;<br><br>public String pubSonstr;<br>private String priSonstr;<span class="hljs-regexp">//</span>å±æ€§ä¸èµ‹åˆå€¼null<br>protected String proSonstr;<br><br>public Son() &#123;<br><span class="hljs-regexp">//</span>super();<br>System.out.println(<span class="hljs-string">&quot;newåˆ›å»ºå¯¹è±¡çš„æ—¶å€™æ‰§è¡Œ&quot;</span>);<br>pubstr=<span class="hljs-string">&quot;ä»çˆ¶ç±»ç»§æ‰¿æ¥publicçš„pubstr!\n&quot;</span>;<br>prostr=<span class="hljs-string">&quot;ä»çˆ¶ç±»ç»§æ‰¿æ¥protectedçš„prostr!\n&quot;</span>;<br><span class="hljs-regexp">//</span>pristr=<span class="hljs-string">&quot;ä»çˆ¶ç±»ç»§æ‰¿ä¸æ¥privateçš„pristr!\n&quot;</span>;<span class="hljs-regexp">//</span>Error:The field Father.pristr is not visible<br><br>pubSonstr=super.pubstr;<br><span class="hljs-regexp">//</span>priSonstr=super.pristr;<span class="hljs-regexp">//</span>Error:The field Father.pristr is not visible<br>proSonstr=super.prostr;<br><br>System.out.println(<span class="hljs-string">&quot;priSonstråˆå§‹åŒ–ï¼š&quot;</span> + priSonstr);<br>&#125;<br>public Son(String str)&#123;<br>this();<br><span class="hljs-regexp">//</span>super();<span class="hljs-regexp">//</span>ErrorConstructor call must be the first statement <span class="hljs-keyword">in</span> a constructor<br><span class="hljs-regexp">//</span>ä»ä¸Šé¢ä¸¤è¡Œä»£ç çœ‹å‡ºthiså’Œsuperè°ƒç”¨æ„é€ æ–¹æ³•åŒæ—¶åªèƒ½å­˜åœ¨ä¸€ä¸ª<br>&#125;<br>&#123;<br><br><span class="hljs-regexp">//</span>this();<span class="hljs-regexp">//</span>Error:Constructor call must be the first statement <span class="hljs-keyword">in</span> a constructor<br>System.out.println(<span class="hljs-string">&quot;ä»€ä¹ˆæ—¶å€™æ‰§è¡Œï¼ŸSonç±»åŠ è½½åˆ°å†…å­˜çš„æ—¶å€™&quot;</span>);<br>&#125;<br><br>@Override<br>public long func2() &#123;<br>System.out.println(<span class="hljs-string">&quot;é‡å†™çˆ¶ç±»ç»§æ‰¿æ¥çš„publicçš„func2()æ–¹æ³•ï¼\n&quot;</span>);<br>return <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-regexp">//</span>@Override<br><span class="hljs-regexp">//</span>public int func2() &#123;<span class="hljs-regexp">//</span>Error:The return type is incompatible with Father.func2()<br><span class="hljs-regexp">//</span>System.out.println(<span class="hljs-string">&quot;é‡å†™çˆ¶ç±»ç»§æ‰¿æ¥çš„publicçš„func2()æ–¹æ³•ï¼\n&quot;</span>);<br><span class="hljs-regexp">//</span>return <span class="hljs-number">0</span>;<br><span class="hljs-regexp">//</span>&#125;<br><span class="hljs-regexp">//</span>åœ¨JAVAä¸­ï¼Œå¯ä»¥åœ¨åŒä¸€ä¸ªç±»ä¸­å­˜åœ¨å¤šä¸ªå‡½æ•°ï¼Œå‡½æ•°åç§°ç›¸åŒä½†å‚æ•°åˆ—è¡¨ä¸åŒï¼ˆå‚æ•°çš„æ•°é‡ä¸åŒã€æˆ–æ•°é‡ç›¸åŒè€Œç±»å‹å’Œæ¬¡åºä¸åŒï¼Œä»¥æ–¹ä¾¿JVMåŒºåˆ†åˆ°åº•è°ƒç”¨å“ªä¸ªå‡½æ•°ï¼‰ã€‚è¿™å°±æ˜¯å‡½æ•°çš„é‡è½½ï¼ˆoverlordingï¼‰ã€‚è¿™æ˜¯ç±»çš„å¤šæ€æ€§è¡¨ç°ä¹‹ä¸€ã€‚<br><br><br><span class="hljs-regexp">//</span>â€œé‡è½½â€ä¸åŒäºâ€œé‡å†™â€<br><span class="hljs-regexp">//</span>â€œé‡å†™ï¼ˆè¦†ç›–ï¼‰â€æ¦‚å¿µå­˜åœ¨äºç»§æ‰¿å…³ç³»ä¸­ï¼Œå­ç±»å¯ç»§æ‰¿çˆ¶ç±»ä¸­çš„æ–¹æ³•è€Œä¸éœ€è¦å•ç‹¬ç¼–è¾‘ï¼Œè¿™æä¾›ä¾¿æ·åŒ–ã€‚ä½†æœ‰çš„æ—¶ä¾¯ï¼Œå­ç±»ä¸æƒ³åŸå°ä¸åŠ¨åœ°ç»§æ‰¿çˆ¶ç±»çš„æ–¹æ³•ï¼Œè€Œæ˜¯æƒ³ä½œä¸€å®šçš„ä¿®æ”¹ï¼Œè¿™å°±éœ€è¦é‡‡ç”¨æ–¹æ³•çš„é‡å†™ã€‚<br><span class="hljs-regexp">//</span>çˆ¶ç±»ä¸­å­˜åœ¨ä¸€ä¸ªå‡½æ•°ï¼Œå­ç±»ä¸­ä¹Ÿå­˜åœ¨ä¸€ä¸ªåŒåå‡½æ•°ï¼Œåœ¨äº†ç±»ä¸­å¯¹å‡½æ•°é‡æ–°ç¼–è¾‘ï¼Œåšå¾—æ›´å…·ä½“åŒ–ã€‚<br><span class="hljs-regexp">//</span>é‡å†™çš„è§„åˆ™ï¼š<br><span class="hljs-regexp">//</span><span class="hljs-number">1</span>ã€åœ¨å­ç±»ä¸­å¯ä»¥æ ¹æ®éœ€è¦å¯¹ä»çˆ¶ç±»ä¸­ç»§æ‰¿æ¥çš„æ–¹æ³•è¿›è¡Œé‡å†™ã€‚<br><span class="hljs-regexp">//</span><span class="hljs-number">2</span>ã€é‡å†™çš„æ–¹æ³•å’Œè¢«é‡å†™çš„æ–¹æ³•å¿…é¡»å…·æœ‰ç›¸åŒæ–¹æ³•åç§°ã€å‚æ•°åˆ—è¡¨å’Œè¿”å›ç±»å‹ã€‚<br><span class="hljs-regexp">//</span><span class="hljs-number">3</span>ã€é‡å†™æ–¹æ³•ä¸èƒ½ä½¿ç”¨æ¯”è¢«é‡å†™çš„æ–¹æ³•æ›´ä¸¥æ ¼çš„è®¿é—®æƒé™ã€‚<br>public void func2(String str) &#123;<br>System.out.println(<span class="hljs-string">&quot;é‡å†™çˆ¶ç±»ç»§æ‰¿æ¥çš„publicçš„func2()æ–¹æ³•ï¼\n&quot;</span>);<br>&#125;<br><br><br>public static void main(String[]args) &#123;<br><br>Son son=new Son();<span class="hljs-regexp">//</span>Fatherå’ŒSonç±»å…ˆååŠ è½½è¿›å†…å­˜ï¼Œç„¶ååˆ›å»ºSonå®ä¾‹<br>Default dft=new Default();<br><br>System.out.print(son.pubstr);<br><span class="hljs-regexp">//</span>System.out.print(son.pristr);<span class="hljs-regexp">//</span>Error:The field Father.pristr is not visible<br>System.out.print(son.prostr);<br><br><span class="hljs-regexp">//</span>son.func1();<span class="hljs-regexp">//</span>Error:The method func1() from the type Father is not visible<br>son.func2();<br>son.func3();<br><br><span class="hljs-regexp">//</span>son.fif.func1();<span class="hljs-regexp">//</span>Error:The method func1() from the type Father_innerClass is not visible<br>son.fif.func2();<br>son.fif.func3();<br><br>System.out.println(son.getProstr());<span class="hljs-regexp">//</span>æ‰“å°ï¼šä»çˆ¶ç±»ç»§æ‰¿æ¥protectedçš„prostr!<br><br>&#125;<br>&#125;<br><br><br>class InhDefault extends Default&#123;<br><br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-keyword">package</span> cn.kongwei_liao.Inheritance;<br><br><span class="hljs-keyword">class</span> <span class="hljs-keyword">Default</span> &#123;<br><br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs awk">package cn.kongwei_liao.InhDef;<br><span class="hljs-regexp">//im</span>port cn.kongwei_liao.Inheritance.*;<br><br><span class="hljs-regexp">//</span>public class InhDef extends cn.kongwei_liao.Inheritance.Default&#123;<span class="hljs-regexp">//</span>Error:The type cn.kongwei_liao.Inheritance.Default is not visible<br><span class="hljs-regexp">//</span><br><span class="hljs-regexp">//</span>&#125;<br><br><span class="hljs-regexp">//</span>public class InhDef extends cn.kongwei_liao.Inheritance.Father&#123;<br><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span>OK<br><span class="hljs-regexp">//</span>&#125;<br>public class InhDef extends cn.kongwei_liao.Inheritance.Son&#123;<br><span class="hljs-regexp">//</span>Ok<br>&#125;<br><br><span class="hljs-regexp">//</span>public class InhDef extends cn.kongwei_liao.Inheritance.InhDefault&#123;<br><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span>The type cn.kongwei_liao.Inheritance.InhDefault is not visibleï¼Œç±»InhDefaultæ˜¯åœ¨Son.javaä¸­ç¼–å†™çš„defaultç±»<br><span class="hljs-regexp">//</span>&#125;<br></code></pre></td></tr></table></figure><h3 id="ç»§æ‰¿çš„æ³¨æ„äº‹é¡¹ï¼š"><a href="#ç»§æ‰¿çš„æ³¨æ„äº‹é¡¹ï¼š" class="headerlink" title="ç»§æ‰¿çš„æ³¨æ„äº‹é¡¹ï¼š"></a>ç»§æ‰¿çš„æ³¨æ„äº‹é¡¹ï¼š</h3><p>å¯ä»¥é‡å¤åˆ©ç”¨ä»£ç </p><p>éç§æœ‰çš„å­—æ®µï¼ˆéprivateå­—æ®µï¼‰å’Œæ–¹æ³•å¯ä»¥è¢«ç»§æ‰¿åˆ°  </p><p>å¹¿ä¹‰ä¸Šæ¥è¯´,ç§æœ‰çš„å­—æ®µâ€¦ æ˜¯å¯ä»¥è¢«ç»§æ‰¿åˆ°çš„ï¼ŒåŒè¿‡getã€setæ–¹æ³•</p><p>Javaä¸­ç±»çš„ç»§æ‰¿åªèƒ½å¤Ÿæ˜¯å•ç»§æ‰¿(ä¸€ä¸ªç±»åªèƒ½å¤Ÿæœ‰ä¸€ä¸ªç›´æ¥çˆ¶ç±») ä¸€ä¸ªäººåªèƒ½å¤Ÿæœ‰ä¸€ä¸ªäº²çˆ¹  </p><p>å¯ä»¥æ”¯æŒå¤šé‡ç»§æ‰¿(å¤šå±‚çº§çš„ç»§æ‰¿), ä¸€ä¸ªç±»å¯ä»¥æœ‰å­ç±»,å­ç±»è¿˜å¯ä»¥å­ç±»â€¦ å­å­å­™å­™æ— ç©·å°½ä¹Ÿâ€¦</p><p>æ¯ä¸€ä¸ªç±»éƒ½æœ‰ä¸€ä¸ªç›´æ¥çˆ¶ç±»,å¦‚æœæ²¡æœ‰çœ‹åˆ°æ˜¾ç¤ºçš„ç»§æ‰¿ä»£ç ,é‚£ä¹ˆå°±éšå¼ç»§æ‰¿å°±Object</p><p>å­ç±»è¦†å†™äº†çˆ¶ç±»çš„æ–¹æ³•,å­ç±»ä¸­è¿˜æœ‰(è¿˜å¯ä»¥è°ƒç”¨)çˆ¶ç±»ä¸­çš„æ–¹æ³•å—?        <strong>super</strong></p><blockquote><p>@Overrideæ³¨è§£ï¼š</p><p>å½“æ³¨é‡Šç”¨ï¼Œæ–¹ä¾¿é˜…è¯»ï¼›<br>    æé«˜å¯è¯»æ€§ï¼›<br>    è®©ç¼–è¯‘å™¨æ‰§è¡Œæ£€æŸ¥æ–¹æ³•çš„æ­£ç¡®æ€§ï¼Œè¦æ±‚è¯¥ç±»å¿…é¡»é‡å†™çˆ¶ç±»çš„æ–¹æ³•ï¼Œå³@Overrideä¸‹é¢çš„æ–¹æ³•åæ˜¯å¦æ˜¯çˆ¶ç±»ä¸­æ‰€æœ‰çš„ï¼Œå¦‚æœæ²¡æœ‰åˆ™æŠ¥é”™ï¼›</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs scala">public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Father</span> </span>&#123;<br>public void test()&#123;<br><span class="hljs-type">System</span>.out.println(<span class="hljs-string">&quot;test&quot;</span>);<br>&#125;<br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">child</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Father</span></span>&#123;<br><span class="hljs-meta">@Override</span><br>public void test()&#123;&#125;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¯´æ˜ï¼šå°†@Overrideæ³¨é‡Šå»æ‰çš„è¯ï¼Œç¼–è¯‘å™¨ä¼šé»˜è®¤åˆ›å»ºäº†æ–°çš„æ–¹æ³•</p></blockquote><p>é˜¿é‡Œçš„Javaå¼€å‘æ‰‹å†Œä¸­å°†åŠ @Override æ³¨è§£è§„å®šä¸ºå¼ºåˆ¶ï¼Œå…¶ç›¸åº”è¯´æ˜å¦‚ä¸‹ï¼šgetObject()ä¸ get0bject()çš„é—®é¢˜ã€‚ä¸€ä¸ªæ˜¯å­—æ¯çš„Oï¼Œä¸€ä¸ªæ˜¯æ•°å­—çš„ 0ï¼ŒåŠ @Overrideå¯ä»¥å‡†ç¡®åˆ¤æ–­æ˜¯å¦è¦†ç›–æˆåŠŸã€‚å¦å¤–ï¼Œå¦‚æœåœ¨æŠ½è±¡ç±»ä¸­å¯¹æ–¹æ³•ç­¾åè¿›è¡Œä¿®æ”¹ï¼Œå…¶å®ç°ç±»ä¼šé©¬ä¸Šç¼–è¯‘æŠ¥é”™</p><pre><code>å­ç±»ä¸çˆ¶ç±»æœ‰ç¬¦åˆè¦†å†™è§„å®šçš„æ–¹æ³•æ—¶ï¼Œä¸åŠ @Override æ³¨è§£ï¼Œä¹Ÿæ˜¯èƒ½å¤Ÿè¦†å†™çš„ï¼Œä½†æ˜¯åœ¨å®é™…ä½¿ç”¨æ—¶å¯èƒ½ä¼šäº§ç”Ÿä¸€äº›ç–‘é—®ï¼Œåˆ°åº•æ˜¯è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•è¿˜æ˜¯å­ç±»è¦†å†™åçš„æ–¹æ³•å‘¢ã€‚è€ŒåŠ ä¸Šæ³¨è§£èƒ½å¢åŠ ä»£ç çš„å¯è¯»æ€§ï¼Œçœ‹åˆ°æ ‡ç­¾å°±çŸ¥é“è¿™æ˜¯ä»çˆ¶ç±»é‡å†™çš„æ–¹æ³•ï¼Œåœ¨è°ƒç”¨æ—¶ä¹Ÿå°†è°ƒç”¨é‡å†™åçš„æ–¹æ³•ã€‚å¹¶ä¸”ä½¿ç”¨@Overrideå¯ä»¥å‡†ç¡®åˆ¤æ–­æ˜¯å¦è¦†ç›–æˆåŠŸã€‚</code></pre><p>å­ç±»è¦æƒ³è¦†å†™çˆ¶ç±»çš„æ–¹æ³•ï¼Œé™¤äº†æ–¹æ³•åå’Œå‚æ•°åˆ—è¡¨ä¸€æ ·ä¹‹å¤–ï¼Œè¿˜æœ‰ä»¥ä¸‹çš„æ³¨æ„äº‹é¡¹ï¼š</p><pre><code>1.è¢«è¦†ç›–æ–¹æ³•çš„è®¿é—®æ§åˆ¶çº§åˆ«å¯ä»¥ä¸ä¸€æ ·ã€‚     ä¾‹å¦‚ä¸Šä¾‹çˆ¶ç±»çš„showæ–¹æ³•çš„è®¿é—®çº§åˆ«ä¸ºprotectedçš„ï¼Œè€Œå­ç±»è¦†ç›–çš„showæ–¹æ³•è®¿é—®çº§åˆ«åˆ™ä¸ºpublicçš„ã€‚    ä½†å­ç±»çš„è®¿é—®çº§åˆ«å¿…é¡»è¦é«˜äºçˆ¶ç±»è¢«è¦†ç›–æ–¹æ³•çš„è®¿é—®çº§åˆ«ï¼Œå¦‚æœçˆ¶ç±»æ˜¯publicçš„è€Œå­ç±»æ˜¯protectedçš„åˆ™æ˜¯é”™è¯¯çš„ã€‚private &lt; default &lt; public2.æ–¹æ³•è¢«å®šä¹‰ä¸ºprivateæˆ–staticæˆ–finalçš„åˆ™ä¸èƒ½è¢«è¦†ç›–ã€‚3.æ–¹æ³•çš„è¿”å›ç±»å‹ã€‚    è¦†å†™çš„æ–¹æ³•åç§°ï¼Œè¿”å›ç±»å‹ï¼Œå‚æ•°åŠç±»å‹å¿…é¡»ä¸€è‡´ã€‚è¿™é‡Œï¼Œè¿”å›ç±»å‹å…¶å®å¯ä»¥ä¸ä¸€æ ·ï¼Œä½†ç±»å‹æœ‰é™åˆ¶ã€‚    åŸºæœ¬æ•°æ®ç±»å‹åšè¿”å›å€¼æ—¶ï¼Œé‡å†™æ–¹æ³•è¿”å›å€¼å¿…é¡»ä¸€è‡´ã€‚    å­ç±»çš„è¿”å›ç±»å‹å¯ä»¥æ˜¯æ›´å…·ä½“çš„å¯¹è±¡ï¼Œä¾‹å¦‚å¯ä»¥å°†Employeeç±»çš„è¿”å›ç±»å‹æ”¹ä¸ºObjectä¹Ÿæ­£ç¡®ã€‚è€Œå€’è¿‡æ¥åˆ™é”™è¯¯ã€‚4.åœ¨æ–¹æ³•è°ƒç”¨æ—¶å…ˆä¼šåœ¨å­ç±»ä¸­æ‰¾è¦†å†™çš„æ–¹æ³•ï¼Œå¦‚æœå­ç±»ä¸­æ²¡æœ‰åˆ™ä¼šåœ¨çˆ¶ç±»ä¸­å»æ‰¾ã€‚5.æ–¹æ³•ä¸»ä½“:æ–¹æ³•è¦†å†™,å­ç±»æ–¹æ³•å’Œçˆ¶ç±»æ–¹æ³•ä¸»ä½“æ˜¯å¦å¯ä»¥ä¸€æ ·, å¯ä»¥! ä½†æ˜¯æ²¡æœ‰ä»€ä¹ˆç”¨!</code></pre><p><strong>Staticé™æ€å˜é‡</strong></p><p>å˜é‡åˆ†ç±»ï¼š</p><ul><li>æˆå‘˜å˜é‡ ï¼š ç›´æ¥å®šä¹‰åœ¨ç±»ä¸­</li><li>å±€éƒ¨å˜é‡ ï¼š é™¤äº†æˆå‘˜å˜é‡ä¹‹å¤–çš„éƒ½æ˜¯å±€éƒ¨å˜é‡ï¼ˆæ–¹æ³•å†…éƒ¨ï¼Œå½¢å‚ï¼Œä»£ç å—ä¸­â€¦ï¼‰</li></ul><p>-â€”â€”â€”â€”â€”â€”â€”â€”-</p><p>å¦ä¸€ç§åˆ†ç±»æ–¹å¼ï¼šæ˜¯å¦æœ‰static</p><p>â€‹                    æ˜¯å¦æœ‰staticä¿®é¥°     ç”Ÿå‘½å‘¨æœŸï¼ˆå¼€å§‹ï¼‰      ç”Ÿå‘½å‘¨æœŸï¼ˆå¼€å§‹ï¼‰</p><ul><li>å±€éƒ¨å˜é‡        æ²¡æœ‰               æ–¹æ³•è¢«è°ƒç”¨çš„æ—¶å€™       æ–¹æ³•æ‰§è¡Œå®Œäº†</li><li>å®ä¾‹å˜é‡        æ²¡æœ‰                 åˆ›å»ºå¯¹è±¡çš„æ—¶å€™          å¯¹è±¡è¢«é”€æ¯</li><li>ç±»å˜é‡              æœ‰                  ç±»è¢«åŠ è½½çš„æ—¶å€™            ç±»è¢«å¸è½½</li></ul><p>å¤‡æ³¨ï¼š</p><p>1ã€å®ä¾‹å˜é‡å’Œç±»å˜é‡éƒ½æ˜¯å±äºæˆå‘˜å˜é‡</p><p>2ã€ç±»æˆå‘˜ï¼ˆä¸€èˆ¬æŒ‡çš„æ˜¯æœ‰staticä¿®é¥°çš„å­—æ®µæˆ–è€…æ–¹æ³•ï¼‰</p><p>ç±»ä¸­çš„æˆå‘˜ï¼ˆå­—æ®µï¼Œæ–¹æ³•ï¼Œæ„é€ æ–¹æ³•ï¼Œå†…éƒ¨ç±»ã€‚ã€‚ã€‚ï¼‰</p><p><strong>è®¿é—®æƒé™ä¿®é¥°ç¬¦</strong></p><p>è®¿é—®æƒé™ä¿®é¥°ç¬¦çš„ä½œç”¨</p><p>â‘  æˆå‘˜ ï¼š private          é»˜è®¤ä¸å†™ï¼ˆdefaultï¼‰          protected             public </p><p>â‘¡ ä½œç”¨ ï¼š ä¸»è¦æ˜¯æ§åˆ¶ç±»ä»¥åŠ<strong>ç±»ä¸­æˆå‘˜</strong>çš„è®¿é—®æƒé™</p><table><thead><tr><th></th><th>åŒç±»</th><th>åŒåŒ…</th><th>å­ç±»</th><th>å…¬å…±</th></tr></thead><tbody><tr><td>private(ç§æœ‰)</td><td>âˆš</td><td></td><td></td><td></td></tr><tr><td>é»˜è®¤ä¸å†™</td><td>âˆš</td><td>âˆš</td><td></td><td></td></tr><tr><td>protected(å—ä¿æŠ¤)</td><td>âˆš</td><td>âˆš</td><td>âˆš</td><td></td></tr><tr><td>public(å…¬å…±)</td><td>âˆš</td><td>âˆš</td><td>âˆš</td><td>âˆš</td></tr></tbody></table><blockquote><p>ä¸»è¦æ˜¯ä¿®é¥°ç±»ä¸­çš„æˆå‘˜ï¼ˆå­—æ®µã€æ–¹æ³•ã€æ„é€ æ–¹æ³•ã€åŠå†…éƒ¨ç±»ï¼‰;</p><p>public  (é»˜è®¤default)  å¯ä»¥ä¿®é¥°ç±»ï¼›</p><p>private   protedted   ä¸èƒ½å¤Ÿä¿®é¥°ç±»ï¼ˆå¤–éƒ¨ç±»ï¼‰ï¼›</p><p>æ‰€æœ‰è®¿é—®æƒé™ä¿®é¥°ç¬¦éƒ½ä¸èƒ½å¤Ÿä¿®é¥°å±€éƒ¨å˜é‡ã€‚</p></blockquote><p><img src="/2019/11/05/Java%E7%BB%A7%E6%89%BF%E4%B8%8E%E5%8C%85%E8%AE%BF%E9%97%AE%E6%9D%83%E9%99%90/%E8%AE%BF%E6%9D%83.png" alt="fq"></p><p>è®¿é—®æƒé™çš„æ€»ç»“</p><p>â‘  å¤–éƒ¨ç±»åªèƒ½å¤Ÿä½¿ç”¨public æˆ–è€…é»˜è®¤ä¸å†™ï¼› ä¸€èˆ¬éƒ½æ˜¯public</p><p>â‘¡ ç±»ä¸­çš„æˆå‘˜ï¼ˆå­—æ®µï¼Œæ„é€ æ–¹æ³•ï¼Œæ–¹æ³•ï¼‰ä»¥åŠå†…éƒ¨ç±»æ˜¯å¯ä»¥ä½¿ç”¨ä»»ä½•ä¸€ä¸ª</p><p>â‘¢ ç†è®ºä¸Šè®²ï¼Œæˆ‘ä»¬åœ¨ä¸ªæˆå‘˜è®¾ç½®æƒé™çš„ä½¿ç”¨åº”è¯¥æœ‰å°åˆ°å¤§é€æ­¥æ”¾å¼€ï¼ˆå®é™…å¼€å‘ä¸­å¾ˆå¤šæ˜¯ä½¿ç”¨private æˆ–è€…publicï¼‰</p><p>â‘£ è®¿é—®æ–¹å¼å’Œè®¿é—®æƒé™ä¸æ˜¯åŒä¸€ä¸ªä¸œè¥¿</p><p><strong>this</strong></p><p>â‘  this è¡¨ç¤ºå½“å‰å¯¹è±¡(å½“å‰å¯¹è±¡çš„åœ°å€);</p><p>â‘¡ å¦‚ä½•åˆ¤æ–­å½“å‰å¯¹è±¡æ—¶è°? çœ‹thisæ‰€åœ¨çš„æ–¹æ³•æ­£åœ¨è¢«è°è°ƒç”¨;</p><p>â‘¢ ä½¿ç”¨åœºæ™¯-1 : é€šè¿‡thisè®¿é—®å½“å‰å¯¹è±¡ä¸­çš„æˆå‘˜(å­—æ®µ,æ–¹æ³•);</p><p>â‘£ ä½¿ç”¨åœºæ™¯-2 :æœ¬ç±»ä¸­æ„é€ æ–¹æ³•ä¹‹é—´çš„ç›¸äº’è°ƒç”¨;</p><p>this(); è°ƒç”¨æœ¬ç±»ä¸­æ— å‚æ•°çš„æ„é€ æ–¹æ³•;</p><p>this(123); è°ƒç”¨æœ¬ç±»ä¸­å…·æœ‰ä¸€ä¸ªintå‚æ•°çš„æ„é€ æ–¹æ³•;</p><p>å¿…é¡»æ”¾åœ¨æ„é€ å™¨  ä¸­çš„  ç¬¬ä¸€å¥;</p><p>â‘¤ æŠŠthis(å½“å‰å¯¹è±¡)çœ‹æˆæ˜¯ä¸€ä¸ªæ•°æ®, å°±å¯ä»¥ä½œä¸ºå€¼è¿”å›,ä½œä¸ºå‚æ•°ä¼ é€’â€¦</p><p><strong>ä»€ä¹ˆæ˜¯super</strong></p><p>ä½•æ—¶ä¼šç”¨åˆ°super? </p><p>åœ¨å­ç±»ä¸­è®¿é—®çˆ¶ç±»ä¸­çš„æˆå‘˜ï¼ˆå­—æ®µ æ–¹æ³• æ„é€ æ–¹æ³•ï¼‰ã€‚</p><p>â‘ super è¡¨ç¤ºçˆ¶ç±»å¯¹è±¡;</p><p>â‘¡ä½¿ç”¨åœºæ™¯-1 : é€šè¿‡superè®¿é—®çˆ¶ç±»å¯¹è±¡ä¸­çš„æˆå‘˜(éç§æœ‰å­—æ®µå’Œæ–¹æ³•);</p><p>â‘¢ä½¿ç”¨åœºæ™¯-2 :åœ¨å­ç±»çš„æ„é€ æ–¹æ³•é‡Œé¢è®¿é—®çˆ¶ç±»çš„æ„é€ æ–¹æ³•; æœ€å¸¸ç”¨çš„!!!!!!!!!!!!</p><p>super(); è°ƒç”¨çˆ¶ç±»æ— å‚æ•°çš„æ„é€ æ–¹æ³•;</p><p>super(123); è°ƒç”¨çˆ¶ç±»ä¸­å…·æœ‰ä¸€ä¸ªintå‚æ•°çš„æ„é€ æ–¹æ³•;</p><p>å¿…é¡»æ˜¯å­ç±»çš„æ„é€ æ–¹æ³•ä¸­çš„ç¬¬ä¸€å¥;</p><p>â‘£ ä¸Šé¢çš„æ‰€æœ‰è®¿é—®æ–¹å¼éƒ½å¿…é¡»æ˜¯åœ¨æœ‰è®¿é—®æƒé™çš„æ¡ä»¶ä¹‹ä¸‹;</p><p>â‘¤ ä¸€èˆ¬éƒ½ä¼šç»™ä¸€ä¸ªç±»æä¾›ä¸€ä¸ªå…¬å…±çš„æ— å‚æ•°çš„æ„é€ æ–¹æ³•ä¾¿äºæ‹“å±•ï¼ˆç»§æ‰¿ï¼‰</p><p>superç‰¹æ®Šä½¿ç”¨åœºæ™¯ </p><p>åœ¨å­ç±»ä¸­çš„æ„é€ æ–¹æ³•é‡Œé¢å­˜åœ¨é»˜è®¤(éšå¼)çš„è°ƒç”¨çˆ¶ç±»çš„æ— å‚æ•°æ„é€ æ–¹æ³•(é»˜è®¤åªä¼šè°ƒç”¨æ— å‚æ•°çš„æ„é€ æ–¹æ³•);</p><p>å¦‚æœæœ‰æ˜¾ç¤ºè°ƒç”¨çˆ¶ç±»çš„æ„é€ æ–¹æ³•,é‚£ä¹ˆé»˜è®¤è°ƒç”¨å°±ä¸å­˜åœ¨äº†;</p><p>éœ€è¦æµ‹è¯•çš„ç‚¹: </p><p>å­ç±»ä¸­å¤šä¸ªæœ‰å‚æ•°çš„,é»˜è®¤æ˜¯å¦è°ƒç”¨çˆ¶ç±»=æ— å‚æ•°çš„</p><p>çˆ¶ç±»ä¸­æœ‰å¤šä¸ªæ„é€ æ–¹æ³•</p><p>çˆ¶ç±»ä¸­åªæœ‰ä¸€ä¸ªæœ‰å‚æ•°çš„,æ²¡æœ‰æ— å‚æ•°çš„</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-keyword">interface</span>  <span class="hljs-symbol">A</span>&#123;<br>   <span class="hljs-built_in">int</span> x = <span class="hljs-number">0</span>;   <br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-symbol">B</span>&#123;<br>   <span class="hljs-built_in">int</span> x =<span class="hljs-number">1</span>;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-symbol">Test</span> <span class="hljs-symbol">extends</span> <span class="hljs-symbol">B</span> <span class="hljs-symbol">implements</span> <span class="hljs-symbol">A</span> &#123;<br>   <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> pX()&#123;<br>      <span class="hljs-comment">//System.out.println(x);//Error:The field x is ambiguous</span><br>  System.<span class="hljs-keyword">out</span>.println(<span class="hljs-keyword">super</span>.x);<br>  System.<span class="hljs-keyword">out</span>.println(A.x);<br>   &#125;<br>   <span class="hljs-keyword">public</span> static <span class="hljs-built_in">void</span> main(String[] args) &#123;<br>      new Test().pX();<br>   &#125;<br>&#125;<br><span class="hljs-comment">/*</span><br><span class="hljs-comment">æ‰“å°è¾“å‡ºï¼š</span><br><span class="hljs-comment">1</span><br><span class="hljs-comment">0</span><br><span class="hljs-comment">*/</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç»§æ‰¿</tag>
      
      <tag>static</tag>
      
      <tag>è®¿é—®æƒé™ï¼ˆprivateã€é»˜è®¤ã€protectedå’Œpublicï¼‰</tag>
      
      <tag>this</tag>
      
      <tag>super</tag>
      
      <tag>æ–¹æ³•é‡è½½ä¸é‡å†™</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Javaåå°„ä¹‹getInterfaces()æ–¹æ³•</title>
    <link href="/2019/11/05/Java%E5%8F%8D%E5%B0%84%E4%B9%8BgetInterfaces-%E6%96%B9%E6%B3%95/"/>
    <url>/2019/11/05/Java%E5%8F%8D%E5%B0%84%E4%B9%8BgetInterfaces-%E6%96%B9%E6%B3%95/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼:ä»£ç†æ¨¡å¼</title>
    <link href="/2019/11/04/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/"/>
    <url>/2019/11/04/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/</url>
    
    <content type="html"><![CDATA[<h3 id="è®¾è®¡æ¨¡å¼-ä»£ç†æ¨¡å¼"><a href="#è®¾è®¡æ¨¡å¼-ä»£ç†æ¨¡å¼" class="headerlink" title="è®¾è®¡æ¨¡å¼:ä»£ç†æ¨¡å¼"></a>è®¾è®¡æ¨¡å¼:ä»£ç†æ¨¡å¼</h3><p>åˆ†åˆ«ç”¨é™æ€ä»£ç†æ¨¡å¼å’ŒåŠ¨æ€ä»£ç†æ¨¡å¼å®ç°æ¨¡æ‹Ÿè½¦ç«™å”®ç¥¨ï¼Œä»£ç†è½¦ç«™å”®ç¥¨ã€‚</p><p><img src="/2019/11/04/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/dail.png" alt="dail"></p><p>1ã€ä»£ç†æ¨¡å¼ç†è§£</p><ul><li><p>ç°å®ç¤ºä¾‹ç†è§£ï¼šå½“æˆ‘ä»¬éœ€è¦ä¹°ç«è½¦ç¥¨æ—¶ï¼Œå¯ä»¥ç›´æ¥åˆ°ç«è½¦ç«™è´­ä¹°ï¼Œå¯èƒ½ä¸å¤ªä¾¿åˆ©ï¼Œä¹Ÿå¯ä»¥å»æ‰¾é™„è¿‘çš„ç«è½¦ç¥¨ä»£å”®ç‚¹ï¼Œè®©ä»£å”®ç‚¹å¸®æˆ‘ä»¬å»ç«è½¦ç«™è´­ä¹°ã€‚</p></li><li><p>Javaä¸­çš„è§£é‡Šï¼š</p><ul><li>æˆ‘ä»¬åœ¨è°ƒç”¨ä¸€ä¸ªç±»ä¸­çš„æ–¹æ³•æ—¶ï¼Œæ­¤æ—¶ï¼Œå¯èƒ½éœ€è¦å¯¹æ­¤æ–¹æ³•çš„åŠŸèƒ½æœ‰æ‰€æ¨å±•ï¼Œä½†æ˜¯å¹¶ä¸æƒ³æ”¹å˜åŸæœ‰çš„å°è£…ã€‚</li><li>æ­¤æ—¶ï¼Œå°±æ˜¯ä»£ç†ç±»è¿›è¡Œå¯¹æ­¤æ–¹æ³•è¿›è¡ŒåŠŸèƒ½çš„æ‰©å±•ï¼Œä¹‹åç”±ä»£ç†ç±»å»è°ƒç”¨ç›®æ ‡æ–¹æ³•ã€‚</li><li>å¦‚æœä¸éœ€è¦æ‹“å±•åŠŸèƒ½ï¼Œä¸ä½¿ç”¨ä»£ç†ç±»å°±å¯ä»¥äº†ã€‚</li></ul></li><li><p>ä»£ç†æ¨¡å¼æ¶‰åŠåˆ°å››ä¸ªè¦ç´ ï¼š</p><ul><li>è°ƒç”¨è€…ï¼šæ­Œè¿·ã€åˆä½œå•†ç­‰ï¼›</li><li>ä»£ç†å¯¹è±¡ï¼šæ­Œæ˜ŸåŠ©ç†ï¼›</li><li>ç›®æ ‡å¯¹è±¡ï¼ˆè¢«ä»£ç†å¯¹è±¡ï¼‰ï¼šæ­Œæ˜Ÿï¼›</li><li>æŠ½è±¡å¯¹è±¡ï¼šä»£ç†å¯¹è±¡å’Œç›®æ ‡å¯¹è±¡éƒ½å…±æœ‰æ¥å£ï¼Œä¿è¯ä»£ç†å¯¹è±¡å’ŒçœŸå®å¯¹è±¡éƒ½æœ‰ç›¸åº”çš„åŠŸèƒ½ï¼Œå¯¹åº”ä¾‹å­ä¸­æ­Œæ˜Ÿå”±æ­Œå‰å¯èƒ½éœ€è¦å’Œå…¶ä»–äººè°ˆåˆä½œï¼Œè¿˜è¦å¸ƒç½®åœºåœ°ï¼Œå”±æ­Œåè¿˜è¦æ”¶é’±ç­‰ç­‰ç”±åŠ©ç†è´Ÿè´£çš„äº‹æƒ…ã€‚</li></ul></li></ul><p>2ã€é™æ€ä»£ç†å®ç°ï¼š</p><ul><li>åˆ›å»ºæ¥å£Subjectï¼Œæ¥å£ä¸­åˆ›å»ºsell()æ–¹æ³•ï¼›</li><li>åˆ›å»ºè¢«ä»£ç†ç±»Stationï¼Œå®ç°Subjectæ¥å£ï¼Œå®ç°sellæ–¹æ³•ï¼›</li><li>åˆ›å»ºä»£ç†ç±»Proxyï¼Œå®ç°Subjectæ¥å£ï¼Œå±æ€§ä¸ºStationå¯¹è±¡ï¼Œå®ç°sellæ–¹æ³•ï¼›</li><li>åˆ›å»ºè´­ç¥¨è€…ç±»Userï¼Œåˆ›å»ºbuy()æ–¹æ³•ï¼Œè°ƒç”¨Proxyå¯¹è±¡çš„sellæ–¹æ³•å®ç°è´­ç¥¨ã€‚</li></ul><p><img src="/2019/11/04/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/proxy.png" alt="pr"></p><p>3ã€åŠ¨æ€ä»£ç†å®ç°ï¼š</p><ul><li>åˆ›å»ºProsyHandlerä»£ç†å¤„ç†ç±»ï¼Œå®ç°ç”±Javaæä¾›çš„å¯¹åŠ¨æ€ä»£ç†çš„æ”¯æŒçš„InvocationHandleræ¥å£ï¼Œå®ç°invoke()æ–¹æ³•ï¼›ï¼ˆåŠŸèƒ½æ˜¯åœ¨è¢«ä»£ç†ç±»Stationçš„sell()æ–¹æ³•æ‰§è¡Œå‰åæ·»åŠ ä¸€äº›å…¶å®ƒåŠŸèƒ½ï¼‰</li><li>è´­ç¥¨è€…ç±»Userä¸­åˆ›å»ºbuy_dynamic()æ–¹æ³•ï¼š<ul><li>åˆ›å»ºStationå¯¹è±¡station</li><li>åˆ›å»ºProxyHandlerå¯¹è±¡handlerï¼Œè°ƒç”¨æ„é€ æ–¹æ³•æ—¶ä¼ å…¥stationå¯¹è±¡ä½œä¸ºå‚æ•°ï¼›</li><li>è°ƒç”¨<code>Javaæä¾›çš„Proxyç±»çš„é™æ€æ–¹æ³•</code>newProxyInstance()ï¼Œç”Ÿæˆä»£ç†å¯¹è±¡proxy</li><li>è°ƒç”¨proxyçš„sell()æ–¹æ³•å®Œæˆè´­ç¥¨ã€‚</li></ul></li></ul><p>4ã€åŠ¨æ€ä»£ç†çš„ç‰¹ç‚¹ï¼š</p><ul><li>ä»£ç†å¯¹è±¡çš„ç”Ÿæˆæ˜¯åˆ©ç”¨JDKçš„APIï¼ŒåŠ¨æ€çš„åœ¨å†…å­˜ä¸­æ„å»ºä»£ç†å¯¹è±¡ï¼ˆéœ€è¦æˆ‘ä»¬æŒ‡å®šåˆ›å»ºä»£ç†å¯¹è±¡/ç›®æ ‡å¯¹è±¡å®ç°çš„æ¥å£çš„ç±»å‹ï¼‰</li><li>äºæ˜¯ï¼Œè¿™é‡ŒåŸæœ‰çš„æ–¹æ³•åœ¨æ²¡æœ‰æ”¹å˜çš„æƒ…å†µä¸‹ï¼Œå¯¹åŸæ¥çš„æ–¹æ³•è¿›è¡Œäº†äºŒæ¬¡å°è£…ã€‚æœ‰æ—¶å€™å¤šä¸ªå¯¹è±¡è°ƒç”¨åŒä¸€å¯¹è±¡æ—¶ï¼Œæœ‰ç€å…±åŒçš„éœ€æ±‚ï¼Œä½†æ˜¯åœ¨å…±åŒéœ€æ±‚é‡Œåˆæœ‰è‡ªå·±ç‹¬ç‰¹çš„éœ€æ±‚ï¼Œè¿™æ—¶å€™è¿™ä¸€éƒ¨åˆ†ç‹¬ç‰¹çš„éœ€æ±‚è®©ä»£ç†ç±»å»å¤„ç†ã€‚</li></ul><p><img src="/2019/11/04/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/dproxy.png" alt="dp"></p><p>æŠ€æœ¯åˆ†æ</p><p>ä»£ç†æ¨¡å¼å®šä¹‰</p><p>é™æ€ä»£ç†æ¨¡å¼</p><p>åŠ¨æ€ä»£ç†æœºåˆ¶ä»¥åŠä½¿ç”¨åœºæ™¯</p><p>ä»£ç†æ¨¡å¼å®ç°å”®ç¥¨åŠŸèƒ½</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> cn.kongwei_liao.Pattern;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Subject</span> </span>&#123;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sell</span><span class="hljs-params">()</span></span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> cn.kongwei_liao.Pattern;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Station</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Subject</span> </span>&#123;<br><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> tickets=<span class="hljs-number">10</span>;<br><span class="hljs-meta">@Override</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sell</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-comment">// TODO Auto-generated method stub</span><br><span class="hljs-keyword">if</span>(tickets&gt;<span class="hljs-number">0</span>) &#123;<br>tickets--;<br>System.out.println(<span class="hljs-string">&quot;è´­ç¥¨æˆåŠŸï¼Œå‰©ä½™è½¦ç¥¨&quot;</span>+tickets);<br>&#125;<span class="hljs-keyword">else</span> &#123;<br>System.out.println(<span class="hljs-string">&quot;è´­ç¥¨å¤±è´¥&quot;</span>);<br>&#125;<br>&#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> cn.kongwei_liao.Pattern;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyProxy</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Subject</span> </span>&#123;<br><span class="hljs-keyword">private</span> Subject station;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">MyProxy</span><span class="hljs-params">(Subject station)</span> </span>&#123;<br><span class="hljs-keyword">this</span>.station=station;<br>&#125;<br><span class="hljs-meta">@Override</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sell</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-comment">// TODO Auto-generated method stub</span><br>System.out.println(<span class="hljs-string">&quot;é™æ€ä»£ç†&quot;</span>);<br>station.sell();<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> cn.kongwei_liao.Pattern;<br><br><span class="hljs-keyword">import</span> java.lang.reflect.InvocationHandler;<br><span class="hljs-keyword">import</span> java.lang.reflect.Method;<br><br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ProxyHandler</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">InvocationHandler</span> </span>&#123;<br><br><span class="hljs-keyword">private</span> Object subject;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">ProxyHandler</span><span class="hljs-params">(Object subject)</span> </span>&#123;<br><span class="hljs-keyword">this</span>.subject=subject;<br>&#125;<br><span class="hljs-meta">@Override</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">invoke</span><span class="hljs-params">(Object proxy,Method method,Object[] args)</span> <span class="hljs-keyword">throws</span> Throwable </span>&#123;<br><span class="hljs-comment">// TODO Auto-generated method stub</span><br>System.out.println(<span class="hljs-string">&quot;åŠ¨æ€ä»£ç†&quot;</span>);<br>method.invoke(subject, args);<br><span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<br>&#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs awk">package cn.kongwei_liao.Pattern;<br><br>import java.lang.reflect.Proxy;<span class="hljs-regexp">//</span>Javaæä¾›Proxyç±»<br><br>public class User &#123;<br><br><span class="hljs-regexp">//</span>ç›®æ ‡å¯¹è±¡<br>Subject station=new Station();<span class="hljs-regexp">//</span>Subjectæ˜¯Stationå®ç°çš„æ¥å£<br><br>public void buy() &#123;<br><span class="hljs-regexp">//</span>ç›®æ ‡å¯¹è±¡<br><span class="hljs-regexp">//</span>Subject station=new Station();<span class="hljs-regexp">//</span>Subjectæ˜¯Stationå®ç°çš„æ¥å£<br><br><span class="hljs-regexp">//</span>ä»£ç†å¯¹è±¡<br>Subject proxy=new MyProxy(station);<span class="hljs-regexp">//</span>MyProxyä¹Ÿå®ç°äº†Subjectæ¥å£<br><br>proxy.sell();<br>&#125;<br>public void buy_dynamic() &#123;<br><span class="hljs-regexp">//</span>ç›®æ ‡å¯¹è±¡<br><span class="hljs-regexp">//</span>Subject station=new Station();<br><br><span class="hljs-regexp">//</span>ä»£ç†å¤„ç†å™¨å¯¹è±¡<br>ProxyHandler handler=new ProxyHandler(station);<span class="hljs-regexp">//</span>ProxyHandlerå®ç°äº†InvocationHandleræ¥å£çš„invokeæ–¹æ³•<br><br><span class="hljs-regexp">//</span>ä»£ç†å¯¹è±¡ï¼Œä»£ç†Subject stationå¯¹è±¡<br><span class="hljs-regexp">//</span>Object java.lang.reflect.Proxy.newProxyInstance(ClassLoader loader, Class&lt;?&gt;[] interfaces, InvocationHandler h) throws IllegalArgumentException<br><span class="hljs-regexp">//</span>station.getClass()<span class="hljs-regexp">//g</span>etClass() è¿”å›æ­¤ Object çš„è¿è¡Œæ—¶Classç±»å¯¹è±¡<br><span class="hljs-regexp">//</span>station.getClass().getClassLoader()<span class="hljs-regexp">//</span>ClassLoaderä¸»è¦å¯¹ç±»çš„è¯·æ±‚æä¾›æœåŠ¡ï¼Œå½“JVMéœ€è¦æŸç±»æ—¶ï¼Œå®ƒæ ¹æ®åç§°å‘ClassLoaderè¦æ±‚è¿™ä¸ªç±»ï¼Œç„¶åç”±ClassLoaderè¿”å› è¿™ä¸ªç±»çš„classå¯¹è±¡ã€‚<br><span class="hljs-regexp">//</span>station.getClass().getInterfaces()<span class="hljs-regexp">//</span>è·å¾—è¿™ä¸ªå¯¹è±¡æ‰€å®ç°çš„æ¥å£<br>Subject proxy=(Subject)Proxy.newProxyInstance(station.getClass().getClassLoader(),station.getClass().getInterfaces(),handler);<br>proxy.sell();<br>&#125;<br>public static void main(String[] args) &#123;<br>User user=new User();<br>user.buy();<br>user.buy();<br>user.buy_dynamic();<br>&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p><img src="/2019/11/04/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/pattern.png" alt="pattern"></p>]]></content>
    
    
    <categories>
      
      <category>è®¾è®¡æ¨¡å¼</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Java:ç”¨dom4jè§£æRSSæ–‡ä»¶</title>
    <link href="/2019/11/04/Java-%E7%94%A8dom4j%E8%A7%A3%E6%9E%90RSS%E6%96%87%E4%BB%B6/"/>
    <url>/2019/11/04/Java-%E7%94%A8dom4j%E8%A7%A3%E6%9E%90RSS%E6%96%87%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<h3 id="Java-ç”¨dom4jè§£æRSSæ–‡ä»¶"><a href="#Java-ç”¨dom4jè§£æRSSæ–‡ä»¶" class="headerlink" title="Java:ç”¨dom4jè§£æRSSæ–‡ä»¶"></a>Java:ç”¨dom4jè§£æRSSæ–‡ä»¶</h3><p>è¯»å–RSSå­˜å‚¨åœ¨æœ¬æœºçš„ç¬¦åˆRSS2.0æ ‡å‡†æ ¼å¼è¦æ±‚çš„XMLæ–‡ä»¶ï¼Œé€æ¡è§£æRSSæ–‡ä»¶ä¸­æ‰€æœ‰æ–°é—»é¡¹ç›®å¹¶å°†æ–°é—»æ¡ç›®é€æ¡çš„è¾“å‡ºåˆ°æ§åˆ¶å°ã€‚</p><p><img src="/2019/11/04/Java-%E7%94%A8dom4j%E8%A7%A3%E6%9E%90RSS%E6%96%87%E4%BB%B6/example.png" alt="ex"></p><p>1ã€ä¸‹è½½RSSæ–‡ä»¶ï¼šæµè§ˆå™¨è®¿é—®æ–°æµªä½“è‚²<a href="http://rss.sina.com.cn/news/allnews/sports.xml%E4%B8%8B%E8%BD%BD%60(%E4%B8%8B%E8%BD%BD%E5%B7%A5%E5%85%B7%E4%B8%8B%E8%BD%BD%EF%BC%8C%E6%88%96%E6%B5%8F%E8%A7%88%E5%99%A8%E6%9F%A5%E7%9C%8B%E6%BA%90%E4%BB%A3%E7%A0%81%E5%A4%8D%E5%88%B6%E7%B2%98%E8%B4%B4%E4%BF%9D%E5%AD%98)%60RSS%E6%96%87%E4%BB%B6%E5%88%B0%E6%9C%AC%E5%9C%B0%E3%80%82">http://rss.sina.com.cn/news/allnews/sports.xmlä¸‹è½½`(ä¸‹è½½å·¥å…·ä¸‹è½½ï¼Œæˆ–æµè§ˆå™¨æŸ¥çœ‹æºä»£ç å¤åˆ¶ç²˜è´´ä¿å­˜)`RSSæ–‡ä»¶åˆ°æœ¬åœ°ã€‚</a></p><p>2ã€é‡‡ç”¨dom4jè§£æXmlï¼Œè·å–dom4jä¾èµ–åŒ…ï¼Œè®¿é—®<a href="https://dom4j.github.io/%E8%BF%9B%E8%A1%8C%E4%B8%8B%E8%BD%BD%E3%80%82">https://dom4j.github.io/è¿›è¡Œä¸‹è½½ã€‚</a></p><p><img src="/2019/11/04/Java-%E7%94%A8dom4j%E8%A7%A3%E6%9E%90RSS%E6%96%87%E4%BB%B6/dom4jdl.png" alt="dom"></p><p>3ã€åˆ›å»ºå·¥ç¨‹ï¼Œå¯¼å…¥dom4jä¾èµ–åŒ…</p><p><img src="/2019/11/04/Java-%E7%94%A8dom4j%E8%A7%A3%E6%9E%90RSS%E6%96%87%E4%BB%B6/cj.png" alt="cj"></p><p>4ã€åˆ›å»ºç±»ï¼Œåˆ›å»ºæ–¹æ³•ï¼Œç”¨äºå®ç°RSSæ–‡ä»¶è§£æã€‚</p><blockquote><p>ï¼ˆ1ï¼‰ã€è¯»å–XMLæ–‡ä»¶ï¼Œå¾—åˆ°Documentå¯¹è±¡ï¼›</p><p>ï¼ˆ2ï¼‰ã€å¾—åˆ°XMLæ–‡æ¡£çš„æ ¹èŠ‚ç‚¹ï¼›</p><p>ï¼ˆ3ï¼‰ã€è·å¾—æ‰€éœ€å­èŠ‚ç‚¹ï¼›</p><p>ï¼ˆ4ï¼‰ã€è·å¾—ç»“ç‚¹å†…å®¹å¹¶è¾“å‡ºåˆ°æ§åˆ¶å°ã€‚</p></blockquote><h3 id="æŠ€æœ¯åˆ†æï¼š"><a href="#æŠ€æœ¯åˆ†æï¼š" class="headerlink" title="æŠ€æœ¯åˆ†æï¼š"></a>æŠ€æœ¯åˆ†æï¼š</h3><p>1ã€XMLæ ‘ç»“æ„</p><p>2ã€XMLå…ƒç´ å’Œå±æ€§</p><p>3ã€DOM4Jè§£æXML</p><p><img src="/2019/11/04/Java-%E7%94%A8dom4j%E8%A7%A3%E6%9E%90RSS%E6%96%87%E4%BB%B6/XML%E7%BB%93%E6%9E%84.png" alt="dom"></p><p><img src="/2019/11/04/Java-%E7%94%A8dom4j%E8%A7%A3%E6%9E%90RSS%E6%96%87%E4%BB%B6/XML%E7%BB%93%E6%9E%842.png" alt="xm"></p><h3 id="é¡¹ç›®å®Œæˆç»“æ„"><a href="#é¡¹ç›®å®Œæˆç»“æ„" class="headerlink" title="é¡¹ç›®å®Œæˆç»“æ„"></a>é¡¹ç›®å®Œæˆç»“æ„</h3><p><img src="/2019/11/04/Java-%E7%94%A8dom4j%E8%A7%A3%E6%9E%90RSS%E6%96%87%E4%BB%B6/xj.png" alt="xj"></p><p><img src="/2019/11/04/Java-%E7%94%A8dom4j%E8%A7%A3%E6%9E%90RSS%E6%96%87%E4%BB%B6/xj2.png" alt="xj2"></p><p><strong>å®Œæ•´ä»£ç </strong></p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs arduino">package cn.kongwei_liao.cnmb;<br><br><span class="hljs-keyword">import</span> java.io.<span class="hljs-built_in">File</span>;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">import</span> org.dom4j.Document;<br><span class="hljs-keyword">import</span> org.dom4j.DocumentException;<br><span class="hljs-keyword">import</span> org.dom4j.Element;<br><span class="hljs-keyword">import</span> org.dom4j.io.SAXReader;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ParseRss</span> &#123;</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">String</span> filePath=<span class="hljs-string">&quot;NewFile/sports.xml&quot;</span>;<br><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">String</span>[] args)</span> </span>&#123;<br><span class="hljs-comment">// TODO Auto-generated method stub</span><br>ParseRss parseRss=<span class="hljs-keyword">new</span> ParseRss();<br>parseRss.parse();<br><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">parse</span><span class="hljs-params">()</span> </span>&#123;<br>Document doc=null;<br><span class="hljs-keyword">try</span> &#123;<br><span class="hljs-comment">//è·å–Xmlæ–‡ä»¶</span><br><span class="hljs-built_in">File</span> fXml=<span class="hljs-keyword">new</span> <span class="hljs-built_in">File</span>(filePath);<br><span class="hljs-comment">//åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨</span><br><span class="hljs-keyword">if</span>(fXml.<span class="hljs-built_in">exists</span>()&amp;&amp;fXml.isFile()) &#123;<br><span class="hljs-comment">//ä½¿ç”¨Dom4jè§£æå™¨</span><br>SAXReader reader=<span class="hljs-keyword">new</span> SAXReader();<br><span class="hljs-comment">//åŠ è½½XMLæ–‡ä»¶ï¼Œå¾—åˆ°Documentå¯¹è±¡</span><br>doc =reader.<span class="hljs-built_in">read</span>(fXml);<br>&#125;<br>&#125;<span class="hljs-keyword">catch</span>(DocumentException e) &#123;<br>e.printStackTrace();<br>&#125;<br><br>Element root=doc.getRootElement();<br>Element eChannel=root.element(<span class="hljs-string">&quot;channel&quot;</span>);<br>List&lt;Element&gt; itemList=eChannel.elements(<span class="hljs-string">&quot;item&quot;</span>);<br><br><span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>;i&lt;itemList.<span class="hljs-built_in">size</span>();i++) &#123;<br>Element item = itemList.<span class="hljs-built_in">get</span>(i);<br><span class="hljs-comment">//è·å¾—å†…å®¹ç»“ç‚¹</span><br><span class="hljs-keyword">String</span> title=item.elementText(<span class="hljs-string">&quot;title&quot;</span>).trim();<br><span class="hljs-keyword">String</span> author=item.elementText(<span class="hljs-string">&quot;author&quot;</span>).trim();<br><span class="hljs-keyword">String</span> pubDate=item.elementText(<span class="hljs-string">&quot;pubDate&quot;</span>).trim();<br><span class="hljs-keyword">String</span> category=item.elementText(<span class="hljs-string">&quot;category&quot;</span>).trim();<br><span class="hljs-keyword">String</span> description=item.elementText(<span class="hljs-string">&quot;description&quot;</span>).trim();<br><span class="hljs-comment">//è¾“å‡ºåˆ°æ§åˆ¶å°</span><br>System.out.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;News:\næ–°é—»æ ‡é¢˜ï¼š&quot;</span> + title +<br><span class="hljs-string">&quot;\næ–°é—»ä½œè€…ï¼š&quot;</span> + author + <span class="hljs-string">&quot;\næ–°é—»æ¿å—ï¼š&quot;</span> + category + <br><span class="hljs-string">&quot;\nå‘å¸ƒæ—¶é—´ï¼š&quot;</span>+pubDate + <span class="hljs-string">&quot;\næ–°é—»æè¿°ï¼š&quot;</span> + description + <br><span class="hljs-string">&quot;\n-----------&quot;</span>);<br>&#125;<br>&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç‰›å®¢å‰‘æŒ‡offer-æ›¿æ¢ç©ºæ ¼</title>
    <link href="/2019/11/04/%E7%89%9B%E5%AE%A2%E5%89%91%E6%8C%87offer-%E6%9B%BF%E6%8D%A2%E7%A9%BA%E6%A0%BC/"/>
    <url>/2019/11/04/%E7%89%9B%E5%AE%A2%E5%89%91%E6%8C%87offer-%E6%9B%BF%E6%8D%A2%E7%A9%BA%E6%A0%BC/</url>
    
    <content type="html"><![CDATA[<h2 id="æ›¿æ¢ç©ºæ ¼"><a href="#æ›¿æ¢ç©ºæ ¼" class="headerlink" title="æ›¿æ¢ç©ºæ ¼"></a>æ›¿æ¢ç©ºæ ¼</h2><h3 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><p>è¯·å®ç°ä¸€ä¸ªå‡½æ•°ï¼Œå°†ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªç©ºæ ¼æ›¿æ¢æˆâ€œ%20â€ã€‚ä¾‹å¦‚ï¼Œå½“å­—ç¬¦ä¸²ä¸ºWe Are Happy.åˆ™ç»è¿‡æ›¿æ¢ä¹‹åçš„å­—ç¬¦ä¸²ä¸ºWe%20Are%20Happyã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain"><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ç‰›å®¢å‰‘æŒ‡offer-æ•°ç»„</title>
    <link href="/2019/11/04/%E7%89%9B%E5%AE%A2%E5%89%91%E6%8C%87offer-%E6%95%B0%E7%BB%84/"/>
    <url>/2019/11/04/%E7%89%9B%E5%AE%A2%E5%89%91%E6%8C%87offer-%E6%95%B0%E7%BB%84/</url>
    
    <content type="html"><![CDATA[<h3 id="äºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾"><a href="#äºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾" class="headerlink" title="äºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾"></a>äºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾</h3><h4 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a><strong>é¢˜ç›®æè¿°</strong></h4><p>åœ¨ä¸€ä¸ªäºŒç»´æ•°ç»„ä¸­ï¼ˆæ¯ä¸ªä¸€ç»´æ•°ç»„çš„é•¿åº¦ç›¸åŒï¼‰ï¼Œæ¯ä¸€è¡Œéƒ½æŒ‰ç…§ä»å·¦åˆ°å³é€’å¢çš„é¡ºåºæ’åºï¼Œæ¯ä¸€åˆ—éƒ½æŒ‰ç…§ä»ä¸Šåˆ°ä¸‹é€’å¢çš„é¡ºåºæ’åºã€‚è¯·å®Œæˆä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥è¿™æ ·çš„ä¸€ä¸ªäºŒç»´æ•°ç»„å’Œä¸€ä¸ªæ•´æ•°ï¼Œåˆ¤æ–­æ•°ç»„ä¸­æ˜¯å¦å«æœ‰è¯¥æ•´æ•°ã€‚ </p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-comment">//åœ¨ä¸‹é¢ä¸­å¡«å……ä»£ç å†…å®¹ï¼Œå®Œæˆé¢˜ç›®æ±‚è§£</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-symbol">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">bool</span>ean Find(<span class="hljs-built_in">int</span> target, <span class="hljs-built_in">int</span> [][] <span class="hljs-built_in">array</span>) &#123;<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="è§£é¢˜æ€è·¯"><a href="#è§£é¢˜æ€è·¯" class="headerlink" title="è§£é¢˜æ€è·¯"></a><strong>è§£é¢˜æ€è·¯</strong></h4><h5 id="ä¸€ã€æš´åŠ›æ±‚è§£"><a href="#ä¸€ã€æš´åŠ›æ±‚è§£" class="headerlink" title="ä¸€ã€æš´åŠ›æ±‚è§£"></a>ä¸€ã€æš´åŠ›æ±‚è§£</h5><p>1ã€åˆ†æï¼šæŒ¨ä¸ªéå†æ•°ç»„ï¼Œå¦‚æœæ‰¾åˆ°å°±è¿”å›true</p><p>2ã€ä»£ç ï¼š</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-symbol">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">bool</span>ean Find(<span class="hljs-built_in">int</span> target, <span class="hljs-built_in">int</span> [][] <span class="hljs-built_in">array</span>) &#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-built_in">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-built_in">array</span>.length;i++)&#123;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-built_in">int</span> j=<span class="hljs-number">0</span>;j&lt;<span class="hljs-built_in">array</span>[<span class="hljs-number">0</span>].length;j++)&#123;<br>                <span class="hljs-keyword">if</span>(<span class="hljs-built_in">array</span>[i][j] == target)&#123;<br>                    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>3ã€å¤æ‚åº¦ï¼š</p><blockquote><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n^2)  </p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(1)</p></blockquote><h5 id="äºŒã€å·¦ä¸‹-å³ä¸Šå…ƒç´ éå†"><a href="#äºŒã€å·¦ä¸‹-å³ä¸Šå…ƒç´ éå†" class="headerlink" title="äºŒã€å·¦ä¸‹/å³ä¸Šå…ƒç´ éå†"></a>äºŒã€å·¦ä¸‹/å³ä¸Šå…ƒç´ éå†</h5><h6 id="1ã€åˆ†æ"><a href="#1ã€åˆ†æ" class="headerlink" title="1ã€åˆ†æ"></a>1ã€åˆ†æ</h6><ul><li>æ¯ä¸€è¡Œéƒ½æŒ‰ç…§ä»å·¦åˆ°å³é€’å¢çš„é¡ºåºæ’åºï¼Œ </li><li>æ¯ä¸€åˆ—éƒ½æŒ‰ç…§ä»ä¸Šåˆ°ä¸‹é€’å¢çš„é¡ºåºæ’åº </li></ul><p>æ”¹å˜ä¸ªè¯´æ³•ï¼Œå³å¯¹äºå·¦ä¸‹è§’çš„å€¼ mï¼Œm æ˜¯è¯¥è¡Œæœ€å°çš„æ•°ï¼Œæ˜¯è¯¥åˆ—æœ€å¤§çš„æ•°<br>æ¯æ¬¡å°† m å’Œç›®æ ‡å€¼ target æ¯”è¾ƒï¼š</p><ol><li>å½“ m &lt; targetï¼Œç”±äº m å·²ç»æ˜¯è¯¥è¡Œæœ€å¤§çš„å…ƒç´ ï¼Œæƒ³è¦æ›´å¤§åªæœ‰ä»åˆ—è€ƒè™‘ï¼Œå–å€¼å³ç§»ä¸€ä½ </li><li>å½“ m &gt; targetï¼Œç”±äº m å·²ç»æ˜¯è¯¥åˆ—æœ€å°çš„å…ƒç´ ï¼Œæƒ³è¦æ›´å°åªæœ‰ä»è¡Œè€ƒè™‘ï¼Œå–å€¼ä¸Šç§»ä¸€ä½ </li><li>å½“ m = targetï¼Œæ‰¾åˆ°è¯¥å€¼ï¼Œè¿”å› true </li></ol><p>ç”¨æŸè¡Œæœ€å°æˆ–æŸåˆ—æœ€å¤§ä¸ target æ¯”è¾ƒï¼Œæ¯æ¬¡å¯å‰”é™¤ä¸€æ•´è¡Œæˆ–ä¸€æ•´åˆ—</p><h6 id="2ã€ä»£ç "><a href="#2ã€ä»£ç " class="headerlink" title="2ã€ä»£ç "></a>2ã€ä»£ç </h6><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-built_in">public</span> <span class="hljs-keyword">class</span> Solution &#123;<br>    <span class="hljs-built_in">public</span> <span class="hljs-type">boolean</span> Find(<span class="hljs-type">int</span> target, <span class="hljs-type">int</span> [][] <span class="hljs-keyword">array</span>) &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-keyword">rows</span> = <span class="hljs-keyword">array</span>.length;<br>        <span class="hljs-keyword">if</span>(<span class="hljs-keyword">rows</span> == <span class="hljs-number">0</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;<br>        <span class="hljs-type">int</span> cols = <span class="hljs-keyword">array</span>[<span class="hljs-number">0</span>].length;<br>        <span class="hljs-keyword">if</span>(cols == <span class="hljs-number">0</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;<br>            <br>        // å·¦ä¸‹<br>        <span class="hljs-type">int</span> <span class="hljs-keyword">row</span> = <span class="hljs-keyword">rows</span><span class="hljs-number">-1</span>;<br>        <span class="hljs-type">int</span> col = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">while</span>(<span class="hljs-keyword">row</span>&gt;=<span class="hljs-number">0</span> &amp;&amp; col&lt;cols)&#123;<br>            <span class="hljs-keyword">if</span>(<span class="hljs-keyword">array</span>[<span class="hljs-keyword">row</span>][col] &lt; target)&#123;<br>                col++;<br>            &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-keyword">array</span>[<span class="hljs-keyword">row</span>][col] &gt; target)&#123;<br>                <span class="hljs-keyword">row</span><span class="hljs-comment">--;</span><br>            &#125;<span class="hljs-keyword">else</span>&#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h6 id="3ã€å¤æ‚åº¦"><a href="#3ã€å¤æ‚åº¦" class="headerlink" title="3ã€å¤æ‚åº¦"></a>3ã€å¤æ‚åº¦</h6><blockquote><p>æ—¶é—´å¤æ‚åº¦ï¼šO(è¡Œé«˜ + åˆ—å®½)<br>ç©ºé—´å¤æ‚åº¦ï¼šO(1)</p></blockquote><h5 id="ä¸‰ã€Nè¡ŒæŠ˜åŠæŸ¥æ‰¾"><a href="#ä¸‰ã€Nè¡ŒæŠ˜åŠæŸ¥æ‰¾" class="headerlink" title="ä¸‰ã€Nè¡ŒæŠ˜åŠæŸ¥æ‰¾"></a>ä¸‰ã€Nè¡ŒæŠ˜åŠæŸ¥æ‰¾</h5><h6 id="1ã€åˆ†æ-1"><a href="#1ã€åˆ†æ-1" class="headerlink" title="1ã€åˆ†æ"></a>1ã€åˆ†æ</h6><p>ä¹Ÿæ˜¯å¾ˆå®¹æ˜“å°±èƒ½æƒ³åˆ°çš„æ–¹æ³•ï¼Œæ¯ä¸€è¡Œéƒ½æ‰§è¡ŒæŠ˜åŠæŸ¥æ‰¾ï¼ŒæŒç»­Nè¡Œï¼Œå¤æ‚åº¦ä¸ºO(N*logN) </p><h6 id="2ã€ä»£ç -1"><a href="#2ã€ä»£ç -1" class="headerlink" title="2ã€ä»£ç "></a>2ã€ä»£ç </h6><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-symbol">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">bool</span>ean Find(<span class="hljs-built_in">int</span> target, <span class="hljs-built_in">int</span> [][] <span class="hljs-built_in">array</span>) &#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-built_in">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-built_in">array</span>.length;i++)&#123;<span class="hljs-comment">//array.lengthä¸ºæ•°ç»„è¡Œæ•°</span><br>            <span class="hljs-built_in">int</span> low=<span class="hljs-number">0</span>;<br>            <span class="hljs-built_in">int</span> high=<span class="hljs-built_in">array</span>[i].length<span class="hljs-number">-1</span>;<span class="hljs-comment">//array[i].lengthç¬¬iè¡Œå…ƒç´ ä¸ªæ•°</span><br>            <span class="hljs-comment">//low--&gt;high</span><br>            <span class="hljs-keyword">while</span>(low&lt;=high)&#123;<br>                <span class="hljs-built_in">int</span> mid=(low+high)/<span class="hljs-number">2</span>;<span class="hljs-comment">//æ¯è¡Œå…ƒç´ æœ‰åºï¼Œåˆ©ç”¨æŠ˜åŠæŸ¥æ‰¾</span><br>                <span class="hljs-keyword">if</span>(target&gt;<span class="hljs-built_in">array</span>[i][mid])<br>                    low=mid+<span class="hljs-number">1</span>;<br>                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(target&lt;<span class="hljs-built_in">array</span>[i][mid])<br>                    high=mid<span class="hljs-number">-1</span>;<br>                <span class="hljs-keyword">else</span><br>                    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h6 id="3ã€å¤æ‚åº¦-1"><a href="#3ã€å¤æ‚åº¦-1" class="headerlink" title="3ã€å¤æ‚åº¦"></a>3ã€å¤æ‚åº¦</h6><blockquote><p> O(N*logN) </p></blockquote><h5 id="å››ã€åå­—åˆ†å‰²æ³•"><a href="#å››ã€åå­—åˆ†å‰²æ³•" class="headerlink" title="å››ã€åå­—åˆ†å‰²æ³•"></a>å››ã€åå­—åˆ†å‰²æ³•</h5><p>ï¼ˆ1ï¼‰ã€ç®€å•çš„åå­—åˆ†å‰²æ³•</p><p>äº²æµ‹å¯ç”¨ï¼Œä½¿ç”¨åå­—å°†æ•°ç»„ç­‰åˆ†ä¸ºå››ä¸ªåŒºåŸŸï¼Œä¸­é—´äº¤å‰ç‚¹ç”¨æ¥åˆ¤æ–­ï¼Œå› ä¸ºå·¦ä¸ŠåŒºåŸŸå’Œå³ä¸‹åŒºåŸŸå¿…ç„¶å†²çªï¼Œæ‰€ä»¥äºŒè€…å¿…ç„¶å¯ä»¥æ’é™¤ä¸€ä¸ªï¼Œå³æ¯æ¬¡è‡³å°‘å¯ä»¥æ’é™¤1/4çš„æ•°æ®ï¼Œæ¥ç€å¯¹å‰©ä¸‹çš„ä¸‰ä¸ªåŒºåŸŸè¿›è¡Œé€’å½’æ“ä½œï¼Œå½“ç„¶å¯ä»¥åˆ©ç”¨å·¦ä¸Šå³ä¸‹å…ƒç´ æ¥åˆ¤æ–­æ˜¯å¦è½åœ¨åŒºåŸŸå†…æ¥è¿›è¡Œä¼˜åŒ–ï¼Œç›´åˆ°åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œé€’å½’å±‚æ•°ä¸ºï¼šlogNï¼Œä¸ä¼˜åŒ–çš„è¯æœ€åº•å±‚èŠ‚ç‚¹æ•°ä¸º3^logNï¼Œä¼˜åŒ–åèŠ‚ç‚¹æ•°ä¼šå°‘å¾ˆå¤šï¼Œå®æµ‹æ•ˆç‡è¿˜ç®—ä¸é”™ </p><p>ï¼ˆ2ï¼‰ã€å¦ä¸€ç‰ˆæœ¬çš„åå­—åˆ†å‰²æ³•</p><p>ä¸ä¸Šä¸€ä¸ªç±»ä¼¼ï¼Œåªä¸è¿‡è¿™é‡Œå…ˆåˆ©ç”¨åå­—åˆ†å‰²åœ¨ä¸»å¯¹è§’çº¿æ–¹å‘ä¸Šè¿›è¡ŒæŠ˜åŠæŸ¥æ‰¾æ“ä½œï¼Œæ“ä½œç»“æŸåï¼Œç»ˆæ­¢ç‚¹çš„å·¦ä¸ŠåŒºåŸŸä¸å³ä¸‹åŒºåŸŸéƒ½å¯ä»¥æ’é™¤ï¼Œè¿™æ ·å°±åªå‰©ä¸‹å·¦ä¸‹ã€å³ä¸Šä¸¤ä¸ªåŒºåŸŸï¼Œç„¶åå†è¿›è¡Œé€’å½’ã€‚æ„Ÿè§‰ä¸Šæ•ˆç‡ä¼šæ¯”ä¸Šä¸ªç‰ˆæœ¬å¥½ï¼Œä¸è¿‡è¿™ä¸ªæˆ‘æ²¡æœ‰å»å®ç°éªŒè¯</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-comment">//C++å®ç°   ç®€å•çš„åå­—åˆ†å‰²æ³•</span><br><span class="hljs-keyword">class</span> Solution &#123;<br>public:<br>    <span class="hljs-built_in">bool</span> <span class="hljs-constructor">Find(<span class="hljs-params">int</span> <span class="hljs-params">target</span>, <span class="hljs-params">vector</span>&lt;<span class="hljs-params">vector</span>&lt;<span class="hljs-params">int</span>&gt; &gt; <span class="hljs-params">array</span>)</span> &#123;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">array</span>.size<span class="hljs-literal">()</span>==<span class="hljs-number">0</span><span class="hljs-operator"> || </span><span class="hljs-built_in">array</span><span class="hljs-literal">[<span class="hljs-number">0</span>]</span>.size<span class="hljs-literal">()</span>==<span class="hljs-number">0</span>)<br>            return <span class="hljs-literal">false</span>;<br>        <span class="hljs-keyword">else</span> &#123;<br>            return find<span class="hljs-constructor">_by_ten_shape_divide(<span class="hljs-params">array</span>, <span class="hljs-params">target</span>, 0, 0, <span class="hljs-params">array</span>[0].<span class="hljs-params">size</span>()</span>-<span class="hljs-number">1</span>, <span class="hljs-built_in">array</span>.size<span class="hljs-literal">()</span>-<span class="hljs-number">1</span>);<br>        &#125;<br>    &#125;<br> <br>    <span class="hljs-built_in">bool</span> find<span class="hljs-constructor">_by_ten_shape_divide(<span class="hljs-params">vector</span>&lt;<span class="hljs-params">vector</span>&lt;<span class="hljs-params">int</span>&gt; &gt; &amp;<span class="hljs-params">datas</span>, <span class="hljs-params">int</span> <span class="hljs-params">target</span>, <span class="hljs-params">int</span> <span class="hljs-params">left</span>, <span class="hljs-params">int</span> <span class="hljs-params">top</span>, <span class="hljs-params">int</span> <span class="hljs-params">right</span>, <span class="hljs-params">int</span> <span class="hljs-params">bottom</span>)</span> &#123;<br>        <span class="hljs-comment">// é€’å½’ç»ˆæ­¢çš„æ¡ä»¶ï¼šå½“åŒºåŸŸè¢«åˆ†å‰²ä¸ºåªæœ‰ä¸€ä¸ªå…ƒç´ </span><br>        <span class="hljs-keyword">if</span> (left==right<span class="hljs-operator"> &amp;&amp; </span>top==bottom) &#123;<br>            <span class="hljs-keyword">if</span> (datas<span class="hljs-literal">[<span class="hljs-identifier">top</span>]</span><span class="hljs-literal">[<span class="hljs-identifier">left</span>]</span><span class="hljs-operator"> == </span>target)<br>                return <span class="hljs-literal">true</span>;<br>            <span class="hljs-keyword">else</span> return <span class="hljs-literal">false</span>;<br>        &#125;<br>        <span class="hljs-comment">// åˆ©ç”¨å¤´å°¾æ•°æ®è¿›è¡Œä¼˜åŒ–ï¼šä¸åœ¨åŒºåŸŸå†…çš„ç›´æ¥falseï¼Œå¯ä»¥å‡å°‘é€’å½’èŠ‚ç‚¹æ•°é‡</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (datas<span class="hljs-literal">[<span class="hljs-identifier">top</span>]</span><span class="hljs-literal">[<span class="hljs-identifier">left</span>]</span>&gt;target<span class="hljs-operator"> || </span>datas<span class="hljs-literal">[<span class="hljs-identifier">bottom</span>]</span><span class="hljs-literal">[<span class="hljs-identifier">right</span>]</span>&lt;target)<br>            return <span class="hljs-literal">false</span>;<br>        <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-comment">// æ°´å¹³ã€ç«–ç›´æ–¹å‘å„è‡ªç­‰åˆ†</span><br>            <span class="hljs-built_in">int</span> cHoriz = (left + right)<span class="hljs-operator"> / </span><span class="hljs-number">2</span>;<br>            <span class="hljs-built_in">int</span> cVertic = (top + bottom)<span class="hljs-operator"> / </span><span class="hljs-number">2</span>;<br> <br>            <span class="hljs-keyword">if</span> (datas<span class="hljs-literal">[<span class="hljs-identifier">cVertic</span>]</span><span class="hljs-literal">[<span class="hljs-identifier">cHoriz</span>]</span><span class="hljs-operator"> == </span>target)<br>                return <span class="hljs-literal">true</span>;<br>            <span class="hljs-keyword">else</span> &#123;<br>                <span class="hljs-comment">// ç›®æ ‡å¤§äºåˆ†å‰²ç‚¹åˆ™æ’é™¤å·¦ä¸ŠåŒºåŸŸï¼Œå¯¹å³ä¸‹è¿›è¡Œé€’å½’</span><br>                <span class="hljs-keyword">if</span> (datas<span class="hljs-literal">[<span class="hljs-identifier">cVertic</span>]</span><span class="hljs-literal">[<span class="hljs-identifier">cHoriz</span>]</span> &lt; target) &#123;<br>                    <span class="hljs-keyword">if</span> (cHoriz&lt;right<span class="hljs-operator"> &amp;&amp; </span>cVertic&lt;bottom &amp;&amp;<br>                        find<span class="hljs-constructor">_by_ten_shape_divide(<span class="hljs-params">datas</span>, <span class="hljs-params">target</span>, <span class="hljs-params">cHoriz</span>+1, <span class="hljs-params">cVertic</span>+1, <span class="hljs-params">right</span>, <span class="hljs-params">bottom</span>)</span>)<br>                        return <span class="hljs-literal">true</span>;<br>                &#125;<br>                <span class="hljs-comment">// å¦åˆ™æ’é™¤å³ä¸‹åŒºåŸŸï¼Œå¯¹å·¦ä¸Šè¿›è¡Œé€’å½’</span><br>                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ((left&lt;cHoriz<span class="hljs-operator"> || </span>top&lt;cVertic) &amp;&amp;<br>                         find<span class="hljs-constructor">_by_ten_shape_divide(<span class="hljs-params">datas</span>, <span class="hljs-params">target</span>, <span class="hljs-params">left</span>, <span class="hljs-params">top</span>, <span class="hljs-params">cHoriz</span>, <span class="hljs-params">cVertic</span>)</span>)<br>                    return <span class="hljs-literal">true</span>;<br>                <span class="hljs-comment">// å¯¹å³ä¸ŠåŒºåŸŸè¿›è¡Œé€’å½’</span><br>                <span class="hljs-keyword">if</span> (cHoriz &lt; right &amp;&amp;<br>                    find<span class="hljs-constructor">_by_ten_shape_divide(<span class="hljs-params">datas</span>, <span class="hljs-params">target</span>, <span class="hljs-params">cHoriz</span>+1, <span class="hljs-params">top</span>, <span class="hljs-params">right</span>, <span class="hljs-params">cVertic</span>)</span>)<br>                    return <span class="hljs-literal">true</span>;<br>                <span class="hljs-comment">// å¯¹å·¦ä¸‹åŒºåŸŸè¿›è¡Œé€’å½’</span><br>                <span class="hljs-keyword">if</span> (cVertic &lt; bottom &amp;&amp;<br>                    find<span class="hljs-constructor">_by_ten_shape_divide(<span class="hljs-params">datas</span>, <span class="hljs-params">target</span>, <span class="hljs-params">left</span>, <span class="hljs-params">cVertic</span>+1, <span class="hljs-params">cHoriz</span>, <span class="hljs-params">bottom</span>)</span>)<br>                    return <span class="hljs-literal">true</span>;<br>                return <span class="hljs-literal">false</span>;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰‘æŒ‡offer</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Javaåå°„ç”ŸæˆHTML</title>
    <link href="/2019/11/04/Java%E5%8F%8D%E5%B0%84%E7%94%9F%E6%88%90HTML/"/>
    <url>/2019/11/04/Java%E5%8F%8D%E5%B0%84%E7%94%9F%E6%88%90HTML/</url>
    
    <content type="html"><![CDATA[<h3 id="Javaåå°„ç”ŸæˆHTMLæ–‡ä»¶"><a href="#Javaåå°„ç”ŸæˆHTMLæ–‡ä»¶" class="headerlink" title="Javaåå°„ç”ŸæˆHTMLæ–‡ä»¶"></a>Javaåå°„ç”ŸæˆHTMLæ–‡ä»¶</h3><h4 id="1ã€åˆ†æ"><a href="#1ã€åˆ†æ" class="headerlink" title="1ã€åˆ†æ"></a>1ã€åˆ†æ</h4><p><img src="/2019/11/04/Java%E5%8F%8D%E5%B0%84%E7%94%9F%E6%88%90HTML/xq.png" alt="xq"></p><p><img src="/2019/11/04/Java%E5%8F%8D%E5%B0%84%E7%94%9F%E6%88%90HTML/xq2.png" alt="xq2"></p><p><img src="/2019/11/04/Java%E5%8F%8D%E5%B0%84%E7%94%9F%E6%88%90HTML/xq3.png" alt="xq3"></p><p><img src="/2019/11/04/Java%E5%8F%8D%E5%B0%84%E7%94%9F%E6%88%90HTML/xq4.png" alt="xq4"></p><p><img src="/2019/11/04/Java%E5%8F%8D%E5%B0%84%E7%94%9F%E6%88%90HTML/xq5.png" alt="xq5"></p><h4 id="2ã€è®¾è®¡æ€è·¯"><a href="#2ã€è®¾è®¡æ€è·¯" class="headerlink" title="2ã€è®¾è®¡æ€è·¯"></a>2ã€è®¾è®¡æ€è·¯</h4><p><img src="/2019/11/04/Java%E5%8F%8D%E5%B0%84%E7%94%9F%E6%88%90HTML/sjsl.png" alt="sjsl"></p><p><img src="/2019/11/04/Java%E5%8F%8D%E5%B0%84%E7%94%9F%E6%88%90HTML/sjsl2.png" alt="sjsl2"></p><p><img src="/2019/11/04/Java%E5%8F%8D%E5%B0%84%E7%94%9F%E6%88%90HTML/sjsl3.png" alt="sjsl3"></p><h4 id="3ã€æŠ€æœ¯åˆ†æ"><a href="#3ã€æŠ€æœ¯åˆ†æ" class="headerlink" title="3ã€æŠ€æœ¯åˆ†æ"></a>3ã€æŠ€æœ¯åˆ†æ</h4><p><img src="/2019/11/04/Java%E5%8F%8D%E5%B0%84%E7%94%9F%E6%88%90HTML/jsfx.png" alt="jsfx"></p><h4 id="4ã€å®ç°æ­¥éª¤"><a href="#4ã€å®ç°æ­¥éª¤" class="headerlink" title="4ã€å®ç°æ­¥éª¤"></a>4ã€å®ç°æ­¥éª¤</h4><p><img src="/2019/11/04/Java%E5%8F%8D%E5%B0%84%E7%94%9F%E6%88%90HTML/sx.png" alt="sx"></p><p><img src="/2019/11/04/Java%E5%8F%8D%E5%B0%84%E7%94%9F%E6%88%90HTML/sx2.png"></p><p><img src="/2019/11/04/Java%E5%8F%8D%E5%B0%84%E7%94%9F%E6%88%90HTML/sx3.png" alt="sx3"></p><p><img src="/2019/11/04/Java%E5%8F%8D%E5%B0%84%E7%94%9F%E6%88%90HTML/sx4.png" alt="sx4"></p><p><img src="/2019/11/04/Java%E5%8F%8D%E5%B0%84%E7%94%9F%E6%88%90HTML/sx5.png" alt="sx5"></p><p><img src="/2019/11/04/Java%E5%8F%8D%E5%B0%84%E7%94%9F%E6%88%90HTML/sx6.png" alt="sx6"></p><p><img src="/2019/11/04/Java%E5%8F%8D%E5%B0%84%E7%94%9F%E6%88%90HTML/sx7.png" alt="sx7"></p><p><img src="/2019/11/04/Java%E5%8F%8D%E5%B0%84%E7%94%9F%E6%88%90HTML/sx8.png" alt="sx8"></p><p><img src="/2019/11/04/Java%E5%8F%8D%E5%B0%84%E7%94%9F%E6%88%90HTML/sx9.png" alt="sx9"></p><p><img src="/2019/11/04/Java%E5%8F%8D%E5%B0%84%E7%94%9F%E6%88%90HTML/sx10.png" alt="sx10"></p><p><img src="/2019/11/04/Java%E5%8F%8D%E5%B0%84%E7%94%9F%E6%88%90HTML/sx11.png" alt="sx11"></p><p><img src="/2019/11/04/Java%E5%8F%8D%E5%B0%84%E7%94%9F%E6%88%90HTML/sx12.png" alt="sx12"></p><h3 id="åŒ…package-cn-kongwei-liao-cnmb-ä¸‹åˆ›å»ºPersonç±»"><a href="#åŒ…package-cn-kongwei-liao-cnmb-ä¸‹åˆ›å»ºPersonç±»" class="headerlink" title="åŒ…package cn.kongwei_liao.cnmb;ä¸‹åˆ›å»ºPersonç±»"></a>åŒ…package cn.kongwei_liao.cnmb;ä¸‹åˆ›å»ºPersonç±»</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs typescript">package cn.kongwei_liao.cnmb;<br><br><span class="hljs-keyword">import</span> java.text.SimpleDateFormat;<br><span class="hljs-keyword">import</span> java.util.Calendar;<br><span class="hljs-keyword">import</span> java.util.Date;<br><span class="hljs-keyword">import</span> com.annotation.html.*;<br><br><span class="hljs-meta">@HtmlPage</span>(value=<span class="hljs-string">&quot;person.html&quot;</span>,title=<span class="hljs-string">&quot;ä¸ªäººä¿¡æ¯&quot;</span>)<br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span> </span>&#123;<br><br><span class="hljs-meta">@HtmlField</span>(label=<span class="hljs-string">&quot;å§“å&quot;</span>)<br><span class="hljs-keyword">private</span> <span class="hljs-built_in">String</span> name;<br><br><span class="hljs-meta">@HtmlField</span>(label=<span class="hljs-string">&quot;æ‰‹æœº&quot;</span>)<br><span class="hljs-keyword">private</span> <span class="hljs-built_in">String</span> mobiles;<br><br><span class="hljs-meta">@HtmlField</span>(label=<span class="hljs-string">&quot;å¹´é¾„&quot;</span>)<br><span class="hljs-keyword">private</span> int age;<br><br><span class="hljs-meta">@HtmlField</span>(label=<span class="hljs-string">&quot;å‡ºç”Ÿå¹´æœˆ&quot;</span>,format=<span class="hljs-string">&quot;formatBirth&quot;</span>)<br><span class="hljs-keyword">private</span> <span class="hljs-built_in">Date</span> birth;<br><br><span class="hljs-keyword">public</span> <span class="hljs-built_in">String</span> <span class="hljs-function"><span class="hljs-title">getName</span>(<span class="hljs-params"></span>)</span> &#123;<br><span class="hljs-keyword">return</span> name;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">setName</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> name</span>)</span> &#123;<br><span class="hljs-built_in">this</span>.name = name;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-built_in">String</span> <span class="hljs-function"><span class="hljs-title">getMobiles</span>(<span class="hljs-params"></span>)</span> &#123;<br><span class="hljs-keyword">return</span> mobiles;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">setMobiles</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> mobiles</span>)</span> &#123;<br><span class="hljs-built_in">this</span>.mobiles = mobiles;<br>&#125;<br><span class="hljs-keyword">public</span> int <span class="hljs-function"><span class="hljs-title">getAge</span>(<span class="hljs-params"></span>)</span> &#123;<br><span class="hljs-keyword">return</span> age;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">setAge</span>(<span class="hljs-params">int age</span>)</span> &#123;<br><span class="hljs-built_in">this</span>.age = age;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-built_in">Date</span> <span class="hljs-function"><span class="hljs-title">getBirth</span>(<span class="hljs-params"></span>)</span> &#123;<br><span class="hljs-keyword">return</span> birth;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">setBirth</span>(<span class="hljs-params"><span class="hljs-built_in">Date</span> birth</span>)</span> &#123;<br><span class="hljs-built_in">this</span>.birth = birth;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-built_in">String</span> <span class="hljs-function"><span class="hljs-title">formatBirth</span>(<span class="hljs-params"></span>)</span> &#123;<br>SimpleDateFormat sdf=<span class="hljs-keyword">new</span> SimpleDateFormat(<span class="hljs-string">&quot;yå¹´Mæœˆdæ—¥&quot;</span>);<br><span class="hljs-keyword">return</span> sdf.format(<span class="hljs-built_in">this</span>.birth);<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">setBirth</span>(<span class="hljs-params">int y,int m,int d</span>)</span> &#123;<br>Calendar calendar=Calendar.getInstance();<br>calendar.set(y, m-<span class="hljs-number">1</span>, d);<br><span class="hljs-built_in">this</span>.birth=calendar.getTime();<br>&#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="åŒ…package-com-annotation-html-ä¸‹åˆ›å»ºHtmlPageæ³¨è§£ç±»å’ŒHtmlFieldæ³¨è§£ç±»"><a href="#åŒ…package-com-annotation-html-ä¸‹åˆ›å»ºHtmlPageæ³¨è§£ç±»å’ŒHtmlFieldæ³¨è§£ç±»" class="headerlink" title="åŒ…package com.annotation.html;ä¸‹åˆ›å»ºHtmlPageæ³¨è§£ç±»å’ŒHtmlFieldæ³¨è§£ç±»"></a>åŒ…package com.annotation.html;ä¸‹åˆ›å»ºHtmlPageæ³¨è§£ç±»å’ŒHtmlFieldæ³¨è§£ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/*</span><br><span class="hljs-comment"> * è®¾è®¡æ€è·¯ï¼š</span><br><span class="hljs-comment"> * 1ã€é€šè¿‡è‡ªå®šä¹‰æ³¨è§£ç±»ï¼Œæ ‡æ³¨å‡ºé¡µé¢çš„åç§°ï¼Œç¼–ç è§„èŒƒï¼Œä»¥åŠé‚£äº›å­—æ®µéœ€è¦ç”¨æ¥æ˜¾ç¤ºï¼Œæ¯ä¸€ä¸ªå­—æ®µçš„åç§°å’Œå€¼</span><br><span class="hljs-comment"> * 2ã€é€šè¿‡Javaä¸­çš„åå°„æœºåˆ¶ï¼Œæ¥åŠ¨æ€è·å¾—ç±»ä¸­çš„æ³¨è§£ç±»å¯¹è±¡</span><br><span class="hljs-comment"> * 3ã€é€šè¿‡è¯»å–æ³¨è§£ç±»å¯¹è±¡ä¸­çš„å±æ€§å€¼ä½œä¸ºç”ŸæˆHTMLæ–‡ä»¶çš„å‚æ•°</span><br><span class="hljs-comment"> */</span><br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment"> * è‡ªå®šä¹‰æ³¨è§£ç±»</span><br><span class="hljs-comment"> * æ³¨è§£é¡µé¢ä¿¡æ¯</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">package</span> com.annotation.html;<br><br><span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> java.lang.annotation.ElementType.TYPE;<br><span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> java.lang.annotation.RetentionPolicy.RUNTIME;<br><br><span class="hljs-keyword">import</span> java.lang.annotation.Documented;<br><span class="hljs-keyword">import</span> java.lang.annotation.Retention;<br><span class="hljs-keyword">import</span> java.lang.annotation.Target;<br><br><span class="hljs-meta">@Documented</span><br><span class="hljs-meta">@Retention(RUNTIME)</span><br><span class="hljs-meta">@Target(TYPE)</span><br><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> HtmlPage &#123;<br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">value</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> &quot;&quot;</span>;<br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">lang</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> &quot;zh&quot;</span>;<br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">charset</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> &quot;utf-8&quot;</span>;<br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">title</span><span class="hljs-params">()</span></span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/*</span><br><span class="hljs-comment"> * è®¾è®¡æ€è·¯ï¼š</span><br><span class="hljs-comment"> * 1ã€é€šè¿‡è‡ªå®šä¹‰æ³¨è§£ç±»ï¼Œæ ‡æ³¨å‡ºé¡µé¢çš„åç§°ï¼Œç¼–ç è§„èŒƒï¼Œä»¥åŠé‚£äº›å­—æ®µéœ€è¦ç”¨æ¥æ˜¾ç¤ºï¼Œæ¯ä¸€ä¸ªå­—æ®µçš„åç§°å’Œå€¼</span><br><span class="hljs-comment"> * 2ã€é€šè¿‡Javaä¸­çš„åå°„æœºåˆ¶ï¼Œæ¥åŠ¨æ€è·å¾—ç±»ä¸­çš„æ³¨è§£ç±»å¯¹è±¡</span><br><span class="hljs-comment"> * 3ã€é€šè¿‡è¯»å–æ³¨è§£ç±»å¯¹è±¡ä¸­çš„å±æ€§å€¼ä½œä¸ºç”ŸæˆHTMLæ–‡ä»¶çš„å‚æ•°</span><br><span class="hljs-comment"> */</span><br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment"> * è‡ªå®šä¹‰æ³¨è§£ç±»</span><br><span class="hljs-comment"> * æ³¨è§£ç±»ä¸­å“ªäº›å­—æ®µåœ¨é¡µé¢æ˜¾ç¤º</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">package</span> com.annotation.html;<br><br><span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> java.lang.annotation.RetentionPolicy.RUNTIME;<br><br><span class="hljs-keyword">import</span> java.lang.annotation.Documented;<br><span class="hljs-keyword">import</span> java.lang.annotation.ElementType;<br><span class="hljs-keyword">import</span> java.lang.annotation.Inherited;<br><span class="hljs-keyword">import</span> java.lang.annotation.Retention;<br><span class="hljs-keyword">import</span> java.lang.annotation.Target;<br><br><span class="hljs-meta">@Documented</span><br><span class="hljs-meta">@Retention(RUNTIME)</span><br><span class="hljs-meta">@Target(&#123;ElementType.FIELD,ElementType.METHOD&#125;)</span><br><span class="hljs-meta">@Inherited</span><br><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> HtmlField &#123;<br><span class="hljs-comment">//public String value() default &quot;&quot;;</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">label</span><span class="hljs-params">()</span></span>;<br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">format</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> &quot;&quot;</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="åŒ…package-com-annotation-html-ä¸‹åˆ›å»ºHtmlGeneratorç±»ç”¨äºè§£ææ³¨è§£ï¼Œç”Ÿæˆhtmlé¡µé¢"><a href="#åŒ…package-com-annotation-html-ä¸‹åˆ›å»ºHtmlGeneratorç±»ç”¨äºè§£ææ³¨è§£ï¼Œç”Ÿæˆhtmlé¡µé¢" class="headerlink" title="åŒ…package com.annotation.html;ä¸‹åˆ›å»ºHtmlGeneratorç±»ç”¨äºè§£ææ³¨è§£ï¼Œç”Ÿæˆhtmlé¡µé¢"></a>åŒ…package com.annotation.html;ä¸‹åˆ›å»ºHtmlGeneratorç±»ç”¨äºè§£ææ³¨è§£ï¼Œç”Ÿæˆhtmlé¡µé¢</h3><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-comment">/*</span><br><span class="hljs-comment"> * ç”¨æ¥è¯»å–å®ä½“ç±»å¯¹è±¡ä¸­çš„æ³¨è§£ä¿¡æ¯ï¼Œç”ŸæˆHTML</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">package</span> com.annotation.html;<br><br><span class="hljs-keyword">import</span> java.io.BufferedWriter;<br><span class="hljs-keyword">import</span> java.io.<span class="hljs-keyword">File</span>;<br><span class="hljs-keyword">import</span> java.io.FileWriter;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.lang.annotation.Annotation;<br><span class="hljs-keyword">import</span> java.lang.reflect.Field;<br><span class="hljs-keyword">import</span> java.lang.reflect.InvocationTargetException;<br><span class="hljs-keyword">import</span> java.lang.reflect.Method;<br><br><span class="hljs-keyword">import</span> cn.kongwei_liao.cnmb.Person;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> HtmlGenerator &#123;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> createDetailPage(Object obj)&#123;<br><span class="hljs-comment">//1ã€å¾—åˆ°å¯¹è±¡çš„ç±»å‹å¯¹è±¡</span><br><span class="hljs-keyword">Class</span>&lt;?&gt; clz=obj.getClass();<span class="hljs-comment">//åå°„APIï¼Œè·å¾—å¯¹è±¡ç±»å‹</span><br><span class="hljs-comment">//è·å–å®ä¾‹å¯¹è±¡å¯¹åº”çš„Classå¯¹è±¡  æœ‰ä¸‰ç§æ–¹æ³•</span><br><span class="hljs-comment">//Class&lt;?&gt; clz1=null;//é€šè¿‡ç±»Classçš„é™æ€æ–¹æ³•forName()</span><br><span class="hljs-comment">//try &#123;</span><br><span class="hljs-comment">//clz1=Class.forName(&quot;cn.kongwei_liao.cnmb.Person&quot;);</span><br><span class="hljs-comment">//&#125; catch (ClassNotFoundException e1) &#123;</span><br><span class="hljs-comment">//// TODO Auto-generated catch block</span><br><span class="hljs-comment">//e1.printStackTrace();</span><br><span class="hljs-comment">//&#125;</span><br><br><span class="hljs-comment">//Class&lt;?&gt; clz2=Person.class;//ç›´æ¥ç»™å‡ºå¯¹è±¡ç±»æ–‡ä»¶å</span><br>assert(clz!=<span class="hljs-keyword">null</span>);<br><br><span class="hljs-comment">//2ã€é€šè¿‡ç±»å‹å¾—åˆ°å½“å‰ç±»ä¸­çš„HtmlPageæ³¨è§£ç±»</span><br>HtmlPage htmlPage=clz.getAnnotation(HtmlPage.<span class="hljs-keyword">class</span>);<span class="hljs-comment">//åå°„APIï¼Œè·å¾—æ³¨è§£å¯¹è±¡ï¼Œè·å–æŸä¸ªç±»å‹çš„æ³¨è§£</span><br><span class="hljs-comment">//Annotation[] htmlPages=clz.getDeclaredAnnotations();//è·å–å£°æ˜çš„æ³¨è§£ï¼ˆä¸åŒ…æ‹¬çˆ¶ç±»ä¸­è¢«Inheritedä¿®é¥°çš„æ³¨è§£ï¼‰</span><br>assert(htmlPage!=<span class="hljs-keyword">null</span>);<br><span class="hljs-comment">//è¯»å–HtmlPageå¯¹è±¡ä¸­çš„å±æ€§</span><br><span class="hljs-comment">//System.out.println(htmlPage.value());</span><br><br><span class="hljs-comment">//3ã€è¯»å–htmlPageä¸­çš„valueå±æ€§ï¼Œåˆ›å»ºhtmlæ–‡ä»¶</span><br><span class="hljs-keyword">File</span> page =<span class="hljs-keyword">new</span> <span class="hljs-keyword">File</span>(htmlPage.value());<br><span class="hljs-keyword">if</span>(!page.exists()) &#123;<br><span class="hljs-comment">//System.out.println(1);</span><br><span class="hljs-keyword">try</span> &#123;<br><span class="hljs-comment">//System.out.println(2);</span><br>assert(page.createNewFile()==<span class="hljs-keyword">true</span>);<br><span class="hljs-comment">//System.out.println(3);</span><br>&#125;<span class="hljs-keyword">catch</span>(IOException e) &#123;<br><span class="hljs-comment">//System.out.println(4);</span><br>e.printStackTrace();<br><span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;<br>&#125;<br>&#125;<br><br><span class="hljs-comment">//4ã€åˆ›å»ºæ–‡ä»¶BufferWriterå¯¹è±¡</span><br>BufferedWriter writer=<span class="hljs-keyword">null</span>;<br><span class="hljs-keyword">try</span> &#123;<br><br><span class="hljs-comment">//5ã€å‘æ–‡ä»¶ä¸­å†™htmlæ ‡ç­¾</span><br>writer=<span class="hljs-keyword">new</span> BufferedWriter(<span class="hljs-keyword">new</span> FileWriter(page));<br>writer.<span class="hljs-keyword">write</span>(<span class="hljs-string">&quot;&lt;!DOCTYPE html&gt;\n&quot;</span>);<br>writer.<span class="hljs-keyword">write</span>(String.format(<span class="hljs-string">&quot;&lt;html lang=\&quot;%s\&quot;&gt;\n&quot;</span>,htmlPage.lang()));<br><br>writer.<span class="hljs-keyword">write</span>(<span class="hljs-string">&quot;&lt;head&gt;\n&quot;</span>);<br>writer.<span class="hljs-keyword">write</span>(String.format(<span class="hljs-string">&quot;&lt;meta charset=\&quot;%s\&quot;&gt;\n&quot;</span>,htmlPage.charset()));<br>writer.<span class="hljs-keyword">write</span>(String.format(<span class="hljs-string">&quot;&lt;title&gt;%s&lt;/title&gt;\n&quot;</span>,htmlPage.title()));<br>writer.<span class="hljs-keyword">write</span>(<span class="hljs-string">&quot;&lt;/head&gt;\n&quot;</span>);<br><br>writer.<span class="hljs-keyword">write</span>(<span class="hljs-string">&quot;&lt;body&gt;\n&quot;</span>);<br>writer.<span class="hljs-keyword">write</span>(<span class="hljs-string">&quot;&lt;table&gt;\n&quot;</span>);<br><br>Field[] fields=clz.getDeclaredFields();<span class="hljs-comment">//åå°„APIï¼Œè·å¾—ç±»å£°æ˜çš„æ‰€æœ‰å­—æ®µ</span><br><span class="hljs-keyword">for</span>(Field field:fields) &#123;<br>HtmlField htmlField=field.getDeclaredAnnotation(HtmlField.<span class="hljs-keyword">class</span>);<br><br><span class="hljs-keyword">if</span>(htmlField==<span class="hljs-keyword">null</span>)<br><span class="hljs-keyword">continue</span>;<br>field.setAccessible(<span class="hljs-keyword">true</span>);<br><span class="hljs-comment">/*</span><br><span class="hljs-comment"> * å°†æ­¤å¯¹è±¡çš„å¯è®¿é—®æ ‡å¿—è®¾ç½®ä¸ºæŒ‡ç¤ºçš„å¸ƒå°”å€¼ï¼Œ</span><br><span class="hljs-comment"> * å€¼trueè¡¨ç¤ºåå°„å¯¹è±¡åœ¨ä½¿ç”¨æ—¶åº”ç¦æ­¢Javaè¯­è¨€è®¿é—®æ£€æŸ¥ï¼Œ</span><br><span class="hljs-comment"> * falseå€¼è¡¨ç¤ºåå°„å¯¹è±¡åº”å¼ºåˆ¶æ‰§è¡ŒJavaè¯­è¨€è®¿é—®æ£€æŸ¥ã€‚</span><br><span class="hljs-comment"> */</span><br>writer.<span class="hljs-keyword">write</span>(<span class="hljs-string">&quot;&lt;tr&gt;&quot;</span>);<br>writer.<span class="hljs-keyword">write</span>(<span class="hljs-string">&quot;&lt;td&gt;&quot;</span>);<br>writer.<span class="hljs-keyword">write</span>(htmlField.label());<br>writer.<span class="hljs-keyword">write</span>(<span class="hljs-string">&quot;&lt;/td&gt;&quot;</span>);<br><br>writer.<span class="hljs-keyword">write</span>(<span class="hljs-string">&quot;&lt;td&gt;&quot;</span>);<br><br><span class="hljs-comment">//try &#123;</span><br><span class="hljs-comment">//Object value=field.get(obj);</span><br><span class="hljs-comment">//writer.write(value.toString());</span><br><span class="hljs-comment">//&#125;catch(IllegalArgumentException | IllegalAccessException e) &#123;</span><br><span class="hljs-comment">//e.printStackTrace();</span><br><span class="hljs-comment">//&#125;</span><br><span class="hljs-comment">//æ³¨é‡Šå†…å®¹çš„æ”¹é€ </span><br><br>Object value=field.get(obj);<br>String fmt=htmlField.format();<br><span class="hljs-keyword">if</span>(fmt.length()&gt;<span class="hljs-number">0</span>) &#123;<br><span class="hljs-keyword">try</span> &#123;<br><br>Method method=clz.getMethod(fmt);<span class="hljs-comment">//åå°„APIï¼Œè·å¾—æŸä¸€ä¸ªæ–¹æ³•å¯¹è±¡</span><br>assert(method!=<span class="hljs-keyword">null</span>);<br><span class="hljs-keyword">try</span> &#123;<br>writer.<span class="hljs-keyword">write</span>(method.invoke(obj).toString());<br>&#125; <span class="hljs-keyword">catch</span> (IllegalAccessException | IllegalArgumentException e) &#123;<br><span class="hljs-comment">// TODO Auto-generated catch block</span><br>e.printStackTrace();<br>&#125;<br>&#125;<span class="hljs-keyword">catch</span>(NoSuchMethodException | SecurityException | InvocationTargetException e) &#123;<br>e.printStackTrace();<br>&#125;<br>&#125;<span class="hljs-keyword">else</span> &#123;<br>writer.<span class="hljs-keyword">write</span>(value.toString());<br>&#125;<br>writer.<span class="hljs-keyword">write</span>(<span class="hljs-string">&quot;&lt;/td&gt;&quot;</span>);<br>writer.<span class="hljs-keyword">write</span>(<span class="hljs-string">&quot;&lt;/tr&gt;&quot;</span>);<br>&#125;<br>writer.<span class="hljs-keyword">write</span>(<span class="hljs-string">&quot;&lt;/table&gt;\n&quot;</span>);<br>writer.<span class="hljs-keyword">write</span>(<span class="hljs-string">&quot;&lt;/body&gt;\n&quot;</span>);<br><br>writer.<span class="hljs-keyword">write</span>(<span class="hljs-string">&quot;&lt;/html&gt;&quot;</span>);<br>&#125;<span class="hljs-keyword">catch</span>(IOException | IllegalArgumentException | IllegalAccessException e) &#123;<br>e.printStackTrace();<br><span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;<br>&#125;<br><br><span class="hljs-keyword">try</span> &#123;<br>writer.close();<br>&#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br><span class="hljs-comment">// TODO Auto-generated catch block</span><br>e.printStackTrace();<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="åŒ…package-cn-kongwei-liao-cnmb-åˆ›å»ºTestæµ‹è¯•ç±»"><a href="#åŒ…package-cn-kongwei-liao-cnmb-åˆ›å»ºTestæµ‹è¯•ç±»" class="headerlink" title="åŒ…package cn.kongwei_liao.cnmb;åˆ›å»ºTestæµ‹è¯•ç±»"></a>åŒ…package cn.kongwei_liao.cnmb;åˆ›å»ºTestæµ‹è¯•ç±»</h3><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs haxe"><span class="hljs-keyword">package</span> cn.kongwei_liao.cnmb;<br><br><span class="hljs-keyword">import</span> com.annotation.html.HtmlGenerator;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Test</span> </span>&#123;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> void main(<span class="hljs-keyword">String</span>[] args)&#123;<br><span class="hljs-comment">// TODO Auto-generated method stub</span><br>Person person=<span class="hljs-keyword">new</span> <span class="hljs-type">Person</span>();<br>person.setAge(<span class="hljs-number">20</span>);<br>person.setBirth(<span class="hljs-number">2008</span>,<span class="hljs-number">12</span>,<span class="hljs-number">4</span>);<br>person.setMobiles(<span class="hljs-string">&quot;12345678901&quot;</span>);<br>person.setName(<span class="hljs-string">&quot;ç‹å®å¼º&quot;</span>);<br><br>HtmlGenerator generator=<span class="hljs-keyword">new</span> <span class="hljs-type">HtmlGenerator</span>();<br>generator.createDetailPage(person);<br><br>&#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="è¿è¡ŒTestç”Ÿæˆçš„htmlä»£ç "><a href="#è¿è¡ŒTestç”Ÿæˆçš„htmlä»£ç " class="headerlink" title="è¿è¡ŒTestç”Ÿæˆçš„htmlä»£ç "></a>è¿è¡ŒTestç”Ÿæˆçš„htmlä»£ç </h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;zh&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>ä¸ªäººä¿¡æ¯<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">table</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>å§“å<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>ç‹å®å¼º<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>æ‰‹æœº<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>12345678901<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>å¹´é¾„<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>20<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>å‡ºç”Ÿå¹´æœˆ<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>2008å¹´12æœˆ4æ—¥<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="/2019/11/04/Java%E5%8F%8D%E5%B0%84%E7%94%9F%E6%88%90HTML/jieguo.png" alt="jieguo"></p>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Vue.js-III</title>
    <link href="/2019/11/02/Vue-js-III/"/>
    <url>/2019/11/02/Vue-js-III/</url>
    
    <content type="html"><![CDATA[<h1 id="Vue-js-III"><a href="#Vue-js-III" class="headerlink" title="Vue.js - III"></a>Vue.js - III</h1><h2 id="å®šä¹‰Vueç»„ä»¶"><a href="#å®šä¹‰Vueç»„ä»¶" class="headerlink" title="å®šä¹‰Vueç»„ä»¶"></a>å®šä¹‰Vueç»„ä»¶</h2><p>ä»€ä¹ˆæ˜¯ç»„ä»¶ï¼š ç»„ä»¶çš„å‡ºç°ï¼Œå°±æ˜¯ä¸ºäº†æ‹†åˆ†Vueå®ä¾‹çš„ä»£ç é‡çš„ï¼Œèƒ½å¤Ÿè®©æˆ‘ä»¬ä»¥ä¸åŒçš„ç»„ä»¶ï¼Œæ¥åˆ’åˆ†ä¸åŒçš„åŠŸèƒ½æ¨¡å—ï¼Œå°†æ¥æˆ‘ä»¬éœ€è¦ä»€ä¹ˆæ ·çš„åŠŸèƒ½ï¼Œå°±å¯ä»¥å»è°ƒç”¨å¯¹åº”çš„ç»„ä»¶å³å¯ï¼›<br>ç»„ä»¶åŒ–å’Œæ¨¡å—åŒ–çš„ä¸åŒï¼š</p><ul><li>æ¨¡å—åŒ–ï¼š æ˜¯ä»ä»£ç é€»è¾‘çš„è§’åº¦è¿›è¡Œåˆ’åˆ†çš„ï¼›æ–¹ä¾¿ä»£ç åˆ†å±‚å¼€å‘ï¼Œä¿è¯æ¯ä¸ªåŠŸèƒ½æ¨¡å—çš„èŒèƒ½å•ä¸€ï¼›</li><li>ç»„ä»¶åŒ–ï¼š æ˜¯ä»UIç•Œé¢çš„è§’åº¦è¿›è¡Œåˆ’åˆ†çš„ï¼›å‰ç«¯çš„ç»„ä»¶åŒ–ï¼Œæ–¹ä¾¿UIç»„ä»¶çš„é‡ç”¨ï¼›<h3 id="å…¨å±€ç»„ä»¶å®šä¹‰çš„ä¸‰ç§æ–¹å¼"><a href="#å…¨å±€ç»„ä»¶å®šä¹‰çš„ä¸‰ç§æ–¹å¼" class="headerlink" title="å…¨å±€ç»„ä»¶å®šä¹‰çš„ä¸‰ç§æ–¹å¼"></a>å…¨å±€ç»„ä»¶å®šä¹‰çš„ä¸‰ç§æ–¹å¼</h3></li></ul><ol><li>ä½¿ç”¨ Vue.extend é…åˆ Vue.component æ–¹æ³•ï¼š<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">var <span class="hljs-keyword">login</span> = Vue.extend(&#123;<br>      <span class="hljs-keyword">template</span>: <span class="hljs-string">&#x27;&lt;h1&gt;ç™»å½•&lt;/h1&gt;&#x27;</span><br>    &#125;);<br>Vue.component(<span class="hljs-string">&#x27;login&#x27;</span>, <span class="hljs-keyword">login</span>);<br></code></pre></td></tr></table></figure></li><li>ç›´æ¥ä½¿ç”¨ Vue.component æ–¹æ³•ï¼š<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">Vue.component(<span class="hljs-string">&#x27;register&#x27;</span>, &#123;<br>      <span class="hljs-keyword">template</span>: <span class="hljs-string">&#x27;&lt;h1&gt;æ³¨å†Œ&lt;/h1&gt;&#x27;</span><br>    &#125;);<br></code></pre></td></tr></table></figure></li><li>å°†æ¨¡æ¿å­—ç¬¦ä¸²ï¼Œå®šä¹‰åˆ°scriptæ ‡ç­¾ç§ï¼š<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;tmpl&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;x-template&quot;</span>&gt;</span><br><span class="handlebars"><span class="xml">   <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;#&quot;</span>&gt;</span>ç™»å½•<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span> | <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;#&quot;</span>&gt;</span>æ³¨å†Œ<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></span><br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>åŒæ—¶ï¼Œéœ€è¦ä½¿ç”¨ Vue.component æ¥å®šä¹‰ç»„ä»¶ï¼š<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">Vue.component(<span class="hljs-string">&#x27;account&#x27;</span>, &#123;<br>  <span class="hljs-keyword">template</span>: <span class="hljs-string">&#x27;#tmpl&#x27;</span><br>&#125;);<br></code></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼š ç»„ä»¶ä¸­çš„DOMç»“æ„ï¼Œæœ‰ä¸”åªèƒ½æœ‰å”¯ä¸€çš„æ ¹å…ƒç´ ï¼ˆRoot Elementï¼‰æ¥è¿›è¡ŒåŒ…è£¹ï¼</p></blockquote></li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- å¦‚æœè¦ä½¿ç”¨ç»„ä»¶ï¼Œç›´æ¥ï¼ŒæŠŠç»„ä»¶çš„åç§°ï¼Œä»¥ HTML æ ‡ç­¾çš„å½¢å¼ï¼Œå¼•å…¥åˆ°é¡µé¢ä¸­ï¼Œå³å¯ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">login</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">login</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">register</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">register</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">tmpl</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">tmpl</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="ç»„ä»¶ä¸­å±•ç¤ºæ•°æ®å’Œå“åº”äº‹ä»¶"><a href="#ç»„ä»¶ä¸­å±•ç¤ºæ•°æ®å’Œå“åº”äº‹ä»¶" class="headerlink" title="ç»„ä»¶ä¸­å±•ç¤ºæ•°æ®å’Œå“åº”äº‹ä»¶"></a>ç»„ä»¶ä¸­å±•ç¤ºæ•°æ®å’Œå“åº”äº‹ä»¶</h3><ol><li>åœ¨ç»„ä»¶ä¸­ï¼Œ<code>data</code>éœ€è¦è¢«å®šä¹‰ä¸ºä¸€ä¸ªæ–¹æ³•ï¼Œä¾‹å¦‚ï¼š<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs javascript">Vue.component(<span class="hljs-string">&#x27;account&#x27;</span>, &#123;<br>      template: <span class="hljs-string">&#x27;#tmpl&#x27;</span>,<br>      <span class="hljs-function"><span class="hljs-title">data</span>(<span class="hljs-params"></span>)</span> &#123;<br>        <span class="hljs-keyword">return</span> &#123;<br>          msg: <span class="hljs-string">&#x27;å¤§å®¶å¥½ï¼&#x27;</span><br>        &#125;<br>      &#125;,<br>      methods:&#123;<br>        <span class="hljs-function"><span class="hljs-title">login</span>(<span class="hljs-params"></span>)</span>&#123;<br>          alert(<span class="hljs-string">&#x27;ç‚¹å‡»äº†ç™»å½•æŒ‰é’®&#x27;</span>);<br>        &#125;<br>      &#125;<br>    &#125;);<br></code></pre></td></tr></table></figure></li><li>åœ¨å­ç»„ä»¶ä¸­ï¼Œå¦‚æœå°†æ¨¡æ¿å­—ç¬¦ä¸²ï¼Œå®šä¹‰åˆ°äº†scriptæ ‡ç­¾ä¸­ï¼Œé‚£ä¹ˆï¼Œè¦è®¿é—®å­ç»„ä»¶èº«ä¸Šçš„<code>data</code>å±æ€§ä¸­çš„å€¼ï¼Œéœ€è¦ä½¿ç”¨<code>this</code>æ¥è®¿é—®ï¼›</li></ol><h3 id="ã€é‡ç‚¹ã€‘ä¸ºä»€ä¹ˆç»„ä»¶ä¸­çš„dataå±æ€§å¿…é¡»å®šä¹‰ä¸ºä¸€ä¸ªæ–¹æ³•å¹¶è¿”å›ä¸€ä¸ªå¯¹è±¡"><a href="#ã€é‡ç‚¹ã€‘ä¸ºä»€ä¹ˆç»„ä»¶ä¸­çš„dataå±æ€§å¿…é¡»å®šä¹‰ä¸ºä¸€ä¸ªæ–¹æ³•å¹¶è¿”å›ä¸€ä¸ªå¯¹è±¡" class="headerlink" title="ã€é‡ç‚¹ã€‘ä¸ºä»€ä¹ˆç»„ä»¶ä¸­çš„dataå±æ€§å¿…é¡»å®šä¹‰ä¸ºä¸€ä¸ªæ–¹æ³•å¹¶è¿”å›ä¸€ä¸ªå¯¹è±¡"></a>ã€é‡ç‚¹ã€‘ä¸ºä»€ä¹ˆç»„ä»¶ä¸­çš„dataå±æ€§å¿…é¡»å®šä¹‰ä¸ºä¸€ä¸ªæ–¹æ³•å¹¶è¿”å›ä¸€ä¸ªå¯¹è±¡</h3><ol><li>é€šè¿‡è®¡æ•°å™¨æ¡ˆä¾‹æ¼”ç¤º</li></ol><h3 id="ä½¿ç”¨componentså±æ€§å®šä¹‰å±€éƒ¨å­ç»„ä»¶"><a href="#ä½¿ç”¨componentså±æ€§å®šä¹‰å±€éƒ¨å­ç»„ä»¶" class="headerlink" title="ä½¿ç”¨componentså±æ€§å®šä¹‰å±€éƒ¨å­ç»„ä»¶"></a>ä½¿ç”¨<code>components</code>å±æ€§å®šä¹‰å±€éƒ¨å­ç»„ä»¶</h3><ol><li>ç»„ä»¶å®ä¾‹å®šä¹‰æ–¹å¼ï¼š<figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">    // åˆ›å»º Vue å®ä¾‹ï¼Œå¾—åˆ° ViewModel</span><br><span class="xml">    var vm = new Vue(&#123;</span><br><span class="xml">      el: &#x27;#app&#x27;,</span><br><span class="xml">      data: &#123;&#125;,</span><br><span class="xml">      methods: &#123;&#125;,</span><br><span class="xml">      components: &#123; // å®šä¹‰å­ç»„ä»¶</span><br><span class="xml">        account: &#123; // account ç»„ä»¶</span><br><span class="xml">          template: &#x27;<span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>è¿™æ˜¯Accountç»„ä»¶</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">name</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">login</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">login</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>&#x27;, // åœ¨è¿™é‡Œä½¿ç”¨å®šä¹‰çš„å­ç»„ä»¶</span><br><span class="xml">          components: &#123; // å®šä¹‰å­ç»„ä»¶çš„å­ç»„ä»¶</span><br><span class="xml">            login: &#123; // login ç»„ä»¶</span><br><span class="xml">              template: &quot;<span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>è¿™æ˜¯ç™»å½•ç»„ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>&quot;</span><br><span class="xml">            &#125;</span><br><span class="xml">          &#125;</span><br><span class="xml">        &#125;</span><br><span class="xml">      &#125;</span><br><span class="xml">    &#125;);</span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure></li><li>å¼•ç”¨ç»„ä»¶ï¼š<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">account</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">account</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ol><p><strong>å®Œæ•´ä»£ç </strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./lib/vue-2.4.0.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mycom3</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">mycom3</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- &lt;login&gt;&lt;/login&gt; --&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app2&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mycom3</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">mycom3</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">login</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">login</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>  <span class="hljs-comment">&lt;!-- åœ¨ è¢«æ§åˆ¶çš„ #app å¤–é¢,ä½¿ç”¨ template å…ƒç´ ,å®šä¹‰ç»„ä»¶çš„HTMLæ¨¡æ¿ç»“æ„  --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;tmpl&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>è¿™æ˜¯é€šè¿‡ template å…ƒç´ ,åœ¨å¤–éƒ¨å®šä¹‰çš„ç»„ä»¶ç»“æ„,è¿™ä¸ªæ–¹å¼,æœ‰ä»£ç çš„åªèƒ½æç¤ºå’Œé«˜äº®<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span>å¥½ç”¨,ä¸é”™!<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;tmpl2&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>è¿™æ˜¯ç§æœ‰çš„ login ç»„ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">    Vue.component(<span class="hljs-string">&#x27;mycom3&#x27;</span>, &#123;</span><br><span class="javascript">      template: <span class="hljs-string">&#x27;#tmpl&#x27;</span></span><br>    &#125;)<br><br><span class="javascript">    <span class="hljs-comment">// åˆ›å»º Vue å®ä¾‹ï¼Œå¾—åˆ° ViewModel</span></span><br><span class="javascript">    <span class="hljs-keyword">var</span> vm = <span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">      el: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br>      data: &#123;&#125;,<br>      methods: &#123;&#125;<br>    &#125;);<br><br><span class="javascript">    <span class="hljs-keyword">var</span> vm2 = <span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">      el: <span class="hljs-string">&#x27;#app2&#x27;</span>,</span><br>      data: &#123;&#125;,<br>      methods: &#123;&#125;,<br>      filters: &#123;&#125;,<br>      directives: &#123;&#125;,<br><span class="javascript">      components: &#123; <span class="hljs-comment">// å®šä¹‰å®ä¾‹å†…éƒ¨ç§æœ‰ç»„ä»¶çš„</span></span><br>        login: &#123;<br><span class="javascript">          template: <span class="hljs-string">&#x27;#tmpl2&#x27;</span></span><br>        &#125;<br>      &#125;,<br><br><span class="javascript">      <span class="hljs-function"><span class="hljs-title">beforeCreate</span>(<span class="hljs-params"></span>)</span> &#123; &#125;,</span><br><span class="javascript">      <span class="hljs-function"><span class="hljs-title">created</span>(<span class="hljs-params"></span>)</span> &#123; &#125;,</span><br><span class="javascript">      <span class="hljs-function"><span class="hljs-title">beforeMount</span>(<span class="hljs-params"></span>)</span> &#123; &#125;,</span><br><span class="javascript">      <span class="hljs-function"><span class="hljs-title">mounted</span>(<span class="hljs-params"></span>)</span> &#123; &#125;,</span><br><span class="javascript">      <span class="hljs-function"><span class="hljs-title">beforeUpdate</span>(<span class="hljs-params"></span>)</span> &#123; &#125;,</span><br><span class="javascript">      <span class="hljs-function"><span class="hljs-title">updated</span>(<span class="hljs-params"></span>)</span> &#123; &#125;,</span><br><span class="javascript">      <span class="hljs-function"><span class="hljs-title">beforeDestroy</span>(<span class="hljs-params"></span>)</span> &#123; &#125;,</span><br><span class="javascript">      <span class="hljs-function"><span class="hljs-title">destroyed</span>(<span class="hljs-params"></span>)</span> &#123; &#125;</span><br>    &#125;)<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="ä½¿ç”¨flagæ ‡è¯†ç¬¦ç»“åˆv-ifå’Œv-elseåˆ‡æ¢ç»„ä»¶"><a href="#ä½¿ç”¨flagæ ‡è¯†ç¬¦ç»“åˆv-ifå’Œv-elseåˆ‡æ¢ç»„ä»¶" class="headerlink" title="ä½¿ç”¨flagæ ‡è¯†ç¬¦ç»“åˆv-ifå’Œv-elseåˆ‡æ¢ç»„ä»¶"></a>ä½¿ç”¨<code>flag</code>æ ‡è¯†ç¬¦ç»“åˆ<code>v-if</code>å’Œ<code>v-else</code>åˆ‡æ¢ç»„ä»¶</h2><ol><li>é¡µé¢ç»“æ„ï¼š<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs applescript">&lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;<br>    &lt;input type=<span class="hljs-string">&quot;button&quot;</span> value=<span class="hljs-string">&quot;toggle&quot;</span> @click=<span class="hljs-string">&quot;flag=!flag&quot;</span>&gt;<br>    &lt;<span class="hljs-keyword">my</span>-com1 v-<span class="hljs-keyword">if</span>=<span class="hljs-string">&quot;flag&quot;</span>&gt;&lt;/<span class="hljs-keyword">my</span>-com1&gt;<br>    &lt;<span class="hljs-keyword">my</span>-com2 v-<span class="hljs-keyword">else</span>=<span class="hljs-string">&quot;flag&quot;</span>&gt;&lt;/<span class="hljs-keyword">my</span>-com2&gt;<br>  &lt;/<span class="hljs-keyword">div</span>&gt;<br></code></pre></td></tr></table></figure></li><li>Vueå®ä¾‹å®šä¹‰ï¼š<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">    Vue.component(<span class="hljs-string">&#x27;myCom1&#x27;</span>, &#123;</span><br><span class="handlebars"><span class="xml">      template: &#x27;<span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>å¥”æ³¢éœ¸<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>&#x27;</span></span><br>    &#125;)<br><br><span class="javascript">    Vue.component(<span class="hljs-string">&#x27;myCom2&#x27;</span>, &#123;</span><br><span class="handlebars"><span class="xml">      template: &#x27;<span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>éœ¸æ³¢å¥”<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>&#x27;</span></span><br>    &#125;)<br><br><span class="javascript">    <span class="hljs-comment">// åˆ›å»º Vue å®ä¾‹ï¼Œå¾—åˆ° ViewModel</span></span><br><span class="javascript">    <span class="hljs-keyword">var</span> vm = <span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">      el: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br>      data: &#123;<br><span class="javascript">        flag: <span class="hljs-literal">true</span></span><br>      &#125;,<br>      methods: &#123;&#125;<br>    &#125;);<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ol><p><strong>å®Œæ•´ä»£ç </strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;&quot;</span> @<span class="hljs-attr">click.prevent</span>=<span class="hljs-string">&quot;flag=true&quot;</span>&gt;</span>ç™»å½•<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;&quot;</span> @<span class="hljs-attr">click.prevent</span>=<span class="hljs-string">&quot;flag=false&quot;</span>&gt;</span>æ³¨å†Œ<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">login</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;flag&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">login</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">register</span> <span class="hljs-attr">v-else</span>=<span class="hljs-string">&quot;flag&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">register</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">    Vue.component(<span class="hljs-string">&#x27;login&#x27;</span>, &#123;</span><br><span class="handlebars"><span class="xml">      template: &#x27;<span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>ç™»å½•ç»„ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>&#x27;</span></span><br>    &#125;)<br><span class="javascript">    Vue.component(<span class="hljs-string">&#x27;register&#x27;</span>, &#123;</span><br><span class="handlebars"><span class="xml">      template: &#x27;<span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>æ³¨å†Œç»„ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>&#x27;</span></span><br>    &#125;)<br><span class="javascript">    <span class="hljs-comment">// åˆ›å»º Vue å®ä¾‹ï¼Œå¾—åˆ° ViewModel</span></span><br><span class="javascript">    <span class="hljs-keyword">var</span> vm = <span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">      el: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br>      data: &#123;<br><span class="javascript">        flag: <span class="hljs-literal">false</span></span><br>      &#125;,<br>      methods: &#123;&#125;<br>    &#125;);<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="ä½¿ç”¨-iså±æ€§æ¥åˆ‡æ¢ä¸åŒçš„å­ç»„ä»¶-å¹¶æ·»åŠ åˆ‡æ¢åŠ¨ç”»"><a href="#ä½¿ç”¨-iså±æ€§æ¥åˆ‡æ¢ä¸åŒçš„å­ç»„ä»¶-å¹¶æ·»åŠ åˆ‡æ¢åŠ¨ç”»" class="headerlink" title="ä½¿ç”¨:iså±æ€§æ¥åˆ‡æ¢ä¸åŒçš„å­ç»„ä»¶,å¹¶æ·»åŠ åˆ‡æ¢åŠ¨ç”»"></a>ä½¿ç”¨<code>:is</code>å±æ€§æ¥åˆ‡æ¢ä¸åŒçš„å­ç»„ä»¶,å¹¶æ·»åŠ åˆ‡æ¢åŠ¨ç”»</h2><ol><li>ç»„ä»¶å®ä¾‹å®šä¹‰æ–¹å¼ï¼š<figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-comment">// ç™»å½•ç»„ä»¶</span><br>  <span class="hljs-keyword">const</span> login = Vue.extend(&#123;<br>    template: `&lt;<span class="hljs-keyword">div</span>&gt;<br>      &lt;h3&gt;ç™»å½•ç»„ä»¶&lt;/h3&gt;<br>    &lt;/<span class="hljs-keyword">div</span>&gt;`<br>  &#125;);<br>  Vue.component(<span class="hljs-string">&#x27;login&#x27;</span>, login);<br><br>  <span class="hljs-comment">// æ³¨å†Œç»„ä»¶</span><br>  <span class="hljs-keyword">const</span> register = Vue.extend(&#123;<br>    template: `&lt;<span class="hljs-keyword">div</span>&gt;<br>      &lt;h3&gt;æ³¨å†Œç»„ä»¶&lt;/h3&gt;<br>    &lt;/<span class="hljs-keyword">div</span>&gt;`<br>  &#125;);<br>  Vue.component(<span class="hljs-string">&#x27;register&#x27;</span>, register);<br><br>  <span class="hljs-comment">// åˆ›å»º Vue å®ä¾‹ï¼Œå¾—åˆ° ViewModel</span><br>  <span class="hljs-built_in">var</span> vm = <span class="hljs-keyword">new</span> Vue(&#123;<br>    el: <span class="hljs-string">&#x27;#app&#x27;</span>,<br>    data: &#123; comName: <span class="hljs-string">&#x27;login&#x27;</span> &#125;,<br>    methods: &#123;&#125;<br>  &#125;);<br></code></pre></td></tr></table></figure></li><li>ä½¿ç”¨<code>component</code>æ ‡ç­¾ï¼Œæ¥å¼•ç”¨ç»„ä»¶ï¼Œå¹¶é€šè¿‡<code>:is</code>å±æ€§æ¥æŒ‡å®šè¦åŠ è½½çš„ç»„ä»¶ï¼š<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;#&quot;</span> @<span class="hljs-attr">click.prevent</span>=<span class="hljs-string">&quot;comName=&#x27;login&#x27;&quot;</span>&gt;</span>ç™»å½•<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;#&quot;</span> @<span class="hljs-attr">click.prevent</span>=<span class="hljs-string">&quot;comName=&#x27;register&#x27;&quot;</span>&gt;</span>æ³¨å†Œ<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">hr</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">transition</span> <span class="hljs-attr">mode</span>=<span class="hljs-string">&quot;out-in&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">component</span> <span class="hljs-attr">:is</span>=<span class="hljs-string">&quot;comName&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">component</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">transition</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li>æ·»åŠ åˆ‡æ¢æ ·å¼ï¼š<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><br>  .v-enter,<br>  .v-leave-to &#123;<br><span class="css">    <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;</span><br><span class="css">    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(<span class="hljs-number">30px</span>);</span><br>  &#125;<br><br>  .v-enter-active,<br>  .v-leave-active &#123;<br><span class="css">    <span class="hljs-attribute">position</span>: absolute;</span><br><span class="css">    <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.3s</span> ease;</span><br>  &#125;<br><br><span class="css">  <span class="hljs-selector-tag">h3</span>&#123;</span><br><span class="css">    <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;</span><br>  &#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ol><p><strong>å®Œæ•´ä»£ç </strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./lib/vue-2.4.0.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><br>    .v-enter,<br>    .v-leave-to &#123;<br><span class="css">      <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;</span><br><span class="css">      <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(<span class="hljs-number">150px</span>);</span><br>    &#125;<br><br>    .v-enter-active,<br>    .v-leave-active &#123;<br><span class="css">      <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.5s</span> ease;</span><br>    &#125;<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;&quot;</span> @<span class="hljs-attr">click.prevent</span>=<span class="hljs-string">&quot;comName=&#x27;login&#x27;&quot;</span>&gt;</span>ç™»å½•<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;&quot;</span> @<span class="hljs-attr">click.prevent</span>=<span class="hljs-string">&quot;comName=&#x27;register&#x27;&quot;</span>&gt;</span>æ³¨å†Œ<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- é€šè¿‡ mode å±æ€§,è®¾ç½®ç»„ä»¶åˆ‡æ¢æ—¶å€™çš„ æ¨¡å¼ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">transition</span> <span class="hljs-attr">mode</span>=<span class="hljs-string">&quot;out-in&quot;</span>&gt;</span><br><span class="hljs-comment">&lt;!-- Vueæä¾›äº† component ,æ¥å±•ç¤ºå¯¹åº”åç§°çš„ç»„ä»¶ --&gt;</span><br><span class="hljs-comment">&lt;!-- component æ˜¯ä¸€ä¸ªå ä½ç¬¦, :is å±æ€§,å¯ä»¥ç”¨æ¥æŒ‡å®šè¦å±•ç¤ºçš„ç»„ä»¶çš„åç§° --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">component</span> <span class="hljs-attr">:is</span>=<span class="hljs-string">&quot;comName&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">component</span>&gt;</span><br><span class="hljs-comment">&lt;!-- æ€»ç»“:å½“å‰å­¦ä¹ äº†å‡ ä¸ª Vue æä¾›çš„æ ‡ç­¾äº†??? --&gt;</span><br><span class="hljs-comment">&lt;!-- component,  template,  transition,  transitionGroup  --&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">transition</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">    <span class="hljs-comment">// ç»„ä»¶åç§°æ˜¯ å­—ç¬¦ä¸²</span></span><br><span class="javascript">    Vue.component(<span class="hljs-string">&#x27;login&#x27;</span>, &#123;</span><br><span class="handlebars"><span class="xml">      template: &#x27;<span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>ç™»å½•ç»„ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>&#x27;</span></span><br>    &#125;)<br><br><span class="javascript">    Vue.component(<span class="hljs-string">&#x27;register&#x27;</span>, &#123;</span><br><span class="handlebars"><span class="xml">      template: &#x27;<span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>æ³¨å†Œç»„ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>&#x27;</span></span><br>    &#125;)<br><br><span class="javascript">    <span class="hljs-comment">// åˆ›å»º Vue å®ä¾‹ï¼Œå¾—åˆ° ViewModel</span></span><br><span class="javascript">    <span class="hljs-keyword">var</span> vm = <span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">      el: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br>      data: &#123;<br><span class="javascript">        comName: <span class="hljs-string">&#x27;login&#x27;</span> <span class="hljs-comment">// å½“å‰ component ä¸­çš„ :is ç»‘å®šçš„ç»„ä»¶çš„åç§°</span></span><br>      &#125;,<br>      methods: &#123;&#125;<br>    &#125;);<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ å€¼"><a href="#çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ å€¼" class="headerlink" title="çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ å€¼"></a>çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ å€¼</h2><ol><li>ç»„ä»¶å®ä¾‹å®šä¹‰æ–¹å¼ï¼Œæ³¨æ„ï¼šä¸€å®šè¦ä½¿ç”¨<code>props</code>å±æ€§æ¥å®šä¹‰çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„æ•°æ®<figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">    // åˆ›å»º Vue å®ä¾‹ï¼Œå¾—åˆ° ViewModel</span><br><span class="xml">    var vm = new Vue(&#123;</span><br><span class="xml">      el: &#x27;#app&#x27;,</span><br><span class="xml">      data: &#123;</span><br><span class="xml">        msg: &#x27;è¿™æ˜¯çˆ¶ç»„ä»¶ä¸­çš„æ¶ˆæ¯&#x27;</span><br><span class="xml">      &#125;,</span><br><span class="xml">      components: &#123;</span><br><span class="xml">        son: &#123;</span><br><span class="xml">          template: &#x27;<span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>è¿™æ˜¯å­ç»„ä»¶ --- </span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">finfo</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>&#x27;,</span><br><span class="xml">          props: [&#x27;finfo&#x27;]</span><br><span class="xml">        &#125;</span><br><span class="xml">      &#125;</span><br><span class="xml">    &#125;);</span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure></li><li>ä½¿ç”¨<code>v-bind</code>æˆ–ç®€åŒ–æŒ‡ä»¤ï¼Œå°†æ•°æ®ä¼ é€’åˆ°å­ç»„ä»¶ä¸­ï¼š<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs elixir">&lt;div id=<span class="hljs-string">&quot;app&quot;</span>&gt;<br>    &lt;son <span class="hljs-symbol">:finfo=<span class="hljs-string">&quot;msg&quot;</span>&gt;&lt;/son&gt;</span><br>&lt;<span class="hljs-regexp">/div&gt;</span><br></code></pre></td></tr></table></figure><h2 id="å­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ å€¼"><a href="#å­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ å€¼" class="headerlink" title="å­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ å€¼"></a>å­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ å€¼</h2></li><li>åŸç†ï¼šçˆ¶ç»„ä»¶å°†æ–¹æ³•çš„å¼•ç”¨ï¼Œä¼ é€’åˆ°å­ç»„ä»¶å†…éƒ¨ï¼Œå­ç»„ä»¶åœ¨å†…éƒ¨è°ƒç”¨çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„æ–¹æ³•ï¼ŒåŒæ—¶æŠŠè¦å‘é€ç»™çˆ¶ç»„ä»¶çš„æ•°æ®ï¼Œåœ¨è°ƒç”¨æ–¹æ³•çš„æ—¶å€™å½“ä½œå‚æ•°ä¼ é€’è¿›å»ï¼›</li><li>çˆ¶ç»„ä»¶å°†æ–¹æ³•çš„å¼•ç”¨ä¼ é€’ç»™å­ç»„ä»¶ï¼Œå…¶ä¸­ï¼Œ<code>getMsg</code>æ˜¯çˆ¶ç»„ä»¶ä¸­<code>methods</code>ä¸­å®šä¹‰çš„æ–¹æ³•åç§°ï¼Œ<code>func</code>æ˜¯å­ç»„ä»¶è°ƒç”¨ä¼ é€’è¿‡æ¥æ–¹æ³•æ—¶å€™çš„æ–¹æ³•åç§°<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">son</span> @<span class="hljs-attr">func</span>=<span class="hljs-string">&quot;getMsg&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">son</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li>å­ç»„ä»¶å†…éƒ¨é€šè¿‡<code>this.$emit(&#39;æ–¹æ³•å&#39;, è¦ä¼ é€’çš„æ•°æ®)</code>æ–¹å¼ï¼Œæ¥è°ƒç”¨çˆ¶ç»„ä»¶ä¸­çš„æ–¹æ³•ï¼ŒåŒæ—¶æŠŠæ•°æ®ä¼ é€’ç»™çˆ¶ç»„ä»¶ä½¿ç”¨<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- å¼•ç”¨çˆ¶ç»„ä»¶ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">son</span> @<span class="hljs-attr">func</span>=<span class="hljs-string">&quot;getMsg&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">son</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- ç»„ä»¶æ¨¡æ¿å®šä¹‰ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;x-template&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;son&quot;</span>&gt;</span><br><span class="handlebars"><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span></span><br><span class="handlebars"><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;å‘çˆ¶ç»„ä»¶ä¼ å€¼&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;sendMsg&quot;</span> /&gt;</span></span></span><br><span class="handlebars"><span class="xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">    <span class="hljs-comment">// å­ç»„ä»¶çš„å®šä¹‰æ–¹å¼</span></span><br><span class="javascript">    Vue.component(<span class="hljs-string">&#x27;son&#x27;</span>, &#123;</span><br><span class="javascript">      template: <span class="hljs-string">&#x27;#son&#x27;</span>, <span class="hljs-comment">// ç»„ä»¶æ¨¡æ¿Id</span></span><br>      methods: &#123;<br><span class="javascript">        <span class="hljs-function"><span class="hljs-title">sendMsg</span>(<span class="hljs-params"></span>)</span> &#123; <span class="hljs-comment">// æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶</span></span><br><span class="javascript">          <span class="hljs-built_in">this</span>.$emit(<span class="hljs-string">&#x27;func&#x27;</span>, <span class="hljs-string">&#x27;OK&#x27;</span>); <span class="hljs-comment">// è°ƒç”¨çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„æ–¹æ³•ï¼ŒåŒæ—¶æŠŠæ•°æ®ä¼ é€’å‡ºå»</span></span><br>        &#125;<br>      &#125;<br>    &#125;);<br><br><span class="javascript">    <span class="hljs-comment">// åˆ›å»º Vue å®ä¾‹ï¼Œå¾—åˆ° ViewModel</span></span><br><span class="javascript">    <span class="hljs-keyword">var</span> vm = <span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">      el: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br>      data: &#123;&#125;,<br>      methods: &#123;<br><span class="javascript">        <span class="hljs-function"><span class="hljs-title">getMsg</span>(<span class="hljs-params">val</span>)</span>&#123; <span class="hljs-comment">// å­ç»„ä»¶ä¸­ï¼Œé€šè¿‡ this.$emit() å®é™…è°ƒç”¨çš„æ–¹æ³•ï¼Œåœ¨æ­¤è¿›è¡Œå®šä¹‰</span></span><br>          alert(val);<br>        &#125;<br>      &#125;<br>    &#125;);<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ol><p><strong>å®Œæ•´ä»£ç </strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./lib/vue-2.4.0.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ ä¼ é€’ æ–¹æ³•ï¼Œä½¿ç”¨çš„æ˜¯ äº‹ä»¶ç»‘å®šæœºåˆ¶ï¼› v-on, å½“æˆ‘ä»¬è‡ªå®šä¹‰äº† ä¸€ä¸ª äº‹ä»¶å±æ€§ä¹‹åï¼Œé‚£ä¹ˆï¼Œå­ç»„ä»¶å°±èƒ½å¤Ÿï¼Œé€šè¿‡æŸäº›æ–¹å¼ï¼Œæ¥è°ƒç”¨ ä¼ é€’è¿›å»çš„ è¿™ä¸ª æ–¹æ³•äº† --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">com2</span> @<span class="hljs-attr">func</span>=<span class="hljs-string">&quot;show&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">com2</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;tmpl&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>è¿™æ˜¯ å­ç»„ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;è¿™æ˜¯å­ç»„ä»¶ä¸­çš„æŒ‰é’® - ç‚¹å‡»å®ƒï¼Œè§¦å‘ çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„ func æ–¹æ³•&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;myclick&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><br><span class="javascript">    <span class="hljs-comment">// å®šä¹‰äº†ä¸€ä¸ªå­—é¢é‡ç±»å‹çš„ ç»„ä»¶æ¨¡æ¿å¯¹è±¡</span></span><br><span class="javascript">    <span class="hljs-keyword">var</span> com2 = &#123;</span><br><span class="javascript">      template: <span class="hljs-string">&#x27;#tmpl&#x27;</span>, <span class="hljs-comment">// é€šè¿‡æŒ‡å®šäº†ä¸€ä¸ª Id, è¡¨ç¤º è¯´ï¼Œè¦å»åŠ è½½ è¿™ä¸ªæŒ‡å®šIdçš„ template å…ƒç´ ä¸­çš„å†…å®¹ï¼Œå½“ä½œ ç»„ä»¶çš„HTMLç»“æ„</span></span><br><span class="javascript">      <span class="hljs-function"><span class="hljs-title">data</span>(<span class="hljs-params"></span>)</span> &#123;</span><br><span class="javascript">        <span class="hljs-keyword">return</span> &#123;</span><br><span class="javascript">          sonmsg: &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;å°å¤´å„¿å­&#x27;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">6</span> &#125;</span><br>        &#125;<br>      &#125;,<br>      methods: &#123;<br><span class="javascript">        <span class="hljs-function"><span class="hljs-title">myclick</span>(<span class="hljs-params"></span>)</span> &#123;</span><br><span class="javascript">          <span class="hljs-comment">// å½“ç‚¹å‡»å­ç»„ä»¶çš„æŒ‰é’®çš„æ—¶å€™ï¼Œå¦‚ä½• æ‹¿åˆ° çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„ func æ–¹æ³•ï¼Œå¹¶è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Ÿï¼Ÿï¼Ÿ</span></span><br><span class="javascript">          <span class="hljs-comment">//  emit è‹±æ–‡åŸæ„ï¼š æ˜¯è§¦å‘ï¼Œè°ƒç”¨ã€å‘å°„çš„æ„æ€</span></span><br><span class="javascript">          <span class="hljs-comment">// this.$emit(&#x27;func123&#x27;, 123, 456)</span></span><br><span class="javascript">          <span class="hljs-built_in">this</span>.$emit(<span class="hljs-string">&#x27;func&#x27;</span>, <span class="hljs-built_in">this</span>.sonmsg)</span><br>        &#125;<br>      &#125;<br>    &#125;<br><br><span class="javascript">    <span class="hljs-comment">// åˆ›å»º Vue å®ä¾‹ï¼Œå¾—åˆ° ViewModel</span></span><br><span class="javascript">    <span class="hljs-keyword">var</span> vm = <span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">      el: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br>      data: &#123;<br><span class="javascript">        datamsgFormSon: <span class="hljs-literal">null</span></span><br>      &#125;,<br>      methods: &#123;<br><span class="javascript">        <span class="hljs-function"><span class="hljs-title">show</span>(<span class="hljs-params">data</span>)</span> &#123;</span><br><span class="javascript">           <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;è°ƒç”¨äº†çˆ¶ç»„ä»¶èº«ä¸Šçš„ show æ–¹æ³•: --- &#x27;</span> + data)</span><br><span class="javascript">           <span class="hljs-built_in">console</span>.log(data);</span><br><span class="javascript">          <span class="hljs-built_in">this</span>.datamsgFormSon = data</span><br>        &#125;<br>      &#125;,<br><br>      components: &#123;<br>        com2<br><span class="javascript">        <span class="hljs-comment">// com2: com2</span></span><br>      &#125;<br>    &#125;);<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="è¯„è®ºåˆ—è¡¨æ¡ˆä¾‹"><a href="#è¯„è®ºåˆ—è¡¨æ¡ˆä¾‹" class="headerlink" title="è¯„è®ºåˆ—è¡¨æ¡ˆä¾‹"></a>è¯„è®ºåˆ—è¡¨æ¡ˆä¾‹</h2><p>ç›®æ ‡ï¼šä¸»è¦ç»ƒä¹ çˆ¶å­ç»„ä»¶ä¹‹é—´ä¼ å€¼</p><h2 id="ä½¿ç”¨-this-refs-æ¥è·å–å…ƒç´ å’Œç»„ä»¶"><a href="#ä½¿ç”¨-this-refs-æ¥è·å–å…ƒç´ å’Œç»„ä»¶" class="headerlink" title="ä½¿ç”¨ this.$refs æ¥è·å–å…ƒç´ å’Œç»„ä»¶"></a>ä½¿ç”¨ <code>this.$refs</code> æ¥è·å–å…ƒç´ å’Œç»„ä»¶</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;è·å–å…ƒç´ å†…å®¹&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;getElement&quot;</span> /&gt;</span><br>    <span class="hljs-comment">&lt;!-- ä½¿ç”¨ ref è·å–å…ƒç´  --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;myh1&quot;</span>&gt;</span>è¿™æ˜¯ä¸€ä¸ªå¤§å¤§çš„H1<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">hr</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- ä½¿ç”¨ ref è·å–å­ç»„ä»¶ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">my-com</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;mycom&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">my-com</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">  Vue.component(<span class="hljs-string">&#x27;my-com&#x27;</span>, &#123;</span><br><span class="handlebars"><span class="xml">    template: &#x27;<span class="hljs-tag">&lt;<span class="hljs-name">h5</span>&gt;</span>è¿™æ˜¯ä¸€ä¸ªå­ç»„ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">h5</span>&gt;</span>&#x27;,</span></span><br><span class="javascript">    <span class="hljs-function"><span class="hljs-title">data</span>(<span class="hljs-params"></span>)</span> &#123;</span><br><span class="javascript">      <span class="hljs-keyword">return</span> &#123;</span><br><span class="javascript">        name: <span class="hljs-string">&#x27;å­ç»„ä»¶&#x27;</span></span><br>      &#125;<br>    &#125;<br>  &#125;);<br><br><span class="javascript">  <span class="hljs-comment">// åˆ›å»º Vue å®ä¾‹ï¼Œå¾—åˆ° ViewModel</span></span><br><span class="javascript">  <span class="hljs-keyword">var</span> vm = <span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">    el: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br>    data: &#123;&#125;,<br>    methods: &#123;<br><span class="javascript">      <span class="hljs-function"><span class="hljs-title">getElement</span>(<span class="hljs-params"></span>)</span> &#123;</span><br><span class="javascript">        <span class="hljs-comment">// é€šè¿‡ this.$refs æ¥è·å–å…ƒç´ </span></span><br><span class="javascript">        <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>.$refs.myh1.innerText);</span><br><span class="javascript">        <span class="hljs-comment">// é€šè¿‡ this.$refs æ¥è·å–ç»„ä»¶</span></span><br><span class="javascript">        <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>.$refs.mycom.name);</span><br>      &#125;<br>    &#125;<br>  &#125;);<br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>å®Œæ•´ä»£ç </strong></p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./lib/vue-2.4.0.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;./lib/bootstrap-3.3.7.css&quot;</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></span><br><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">cmt-box</span> @<span class="hljs-attr">func</span>=<span class="hljs-string">&quot;loadComments&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">cmt-box</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;list-group&quot;</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;list-group-item&quot;</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;item in list&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;item.id&quot;</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;badge&quot;</span>&gt;</span>è¯„è®ºäººï¼š </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">item.user</span> &#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="xml">        </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">item.content</span> &#125;&#125;</span><br><span class="xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;tmpl&quot;</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>è¯„è®ºäººï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;form-control&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;user&quot;</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>è¯„è®ºå†…å®¹ï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">textarea</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;form-control&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">textarea</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;å‘è¡¨è¯„è®º&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn btn-primary&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;postComment&quot;</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">    var commentBox = &#123;</span><br><span class="xml">      data() &#123;</span><br><span class="xml">        return &#123;</span><br><span class="xml">          user: &#x27;&#x27;,</span><br><span class="xml">          content: &#x27;&#x27;</span><br><span class="xml">        &#125;</span><br><span class="xml">      &#125;,</span><br><span class="xml">      template: &#x27;#tmpl&#x27;,</span><br><span class="xml">      methods: &#123;</span><br><span class="xml">        postComment() &#123; // å‘è¡¨è¯„è®ºçš„æ–¹æ³•</span><br><span class="xml">          // åˆ†æï¼šå‘è¡¨è¯„è®ºçš„ä¸šåŠ¡é€»è¾‘</span><br><span class="xml">          // 1. è¯„è®ºæ•°æ®å­˜åˆ°å“ªé‡Œå»ï¼Ÿï¼Ÿï¼Ÿ   å­˜æ”¾åˆ°äº† localStorage ä¸­  localStorage.setItem(&#x27;cmts&#x27;, &#x27;&#x27;)</span><br><span class="xml">          // 2. å…ˆç»„ç»‡å‡ºä¸€ä¸ªæœ€æ–°çš„è¯„è®ºæ•°æ®å¯¹è±¡</span><br><span class="xml">          // 3. æƒ³åŠæ³•ï¼ŒæŠŠ ç¬¬äºŒæ­¥ä¸­ï¼Œå¾—åˆ°çš„è¯„è®ºå¯¹è±¡ï¼Œä¿å­˜åˆ° localStorage ä¸­ï¼š</span><br><span class="xml">          //  3.1 localStorage åªæ”¯æŒå­˜æ”¾å­—ç¬¦ä¸²æ•°æ®ï¼Œ è¦å…ˆè°ƒç”¨ JSON.stringify </span><br><span class="xml">          //  3.2 åœ¨ä¿å­˜ æœ€æ–°çš„ è¯„è®ºæ•°æ®ä¹‹å‰ï¼Œè¦å…ˆä» localStorage è·å–åˆ°ä¹‹å‰çš„è¯„è®ºæ•°æ®ï¼ˆstringï¼‰ï¼Œ è½¬æ¢ä¸º ä¸€ä¸ª  æ•°ç»„å¯¹è±¡ï¼Œ ç„¶åï¼ŒæŠŠæœ€æ–°çš„è¯„è®ºï¼Œ push åˆ°è¿™ä¸ªæ•°ç»„</span><br><span class="xml">          //  3.3 å¦‚æœè·å–åˆ°çš„ localStorage ä¸­çš„ è¯„è®ºå­—ç¬¦ä¸²ï¼Œä¸ºç©ºä¸å­˜åœ¨ï¼Œ åˆ™  å¯ä»¥ è¿”å›ä¸€ä¸ª &#x27;[]&#x27;  è®© JSON.parse å»è½¬æ¢</span><br><span class="xml">          //  3.4  æŠŠ æœ€æ–°çš„  è¯„è®ºåˆ—è¡¨æ•°ç»„ï¼Œå†æ¬¡è°ƒç”¨ JSON.stringify è½¬ä¸º  æ•°ç»„å­—ç¬¦ä¸²ï¼Œç„¶åè°ƒç”¨ localStorage.setItem()</span><br><br><span class="xml">          var comment = &#123; id: Date.now(), user: this.user, content: this.content &#125;</span><br><br><span class="xml">          // ä» localStorage ä¸­è·å–æ‰€æœ‰çš„è¯„è®º</span><br><span class="xml">          var list = JSON.parse(localStorage.getItem(&#x27;cmts&#x27;) || &#x27;[]&#x27;)</span><br><span class="xml">          list.unshift(comment)</span><br><span class="xml">          // é‡æ–°ä¿å­˜æœ€æ–°çš„ è¯„è®ºæ•°æ®</span><br><span class="xml">          localStorage.setItem(&#x27;cmts&#x27;, JSON.stringify(list))</span><br><br><span class="xml">          this.user = this.content = &#x27;&#x27;</span><br><br><span class="xml">          // this.loadComments() // ?????</span><br><span class="xml">          this.$emit(&#x27;func&#x27;)</span><br><span class="xml">        &#125;</span><br><span class="xml">      &#125;</span><br><span class="xml">    &#125;</span><br><br><span class="xml">    // åˆ›å»º Vue å®ä¾‹ï¼Œå¾—åˆ° ViewModel</span><br><span class="xml">    var vm = new Vue(&#123;</span><br><span class="xml">      el: &#x27;#app&#x27;,</span><br><span class="xml">      data: &#123;</span><br><span class="xml">        list: [</span><br><span class="xml">          &#123; id: Date.now(), user: &#x27;æç™½&#x27;, content: &#x27;å¤©ç”Ÿæˆ‘æå¿…æœ‰ç”¨&#x27; &#125;,</span><br><span class="xml">          &#123; id: Date.now(), user: &#x27;æ±Ÿå°ç™½&#x27;, content: &#x27;åŠå›æ›´å°½ä¸€æ¯é…’&#x27; &#125;,</span><br><span class="xml">          &#123; id: Date.now(), user: &#x27;å°é©¬&#x27;, content: &#x27;æˆ‘å§“é©¬ï¼Œ é£å¹è‰ä½è§ç‰›ç¾Šçš„é©¬&#x27; &#125;</span><br><span class="xml">        ]</span><br><span class="xml">      &#125;,</span><br><span class="xml">      beforeCreate()&#123; // æ³¨æ„ï¼šè¿™é‡Œä¸èƒ½è°ƒç”¨ loadComments æ–¹æ³•ï¼Œå› ä¸ºåœ¨æ‰§è¡Œè¿™ä¸ªé’©å­å‡½æ•°çš„æ—¶å€™ï¼Œdata å’Œ methods éƒ½è¿˜æ²¡æœ‰è¢«åˆå§‹åŒ–å¥½</span><br><br><span class="xml">      &#125;,</span><br><span class="xml">      created()&#123;</span><br><span class="xml">        this.loadComments()</span><br><span class="xml">      &#125;,</span><br><span class="xml">      methods: &#123;</span><br><span class="xml">        loadComments() &#123; // ä»æœ¬åœ°çš„ localStorage ä¸­ï¼ŒåŠ è½½è¯„è®ºåˆ—è¡¨</span><br><span class="xml">          var list = JSON.parse(localStorage.getItem(&#x27;cmts&#x27;) || &#x27;[]&#x27;)</span><br><span class="xml">          this.list = list</span><br><span class="xml">        &#125;</span><br><span class="xml">      &#125;,</span><br><span class="xml">      components: &#123;</span><br><span class="xml">        &#x27;cmt-box&#x27;: commentBox</span><br><span class="xml">      &#125;</span><br><span class="xml">    &#125;);</span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p><strong>refè·å–DOMå…ƒç´ å’Œç»„ä»¶</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./lib/vue-2.4.0.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;è·å–å…ƒç´ &quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;getElement&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;mybtn&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;myh3&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;myh3&quot;</span>&gt;</span>å“ˆå“ˆå“ˆï¼Œ ä»Šå¤©å¤©æ°”å¤ªå¥½äº†ï¼ï¼ï¼<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">hr</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">login</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;mylogin&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">login</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">    <span class="hljs-keyword">var</span> login = &#123;</span><br><span class="handlebars"><span class="xml">      template: &#x27;<span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>ç™»å½•ç»„ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>&#x27;,</span></span><br><span class="javascript">      <span class="hljs-function"><span class="hljs-title">data</span>(<span class="hljs-params"></span>)</span> &#123;</span><br><span class="javascript">        <span class="hljs-keyword">return</span> &#123;</span><br><span class="javascript">          msg: <span class="hljs-string">&#x27;son msg&#x27;</span></span><br>        &#125;<br>      &#125;,<br>      methods: &#123;<br><span class="javascript">        <span class="hljs-function"><span class="hljs-title">show</span>(<span class="hljs-params"></span>)</span> &#123;</span><br><span class="javascript">          <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;è°ƒç”¨äº†å­ç»„ä»¶çš„æ–¹æ³•&#x27;</span>)</span><br>        &#125;<br>      &#125;<br>    &#125;<br><span class="javascript">    <span class="hljs-comment">// åˆ›å»º Vue å®ä¾‹ï¼Œå¾—åˆ° ViewModel</span></span><br><span class="javascript">    <span class="hljs-keyword">var</span> vm = <span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">      el: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br>      data: &#123;&#125;,<br>      methods: &#123;<br><span class="javascript">        <span class="hljs-function"><span class="hljs-title">getElement</span>(<span class="hljs-params"></span>)</span> &#123;</span><br><span class="javascript">          <span class="hljs-comment">// console.log(document.getElementById(&#x27;myh3&#x27;).innerText)</span></span><br><br><span class="javascript">          <span class="hljs-comment">//  ref  æ˜¯ è‹±æ–‡å•è¯ ã€referenceã€‘   å€¼ç±»å‹ å’Œ å¼•ç”¨ç±»å‹  referenceError</span></span><br><span class="javascript">          <span class="hljs-comment">// console.log(this.$refs.myh3.innerText)</span></span><br><br><span class="javascript">          <span class="hljs-comment">// console.log(this.$refs.mylogin.msg)</span></span><br><span class="javascript">           <span class="hljs-built_in">this</span>.$refs.mylogin.show()</span><br>        &#125;<br>      &#125;,<br>      components: &#123;<br>        login<br>      &#125;<br>    &#125;);<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="ä»€ä¹ˆæ˜¯è·¯ç”±"><a href="#ä»€ä¹ˆæ˜¯è·¯ç”±" class="headerlink" title="ä»€ä¹ˆæ˜¯è·¯ç”±"></a>ä»€ä¹ˆæ˜¯è·¯ç”±</h2><ol><li><p><strong>åç«¯è·¯ç”±</strong>å¯¹äº<code>æ™®é€šçš„ç½‘ç«™</code>ï¼Œæ‰€æœ‰çš„è¶…é“¾æ¥éƒ½æ˜¯URLåœ°å€ï¼Œæ‰€æœ‰çš„URLåœ°å€éƒ½å¯¹åº”æœåŠ¡å™¨ä¸Šå¯¹åº”çš„èµ„æºï¼›</p></li><li><p><strong>å‰ç«¯è·¯ç”±</strong>å¯¹äº<code>å•é¡µé¢åº”ç”¨ç¨‹åº</code>æ¥è¯´ï¼Œä¸»è¦é€šè¿‡URLä¸­çš„hash(#å·)æ¥å®ç°ä¸åŒé¡µé¢ä¹‹é—´çš„åˆ‡æ¢ï¼ŒåŒæ—¶ï¼Œhashæœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼šHTTPè¯·æ±‚ä¸­ä¸ä¼šåŒ…å«hashç›¸å…³çš„å†…å®¹ï¼›æ‰€ä»¥ï¼Œå•é¡µé¢ç¨‹åºä¸­çš„é¡µé¢è·³è½¬ä¸»è¦ç”¨hashå®ç°ï¼›</p></li><li><p>åœ¨å•é¡µé¢åº”ç”¨ç¨‹åºä¸­ï¼Œè¿™ç§<code>é€šè¿‡hashæ”¹å˜æ¥åˆ‡æ¢é¡µé¢çš„æ–¹å¼ï¼Œç§°ä½œå‰ç«¯è·¯ç”±ï¼ˆåŒºåˆ«äºåç«¯è·¯ç”±ï¼‰</code>ï¼›</p></li></ol><h2 id="åœ¨-vue-ä¸­ä½¿ç”¨-vue-router"><a href="#åœ¨-vue-ä¸­ä½¿ç”¨-vue-router" class="headerlink" title="åœ¨ vue ä¸­ä½¿ç”¨ vue-router"></a>åœ¨ vue ä¸­ä½¿ç”¨ vue-router</h2><ol><li>å¯¼å…¥ vue-router ç»„ä»¶ç±»åº“ï¼š<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- 1. å¯¼å…¥ vue-router ç»„ä»¶ç±»åº“ --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./lib/vue-router-2.7.0.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li>ä½¿ç”¨ router-link ç»„ä»¶æ¥å¯¼èˆª<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- 2. ä½¿ç”¨ router-link ç»„ä»¶æ¥å¯¼èˆª --&gt;</span><br><span class="hljs-comment">&lt;!-- &lt;a href=&quot;#/login&quot;&gt;ç™»å½•&lt;/a&gt; --&gt;</span><br><span class="hljs-comment">&lt;!-- &lt;a href=&quot;#/register&quot;&gt;æ³¨å†Œ&lt;/a&gt; --&gt;</span><br><br><span class="hljs-comment">&lt;!-- router-link é»˜è®¤æ¸²æŸ“ä¸ºä¸€ä¸ªa æ ‡ç­¾ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/login&quot;</span> <span class="hljs-attr">tag</span>=<span class="hljs-string">&quot;span&quot;</span>&gt;</span>ç™»å½•<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/register&quot;</span>&gt;</span>æ³¨å†Œ<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li>ä½¿ç”¨ router-view ç»„ä»¶æ¥æ˜¾ç¤ºåŒ¹é…åˆ°çš„ç»„ä»¶<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- 3. ä½¿ç”¨ router-view ç»„ä»¶æ¥æ˜¾ç¤ºåŒ¹é…åˆ°çš„ç»„ä»¶ --&gt;</span><br><span class="hljs-comment">&lt;!-- è¿™æ˜¯ vue-router æä¾›çš„å…ƒç´ ï¼Œä¸“é—¨ç”¨æ¥ å½“ä½œå ä½ç¬¦çš„ï¼Œå°†æ¥ï¼Œè·¯ç”±è§„åˆ™ï¼ŒåŒ¹é…åˆ°çš„ç»„ä»¶ï¼Œå°±ä¼šå±•ç¤ºåˆ°è¿™ä¸ª router-view ä¸­å» --&gt;</span><br><span class="hljs-comment">&lt;!-- æ‰€ä»¥ï¼š æˆ‘ä»¬å¯ä»¥æŠŠ router-view è®¤ä¸ºæ˜¯ä¸€ä¸ªå ä½ç¬¦ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">transition</span> <span class="hljs-attr">mode</span>=<span class="hljs-string">&quot;out-in&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">router-view</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">router-view</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">transition</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li>åˆ›å»ºä½¿ç”¨<code>Vue.extend</code>åˆ›å»ºç»„ä»¶<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs actionscript"><span class="hljs-comment">// 4.1 ä½¿ç”¨ Vue.extend æ¥åˆ›å»ºç™»å½•ç»„ä»¶</span><br><span class="hljs-keyword">var</span> login = Vue.extend(&#123;<br>  template: <span class="hljs-string">&#x27;&lt;h1&gt;ç™»å½•ç»„ä»¶&lt;/h1&gt;&#x27;</span><br>&#125;);<br><br><span class="hljs-comment">// 4.2 ä½¿ç”¨ Vue.extend æ¥åˆ›å»ºæ³¨å†Œç»„ä»¶</span><br><span class="hljs-keyword">var</span> register = Vue.extend(&#123;<br>  template: <span class="hljs-string">&#x27;&lt;h1&gt;æ³¨å†Œç»„ä»¶&lt;/h1&gt;&#x27;</span><br>&#125;);<br><br><span class="hljs-comment">// ç»„ä»¶çš„æ¨¡æ¿å¯¹è±¡</span><br><span class="hljs-keyword">var</span> login = &#123;<br>  template: <span class="hljs-string">&#x27;&lt;h1&gt;ç™»å½•ç»„ä»¶&lt;/h1&gt;&#x27;</span><br>&#125;<br><span class="hljs-keyword">var</span> register = &#123;<br>  template: <span class="hljs-string">&#x27;&lt;h1&gt;æ³¨å†Œç»„ä»¶&lt;/h1&gt;&#x27;</span><br>&#125;<br><span class="hljs-comment">/*  Vue.component(&#x27;login&#x27;, &#123;</span><br><span class="hljs-comment">   template: &#x27;&lt;h1&gt;ç™»å½•ç»„ä»¶&lt;/h1&gt;&#x27;</span><br><span class="hljs-comment"> &#125;) */</span><br></code></pre></td></tr></table></figure></li><li>åˆ›å»ºä¸€ä¸ªè·¯ç”± router å®ä¾‹ï¼Œé€šè¿‡ routers å±æ€§æ¥å®šä¹‰è·¯ç”±åŒ¹é…è§„åˆ™<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">//</span> <span class="hljs-number">5</span>. åˆ›å»ºä¸€ä¸ªè·¯ç”± router å®ä¾‹ï¼Œé€šè¿‡ routers å±æ€§æ¥å®šä¹‰è·¯ç”±åŒ¹é…è§„åˆ™<br><span class="hljs-regexp">//</span> åˆ›å»ºä¸€ä¸ªè·¯ç”±å¯¹è±¡ï¼Œ å½“ å¯¼å…¥ vue-router åŒ…ä¹‹åï¼Œåœ¨ window å…¨å±€å¯¹è±¡ä¸­ï¼Œå°±æœ‰äº†ä¸€ä¸ª è·¯ç”±çš„æ„é€ å‡½æ•°ï¼Œå«åš VueRouter<br>    <span class="hljs-regexp">//</span> åœ¨ new è·¯ç”±å¯¹è±¡çš„æ—¶å€™ï¼Œå¯ä»¥ä¸º æ„é€ å‡½æ•°ï¼Œä¼ é€’ä¸€ä¸ªé…ç½®å¯¹è±¡<br>    var routerObj = new VueRouter(&#123;<br>      <span class="hljs-regexp">//</span> route <span class="hljs-regexp">//</span> è¿™ä¸ªé…ç½®å¯¹è±¡ä¸­çš„ route è¡¨ç¤º ã€è·¯ç”±åŒ¹é…è§„åˆ™ã€‘ çš„æ„æ€<br>      routes: [ <span class="hljs-regexp">//</span> è·¯ç”±åŒ¹é…è§„åˆ™ <br>        <span class="hljs-regexp">//</span> æ¯ä¸ªè·¯ç”±è§„åˆ™ï¼Œéƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªè§„åˆ™å¯¹è±¡ï¼Œèº«ä¸Šï¼Œæœ‰ä¸¤ä¸ªå¿…é¡»çš„å±æ€§ï¼š<br>        <span class="hljs-regexp">//</span>  å±æ€§<span class="hljs-number">1</span> æ˜¯ pathï¼Œ è¡¨ç¤ºç›‘å¬ å“ªä¸ªè·¯ç”±é“¾æ¥åœ°å€ï¼›<br>        <span class="hljs-regexp">//</span>  å±æ€§<span class="hljs-number">2</span> æ˜¯ componentï¼Œ è¡¨ç¤ºï¼Œå¦‚æœ è·¯ç”±æ˜¯å‰é¢åŒ¹é…åˆ°çš„ path ï¼Œåˆ™å±•ç¤º component å±æ€§å¯¹åº”çš„é‚£ä¸ªç»„ä»¶<br>        <span class="hljs-regexp">//</span> æ³¨æ„ï¼š component çš„å±æ€§å€¼ï¼Œå¿…é¡»æ˜¯ä¸€ä¸ª ç»„ä»¶çš„æ¨¡æ¿å¯¹è±¡ï¼Œ ä¸èƒ½æ˜¯ ç»„ä»¶çš„å¼•ç”¨åç§°ï¼›<br>        <span class="hljs-regexp">//</span> &#123; path: <span class="hljs-string">&#x27;/&#x27;</span>, component: login &#125;,<br>        &#123; path: <span class="hljs-string">&#x27;/&#x27;</span>, redirect: <span class="hljs-string">&#x27;/login&#x27;</span> &#125;, <span class="hljs-regexp">//</span> è¿™é‡Œçš„ redirect å’Œ Node ä¸­çš„ redirect å®Œå…¨æ˜¯ä¸¤ç äº‹<br>        &#123; path: <span class="hljs-string">&#x27;/login&#x27;</span>, component: login &#125;,<br>        &#123; path: <span class="hljs-string">&#x27;/register&#x27;</span>, component: register &#125;<br>      ],<br>      linkActiveClass: <span class="hljs-string">&#x27;myactive&#x27;</span><br>    &#125;)<br></code></pre></td></tr></table></figure></li><li>ä½¿ç”¨ router å±æ€§æ¥ä½¿ç”¨è·¯ç”±è§„åˆ™<figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs lasso"><span class="hljs-comment">// 6. åˆ›å»º Vue å®ä¾‹ï¼Œå¾—åˆ° ViewModel</span><br>    <span class="hljs-built_in">var</span> vm = <span class="hljs-literal">new</span> Vue(&#123;<br>      el: <span class="hljs-string">&#x27;#app&#x27;</span>,<br>      <span class="hljs-built_in">data</span>: &#123;&#125;,<br>      methods: &#123;&#125;,<br>      router: routerObj <span class="hljs-comment">// å°†è·¯ç”±è§„åˆ™å¯¹è±¡ï¼Œæ³¨å†Œåˆ° vm å®ä¾‹ä¸Šï¼Œç”¨æ¥ç›‘å¬ URL åœ°å€çš„å˜åŒ–ï¼Œç„¶åå±•ç¤ºå¯¹åº”çš„ç»„ä»¶</span><br>    &#125;);<br></code></pre></td></tr></table></figure><h2 id="è®¾ç½®è·¯ç”±é«˜äº®"><a href="#è®¾ç½®è·¯ç”±é«˜äº®" class="headerlink" title="è®¾ç½®è·¯ç”±é«˜äº®"></a>è®¾ç½®è·¯ç”±é«˜äº®</h2></li></ol><h2 id="è®¾ç½®è·¯ç”±åˆ‡æ¢åŠ¨æ•ˆ"><a href="#è®¾ç½®è·¯ç”±åˆ‡æ¢åŠ¨æ•ˆ" class="headerlink" title="è®¾ç½®è·¯ç”±åˆ‡æ¢åŠ¨æ•ˆ"></a>è®¾ç½®è·¯ç”±åˆ‡æ¢åŠ¨æ•ˆ</h2><h2 id="åœ¨è·¯ç”±è§„åˆ™ä¸­å®šä¹‰å‚æ•°"><a href="#åœ¨è·¯ç”±è§„åˆ™ä¸­å®šä¹‰å‚æ•°" class="headerlink" title="åœ¨è·¯ç”±è§„åˆ™ä¸­å®šä¹‰å‚æ•°"></a>åœ¨è·¯ç”±è§„åˆ™ä¸­å®šä¹‰å‚æ•°</h2><ol><li>åœ¨è§„åˆ™ä¸­å®šä¹‰å‚æ•°ï¼š<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">&#123; path: <span class="hljs-string">&#x27;/register/:id&#x27;</span>, component: register &#125;<br></code></pre></td></tr></table></figure></li><li>é€šè¿‡ <code>this.$route.params</code>æ¥è·å–è·¯ç”±ä¸­çš„å‚æ•°ï¼š<figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml">var register = Vue.extend(&#123;</span><br><span class="xml">      template: &#x27;<span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>æ³¨å†Œç»„ä»¶ --- </span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">this.$route.params.id</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>&#x27;</span><br><span class="xml">    &#125;);</span><br></code></pre></td></tr></table></figure></li></ol><p><strong>å®Œæ•´ä»£ç </strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./lib/vue-2.4.0.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./lib/vue-router-3.0.1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- å¦‚æœåœ¨è·¯ç”±ä¸­ï¼Œä½¿ç”¨ æŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œç»™è·¯ç”±ä¼ é€’å‚æ•°ï¼Œåˆ™ ä¸éœ€è¦ä¿®æ”¹ è·¯ç”±è§„åˆ™çš„ path å±æ€§ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/login?id=10&amp;name=zs&quot;</span>&gt;</span>ç™»å½•<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/register&quot;</span>&gt;</span>æ³¨å†Œ<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- å¦‚æœåœ¨è·¯ç”±ä¸­ï¼Œä½¿ç”¨ æŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œç»™è·¯ç”±ä¼ é€’å‚æ•°ï¼Œåˆ™ ä¸éœ€è¦ä¿®æ”¹ è·¯ç”±è§„åˆ™çš„ path å±æ€§ </span><br><span class="hljs-comment">    &lt;router-link to=&quot;/login/12/ls&quot;&gt;ç™»å½•&lt;/router-link&gt;</span><br><span class="hljs-comment">    &lt;router-link to=&quot;/register&quot;&gt;æ³¨å†Œ&lt;/router-link&gt;--&gt;</span><br>    <br>    <span class="hljs-tag">&lt;<span class="hljs-name">router-view</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">router-view</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">    <span class="hljs-keyword">var</span> login = &#123;</span><br><span class="handlebars"><span class="xml">      template: &#x27;<span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>ç™»å½• --- </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">$route.query.id</span> &#125;&#125;</span><span class="xml"> --- </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">$route.query.name</span> &#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>&#x27;,</span></span><br><span class="handlebars"><span class="xml">      //template: &#x27;<span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>ç™»å½• --- </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">$route.params.id</span> &#125;&#125;</span><span class="xml"> --- </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">$route.params.name</span> &#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>&#x27;,</span></span><br><span class="javascript">      <span class="hljs-function"><span class="hljs-title">data</span>(<span class="hljs-params"></span>)</span>&#123;</span><br><span class="javascript">        <span class="hljs-keyword">return</span> &#123;</span><br><span class="javascript">          msg: <span class="hljs-string">&#x27;123&#x27;</span></span><br>        &#125;<br>      &#125;,<br><span class="javascript">      <span class="hljs-function"><span class="hljs-title">created</span>(<span class="hljs-params"></span>)</span>&#123; <span class="hljs-comment">// ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°</span></span><br><span class="javascript">         <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>.$route)</span><br><span class="javascript">         <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>.$route.query.id)</span><br><span class="javascript">         <span class="hljs-comment">//console.log(this.$route.params.id)</span></span><br>      &#125;<br>    &#125;<br><span class="javascript">    <span class="hljs-keyword">var</span> register = &#123;</span><br><span class="handlebars"><span class="xml">      template: &#x27;<span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>æ³¨å†Œ<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>&#x27;</span></span><br>    &#125;<br><span class="javascript">    <span class="hljs-keyword">var</span> router = <span class="hljs-keyword">new</span> VueRouter(&#123;</span><br>      routes: [<br><span class="javascript">        &#123; <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/login&#x27;</span>, <span class="hljs-attr">component</span>: login &#125;,</span><br><span class="javascript">        <span class="hljs-comment">//&#123; path: &#x27;/login/:id/:name&#x27;, component: login &#125;,</span></span><br><span class="javascript">        &#123; <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/register&#x27;</span>, <span class="hljs-attr">component</span>: register &#125;</span><br>      ]<br>    &#125;)<br><span class="javascript">    <span class="hljs-comment">// åˆ›å»º Vue å®ä¾‹ï¼Œå¾—åˆ° ViewModel</span></span><br><span class="javascript">    <span class="hljs-keyword">var</span> vm = <span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">      el: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br>      data: &#123;&#125;,<br>      methods: &#123;&#125;,<br><span class="javascript">      <span class="hljs-comment">// router: router</span></span><br>      router<br>    &#125;);<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="ä½¿ç”¨-children-å±æ€§å®ç°è·¯ç”±åµŒå¥—"><a href="#ä½¿ç”¨-children-å±æ€§å®ç°è·¯ç”±åµŒå¥—" class="headerlink" title="ä½¿ç”¨ children å±æ€§å®ç°è·¯ç”±åµŒå¥—"></a>ä½¿ç”¨ <code>children</code> å±æ€§å®ç°è·¯ç”±åµŒå¥—</h2><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs xquery"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span></span><br><span class="xml">  </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/account&quot;</span>&gt;</span>Account<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span></span><br><span class="xml">  </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">router-view</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">router-view</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">  // çˆ¶è·¯ç”±ä¸­çš„ç»„ä»¶</span><br><span class="xml">  const account = Vue.extend(</span><span class="xquery">&#123;</span><br><span class="xquery">    template: `<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span></span><br><span class="xquery">      è¿™æ˜¯accountç»„ä»¶</span><br><span class="xquery">      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/account/login&quot;</span>&gt;</span>login<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span></span> | </span><br><span class="xquery">      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/account/register&quot;</span>&gt;</span>register<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span></span></span><br><span class="xquery">      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">router-view</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">router-view</span>&gt;</span></span></span><br><span class="xquery">    &lt;/div&gt;`</span><br><span class="xquery">  &#125;</span><span class="xml">);</span><br><br><span class="xml">  // å­è·¯ç”±ä¸­çš„ login ç»„ä»¶</span><br><span class="xml">  const login = Vue.extend(</span><span class="xquery">&#123;</span><br><span class="xquery">    template: <span class="hljs-string">&#x27;&lt;div&gt;ç™»å½•ç»„ä»¶&lt;/div&gt;&#x27;</span></span><br><span class="xquery">  &#125;</span><span class="xml">);</span><br><br><span class="xml">  // å­è·¯ç”±ä¸­çš„ register ç»„ä»¶</span><br><span class="xml">  const register = Vue.extend(</span><span class="xquery">&#123;</span><br><span class="xquery">    template: <span class="hljs-string">&#x27;&lt;div&gt;æ³¨å†Œç»„ä»¶&lt;/div&gt;&#x27;</span></span><br><span class="xquery">  &#125;</span><span class="xml">);</span><br><br><span class="xml">  // è·¯ç”±å®ä¾‹</span><br><span class="xml">  var router = new VueRouter(</span><span class="xquery">&#123;</span><br><span class="xquery">    routes: [</span><br><span class="xquery">      &#123;<span class="hljs-built_in"> path</span>: <span class="hljs-string">&#x27;/&#x27;</span>, redirect: <span class="hljs-string">&#x27;/account/login&#x27;</span> &#125;</span><span class="xml">, // ä½¿ç”¨ redirect å®ç°è·¯ç”±é‡å®šå‘</span><br><span class="xml">      </span><span class="xquery">&#123;</span><br><span class="xquery">       <span class="hljs-built_in"> path</span>: <span class="hljs-string">&#x27;/account&#x27;</span>,</span><br><span class="xquery">        component: account,</span><br><span class="xquery">        children: [ // é€šè¿‡ children æ•°ç»„å±æ€§ï¼Œæ¥å®ç°è·¯ç”±çš„åµŒå¥—</span><br><span class="xquery">          &#123;<span class="hljs-built_in"> path</span>: <span class="hljs-string">&#x27;login&#x27;</span>, component: login &#125;</span><span class="xml">, // æ³¨æ„ï¼Œå­è·¯ç”±çš„å¼€å¤´ä½ç½®ï¼Œä¸è¦åŠ  / è·¯å¾„ç¬¦</span><br><span class="xml">          </span><span class="xquery">&#123;<span class="hljs-built_in"> path</span>: <span class="hljs-string">&#x27;register&#x27;</span>, component: register &#125;</span><br><span class="xml">        ]</span><br><span class="xml">      &#125;</span><br><span class="xml">    ]</span><br><span class="xml">  &#125;);</span><br><br><span class="xml">  // åˆ›å»º Vue å®ä¾‹ï¼Œå¾—åˆ° ViewModel</span><br><span class="xml">  var vm = new Vue(</span><span class="xquery">&#123;</span><br><span class="xquery">    el: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="xquery">    data: &#123;&#125;</span><span class="xml">,</span><br><span class="xml">    methods: </span><span class="xquery">&#123;&#125;</span><span class="xml">,</span><br><span class="xml">    components: </span><span class="xquery">&#123;</span><br><span class="xquery">      account</span><br><span class="xquery">    &#125;</span><span class="xml">,</span><br><span class="xml">    router: router</span><br><span class="xml">  &#125;);</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs xquery"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></span><br><span class="xml">  </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./lib/vue-2.4.0.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">  </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./lib/vue-router-3.0.1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></span><br><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="xml">  </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span></span><br><span class="xml">    </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/account&quot;</span>&gt;</span>Account<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span></span><br><span class="xml">    </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">router-view</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">router-view</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">  </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;tmpl&quot;</span>&gt;</span></span><br><span class="xml">    </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">      </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>è¿™æ˜¯ Account ç»„ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="xml">      </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/account/login&quot;</span>&gt;</span>ç™»å½•<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span></span><br><span class="xml">      </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/account/register&quot;</span>&gt;</span>æ³¨å†Œ<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span></span><br><span class="xml">      </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">router-view</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">router-view</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><br><span class="xml">  </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">    // ç»„ä»¶çš„æ¨¡æ¿å¯¹è±¡</span><br><span class="xml">    var account = </span><span class="xquery">&#123;</span><br><span class="xquery">      template: <span class="hljs-string">&#x27;#tmpl&#x27;</span></span><br><span class="xquery">    &#125;</span><br><span class="xml">    var login = </span><span class="xquery">&#123;</span><br><span class="xquery">      template: <span class="hljs-string">&#x27;&lt;h3&gt;ç™»å½•&lt;/h3&gt;&#x27;</span></span><br><span class="xquery">    &#125;</span><br><span class="xml">    var register = </span><span class="xquery">&#123;</span><br><span class="xquery">      template: <span class="hljs-string">&#x27;&lt;h3&gt;æ³¨å†Œ&lt;/h3&gt;&#x27;</span></span><br><span class="xquery">    &#125;</span><br><span class="xml">    var router = new VueRouter(</span><span class="xquery">&#123;</span><br><span class="xquery">      routes: [</span><br><span class="xquery">        &#123;</span><br><span class="xquery">         <span class="hljs-built_in"> path</span>: <span class="hljs-string">&#x27;/account&#x27;</span>,</span><br><span class="xquery">          component: account,</span><br><span class="xquery">          // ä½¿ç”¨ children å±æ€§ï¼Œå®ç°å­è·¯ç”±ï¼ŒåŒæ—¶ï¼Œå­è·¯ç”±çš„<span class="hljs-built_in"> path</span> å‰é¢ï¼Œä¸è¦å¸¦ / ï¼Œå¦åˆ™æ°¸è¿œä»¥æ ¹è·¯å¾„å¼€å§‹è¯·æ±‚ï¼Œè¿™æ ·ä¸æ–¹ä¾¿æˆ‘ä»¬ç”¨æˆ·å»ç†è§£URLåœ°å€</span><br><span class="xquery">          children: [</span><br><span class="xquery">            &#123;<span class="hljs-built_in"> path</span>: <span class="hljs-string">&#x27;login&#x27;</span>, component: login &#125;</span><span class="xml">,</span><br><span class="xml">            </span><span class="xquery">&#123;<span class="hljs-built_in"> path</span>: <span class="hljs-string">&#x27;register&#x27;</span>, component: register &#125;</span><br><span class="xml">          ]</span><br><span class="xml">        &#125;</span><br><span class="xml">        // </span><span class="xquery">&#123;<span class="hljs-built_in"> path</span>: <span class="hljs-string">&#x27;/account/login&#x27;</span>, component: login &#125;</span><span class="xml">,</span><br><span class="xml">        // </span><span class="xquery">&#123;<span class="hljs-built_in"> path</span>: <span class="hljs-string">&#x27;/account/register&#x27;</span>, component: register &#125;</span><br><span class="xml">      ]</span><br><span class="xml">    &#125;)</span><br><span class="xml">    // åˆ›å»º Vue å®ä¾‹ï¼Œå¾—åˆ° ViewModel</span><br><span class="xml">    var vm = new Vue(</span><span class="xquery">&#123;</span><br><span class="xquery">      el: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="xquery">      data: &#123;&#125;</span><span class="xml">,</span><br><span class="xml">      methods: </span><span class="xquery">&#123;&#125;</span><span class="xml">,</span><br><span class="xml">      router</span><br><span class="xml">    &#125;);</span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h2 id="å‘½åè§†å›¾å®ç°ç»å…¸å¸ƒå±€"><a href="#å‘½åè§†å›¾å®ç°ç»å…¸å¸ƒå±€" class="headerlink" title="å‘½åè§†å›¾å®ç°ç»å…¸å¸ƒå±€"></a>å‘½åè§†å›¾å®ç°ç»å…¸å¸ƒå±€</h2><ol><li>æ ‡ç­¾ä»£ç ç»“æ„ï¼š<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">router-view</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">router-view</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">router-view</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;a&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">router-view</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">router-view</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;b&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">router-view</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li>JSä»£ç ï¼š<figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">    var header = Vue.component(&#x27;header&#x27;, </span><span class="hljs-template-variable">&#123;</span><br><span class="hljs-template-variable">      template: &#x27;&lt;div class=&quot;header&quot;&gt;header&lt;/div&gt;&#x27;</span><br><span class="hljs-template-variable">    &#125;</span><span class="xml">);</span><br><br><span class="xml">    var sidebar = Vue.component(&#x27;sidebar&#x27;, </span><span class="hljs-template-variable">&#123;</span><br><span class="hljs-template-variable">      template: &#x27;&lt;div class=&quot;sidebar&quot;&gt;sidebar&lt;/div&gt;&#x27;</span><br><span class="hljs-template-variable">    &#125;</span><span class="xml">);</span><br><br><span class="xml">    var mainbox = Vue.component(&#x27;mainbox&#x27;, </span><span class="hljs-template-variable">&#123;</span><br><span class="hljs-template-variable">      template: &#x27;&lt;div class=&quot;mainbox&quot;&gt;mainbox&lt;/div&gt;&#x27;</span><br><span class="hljs-template-variable">    &#125;</span><span class="xml">);</span><br><br><span class="xml">    // åˆ›å»ºè·¯ç”±å¯¹è±¡</span><br><span class="xml">    var router = new VueRouter(</span><span class="hljs-template-variable">&#123;</span><br><span class="hljs-template-variable">      routes: [</span><br><span class="hljs-template-variable">        &#123;</span><br><span class="hljs-template-variable">          path: &#x27;/&#x27;, components: &#123;</span><br><span class="hljs-template-variable">            <span class="hljs-keyword">default</span>: header,</span><br><span class="hljs-template-variable">            a: sidebar,</span><br><span class="hljs-template-variable">            b: mainbox</span><br><span class="hljs-template-variable">          &#125;</span><br><span class="xml">        &#125;</span><br><span class="xml">      ]</span><br><span class="xml">    &#125;);</span><br><br><span class="xml">    // åˆ›å»º Vue å®ä¾‹ï¼Œå¾—åˆ° ViewModel</span><br><span class="xml">    var vm = new Vue(</span><span class="hljs-template-variable">&#123;</span><br><span class="hljs-template-variable">      el: &#x27;#app&#x27;,</span><br><span class="hljs-template-variable">      data: &#123;&#125;</span><span class="xml">,</span><br><span class="xml">      methods: </span><span class="hljs-template-variable">&#123;&#125;</span><span class="xml">,</span><br><span class="xml">      router</span><br><span class="xml">    &#125;);</span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure></li><li>CSS æ ·å¼ï¼š<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><br>  .header &#123;<br><span class="css">    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid red;</span><br>  &#125;<br><br>  .content&#123;<br><span class="css">    <span class="hljs-attribute">display</span>: flex;</span><br>  &#125;<br>  .sidebar &#123;<br><span class="css">    <span class="hljs-attribute">flex</span>: <span class="hljs-number">2</span>;</span><br><span class="css">    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid green;</span><br><span class="css">    <span class="hljs-attribute">height</span>: <span class="hljs-number">500px</span>;</span><br>  &#125;<br>  .mainbox&#123;<br><span class="css">    <span class="hljs-attribute">flex</span>: <span class="hljs-number">8</span>;</span><br><span class="css">    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid blue;</span><br><span class="css">    <span class="hljs-attribute">height</span>: <span class="hljs-number">500px</span>;</span><br>  &#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ol><p><strong>æ¡ˆä¾‹ä»£ç </strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./lib/vue-2.4.0.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./lib/vue-router-3.0.1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><br><span class="css">    <span class="hljs-selector-tag">html</span>,</span><br><span class="css">    <span class="hljs-selector-tag">body</span> &#123;</span><br><span class="css">      <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;</span><br><span class="css">      <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;</span><br>    &#125;<br>    .header &#123;<br><span class="css">      <span class="hljs-attribute">background-color</span>: orange;</span><br><span class="css">      <span class="hljs-attribute">height</span>: <span class="hljs-number">80px</span>;</span><br>    &#125;<br><span class="css">    <span class="hljs-selector-tag">h1</span> &#123;</span><br><span class="css">      <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;</span><br><span class="css">      <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;</span><br><span class="css">      <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;</span><br>    &#125;<br>    .container &#123;<br><span class="css">      <span class="hljs-attribute">display</span>: flex;</span><br><span class="css">      <span class="hljs-attribute">height</span>: <span class="hljs-number">600px</span>;</span><br>    &#125;<br>    .left &#123;<br><span class="css">      <span class="hljs-attribute">background-color</span>: lightgreen;</span><br><span class="css">      <span class="hljs-attribute">flex</span>: <span class="hljs-number">2</span>;</span><br>    &#125;<br>    .main &#123;<br><span class="css">      <span class="hljs-attribute">background-color</span>: lightpink;</span><br><span class="css">      <span class="hljs-attribute">flex</span>: <span class="hljs-number">8</span>;</span><br>    &#125;<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">router-view</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">router-view</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">router-view</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;left&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">router-view</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">router-view</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;main&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">router-view</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">    <span class="hljs-keyword">var</span> header = &#123;</span><br><span class="handlebars"><span class="xml">      template: &#x27;<span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;header&quot;</span>&gt;</span>Headerå¤´éƒ¨åŒºåŸŸ<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>&#x27;</span></span><br>    &#125;<br><span class="javascript">    <span class="hljs-keyword">var</span> leftBox = &#123;</span><br><span class="handlebars"><span class="xml">      template: &#x27;<span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;left&quot;</span>&gt;</span>Leftä¾§è¾¹æ åŒºåŸŸ<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>&#x27;</span></span><br>    &#125;<br><span class="javascript">    <span class="hljs-keyword">var</span> mainBox = &#123;</span><br><span class="handlebars"><span class="xml">      template: &#x27;<span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;main&quot;</span>&gt;</span>mainBoxä¸»ä½“åŒºåŸŸ<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>&#x27;</span></span><br>    &#125;<br><span class="javascript">    <span class="hljs-comment">// åˆ›å»ºè·¯ç”±å¯¹è±¡</span></span><br><span class="javascript">    <span class="hljs-keyword">var</span> router = <span class="hljs-keyword">new</span> VueRouter(&#123;</span><br>      routes: [<br>        /* &#123; path: &#x27;/&#x27;, component: header &#125;,<br><span class="javascript">        &#123; <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/left&#x27;</span>, <span class="hljs-attr">component</span>: leftBox &#125;,</span><br><span class="javascript">        &#123; <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/main&#x27;</span>, <span class="hljs-attr">component</span>: mainBox &#125; */</span><br>        &#123;<br><span class="javascript">          path: <span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-attr">components</span>: &#123;</span><br><span class="javascript">            <span class="hljs-string">&#x27;default&#x27;</span>: header,</span><br><span class="javascript">            <span class="hljs-string">&#x27;left&#x27;</span>: leftBox,</span><br><span class="javascript">            <span class="hljs-string">&#x27;main&#x27;</span>: mainBox</span><br>          &#125;<br>        &#125;<br>      ]<br>    &#125;)<br><span class="javascript">    <span class="hljs-comment">// åˆ›å»º Vue å®ä¾‹ï¼Œå¾—åˆ° ViewModel</span></span><br><span class="javascript">    <span class="hljs-keyword">var</span> vm = <span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">      el: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br>      data: &#123;&#125;,<br>      methods: &#123;&#125;,<br>      router<br>    &#125;);<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="watchå±æ€§çš„ä½¿ç”¨"><a href="#watchå±æ€§çš„ä½¿ç”¨" class="headerlink" title="watchå±æ€§çš„ä½¿ç”¨"></a><code>watch</code>å±æ€§çš„ä½¿ç”¨</h2><p>è€ƒè™‘ä¸€ä¸ªé—®é¢˜ï¼šæƒ³è¦å®ç° <code>å</code> å’Œ <code>å§“</code> ä¸¤ä¸ªæ–‡æœ¬æ¡†çš„å†…å®¹æ”¹å˜ï¼Œåˆ™å…¨åçš„æ–‡æœ¬æ¡†ä¸­çš„å€¼ä¹Ÿè·Ÿç€æ”¹å˜ï¼›ï¼ˆç”¨ä»¥å‰çš„çŸ¥è¯†å¦‚ä½•å®ç°ï¼Ÿï¼Ÿï¼Ÿï¼‰</p><ol><li>ç›‘å¬<code>data</code>ä¸­å±æ€§çš„æ”¹å˜ï¼š<figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;firstName&quot;</span>&gt;</span> +</span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;lastName&quot;</span>&gt;</span> =</span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">fullName</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">    // åˆ›å»º Vue å®ä¾‹ï¼Œå¾—åˆ° ViewModel</span><br><span class="xml">    var vm = new Vue(&#123;</span><br><span class="xml">      el: &#x27;#app&#x27;,</span><br><span class="xml">      data: &#123;</span><br><span class="xml">        firstName: &#x27;jack&#x27;,</span><br><span class="xml">        lastName: &#x27;chen&#x27;,</span><br><span class="xml">        fullName: &#x27;jack - chen&#x27;</span><br><span class="xml">      &#125;,</span><br><span class="xml">      methods: &#123;&#125;,</span><br><span class="xml">      watch: &#123;</span><br><span class="xml">        &#x27;firstName&#x27;: function (newVal, oldVal) &#123; // ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ–°æ•°æ®ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ—§æ•°æ®</span><br><span class="xml">          this.fullName = newVal + &#x27; - &#x27; + this.lastName;</span><br><span class="xml">        &#125;,</span><br><span class="xml">        &#x27;lastName&#x27;: function (newVal, oldVal) &#123;</span><br><span class="xml">          this.fullName = this.firstName + &#x27; - &#x27; + newVal;</span><br><span class="xml">        &#125;</span><br><span class="xml">      &#125;</span><br><span class="xml">    &#125;);</span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure></li><li>ç›‘å¬è·¯ç”±å¯¹è±¡çš„æ”¹å˜ï¼š<figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs xquery"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span></span><br><span class="xml">    </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/login&quot;</span>&gt;</span>ç™»å½•<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span></span><br><span class="xml">    </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/register&quot;</span>&gt;</span>æ³¨å†Œ<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span></span><br><br><span class="xml">    </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">router-view</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">router-view</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><br>  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">    var login = Vue.extend(</span><span class="xquery">&#123;</span><br><span class="xquery">      template: <span class="hljs-string">&#x27;&lt;h1&gt;ç™»å½•ç»„ä»¶&lt;/h1&gt;&#x27;</span></span><br><span class="xquery">    &#125;</span><span class="xml">);</span><br><br><span class="xml">    var register = Vue.extend(</span><span class="xquery">&#123;</span><br><span class="xquery">      template: <span class="hljs-string">&#x27;&lt;h1&gt;æ³¨å†Œç»„ä»¶&lt;/h1&gt;&#x27;</span></span><br><span class="xquery">    &#125;</span><span class="xml">);</span><br><br><span class="xml">    var router = new VueRouter(</span><span class="xquery">&#123;</span><br><span class="xquery">      routes: [</span><br><span class="xquery">        &#123;<span class="hljs-built_in"> path</span>: <span class="hljs-string">&quot;/login&quot;</span>, component: login &#125;</span><span class="xml">,</span><br><span class="xml">        </span><span class="xquery">&#123;<span class="hljs-built_in"> path</span>: <span class="hljs-string">&quot;/register&quot;</span>, component: register &#125;</span><br><span class="xml">      ]</span><br><span class="xml">    &#125;);</span><br><br><span class="xml">    // åˆ›å»º Vue å®ä¾‹ï¼Œå¾—åˆ° ViewModel</span><br><span class="xml">    var vm = new Vue(</span><span class="xquery">&#123;</span><br><span class="xquery">      el: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="xquery">      data: &#123;&#125;</span><span class="xml">,</span><br><span class="xml">      methods: </span><span class="xquery">&#123;&#125;</span><span class="xml">,</span><br><span class="xml">      router: router,</span><br><span class="xml">      watch: </span><span class="xquery">&#123;</span><br><span class="xquery">        <span class="hljs-string">&#x27;$route&#x27;</span>: <span class="hljs-keyword">function</span> (newVal, oldVal) &#123;</span><br><span class="xquery">          <span class="hljs-keyword">if</span> (newVal<span class="hljs-built_in">.path</span> === <span class="hljs-string">&#x27;/login&#x27;</span>) &#123;</span><br><span class="xquery">            console.log(<span class="hljs-string">&#x27;è¿™æ˜¯ç™»å½•ç»„ä»¶&#x27;</span>);</span><br><span class="xquery">          &#125;</span><br><span class="xml">        &#125;</span><br><span class="xml">      &#125;</span><br><span class="xml">    &#125;);</span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./lib/vue-2.4.0.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-comment">&lt;!-- 1. å¯¼å…¥åŒ… --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./lib/vue-router-3.0.1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/login&quot;</span>&gt;</span>ç™»å½•<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/register&quot;</span>&gt;</span>æ³¨å†Œ<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- å®¹å™¨ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">router-view</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">router-view</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">    <span class="hljs-comment">// 2. åˆ›å»ºå­ç»„ä»¶</span></span><br><span class="javascript">    <span class="hljs-keyword">var</span> login = &#123;</span><br><span class="handlebars"><span class="xml">      template: &#x27;<span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>è¿™æ˜¯ç™»å½•å­ç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶æ˜¯ å¥”æ³¢éœ¸ å¼€å‘çš„ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>&#x27;</span></span><br>    &#125;<br><br><span class="javascript">    <span class="hljs-keyword">var</span> register = &#123;</span><br><span class="handlebars"><span class="xml">      template: &#x27;<span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>è¿™æ˜¯æ³¨å†Œå­ç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶æ˜¯ éœ¸æ³¢å¥” å¼€å‘çš„ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>&#x27;</span></span><br>    &#125;<br><br><span class="javascript">    <span class="hljs-comment">// 3. åˆ›å»ºä¸€ä¸ªè·¯ç”±å¯¹è±¡</span></span><br><span class="javascript">    <span class="hljs-keyword">var</span> router = <span class="hljs-keyword">new</span> VueRouter(&#123;</span><br><span class="javascript">      routes: [ <span class="hljs-comment">// è·¯ç”±è§„åˆ™æ•°ç»„</span></span><br><span class="javascript">        &#123; <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-attr">redirect</span>: <span class="hljs-string">&#x27;/login&#x27;</span> &#125;,</span><br><span class="javascript">        &#123; <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/login&#x27;</span>, <span class="hljs-attr">component</span>: login &#125;,</span><br><span class="javascript">        &#123; <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/register&#x27;</span>, <span class="hljs-attr">component</span>: register &#125;</span><br>      ],<br><span class="javascript">      linkActiveClass: <span class="hljs-string">&#x27;myactive&#x27;</span> <span class="hljs-comment">// å’Œæ¿€æ´»ç›¸å…³çš„ç±»</span></span><br>    &#125;)<br><br><span class="javascript">    <span class="hljs-comment">// åˆ›å»º Vue å®ä¾‹ï¼Œå¾—åˆ° ViewModel</span></span><br><span class="javascript">    <span class="hljs-keyword">var</span> vm = <span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">      el: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br>      data: &#123;&#125;,<br>      methods: &#123;&#125;,<br><span class="javascript">      <span class="hljs-comment">// router: router</span></span><br>      router,<br>      watch: &#123;<br><span class="javascript">        <span class="hljs-comment">//  this.$route.path</span></span><br><span class="javascript">        <span class="hljs-string">&#x27;$route.path&#x27;</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">newVal, oldVal</span>) </span>&#123;</span><br><span class="javascript">          <span class="hljs-comment">// console.log(newVal + &#x27; --- &#x27; + oldVal)</span></span><br><span class="javascript">          <span class="hljs-keyword">if</span> (newVal === <span class="hljs-string">&#x27;/login&#x27;</span>) &#123;</span><br><span class="javascript">            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;æ¬¢è¿è¿›å…¥ç™»å½•é¡µé¢&#x27;</span>)</span><br><span class="javascript">          &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (newVal === <span class="hljs-string">&#x27;/register&#x27;</span>) &#123;</span><br><span class="javascript">            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;æ¬¢è¿è¿›å…¥æ³¨å†Œé¡µé¢&#x27;</span>)</span><br>          &#125;<br>        &#125;<br>      &#125;<br>    &#125;);<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ol><h2 id="computedè®¡ç®—å±æ€§çš„ä½¿ç”¨"><a href="#computedè®¡ç®—å±æ€§çš„ä½¿ç”¨" class="headerlink" title="computedè®¡ç®—å±æ€§çš„ä½¿ç”¨"></a><code>computed</code>è®¡ç®—å±æ€§çš„ä½¿ç”¨</h2><ol><li>é»˜è®¤åªæœ‰<code>getter</code>çš„è®¡ç®—å±æ€§ï¼š<figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;firstName&quot;</span>&gt;</span> +</span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;lastName&quot;</span>&gt;</span> =</span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">fullName</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">    // åˆ›å»º Vue å®ä¾‹ï¼Œå¾—åˆ° ViewModel</span><br><span class="xml">    var vm = new Vue(&#123;</span><br><span class="xml">      el: &#x27;#app&#x27;,</span><br><span class="xml">      data: &#123;</span><br><span class="xml">        firstName: &#x27;jack&#x27;,</span><br><span class="xml">        lastName: &#x27;chen&#x27;</span><br><span class="xml">      &#125;,</span><br><span class="xml">      methods: &#123;&#125;,</span><br><span class="xml">      computed: &#123; // è®¡ç®—å±æ€§ï¼› ç‰¹ç‚¹ï¼šå½“è®¡ç®—å±æ€§ä¸­æ‰€ä»¥æ¥çš„ä»»ä½•ä¸€ä¸ª data å±æ€§æ”¹å˜ä¹‹åï¼Œéƒ½ä¼šé‡æ–°è§¦å‘ æœ¬è®¡ç®—å±æ€§ çš„é‡æ–°è®¡ç®—ï¼Œä»è€Œæ›´æ–° fullName çš„å€¼</span><br><span class="xml">        fullName() &#123;</span><br><span class="xml">          return this.firstName + &#x27; - &#x27; + this.lastName;</span><br><span class="xml">        &#125;</span><br><span class="xml">      &#125;</span><br><span class="xml">    &#125;);</span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure></li><li>å®šä¹‰æœ‰<code>getter</code>å’Œ<code>setter</code>çš„è®¡ç®—å±æ€§ï¼š<figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;firstName&quot;</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;lastName&quot;</span>&gt;</span></span><br><span class="xml">    <span class="hljs-comment">&lt;!-- ç‚¹å‡»æŒ‰é’®é‡æ–°ä¸º è®¡ç®—å±æ€§ fullName èµ‹å€¼ --&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;ä¿®æ”¹fullName&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;changeName&quot;</span>&gt;</span></span><br><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">fullName</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">    // åˆ›å»º Vue å®ä¾‹ï¼Œå¾—åˆ° ViewModel</span><br><span class="xml">    var vm = new Vue(&#123;</span><br><span class="xml">      el: &#x27;#app&#x27;,</span><br><span class="xml">      data: &#123;</span><br><span class="xml">        firstName: &#x27;jack&#x27;,</span><br><span class="xml">        lastName: &#x27;chen&#x27;</span><br><span class="xml">      &#125;,</span><br><span class="xml">      methods: &#123;</span><br><span class="xml">        changeName() &#123;</span><br><span class="xml">          this.fullName = &#x27;TOM - chen2&#x27;;</span><br><span class="xml">        &#125;</span><br><span class="xml">      &#125;,</span><br><span class="xml">      computed: &#123;</span><br><span class="xml">        fullName: &#123;</span><br><span class="xml">          get: function () &#123;</span><br><span class="xml">            return this.firstName + &#x27; - &#x27; + this.lastName;</span><br><span class="xml">          &#125;,</span><br><span class="xml">          set: function (newVal) &#123;</span><br><span class="xml">            var parts = newVal.split(&#x27; - &#x27;);</span><br><span class="xml">            this.firstName = parts[0];</span><br><span class="xml">            this.lastName = parts[1];</span><br><span class="xml">          &#125;</span><br><span class="xml">        &#125;</span><br><span class="xml">      &#125;</span><br><span class="xml">    &#125;);</span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h2 id="watchã€computedå’Œmethodsä¹‹é—´çš„å¯¹æ¯”"><a href="#watchã€computedå’Œmethodsä¹‹é—´çš„å¯¹æ¯”" class="headerlink" title="watchã€computedå’Œmethodsä¹‹é—´çš„å¯¹æ¯”"></a><code>watch</code>ã€<code>computed</code>å’Œ<code>methods</code>ä¹‹é—´çš„å¯¹æ¯”</h2></li><li><code>computed</code>å±æ€§çš„ç»“æœä¼šè¢«ç¼“å­˜ï¼Œé™¤éä¾èµ–çš„å“åº”å¼å±æ€§å˜åŒ–æ‰ä¼šé‡æ–°è®¡ç®—ã€‚ä¸»è¦å½“ä½œå±æ€§æ¥ä½¿ç”¨ï¼›</li><li><code>methods</code>æ–¹æ³•è¡¨ç¤ºä¸€ä¸ªå…·ä½“çš„æ“ä½œï¼Œä¸»è¦ä¹¦å†™ä¸šåŠ¡é€»è¾‘ï¼›</li><li><code>watch</code>ä¸€ä¸ªå¯¹è±¡ï¼Œé”®æ˜¯éœ€è¦è§‚å¯Ÿçš„è¡¨è¾¾å¼ï¼Œå€¼æ˜¯å¯¹åº”å›è°ƒå‡½æ•°ã€‚ä¸»è¦ç”¨æ¥ç›‘å¬æŸäº›ç‰¹å®šæ•°æ®çš„å˜åŒ–ï¼Œä»è€Œè¿›è¡ŒæŸäº›å…·ä½“çš„ä¸šåŠ¡é€»è¾‘æ“ä½œï¼›å¯ä»¥çœ‹ä½œæ˜¯<code>computed</code>å’Œ<code>methods</code>çš„ç»“åˆä½“ï¼›</li></ol><h2 id="nrmçš„å®‰è£…ä½¿ç”¨"><a href="#nrmçš„å®‰è£…ä½¿ç”¨" class="headerlink" title="nrmçš„å®‰è£…ä½¿ç”¨"></a><code>nrm</code>çš„å®‰è£…ä½¿ç”¨</h2><p>ä½œç”¨ï¼šæä¾›äº†ä¸€äº›æœ€å¸¸ç”¨çš„NPMåŒ…é•œåƒåœ°å€ï¼Œèƒ½å¤Ÿè®©æˆ‘ä»¬å¿«é€Ÿçš„åˆ‡æ¢å®‰è£…åŒ…æ—¶å€™çš„æœåŠ¡å™¨åœ°å€ï¼›<br>ä»€ä¹ˆæ˜¯é•œåƒï¼šåŸæ¥åŒ…åˆšä¸€å¼€å§‹æ˜¯åªå­˜åœ¨äºå›½å¤–çš„NPMæœåŠ¡å™¨ï¼Œä½†æ˜¯ç”±äºç½‘ç»œåŸå› ï¼Œç»å¸¸è®¿é—®ä¸åˆ°ï¼Œè¿™æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å›½å†…ï¼Œåˆ›å»ºä¸€ä¸ªå’Œå®˜ç½‘å®Œå…¨ä¸€æ ·çš„NPMæœåŠ¡å™¨ï¼Œåªä¸è¿‡ï¼Œæ•°æ®éƒ½æ˜¯ä»äººå®¶é‚£é‡Œæ‹¿è¿‡æ¥çš„ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œä½¿ç”¨æ–¹å¼å®Œå…¨ä¸€æ ·ï¼›</p><ol><li>è¿è¡Œ<code>npm i nrm -g</code>å…¨å±€å®‰è£…<code>nrm</code>åŒ…ï¼›</li><li>ä½¿ç”¨<code>nrm ls</code>æŸ¥çœ‹å½“å‰æ‰€æœ‰å¯ç”¨çš„é•œåƒæºåœ°å€ä»¥åŠå½“å‰æ‰€ä½¿ç”¨çš„é•œåƒæºåœ°å€ï¼›</li><li>ä½¿ç”¨<code>nrm use npm</code>æˆ–<code>nrm use taobao</code>åˆ‡æ¢ä¸åŒçš„é•œåƒæºåœ°å€ï¼›</li></ol><blockquote><p>æ³¨æ„ï¼šnrmåªæ˜¯å•çº¯çš„æä¾›äº†å‡ ä¸ªå¸¸ç”¨çš„  ä¸‹è½½åŒ…çš„  URLåœ°å€ï¼Œå¹¶èƒ½å¤Ÿè®©æˆ‘ä»¬åœ¨  è¿™å‡ ä¸ª   åœ°å€ä¹‹é—´ï¼Œå¾ˆæ–¹ä¾¿çš„è¿›è¡Œåˆ‡æ¢ï¼Œä½†æ˜¯ï¼Œæ¯æ¬¡æˆ‘ä»¬è£…åŒ…æ—¶ï¼Œä½¿ç”¨çš„  è£…åŒ…å·¥å…·éƒ½è¿˜æ˜¯  npm</p></blockquote><h2 id="ç›¸å…³æ–‡ä»¶"><a href="#ç›¸å…³æ–‡ä»¶" class="headerlink" title="ç›¸å…³æ–‡ä»¶"></a>ç›¸å…³æ–‡ä»¶</h2><ol><li><a href="http://www.cnblogs.com/joyho/articles/4430148.html">URLä¸­çš„hashï¼ˆäº•å·ï¼‰</a></li></ol>]]></content>
    
    
    <categories>
      
      <category>Vue.js</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Vue.js-II</title>
    <link href="/2019/11/02/Vue-js-II/"/>
    <url>/2019/11/02/Vue-js-II/</url>
    
    <content type="html"><![CDATA[<h1 id="Vue-js-II"><a href="#Vue-js-II" class="headerlink" title="Vue.js - II"></a>Vue.js - II</h1><h2 id="å“ç‰Œç®¡ç†æ¡ˆä¾‹"><a href="#å“ç‰Œç®¡ç†æ¡ˆä¾‹" class="headerlink" title="å“ç‰Œç®¡ç†æ¡ˆä¾‹"></a>å“ç‰Œç®¡ç†æ¡ˆä¾‹</h2><h3 id="æ·»åŠ æ–°å“ç‰Œã€åˆ é™¤å“ç‰Œã€æ ¹æ®æ¡ä»¶ç­›é€‰å“ç‰Œ"><a href="#æ·»åŠ æ–°å“ç‰Œã€åˆ é™¤å“ç‰Œã€æ ¹æ®æ¡ä»¶ç­›é€‰å“ç‰Œ" class="headerlink" title="æ·»åŠ æ–°å“ç‰Œã€åˆ é™¤å“ç‰Œã€æ ¹æ®æ¡ä»¶ç­›é€‰å“ç‰Œ"></a>æ·»åŠ æ–°å“ç‰Œã€åˆ é™¤å“ç‰Œã€æ ¹æ®æ¡ä»¶ç­›é€‰å“ç‰Œ</h3><ol><li>1.x ç‰ˆæœ¬ä¸­çš„filterByæŒ‡ä»¤ï¼Œåœ¨2.xä¸­å·²ç»è¢«åºŸé™¤ï¼š</li></ol><p><a href="https://v1-cn.vuejs.org/api/#filterBy">filterBy - æŒ‡ä»¤</a></p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">tr</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;item in list | filterBy searchName in &#x27;name&#x27;&quot;</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item.id</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item.name</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item.ctime</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;#&quot;</span> @<span class="hljs-attr">click.prevent</span>=<span class="hljs-string">&quot;del(item.id)&quot;</span>&gt;</span>åˆ é™¤<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span></span><br></code></pre></td></tr></table></figure><ol start="2"><li>åœ¨2.xç‰ˆæœ¬ä¸­<a href="https://cn.vuejs.org/v2/guide/list.html#%E6%98%BE%E7%A4%BA%E8%BF%87%E6%BB%A4-%E6%8E%92%E5%BA%8F%E7%BB%93%E6%9E%9C">æ‰‹åŠ¨å®ç°ç­›é€‰çš„æ–¹å¼</a>ï¼š</li></ol><ul><li>ç­›é€‰æ¡†ç»‘å®šåˆ° VM å®ä¾‹ä¸­çš„ <code>searchName</code> å±æ€§ï¼š</li></ul><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">&lt;hr&gt; è¾“å…¥ç­›é€‰åç§°ï¼š<br>&lt;input <span class="hljs-attribute">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attribute">v-model</span>=<span class="hljs-string">&quot;searchName&quot;</span>&gt;<br></code></pre></td></tr></table></figure><ul><li>åœ¨ä½¿ç”¨ <code>v-for</code> æŒ‡ä»¤å¾ªç¯æ¯ä¸€è¡Œæ•°æ®çš„æ—¶å€™ï¼Œä¸å†ç›´æ¥ <code>item in list</code>ï¼Œè€Œæ˜¯ <code>in</code> ä¸€ä¸ª è¿‡æ»¤çš„methods æ–¹æ³•ï¼ŒåŒæ—¶ï¼ŒæŠŠè¿‡æ»¤æ¡ä»¶<code>searchName</code>ä¼ é€’è¿›å»ï¼š</li></ul><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">tbody</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">tr</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;item in search(searchName)&quot;</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item.id</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item.name</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item.ctime</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span></span><br><span class="xml">          <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;#&quot;</span> @<span class="hljs-attr">click.prevent</span>=<span class="hljs-string">&quot;del(item.id)&quot;</span>&gt;</span>åˆ é™¤<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">tbody</span>&gt;</span></span><br></code></pre></td></tr></table></figure><ul><li><code>search</code> è¿‡æ»¤æ–¹æ³•ä¸­ï¼Œä½¿ç”¨ æ•°ç»„çš„ <code>filter</code> æ–¹æ³•è¿›è¡Œè¿‡æ»¤ï¼š</li></ul><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">search</span>(<span class="hljs-type">name</span>) &#123;<br>  <span class="hljs-keyword">return</span> this.list.<span class="hljs-keyword">filter</span>(x =&gt; &#123;<br>    <span class="hljs-keyword">return</span> x.name.indexOf(<span class="hljs-type">name</span>) != <span class="hljs-number">-1</span>;<br>  &#125;);<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>å®Œæ•´ä»£ç ï¼š</strong></p><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br></pre></td><td class="code"><pre><code class="hljs xquery"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></span><br><span class="xml">  </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./lib/vue-2.4.0.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">  </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;./lib/bootstrap-3.3.7.css&quot;</span>&gt;</span></span><br><span class="xml">  <span class="hljs-comment">&lt;!-- éœ€è¦ç”¨åˆ°Jqueryå—ï¼Ÿï¼Ÿï¼Ÿä¸ç”¨ --&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></span><br><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="xml">  </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span></span><br><span class="xml">    </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;panel panel-primary&quot;</span>&gt;</span></span><br><span class="xml">      </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;panel-heading&quot;</span>&gt;</span></span><br><span class="xml">        </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;panel-title&quot;</span>&gt;</span>æ·»åŠ å“ç‰Œ<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">      </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;panel-body form-inline&quot;</span>&gt;</span></span><br><span class="xml">        </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span></span><br><span class="xml">          Id:</span><br><span class="xml">          </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;form-control&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;id&quot;</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><br><br><span class="xml">        </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span></span><br><span class="xml">          Name:</span><br><span class="xml">          </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;form-control&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;name&quot;</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><br><br><span class="xml">        <span class="hljs-comment">&lt;!-- åœ¨Vueä¸­ï¼Œä½¿ç”¨äº‹ä»¶ç»‘å®šæœºåˆ¶ï¼Œä¸ºå…ƒç´ æŒ‡å®šå¤„ç†å‡½æ•°çš„æ—¶å€™ï¼Œå¦‚æœåŠ äº†å°æ‹¬å·ï¼Œå°±å¯ä»¥ç»™å‡½æ•°ä¼ å‚äº† --&gt;</span></span><br><span class="xml">        </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;æ·»åŠ &quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn btn-primary&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;add()&quot;</span>&gt;</span></span><br><br><span class="xml">        </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span></span><br><span class="xml">          æœç´¢åç§°å…³é”®å­—ï¼š</span><br><span class="xml">          <span class="hljs-comment">&lt;!-- æ³¨æ„ï¼š Vueä¸­æ‰€æœ‰çš„æŒ‡ä»¤ï¼Œåœ¨è°ƒç”¨çš„æ—¶å€™ï¼Œéƒ½ä»¥ v- å¼€å¤´ --&gt;</span></span><br><span class="xml">          </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;form-control&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;keywords&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;search&quot;</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><br><span class="xml">    </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">table</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;table table-bordered table-hover table-striped&quot;</span>&gt;</span></span><br><span class="xml">      </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">thead</span>&gt;</span></span><br><span class="xml">        </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span></span><br><span class="xml">          </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Id<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span></span><br><span class="xml">          </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Name<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span></span><br><span class="xml">          </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Ctime<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span></span><br><span class="xml">          </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Operation<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">thead</span>&gt;</span></span><br><span class="xml">      </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">tbody</span>&gt;</span></span><br><span class="xml">        <span class="hljs-comment">&lt;!-- ä¹‹å‰ï¼Œ v-for ä¸­çš„æ•°æ®ï¼Œéƒ½æ˜¯ç›´æ¥ä» data ä¸Šçš„listä¸­ç›´æ¥æ¸²æŸ“è¿‡æ¥çš„ --&gt;</span></span><br><span class="xml">        <span class="hljs-comment">&lt;!-- ç°åœ¨ï¼Œ æˆ‘ä»¬è‡ªå®šä¹‰äº†ä¸€ä¸ª search æ–¹æ³•ï¼ŒåŒæ—¶ï¼ŒæŠŠ æ‰€æœ‰çš„å…³é”®å­—ï¼Œé€šè¿‡ä¼ å‚çš„å½¢å¼ï¼Œä¼ é€’ç»™äº† search æ–¹æ³• --&gt;</span></span><br><span class="xml">        <span class="hljs-comment">&lt;!-- åœ¨ search æ–¹æ³•å†…éƒ¨ï¼Œé€šè¿‡ æ‰§è¡Œ for å¾ªç¯ï¼Œ æŠŠæ‰€æœ‰ç¬¦åˆ æœç´¢å…³é”®å­—çš„æ•°æ®ï¼Œä¿å­˜åˆ° ä¸€ä¸ªæ–°æ•°ç»„ä¸­ï¼Œè¿”å› --&gt;</span></span><br><span class="xml">        </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">tr</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;item in search(keywords)&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;item.id&quot;</span>&gt;</span></span><br><span class="xml">          </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span></span><span class="xquery">&#123;&#123; <span class="hljs-type">item</span><span class="hljs-built_in">.id</span> &#125;</span><span class="xml">&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span></span><br><span class="xml">          </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">v-text</span>=<span class="hljs-string">&quot;item.name&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span></span><br><span class="xml">          </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span></span><span class="xquery">&#123;&#123; <span class="hljs-type">item</span>.ctime &#125;</span><span class="xml">&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span></span><br><span class="xml">          </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span></span><br><span class="xml">            </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;&quot;</span> @<span class="hljs-attr">click.prevent</span>=<span class="hljs-string">&quot;del(item.id)&quot;</span>&gt;</span>åˆ é™¤<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span><br><span class="xml">          <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">tbody</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><br><span class="xml">  </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">    // åˆ›å»º Vue å®ä¾‹ï¼Œå¾—åˆ° ViewModel</span><br><span class="xml">    var vm = new Vue(</span><span class="xquery">&#123;</span><br><span class="xquery">      el: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="xquery">      data: &#123;</span><br><span class="xquery">       <span class="hljs-built_in"> id</span>: <span class="hljs-string">&#x27;&#x27;</span>,</span><br><span class="xquery">       <span class="hljs-built_in"> name</span>: <span class="hljs-string">&#x27;&#x27;</span>,</span><br><span class="xquery">        keywords: <span class="hljs-string">&#x27;&#x27;</span>, // æœç´¢çš„å…³é”®å­—</span><br><span class="xquery">        list: [</span><br><span class="xquery">          &#123;<span class="hljs-built_in"> id</span>: <span class="hljs-number">1</span>,<span class="hljs-built_in"> name</span>: <span class="hljs-string">&#x27;å¥”é©°&#x27;</span>, ctime: new Date() &#125;</span><span class="xml">,</span><br><span class="xml">          </span><span class="xquery">&#123;<span class="hljs-built_in"> id</span>: <span class="hljs-number">2</span>,<span class="hljs-built_in"> name</span>: <span class="hljs-string">&#x27;å®é©¬&#x27;</span>, ctime: new Date() &#125;</span><br><span class="xml">        ]</span><br><span class="xml">      &#125;,</span><br><span class="xml">      methods: </span><span class="xquery">&#123;</span><br><span class="xquery">        add() &#123; // æ·»åŠ çš„æ–¹æ³•</span><br><span class="xquery">          // console.log(<span class="hljs-string">&#x27;ok&#x27;</span>)</span><br><span class="xquery">          // åˆ†æï¼š</span><br><span class="xquery">          // <span class="hljs-number">1</span>. è·å–åˆ°<span class="hljs-built_in"> id</span> å’Œ<span class="hljs-built_in"> name</span> ,ç›´æ¥ä» data ä¸Šé¢è·å– </span><br><span class="xquery">          // <span class="hljs-number">2</span>. ç»„ç»‡å‡ºä¸€ä¸ªå¯¹è±¡</span><br><span class="xquery">          // <span class="hljs-number">3</span>. æŠŠè¿™ä¸ªå¯¹è±¡ï¼Œè°ƒç”¨ æ•°ç»„çš„ ç›¸å…³æ–¹æ³•ï¼Œæ·»åŠ åˆ° å½“å‰ data ä¸Šçš„ list ä¸­</span><br><span class="xquery">          // <span class="hljs-number">4</span>. æ³¨æ„ï¼šåœ¨Vueä¸­ï¼Œå·²ç»å®ç°äº†æ•°æ®çš„åŒå‘ç»‘å®šï¼Œæ¯å½“æˆ‘ä»¬ä¿®æ”¹äº† data ä¸­çš„æ•°æ®ï¼ŒVueä¼šé»˜è®¤ç›‘å¬åˆ°æ•°æ®çš„æ”¹åŠ¨ï¼Œè‡ªåŠ¨æŠŠæœ€æ–°çš„æ•°æ®ï¼Œåº”ç”¨åˆ°é¡µé¢ä¸Šï¼›</span><br><span class="xquery">          // <span class="hljs-number">5</span>. å½“æˆ‘ä»¬æ„è¯†åˆ°ä¸Šé¢çš„ç¬¬å››æ­¥çš„æ—¶å€™ï¼Œå°±è¯æ˜å¤§å®¶å·²ç»å…¥é—¨Vueäº†ï¼Œæˆ‘ä»¬æ›´å¤šçš„æ˜¯åœ¨è¿›è¡Œ VMä¸­ Model æ•°æ®çš„æ“ä½œï¼ŒåŒæ—¶ï¼Œåœ¨æ“ä½œModelæ•°æ®çš„æ—¶å€™ï¼ŒæŒ‡å®šçš„ä¸šåŠ¡é€»è¾‘æ“ä½œï¼›</span><br><br><span class="xquery">          var car = &#123;<span class="hljs-built_in"> id</span>: this<span class="hljs-built_in">.id</span>,<span class="hljs-built_in"> name</span>: this<span class="hljs-built_in">.name</span>, ctime: new Date() &#125;</span><br><span class="xml">          this.list.push(car)</span><br><span class="xml">          this.id = this.name = &#x27;&#x27;</span><br><span class="xml">        &#125;,</span><br><span class="xml">        del(id) </span><span class="xquery">&#123; // æ ¹æ®Idåˆ é™¤æ•°æ®</span><br><span class="xquery">          // åˆ†æï¼š</span><br><span class="xquery">          // <span class="hljs-number">1</span>. å¦‚ä½•æ ¹æ®Idï¼Œæ‰¾åˆ°è¦åˆ é™¤è¿™ä¸€é¡¹çš„ç´¢å¼•</span><br><span class="xquery">          // <span class="hljs-number">2</span>. å¦‚æœæ‰¾åˆ°ç´¢å¼•äº†ï¼Œç›´æ¥è°ƒç”¨ æ•°ç»„çš„ splice æ–¹æ³•</span><br><br><span class="xquery">          /* this.list.<span class="hljs-keyword">some</span>((<span class="hljs-type">item</span>, i) =&gt; &#123;</span><br><span class="xquery">            <span class="hljs-keyword">if</span> (<span class="hljs-type">item</span><span class="hljs-built_in">.id</span> ==<span class="hljs-built_in"> id</span>) &#123;</span><br><span class="xquery">              this.list.splice(i, <span class="hljs-number">1</span>)</span><br><span class="xquery">              // åœ¨ æ•°ç»„çš„ <span class="hljs-keyword">some</span> æ–¹æ³•ä¸­ï¼Œå¦‚æœ <span class="hljs-keyword">return</span><span class="hljs-built_in"> true</span>ï¼Œå°±ä¼šç«‹å³ç»ˆæ­¢è¿™ä¸ªæ•°ç»„çš„åç»­å¾ªç¯</span><br><span class="xquery">              <span class="hljs-keyword">return</span><span class="hljs-built_in"> true</span>;</span><br><span class="xquery">            &#125;</span><br><span class="xml">          &#125;) */</span><br><br><span class="xml">          var index = this.list.findIndex(item =&gt; </span><span class="xquery">&#123;</span><br><span class="xquery">            <span class="hljs-keyword">if</span> (<span class="hljs-type">item</span><span class="hljs-built_in">.id</span> ==<span class="hljs-built_in"> id</span>) &#123;</span><br><span class="xquery">              <span class="hljs-keyword">return</span><span class="hljs-built_in"> true</span>;</span><br><span class="xquery">            &#125;</span><br><span class="xml">          &#125;)</span><br><br><span class="xml">          // console.log(index)</span><br><span class="xml">          this.list.splice(index, 1)</span><br><span class="xml">        &#125;,</span><br><span class="xml">        search(keywords) </span><span class="xquery">&#123; // æ ¹æ®å…³é”®å­—ï¼Œè¿›è¡Œæ•°æ®çš„æœç´¢</span><br><span class="xquery">          /* var newList = []</span><br><span class="xquery">          this.list.forEach(<span class="hljs-type">item</span> =&gt; &#123;</span><br><span class="xquery">            <span class="hljs-keyword">if</span> (<span class="hljs-type">item</span><span class="hljs-built_in">.name</span>.indexOf(keywords) != -<span class="hljs-number">1</span>) &#123;</span><br><span class="xquery">              newList.push(<span class="hljs-type">item</span>)</span><br><span class="xquery">            &#125;</span><br><span class="xml">          &#125;)</span><br><span class="xml">          return newList */</span><br><br><span class="xml">          // æ³¨æ„ï¼š  forEach   some   filter   findIndex   è¿™äº›éƒ½å±äºæ•°ç»„çš„æ–°æ–¹æ³•ï¼Œ</span><br><span class="xml">          //  éƒ½ä¼šå¯¹æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹ï¼Œè¿›è¡Œéå†ï¼Œæ‰§è¡Œç›¸å…³çš„æ“ä½œï¼›</span><br><span class="xml">          return this.list.filter(item =&gt; </span><span class="xquery">&#123;</span><br><span class="xquery">            // <span class="hljs-keyword">if</span>(<span class="hljs-type">item</span><span class="hljs-built_in">.name</span>.indexOf(keywords) != -<span class="hljs-number">1</span>)</span><br><br><span class="xquery">            // æ³¨æ„ ï¼š ES6ä¸­ï¼Œä¸ºå­—ç¬¦ä¸²æä¾›äº†ä¸€ä¸ªæ–°æ–¹æ³•ï¼Œå«åš  String.prototype.includes(<span class="hljs-string">&#x27;è¦åŒ…å«çš„å­—ç¬¦ä¸²&#x27;</span>)</span><br><span class="xquery">            //  å¦‚æœåŒ…å«ï¼Œåˆ™è¿”å›<span class="hljs-built_in"> true</span> ï¼Œå¦åˆ™è¿”å›<span class="hljs-built_in"> false</span></span><br><span class="xquery">            //  contain</span><br><span class="xquery">            <span class="hljs-keyword">if</span> (<span class="hljs-type">item</span><span class="hljs-built_in">.name</span>.includes(keywords)) &#123;</span><br><span class="xquery">              <span class="hljs-keyword">return</span> <span class="hljs-type">item</span></span><br><span class="xquery">            &#125;</span><br><span class="xml">          &#125;)</span><br><span class="xml">          // return newList</span><br><span class="xml">        &#125;</span><br><span class="xml">      &#125;</span><br><span class="xml">    &#125;);</span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p><img src="/2019/11/02/Vue-js-II/01.png" alt="01"></p><p><strong>æ’å…¥åˆ é™¤é—®é¢˜</strong></p><p><img src="/2019/11/02/Vue-js-II/02.png" alt="02"></p><p><img src="/2019/11/02/Vue-js-II/03.png" alt="03"></p><p><img src="/2019/11/02/Vue-js-II/04.png" alt="04"></p><p><img src="/2019/11/02/Vue-js-II/05.png" alt="05"></p><p><img src="/2019/11/02/Vue-js-II/06.png" alt="06"></p><h2 id="Vueè°ƒè¯•å·¥å…·vue-devtoolsçš„å®‰è£…æ­¥éª¤å’Œä½¿ç”¨"><a href="#Vueè°ƒè¯•å·¥å…·vue-devtoolsçš„å®‰è£…æ­¥éª¤å’Œä½¿ç”¨" class="headerlink" title="Vueè°ƒè¯•å·¥å…·vue-devtoolsçš„å®‰è£…æ­¥éª¤å’Œä½¿ç”¨"></a>Vueè°ƒè¯•å·¥å…·<code>vue-devtools</code>çš„å®‰è£…æ­¥éª¤å’Œä½¿ç”¨</h2><p><a href="https://chrome.google.com/webstore/detail/vuejs-devtools/nhdogjmejiglipccpnnnanhbledajbpd?hl=zh-CN">Vue.js devtools - ç¿»å¢™å®‰è£…æ–¹å¼ - æ¨è</a></p><h2 id="è¿‡æ»¤å™¨"><a href="#è¿‡æ»¤å™¨" class="headerlink" title="è¿‡æ»¤å™¨"></a>è¿‡æ»¤å™¨</h2><p>æ¦‚å¿µï¼šVue.js å…è®¸ä½ è‡ªå®šä¹‰è¿‡æ»¤å™¨ï¼Œ<strong>å¯è¢«ç”¨ä½œä¸€äº›å¸¸è§çš„æ–‡æœ¬æ ¼å¼åŒ–</strong>ã€‚è¿‡æ»¤å™¨å¯ä»¥ç”¨åœ¨ä¸¤ä¸ªåœ°æ–¹ï¼š<strong>mustache æ’å€¼è¡¨è¾¾å¼å’Œ v-bind è¡¨è¾¾å¼</strong>ã€‚è¿‡æ»¤å™¨åº”è¯¥è¢«æ·»åŠ åœ¨ JavaScript è¡¨è¾¾å¼çš„å°¾éƒ¨ï¼Œç”±â€œç®¡é“â€ç¬¦æŒ‡ç¤ºï¼›</p><h3 id="ç§æœ‰è¿‡æ»¤å™¨"><a href="#ç§æœ‰è¿‡æ»¤å™¨" class="headerlink" title="ç§æœ‰è¿‡æ»¤å™¨"></a>ç§æœ‰è¿‡æ»¤å™¨</h3><ol><li>HTMLå…ƒç´ ï¼š</li></ol><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item.ctime</span> | dataFormat(<span class="hljs-name">&#x27;yyyy-mm-dd&#x27;</span>)&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p><img src="/2019/11/02/Vue-js-II/07.png" alt="07"></p><ol start="2"><li>ç§æœ‰ <code>filters</code> å®šä¹‰æ–¹å¼ï¼š</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs javascript">filters: &#123; <span class="hljs-comment">// ç§æœ‰å±€éƒ¨è¿‡æ»¤å™¨å®šä¹‰åœ¨VMå¯¹è±¡ä¸­ï¼Œåªèƒ½åœ¨ å½“å‰ VM å¯¹è±¡æ‰€æ§åˆ¶çš„ View åŒºåŸŸè¿›è¡Œä½¿ç”¨</span><br>    <span class="hljs-function"><span class="hljs-title">dataFormat</span>(<span class="hljs-params">input, pattern = <span class="hljs-string">&quot;&quot;</span></span>)</span> &#123; <span class="hljs-comment">// åœ¨å‚æ•°åˆ—è¡¨ä¸­ é€šè¿‡ pattern=&quot;&quot; æ¥æŒ‡å®šå½¢å‚é»˜è®¤å€¼ï¼Œé˜²æ­¢æŠ¥é”™</span><br>      <span class="hljs-keyword">var</span> dt = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(input);<br>      <span class="hljs-comment">// è·å–å¹´æœˆæ—¥</span><br>      <span class="hljs-keyword">var</span> y = dt.getFullYear();<br>      <span class="hljs-keyword">var</span> m = (dt.getMonth() + <span class="hljs-number">1</span>).toString().padStart(<span class="hljs-number">2</span>, <span class="hljs-string">&#x27;0&#x27;</span>);<br>      <span class="hljs-keyword">var</span> d = dt.getDate().toString().padStart(<span class="hljs-number">2</span>, <span class="hljs-string">&#x27;0&#x27;</span>);<br>      <span class="hljs-comment">// å¦‚æœ ä¼ é€’è¿›æ¥çš„å­—ç¬¦ä¸²ç±»å‹ï¼Œè½¬ä¸ºå°å†™ä¹‹åï¼Œç­‰äº yyyy-mm-ddï¼Œé‚£ä¹ˆå°±è¿”å› å¹´-æœˆ-æ—¥</span><br>      <span class="hljs-comment">// å¦åˆ™ï¼Œå°±è¿”å›  å¹´-æœˆ-æ—¥ æ—¶ï¼šåˆ†ï¼šç§’</span><br>      <span class="hljs-keyword">if</span> (pattern.toLowerCase() === <span class="hljs-string">&#x27;yyyy-mm-dd&#x27;</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;y&#125;</span>-<span class="hljs-subst">$&#123;m&#125;</span>-<span class="hljs-subst">$&#123;d&#125;</span>`</span>;<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-comment">// è·å–æ—¶åˆ†ç§’</span><br>        <span class="hljs-keyword">var</span> hh = dt.getHours().toString().padStart(<span class="hljs-number">2</span>, <span class="hljs-string">&#x27;0&#x27;</span>);<br>        <span class="hljs-keyword">var</span> mm = dt.getMinutes().toString().padStart(<span class="hljs-number">2</span>, <span class="hljs-string">&#x27;0&#x27;</span>);<br>        <span class="hljs-keyword">var</span> ss = dt.getSeconds().toString().padStart(<span class="hljs-number">2</span>, <span class="hljs-string">&#x27;0&#x27;</span>);<br><br>        <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;y&#125;</span>-<span class="hljs-subst">$&#123;m&#125;</span>-<span class="hljs-subst">$&#123;d&#125;</span> <span class="hljs-subst">$&#123;hh&#125;</span>:<span class="hljs-subst">$&#123;mm&#125;</span>:<span class="hljs-subst">$&#123;ss&#125;</span>`</span>;<br>      &#125;<br>    &#125;<br>  &#125;<br></code></pre></td></tr></table></figure><blockquote><p>ä½¿ç”¨ES6ä¸­çš„å­—ç¬¦ä¸²æ–°æ–¹æ³• String.prototype.padStart(maxLength, fillString=â€™â€™) å¤´éƒ¨å¡«å……æˆ– String.prototype.padEnd(maxLength, fillString=â€™â€™)å°¾éƒ¨å¡«å……æ¥å¡«å……å­—ç¬¦ä¸²ï¼›</p></blockquote><p><img src="/2019/11/02/Vue-js-II/padstart.png"></p><h3 id="å…¨å±€è¿‡æ»¤å™¨"><a href="#å…¨å±€è¿‡æ»¤å™¨" class="headerlink" title="å…¨å±€è¿‡æ»¤å™¨"></a>å…¨å±€è¿‡æ»¤å™¨</h3><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs arcade"><span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªå…¨å±€è¿‡æ»¤å™¨ï¼Œå®šä¹‰åœ¨VMå¯¹è±¡å¤–è¾¹</span><br>Vue.filter(<span class="hljs-string">&#x27;dataFormat&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">input, pattern = <span class="hljs-string">&#x27;&#x27;</span></span>) </span>&#123;<br>  <span class="hljs-keyword">var</span> dt = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(input);<br>  <span class="hljs-comment">// è·å–å¹´æœˆæ—¥</span><br>  <span class="hljs-keyword">var</span> y = dt.getFullYear();<br>  <span class="hljs-keyword">var</span> m = (dt.getMonth() + <span class="hljs-number">1</span>).toString().padStart(<span class="hljs-number">2</span>, <span class="hljs-string">&#x27;0&#x27;</span>);<br>  <span class="hljs-keyword">var</span> d = dt.getDate().toString().padStart(<span class="hljs-number">2</span>, <span class="hljs-string">&#x27;0&#x27;</span>);<br><br>  <span class="hljs-comment">// å¦‚æœ ä¼ é€’è¿›æ¥çš„å­—ç¬¦ä¸²ç±»å‹ï¼Œè½¬ä¸ºå°å†™ä¹‹åï¼Œç­‰äº yyyy-mm-ddï¼Œé‚£ä¹ˆå°±è¿”å› å¹´-æœˆ-æ—¥</span><br>  <span class="hljs-comment">// å¦åˆ™ï¼Œå°±è¿”å›  å¹´-æœˆ-æ—¥ æ—¶ï¼šåˆ†ï¼šç§’</span><br>  <span class="hljs-keyword">if</span> (pattern.toLowerCase() === <span class="hljs-string">&#x27;yyyy-mm-dd&#x27;</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;y&#125;</span>-<span class="hljs-subst">$&#123;m&#125;</span>-<span class="hljs-subst">$&#123;d&#125;</span>`</span>;<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-comment">// è·å–æ—¶åˆ†ç§’</span><br>    <span class="hljs-keyword">var</span> hh = dt.getHours().toString().padStart(<span class="hljs-number">2</span>, <span class="hljs-string">&#x27;0&#x27;</span>);<br>    <span class="hljs-keyword">var</span> mm = dt.getMinutes().toString().padStart(<span class="hljs-number">2</span>, <span class="hljs-string">&#x27;0&#x27;</span>);<br>    <span class="hljs-keyword">var</span> ss = dt.getSeconds().toString().padStart(<span class="hljs-number">2</span>, <span class="hljs-string">&#x27;0&#x27;</span>);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;y&#125;</span>-<span class="hljs-subst">$&#123;m&#125;</span>-<span class="hljs-subst">$&#123;d&#125;</span> <span class="hljs-subst">$&#123;hh&#125;</span>:<span class="hljs-subst">$&#123;mm&#125;</span>:<span class="hljs-subst">$&#123;ss&#125;</span>`</span>;<br>  &#125;<br>&#125;);<br></code></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šå½“æœ‰å±€éƒ¨å’Œå…¨å±€ä¸¤ä¸ªåç§°ç›¸åŒçš„è¿‡æ»¤å™¨æ—¶å€™ï¼Œä¼šä»¥å°±è¿‘åŸåˆ™è¿›è¡Œè°ƒç”¨ï¼Œå³ï¼šå±€éƒ¨è¿‡æ»¤å™¨ä¼˜å…ˆäºå…¨å±€è¿‡æ»¤å™¨è¢«è°ƒç”¨ï¼</p></blockquote><p><strong>å®Œæ•´ä»£ç </strong></p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app2&quot;</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">v-color</span>=<span class="hljs-string">&quot;&#x27;pink&#x27;&quot;</span> <span class="hljs-attr">v-fontweight</span>=<span class="hljs-string">&quot;900&quot;</span> <span class="hljs-attr">v-fontsize</span>=<span class="hljs-string">&quot;50&quot;</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">dt</span> | dateFormat &#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></span><br><span class="xml">    </span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">  </span><br><span class="xml">    // å…¨å±€çš„è¿‡æ»¤å™¨ï¼Œ è¿›è¡Œæ—¶é—´çš„æ ¼å¼åŒ–</span><br><span class="xml">    // æ‰€è°“çš„å…¨å±€è¿‡æ»¤å™¨ï¼Œå°±æ˜¯æ‰€æœ‰çš„VMå®ä¾‹éƒ½å…±äº«çš„</span><br><span class="xml">    Vue.filter(&#x27;dateFormat&#x27;, function (dateStr, pattern = &quot;&quot;) &#123;</span><br><span class="xml">      // æ ¹æ®ç»™å®šçš„æ—¶é—´å­—ç¬¦ä¸²ï¼Œå¾—åˆ°ç‰¹å®šçš„æ—¶é—´</span><br><span class="xml">      var dt = new Date(dateStr)</span><br><br><span class="xml">      //   yyyy-mm-dd</span><br><span class="xml">      var y = dt.getFullYear()</span><br><span class="xml">      var m = dt.getMonth() + 1</span><br><span class="xml">      var d = dt.getDate()</span><br><span class="xml">      // return y + &#x27;-&#x27; + m + &#x27;-&#x27; + d</span><br><br><span class="xml">      if (pattern.toLowerCase() === &#x27;yyyy-mm-dd&#x27;) &#123;</span><br><span class="xml">        return `$&#123;y&#125;-$&#123;m&#125;-$&#123;d&#125;`</span><br><span class="xml">      &#125; else &#123;</span><br><span class="xml">        var hh = dt.getHours()</span><br><span class="xml">        var mm = dt.getMinutes()</span><br><span class="xml">        var ss = dt.getSeconds()</span><br><br><span class="xml">        return `$&#123;y&#125;-$&#123;m&#125;-$&#123;d&#125; $&#123;hh&#125;:$&#123;mm&#125;:$&#123;ss&#125;`</span><br><span class="xml">      &#125;</span><br><span class="xml">    &#125;)</span><br><br><span class="xml">    // å¦‚ä½•è‡ªå®šä¹‰ä¸€ä¸ªç§æœ‰çš„è¿‡æ»¤å™¨ï¼ˆå±€éƒ¨ï¼‰</span><br><span class="xml">    var vm2 = new Vue(&#123;</span><br><span class="xml">      el: &#x27;#app2&#x27;,</span><br><span class="xml">      data: &#123;</span><br><span class="xml">        dt: new Date()</span><br><span class="xml">      &#125;,</span><br><span class="xml">      methods: &#123;&#125;,</span><br><span class="xml">      filters: &#123; // å®šä¹‰ç§æœ‰è¿‡æ»¤å™¨    è¿‡æ»¤å™¨æœ‰ä¸¤ä¸ª æ¡ä»¶  ã€è¿‡æ»¤å™¨åç§° å’Œ å¤„ç†å‡½æ•°ã€‘</span><br><span class="xml">        // è¿‡æ»¤å™¨è°ƒç”¨çš„æ—¶å€™ï¼Œé‡‡ç”¨çš„æ˜¯å°±è¿‘åŸåˆ™ï¼Œå¦‚æœç§æœ‰è¿‡æ»¤å™¨å’Œå…¨å±€è¿‡æ»¤å™¨åç§°ä¸€è‡´äº†ï¼Œè¿™æ—¶å€™ ä¼˜å…ˆè°ƒç”¨ç§æœ‰è¿‡æ»¤å™¨</span><br><span class="xml">        dateFormat: function (dateStr, pattern = &#x27;&#x27;) &#123;</span><br><span class="xml">          // æ ¹æ®ç»™å®šçš„æ—¶é—´å­—ç¬¦ä¸²ï¼Œå¾—åˆ°ç‰¹å®šçš„æ—¶é—´</span><br><span class="xml">          var dt = new Date(dateStr)</span><br><br><span class="xml">          //   yyyy-mm-dd</span><br><span class="xml">          var y = dt.getFullYear()</span><br><span class="xml">          var m = (dt.getMonth() + 1).toString().padStart(2, &#x27;0&#x27;)</span><br><span class="xml">          var d = dt.getDate().toString().padStart(2, &#x27;0&#x27;)</span><br><br><span class="xml">          if (pattern.toLowerCase() === &#x27;yyyy-mm-dd&#x27;) &#123;</span><br><span class="xml">            return `$&#123;y&#125;-$&#123;m&#125;-$&#123;d&#125;`</span><br><span class="xml">          &#125; else &#123;</span><br><span class="xml">            var hh = dt.getHours().toString().padStart(2, &#x27;0&#x27;)</span><br><span class="xml">            var mm = dt.getMinutes().toString().padStart(2, &#x27;0&#x27;)</span><br><span class="xml">            var ss = dt.getSeconds().toString().padStart(2, &#x27;0&#x27;)</span><br><br><span class="xml">            return `$&#123;y&#125;-$&#123;m&#125;-$&#123;d&#125; $&#123;hh&#125;:$&#123;mm&#125;:$&#123;ss&#125; ~~~~~~~`</span><br><span class="xml">          &#125;</span><br><span class="xml">        &#125;</span><br><span class="xml">      &#125;</span><br><span class="xml">    &#125;)</span><br><br><span class="xml">    // è¿‡æ»¤å™¨çš„å®šä¹‰è¯­æ³•</span><br><span class="xml">    // Vue.filter(&#x27;è¿‡æ»¤å™¨çš„åç§°&#x27;, function()&#123;&#125;)</span><br><br><span class="xml">    // è¿‡æ»¤å™¨ä¸­çš„ function ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå·²ç»è¢«è§„å®šæ­»äº†ï¼Œæ°¸è¿œéƒ½æ˜¯ è¿‡æ»¤å™¨ ç®¡é“ç¬¦å‰é¢ ä¼ é€’è¿‡æ¥çš„æ•°æ®</span><br><span class="xml">    /* Vue.filter(&#x27;è¿‡æ»¤å™¨çš„åç§°&#x27;, function (data) &#123;</span><br><span class="xml">      return data + &#x27;123&#x27;</span><br><span class="xml">    &#125;) */</span><br><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br><br><span class="xml"><span class="hljs-comment">&lt;!-- è¿‡æ»¤å™¨è°ƒç”¨æ—¶å€™çš„æ ¼å¼    </span></span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">name</span> | è¿‡æ»¤å™¨çš„åç§° &#125;&#125;</span><span class="xml"><span class="hljs-comment"> --&gt;</span></span><br></code></pre></td></tr></table></figure><h2 id="é”®ç›˜ä¿®é¥°ç¬¦ä»¥åŠè‡ªå®šä¹‰é”®ç›˜ä¿®é¥°ç¬¦"><a href="#é”®ç›˜ä¿®é¥°ç¬¦ä»¥åŠè‡ªå®šä¹‰é”®ç›˜ä¿®é¥°ç¬¦" class="headerlink" title="é”®ç›˜ä¿®é¥°ç¬¦ä»¥åŠè‡ªå®šä¹‰é”®ç›˜ä¿®é¥°ç¬¦"></a>é”®ç›˜ä¿®é¥°ç¬¦ä»¥åŠè‡ªå®šä¹‰é”®ç›˜ä¿®é¥°ç¬¦</h2><h3 id="1-xä¸­è‡ªå®šä¹‰é”®ç›˜ä¿®é¥°ç¬¦ã€äº†è§£å³å¯ã€‘"><a href="#1-xä¸­è‡ªå®šä¹‰é”®ç›˜ä¿®é¥°ç¬¦ã€äº†è§£å³å¯ã€‘" class="headerlink" title="1.xä¸­è‡ªå®šä¹‰é”®ç›˜ä¿®é¥°ç¬¦ã€äº†è§£å³å¯ã€‘"></a>1.xä¸­è‡ªå®šä¹‰é”®ç›˜ä¿®é¥°ç¬¦ã€äº†è§£å³å¯ã€‘</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Vue</span>.directive(&#x27;<span class="hljs-literal">on</span>&#x27;).keyCodes.f<span class="hljs-number">2</span> = <span class="hljs-number">113</span>;<br></code></pre></td></tr></table></figure><h3 id="2-xä¸­è‡ªå®šä¹‰é”®ç›˜ä¿®é¥°ç¬¦"><a href="#2-xä¸­è‡ªå®šä¹‰é”®ç›˜ä¿®é¥°ç¬¦" class="headerlink" title="2.xä¸­è‡ªå®šä¹‰é”®ç›˜ä¿®é¥°ç¬¦"></a><a href="https://cn.vuejs.org/v2/guide/events.html#%E9%94%AE%E5%80%BC%E4%BF%AE%E9%A5%B0%E7%AC%A6">2.xä¸­è‡ªå®šä¹‰é”®ç›˜ä¿®é¥°ç¬¦</a></h3><ol><li>é€šè¿‡<code>Vue.config.keyCodes.åç§° = æŒ‰é”®å€¼</code>æ¥è‡ªå®šä¹‰æ¡ˆä»¶ä¿®é¥°ç¬¦çš„åˆ«åï¼š</li></ol><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Vue</span>.config.keyCodes.f<span class="hljs-number">2</span> = <span class="hljs-number">113</span>;//é”®ç›˜ç å­—f<span class="hljs-number">2</span>æ˜¯<span class="hljs-number">113</span><br></code></pre></td></tr></table></figure><ol start="2"><li>ä½¿ç”¨è‡ªå®šä¹‰çš„æŒ‰é”®ä¿®é¥°ç¬¦ï¼š</li></ol><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">&lt;input <span class="hljs-attribute">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attribute">v-model</span>=<span class="hljs-string">&quot;name&quot;</span> @keyup.<span class="hljs-attribute">f2</span>=<span class="hljs-string">&quot;add&quot;</span>&gt;<br>&lt;input <span class="hljs-attribute">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attribute">v-model</span>=<span class="hljs-string">&quot;name&quot;</span> @keyup.<span class="hljs-attribute">113</span>=<span class="hljs-string">&quot;add&quot;</span>&gt;<br></code></pre></td></tr></table></figure><h2 id="è‡ªå®šä¹‰æŒ‡ä»¤"><a href="#è‡ªå®šä¹‰æŒ‡ä»¤" class="headerlink" title="è‡ªå®šä¹‰æŒ‡ä»¤"></a><a href="https://cn.vuejs.org/v2/guide/custom-directive.html">è‡ªå®šä¹‰æŒ‡ä»¤</a></h2><ol><li>è‡ªå®šä¹‰<code>å…¨å±€</code>å’Œ<code>å±€éƒ¨</code>çš„ è‡ªå®šä¹‰æŒ‡ä»¤ï¼š</li></ol><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs awk">    <span class="hljs-regexp">//</span> document.getElementById(<span class="hljs-string">&#x27;search&#x27;</span>).focus()ä¸æ¨èä½¿ç”¨çš„DOMæ“ä½œ<br>    <span class="hljs-regexp">//</span> ä½¿ç”¨  Vue.directive() å®šä¹‰å…¨å±€çš„æŒ‡ä»¤  v-focus<br>    <span class="hljs-regexp">//</span> å…¶ä¸­ï¼šå‚æ•°<span class="hljs-number">1</span> ï¼š æŒ‡ä»¤çš„åç§°ï¼Œæ³¨æ„ï¼Œåœ¨å®šä¹‰çš„æ—¶å€™ï¼ŒæŒ‡ä»¤çš„åç§°å‰é¢ï¼Œä¸éœ€è¦åŠ  v- å‰ç¼€, <br>    <span class="hljs-regexp">//</span> ä½†æ˜¯ï¼š åœ¨è°ƒç”¨çš„æ—¶å€™ï¼Œå¿…é¡» åœ¨æŒ‡ä»¤åç§°å‰ åŠ ä¸Š v- å‰ç¼€æ¥è¿›è¡Œè°ƒç”¨<br>    <span class="hljs-regexp">//</span>  å‚æ•°<span class="hljs-number">2</span>ï¼š æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡èº«ä¸Šï¼Œæœ‰ä¸€äº›æŒ‡ä»¤ç›¸å…³çš„å‡½æ•°ï¼Œè¿™äº›å‡½æ•°å¯ä»¥åœ¨ç‰¹å®šçš„é˜¶æ®µï¼Œæ‰§è¡Œç›¸å…³çš„æ“ä½œ<br>    Vue.directive(<span class="hljs-string">&#x27;focus&#x27;</span>, &#123;<br>      bind: <span class="hljs-keyword">function</span> (el) &#123; <span class="hljs-regexp">//</span> æ¯å½“æŒ‡ä»¤ç»‘å®šåˆ°å…ƒç´ ä¸Šçš„æ—¶å€™ï¼Œä¼šç«‹å³æ‰§è¡Œè¿™ä¸ª bind å‡½æ•°ï¼Œåªæ‰§è¡Œä¸€æ¬¡<br>        <span class="hljs-regexp">//</span> æ³¨æ„ï¼š åœ¨æ¯ä¸ª å‡½æ•°ä¸­ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæ°¸è¿œæ˜¯ el ï¼Œè¡¨ç¤º è¢«ç»‘å®šäº†æŒ‡ä»¤çš„é‚£ä¸ªå…ƒç´ ï¼Œè¿™ä¸ª el å‚æ•°ï¼Œæ˜¯ä¸€ä¸ªåŸç”Ÿçš„JSå¯¹è±¡<br>        <span class="hljs-regexp">//</span> åœ¨å…ƒç´  åˆšç»‘å®šäº†æŒ‡ä»¤çš„æ—¶å€™ï¼Œè¿˜æ²¡æœ‰ æ’å…¥åˆ° DOMä¸­å»ï¼Œè¿™æ—¶å€™ï¼Œè°ƒç”¨ focus æ–¹æ³•æ²¡æœ‰ä½œç”¨<br>        <span class="hljs-regexp">//</span>  å› ä¸ºï¼Œä¸€ä¸ªå…ƒç´ ï¼Œåªæœ‰æ’å…¥DOMä¹‹åï¼Œæ‰èƒ½è·å–ç„¦ç‚¹<br>        <span class="hljs-regexp">//</span> el.focus()<br>      &#125;,<br>      inserted: <span class="hljs-keyword">function</span> (el) &#123;  <span class="hljs-regexp">//</span> inserted è¡¨ç¤ºå…ƒç´  æ’å…¥åˆ°DOMä¸­çš„æ—¶å€™ï¼Œä¼šæ‰§è¡Œ inserted å‡½æ•°ã€è§¦å‘<span class="hljs-number">1</span>æ¬¡ã€‘<br>        el.focus()<br>        <span class="hljs-regexp">//</span> å’ŒJSè¡Œä¸ºæœ‰å…³çš„æ“ä½œï¼Œæœ€å¥½åœ¨ inserted ä¸­å»æ‰§è¡Œï¼Œæ”¾ç½® JSè¡Œä¸ºä¸ç”Ÿæ•ˆ<br>      &#125;,<br>      updated: <span class="hljs-keyword">function</span> (el) &#123;  <span class="hljs-regexp">//</span> å½“VNodeæ›´æ–°çš„æ—¶å€™ï¼Œä¼šæ‰§è¡Œ updatedï¼Œ å¯èƒ½ä¼šè§¦å‘å¤šæ¬¡<br>      &#125;<br>    &#125;)<br>    <br>    <span class="hljs-regexp">//</span> è‡ªå®šä¹‰ä¸€ä¸ª è®¾ç½®å­—ä½“é¢œè‰²çš„ æŒ‡ä»¤<br>    Vue.directive(<span class="hljs-string">&#x27;color&#x27;</span>, &#123;<br>      <span class="hljs-regexp">//</span> æ ·å¼ï¼Œåªè¦é€šè¿‡æŒ‡ä»¤ç»‘å®šç»™äº†å…ƒç´ ï¼Œä¸ç®¡è¿™ä¸ªå…ƒç´ æœ‰æ²¡æœ‰è¢«æ’å…¥åˆ°é¡µé¢ä¸­å»ï¼Œè¿™ä¸ªå…ƒç´ è‚¯å®šæœ‰äº†ä¸€ä¸ªå†…è”çš„æ ·å¼<br>      <span class="hljs-regexp">//</span> å°†æ¥å…ƒç´ è‚¯å®šä¼šæ˜¾ç¤ºåˆ°é¡µé¢ä¸­ï¼Œè¿™æ—¶å€™ï¼Œæµè§ˆå™¨çš„æ¸²æŸ“å¼•æ“å¿…ç„¶ä¼šè§£ææ ·å¼ï¼Œåº”ç”¨ç»™è¿™ä¸ªå…ƒç´ <br>      bind: <span class="hljs-keyword">function</span> (el, binding) &#123;<br>        <span class="hljs-regexp">//</span> el.style.color = <span class="hljs-string">&#x27;red&#x27;</span><br>        <span class="hljs-regexp">//</span> console.log(binding.name)<br>        <span class="hljs-regexp">//</span> å’Œæ ·å¼ç›¸å…³çš„æ“ä½œï¼Œä¸€èˆ¬éƒ½å¯ä»¥åœ¨ bind æ‰§è¡Œ<br><br>        <span class="hljs-regexp">//</span> console.log(binding.value)<br>        <span class="hljs-regexp">//</span> console.log(binding.expression)<br><br>        el.style.color = binding.value<br>      &#125;<br>    &#125;)<br><br><br><br><span class="hljs-regexp">//</span> åœ¨VMå¯¹è±¡é‡Œå®šä¹‰ï¼Œè‡ªå®šä¹‰å±€éƒ¨æŒ‡ä»¤ v-color å’Œ v-font-weightï¼Œä¸ºç»‘å®šçš„å…ƒç´ è®¾ç½®æŒ‡å®šçš„å­—ä½“é¢œè‰² å’Œ å­—ä½“ç²—ç»†ï¼š<br>      directives: &#123;<br>        color: &#123; <span class="hljs-regexp">//</span> ä¸ºå…ƒç´ è®¾ç½®æŒ‡å®šçš„å­—ä½“é¢œè‰²<br>          bind(el, binding) &#123;<br>            el.style.color = binding.value;<br>          &#125;<br>        &#125;,<br>        <span class="hljs-string">&#x27;font-weight&#x27;</span>: <span class="hljs-keyword">function</span> (el, binding2) &#123; <span class="hljs-regexp">//</span> è‡ªå®šä¹‰æŒ‡ä»¤çš„ç®€å†™å½¢å¼ï¼Œç­‰åŒäºå®šä¹‰äº† bind å’Œ update ä¸¤ä¸ªé’©å­å‡½æ•°<br>          el.style.fontWeight = binding2.value;<br>        &#125;,<br>        <span class="hljs-string">&#x27;fontsize&#x27;</span>: <span class="hljs-keyword">function</span> (el, binding) &#123; <span class="hljs-regexp">//</span> æ³¨æ„ï¼šè¿™ä¸ª <span class="hljs-keyword">function</span> ç­‰åŒäº æŠŠ ä»£ç å†™åˆ°äº† bind å’Œ update ä¸­å»<br>          el.style.fontSize = parseInt(binding.value) + <span class="hljs-string">&#x27;px&#x27;</span><br>        &#125;<br>      &#125;<br></code></pre></td></tr></table></figure><ol start="2"><li>è‡ªå®šä¹‰æŒ‡ä»¤çš„ä½¿ç”¨æ–¹å¼ï¼š</li></ol><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">&lt;input <span class="hljs-attribute">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attribute">v-model</span>=<span class="hljs-string">&quot;searchName&quot;</span> v-focus <span class="hljs-attribute">v-color</span>=<span class="hljs-string">&quot;&#x27;red&#x27;&quot;</span> <span class="hljs-attribute">v-font-weight</span>=<span class="hljs-string">&quot;900&quot;</span> <span class="hljs-attribute">v-fontsize</span>=<span class="hljs-string">&quot;50&quot;</span>&gt;<br></code></pre></td></tr></table></figure><h2 id="Vue-1-x-ä¸­-è‡ªå®šä¹‰å…ƒç´ æŒ‡ä»¤ã€å·²åºŸå¼ƒ-äº†è§£å³å¯ã€‘"><a href="#Vue-1-x-ä¸­-è‡ªå®šä¹‰å…ƒç´ æŒ‡ä»¤ã€å·²åºŸå¼ƒ-äº†è§£å³å¯ã€‘" class="headerlink" title="Vue 1.x ä¸­ è‡ªå®šä¹‰å…ƒç´ æŒ‡ä»¤ã€å·²åºŸå¼ƒ,äº†è§£å³å¯ã€‘"></a>Vue 1.x ä¸­ è‡ªå®šä¹‰å…ƒç´ æŒ‡ä»¤ã€å·²åºŸå¼ƒ,äº†è§£å³å¯ã€‘</h2><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs actionscript">Vue.elementDirective(<span class="hljs-string">&#x27;red-color&#x27;</span>, &#123;<br>  bind: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">this</span>.el.style.color = <span class="hljs-string">&#x27;red&#x27;</span>;<br>  &#125;<br>&#125;);<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨æ–¹å¼ï¼š</p><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs processing">&lt;<span class="hljs-built_in">red</span>-<span class="hljs-built_in">color</span>&gt;<span class="hljs-number">1232</span>&lt;/<span class="hljs-built_in">red</span>-<span class="hljs-built_in">color</span>&gt;<br></code></pre></td></tr></table></figure><h2 id="vueå®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#vueå®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="vueå®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸ"></a><a href="https://cn.vuejs.org/v2/guide/instance.html#%E5%AE%9E%E4%BE%8B%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F">vueå®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸ</a></h2><ul><li>ä»€ä¹ˆæ˜¯ç”Ÿå‘½å‘¨æœŸï¼šä»Vueå®ä¾‹<code>åˆ›å»º</code>ã€<code>è¿è¡Œ</code>ã€åˆ°<code>é”€æ¯</code>æœŸé—´ï¼Œæ€»æ˜¯ä¼´éšç€å„ç§å„æ ·çš„äº‹ä»¶ï¼Œè¿™äº›äº‹ä»¶ï¼Œç»Ÿç§°ä¸ºç”Ÿå‘½å‘¨æœŸï¼</li><li><a href="https://cn.vuejs.org/v2/api/#%E9%80%89%E9%A1%B9-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E9%92%A9%E5%AD%90">ç”Ÿå‘½å‘¨æœŸé’©å­</a>ï¼šå°±æ˜¯ç”Ÿå‘½å‘¨æœŸäº‹ä»¶çš„åˆ«åè€Œå·²ï¼›</li><li><code>ç”Ÿå‘½å‘¨æœŸé’©å­</code> = <code>ç”Ÿå‘½å‘¨æœŸå‡½æ•°</code> = <code>ç”Ÿå‘½å‘¨æœŸäº‹ä»¶</code></li><li>ä¸»è¦çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°åˆ†ç±»ï¼š</li></ul><ul><li>åˆ›å»ºæœŸé—´çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼š<ul><li>beforeCreateï¼šå®ä¾‹åˆšåœ¨å†…å­˜ä¸­è¢«åˆ›å»ºå‡ºæ¥ï¼Œæ­¤æ—¶ï¼Œè¿˜æ²¡æœ‰åˆå§‹åŒ–å¥½ data å’Œ methods å±æ€§</li><li>createdï¼šå®ä¾‹å·²ç»åœ¨å†…å­˜ä¸­åˆ›å»ºOKï¼Œæ­¤æ—¶ data å’Œ methods å·²ç»åˆ›å»ºOKï¼Œæ­¤æ—¶è¿˜æ²¡æœ‰å¼€å§‹ ç¼–è¯‘æ¨¡æ¿</li><li>beforeMountï¼šæ­¤æ—¶å·²ç»å®Œæˆäº†æ¨¡æ¿çš„ç¼–è¯‘ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰æŒ‚è½½åˆ°é¡µé¢ä¸­</li><li>mountedï¼šæ­¤æ—¶ï¼Œå·²ç»å°†ç¼–è¯‘å¥½çš„æ¨¡æ¿ï¼ŒæŒ‚è½½åˆ°äº†é¡µé¢æŒ‡å®šçš„å®¹å™¨ä¸­æ˜¾ç¤º</li></ul></li><li>è¿è¡ŒæœŸé—´çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼š<ul><li>beforeUpdateï¼šçŠ¶æ€æ›´æ–°ä¹‹å‰æ‰§è¡Œæ­¤å‡½æ•°ï¼Œ æ­¤æ—¶ data ä¸­çš„çŠ¶æ€å€¼æ˜¯æœ€æ–°çš„ï¼Œä½†æ˜¯ç•Œé¢ä¸Šæ˜¾ç¤ºçš„ æ•°æ®è¿˜æ˜¯æ—§çš„ï¼Œå› ä¸ºæ­¤æ—¶è¿˜æ²¡æœ‰å¼€å§‹é‡æ–°æ¸²æŸ“DOMèŠ‚ç‚¹</li><li>updatedï¼šå®ä¾‹æ›´æ–°å®Œæ¯•ä¹‹åè°ƒç”¨æ­¤å‡½æ•°ï¼Œæ­¤æ—¶ data ä¸­çš„çŠ¶æ€å€¼ å’Œ ç•Œé¢ä¸Šæ˜¾ç¤ºçš„æ•°æ®ï¼Œéƒ½å·²ç»å®Œæˆäº†æ›´æ–°ï¼Œç•Œé¢å·²ç»è¢«é‡æ–°æ¸²æŸ“å¥½äº†ï¼</li></ul></li><li>é”€æ¯æœŸé—´çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼š<ul><li>beforeDestroyï¼šå®ä¾‹é”€æ¯ä¹‹å‰è°ƒç”¨ã€‚åœ¨è¿™ä¸€æ­¥ï¼Œå®ä¾‹ä»ç„¶å®Œå…¨å¯ç”¨ã€‚</li><li>destroyedï¼šVue å®ä¾‹é”€æ¯åè°ƒç”¨ã€‚è°ƒç”¨åï¼ŒVue å®ä¾‹æŒ‡ç¤ºçš„æ‰€æœ‰ä¸œè¥¿éƒ½ä¼šè§£ç»‘å®šï¼Œæ‰€æœ‰çš„äº‹ä»¶ç›‘å¬å™¨ä¼šè¢«ç§»é™¤ï¼Œæ‰€æœ‰çš„å­å®ä¾‹ä¹Ÿä¼šè¢«é”€æ¯ã€‚</li></ul></li></ul><p><img src="/2019/11/02/Vue-js-II/lifecycle.png" alt="lc"></p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;ä¿®æ”¹msg&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;msg=&#x27;No&#x27;&quot;</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;h3&quot;</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">msg</span> &#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">    // åˆ›å»º Vue å®ä¾‹ï¼Œå¾—åˆ° ViewModel</span><br><span class="xml">    var vm = new Vue(&#123;</span><br><span class="xml">      el: &#x27;#app&#x27;,</span><br><span class="xml">      data: &#123;</span><br><span class="xml">        msg: &#x27;ok&#x27;</span><br><span class="xml">      &#125;,</span><br><span class="xml">      methods: &#123;</span><br><span class="xml">        show() &#123;</span><br><span class="xml">          console.log(&#x27;æ‰§è¡Œäº†showæ–¹æ³•&#x27;)</span><br><span class="xml">        &#125;</span><br><span class="xml">      &#125;,</span><br><span class="xml">      beforeCreate() &#123; // è¿™æ˜¯æˆ‘ä»¬é‡åˆ°çš„ç¬¬ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œè¡¨ç¤ºå®ä¾‹å®Œå…¨è¢«åˆ›å»ºå‡ºæ¥ä¹‹å‰ï¼Œä¼šæ‰§è¡Œå®ƒ</span><br><span class="xml">        // console.log(this.msg)</span><br><span class="xml">        // this.show()</span><br><span class="xml">        // æ³¨æ„ï¼š åœ¨ beforeCreate ç”Ÿå‘½å‘¨æœŸå‡½æ•°æ‰§è¡Œçš„æ—¶å€™ï¼Œdata å’Œ methods ä¸­çš„ æ•°æ®éƒ½è¿˜æ²¡æœ‰æ²¡åˆå§‹åŒ–</span><br><span class="xml">      &#125;,</span><br><span class="xml">      created() &#123; // è¿™æ˜¯é‡åˆ°çš„ç¬¬äºŒä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°</span><br><span class="xml">        // console.log(this.msg)</span><br><span class="xml">        // this.show()</span><br><span class="xml">        //  åœ¨ created ä¸­ï¼Œdata å’Œ methods éƒ½å·²ç»è¢«åˆå§‹åŒ–å¥½äº†ï¼</span><br><span class="xml">        // å¦‚æœè¦è°ƒç”¨ methods ä¸­çš„æ–¹æ³•ï¼Œæˆ–è€…æ“ä½œ data ä¸­çš„æ•°æ®ï¼Œæœ€æ—©ï¼Œåªèƒ½åœ¨ created ä¸­æ“ä½œ</span><br><span class="xml">      &#125;,</span><br><span class="xml">      beforeMount() &#123; // è¿™æ˜¯é‡åˆ°çš„ç¬¬3ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œè¡¨ç¤º æ¨¡æ¿å·²ç»åœ¨å†…å­˜ä¸­ç¼–è¾‘å®Œæˆäº†ï¼Œä½†æ˜¯å°šæœªæŠŠ æ¨¡æ¿æ¸²æŸ“åˆ° é¡µé¢ä¸­</span><br><span class="xml">        // console.log(document.getElementById(&#x27;h3&#x27;).innerText)</span><br><span class="xml">        // åœ¨ beforeMount æ‰§è¡Œçš„æ—¶å€™ï¼Œé¡µé¢ä¸­çš„å…ƒç´ ï¼Œè¿˜æ²¡æœ‰è¢«çœŸæ­£æ›¿æ¢è¿‡æ¥ï¼Œåªæ˜¯ä¹‹å‰å†™çš„ä¸€äº›æ¨¡æ¿å­—ç¬¦ä¸²</span><br><span class="xml">      &#125;,</span><br><span class="xml">      mounted() &#123; // è¿™æ˜¯é‡åˆ°çš„ç¬¬4ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œè¡¨ç¤ºï¼Œå†…å­˜ä¸­çš„æ¨¡æ¿ï¼Œå·²ç»çœŸå®çš„æŒ‚è½½åˆ°äº†é¡µé¢ä¸­ï¼Œç”¨æˆ·å·²ç»å¯ä»¥çœ‹åˆ°æ¸²æŸ“å¥½çš„é¡µé¢äº†</span><br><span class="xml">        // console.log(document.getElementById(&#x27;h3&#x27;).innerText)</span><br><span class="xml">        // æ³¨æ„ï¼š mounted æ˜¯ å®ä¾‹åˆ›å»ºæœŸé—´çš„æœ€åä¸€ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œå½“æ‰§è¡Œå®Œ mounted å°±è¡¨ç¤ºï¼Œå®ä¾‹å·²ç»è¢«å®Œå…¨åˆ›å»ºå¥½äº†ï¼Œæ­¤æ—¶ï¼Œå¦‚æœæ²¡æœ‰å…¶å®ƒæ“ä½œçš„è¯ï¼Œè¿™ä¸ªå®ä¾‹ï¼Œå°±é™é™çš„ èººåœ¨æˆ‘ä»¬çš„å†…å­˜ä¸­ï¼Œä¸€åŠ¨ä¸åŠ¨</span><br><span class="xml">      &#125;,</span><br><span class="xml">      </span><br><span class="xml">      </span><br><span class="xml">      // æ¥ä¸‹æ¥çš„æ˜¯è¿è¡Œä¸­çš„ä¸¤ä¸ªäº‹ä»¶</span><br><span class="xml">      beforeUpdate() &#123; // è¿™æ—¶å€™ï¼Œè¡¨ç¤º æˆ‘ä»¬çš„ç•Œé¢è¿˜æ²¡æœ‰è¢«æ›´æ–°ã€æ•°æ®è¢«æ›´æ–°äº†å—ï¼Ÿ  æ•°æ®è‚¯å®šè¢«æ›´æ–°äº†ã€‘</span><br><span class="xml">        /* console.log(&#x27;ç•Œé¢ä¸Šå…ƒç´ çš„å†…å®¹ï¼š&#x27; + document.getElementById(&#x27;h3&#x27;).innerText)</span><br><span class="xml">        console.log(&#x27;data ä¸­çš„ msg æ•°æ®æ˜¯ï¼š&#x27; + this.msg) */</span><br><span class="xml">        // å¾—å‡ºç»“è®ºï¼š å½“æ‰§è¡Œ beforeUpdate çš„æ—¶å€™ï¼Œé¡µé¢ä¸­çš„æ˜¾ç¤ºçš„æ•°æ®ï¼Œè¿˜æ˜¯æ—§çš„ï¼Œæ­¤æ—¶ data æ•°æ®æ˜¯æœ€æ–°çš„ï¼Œé¡µé¢å°šæœªå’Œ æœ€æ–°çš„æ•°æ®ä¿æŒåŒæ­¥</span><br><span class="xml">      &#125;,</span><br><span class="xml">      updated() &#123;</span><br><span class="xml">        console.log(&#x27;ç•Œé¢ä¸Šå…ƒç´ çš„å†…å®¹ï¼š&#x27; + document.getElementById(&#x27;h3&#x27;).innerText)</span><br><span class="xml">        console.log(&#x27;data ä¸­çš„ msg æ•°æ®æ˜¯ï¼š&#x27; + this.msg)</span><br><span class="xml">        // updated äº‹ä»¶æ‰§è¡Œçš„æ—¶å€™ï¼Œé¡µé¢å’Œ data æ•°æ®å·²ç»ä¿æŒåŒæ­¥äº†ï¼Œéƒ½æ˜¯æœ€æ–°çš„</span><br><span class="xml">      &#125;</span><br><span class="xml">    &#125;);</span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h2 id="vue-resource-å®ç°-get-post-jsonpè¯·æ±‚"><a href="#vue-resource-å®ç°-get-post-jsonpè¯·æ±‚" class="headerlink" title="vue-resource å®ç° get, post, jsonpè¯·æ±‚"></a><a href="https://github.com/pagekit/vue-resource">vue-resource å®ç° get, post, jsonpè¯·æ±‚</a></h2><p>é™¤äº† vue-resource ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ <code>axios</code> çš„ç¬¬ä¸‰æ–¹åŒ…å®ç°å®ç°æ•°æ®çš„è¯·æ±‚</p><ol><li>ä¹‹å‰çš„å­¦ä¹ ä¸­ï¼Œå¦‚ä½•å‘èµ·æ•°æ®ï¼ˆajaxï¼Ÿï¼‰è¯·æ±‚ï¼Ÿ</li><li>å¸¸è§çš„æ•°æ®è¯·æ±‚ç±»å‹ï¼Ÿ  get  post  jsonp</li><li>æµ‹è¯•çš„URLè¯·æ±‚èµ„æºåœ°å€ï¼š</li></ol><ul><li>getè¯·æ±‚åœ°å€ï¼š <a href="http://vue.studyit.io/api/getlunbo">http://vue.studyit.io/api/getlunbo</a></li><li>postè¯·æ±‚åœ°å€ï¼š<a href="http://vue.studyit.io/api/post">http://vue.studyit.io/api/post</a></li><li>jsonpè¯·æ±‚åœ°å€ï¼š<a href="http://vue.studyit.io/api/jsonp">http://vue.studyit.io/api/jsonp</a></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./lib/vue-2.4.0.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-comment">&lt;!-- æ³¨æ„ï¼švue-resource ä¾èµ–äº Vueï¼Œæ‰€ä»¥å…ˆåé¡ºåºè¦æ³¨æ„  --&gt;</span><br>  <span class="hljs-comment">&lt;!-- this.$http.jsonp --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./lib/vue-resource-1.3.4.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;getè¯·æ±‚&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;getInfo&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;postè¯·æ±‚&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;postInfo&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;jsonpè¯·æ±‚&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;jsonpInfo&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">    <span class="hljs-comment">// åˆ›å»º Vue å®ä¾‹ï¼Œå¾—åˆ° ViewModel</span></span><br><span class="javascript">    <span class="hljs-keyword">var</span> vm = <span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">      el: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br>      data: &#123;&#125;,<br>      methods: &#123;<br><span class="javascript">        <span class="hljs-function"><span class="hljs-title">getInfo</span>(<span class="hljs-params"></span>)</span> &#123; <span class="hljs-comment">// å‘èµ·getè¯·æ±‚</span></span><br><span class="javascript">          <span class="hljs-comment">//  å½“å‘èµ·getè¯·æ±‚ä¹‹åï¼Œ é€šè¿‡ .then æ¥è®¾ç½®æˆåŠŸçš„å›è°ƒå‡½æ•°</span></span><br><span class="javascript">          <span class="hljs-built_in">this</span>.$http.get(<span class="hljs-string">&#x27;http://vue.studyit.io/api/getlunbo&#x27;</span>).then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">result</span>) </span>&#123;</span><br><span class="javascript">            <span class="hljs-comment">// é€šè¿‡ result.body æ‹¿åˆ°æœåŠ¡å™¨è¿”å›çš„æˆåŠŸçš„æ•°æ®</span></span><br><span class="javascript">            <span class="hljs-comment">// console.log(result.body)</span></span><br>          &#125;)<br>        &#125;,<br><span class="javascript">        <span class="hljs-function"><span class="hljs-title">postInfo</span>(<span class="hljs-params"></span>)</span> &#123; <span class="hljs-comment">// å‘èµ· post è¯·æ±‚   application/x-wwww-form-urlencoded</span></span><br><span class="javascript">          <span class="hljs-comment">//  æ‰‹åŠ¨å‘èµ·çš„ Post è¯·æ±‚ï¼Œé»˜è®¤æ²¡æœ‰è¡¨å•æ ¼å¼ï¼Œæ‰€ä»¥ï¼Œæœ‰çš„æœåŠ¡å™¨å¤„ç†ä¸äº†</span></span><br><span class="javascript">          <span class="hljs-comment">//  é€šè¿‡ post æ–¹æ³•çš„ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œ &#123; emulateJSON: true &#125; è®¾ç½® æäº¤çš„å†…å®¹ç±»å‹ ä¸º æ™®é€šè¡¨å•æ•°æ®æ ¼å¼</span></span><br><span class="javascript">          <span class="hljs-built_in">this</span>.$http.post(<span class="hljs-string">&#x27;http://vue.studyit.io/api/post&#x27;</span>, &#123;&#125;, &#123; <span class="hljs-attr">emulateJSON</span>: <span class="hljs-literal">true</span> &#125;).then(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> &#123;</span><br><span class="javascript">            <span class="hljs-built_in">console</span>.log(result.body)</span><br>          &#125;)<br>        &#125;,<br><span class="javascript">        <span class="hljs-function"><span class="hljs-title">jsonpInfo</span>(<span class="hljs-params"></span>)</span> &#123; <span class="hljs-comment">// å‘èµ·JSONP è¯·æ±‚</span></span><br><span class="javascript">          <span class="hljs-built_in">this</span>.$http.jsonp(<span class="hljs-string">&#x27;http://vue.studyit.io/api/jsonp&#x27;</span>).then(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> &#123;</span><br><span class="javascript">            <span class="hljs-built_in">console</span>.log(result.body)</span><br>          &#125;)<br>        &#125;<br>      &#125;<br>    &#125;);<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure><ol start="4"><li>JSONPçš„å®ç°åŸç†</li></ol><ul><li>ç”±äºæµè§ˆå™¨çš„å®‰å…¨æ€§é™åˆ¶ï¼Œä¸å…è®¸AJAXè®¿é—® åè®®ä¸åŒã€åŸŸåä¸åŒã€ç«¯å£å·ä¸åŒçš„ æ•°æ®æ¥å£ï¼Œæµè§ˆå™¨è®¤ä¸ºè¿™ç§è®¿é—®ä¸å®‰å…¨ï¼›</li><li>å¯ä»¥é€šè¿‡åŠ¨æ€åˆ›å»ºscriptæ ‡ç­¾çš„å½¢å¼ï¼ŒæŠŠscriptæ ‡ç­¾çš„srcå±æ€§ï¼ŒæŒ‡å‘æ•°æ®æ¥å£çš„åœ°å€ï¼Œå› ä¸ºscriptæ ‡ç­¾ä¸å­˜åœ¨è·¨åŸŸé™åˆ¶ï¼Œè¿™ç§æ•°æ®è·å–æ–¹å¼ï¼Œç§°ä½œJSONPï¼ˆæ³¨æ„ï¼šæ ¹æ®JSONPçš„å®ç°åŸç†ï¼ŒçŸ¥æ™“ï¼ŒJSONPåªæ”¯æŒGetè¯·æ±‚ï¼‰ï¼›</li><li>å…·ä½“å®ç°è¿‡ç¨‹ï¼š<ul><li>å…ˆåœ¨å®¢æˆ·ç«¯å®šä¹‰ä¸€ä¸ªå›è°ƒæ–¹æ³•ï¼Œé¢„å®šä¹‰å¯¹æ•°æ®çš„æ“ä½œï¼›</li><li>å†æŠŠè¿™ä¸ªå›è°ƒæ–¹æ³•çš„åç§°ï¼Œé€šè¿‡URLä¼ å‚çš„å½¢å¼ï¼Œæäº¤åˆ°æœåŠ¡å™¨çš„æ•°æ®æ¥å£ï¼›</li><li>æœåŠ¡å™¨æ•°æ®æ¥å£ç»„ç»‡å¥½è¦å‘é€ç»™å®¢æˆ·ç«¯çš„æ•°æ®ï¼Œå†æ‹¿ç€å®¢æˆ·ç«¯ä¼ é€’è¿‡æ¥çš„å›è°ƒæ–¹æ³•åç§°ï¼Œæ‹¼æ¥å‡ºä¸€ä¸ªè°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„å­—ç¬¦ä¸²ï¼Œå‘é€ç»™å®¢æˆ·ç«¯å»è§£ææ‰§è¡Œï¼›</li><li>å®¢æˆ·ç«¯æ‹¿åˆ°æœåŠ¡å™¨è¿”å›çš„å­—ç¬¦ä¸²ä¹‹åï¼Œå½“ä½œScriptè„šæœ¬å»è§£ææ‰§è¡Œï¼Œè¿™æ ·å°±èƒ½å¤Ÿæ‹¿åˆ°JSONPçš„æ•°æ®äº†ï¼›</li></ul></li><li>å¸¦å¤§å®¶é€šè¿‡ Node.js ï¼Œæ¥æ‰‹åŠ¨å®ç°ä¸€ä¸ªJSONPçš„è¯·æ±‚ä¾‹å­ï¼›<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//nodeæœåŠ¡å™¨ä»£ç app.js     nserå¿«é€Ÿåˆ›å»ºåˆ›å»ºä¸€ä¸ªnodeæœåŠ¡å™¨</span><br>    <br>    <span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;http&#x27;</span>);<br>    <span class="hljs-comment">// å¯¼å…¥è§£æ URL åœ°å€çš„æ ¸å¿ƒæ¨¡å—</span><br>    <span class="hljs-keyword">const</span> urlModule = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;url&#x27;</span>);<br><br>    <span class="hljs-keyword">const</span> server = http.createServer();<br>    <span class="hljs-comment">// ç›‘å¬ æœåŠ¡å™¨çš„ request è¯·æ±‚äº‹ä»¶ï¼Œå¤„ç†æ¯ä¸ªè¯·æ±‚</span><br>    server.on(<span class="hljs-string">&#x27;request&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>      <span class="hljs-keyword">const</span> url = req.url;<br><br>      <span class="hljs-comment">// è§£æå®¢æˆ·ç«¯è¯·æ±‚çš„URLåœ°å€</span><br>      <span class="hljs-keyword">var</span> info = urlModule.parse(url, <span class="hljs-literal">true</span>);<br><br>      <span class="hljs-comment">// å¦‚æœè¯·æ±‚çš„ URL åœ°å€æ˜¯ /getjsonp ï¼Œåˆ™è¡¨ç¤ºè¦è·å–JSONPç±»å‹çš„æ•°æ®</span><br>      <span class="hljs-keyword">if</span> (info.pathname === <span class="hljs-string">&#x27;/getjsonp&#x27;</span>) &#123;<br>        <span class="hljs-comment">// è·å–å®¢æˆ·ç«¯æŒ‡å®šçš„å›è°ƒå‡½æ•°çš„åç§°</span><br>        <span class="hljs-keyword">var</span> cbName = info.query.callback;<br>        <span class="hljs-comment">// æ‰‹åŠ¨æ‹¼æ¥è¦è¿”å›ç»™å®¢æˆ·ç«¯çš„æ•°æ®å¯¹è±¡</span><br>        <span class="hljs-keyword">var</span> data = &#123;<br>          name: <span class="hljs-string">&#x27;zs&#x27;</span>,<br>          age: <span class="hljs-number">22</span>,<br>          gender: <span class="hljs-string">&#x27;ç”·&#x27;</span>,<br>          hobby: [<span class="hljs-string">&#x27;åƒé¥­&#x27;</span>, <span class="hljs-string">&#x27;ç¡è§‰&#x27;</span>, <span class="hljs-string">&#x27;è¿åŠ¨&#x27;</span>]<br>        &#125;<br>        <span class="hljs-comment">// æ‹¼æ¥å‡ºä¸€ä¸ªæ–¹æ³•çš„è°ƒç”¨ï¼Œåœ¨è°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„æ—¶å€™ï¼ŒæŠŠè¦å‘é€ç»™å®¢æˆ·ç«¯çš„æ•°æ®ï¼Œåºåˆ—åŒ–ä¸ºå­—ç¬¦ä¸²ï¼Œä½œä¸ºå‚æ•°ä¼ é€’ç»™è¿™ä¸ªè°ƒç”¨çš„æ–¹æ³•ï¼š</span><br>        <span class="hljs-keyword">var</span> result = <span class="hljs-string">`<span class="hljs-subst">$&#123;cbName&#125;</span>(<span class="hljs-subst">$&#123;<span class="hljs-built_in">JSON</span>.stringify(data)&#125;</span>)`</span>;<br>        <span class="hljs-comment">// å°†æ‹¼æ¥å¥½çš„æ–¹æ³•çš„è°ƒç”¨ï¼Œè¿”å›ç»™å®¢æˆ·ç«¯å»è§£ææ‰§è¡Œ</span><br>        res.end(result);<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        res.end(<span class="hljs-string">&#x27;404&#x27;</span>);<br>      &#125;<br>    &#125;);<br><br>    server.listen(<span class="hljs-number">3000</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;server running at http://127.0.0.1:3000&#x27;</span>);<br>    &#125;);<br></code></pre></td></tr></table></figure></li></ul><ol start="5"><li>vue-resource çš„é…ç½®æ­¥éª¤ï¼š</li></ol><ul><li>ç›´æ¥åœ¨é¡µé¢ä¸­ï¼Œé€šè¿‡<code>script</code>æ ‡ç­¾ï¼Œå¼•å…¥ <code>vue-resource</code> çš„è„šæœ¬æ–‡ä»¶ï¼›</li><li>æ³¨æ„ï¼šå¼•ç”¨çš„å…ˆåé¡ºåºæ˜¯ï¼šå…ˆå¼•ç”¨ <code>Vue</code> çš„è„šæœ¬æ–‡ä»¶ï¼Œå†å¼•ç”¨ <code>vue-resource</code> çš„è„šæœ¬æ–‡ä»¶ï¼›</li></ul><ol start="6"><li>å‘é€getè¯·æ±‚ï¼š<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-title">getInfo</span>(<span class="hljs-params"></span>)</span> &#123; <span class="hljs-comment">// get æ–¹å¼è·å–æ•°æ®</span><br>  <span class="hljs-built_in">this</span>.$http.get(<span class="hljs-string">&#x27;http://127.0.0.1:8899/api/getlunbo&#x27;</span>).then(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(res.body);<br>  &#125;)<br>&#125;<br></code></pre></td></tr></table></figure></li><li>å‘é€postè¯·æ±‚ï¼š<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-title">postInfo</span>(<span class="hljs-params"></span>)</span> &#123;<br>  <span class="hljs-keyword">var</span> url = <span class="hljs-string">&#x27;http://127.0.0.1:8899/api/post&#x27;</span>;<br>  <span class="hljs-comment">// post æ–¹æ³•æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼š</span><br>  <span class="hljs-comment">// å‚æ•°1ï¼š è¦è¯·æ±‚çš„URLåœ°å€</span><br>  <span class="hljs-comment">// å‚æ•°2ï¼š è¦å‘é€çš„æ•°æ®å¯¹è±¡</span><br>  <span class="hljs-comment">// å‚æ•°3ï¼š æŒ‡å®špostæäº¤çš„ç¼–ç ç±»å‹ä¸º application/x-www-form-urlencoded</span><br>  <span class="hljs-built_in">this</span>.$http.post(url, &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;zs&#x27;</span> &#125;, &#123; <span class="hljs-attr">emulateJSON</span>: <span class="hljs-literal">true</span> &#125;).then(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(res.body);<br>  &#125;);<br>&#125;<br></code></pre></td></tr></table></figure></li><li>å‘é€JSONPè¯·æ±‚è·å–æ•°æ®ï¼š<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-title">jsonpInfo</span>(<span class="hljs-params"></span>)</span> &#123; <span class="hljs-comment">// JSONPå½¢å¼ä»æœåŠ¡å™¨è·å–æ•°æ®</span><br>  <span class="hljs-keyword">var</span> url = <span class="hljs-string">&#x27;http://127.0.0.1:8899/api/jsonp&#x27;</span>;<br>  <span class="hljs-built_in">this</span>.$http.jsonp(url).then(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(res.body);<br>  &#125;);<br>&#125;<br></code></pre></td></tr></table></figure></li></ol><p><strong>å®Œæ•´ä»£ç </strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- å®¢æˆ·ç«¯JSONPé¡µé¢ .html--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">showInfo123</span>(<span class="hljs-params">data</span>) </span>&#123;</span><br><span class="javascript">      <span class="hljs-built_in">console</span>.log(data)</span><br>    &#125;<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;http://127.0.0.1:3000/getscript?callback=showInfo123&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-comment">&lt;!-- &lt;script&gt;</span><br><span class="hljs-comment">  show()</span><br><span class="hljs-comment">&lt;/script&gt; --&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//   --æœåŠ¡ç«¯ä»£ç  .js--</span><br><br><span class="hljs-comment">// å¯¼å…¥ http å†…ç½®æ¨¡å—</span><br><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;http&#x27;</span>)<br><span class="hljs-comment">// è¿™ä¸ªæ ¸å¿ƒæ¨¡å—ï¼Œèƒ½å¤Ÿå¸®æˆ‘ä»¬è§£æ URLåœ°å€ï¼Œä»è€Œæ‹¿åˆ°  pathname  query </span><br><span class="hljs-keyword">const</span> urlModule = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;url&#x27;</span>)<br><br><span class="hljs-comment">// åˆ›å»ºä¸€ä¸ª http æœåŠ¡å™¨</span><br><span class="hljs-keyword">const</span> server = http.createServer()<br><span class="hljs-comment">// ç›‘å¬ http æœåŠ¡å™¨çš„ request è¯·æ±‚</span><br>server.on(<span class="hljs-string">&#x27;request&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req, res</span>) </span>&#123;<br><br>  <span class="hljs-comment">// const url = req.url</span><br>  <span class="hljs-keyword">const</span> &#123; <span class="hljs-attr">pathname</span>: url, query &#125; = urlModule.parse(req.url, <span class="hljs-literal">true</span>)<br><br>  <span class="hljs-keyword">if</span> (url === <span class="hljs-string">&#x27;/getscript&#x27;</span>) &#123;<br>    <span class="hljs-comment">// æ‹¼æ¥ä¸€ä¸ªåˆæ³•çš„JSè„šæœ¬ï¼Œè¿™é‡Œæ‹¼æ¥çš„æ˜¯ä¸€ä¸ªæ–¹æ³•çš„è°ƒç”¨</span><br>    <span class="hljs-comment">// var scriptStr = &#x27;show()&#x27;</span><br><br>    <span class="hljs-keyword">var</span> data = &#123;<br>      name: <span class="hljs-string">&#x27;xjj&#x27;</span>,<br>      age: <span class="hljs-number">18</span>,<br>      gender: <span class="hljs-string">&#x27;å¥³å­©å­&#x27;</span><br>    &#125;<br><br>    <span class="hljs-keyword">var</span> scriptStr = <span class="hljs-string">`<span class="hljs-subst">$&#123;query.callback&#125;</span>(<span class="hljs-subst">$&#123;<span class="hljs-built_in">JSON</span>.stringify(data)&#125;</span>)`</span><br>    <span class="hljs-comment">// res.end å‘é€ç»™ å®¢æˆ·ç«¯ï¼Œ å®¢æˆ·ç«¯å»æŠŠ è¿™ä¸ª å­—ç¬¦ä¸²ï¼Œå½“ä½œJSä»£ç å»è§£ææ‰§è¡Œ</span><br>    res.end(scriptStr)<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    res.end(<span class="hljs-string">&#x27;404&#x27;</span>)<br>  &#125;<br>&#125;)<br><br><span class="hljs-comment">// æŒ‡å®šç«¯å£å·å¹¶å¯åŠ¨æœåŠ¡å™¨ç›‘å¬</span><br>server.listen(<span class="hljs-number">3000</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;server listen at http://127.0.0.1:3000&#x27;</span>)<br>&#125;)<br></code></pre></td></tr></table></figure><p><img src="/2019/11/02/Vue-js-II/nodemon.png" alt="nodemon"></p><h2 id="é…ç½®æœ¬åœ°æ•°æ®åº“å’Œæ•°æ®æ¥å£API"><a href="#é…ç½®æœ¬åœ°æ•°æ®åº“å’Œæ•°æ®æ¥å£API" class="headerlink" title="é…ç½®æœ¬åœ°æ•°æ®åº“å’Œæ•°æ®æ¥å£API"></a>é…ç½®æœ¬åœ°æ•°æ®åº“å’Œæ•°æ®æ¥å£API</h2><ol><li>å…ˆè§£å‹å®‰è£… <code>PHPStudy</code>;</li><li>è§£å‹å®‰è£… <code>Navicat</code> è¿™ä¸ªæ•°æ®åº“å¯è§†åŒ–å·¥å…·ï¼Œå¹¶æ¿€æ´»ï¼›</li><li>æ‰“å¼€ <code>Navicat</code> å·¥å…·ï¼Œæ–°å»ºç©ºç™½æ•°æ®åº“ï¼Œåä¸º <code>dtcmsdb4</code>;</li><li>åŒå‡»æ–°å»ºçš„æ•°æ®åº“ï¼Œè¿æ¥ä¸Šè¿™ä¸ªç©ºç™½æ•°æ®åº“ï¼Œåœ¨æ–°å»ºçš„æ•°æ®åº“ä¸Š<code>å³é”®</code> -&gt; <code>è¿è¡ŒSQLæ–‡ä»¶</code>ï¼Œé€‰æ‹©å¹¶æ‰§è¡Œ <code>dtcmsdb4.sql</code> è¿™ä¸ªæ•°æ®åº“è„šæœ¬æ–‡ä»¶ï¼›å¦‚æœæ‰§è¡Œä¸æŠ¥é”™ï¼Œåˆ™æ•°æ®åº“å¯¼å…¥å®Œæˆï¼›</li><li>è¿›å…¥æ–‡ä»¶å¤¹ <code>vuecms3_nodejsapi</code> å†…éƒ¨ï¼Œæ‰§è¡Œ <code>npm i</code> å®‰è£…æ‰€æœ‰çš„ä¾èµ–é¡¹ï¼›</li><li>å…ˆç¡®ä¿æœ¬æœºå®‰è£…äº† <code>nodemon</code>, æ²¡æœ‰å®‰è£…ï¼Œåˆ™è¿è¡Œ <code>npm i nodemon -g</code> è¿›è¡Œå…¨å±€å®‰è£…ï¼Œå®‰è£…å®Œæ¯•åï¼Œè¿›å…¥åˆ° <code>vuecms3_nodejsapi</code>ç›®å½• -&gt; <code>src</code>ç›®å½• -&gt; åŒå‡»è¿è¡Œ <code>start.bat</code></li><li>å¦‚æœAPIå¯åŠ¨å¤±è´¥ï¼Œè¯·æ£€æŸ¥ PHPStudy æ˜¯å¦æ­£å¸¸å¼€å¯ï¼ŒåŒæ—¶ï¼Œæ£€æŸ¥ <code>app.js</code> ä¸­ç¬¬ <code>14è¡Œ</code> ä¸­æ•°æ®åº“è¿æ¥é…ç½®å­—ç¬¦ä¸²æ˜¯å¦æ­£ç¡®ï¼›PHPStudy ä¸­é»˜è®¤çš„ ç”¨æˆ·åæ˜¯rootï¼Œé»˜è®¤çš„å¯†ç ä¹Ÿæ˜¯root</li></ol><h2 id="å“ç‰Œç®¡ç†æ”¹é€ "><a href="#å“ç‰Œç®¡ç†æ”¹é€ " class="headerlink" title="å“ç‰Œç®¡ç†æ”¹é€ "></a>å“ç‰Œç®¡ç†æ”¹é€ </h2><p><strong>å±•ç¤ºå“ç‰Œåˆ—è¡¨ã€æ·»åŠ å“ç‰Œæ•°æ®ã€åˆ é™¤å“ç‰Œæ•°æ®</strong></p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./lib/vue-2.4.0.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./lib/vue-resource-1.3.4.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;./lib/bootstrap-3.3.7.css&quot;</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;panel panel-primary&quot;</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;panel-heading&quot;</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;panel-title&quot;</span>&gt;</span>æ·»åŠ å“ç‰Œ<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;panel-body form-inline&quot;</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span></span><br><span class="xml">          Name:</span><br><span class="xml">          <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;form-control&quot;</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><br><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;æ·»åŠ &quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;add&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn btn-primary&quot;</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">table</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;table table-bordered table-hover table-striped&quot;</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">thead</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span></span><br><span class="xml">          <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Id<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span></span><br><span class="xml">          <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Name<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span></span><br><span class="xml">          <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Ctime<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span></span><br><span class="xml">          <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Operation<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">thead</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">tbody</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">tr</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;item in list&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;item.id&quot;</span>&gt;</span></span><br><span class="xml">          <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item.id</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span></span><br><span class="xml">          <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item.name</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span></span><br><span class="xml">          <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item.ctime</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span></span><br><span class="xml">          <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;&quot;</span> @<span class="hljs-attr">click.prevent</span>=<span class="hljs-string">&quot;del(item.id)&quot;</span>&gt;</span>åˆ é™¤<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span><br><span class="xml">          <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">tbody</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">    // å¦‚æœæˆ‘ä»¬é€šè¿‡å…¨å±€é…ç½®äº†ï¼Œè¯·æ±‚çš„æ•°æ®æ¥å£ æ ¹åŸŸåï¼Œåˆ™ ï¼Œåœ¨æ¯æ¬¡å•ç‹¬å‘èµ· http è¯·æ±‚çš„æ—¶å€™ï¼Œè¯·æ±‚çš„ url è·¯å¾„ï¼Œåº”è¯¥ä»¥ç›¸å¯¹è·¯å¾„å¼€å¤´ï¼Œå‰é¢ä¸èƒ½å¸¦ /  ï¼Œå¦åˆ™ ä¸ä¼šå¯ç”¨æ ¹è·¯å¾„åšæ‹¼æ¥ï¼›</span><br><span class="xml">    Vue.http.options.root = &#x27;www.liulongbin.top:3005/&#x27;;</span><br><span class="xml">    // å…¨å±€å¯ç”¨ emulateJSON é€‰é¡¹</span><br><span class="xml">    Vue.http.options.emulateJSON = true;</span><br><br><span class="xml">    // åˆ›å»º Vue å®ä¾‹ï¼Œå¾—åˆ° ViewModel</span><br><span class="xml">    var vm = new Vue(&#123;</span><br><span class="xml">      el: &#x27;#app&#x27;,</span><br><span class="xml">      data: &#123;</span><br><span class="xml">        name: &#x27;&#x27;,</span><br><span class="xml">        list: [ // å­˜æ”¾æ‰€æœ‰å“ç‰Œåˆ—è¡¨çš„æ•°ç»„</span><br><span class="xml">        ]</span><br><span class="xml">      &#125;,</span><br><span class="xml">      created() &#123; // å½“ vm å®ä¾‹ çš„ data å’Œ methods åˆå§‹åŒ–å®Œæ¯•åï¼Œvmå®ä¾‹ä¼šè‡ªåŠ¨æ‰§è¡Œcreated è¿™ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°</span><br><span class="xml">        this.getAllList()</span><br><span class="xml">      &#125;,</span><br><span class="xml">      methods: &#123;</span><br><span class="xml">        getAllList() &#123; // è·å–æ‰€æœ‰çš„å“ç‰Œåˆ—è¡¨ </span><br><span class="xml">          // åˆ†æï¼š</span><br><span class="xml">          // 1. ç”±äºå·²ç»å¯¼å…¥äº† Vue-resourceè¿™ä¸ªåŒ…ï¼Œæ‰€ä»¥ ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡  this.$http æ¥å‘èµ·æ•°æ®è¯·æ±‚</span><br><span class="xml">          // 2. æ ¹æ®æ¥å£APIæ–‡æ¡£ï¼ŒçŸ¥é“ï¼Œè·å–åˆ—è¡¨çš„æ—¶å€™ï¼Œåº”è¯¥å‘èµ·ä¸€ä¸ª get è¯·æ±‚</span><br><span class="xml">          // 3. this.$http.get(&#x27;url&#x27;).then(function(result)&#123;&#125;)</span><br><span class="xml">          // 4. å½“é€šè¿‡ then æŒ‡å®šå›è°ƒå‡½æ•°ä¹‹åï¼Œåœ¨å›è°ƒå‡½æ•°ä¸­ï¼Œå¯ä»¥æ‹¿åˆ°æ•°æ®æœåŠ¡å™¨è¿”å›çš„ result</span><br><span class="xml">          // 5. å…ˆåˆ¤æ–­ result.status æ˜¯å¦ç­‰äº0ï¼Œå¦‚æœç­‰äº0ï¼Œå°±æˆåŠŸäº†ï¼Œå¯ä»¥ æŠŠ result.message èµ‹å€¼ç»™ this.list ; å¦‚æœä¸ç­‰äº0ï¼Œå¯ä»¥å¼¹æ¡†æé†’ï¼Œè·å–æ•°æ®å¤±è´¥ï¼</span><br><br><span class="xml">          this.$http.get(&#x27;api/getprodlist&#x27;).then(result =&gt; &#123;</span><br><span class="xml">            // æ³¨æ„ï¼š é€šè¿‡ $http è·å–åˆ°çš„æ•°æ®ï¼Œéƒ½åœ¨ result.body ä¸­æ”¾ç€</span><br><span class="xml">            var result = result.body</span><br><span class="xml">            if (result.status === 0) &#123;</span><br><span class="xml">              // æˆåŠŸäº†</span><br><span class="xml">              this.list = result.message</span><br><span class="xml">            &#125; else &#123;</span><br><span class="xml">              // å¤±è´¥äº†</span><br><span class="xml">              alert(&#x27;è·å–æ•°æ®å¤±è´¥ï¼&#x27;)</span><br><span class="xml">            &#125;</span><br><span class="xml">          &#125;)</span><br><span class="xml">        &#125;,</span><br><span class="xml">        add() &#123;  // æ·»åŠ å“ç‰Œåˆ—è¡¨åˆ°åå°æœåŠ¡å™¨</span><br><span class="xml">          // åˆ†æï¼š</span><br><span class="xml">          // 1. å¬è¿‡æŸ¥çœ‹ æ•°æ®APIæ¥å£ï¼Œå‘ç°ï¼Œè¦å‘é€ä¸€ä¸ª Post è¯·æ±‚ï¼Œ  this.$http.post</span><br><span class="xml">          // 2. this.$http.post() ä¸­æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼š</span><br><span class="xml">          //   2.1 ç¬¬ä¸€ä¸ªå‚æ•°ï¼š è¦è¯·æ±‚çš„URLåœ°å€</span><br><span class="xml">          //   2.2 ç¬¬äºŒä¸ªå‚æ•°ï¼š è¦æäº¤ç»™æœåŠ¡å™¨çš„æ•°æ® ï¼Œè¦ä»¥å¯¹è±¡å½¢å¼æäº¤ç»™æœåŠ¡å™¨ &#123; name: this.name &#125;</span><br><span class="xml">          //   3.3 ç¬¬ä¸‰ä¸ªå‚æ•°ï¼š æ˜¯ä¸€ä¸ªé…ç½®å¯¹è±¡ï¼Œè¦ä»¥å“ªç§è¡¨å•æ•°æ®ç±»å‹æäº¤è¿‡å»ï¼Œ &#123; emulateJSON: true &#125;, ä»¥æ™®é€šè¡¨å•æ ¼å¼ï¼Œå°†æ•°æ®æäº¤ç»™æœåŠ¡å™¨ application/x-www-form-urlencoded</span><br><span class="xml">          // 3. åœ¨ post æ–¹æ³•ä¸­ï¼Œä½¿ç”¨ .then æ¥è®¾ç½®æˆåŠŸçš„å›è°ƒå‡½æ•°ï¼Œå¦‚æœæƒ³è¦æ‹¿åˆ°æˆåŠŸçš„ç»“æœï¼Œéœ€è¦ result.body</span><br><br><span class="xml">          /* this.$http.post(&#x27;api/addproduct&#x27;, &#123; name: this.name &#125;, &#123; emulateJSON: true &#125;).then(result =&gt; &#123;</span><br><span class="xml">            if (result.body.status === 0) &#123;</span><br><span class="xml">              // æˆåŠŸäº†ï¼</span><br><span class="xml">              // æ·»åŠ å®Œæˆåï¼Œåªéœ€è¦æ‰‹åŠ¨ï¼Œå†è°ƒç”¨ä¸€ä¸‹ getAllList å°±èƒ½åˆ·æ–°å“ç‰Œåˆ—è¡¨äº†</span><br><span class="xml">              this.getAllList()</span><br><span class="xml">              // æ¸…ç©º name </span><br><span class="xml">              this.name = &#x27;&#x27;</span><br><span class="xml">            &#125; else &#123;</span><br><span class="xml">              // å¤±è´¥äº†</span><br><span class="xml">              alert(&#x27;æ·»åŠ å¤±è´¥ï¼&#x27;)</span><br><span class="xml">            &#125;</span><br><span class="xml">          &#125;) */</span><br><br><span class="xml">          this.$http.post(&#x27;api/addproduct&#x27;, &#123; name: this.name &#125;).then(result =&gt; &#123;</span><br><span class="xml">            if (result.body.status === 0) &#123;</span><br><span class="xml">              // æˆåŠŸäº†ï¼</span><br><span class="xml">              // æ·»åŠ å®Œæˆåï¼Œåªéœ€è¦æ‰‹åŠ¨ï¼Œå†è°ƒç”¨ä¸€ä¸‹ getAllList å°±èƒ½åˆ·æ–°å“ç‰Œåˆ—è¡¨äº†</span><br><span class="xml">              this.getAllList()</span><br><span class="xml">              // æ¸…ç©º name </span><br><span class="xml">              this.name = &#x27;&#x27;</span><br><span class="xml">            &#125; else &#123;</span><br><span class="xml">              // å¤±è´¥äº†</span><br><span class="xml">              alert(&#x27;æ·»åŠ å¤±è´¥ï¼&#x27;)</span><br><span class="xml">            &#125;</span><br><span class="xml">          &#125;)</span><br><span class="xml">        &#125;,</span><br><span class="xml">        del(id) &#123; // åˆ é™¤å“ç‰Œ</span><br><span class="xml">          this.$http.get(&#x27;api/delproduct/&#x27; + id).then(result =&gt; &#123;</span><br><span class="xml">            if (result.body.status === 0) &#123;</span><br><span class="xml">              // åˆ é™¤æˆåŠŸ</span><br><span class="xml">              this.getAllList()</span><br><span class="xml">            &#125; else &#123;</span><br><span class="xml">              alert(&#x27;åˆ é™¤å¤±è´¥ï¼&#x27;)</span><br><span class="xml">            &#125;</span><br><span class="xml">          &#125;)</span><br><span class="xml">        &#125;</span><br><span class="xml">      &#125;</span><br><span class="xml">    &#125;);</span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h2 id="Vueä¸­çš„åŠ¨ç”»"><a href="#Vueä¸­çš„åŠ¨ç”»" class="headerlink" title="Vueä¸­çš„åŠ¨ç”»"></a><a href="https://cn.vuejs.org/v2/guide/transitions.html">Vueä¸­çš„åŠ¨ç”»</a></h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- æ²¡æœ‰åŠ¨ç”»æ•ˆæœï¼Œç”Ÿç¡¬ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;toggle&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;flag=!flag&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- éœ€æ±‚ï¼š ç‚¹å‡»æŒ‰é’®ï¼Œè®© h3 æ˜¾ç¤ºï¼Œå†ç‚¹å‡»ï¼Œè®© h3 éšè— --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;flag&quot;</span>&gt;</span>è¿™æ˜¯ä¸€ä¸ªH3<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">    <span class="hljs-comment">// åˆ›å»º Vue å®ä¾‹ï¼Œå¾—åˆ° ViewModel</span></span><br><span class="javascript">    <span class="hljs-keyword">var</span> vm = <span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">      el: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br>      data: &#123;<br><span class="javascript">        flag: <span class="hljs-literal">false</span></span><br>      &#125;,<br>      methods: &#123;&#125;<br>    &#125;);<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ä¸ºä»€ä¹ˆè¦æœ‰åŠ¨ç”»ï¼šåŠ¨ç”»èƒ½å¤Ÿæé«˜ç”¨æˆ·çš„ä½“éªŒï¼Œå¸®åŠ©ç”¨æˆ·æ›´å¥½çš„ç†è§£é¡µé¢ä¸­çš„åŠŸèƒ½ï¼›</p><h3 id="ä½¿ç”¨è¿‡æ¸¡ç±»å"><a href="#ä½¿ç”¨è¿‡æ¸¡ç±»å" class="headerlink" title="ä½¿ç”¨è¿‡æ¸¡ç±»å"></a>ä½¿ç”¨è¿‡æ¸¡ç±»å</h3><ol><li>HTMLç»“æ„ï¼š<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;åŠ¨èµ·æ¥&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;myAnimate&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- ä½¿ç”¨ transition å°†éœ€è¦è¿‡æ¸¡çš„å…ƒç´ åŒ…è£¹èµ·æ¥ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">transition</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;fade&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-show</span>=<span class="hljs-string">&quot;isshow&quot;</span>&gt;</span>åŠ¨ç”»å“¦<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">transition</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li>VM å®ä¾‹ï¼š<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// åˆ›å»º Vue å®ä¾‹ï¼Œå¾—åˆ° ViewModel</span><br><span class="hljs-keyword">var</span> vm = <span class="hljs-keyword">new</span> Vue(&#123;<br>  el: <span class="hljs-string">&#x27;#app&#x27;</span>,<br>  data: &#123;<br>    isshow: <span class="hljs-literal">false</span><br>  &#125;,<br>  methods: &#123;<br>    <span class="hljs-function"><span class="hljs-title">myAnimate</span>(<span class="hljs-params"></span>)</span> &#123;<br>      <span class="hljs-built_in">this</span>.isshow = !<span class="hljs-built_in">this</span>.isshow;<br>    &#125;<br>  &#125;<br>&#125;);<br></code></pre></td></tr></table></figure></li><li>å®šä¹‰ä¸¤ç»„ç±»æ ·å¼ï¼š<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-comment">/* å®šä¹‰è¿›å…¥å’Œç¦»å¼€æ—¶å€™çš„è¿‡æ¸¡çŠ¶æ€ */</span><br>    <span class="hljs-selector-class">.fade-enter-active</span>,<br>    <span class="hljs-selector-class">.fade-leave-active</span> &#123;<br>      <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.2s</span> ease;<br>      <span class="hljs-attribute">position</span>: absolute;<br>    &#125;<br><br>    <span class="hljs-comment">/* å®šä¹‰è¿›å…¥è¿‡æ¸¡çš„å¼€å§‹çŠ¶æ€ å’Œ ç¦»å¼€è¿‡æ¸¡çš„ç»“æŸçŠ¶æ€ */</span><br>    <span class="hljs-selector-class">.fade-enter</span>,<br>    <span class="hljs-selector-class">.fade-leave-to</span> &#123;<br>      <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;<br>      <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(<span class="hljs-number">100px</span>);<br>    &#125;<br></code></pre></td></tr></table></figure></li></ol><p><strong>å®Œæ•´ä»£ç </strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./lib/vue-2.4.0.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-comment">&lt;!-- 2. è‡ªå®šä¹‰ä¸¤ç»„æ ·å¼ï¼Œæ¥æ§åˆ¶ transition å†…éƒ¨çš„å…ƒç´ å®ç°åŠ¨ç”» --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><br><span class="css">    <span class="hljs-comment">/* v-enter ã€è¿™æ˜¯ä¸€ä¸ªæ—¶é—´ç‚¹ã€‘ æ˜¯è¿›å…¥ä¹‹å‰ï¼Œå…ƒç´ çš„èµ·å§‹çŠ¶æ€ï¼Œæ­¤æ—¶è¿˜æ²¡æœ‰å¼€å§‹è¿›å…¥ */</span></span><br><span class="css">    <span class="hljs-comment">/* v-leave-to ã€è¿™æ˜¯ä¸€ä¸ªæ—¶é—´ç‚¹ã€‘ æ˜¯åŠ¨ç”»ç¦»å¼€ä¹‹åï¼Œç¦»å¼€çš„ç»ˆæ­¢çŠ¶æ€ï¼Œæ­¤æ—¶ï¼Œå…ƒç´  åŠ¨ç”»å·²ç»ç»“æŸäº† */</span></span><br>    .v-enter,<br>    .v-leave-to &#123;<br><span class="css">      <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;</span><br><span class="css">      <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(<span class="hljs-number">150px</span>);</span><br>    &#125;<br><br><span class="css">    <span class="hljs-comment">/* v-enter-active ã€å…¥åœºåŠ¨ç”»çš„æ—¶é—´æ®µã€‘ */</span></span><br><span class="css">    <span class="hljs-comment">/* v-leave-active ã€ç¦»åœºåŠ¨ç”»çš„æ—¶é—´æ®µã€‘ */</span></span><br>    .v-enter-active,<br>    .v-leave-active&#123;<br><span class="css">      <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.8s</span> ease;</span><br>    &#125;<br><br>    .my-enter,<br>    .my-leave-to &#123;<br><span class="css">      <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;</span><br><span class="css">      <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(<span class="hljs-number">70px</span>);</span><br>    &#125;<br><br>    .my-enter-active,<br>    .my-leave-active&#123;<br><span class="css">      <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.8s</span> ease;</span><br>    &#125;<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;toggle&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;flag=!flag&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- éœ€æ±‚ï¼š ç‚¹å‡»æŒ‰é’®ï¼Œè®© h3 æ˜¾ç¤ºï¼Œå†ç‚¹å‡»ï¼Œè®© h3 éšè— --&gt;</span><br>    <span class="hljs-comment">&lt;!-- 1. ä½¿ç”¨ transition å…ƒç´ ï¼ŒæŠŠ éœ€è¦è¢«åŠ¨ç”»æ§åˆ¶çš„å…ƒç´ ï¼ŒåŒ…è£¹èµ·æ¥ --&gt;</span><br>    <span class="hljs-comment">&lt;!-- transition å…ƒç´ ï¼Œæ˜¯ Vue å®˜æ–¹æä¾›çš„ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">transition</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;flag&quot;</span>&gt;</span>è¿™æ˜¯ä¸€ä¸ªH3<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">transition</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">hr</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;toggle2&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;flag2=!flag2&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">transition</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;my&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">h6</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;flag2&quot;</span>&gt;</span>è¿™æ˜¯ä¸€ä¸ªH6<span class="hljs-tag">&lt;/<span class="hljs-name">h6</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">transition</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">    <span class="hljs-comment">// åˆ›å»º Vue å®ä¾‹ï¼Œå¾—åˆ° ViewModel</span></span><br><span class="javascript">    <span class="hljs-keyword">var</span> vm = <span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">      el: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br>      data: &#123;<br><span class="javascript">        flag: <span class="hljs-literal">false</span>,</span><br><span class="javascript">        flag2: <span class="hljs-literal">false</span></span><br>      &#125;,<br>      methods: &#123;&#125;<br>    &#125;);<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="ä½¿ç”¨ç¬¬ä¸‰æ–¹-CSS-åŠ¨ç”»åº“"><a href="#ä½¿ç”¨ç¬¬ä¸‰æ–¹-CSS-åŠ¨ç”»åº“" class="headerlink" title="ä½¿ç”¨ç¬¬ä¸‰æ–¹ CSS åŠ¨ç”»åº“"></a><a href="https://cn.vuejs.org/v2/guide/transitions.html#%E8%87%AA%E5%AE%9A%E4%B9%89%E8%BF%87%E6%B8%A1%E7%B1%BB%E5%90%8D">ä½¿ç”¨ç¬¬ä¸‰æ–¹ CSS åŠ¨ç”»åº“</a></h3><ol><li>å¯¼å…¥åŠ¨ç”»ç±»åº“ï¼š<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">&lt;link <span class="hljs-attribute">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attribute">type</span>=<span class="hljs-string">&quot;text/css&quot;</span> <span class="hljs-attribute">href</span>=<span class="hljs-string">&quot;./lib/animate.css&quot;</span>&gt;<br></code></pre></td></tr></table></figure></li><li>å®šä¹‰ transition åŠå±æ€§ï¼š<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs applescript">&lt;transition<br>enter-active-<span class="hljs-built_in">class</span>=<span class="hljs-string">&quot;fadeInRight&quot;</span><br>    leave-active-<span class="hljs-built_in">class</span>=<span class="hljs-string">&quot;fadeOutRight&quot;</span><br>    :duration=<span class="hljs-string">&quot;&#123; enter: 500, leave: 800 &#125;&quot;</span>&gt;<br>  &lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">class</span>=<span class="hljs-string">&quot;animated&quot;</span> v-show=<span class="hljs-string">&quot;isshow&quot;</span>&gt;åŠ¨ç”»å“¦&lt;/<span class="hljs-keyword">div</span>&gt;<br>&lt;/transition&gt;<br></code></pre></td></tr></table></figure></li></ol><p><strong>å®Œæ•´ä»£ç </strong></p><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./lib/vue-2.4.0.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;./lib/animate.css&quot;</span>&gt;</span></span><br><span class="xml">  <span class="hljs-comment">&lt;!-- å…¥åœº bounceIn    ç¦»åœº bounceOut --&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></span><br><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;toggle&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;flag=!flag&quot;</span>&gt;</span></span><br><span class="xml">    <span class="hljs-comment">&lt;!-- éœ€æ±‚ï¼š ç‚¹å‡»æŒ‰é’®ï¼Œè®© h3 æ˜¾ç¤ºï¼Œå†ç‚¹å‡»ï¼Œè®© h3 éšè— --&gt;</span></span><br><span class="xml">    <span class="hljs-comment">&lt;!-- &lt;transition enter-active-class=&quot;animated bounceIn&quot; leave-active-class=&quot;animated bounceOut&quot;&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;flag&quot;</span>&gt;</span>è¿™æ˜¯ä¸€ä¸ªH3<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">transition</span>&gt;</span> --&gt;</span><br><br><span class="xml">    <span class="hljs-comment">&lt;!-- ä½¿ç”¨ :duration=&quot;æ¯«ç§’å€¼&quot; æ¥ç»Ÿä¸€è®¾ç½® å…¥åœº å’Œ ç¦»åœº æ—¶å€™çš„åŠ¨ç”»æ—¶é•¿ --&gt;</span></span><br><span class="xml">    <span class="hljs-comment">&lt;!-- &lt;transition enter-active-class=&quot;bounceIn&quot; leave-active-class=&quot;bounceOut&quot; :duration=&quot;200&quot;&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;flag&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;animated&quot;</span>&gt;</span>è¿™æ˜¯ä¸€ä¸ªH3<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">transition</span>&gt;</span> --&gt;</span><br><br><span class="xml">    <span class="hljs-comment">&lt;!-- ä½¿ç”¨  :duration=&quot;</span></span><span class="hljs-template-variable">&#123; enter: 200, leave: 400 &#125;</span><span class="xml"><span class="hljs-comment">&quot;  æ¥åˆ†åˆ«è®¾ç½® å…¥åœºçš„æ—¶é•¿ å’Œ ç¦»åœºçš„æ—¶é•¿  --&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">transition</span> </span></span><br><span class="xml">    enter-active-class=&quot;bounceIn&quot; </span><br><span class="xml">    leave-active-class=&quot;bounceOut&quot; </span><br><span class="xml">    :duration=&quot;</span><span class="hljs-template-variable">&#123; enter: 200, leave: 400 &#125;</span><span class="xml">&quot;&gt;</span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;flag&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;animated&quot;</span>&gt;</span>è¿™æ˜¯ä¸€ä¸ªH3<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">transition</span>&gt;</span> </span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">    // åˆ›å»º Vue å®ä¾‹ï¼Œå¾—åˆ° ViewModel</span><br><span class="xml">    var vm = new Vue(</span><span class="hljs-template-variable">&#123;</span><br><span class="hljs-template-variable">      el: &#x27;#app&#x27;,</span><br><span class="hljs-template-variable">      data: &#123;</span><br><span class="hljs-template-variable">        flag: false</span><br><span class="hljs-template-variable">      &#125;</span><span class="xml">,</span><br><span class="xml">      methods: </span><span class="hljs-template-variable">&#123;&#125;</span><br><span class="xml">    &#125;);</span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h3 id="ä½¿ç”¨åŠ¨ç”»é’©å­å‡½æ•°"><a href="#ä½¿ç”¨åŠ¨ç”»é’©å­å‡½æ•°" class="headerlink" title="ä½¿ç”¨åŠ¨ç”»é’©å­å‡½æ•°"></a>ä½¿ç”¨åŠ¨ç”»é’©å­å‡½æ•°</h3><ol><li>å®šä¹‰ transition ç»„ä»¶ä»¥åŠä¸‰ä¸ªé’©å­å‡½æ•°ï¼š<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs applescript">&lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;<br>    &lt;input type=<span class="hljs-string">&quot;button&quot;</span> value=<span class="hljs-string">&quot;åˆ‡æ¢åŠ¨ç”»&quot;</span> @click=<span class="hljs-string">&quot;isshow = !isshow&quot;</span>&gt;<br>    &lt;transition<br>    @<span class="hljs-keyword">before</span>-enter=<span class="hljs-string">&quot;beforeEnter&quot;</span><br>    @enter=<span class="hljs-string">&quot;enter&quot;</span><br>    @<span class="hljs-keyword">after</span>-enter=<span class="hljs-string">&quot;afterEnter&quot;</span>&gt;<br>      &lt;<span class="hljs-keyword">div</span> v-<span class="hljs-keyword">if</span>=<span class="hljs-string">&quot;isshow&quot;</span> <span class="hljs-built_in">class</span>=<span class="hljs-string">&quot;show&quot;</span>&gt;OK&lt;/<span class="hljs-keyword">div</span>&gt;<br>    &lt;/transition&gt;<br>  &lt;/<span class="hljs-keyword">div</span>&gt;<br></code></pre></td></tr></table></figure></li><li>å®šä¹‰ä¸‰ä¸ª methods é’©å­æ–¹æ³•ï¼š<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs javascript">methods: &#123;<br>        <span class="hljs-function"><span class="hljs-title">beforeEnter</span>(<span class="hljs-params">el</span>)</span> &#123; <span class="hljs-comment">// åŠ¨ç”»è¿›å…¥ä¹‹å‰çš„å›è°ƒ</span><br>          el.style.transform = <span class="hljs-string">&#x27;translateX(500px)&#x27;</span>;<br>        &#125;,<br>        <span class="hljs-function"><span class="hljs-title">enter</span>(<span class="hljs-params">el, done</span>)</span> &#123; <span class="hljs-comment">// åŠ¨ç”»è¿›å…¥å®Œæˆæ—¶å€™çš„å›è°ƒ</span><br>          el.offsetWidth;<br>          el.style.transform = <span class="hljs-string">&#x27;translateX(0px)&#x27;</span>;<br>          done();<br>        &#125;,<br>        <span class="hljs-function"><span class="hljs-title">afterEnter</span>(<span class="hljs-params">el</span>)</span> &#123; <span class="hljs-comment">// åŠ¨ç”»è¿›å…¥å®Œæˆä¹‹åçš„å›è°ƒ</span><br>          <span class="hljs-built_in">this</span>.isshow = !<span class="hljs-built_in">this</span>.isshow;<br>        &#125;<br>      &#125;<br></code></pre></td></tr></table></figure></li><li>å®šä¹‰åŠ¨ç”»è¿‡æ¸¡æ—¶é•¿å’Œæ ·å¼ï¼š<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.show</span>&#123;<br>      <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.4s</span> ease;<br>    &#125;<br></code></pre></td></tr></table></figure></li></ol><p><strong>å®Œæ•´ä»£ç </strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./lib/vue-2.4.0.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><br>    .ball &#123;<br><span class="css">      <span class="hljs-attribute">width</span>: <span class="hljs-number">15px</span>;</span><br><span class="css">      <span class="hljs-attribute">height</span>: <span class="hljs-number">15px</span>;</span><br><span class="css">      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>;</span><br><span class="css">      <span class="hljs-attribute">background-color</span>: red;</span><br>    &#125;<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;å¿«åˆ°ç¢—é‡Œæ¥&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;flag=!flag&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- 1. ä½¿ç”¨ transition å…ƒç´ æŠŠ å°çƒåŒ…è£¹èµ·æ¥ --&gt;</span><br>    &lt;transition<br>      @before-enter=&quot;beforeEnter&quot;<br>      @enter=&quot;enter&quot;<br>      @after-enter=&quot;afterEnter&quot;&gt;<br>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;ball&quot;</span> <span class="hljs-attr">v-show</span>=<span class="hljs-string">&quot;flag&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">transition</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">    <span class="hljs-comment">// åˆ›å»º Vue å®ä¾‹ï¼Œå¾—åˆ° ViewModel</span></span><br><span class="javascript">    <span class="hljs-keyword">var</span> vm = <span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">      el: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br>      data: &#123;<br><span class="javascript">        flag: <span class="hljs-literal">false</span></span><br>      &#125;,<br>      methods: &#123;<br><span class="javascript">        <span class="hljs-comment">// æ³¨æ„ï¼š åŠ¨ç”»é’©å­å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼šelï¼Œè¡¨ç¤º è¦æ‰§è¡ŒåŠ¨ç”»çš„é‚£ä¸ªDOMå…ƒç´ ï¼Œæ˜¯ä¸ªåŸç”Ÿçš„ JS DOMå¯¹è±¡</span></span><br><span class="javascript">        <span class="hljs-comment">// å¤§å®¶å¯ä»¥è®¤ä¸º ï¼Œ el æ˜¯é€šè¿‡ document.getElementById(&#x27;&#x27;) æ–¹å¼è·å–åˆ°çš„åŸç”ŸJS DOMå¯¹è±¡</span></span><br><span class="javascript">        <span class="hljs-function"><span class="hljs-title">beforeEnter</span>(<span class="hljs-params">el</span>)</span>&#123;</span><br><span class="javascript">          <span class="hljs-comment">// beforeEnter è¡¨ç¤ºåŠ¨ç”»å…¥åœºä¹‹å‰ï¼Œæ­¤æ—¶ï¼ŒåŠ¨ç”»å°šæœªå¼€å§‹ï¼Œå¯ä»¥ åœ¨ beforeEnter ä¸­ï¼Œè®¾ç½®å…ƒç´ å¼€å§‹åŠ¨ç”»ä¹‹å‰çš„èµ·å§‹æ ·å¼</span></span><br><span class="javascript">          <span class="hljs-comment">// è®¾ç½®å°çƒå¼€å§‹åŠ¨ç”»ä¹‹å‰çš„ï¼Œèµ·å§‹ä½ç½®</span></span><br><span class="javascript">          el.style.transform = <span class="hljs-string">&quot;translate(0, 0)&quot;</span></span><br>        &#125;,<br><span class="javascript">        <span class="hljs-function"><span class="hljs-title">enter</span>(<span class="hljs-params">el, done</span>)</span>&#123;</span><br><span class="javascript">          <span class="hljs-comment">// è¿™å¥è¯ï¼Œæ²¡æœ‰å®é™…çš„ä½œç”¨ï¼Œä½†æ˜¯ï¼Œå¦‚æœä¸å†™ï¼Œå‡ºä¸æ¥åŠ¨ç”»æ•ˆæœï¼›</span></span><br><span class="javascript">          <span class="hljs-comment">// å¯ä»¥è®¤ä¸º el.offsetWidth ä¼šå¼ºåˆ¶åŠ¨ç”»åˆ·æ–°</span></span><br>          el.offsetWidth<br><span class="javascript">          <span class="hljs-comment">// enter è¡¨ç¤ºåŠ¨ç”» å¼€å§‹ä¹‹åçš„æ ·å¼ï¼Œè¿™é‡Œï¼Œå¯ä»¥è®¾ç½®å°çƒå®ŒæˆåŠ¨ç”»ä¹‹åçš„ï¼Œç»“æŸçŠ¶æ€</span></span><br><span class="javascript">          el.style.transform = <span class="hljs-string">&quot;translate(150px, 450px)&quot;</span></span><br><span class="javascript">          el.style.transition = <span class="hljs-string">&#x27;all 1s ease&#x27;</span></span><br><br><span class="javascript">          <span class="hljs-comment">// è¿™é‡Œçš„ doneï¼Œ èµ·å§‹å°±æ˜¯ afterEnter è¿™ä¸ªå‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼šdone æ˜¯ afterEnter å‡½æ•°çš„å¼•ç”¨</span></span><br>          done()<br>        &#125;,<br><span class="javascript">        <span class="hljs-function"><span class="hljs-title">afterEnter</span>(<span class="hljs-params">el</span>)</span>&#123;</span><br><span class="javascript">          <span class="hljs-comment">// åŠ¨ç”»å®Œæˆä¹‹åï¼Œä¼šè°ƒç”¨ afterEnter</span></span><br><span class="javascript">          <span class="hljs-comment">// console.log(&#x27;ok&#x27;)</span></span><br><span class="javascript">          <span class="hljs-built_in">this</span>.flag = !<span class="hljs-built_in">this</span>.flag</span><br>        &#125;<br>      &#125;<br>    &#125;);<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="v-for-çš„åˆ—è¡¨è¿‡æ¸¡"><a href="#v-for-çš„åˆ—è¡¨è¿‡æ¸¡" class="headerlink" title="v-for çš„åˆ—è¡¨è¿‡æ¸¡"></a><a href="https://cn.vuejs.org/v2/guide/transitions.html#%E5%88%97%E8%A1%A8%E7%9A%84%E8%BF%9B%E5%85%A5%E5%92%8C%E7%A6%BB%E5%BC%80%E8%BF%87%E6%B8%A1">v-for çš„åˆ—è¡¨è¿‡æ¸¡</a></h3><ol><li>å®šä¹‰è¿‡æ¸¡æ ·å¼ï¼š<figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs dsconfig">&lt;<span class="hljs-string">style</span>&gt;<br>    .<span class="hljs-built_in">list-enter,</span><br><span class="hljs-built_in"></span>    .<span class="hljs-built_in">list-leave-to</span> &#123;<br>      <span class="hljs-string">opacity</span>: <span class="hljs-string">0</span>;<br>      <span class="hljs-string">transform</span>: <span class="hljs-string">translateY</span>(<span class="hljs-string">10px</span>);<br>    &#125;<br><br>    .<span class="hljs-built_in">list-enter-active,</span><br><span class="hljs-built_in"></span>    .<span class="hljs-built_in">list-leave-active</span> &#123;<br>      <span class="hljs-string">transition</span>: <span class="hljs-string">all</span> <span class="hljs-string">0</span>.<span class="hljs-string">3s</span> <span class="hljs-string">ease</span>;<br>    &#125;<br>&lt;/<span class="hljs-string">style</span>&gt;<br></code></pre></td></tr></table></figure></li><li>å®šä¹‰DOMç»“æ„ï¼Œå…¶ä¸­ï¼Œéœ€è¦ä½¿ç”¨ transition-group ç»„ä»¶æŠŠv-forå¾ªç¯çš„åˆ—è¡¨åŒ…è£¹èµ·æ¥ï¼š<figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;txt&quot;</span> @<span class="hljs-attr">keyup.enter</span>=<span class="hljs-string">&quot;add&quot;</span>&gt;</span></span><br><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">transition-group</span> <span class="hljs-attr">tag</span>=<span class="hljs-string">&quot;ul&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;list&quot;</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(item, i) in list&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;i&quot;</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">transition-group</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br></code></pre></td></tr></table></figure></li><li>å®šä¹‰ VMä¸­çš„ç»“æ„ï¼š<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-comment">// åˆ›å»º Vue å®ä¾‹ï¼Œå¾—åˆ° ViewModel</span><br><span class="hljs-keyword">var</span> vm = new Vue(&#123;<br>  el: <span class="hljs-string">&#x27;#app&#x27;</span>,<br>  <span class="hljs-keyword">data</span>: &#123;<br>    txt: <span class="hljs-string">&#x27;&#x27;</span>,<br>    list: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]<br>  &#125;,<br>  methods: &#123;<br>    add() &#123;<br>      <span class="hljs-keyword">this</span>.list.push(<span class="hljs-keyword">this</span>.txt);<br>      <span class="hljs-keyword">this</span>.txt = <span class="hljs-string">&#x27;&#x27;</span>;<br>    &#125;<br>  &#125;<br>&#125;);<br></code></pre></td></tr></table></figure><h3 id="åˆ—è¡¨çš„æ’åºè¿‡æ¸¡"><a href="#åˆ—è¡¨çš„æ’åºè¿‡æ¸¡" class="headerlink" title="åˆ—è¡¨çš„æ’åºè¿‡æ¸¡"></a>åˆ—è¡¨çš„æ’åºè¿‡æ¸¡</h3></li></ol><p><code>&lt;transition-group&gt;</code> ç»„ä»¶è¿˜æœ‰ä¸€ä¸ªç‰¹æ®Šä¹‹å¤„ã€‚ä¸ä»…å¯ä»¥è¿›å…¥å’Œç¦»å¼€åŠ¨ç”»ï¼Œ<strong>è¿˜å¯ä»¥æ”¹å˜å®šä½</strong>ã€‚è¦ä½¿ç”¨è¿™ä¸ªæ–°åŠŸèƒ½åªéœ€äº†è§£æ–°å¢çš„ <code>v-move</code> ç‰¹æ€§ï¼Œ<strong>å®ƒä¼šåœ¨å…ƒç´ çš„æ”¹å˜å®šä½çš„è¿‡ç¨‹ä¸­åº”ç”¨</strong>ã€‚</p><ul><li><code>v-move</code> å’Œ <code>v-leave-active</code> ç»“åˆä½¿ç”¨ï¼Œèƒ½å¤Ÿè®©åˆ—è¡¨çš„è¿‡æ¸¡æ›´åŠ å¹³ç¼“æŸ”å’Œï¼š<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.v-move</span>&#123;<br>  <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.8s</span> ease;<br>&#125;<br><span class="hljs-selector-class">.v-leave-active</span>&#123;<br>  <span class="hljs-attribute">position</span>: absolute;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><p><strong>å®Œæ•´ä»£ç </strong></p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./lib/vue-2.4.0.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span></span><br><span class="xml">    li &#123;</span><br><span class="xml">      border: 1px dashed #999;</span><br><span class="xml">      margin: 5px;</span><br><span class="xml">      line-height: 35px;</span><br><span class="xml">      padding-left: 5px;</span><br><span class="xml">      font-size: 12px;</span><br><span class="xml">      width: 100%;</span><br><span class="xml">    &#125;</span><br><br><span class="xml">    li:hover &#123;</span><br><span class="xml">      background-color: hotpink;</span><br><span class="xml">      transition: all 0.8s ease;</span><br><span class="xml">    &#125;</span><br><br><span class="xml">    .v-enter,</span><br><span class="xml">    .v-leave-to &#123;</span><br><span class="xml">      opacity: 0;</span><br><span class="xml">      transform: translateY(80px);</span><br><span class="xml">    &#125;</span><br><br><span class="xml">    .v-enter-active,</span><br><span class="xml">    .v-leave-active &#123;</span><br><span class="xml">      transition: all 0.6s ease;</span><br><span class="xml">    &#125;</span><br><br><span class="xml">    /* ä¸‹é¢çš„ .v-move å’Œ .v-leave-active é…åˆä½¿ç”¨ï¼Œèƒ½å¤Ÿå®ç°åˆ—è¡¨åç»­çš„å…ƒç´ ï¼Œæ¸æ¸åœ°æ¼‚ä¸Šæ¥çš„æ•ˆæœ */</span><br><span class="xml">    .v-move &#123;</span><br><span class="xml">      transition: all 0.6s ease;</span><br><span class="xml">    &#125;</span><br><span class="xml">    .v-leave-active&#123;</span><br><span class="xml">      position: absolute;</span><br><span class="xml">    &#125;</span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></span><br><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span></span><br><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span></span><br><span class="xml">        Id:</span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;id&quot;</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><br><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span></span><br><span class="xml">        Name:</span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;name&quot;</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><br><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;æ·»åŠ &quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;add&quot;</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><br><span class="xml">    <span class="hljs-comment">&lt;!-- &lt;ul&gt; --&gt;</span></span><br><span class="xml">      <span class="hljs-comment">&lt;!-- åœ¨å®ç°åˆ—è¡¨è¿‡æ¸¡çš„æ—¶å€™ï¼Œå¦‚æœéœ€è¦è¿‡æ¸¡çš„å…ƒç´ ï¼Œæ˜¯é€šè¿‡ v-for å¾ªç¯æ¸²æŸ“å‡ºæ¥çš„ï¼Œä¸èƒ½ä½¿ç”¨ transition åŒ…è£¹ï¼Œéœ€è¦ä½¿ç”¨ transitionGroup --&gt;</span></span><br><span class="xml">      <span class="hljs-comment">&lt;!-- å¦‚æœè¦ä¸º v-for å¾ªç¯åˆ›å»ºçš„å…ƒç´ è®¾ç½®åŠ¨ç”»ï¼Œå¿…é¡»ä¸ºæ¯ä¸€ä¸ª å…ƒç´  è®¾ç½® :key å±æ€§ --&gt;</span></span><br><span class="xml">      <span class="hljs-comment">&lt;!-- ç»™ ransition-group æ·»åŠ  appear å±æ€§ï¼Œå®ç°é¡µé¢åˆšå±•ç¤ºå‡ºæ¥æ—¶å€™ï¼Œå…¥åœºæ—¶å€™çš„æ•ˆæœ --&gt;</span></span><br><span class="xml">      <span class="hljs-comment">&lt;!-- é€šè¿‡ ä¸º transition-group å…ƒç´ ï¼Œè®¾ç½® tag å±æ€§ï¼ŒæŒ‡å®š transition-group æ¸²æŸ“ä¸ºæŒ‡å®šçš„å…ƒç´ ï¼Œå¦‚æœä¸æŒ‡å®š tag å±æ€§ï¼Œé»˜è®¤ï¼Œæ¸²æŸ“ä¸º span æ ‡ç­¾ --&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">transition-group</span> <span class="hljs-attr">appear</span> <span class="hljs-attr">tag</span>=<span class="hljs-string">&quot;ul&quot;</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(item, i) in list&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;item.id&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;del(i)&quot;</span>&gt;</span></span><br><span class="xml">          </span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item.id</span>&#125;&#125;</span><span class="xml"> --- </span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item.name</span>&#125;&#125;</span><br><span class="xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">transition-group</span>&gt;</span></span><br><span class="xml">    <span class="hljs-comment">&lt;!-- &lt;/ul&gt; --&gt;</span></span><br><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">    // åˆ›å»º Vue å®ä¾‹ï¼Œå¾—åˆ° ViewModel</span><br><span class="xml">    var vm = new Vue(&#123;</span><br><span class="xml">      el: &#x27;#app&#x27;,</span><br><span class="xml">      data: &#123;</span><br><span class="xml">        id: &#x27;&#x27;,</span><br><span class="xml">        name: &#x27;&#x27;,</span><br><span class="xml">        list: [</span><br><span class="xml">          &#123; id: 1, name: &#x27;èµµé«˜&#x27; &#125;,</span><br><span class="xml">          &#123; id: 2, name: &#x27;ç§¦æ¡§&#x27; &#125;,</span><br><span class="xml">          &#123; id: 3, name: &#x27;ä¸¥åµ©&#x27; &#125;,</span><br><span class="xml">          &#123; id: 4, name: &#x27;é­å¿ è´¤&#x27; &#125;</span><br><span class="xml">        ]</span><br><span class="xml">      &#125;,</span><br><span class="xml">      methods: &#123;</span><br><span class="xml">        add() &#123;</span><br><span class="xml">          this.list.push(&#123; id: this.id, name: this.name &#125;)</span><br><span class="xml">          this.id = this.name = &#x27;&#x27;</span><br><span class="xml">        &#125;,</span><br><span class="xml">        del(i) &#123;</span><br><span class="xml">          this.list.splice(i, 1)</span><br><span class="xml">        &#125;</span><br><span class="xml">      &#125;</span><br><span class="xml">    &#125;);</span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h2 id="ç›¸å…³æ–‡ç« "><a href="#ç›¸å…³æ–‡ç« " class="headerlink" title="ç›¸å…³æ–‡ç« "></a>ç›¸å…³æ–‡ç« </h2><ol><li><a href="https://v1-cn.vuejs.org/">vue.js 1.x æ–‡æ¡£</a></li><li><a href="https://cn.vuejs.org/">vue.js 2.x æ–‡æ¡£</a></li><li><a href="http://www.css88.com/archives/7715">String.prototype.padStart(maxLength, fillString)</a></li><li><a href="http://www.cnblogs.com/wuhua1/p/6686237.html">js é‡Œé¢çš„é”®ç›˜äº‹ä»¶å¯¹åº”çš„é”®ç </a></li><li><a href="https://github.com/pagekit/vue-resource">pagekit/vue-resource</a></li><li><a href="https://jingyan.baidu.com/article/a65957f4976aad24e67f9b9b.html">navicatå¦‚ä½•å¯¼å…¥sqlæ–‡ä»¶å’Œå¯¼å‡ºsqlæ–‡ä»¶</a></li><li><a href="http://cubic-bezier.com/#.4,-0.3,1,.33">è´å¡å°”åœ¨çº¿ç”Ÿæˆå™¨</a></li></ol>]]></content>
    
    
    <categories>
      
      <category>Vue.js</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Javaç»†èŠ‚æ‘˜è¦</title>
    <link href="/2019/11/01/Java%E6%91%98%E8%A6%81/"/>
    <url>/2019/11/01/Java%E6%91%98%E8%A6%81/</url>
    
    <content type="html"><![CDATA[<p>åœ¨ Java çš„é¢†åŸŸé‡Œï¼ŒåŸºæœ¬æ•°æ®ç±»å‹å˜é‡å­˜çš„æ˜¯æ•°æ®æœ¬èº«ï¼Œ</p><p>è€Œå¼•ç”¨ç±»å‹å˜é‡å­˜çš„æ˜¯ä¿å­˜æ•°æ®çš„å†…å­˜ç©ºé—´åœ°å€ã€‚</p><p><img src="/2019/11/01/Java%E6%91%98%E8%A6%81/type.png" alt="type"></p><p>ä¸ºä»€ä¹ˆä¼šæœ‰ä¸åŒå¤§å°çš„ç±»å‹ï¼Œä¸¾ä¸ªä¾‹å­æ¯”å¦‚å­˜ 5 è¿™ä¸ªæ•°æ®æ€ä¹ˆå­˜çš„ï¼Ÿ</p><p>A.   byte(8ä½ï¼ŒèŒƒå›´æ˜¯-128åˆ°127)</p><p>B.   shortï¼ˆ16ä½ï¼‰</p><p>C.   intï¼ˆ32ä½ï¼‰</p><p>D.   long (64ä½)</p><p>ç»™longèµ‹å€¼æ—¶ï¼Œå› ä¸ºæ•´æ•°é»˜è®¤æ˜¯intç±»å‹ï¼Œè¦è½¬æ¢ä¸ºlongç±»å‹çš„å€¼ï¼Œåé¢åŠ ä¸Šlæˆ–L  </p><p>ä¸Šé¢çš„byte short int long æœ€å¤§é•¿åº¦å¯ä»¥é€šè¿‡<code>jdkæ–‡æ¡£</code>å»æ‰¾åˆ° å…·ä½“çš„èŒƒå›´ã€‚</p><p>åŒä¸€ä¸ªæ•´æ•°å¯ä»¥ä½¿ç”¨ä¸åŒçš„è¿›åˆ¶è¡¨ç¤ºï¼š<code>System.out.println(0b101</code>)éœ€jdk1.7æ‰èƒ½æŒ‰ç…§åè¿›åˆ¶è¾“å‡º</p><p>é»˜è®¤çš„è¿›åˆ¶10è¿›åˆ¶     äºŒè¿›åˆ¶ï¼š æ˜¯ 0b æˆ–è€… 0Bå¼€å¤´    å…«è¿›åˆ¶ï¼š æ˜¯0å¼€å¤´   åå…­è¿›åˆ¶ï¼š 0X (0x) å¼€å¤´</p><p>Java7 å¼€å§‹ æ”¯æŒæ•°å­—ä¹‹é—´ç”¨ _ åˆ†å‰²ï¼ˆ12_34_56è¾“å‡º123456ï¼‰  </p><p>float(å•ç²¾åº¦32ä½), é»˜è®¤æµ®ç‚¹æ•°çš„ç±»å‹æ˜¯ double,ç›´æ¥èµ‹å€¼æ—¶å¿…é¡»åœ¨æ•°å­—ååŠ ä¸Šf æˆ–Fï¼ˆ è¡¨ç¤ºä¸€ä¸ªæµ®ç‚¹æ•°åœ¨æ•°å­—åé¢åŠ ä¸€ä¸ªFï¼‰</p><p>double( åŒç²¾åº¦64ä½)</p><p>åŒºåˆ«ï¼šå¯¹äºå•ç²¾åº¦æµ®ç‚¹æ•°ï¼Œè¿è¡Œé€Ÿåº¦ç›¸æ¯”doubleæ›´å¿«ï¼Œå å†…å­˜æ›´å°ï¼Œä½†æ˜¯å½“æ•°å€¼éå¸¸å¤§æˆ–è€…     éå¸¸å°çš„æ—¶å€™ä¼šå˜å¾—ä¸ç²¾ç¡®ã€‚</p><p>åŒç²¾åº¦æ¯”å•ç²¾åº¦è¡¨ç¤ºçš„ä½æ•°å¤§ ç²¾ç¡®çš„ä½æ•°å¤š,ç®€å•åœ°è¯´, floatè¡¨ç¤ºçš„å°æ•°ç‚¹ä½æ•°å°‘ã€‚</p><p>è¡¨ç°å½¢å¼ï¼š å¸¸è§„ 3.14     ç§‘å­¦è®¡æ•°æ³• 3.14e2 3.14e-2</p><p>æ³¨æ„ï¼šè¡¨å¼çš„æ—¶å€™ä¼šæœ‰ç²¾åº¦æŸå¤±ï¼ˆä½¿ç”¨æµ®ç‚¹æ•°çš„æ—¶å€™éœ€è¦æ³¨æ„ï¼‰</p><p>ä¾‹å¦‚ double num= 1.0, æ˜¯ä¸€ä¸ªæ— é™æ¥è¿‘1.0çš„ä¸€ä¸ªå€¼</p><p><strong>é‚£æ€ä¹ˆæ›´ç²¾ç¡®çš„è¡¨ç¤ºæµ®ç‚¹æ•°å‘¢</strong>ï¼Ÿ<strong>BigDecimal</strong></p><p><strong>ç»“è®º</strong>ï¼šæµ®ç‚¹è¿ç®—å¾ˆå°‘æ˜¯ç²¾ç¡®çš„ï¼Œåªè¦æ˜¯è¶…è¿‡ç²¾åº¦èƒ½è¡¨ç¤ºçš„èŒƒå›´å°±ä¼šäº§ç”Ÿè¯¯å·®ã€‚å¾€å¾€äº§ç”Ÿè¯¯å·®ä¸æ˜¯ å› ä¸ºæ•°çš„å¤§å°ï¼Œè€Œæ˜¯å› ä¸ºæ•°çš„ç²¾åº¦ã€‚å› æ­¤ï¼Œäº§ç”Ÿçš„ç»“æœæ¥è¿‘ä½†ä¸ç­‰äºæƒ³è¦çš„ç»“æœã€‚å°¤å…¶åœ¨ä½¿ç”¨ float å’Œ double ä½œç²¾ç¡®è¿ ç®—çš„æ—¶å€™è¦ç‰¹åˆ«å°å¿ƒã€‚</p><p>char    16 ä½[0-65535] (2ä¸ªå­—èŠ‚,16ä½)ã€‚å­—ç¬¦å¸¸é‡ä½¿ç”¨å•å¼•å·   â€˜  â€™  åŒ…è£¹èµ·æ¥ã€‚</p><p>è¡¨ç°å½¢å¼ï¼š</p><p>â€˜Aâ€™æœ€å¸¸ç”¨ï¼Œæœ€ç›´è§‚çš„æ–¹å¼  </p><p>ä½¿ç”¨ä¸€ä¸ªæ•°å­—è¡¨ç¤ºï¼Œå¯¹åº”æœ‰ä¸€ä¸ªASCIIç è¡¨</p><p>ä¾‹å¦‚:char c = 65;//è¡¨ç¤º â€™Aâ€™ è¿™ä¸ªå­—ç¬¦</p><p><img src="/2019/11/01/Java%E6%91%98%E8%A6%81/ASCii.jpg" alt="ascii">16è¿›åˆ¶è¡¨ç°å½¢å¼    â€˜Aâ€™-ã€‹65ï¼ˆ10è¿›åˆ¶ï¼‰    â€˜Aâ€™ -ã€‹0x41ï¼ˆ16è¿›åˆ¶ï¼‰æ€ä¹ˆè¡¨ç¤ºï¼Ÿ â€˜\u0041â€™</p><p>\rè¡¨ç¤ºæ¥å—é”®ç›˜è¾“å…¥ï¼Œç›¸å½“äºæŒ‰ä¸‹äº†å›è½¦é”®ï¼›</p><p>\nè¡¨ç¤ºæ¢è¡Œï¼›</p><p>\tè¡¨ç¤ºç›¸å½“äºTableé”®åˆ¶è¡¨ç¬¦ï¼Œï¼›</p><p>\bè¡¨ç¤ºé€€æ ¼é”®ï¼Œç›¸å½“äºBack Spaceé”®ï¼›</p><p>&#39;è¡¨ç¤ºå•å¼•å·ï¼›</p><p>&#39;â€˜è¡¨ç¤ºåŒå¼•å·ï¼›</p><p>\è¡¨ç¤ºä¸€ä¸ªæ–œæ \ã€‚</p><p>å€¼åªæœ‰ä¸¤ä¸ª true falseï¼Œä¸èƒ½ä½¿ç”¨ 0 1è¡¨ç¤º</p><p>Stringæ˜¯ javaä¸­å·²ç»è®¾è®¡å¥½çš„ä¸€ä¸ªç±»ï¼Œè¡¨ç¤ºçš„å€¼æ˜¯å­—ç¬¦ä¸²ï¼ˆJavaä¸­è®¾è®¡çš„ç±»å’Œæˆ‘ä»¬è‡ªå·±è®¾è®¡çš„ç±»çš„æ€§è´¨æ˜¯ä¸€æ ·çš„ï¼‰</p><p>String s = â€œä½ å¥½â€;</p><p>å½“String å’Œ + ä¸€èµ·ä½¿ç”¨çš„æ—¶å€™ï¼Œè¿™æ—¶å€™+ æ˜¯æ‹¼æ¥å­—ç¬¦ä¸²çš„åŠŸèƒ½</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(â€œä½ å¥½â€+<span class="hljs-number">2</span>);<span class="hljs-comment">//ç»“æœä¸º  ä½ å¥½2</span><br><span class="hljs-built_in">int</span> a = <span class="hljs-number">5</span>;<br><span class="hljs-built_in">int</span> b = <span class="hljs-number">10</span><br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(â€œa=â€+a+â€,b=â€+b); <span class="hljs-comment">//ç»“æœä¸ºa=5,b=10  </span><br></code></pre></td></tr></table></figure><p><strong>ä¸€ä¸ªç±»å…¶å®å°±æ˜¯ä¸€ç§å¼•ç”¨æ•°æ®ç±»å‹</strong>  </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span></span>&#123;&#125;<br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">B</span></span>&#123;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span></span>&#123;<br>A a; <span class="hljs-comment">// å£°æ˜äº†ä¸€ä¸ªAç±»å‹çš„å˜é‡</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>è¯¯åŒº</strong> <strong>ï¼š</strong> å¾ˆå¤šäººä¸€å¼€å§‹è§‰å¾— Javaä¸­æä¾›çš„ç±»æ‰æ˜¯ä¸€ç§ç±»å‹ï¼Œè€Œæˆ‘ä»¬è‡ªå·±å†™è§‰å¾—ä¸æ˜¯ï¼</p><p>æˆ‘ä»¬è‡ªå·±å†™çš„ç±»å’ŒJavaå·²ç»å†™å¥½çš„ï¼Œæ€§è´¨ä¸€æ ·,  é¢å‘å¯¹è±¡ä¼šè¯¦ç»†è®²è§£è¿™å—å†…å®¹ </p><p><strong>æ•°æ®ç±»å‹è½¬æ¢</strong></p><p>â‘ <strong>è‡ªåŠ¨ç±»å‹</strong>æå‡byte -ã€‹short -ã€‹int -ã€‹ long            float -ã€‹ double  char  boolean</p><p><img src="/2019/11/01/Java%E6%91%98%E8%A6%81/%E7%B1%BB%E5%9E%8B%E6%8F%90%E5%8D%87.png" alt="asd"></p><p>â€‹         æ€è€ƒï¼šä¸ºä»€ä¹ˆfloat åœ¨long åé¢ï¼Ÿ  </p><p>â‘¡æ•°æ®ç±»å‹çš„è½¬æ¢ï¼šæ•°æ®çš„ç±»å‹è½¬æ¢ï¼Œæ¯”å¦‚æ•´æ•°10è½¬æ¢æˆå°æ•°10.0</p><p>â‘¢æœ¬è´¨ä»»ä½•ä¸€ä¸ªæ•°æ®ä¹Ÿéƒ½æ˜¯æœ‰ç±»å‹çš„ï¼true , 3.14</p><p><strong>å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼š</strong></p><p>â‘ å¤§æ•°æ®ç±»å‹è½¬å°æ•°æ®ç±»å‹[å­˜å‚¨ç©ºé—´å¤§å°]</p><p>â‘¡ç›¸åŒå­˜å‚¨ç©ºé—´ä¸åŒç±»å‹è¡¨è¾¾å€¼èŒƒå›´ä¸ä¸€æ ·      ä¾‹å¦‚ï¼šcharï¼ˆæ— ç¬¦å·ï¼‰åŠshortï¼ˆæœ‰ç¬¦å·ï¼‰</p><p><strong>åœ¨Javaä¸­ï¼Œbooleanç±»å‹ä¸æ‰€æœ‰å…¶ä»–7ç§ç±»å‹éƒ½ä¸èƒ½è¿›è¡Œè½¬æ¢ã€‚</strong> (byte short int long float double char)  </p><ol><li>  æ•°æ®ç±»å‹è¿‡é•¿ å’Œ æº¢å‡º</li></ol><ol start="2"><li>  long, float, doubleåªè¦ä¸¤ä¸ªæ“ä½œæ•°ä¸­æœ‰ä¸€ä¸ªæ˜¯ä¸Šé¢ç±»å‹çš„ï¼Œå¦ä¸€ä¸ªå°±ä¼šè¢«è½¬æ¢æˆç›¸åº”ç±»å‹ï¼Œå¹¶ä¸”ç»“æœä¹Ÿæ˜¯è¯¥ç±»å‹</li></ol><ol start="3"><li>  å¦‚æœ2ä¸ªæ“ä½œæ•°ï¼ˆåŒ…æ‹¬byteï¼Œshortï¼Œcharï¼Œintï¼‰ï¼Œéƒ½å°†ä¼šè½¬æ¢ä¸ºintç±»å‹ï¼Œå¹¶ä¸”ç»“æœä¹Ÿæ˜¯intï¼ˆè‡ªåŠ¨å‘ä¸Šè½¬å‹ï¼‰</li></ol><ol start="4"><li>  charç±»å‹å‘æ›´é«˜é•¿åº¦ç±»å‹ï¼ˆä¾‹å¦‚æ•´å‹ï¼‰è½¬æ¢æ—¶ï¼Œä¼šè½¬æ¢ä¸ºå¯¹åº”çš„ASCIIç å€¼ï¼Œå†åšå…¶ä»–ç±»å‹çš„è‡ªåŠ¨è½¬æ¢</li></ol><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼šcharå‹å…·æœ‰ä¸¤ä¸ªå­—èŠ‚ï¼Œå…¶æ•°å€¼èŒƒå›´æ˜¯0 ~ 2^16-1ï¼Œè¿™ç›´æ¥å¯¼è‡´byteå‹ä¸èƒ½è‡ªåŠ¨ç±»å‹æå‡åˆ°charï¼Œcharå’Œshortç›´æ¥ä¹Ÿä¸ä¼šå‘ç”Ÿè‡ªåŠ¨ç±»å‹æå‡ï¼ˆå› ä¸ºå€¼èŒƒå›´é—®é¢˜ï¼‰ï¼ŒåŒæ—¶ï¼Œbyteå½“ç„¶å¯ä»¥ç›´æ¥æå‡åˆ°shortå‹ã€‚</p><p> æ‰€ä»¥ï¼Œchar ä¸èƒ½å’Œbyte short ç›¸äº’è‡ªåŠ¨è½¬æ¢</p><ol start="5"><li>  ç‰¹ä¾‹   </li></ol><p>â‘ â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-&gt;</p><p>int a = 129;</p><p>byte b = (byte)a;//ç¼–è¯‘å™¨åªçœ‹å®¹å™¨ä¸çœ‹å€¼</p><p>System.out.println(b);//ç»“æœä¸º-127</p><p>â‘¡â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”&gt;</p><p>byte b = 100;//å¯ä»¥è‡ªåŠ¨è½¬æ¢</p><p>float  f = 1.3;//ä¸èƒ½è‡ªåŠ¨è½¬æ¢</p><p>int a = 2147483647;</p><p>a = a+1;</p><p>System.out.println(a); // ç»“æœä¸º -2147483648</p><p>é«˜ è½¬ ä½ä¼šå¯¼è‡´ç²¾åº¦ä¸¢å¤±,ä¸åŒç±»å‹çš„å¼ºåˆ¶è½¬æ¢ï¼Œå¯èƒ½ä¼šå¯¼è‡´ç²¾åº¦çš„ä¸‹é™.</p><p>æ¯”å¦‚è¯´ï¼šdouble è½¬ float </p><p><strong>ç¤ºä¾‹ä¸€</strong>ï¼š</p><p>int i1=123;</p><p>â€‹         int i2=456; </p><p>â€‹         float f1 = (float) ((i1+i2)*1.2);//å®¹é‡å¤§çš„ç±»å‹è½¬æ¢ä¸ºå®¹é‡å°çš„ç±»å‹æ—¶ï¼Œè¦åŠ ä¸Šå¼ºåˆ¶è½¬æ¢ç¬¦</p><p><strong>ç¤ºä¾‹äºŒ</strong>ï¼š</p><p>short i=99;</p><p>char c=(char)i; </p><p>System.out.println(c); </p><p><strong>ç¤ºä¾‹ä¸‰</strong>ï¼š</p><p>byte b1=1;</p><p>byte b2=2;</p><p>byte b3=(byte)(b1+b2); //byteï¼Œshortï¼Œcharåœ¨è®¡ç®—æ—¶é¦–å…ˆè½¬æ¢ä¸ºintï¼Œå¤§å®¹//é‡ï¼ˆintï¼‰è½¬æ¢ä¸ºå°å®¹é‡çš„ç±»å‹ï¼ˆbyteï¼‰æ—¶è¦åŠ å¼ºåˆ¶è½¬æ¢</p><p>â€‹      <strong>ç‰¹</strong> <strong>ä¾‹</strong>ï¼š</p><p>byte t = 127;//ä¸æŠ¥é”™</p><p>int a = 127;</p><p>byte b = (byte)a;//éœ€è¦å¼ºåˆ¶è½¬æ¢æ‰ä¸æŠ¥é”™ï¼šç¼–è¯‘å™¨åªçœ‹å®¹å™¨ä¸çœ‹å€¼</p><p>System.out.println(b); // ç»“æœä¸º 127</p><p>å¦‚æœå€¼æ¯”longè¿˜å¤§ â€”â€”â€”â€“&gt;  æ€ä¹ˆåŠï¼Ÿ</p><p>javaæä¾›äº†ä¸€ä¸ªç±»ï¼šBigIntegerï¼šç”¨äºå¤„ç†è¾ƒå¤§æ•´æ•°ï¼šç›®å‰çŸ¥é“å°±å¥½â€¦</p><p>â€‹         è¡¨è¾¾å¼ ï¼š ç”±å¸¸é‡ã€å˜é‡ã€è¿ç®—ç¬¦å’Œï¼ˆï¼‰ ç»„æˆçš„ç®—å¼  </p><p>æ•´æ•°ï¼ˆå°æ•°ï¼‰ç›¸é™¤çš„ä¾‹å­  10/3 =3ï¼› 10.0/3=3.33333â€¦</p><p>0/0    0.0/0.0       ç»“æœæ˜¯NaN ,ä»»ä½•çš„NaNéƒ½ä¸ç­‰äºè‡ªå·±ï¼ˆé¢è¯•é¢˜ï¼‰</p><p>1.0/0.0      Infinity,è¡¨ç¤ºæ— ç©·å¤§</p><p><strong>è‡ªå¢è‡ªå‡è¿ç®—çš„ä¼˜å…ˆçº§ æ¯” ç®—æœ¯è¿ç®—ç¬¦ é«˜</strong>  </p><p><img src="/2019/11/01/Java%E6%91%98%E8%A6%81/%E8%87%AA%E5%A2%9E%E5%87%8F%E8%BF%90%E7%AE%97.png" alt="q"></p><h3 id="æ¯”è¾ƒè¿ç®—ç¬¦ç¬¦å·-gt-lt-gt-lt-instanceof"><a href="#æ¯”è¾ƒè¿ç®—ç¬¦ç¬¦å·-gt-lt-gt-lt-instanceof" class="headerlink" title="æ¯”è¾ƒè¿ç®—ç¬¦ç¬¦å·  ==  !=   &gt; &lt;  &gt;=  &lt;=  instanceof"></a>æ¯”è¾ƒè¿ç®—ç¬¦ç¬¦å·  <strong>==  !=   &gt; &lt;  &gt;=  &lt;=  instanceof</strong></h3><p><strong>ç‰¹åˆ«è¯´æ˜</strong>ï¼šinstanceof æ˜¯åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å±äºæŸç§ç±»ç±»å‹</p><p>æ€è€ƒï¼šæ˜¯å¦å¯ä»¥ç”¨äºæˆ‘ä»¬ä¹‹å‰å­¦ä¹ çš„åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆå›å¿†ä¸€ä¸‹æˆ‘ä»¬ä¹‹å‰å­¦ä¹ çš„æ•°æ®ç±»å‹é™¤äº†åŸºæœ¬æ•°æ®ç±»å‹ è¿˜æœ‰ä»€ä¹ˆï¼Ÿï¼‰</p><p>å¸¸è§é”™è¯¯**ï¼š</p><p>â€‹      ä¾‹å¦‚ï¼šåˆ¤æ–­ä¸€ä¸ªæ•´æ•°çš„å˜é‡ aé‡Œé¢çš„æ•°æ® åœ¨0-100ä¹‹é—´</p><p>â€‹      æ­£ç¡®å†™æ³•ï¼š a&gt;0  &amp;&amp; a&lt;100</p><p>â€‹      é”™è¯¯å†™æ³•:  0&lt; a &lt; 100 (javaæ²¡æœ‰è¿™ç§è¯­æ³•ï¼Œä¸æ”¯æŒ)</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">short</span> s = <span class="hljs-number">3</span>;<br><span class="hljs-attribute">s</span> += <span class="hljs-number">2</span>;//å­˜åœ¨éšå¼è½¬æ¢ï¼Œéšå¼è½¬æ¢å’Œè‡ªåŠ¨è½¬æ¢æ¦‚å¿µä¸ä¸€æ ·<br><span class="hljs-attribute">short</span> s = <span class="hljs-number">3</span>;<br><span class="hljs-attribute">s</span> = s+<span class="hljs-number">2</span>;//ç»“æœå€¼æ˜¯intï¼Œintä¸èƒ½è‡ªåŠ¨è½¬æ¢ä¸ºshort<br></code></pre></td></tr></table></figure><p>æ˜¨å¤©çš„é¢è¯•finalå’Œfinallyçš„åŒºåˆ«</p><p>finalyå—é‡Œèƒ½ç”¨continueï¼Œbreakå’Œreturnå—ï¼Ÿ</p>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>Javaç»†èŠ‚æ‘˜è¦</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Javaæ³¨è§£</title>
    <link href="/2019/11/01/Java%E6%B3%A8%E8%A7%A3/"/>
    <url>/2019/11/01/Java%E6%B3%A8%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[<h3 id="Javaæ³¨è§£"><a href="#Javaæ³¨è§£" class="headerlink" title="Javaæ³¨è§£"></a>Javaæ³¨è§£</h3><h4 id="ä¸€ã€è®¤è¯†æ³¨è§£"><a href="#ä¸€ã€è®¤è¯†æ³¨è§£" class="headerlink" title="ä¸€ã€è®¤è¯†æ³¨è§£"></a>ä¸€ã€è®¤è¯†æ³¨è§£</h4><p>ã€€ã€€æ³¨è§£(Annotation)å¾ˆé‡è¦ï¼Œæœªæ¥çš„å¼€å‘æ¨¡å¼éƒ½æ˜¯åŸºäºæ³¨è§£çš„ï¼ŒJPAæ˜¯åŸºäºæ³¨è§£çš„ï¼ŒSpring2.5ä»¥ä¸Šéƒ½æ˜¯åŸºäºæ³¨è§£çš„ï¼ŒHibernate3.xä»¥åä¹Ÿæ˜¯åŸºäºæ³¨è§£çš„ï¼Œç°åœ¨çš„Struts2æœ‰ä¸€éƒ¨åˆ†ä¹Ÿæ˜¯åŸºäºæ³¨è§£çš„äº†ï¼Œæ³¨è§£æ˜¯ä¸€ç§è¶‹åŠ¿ï¼Œç°åœ¨å·²ç»æœ‰ä¸å°‘çš„äººå¼€å§‹ç”¨æ³¨è§£äº†ï¼Œæ³¨è§£æ˜¯JDK1.5ä¹‹åæ‰æœ‰çš„æ–°ç‰¹æ€§</p><p>â€‹    JDK1.5ä¹‹åå†…éƒ¨æä¾›çš„ä¸‰ä¸ªæ³¨è§£ï¼š</p><p>â€‹        @Deprecated æ„æ€æ˜¯â€œ<strong>åºŸå¼ƒçš„ï¼Œè¿‡æ—¶çš„</strong>â€</p><p>â€‹        @Override æ„æ€æ˜¯â€œ<strong>é‡å†™ã€è¦†ç›–</strong>â€</p><p>â€‹        @SuppressWarnings æ„æ€æ˜¯â€œ<strong>å‹ç¼©è­¦å‘Š</strong></p><blockquote><p>JDKå†…ç½®æ³¨è§£ï¼šOverrideæŒ‡â€œé‡å†™ï¼Œè¦†ç›–â€/DeprecatedæŒ‡â€œè¿‡æ—¶çš„ï¼ŒåºŸå¼ƒçš„â€/SuppressWarningsâ€œé•‡å‹è­¦å‘Šâ€</p><p>å…ƒæ³¨è§£ï¼šDocumented/Inherited/Retention/Target/Constraint</p><p>è‡ªå®šä¹‰æ³¨è§£</p><p>è§£ææ³¨è§£</p><p>è‡ªå®šä¹‰æ³¨è§£ç”ŸæˆSQLè¯­å¥</p></blockquote><p>æ³¨è§£èŒƒä¾‹ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs typescript">package cn.kongwei_liao.annotation;<br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ­¤ç±»æ˜¯ç”¨æ¥æ¼”ç¤ºæ³¨è§£(Annotation)çš„åº”ç”¨çš„ï¼Œæ³¨è§£ä¹Ÿæ˜¯JDK1.5æ–°å¢åŠ çš„ç‰¹æ€§ä¹‹ä¸€</span><br><span class="hljs-comment"> * JDK1.5å†…éƒ¨æä¾›çš„ä¸‰ç§æ³¨è§£æ˜¯ï¼š<span class="hljs-doctag">@SuppressWarnings</span>(&quot;:deprecation&quot;)ã€<span class="hljs-doctag">@Deprecated</span>ã€<span class="hljs-doctag">@Override</span></span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author <span class="hljs-variable">Kongwei_Liao</span></span></span><br><span class="hljs-comment"> */</span><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * ç±»åçš„å‘½åæ˜¯æœ‰è®²ç©¶çš„ï¼Œç±»åã€å±æ€§åã€å˜é‡åä¸€èˆ¬æ˜¯åè¯ï¼Œæˆ–è€…æ˜¯å½¢å®¹è¯+åè¯ï¼Œæ–¹æ³•ä¸€èˆ¬æ˜¯åŠ¨è¯ï¼Œæˆ–è€…æ˜¯åŠ¨è¯+åè¯ï¼Œ</span><br><span class="hljs-comment"> * ä»¥AnnotationTestä½œä¸ºç±»åå’Œä»¥TestAnnotationä½œä¸ºç±»åæ˜¯æœ‰åŒºåˆ«çš„ï¼Œ</span><br><span class="hljs-comment"> * å‰è€…æ˜¯æ³¨è§£çš„æµ‹è¯•ï¼Œç¬¦åˆåè¯çš„ç‰¹å¾ï¼Œåè€…æ˜¯æµ‹è¯•æ³¨è§£ï¼Œå¬èµ·æ¥å°±æ˜¯ä¸€ä¸ªåŠ¨ä½œåç§°ï¼Œæ˜¯æ–¹æ³•çš„å‘½åç‰¹å¾</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AnnotationTest</span> </span>&#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param <span class="hljs-variable">args</span></span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@SuppressWarnings</span>(<span class="hljs-string">&quot;:deprecation&quot;</span>)<br>    <span class="hljs-comment">//è¿™é‡Œå°±æ˜¯æ³¨è§£ï¼Œç§°ä¸ºå‹ç¼©è­¦å‘Šï¼Œè¿™æ˜¯JDKå†…éƒ¨è‡ªå¸¦çš„ä¸€ä¸ªæ³¨è§£ï¼Œ`ä¸€ä¸ªæ³¨è§£å°±æ˜¯ä¸€ä¸ªç±»`ï¼Œåœ¨è¿™é‡Œä½¿ç”¨äº†è¿™ä¸ªæ³¨è§£å°±æ˜¯åˆ›å»ºäº†SuppressWarningsç±»çš„ä¸€ä¸ªå®ä¾‹å¯¹è±¡</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">main</span>(<span class="hljs-params"><span class="hljs-built_in">String</span>[] args</span>)</span> &#123;<br>        System.runFinalizersOnExit(<span class="hljs-literal">true</span>);<br>        <span class="hljs-comment">//The method runFinalizersOnExit(boolean) from the type System is deprecated(è¿‡æ—¶çš„ï¼ŒåºŸå¼ƒçš„)</span><br>        <span class="hljs-comment">//è¿™é‡Œçš„runFinalizersOnExit()æ–¹æ³•ç”»äº†ä¸€æ¡æ¨ªçº¿è¡¨ç¤ºæ­¤æ–¹æ³•å·²ç»è¿‡æ—¶äº†ï¼Œä¸å»ºè®®ä½¿ç”¨äº†</span><br>    &#125;<br>    <span class="hljs-meta">@Deprecated</span> <span class="hljs-comment">//è¿™ä¹Ÿæ˜¯JDKå†…éƒ¨è‡ªå¸¦çš„ä¸€ä¸ªæ³¨è§£ï¼Œæ„æ€å°±æ˜¯è¯´è¿™ä¸ªæ–¹æ³•å·²ç»åºŸå¼ƒäº†ï¼Œä¸å»ºè®®ä½¿ç”¨äº†</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">sayHello</span>(<span class="hljs-params"></span>)</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;hi,Kongwei_Liao&quot;</span>);<br>    &#125;<br>    <span class="hljs-meta">@Override</span> <span class="hljs-comment">//è¿™ä¹Ÿæ˜¯JDK1.5ä¹‹åå†…éƒ¨æä¾›çš„ä¸€ä¸ªæ³¨è§£ï¼Œæ„æ€å°±æ˜¯è¦é‡å†™(è¦†ç›–)JDKå†…éƒ¨çš„toString()æ–¹æ³•</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">String</span> <span class="hljs-function"><span class="hljs-title">toString</span>(<span class="hljs-params"></span>)</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Kongwei_Liao&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>â€‹    æ€»ç»“ï¼š<strong>æ³¨è§£(Annotation)ç›¸å½“äºä¸€ç§æ ‡è®°ï¼Œåœ¨ç¨‹åºä¸­åŠ å…¥æ³¨è§£å°±ç­‰äºä¸ºç¨‹åºæ‰“ä¸ŠæŸç§æ ‡è®°</strong>ï¼Œæ²¡æœ‰åŠ ï¼Œåˆ™ç­‰äºæ²¡æœ‰ä»»ä½•æ ‡è®°ï¼Œä»¥åï¼Œ<strong>javacç¼–è¯‘å™¨ã€å¼€å‘å·¥å…·å’Œå…¶ä»–ç¨‹åºå¯ä»¥<code>é€šè¿‡åå°„</code>**æ¥äº†è§£ä½ çš„ç±»åŠå„ç§å…ƒç´ ä¸Šæœ‰æ— ä½•ç§æ ‡è®°ï¼Œçœ‹ä½ çš„ç¨‹åºæœ‰ä»€ä¹ˆæ ‡è®°ï¼Œå°±å»å¹²ç›¸åº”çš„äº‹ï¼Œ</strong>æ ‡è®°å¯ä»¥åŠ åœ¨åŒ…ã€ç±»ï¼Œå±æ€§ã€æ–¹æ³•ï¼Œæ–¹æ³•çš„å‚æ•°ä»¥åŠå±€éƒ¨å˜é‡ä¸Š**ã€‚</p><p><img src="/2019/11/01/Java%E6%B3%A8%E8%A7%A3/AnnoStruct.jpg" alt="æ³¨è§£ç»“æ„"></p><p>æ³¨è§£å°±ç›¸å½“äºä¸€ä¸ªä½ çš„æºç¨‹åºè¦è°ƒç”¨çš„ä¸€ä¸ªç±»ï¼Œåœ¨æºç¨‹åºä¸­åº”ç”¨æŸä¸ªæ³¨è§£ï¼Œå¾—äº‹å…ˆå‡†å¤‡å¥½è¿™ä¸ªæ³¨è§£ç±»ã€‚å°±åƒä½ è¦è°ƒç”¨æŸä¸ªç±»ï¼Œå¾—äº‹å…ˆå¼€å‘å¥½è¿™ä¸ªç±»ã€‚ </p><h3 id="äºŒã€è‡ªå®šä¹‰æ³¨è§£åŠå…¶åº”ç”¨"><a href="#äºŒã€è‡ªå®šä¹‰æ³¨è§£åŠå…¶åº”ç”¨" class="headerlink" title="äºŒã€è‡ªå®šä¹‰æ³¨è§£åŠå…¶åº”ç”¨"></a>äºŒã€è‡ªå®šä¹‰æ³¨è§£åŠå…¶åº”ç”¨</h3><p><strong>è‡ªå®šä¹‰ä¸€ä¸ªæœ€ç®€å•çš„æ³¨è§£ï¼š</strong></p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-keyword">public</span> @<span class="hljs-keyword">interface</span> <span class="hljs-symbol">MyAnnotation</span>&#123;&#125;<span class="hljs-comment">//è‡ªå®šä¹‰ä¸€ä¸ªæœ€ç®€å•çš„æ³¨è§£</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> cn.kongwei_liao.annotation;<br><span class="hljs-keyword">import</span> java.lang.annotation.ElementType;<br><span class="hljs-keyword">import</span> java.lang.annotation.Retention;<br><span class="hljs-keyword">import</span> java.lang.annotation.RetentionPolicy;<br><span class="hljs-keyword">import</span> java.lang.annotation.Target;<br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * è¿™æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰çš„æ³¨è§£(Annotation)ç±» åœ¨å®šä¹‰æ³¨è§£(Annotation)ç±»æ—¶ä½¿ç”¨äº†å¦ä¸€ä¸ªæ³¨è§£ç±»Retention</span><br><span class="hljs-comment"> * åœ¨æ³¨è§£ç±»ä¸Šä½¿ç”¨å¦ä¸€ä¸ªæ³¨è§£ç±»ï¼Œé‚£ä¹ˆè¢«ä½¿ç”¨çš„æ³¨è§£ç±»å°±ç§°ä¸ºå…ƒæ³¨è§£</span><br><span class="hljs-comment"> * </span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> kongwei_liao</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span><span class="hljs-comment">//Retentionæ³¨è§£å†³å®šMyAnnotationæ³¨è§£çš„ç”Ÿå‘½å‘¨æœŸ</span><br><span class="hljs-meta">@Target( &#123; ElementType.METHOD, ElementType.TYPE &#125;)</span><span class="hljs-comment">//Targetæ³¨è§£å†³å®šMyAnnotationæ³¨è§£å¯ä»¥åŠ åœ¨å“ªäº›æˆåˆ†ä¸Šï¼Œå¦‚åŠ åœ¨ç±»èº«ä¸Šï¼Œæˆ–è€…å±æ€§èº«ä¸Šï¼Œæˆ–è€…æ–¹æ³•èº«ä¸Šç­‰æˆåˆ†</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment"> * @Retention(RetentionPolicy.SOURCE)</span><br><span class="hljs-comment"> * è¿™ä¸ªæ³¨è§£çš„æ„æ€æ˜¯è®©MyAnnotationæ³¨è§£åªåœ¨javaæºæ–‡ä»¶ä¸­å­˜åœ¨ï¼Œç¼–è¯‘æˆ.classæ–‡ä»¶åæ³¨è§£å°±ä¸å­˜åœ¨äº†</span><br><span class="hljs-comment"> * @Retention(RetentionPolicy.CLASS)</span><br><span class="hljs-comment"> * è¿™ä¸ªæ³¨è§£çš„æ„æ€æ˜¯è®©MyAnnotationæ³¨è§£åœ¨javaæºæ–‡ä»¶(.javaæ–‡ä»¶)ä¸­å­˜åœ¨ï¼Œç¼–è¯‘æˆ.classæ–‡ä»¶åæ³¨è§£ä¹Ÿè¿˜å­˜åœ¨ï¼Œ</span><br><span class="hljs-comment"> * è¢«MyAnnotationæ³¨è§£ç±»æ ‡è¯†çš„ç±»è¢«ç±»åŠ è½½å™¨åŠ è½½åˆ°å†…å­˜ä¸­åMyAnnotationæ³¨è§£å°±ä¸å­˜åœ¨äº†</span><br><span class="hljs-comment"> */</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment"> * è¿™é‡Œæ˜¯åœ¨æ³¨è§£ç±»MyAnnotationä¸Šä½¿ç”¨å¦ä¸€ä¸ªæ³¨è§£ç±»ï¼Œè¿™é‡Œçš„Retentionç§°ä¸ºå…ƒæ³¨è§£ã€‚</span><br><span class="hljs-comment"> * Retentionæ³¨è§£æ‹¬å·ä¸­çš„&quot;RetentionPolicy.RUNTIME&quot;æ„æ€æ˜¯è®©MyAnnotationè¿™ä¸ªæ³¨è§£çš„ç”Ÿå‘½å‘¨æœŸä¸€ç›´ç¨‹åºè¿è¡Œæ—¶éƒ½å­˜åœ¨</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> MyAnnotation &#123;<br>&#125;<br></code></pre></td></tr></table></figure><p> <strong>æŠŠè‡ªå®šä¹‰çš„æ³¨è§£åŠ åˆ°æŸä¸ªç±»ä¸Šï¼š</strong> </p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">@ MyAnnotation <br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-symbol">AnnotationUse</span>&#123;<br>&#125;<br></code></pre></td></tr></table></figure><p> <strong>ç”¨åå°„æµ‹è¯•è¿›è¡Œæµ‹è¯•AnnotationUseçš„å®šä¹‰ä¸Šæ˜¯å¦æœ‰@MyAnnotation</strong></p><p><img src="/2019/11/01/Java%E6%B3%A8%E8%A7%A3/%E5%8F%8D%E5%B0%84API.png" alt="åå°„"></p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">package</span> cn.kongwei_liao.<span class="hljs-keyword">annotation</span>;<br><br><span class="hljs-meta">@MyAnnotation</span><span class="hljs-comment">//è¿™é‡Œæ˜¯å°†æ–°åˆ›å»ºå¥½çš„æ³¨è§£ç±»MyAnnotationæ ‡è®°åˆ°AnnotaionTestç±»ä¸Š</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AnnotationUse</span> </span>&#123;<br>    <span class="hljs-keyword">public</span> static void main(String[] args) &#123;<br>        <span class="hljs-comment">// è¿™é‡Œæ˜¯æ£€æŸ¥Annotationç±»æ˜¯å¦æœ‰æ³¨è§£ï¼Œè¿™é‡Œéœ€è¦ä½¿ç”¨åå°„æ‰èƒ½å®Œæˆå¯¹Annotationç±»çš„æ£€æŸ¥</span><br>        <span class="hljs-keyword">if</span> (AnnotationUse.<span class="hljs-keyword">class</span>.isAnnotationPresent(MyAnnotation.<span class="hljs-keyword">class</span>)) &#123;<br>            <span class="hljs-comment">/*</span><br><span class="hljs-comment">             * MyAnnotationæ˜¯ä¸€ä¸ªç±»ï¼Œè¿™ä¸ªç±»çš„å®ä¾‹å¯¹è±¡annotationæ˜¯é€šè¿‡åå°„å¾—åˆ°çš„ï¼Œè¿™ä¸ªå®ä¾‹å¯¹è±¡æ˜¯å¦‚ä½•åˆ›å»ºçš„å‘¢ï¼Ÿ</span><br><span class="hljs-comment">             * ä¸€æ—¦åœ¨æŸä¸ªç±»ä¸Šä½¿ç”¨äº†@MyAnnotationï¼Œé‚£ä¹ˆè¿™ä¸ªMyAnnotationç±»çš„å®ä¾‹å¯¹è±¡annotationå°±ä¼šè¢«åˆ›å»ºå‡ºæ¥äº†</span><br><span class="hljs-comment">             * å‡è®¾å¾ˆå¤šäººè€ƒé©¾ç…§ï¼Œæ•™ç»ƒåœ¨æœ‰äº›å­¦å‘˜èº«ä¸Šè´´ä¸€äº›ç»¿ç‰Œå­ã€é»„ç‰Œå­ï¼Œè´´ç»¿ç‰Œå­çš„è¡¨ç¤ºé€ç¤¼é€å¾—æ¯”è¾ƒå¤šçš„ï¼Œ</span><br><span class="hljs-comment">             * è´´é»„ç‰Œå­çš„å­¦å‘˜è¡¨ç¤ºé€ç¤¼é€å¾—æ¯”è¾ƒå°‘çš„ï¼Œä¸è´´ç‰Œå­çš„å­¦å‘˜è¡¨ç¤ºæ²¡æœ‰é€è¿‡ç¤¼çš„ï¼Œé€šè¿‡è¿™ä¸ªç‰Œå­å°±å¯ä»¥æ ‡è¯†å‡ºä¸åŒçš„å­¦å‘˜</span><br><span class="hljs-comment">             * æ•™å®˜åœ¨è€ƒæ ¸æ—¶ä¸€çœ‹ï¼Œå“¦ï¼Œè¿™ä¸ªå­¦å‘˜æ˜¯æœ‰ç‰Œå­çš„ï¼Œæ˜¯é€è¿‡ç¤¼ç»™ä»–çš„ï¼Œä¼˜å…ˆè®©æœ‰ç‰Œå­çš„å­¦å‘˜è¿‡ï¼Œæ­¤æ—¶è¿™ä¸ªç‰Œå­å°±æ˜¯ä¸€ä¸ªæ³¨è§£</span><br><span class="hljs-comment">             * ä¸€ä¸ªç‰Œå­å°±æ˜¯ä¸€ä¸ªæ³¨è§£çš„å®ä¾‹å¯¹è±¡ï¼Œå®å®åœ¨åœ¨å­˜åœ¨çš„ç‰Œå­å°±æ˜¯ä¸€ä¸ªå®å®åœ¨åœ¨çš„æ³¨è§£å¯¹è±¡ï¼ŒæŠŠç‰Œå­æ‹¿ä¸‹æ¥(å»æ‰æ³¨è§£)æ³¨è§£å¯¹è±¡å°±ä¸å­˜åœ¨äº†</span><br><span class="hljs-comment">             */</span><br>            MyAnnotation <span class="hljs-keyword">annotation</span> = (MyAnnotation) AnnotationUse.<span class="hljs-keyword">class</span><br>                    .getAnnotation(MyAnnotation.<span class="hljs-keyword">class</span>);<br>            System.<span class="hljs-keyword">out</span>.println(<span class="hljs-keyword">annotation</span>);<span class="hljs-comment">// æ‰“å°MyAnnotationå¯¹è±¡ï¼Œè¿™é‡Œè¾“å‡ºçš„ç»“æœä¸ºï¼š@cn.kongwei_liao.annotation.MyAnnotation()</span><br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ä¸‰ã€-Retentionå…ƒæ³¨è§£"><a href="#ä¸‰ã€-Retentionå…ƒæ³¨è§£" class="headerlink" title="ä¸‰ã€@Retentionå…ƒæ³¨è§£"></a>ä¸‰ã€@Retentionå…ƒæ³¨è§£</h3><p>æ ¹æ®åå°„çš„æµ‹è¯•çš„é—®é¢˜ï¼Œå¼•å‡º@Retentionå…ƒæ³¨è§£çš„è®²è§£ï¼š</p><p>å…¶ä¸‰ç§å–å€¼ï¼š<strong>RetentionPolicy.SOURCE</strong>ã€<strong>RetentionPolicy.CLASS</strong>ã€<strong>RetentionPolicy.RUNTIME</strong></p><p>åˆ†åˆ«å¯¹åº”ï¼šJavaæºæ–‡ä»¶(.javaæ–‡ä»¶)â€”-&gt;.classæ–‡ä»¶â€”-&gt;å†…å­˜ä¸­çš„å­—èŠ‚ç  </p><h3 id="å››ã€-Retentionæ³¨è§£è¯´æ˜"><a href="#å››ã€-Retentionæ³¨è§£è¯´æ˜" class="headerlink" title="å››ã€ Retentionæ³¨è§£è¯´æ˜"></a>å››ã€ Retentionæ³¨è§£è¯´æ˜</h3><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@Documented</span><br><span class="hljs-variable">@Retention</span>(RetentionPolicy.RUNTIME)<br><span class="hljs-variable">@Target</span>(ElementType.ANNOTATION_TYPE)<br>public <span class="hljs-variable">@interface</span> Retention &#123;<br><br>    <span class="hljs-selector-tag">RetentionPolicy</span> <span class="hljs-selector-tag">value</span>();<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs applescript">public enum RetentionPolicy &#123;<br>    /**<br>     * Annotations are <span class="hljs-keyword">to</span> be discarded <span class="hljs-keyword">by</span> <span class="hljs-keyword">the</span> compiler.<br>     * ï¼ˆæ³¨è§£å°†è¢«ç¼–è¯‘å™¨å¿½ç•¥æ‰ï¼‰<br>     */<br>    SOURCE,<br><br>    /**<br>     * Annotations are <span class="hljs-keyword">to</span> be recorded <span class="hljs-keyword">in</span> <span class="hljs-keyword">the</span> <span class="hljs-built_in">class</span> <span class="hljs-built_in">file</span> <span class="hljs-keyword">by</span> <span class="hljs-keyword">the</span> compiler<br>     * <span class="hljs-keyword">but</span> need <span class="hljs-keyword">not</span> be retained <span class="hljs-keyword">by</span> <span class="hljs-keyword">the</span> VM <span class="hljs-keyword">at</span> <span class="hljs-built_in">run</span> <span class="hljs-built_in">time</span>.  This <span class="hljs-keyword">is</span> <span class="hljs-keyword">the</span> default<br>     * behavior.<br>     * ï¼ˆæ³¨è§£å°†è¢«ç¼–è¯‘å™¨è®°å½•åœ¨<span class="hljs-built_in">class</span>æ–‡ä»¶ä¸­ï¼Œä½†åœ¨è¿è¡Œæ—¶ä¸ä¼šè¢«è™šæ‹Ÿæœºä¿ç•™ï¼Œè¿™æ˜¯ä¸€ä¸ªé»˜è®¤çš„è¡Œä¸ºï¼‰<br>     */<br>    CLASS,<br><br>    /**<br>     * Annotations are <span class="hljs-keyword">to</span> be recorded <span class="hljs-keyword">in</span> <span class="hljs-keyword">the</span> <span class="hljs-built_in">class</span> <span class="hljs-built_in">file</span> <span class="hljs-keyword">by</span> <span class="hljs-keyword">the</span> compiler <span class="hljs-keyword">and</span><br>     * retained <span class="hljs-keyword">by</span> <span class="hljs-keyword">the</span> VM <span class="hljs-keyword">at</span> <span class="hljs-built_in">run</span> <span class="hljs-built_in">time</span>, so they may be <span class="hljs-built_in">read</span> reflectively.<br>     * ï¼ˆæ³¨è§£å°†è¢«ç¼–è¯‘å™¨è®°å½•åœ¨<span class="hljs-built_in">class</span>æ–‡ä»¶ä¸­ï¼Œè€Œä¸”åœ¨è¿è¡Œæ—¶ä¼šè¢«è™šæ‹Ÿæœºä¿ç•™ï¼Œå› æ­¤å®ƒä»¬èƒ½é€šè¿‡åå°„è¢«è¯»å–åˆ°ï¼‰<br>     * @see java.lang.reflect.AnnotatedElement<br>     */<br>    RUNTIME<br>&#125;<br></code></pre></td></tr></table></figure><p>â€‹        å½“åœ¨Javaæºç¨‹åºä¸ŠåŠ äº†ä¸€ä¸ªæ³¨è§£ï¼Œè¿™ä¸ªJavaæºç¨‹åºè¦ç”±javacå»ç¼–è¯‘ï¼ŒjavacæŠŠjavaæºæ–‡ä»¶ç¼–è¯‘æˆ.classæ–‡ä»¶ï¼Œ</p><p>â€‹        åœ¨ç¼–è¯‘æˆclassæ—¶å¯èƒ½ä¼šæŠŠJavaæºç¨‹åºä¸Šçš„ä¸€äº›æ³¨è§£ç»™å»æ‰ï¼Œjavaç¼–è¯‘å™¨(javac)åœ¨å¤„ç†javaæºç¨‹åºæ—¶ï¼Œå¯èƒ½ä¼šè®¤ä¸ºè¿™ä¸ªæ³¨è§£æ²¡æœ‰ç”¨äº†ï¼Œäºæ˜¯å°±æŠŠè¿™ä¸ªæ³¨è§£å»æ‰äº†ï¼Œé‚£ä¹ˆæ­¤æ—¶åœ¨ç¼–è¯‘å¥½çš„classä¸­å°±æ‰¾ä¸åˆ°æ³¨è§£äº†ï¼Œ è¿™æ˜¯ç¼–è¯‘å™¨ç¼–è¯‘javaæºç¨‹åºæ—¶å¯¹æ³¨è§£è¿›è¡Œå¤„ç†çš„ç¬¬ä¸€ç§å¯èƒ½æƒ…å†µï¼Œ</p><p>â€‹        å‡è®¾javaç¼–è¯‘å™¨åœ¨æŠŠjavaæºç¨‹åºç¼–è¯‘æˆclassæ—¶ï¼Œæ²¡æœ‰æŠŠjavaæºç¨‹åºä¸­çš„æ³¨è§£å»æ‰ï¼Œé‚£ä¹ˆæ­¤æ—¶åœ¨ç¼–è¯‘å¥½çš„classä¸­å°±å¯ä»¥æ‰¾åˆ°æ³¨è§£ï¼Œå½“ç¨‹åºä½¿ç”¨ç¼–è¯‘å¥½çš„classæ–‡ä»¶æ—¶ï¼Œéœ€è¦ç”¨ç±»åŠ è½½å™¨æŠŠclassæ–‡ä»¶åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œclassæ–‡ä»¶ä¸­çš„ä¸œè¥¿ä¸æ˜¯å­—èŠ‚ç ï¼Œclassæ–‡ä»¶é‡Œé¢çš„ä¸œè¥¿ç”±ç±»åŠ è½½å™¨åŠ è½½åˆ°å†…å­˜ä¸­å»ï¼Œ</p><p>â€‹        ç±»åŠ è½½å™¨åœ¨åŠ è½½classæ–‡ä»¶æ—¶ï¼Œä¼šå¯¹classæ–‡ä»¶é‡Œé¢çš„ä¸œè¥¿è¿›è¡Œå¤„ç†ï¼Œå¦‚å®‰å…¨æ£€æŸ¥ï¼Œå¤„ç†å®Œä»¥åå¾—åˆ°çš„æœ€ç»ˆåœ¨å†…å­˜ä¸­çš„äºŒè¿›åˆ¶çš„ä¸œè¥¿æ‰æ˜¯å­—èŠ‚ç ï¼Œç±»åŠ è½½å™¨åœ¨æŠŠclassæ–‡ä»¶åŠ è½½åˆ°å†…å­˜ä¸­æ—¶ä¹Ÿæœ‰è½¬æ¢ï¼Œè½¬æ¢æ—¶æ˜¯å¦æŠŠclassæ–‡ä»¶ä¸­çš„æ³¨è§£ä¿ç•™ä¸‹æ¥ï¼Œè¿™ä¹Ÿæœ‰è¯´æ³•ï¼Œ</p><p>â€‹        æ‰€ä»¥è¯´<strong>ä¸€ä¸ªæ³¨è§£çš„ç”Ÿå‘½å‘¨æœŸæœ‰ä¸‰ä¸ªé˜¶æ®µï¼šjavaæºæ–‡ä»¶æ˜¯ä¸€ä¸ªé˜¶æ®µï¼Œclassæ–‡ä»¶æ˜¯ä¸€ä¸ªé˜¶æ®µï¼Œå†…å­˜ä¸­çš„å­—èŠ‚ç æ˜¯ä¸€ä¸ªé˜¶æ®µ</strong>,</p><p>â€‹        javacæŠŠjavaæºæ–‡ä»¶ç¼–è¯‘æˆ.classæ–‡ä»¶æ—¶ï¼Œæœ‰å¯èƒ½å»æ‰é‡Œé¢çš„æ³¨è§£ï¼Œç±»åŠ è½½å™¨æŠŠ.classæ–‡ä»¶åŠ è½½åˆ°å†…å­˜æ—¶ä¹Ÿæœ‰å¯èƒ½å»æ‰é‡Œé¢çš„æ³¨è§£ï¼Œ</p><p>â€‹        å› æ­¤**åœ¨è‡ªå®šä¹‰æ³¨è§£æ—¶å°±å¯ä»¥ä½¿ç”¨Retentionæ³¨è§£æŒ‡æ˜è‡ªå®šä¹‰æ³¨è§£çš„ç”Ÿå‘½å‘¨æœŸï¼Œè‡ªå®šä¹‰æ³¨è§£çš„ç”Ÿå‘½å‘¨æœŸæ˜¯åœ¨RetentionPolicy.SOURCEé˜¶æ®µ(javaæºæ–‡ä»¶é˜¶æ®µ)ï¼Œè¿˜æ˜¯åœ¨RetentionPolicy.CLASSé˜¶æ®µ(classæ–‡ä»¶é˜¶æ®µ)ï¼Œæˆ–è€…æ˜¯åœ¨RetentionPolicy.RUNTIMEé˜¶æ®µ(å†…å­˜ä¸­çš„å­—èŠ‚ç è¿è¡Œæ—¶é˜¶æ®µ)**ï¼Œ</p><p>â€‹        æ ¹æ®<strong>JDKæä¾›çš„APIå¯ä»¥çŸ¥é“é»˜è®¤æ˜¯åœ¨RetentionPolicy.CLASSé˜¶æ®µ (JDKçš„APIå†™åˆ°ï¼šthe retention policy defaults to RetentionPolicy.CLASS.)</strong></p><blockquote><p><strong>ä¸‹é¢çœ‹çœ‹@Deprecatedã€@Overrideã€@SuppressWarningsè¿™ä¸‰ä¸ªæ³¨è§£çš„@Retentionæ³¨è§£çš„å±æ€§å€¼åˆ†åˆ«æ˜¯ä»€ä¹ˆå§</strong></p></blockquote><h4 id="4-1ã€-Deprecated"><a href="#4-1ã€-Deprecated" class="headerlink" title="4.1ã€@Deprecated"></a><strong>4.1ã€@Deprecated</strong></h4><p>ã€€ã€€Java APIä¸­æ˜¯è¿™æ ·å®šä¹‰çš„@Deprecatedçš„</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@Documented</span><br><span class="hljs-variable">@Retention</span>(value=RUNTIME)<br>public <span class="hljs-variable">@interface</span> Deprecated<br></code></pre></td></tr></table></figure><h4 id="4-2ã€-Override"><a href="#4-2ã€-Override" class="headerlink" title="4.2ã€@Override"></a><strong>4.2ã€@Override</strong></h4><p>ã€€ã€€Java APIä¸­æ˜¯è¿™æ ·å®šä¹‰çš„@Overrideçš„</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@Target</span>(value=METHOD)<br><span class="hljs-variable">@Retention</span>(value=SOURCE)<br>public <span class="hljs-variable">@interface</span> Override<br></code></pre></td></tr></table></figure><p>ã€€ã€€@Overrideæ˜¯ç»™javac(javaç¼–è¯‘å™¨)çœ‹çš„ï¼Œç¼–è¯‘å®Œä»¥åå°±@Overrideæ³¨è§£å°±æ²¡æœ‰ä»·å€¼äº†ï¼Œ@Overrideæ³¨è§£åœ¨æºä»£ç ä¸­æœ‰ç”¨ï¼Œç¼–è¯‘æˆ.classæ–‡ä»¶å@Overrideæ³¨è§£å°±æ²¡æœ‰ç”¨äº†ï¼Œå› æ­¤@Overrideçš„Retentionçš„å±æ€§å€¼æ˜¯RetentionPolicy.SOURCE</p><h4 id="4-3ã€-SuppressWarnings"><a href="#4-3ã€-SuppressWarnings" class="headerlink" title="4.3ã€@SuppressWarnings"></a><strong>4.3ã€@SuppressWarnings</strong></h4><p>ã€€ã€€Java APIä¸­æ˜¯è¿™æ ·å®šä¹‰çš„@SuppressWarningsçš„</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@Target</span>(value=&#123;TYPE,FIELD,METHOD,PARAMETER,CONSTRUCTOR,LOCAL_VARIABLE&#125;)<br><span class="hljs-variable">@Retention</span>(value=SOURCE)<br>public <span class="hljs-variable">@interface</span> SuppressWarnings<br></code></pre></td></tr></table></figure><p>ã€€ã€€@SuppressWarningsæ˜¯ç»™javac(javaç¼–è¯‘å™¨)çœ‹çš„ï¼Œç¼–è¯‘å™¨ç¼–è¯‘å®Œjavaæ–‡ä»¶åï¼Œ@SuppressWarningsæ³¨è§£å°±æ²¡æœ‰ç”¨äº†ï¼Œæ‰€ä»¥@SuppressWarningsçš„Retentionçš„å±æ€§å€¼æ˜¯RetentionPolicy.SOURCE</p><h3 id="äº”ã€-Targetå…ƒæ³¨è§£"><a href="#äº”ã€-Targetå…ƒæ³¨è§£" class="headerlink" title="äº”ã€@Targetå…ƒæ³¨è§£"></a>äº”ã€@Targetå…ƒæ³¨è§£</h3><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@Documented</span><br><span class="hljs-variable">@Retention</span>(RetentionPolicy.RUNTIME)<br><span class="hljs-variable">@Target</span>(ElementType.ANNOTATION_TYPE)<br>public <span class="hljs-variable">@interface</span> Target &#123;<br>    <span class="hljs-selector-tag">ElementType</span><span class="hljs-selector-attr">[]</span> <span class="hljs-selector-tag">value</span>();<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs autohotkey">public enum ElementType &#123;<br>    <span class="hljs-comment">/** ç±»ï¼Œæ¥å£ï¼ˆåŒ…æ‹¬æ³¨è§£ç±»å‹ï¼‰æˆ–enumå£°æ˜  */</span><br><span class="hljs-built_in">    TYPE,</span><br>    <span class="hljs-comment">/** åŸŸå£°æ˜ï¼ˆåŒ…æ‹¬ enum å®ä¾‹ï¼‰ */</span><br><span class="hljs-built_in">    FIELD,</span><br>    <span class="hljs-comment">/** æ–¹æ³•å£°æ˜ */</span><br><span class="hljs-built_in">    METHOD,</span><br>    <span class="hljs-comment">/** å‚æ•°å£°æ˜ */</span><br><span class="hljs-built_in">    PARAMETER,</span><br>    <span class="hljs-comment">/** æ„é€ å™¨å£°æ˜ */</span><br><span class="hljs-built_in">    CONSTRUCTOR,</span><br>    <span class="hljs-comment">/** å±€éƒ¨å˜é‡å£°æ˜  */</span><br><span class="hljs-built_in">    LOCAL_VARIABLE,</span><br>    <span class="hljs-comment">/** Annotation type declaration */</span><br><span class="hljs-built_in">    ANNOTATION_TYPE,</span><br>    <span class="hljs-comment">/**  åŒ…å£°æ˜  */</span><br><span class="hljs-built_in">    PACKAGE,</span><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ç±»å‹å‚æ•°å£°æ˜</span><br><span class="hljs-comment">     * @since 1.8</span><br><span class="hljs-comment">     */</span><br><span class="hljs-built_in">    TYPE_PARAMETER,</span><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ç±»å‹çš„ä½¿ç”¨</span><br><span class="hljs-comment">     * @since 1.8</span><br><span class="hljs-comment">     */</span><br>    TYPE_USE<br>&#125;<br></code></pre></td></tr></table></figure><p>ã€€ã€€<code>@Targetå…ƒæ³¨è§£å†³å®šäº†ä¸€ä¸ªæ³¨è§£å¯ä»¥æ ‡è¯†åˆ°å“ªäº›æˆåˆ†ä¸Š</code>ï¼Œå¦‚æ ‡è¯†åœ¨åœ¨ç±»ï¼Œæˆ–è€…å±æ€§ï¼Œæˆ–è€…æ–¹æ³•ç­‰æˆåˆ†èº«ä¸Šï¼Œ@Targeté»˜è®¤å€¼ä¸ºä»»ä½•å…ƒç´ (æˆåˆ†)</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">1 </span>@Target(value=&#123;TYPE,<span class="hljs-keyword">FIELD</span>,METHOD,PARAMETER,CONSTRUCTOR,LOCAL_VARIABLE&#125;)<br><span class="hljs-symbol">2 </span>@Retention(value=SOURCE)<br><span class="hljs-symbol">3 </span>public @interface SuppressWarnings<br></code></pre></td></tr></table></figure><h3 id="å…­ã€-Documentedå…ƒæ³¨è§£"><a href="#å…­ã€-Documentedå…ƒæ³¨è§£" class="headerlink" title="å…­ã€ @Documentedå…ƒæ³¨è§£"></a>å…­ã€ @Documentedå…ƒæ³¨è§£</h3><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@Documented</span><br><span class="hljs-variable">@Retention</span>(RetentionPolicy.RUNTIME)<br><span class="hljs-variable">@Target</span>(ElementType.ANNOTATION_TYPE)<br>public <span class="hljs-variable">@interface</span> Documented &#123;<br>&#125;<br></code></pre></td></tr></table></figure><p> å³æ‹¥æœ‰è¿™ä¸ªæ³¨è§£çš„å…ƒç´ å¯ä»¥è¢«javadocæ­¤ç±»çš„å·¥å…·æ–‡æ¡£åŒ–ã€‚å®ƒä»£è¡¨ç€æ­¤æ³¨è§£ä¼šè¢«javadocå·¥å…·æå–æˆæ–‡æ¡£ã€‚åœ¨docæ–‡æ¡£ä¸­çš„å†…å®¹ä¼šå› ä¸ºæ­¤æ³¨è§£çš„ä¿¡æ¯å†…å®¹ä¸åŒè€Œä¸åŒã€‚ç›¸å½“ä¸@return,@param ç­‰ã€‚  </p><h3 id="ä¸ƒã€-Inherited-å…ƒæ³¨è§£"><a href="#ä¸ƒã€-Inherited-å…ƒæ³¨è§£" class="headerlink" title="ä¸ƒã€@Inherited å…ƒæ³¨è§£"></a>ä¸ƒã€@Inherited å…ƒæ³¨è§£</h3><p> @Inheritedæ³¨è§£æ ‡è®°å…¶ä»–çš„æ³¨è§£ç”¨äºæŒ‡æ˜æ ‡è®°çš„æ³¨è§£æ˜¯å¯ä»¥è¢«è‡ªåŠ¨ç»§æ‰¿çš„ã€‚ </p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@Documented</span><br><span class="hljs-variable">@Retention</span>(RetentionPolicy.RUNTIME)<br><span class="hljs-variable">@Target</span>(ElementType.ANNOTATION_TYPE)<br>public <span class="hljs-variable">@interface</span> Inherited &#123;<br>&#125;<br></code></pre></td></tr></table></figure><p> å…è®¸å­ç±»ç»§æ‰¿çˆ¶ç±»ä¸­çš„æ³¨è§£ã€‚å³æ‹¥æœ‰æ­¤æ³¨è§£çš„å…ƒç´ å…¶å­ç±»å¯ä»¥ç»§æ‰¿çˆ¶ç±»çš„æ³¨è§£ã€‚ </p><h3 id="å…«ã€ä¸ºæ³¨è§£å¢åŠ å±æ€§"><a href="#å…«ã€ä¸ºæ³¨è§£å¢åŠ å±æ€§" class="headerlink" title="å…«ã€ä¸ºæ³¨è§£å¢åŠ å±æ€§"></a>å…«ã€ä¸ºæ³¨è§£å¢åŠ å±æ€§</h3><p>ã€€ã€€æ³¨è§£å¯ä»¥çœ‹æˆæ˜¯ä¸€ç§<code>ç‰¹æ®Šçš„ç±»</code>ï¼Œæ—¢ç„¶æ˜¯ç±»ï¼Œé‚£è‡ªç„¶å¯ä»¥ä¸ºç±»æ·»åŠ å±æ€§</p><h4 id="8-1-æ·»åŠ å±æ€§"><a href="#8-1-æ·»åŠ å±æ€§" class="headerlink" title="8.1.æ·»åŠ å±æ€§"></a>8.<strong>1.æ·»åŠ å±æ€§</strong></h4><p>ã€€<strong>è¯­æ³•ï¼šç±»å‹ å±æ€§å();</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> cn.kongwei_liao.annotation;<br> <br><span class="hljs-keyword">import</span> java.lang.annotation.ElementType;<br><span class="hljs-keyword">import</span> java.lang.annotation.Retention;<br><span class="hljs-keyword">import</span> java.lang.annotation.RetentionPolicy;<br><span class="hljs-keyword">import</span> java.lang.annotation.Target;<br><span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="hljs-comment">//Retentionæ³¨è§£å†³å®šMyAnnotationæ³¨è§£çš„ç”Ÿå‘½å‘¨æœŸ</span><br><span class="hljs-meta">@Target( &#123; ElementType.METHOD, ElementType.TYPE &#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> MyAnnotation &#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * å®šä¹‰åŸºæœ¬å±æ€§</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function">String <span class="hljs-title">color</span><span class="hljs-params">()</span></span>;<span class="hljs-comment">//è¿™ä¸æ˜¯å£°æ˜çš„æ–¹æ³•å—ï¼Œä¸ºä»€ä¹ˆåœ¨åœ¨æ³¨è§£ä¸­ç§°ä¸ºå±æ€§**Q1**</span><br>&#125;<br></code></pre></td></tr></table></figure><p>ã€€ã€€å…¶å®ä»ä»£ç çš„å†™æ³•ä¸Šæ¥çœ‹ï¼Œæ³¨è§£æ›´åƒæ˜¯ä¸€ç§<code>ç‰¹æ®Šçš„æ¥å£</code>ï¼Œæ³¨è§£çš„å±æ€§å®šä¹‰æ–¹å¼å°±å’Œæ¥å£ä¸­å®šä¹‰æ–¹æ³•çš„æ–¹å¼ä¸€æ ·ï¼Œè€Œ<code>åº”ç”¨äº†æ³¨è§£çš„ç±»å¯ä»¥è®¤ä¸ºæ˜¯å®ç°äº†è¿™ä¸ªç‰¹æ®Šçš„æ¥å£</code></p><h4 id="8-2-åº”ç”¨å±æ€§"><a href="#8-2-åº”ç”¨å±æ€§" class="headerlink" title="8.2.åº”ç”¨å±æ€§"></a>8.<strong>2.åº”ç”¨å±æ€§</strong></h4><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">package</span> cn.kongwei_liao.<span class="hljs-keyword">annotation</span>;<br><br><span class="hljs-meta">@MyAnnotation(color=<span class="hljs-meta-string">&quot;red&quot;</span>)</span><span class="hljs-comment">//åº”ç”¨MyAnnotationæ³¨è§£çš„colorå±æ€§   **Q1 without A**</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyAnnotationTest</span> </span>&#123;<br>    <span class="hljs-keyword">public</span> static void main(String[] args) &#123;<br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * ç”¨åå°„æ–¹å¼è·å¾—æ³¨è§£å¯¹åº”çš„å®ä¾‹å¯¹è±¡åï¼Œåœ¨é€šè¿‡è¯¥å¯¹è±¡è°ƒç”¨å±æ€§å¯¹åº”çš„æ–¹æ³•</span><br><span class="hljs-comment">        */</span><br>        MyAnnotation <span class="hljs-keyword">annotation</span> = (MyAnnotation) MyAnnotationTest.<span class="hljs-keyword">class</span>.getAnnotation(MyAnnotation.<span class="hljs-keyword">class</span>);<br>        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-keyword">annotation</span>.color());<span class="hljs-comment">//è¾“å‡ºred</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="8-3-ä¸ºå±æ€§æŒ‡å®šç¼ºçœå€¼-é»˜è®¤å€¼"><a href="#8-3-ä¸ºå±æ€§æŒ‡å®šç¼ºçœå€¼-é»˜è®¤å€¼" class="headerlink" title="8.3.ä¸ºå±æ€§æŒ‡å®šç¼ºçœå€¼(é»˜è®¤å€¼)"></a>8.3.<strong>ä¸ºå±æ€§æŒ‡å®šç¼ºçœå€¼(é»˜è®¤å€¼)</strong></h4><p>ã€€ã€€<strong>è¯­æ³•ï¼šç±»å‹ å±æ€§å() default é»˜è®¤å€¼;</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> cn.kongwei_liao.annotation;<br><br><span class="hljs-keyword">import</span> java.lang.annotation.ElementType;<br><span class="hljs-keyword">import</span> java.lang.annotation.Retention;<br><span class="hljs-keyword">import</span> java.lang.annotation.RetentionPolicy;<br><span class="hljs-keyword">import</span> java.lang.annotation.Target;<br><br><span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span><span class="hljs-comment">//Retentionæ³¨è§£å†³å®šMyAnnotationæ³¨è§£çš„ç”Ÿå‘½å‘¨æœŸ</span><br><span class="hljs-meta">@Target( &#123; ElementType.METHOD, ElementType.TYPE &#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> MyAnnotation &#123;<br>    <span class="hljs-function">String <span class="hljs-title">color</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> &quot;blue&quot;</span>;<span class="hljs-comment">//ä¸ºå±æ€§æŒ‡å®šç¼ºçœå€¼   **Q1**</span><br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight d"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs d"><span class="hljs-keyword">package</span> cn.kongwei_liao.annotation;<br><br><span class="hljs-keyword">@MyAnnotation</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> MyAnnotationTest &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> main(String[] args) &#123;<br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * ç”¨åå°„æ–¹å¼è·å¾—æ³¨è§£å¯¹åº”çš„å®ä¾‹å¯¹è±¡åï¼Œåœ¨é€šè¿‡è¯¥å¯¹è±¡è°ƒç”¨å±æ€§å¯¹åº”çš„æ–¹æ³•</span><br><span class="hljs-comment">         */</span><br>         MyAnnotation annotation = (MyAnnotation) MyAnnotationTest.<span class="hljs-keyword">class</span>.getAnnotation(MyAnnotation.<span class="hljs-keyword">class</span>);<br>         System.<span class="hljs-keyword">out</span>.println(annotation.color());<span class="hljs-comment">//è¾“å‡ºcolorå±æ€§çš„é»˜è®¤å€¼ï¼šblue</span><br>        <br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="8-4-valueå±æ€§"><a href="#8-4-valueå±æ€§" class="headerlink" title="8.4.valueå±æ€§"></a><strong>8.4.valueå±æ€§</strong></h4><p>ã€€ã€€å¦‚æœä¸€ä¸ª<code>æ³¨è§£ä¸­æœ‰ä¸€ä¸ªåç§°ä¸ºvalueçš„å±æ€§</code>ï¼Œä¸”ä½ åªæƒ³è®¾ç½®valueå±æ€§(å³å…¶ä»–å±æ€§éƒ½é‡‡ç”¨é»˜è®¤å€¼æˆ–è€…ä½ åªæœ‰ä¸€ä¸ªvalueå±æ€§)ï¼Œé‚£ä¹ˆå¯ä»¥çœç•¥æ‰â€œvalue=â€éƒ¨åˆ†ã€‚</p><p>ã€€ã€€ä¾‹å¦‚ï¼š@SuppressWarnings(â€œdeprecationâ€)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> cn.kongwei_liao.annotation;<br><br><span class="hljs-keyword">import</span> java.lang.annotation.ElementType;<br><span class="hljs-keyword">import</span> java.lang.annotation.Retention;<br><span class="hljs-keyword">import</span> java.lang.annotation.RetentionPolicy;<br><span class="hljs-keyword">import</span> java.lang.annotation.Target;<br><br><span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="hljs-comment">//Retentionæ³¨è§£å†³å®šMyAnnotationæ³¨è§£çš„ç”Ÿå‘½å‘¨æœŸ</span><br><span class="hljs-meta">@Target( &#123; ElementType.METHOD, ElementType.TYPE &#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> MyAnnotation &#123;<br>    <span class="hljs-function">String <span class="hljs-title">color</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> &quot;blue&quot;</span>;<span class="hljs-comment">//ä¸ºå±æ€§æŒ‡å®šç¼ºçœå€¼</span><br>    <span class="hljs-function">String <span class="hljs-title">value</span><span class="hljs-params">()</span></span>;<span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªåç§°ä¸ºvalueçš„å±æ€§    **Q2ä¸€å®šæ˜¯å«valueå±æ€§åå—**</span><br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">package</span> cn.kongwei_liao.<span class="hljs-keyword">annotation</span>;<br><br><span class="hljs-meta">@MyAnnotation(<span class="hljs-meta-string">&quot;kongwei_liao&quot;</span>)</span><span class="hljs-comment">//ç­‰ä»·äº@MyAnnotation(value=&quot;kongwei_liao&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyAnnotationTest</span> </span>&#123;<br>    <span class="hljs-keyword">public</span> static void main(String[] args) &#123;<br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * ç”¨åå°„æ–¹å¼è·å¾—æ³¨è§£å¯¹åº”çš„å®ä¾‹å¯¹è±¡åï¼Œåœ¨é€šè¿‡è¯¥å¯¹è±¡è°ƒç”¨å±æ€§å¯¹åº”çš„æ–¹æ³•</span><br><span class="hljs-comment">         */</span><br>        MyAnnotation <span class="hljs-keyword">annotation</span> = (MyAnnotation) MyAnnotationTest.<span class="hljs-keyword">class</span>.getAnnotation(MyAnnotation.<span class="hljs-keyword">class</span>);<br>        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-keyword">annotation</span>.color());<span class="hljs-comment">//è¾“å‡ºcolorå±æ€§çš„é»˜è®¤å€¼ï¼šblue</span><br>        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-keyword">annotation</span>.value());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ä¹ã€ä¸ºæ³¨è§£å¢åŠ é«˜çº§å±æ€§"><a href="#ä¹ã€ä¸ºæ³¨è§£å¢åŠ é«˜çº§å±æ€§" class="headerlink" title="ä¹ã€ä¸ºæ³¨è§£å¢åŠ é«˜çº§å±æ€§"></a>ä¹ã€ä¸ºæ³¨è§£å¢åŠ é«˜çº§å±æ€§</h3><h4 id="9-1ã€-æ•°ç»„ç±»å‹çš„å±æ€§"><a href="#9-1ã€-æ•°ç»„ç±»å‹çš„å±æ€§" class="headerlink" title="9.1ã€**æ•°ç»„ç±»å‹çš„å±æ€§**"></a>9.1ã€**<code>æ•°ç»„ç±»å‹</code>çš„å±æ€§**</h4><ul><li>å¢åŠ æ•°ç»„ç±»å‹çš„å±æ€§ï¼šint[] arrayAttr() default {1,2,4};</li><li>åº”ç”¨æ•°ç»„ç±»å‹çš„å±æ€§ï¼š@MyAnnotation(arrayAttr={2,4,5})</li><li>å¦‚æœæ•°ç»„å±æ€§åªæœ‰ä¸€ä¸ªå€¼ï¼Œè¿™æ—¶å€™å±æ€§å€¼éƒ¨åˆ†å¯ä»¥çœç•¥å¤§æ‹¬å·ï¼Œå¦‚ï¼š@MyAnnotation(arrayAttr=2)ï¼Œè¿™å°±è¡¨ç¤ºæ•°ç»„å±æ€§åªæœ‰ä¸€ä¸ªå€¼ï¼Œå€¼ä¸º2</li></ul><h4 id="9-2-ã€-æšä¸¾ç±»å‹çš„å±æ€§"><a href="#9-2-ã€-æšä¸¾ç±»å‹çš„å±æ€§" class="headerlink" title="9.2.ã€**æšä¸¾ç±»å‹çš„å±æ€§**"></a>9.2.ã€**<code>æšä¸¾ç±»å‹</code>çš„å±æ€§**</h4><ul><li>å¢åŠ æšä¸¾ç±»å‹çš„å±æ€§ï¼šEumTrafficLamp lamp() default EumTrafficLamp.RED;</li><li>åº”ç”¨æšä¸¾ç±»å‹çš„å±æ€§ï¼š@MyAnnotation(lamp=EumTrafficLamp.GREEN)</li></ul><h4 id="9-3ã€-æ³¨è§£ç±»å‹çš„å±æ€§"><a href="#9-3ã€-æ³¨è§£ç±»å‹çš„å±æ€§" class="headerlink" title="9.3ã€**æ³¨è§£ç±»å‹çš„å±æ€§**"></a>9.3ã€**<code>æ³¨è§£ç±»å‹</code>çš„å±æ€§**</h4><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs haxe"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * MetaAnnotationæ³¨è§£ç±»ä¸ºå…ƒæ³¨è§£</span><br><span class="hljs-comment"> * @author kongwei_liao</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> @<span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">MetaAnnotation</span> </span>&#123;<br>    <span class="hljs-keyword">String</span> value();<span class="hljs-comment">//å…ƒæ³¨è§£MetaAnnotationè®¾ç½®æœ‰ä¸€ä¸ªå”¯ä¸€çš„å±æ€§value</span><br>&#125;<br></code></pre></td></tr></table></figure><p>ã€€ã€€ä¸ºæ³¨è§£æ·»åŠ ä¸€ä¸ªæ³¨è§£ç±»å‹çš„å±æ€§,å¹¶æŒ‡å®šæ³¨è§£å±æ€§çš„ç¼ºçœå€¼ï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs scss">MetaAnnotation annotationAttr() default <span class="hljs-keyword">@MetaAnnotation</span>(<span class="hljs-string">&quot;xdp&quot;</span>);<br></code></pre></td></tr></table></figure><h3 id="åã€æ³¨è§£ç»¼åˆæµ‹è¯•"><a href="#åã€æ³¨è§£ç»¼åˆæµ‹è¯•" class="headerlink" title="åã€æ³¨è§£ç»¼åˆæµ‹è¯•"></a>åã€æ³¨è§£ç»¼åˆæµ‹è¯•</h3><p>EumTrafficLamp.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> cn.kongwei_liao.annotation;<br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * äº¤é€šä¿¡å·ç¯é¢œè‰²æšä¸¾</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> kongwei_liao</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">EumTrafficLamp</span> </span>&#123;<br>    RED,<span class="hljs-comment">//çº¢</span><br>    YELLOW,<span class="hljs-comment">//é»„</span><br>    GREEN<span class="hljs-comment">//ç»¿</span><br>&#125;<br></code></pre></td></tr></table></figure><p>MetaAnnotation.java</p><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs haxe"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * MetaAnnotationæ³¨è§£ç±»ä¸ºå…ƒæ³¨è§£</span><br><span class="hljs-comment"> * @author kongwei_liao</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> @<span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">MetaAnnotation</span> </span>&#123;<br>    <span class="hljs-keyword">String</span> value();<span class="hljs-comment">//å…ƒæ³¨è§£MetaAnnotationè®¾ç½®æœ‰ä¸€ä¸ªå”¯ä¸€çš„å±æ€§value</span><br>&#125;<br></code></pre></td></tr></table></figure><p>MyAnnotation.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> cn.kongwei_liao.annotation;<br><br><span class="hljs-keyword">import</span> java.lang.annotation.ElementType;<br><span class="hljs-keyword">import</span> java.lang.annotation.Retention;<br><span class="hljs-keyword">import</span> java.lang.annotation.RetentionPolicy;<br><span class="hljs-keyword">import</span> java.lang.annotation.Target;<br><br><span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="hljs-comment">//Retentionæ³¨è§£å†³å®šMyAnnotationæ³¨è§£çš„ç”Ÿå‘½å‘¨æœŸ</span><br><span class="hljs-meta">@Target(&#123;ElementType.METHOD, ElementType.TYPE&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> MyAnnotation &#123;<br>    <span class="hljs-function">String <span class="hljs-title">color</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> &quot;blue&quot;</span>;<span class="hljs-comment">//ä¸ºå±æ€§æŒ‡å®šç¼ºçœå€¼</span><br>   <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ä¸ºæ³¨è§£æ·»åŠ valueå±æ€§ï¼Œè¿™ä¸ªvalueå±æ€§å¾ˆç‰¹æ®Šï¼Œå¦‚æœä¸€ä¸ªæ³¨è§£ä¸­åªæœ‰ä¸€ä¸ªvalueå±æ€§è¦è®¾ç½®ï¼Œ</span><br><span class="hljs-comment">     * é‚£ä¹ˆåœ¨è®¾ç½®æ³¨è§£çš„å±æ€§å€¼æ—¶ï¼Œå¯ä»¥çœç•¥å±æ€§åå’Œç­‰å·ä¸å†™ï¼Œ ç›´æ¥å†™å±æ€§å€¼ï¼Œå¦‚<span class="hljs-doctag">@SuppressWarnings</span>(&quot;deprecation&quot;)ï¼Œ</span><br><span class="hljs-comment">     * è¿™é‡Œçš„MyAnnotationæ³¨è§£è®¾ç½®äº†ä¸¤ä¸ªStringç±»å‹çš„å±æ€§ï¼Œcolorå’Œvalueï¼Œ</span><br><span class="hljs-comment">     * å› ä¸ºcolorå±æ€§æŒ‡å®šæœ‰ç¼ºçœå€¼ï¼Œvalueå±æ€§åˆæ˜¯å±äºç‰¹æ®Šçš„å±æ€§ï¼Œå› æ­¤ä½¿ç”¨MyAnnotationæ³¨è§£æ—¶</span><br><span class="hljs-comment">     * å¯ä»¥è¿™æ ·ä½¿ç”¨MyAnnotationæ³¨è§£ï¼š&quot;<span class="hljs-doctag">@MyAnnotation</span>(color=&quot;red&quot;,value=&quot;xdp&quot;)&quot;</span><br><span class="hljs-comment">     * ä¹Ÿå¯ä»¥è¿™æ ·ä½¿ç”¨ï¼š&quot;<span class="hljs-doctag">@MyAnnotation</span>(&quot;kongwei_liao&quot;)&quot;ï¼Œè¿™æ ·å†™å°±è¡¨ç¤ºMyAnnotationæ³¨è§£åªæœ‰ä¸€ä¸ªvalueå±æ€§è¦è®¾ç½®ï¼Œcolorå±æ€§é‡‡ç”¨ç¼ºçœå€¼</span><br><span class="hljs-comment">     * å½“ä¸€ä¸ªæ³¨è§£åªæœ‰ä¸€ä¸ªvalueå±æ€§è¦è®¾ç½®æ—¶ï¼Œæ˜¯å¯ä»¥çœç•¥&quot;value=&quot;çš„</span><br><span class="hljs-comment">     */</span><br>     <span class="hljs-function">String <span class="hljs-title">value</span><span class="hljs-params">()</span></span>;<span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªåç§°ä¸ºvalueçš„å±æ€§</span><br>     <span class="hljs-comment">//æ·»åŠ ä¸€ä¸ªintç±»å‹æ•°ç»„çš„å±æ€§</span><br>     <span class="hljs-keyword">int</span>[] arrayAttr() <span class="hljs-keyword">default</span> &#123;<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">4</span>&#125;;<br>     <span class="hljs-comment">//æ·»åŠ ä¸€ä¸ªæšä¸¾ç±»å‹çš„å±æ€§ï¼Œå¹¶æŒ‡å®šæšä¸¾å±æ€§çš„ç¼ºçœå€¼ï¼Œç¼ºçœå€¼åªèƒ½ä»æšä¸¾ç±»EumTrafficLampä¸­å®šä¹‰çš„æšä¸¾å¯¹è±¡ä¸­å–å‡ºä»»æ„ä¸€ä¸ªä½œä¸ºç¼ºçœå€¼</span><br>     <span class="hljs-function">EumTrafficLamp <span class="hljs-title">lamp</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> EumTrafficLamp.RED</span>;<br>     <span class="hljs-comment">//ä¸ºæ³¨è§£æ·»åŠ ä¸€ä¸ªæ³¨è§£ç±»å‹çš„å±æ€§,å¹¶æŒ‡å®šæ³¨è§£å±æ€§çš„ç¼ºçœå€¼</span><br>     <span class="hljs-function">MetaAnnotation <span class="hljs-title">annotationAttr</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> @<span class="hljs-title">MetaAnnotation</span><span class="hljs-params">(<span class="hljs-string">&quot;xdp&quot;</span>)</span></span>;<br> <br>&#125;<br></code></pre></td></tr></table></figure><p>MyAnnotationTest.java</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">package</span> cn.kongwei_liao.<span class="hljs-keyword">annotation</span>;<br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * è¿™é‡Œæ˜¯å°†æ–°åˆ›å»ºå¥½çš„æ³¨è§£ç±»MyAnnotationæ ‡è®°åˆ°AnnotaionTestç±»ä¸Šï¼Œ</span><br><span class="hljs-comment"> * å¹¶åº”ç”¨äº†æ³¨è§£ç±»MyAnnotationä¸­å®šä¹‰å„ç§ä¸åŒç±»å‹çš„çš„å±æ€§</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@MyAnnotation(</span><br><span class="hljs-meta">        color=<span class="hljs-meta-string">&quot;red&quot;</span>,</span><br><span class="hljs-meta">        value=<span class="hljs-meta-string">&quot;kongwei_liao&quot;</span>,</span><br><span class="hljs-meta">        arrayAttr=&#123;3,5,6&#125;,</span><br><span class="hljs-meta">       lamp=EumTrafficLamp.GREEN,</span><br><span class="hljs-meta">       annotationAttr=@MetaAnnotation(<span class="hljs-meta-string">&quot;gacl&quot;</span>)</span><br>        )<br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyAnnotationTest</span> </span>&#123;<br>    <span class="hljs-meta">@MyAnnotation(<span class="hljs-meta-string">&quot;å°†MyAnnotationæ³¨è§£æ ‡æ³¨åˆ°mainæ–¹æ³•ä¸Š&quot;</span>)</span><br>    <span class="hljs-keyword">public</span> static void main(String[] args) &#123;<br>       <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * è¿™é‡Œæ˜¯æ£€æŸ¥Annotationç±»æ˜¯å¦æœ‰æ³¨è§£ï¼Œè¿™é‡Œéœ€è¦ä½¿ç”¨åå°„æ‰èƒ½å®Œæˆå¯¹Annotationç±»çš„æ£€æŸ¥</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-keyword">if</span>(MyAnnotationTest.<span class="hljs-keyword">class</span>.isAnnotationPresent(MyAnnotation.<span class="hljs-keyword">class</span>)) &#123;<br>            <span class="hljs-comment">/**</span><br><span class="hljs-comment">             * ç”¨åå°„æ–¹å¼è·å¾—æ³¨è§£å¯¹åº”çš„å®ä¾‹å¯¹è±¡åï¼Œåœ¨é€šè¿‡è¯¥å¯¹è±¡è°ƒç”¨å±æ€§å¯¹åº”çš„æ–¹æ³•</span><br><span class="hljs-comment">             * MyAnnotationæ˜¯ä¸€ä¸ªç±»ï¼Œè¿™ä¸ªç±»çš„å®ä¾‹å¯¹è±¡annotationæ˜¯é€šè¿‡åå°„å¾—åˆ°çš„ï¼Œè¿™ä¸ªå®ä¾‹å¯¹è±¡æ˜¯å¦‚ä½•åˆ›å»ºçš„å‘¢ï¼Ÿ</span><br><span class="hljs-comment">             * ä¸€æ—¦åœ¨æŸä¸ªç±»ä¸Šä½¿ç”¨äº†<span class="hljs-doctag">@MyAnnotation</span>ï¼Œé‚£ä¹ˆè¿™ä¸ªMyAnnotationç±»çš„å®ä¾‹å¯¹è±¡annotationå°±ä¼šè¢«åˆ›å»ºå‡ºæ¥äº†</span><br><span class="hljs-comment">             */</span><br>            MyAnnotation <span class="hljs-keyword">annotation</span> = (MyAnnotation) MyAnnotationTest.<span class="hljs-keyword">class</span>.getAnnotation(MyAnnotation.<span class="hljs-keyword">class</span>);<br>            System.<span class="hljs-keyword">out</span>.println(<span class="hljs-keyword">annotation</span>.color());<span class="hljs-comment">//è¾“å‡ºcolorå±æ€§çš„é»˜è®¤å€¼ï¼šred</span><br>            System.<span class="hljs-keyword">out</span>.println(<span class="hljs-keyword">annotation</span>.value());<span class="hljs-comment">//è¾“å‡ºvalueå±æ€§çš„é»˜è®¤å€¼ï¼škongwei_liao</span><br>            System.<span class="hljs-keyword">out</span>.println(<span class="hljs-keyword">annotation</span>.arrayAttr().length);<span class="hljs-comment">//è¿™é‡Œè¾“å‡ºçš„æ•°ç»„å±æ€§çš„é•¿åº¦çš„ç»“æœä¸ºï¼š3ï¼Œæ•°ç»„å±æ€§æœ‰ä¸‰ä¸ªå…ƒç´ ï¼Œå› æ­¤æ•°ç»„çš„é•¿åº¦ä¸º3</span><br>            System.<span class="hljs-keyword">out</span>.println(<span class="hljs-keyword">annotation</span>.lamp());<span class="hljs-comment">//è¿™é‡Œè¾“å‡ºçš„æšä¸¾å±æ€§å€¼ä¸ºï¼šGREEN</span><br>System.<span class="hljs-keyword">out</span>.println(<span class="hljs-keyword">annotation</span>.annotationAttr().value());<span class="hljs-comment">//è¿™é‡Œè¾“å‡ºçš„æ³¨è§£å±æ€§å€¼:gacl</span><br>            <br>            MetaAnnotation ma = <span class="hljs-keyword">annotation</span>.annotationAttr();<span class="hljs-comment">//annotationæ˜¯MyAnnotationç±»çš„ä¸€ä¸ªå®ä¾‹å¯¹è±¡</span><br>            System.<span class="hljs-keyword">out</span>.println(ma.value());<span class="hljs-comment">//è¾“å‡ºçš„ç»“æœä¸ºï¼šgacl</span><br><br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>é€šè¿‡å¼•å…¥è‡ªå®šä¹‰HTMLç”Ÿæˆå™¨çš„æ³¨è§£ç±»ï¼Œåœ¨ç±»ä¸­æ ‡æ³¨å‡ºå­—æ®µä»¥åŠå­—æ®µçš„åç§°ï¼ˆæ ‡ç­¾ï¼‰ï¼Œåœ¨è¿è¡Œæ—¶åŠ¨æ€è¯»å–ç±»ä¸­çš„æ³¨è§£ä¿¡æ¯ï¼Œç›´æ¥ç”ŸæˆHTMLé¡µé¢ï¼Œå¦‚æ­¤å¯çœå»å¤§é‡çš„JSPé¡µé¢ç¼–å†™å·¥ä½œã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>æ³¨è§£(Annotation)</tag>
      
      <tag>Retentionå…ƒæ³¨è§£</tag>
      
      <tag>Targetå…ƒæ³¨è§£</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Vue.js-I</title>
    <link href="/2019/10/31/Vue-js-I/"/>
    <url>/2019/10/31/Vue-js-I/</url>
    
    <content type="html"><![CDATA[<h1 id="Vue-js-I"><a href="#Vue-js-I" class="headerlink" title="Vue.js - I"></a>Vue.js - I</h1><p>å­¦ä¹ VueåŸºæœ¬çš„è¯­æ³•å’Œæ¦‚å¿µï¼›æ‰“åŒ…å·¥å…· Webpack , Gulp<br>ä»¥é¡¹ç›®é©±åŠ¨å®è·µï¼›</p><h3 id="ä»€ä¹ˆæ˜¯Vue-js"><a href="#ä»€ä¹ˆæ˜¯Vue-js" class="headerlink" title="ä»€ä¹ˆæ˜¯Vue.js"></a>ä»€ä¹ˆæ˜¯Vue.js</h3><ul><li><p>Vue.js æ˜¯ç›®å‰æœ€ç«çš„ä¸€ä¸ªå‰ç«¯æ¡†æ¶ï¼ŒReactæ˜¯æœ€æµè¡Œçš„ä¸€ä¸ªå‰ç«¯æ¡†æ¶ï¼ˆReacté™¤äº†å¼€å‘ç½‘ç«™ï¼Œè¿˜å¯ä»¥å¼€å‘æ‰‹æœºAppï¼Œ Vueè¯­æ³•ä¹Ÿæ˜¯å¯ä»¥ç”¨äºè¿›è¡Œæ‰‹æœºAppå¼€å‘çš„ï¼Œéœ€è¦å€ŸåŠ©äºWeexï¼‰</p></li><li><p>Vue.js æ˜¯å‰ç«¯çš„<strong>ä¸»æµæ¡†æ¶ä¹‹ä¸€</strong>ï¼Œå’ŒAngular.jsã€React.js ä¸€èµ·ï¼Œå¹¶æˆä¸ºå‰ç«¯ä¸‰å¤§ä¸»æµæ¡†æ¶ï¼</p></li><li><p>Vue.js æ˜¯ä¸€å¥—æ„å»ºç”¨æˆ·ç•Œé¢çš„æ¡†æ¶ï¼Œ<strong>åªå…³æ³¨è§†å›¾å±‚</strong>ï¼Œå®ƒä¸ä»…æ˜“äºä¸Šæ‰‹ï¼Œè¿˜ä¾¿äºä¸ç¬¬ä¸‰æ–¹åº“æˆ–æ—¢æœ‰é¡¹ç›®æ•´åˆã€‚ï¼ˆVueæœ‰é…å¥—çš„ç¬¬ä¸‰æ–¹ç±»åº“ï¼Œå¯ä»¥æ•´åˆèµ·æ¥åšå¤§å‹é¡¹ç›®çš„å¼€å‘ï¼‰</p></li><li><p>å‰ç«¯çš„ä¸»è¦å·¥ä½œï¼Ÿä¸»è¦è´Ÿè´£MVCä¸­çš„Vè¿™ä¸€å±‚ï¼›ä¸»è¦å·¥ä½œå°±æ˜¯å’Œç•Œé¢æ‰“äº¤é“ï¼Œæ¥åˆ¶ä½œå‰ç«¯é¡µé¢æ•ˆæœï¼›</p></li></ul><h2 id="ä¸ºä»€ä¹ˆè¦å­¦ä¹ æµè¡Œæ¡†æ¶"><a href="#ä¸ºä»€ä¹ˆè¦å­¦ä¹ æµè¡Œæ¡†æ¶" class="headerlink" title="ä¸ºä»€ä¹ˆè¦å­¦ä¹ æµè¡Œæ¡†æ¶"></a>ä¸ºä»€ä¹ˆè¦å­¦ä¹ æµè¡Œæ¡†æ¶</h2><ul><li>ä¼ä¸šä¸ºäº†æé«˜å¼€å‘æ•ˆç‡ï¼šåœ¨ä¼ä¸šä¸­ï¼Œæ—¶é—´å°±æ˜¯æ•ˆç‡ï¼Œæ•ˆç‡å°±æ˜¯é‡‘é’±ï¼›</li></ul><ul><li>ä¼ä¸šä¸­ï¼Œä½¿ç”¨æ¡†æ¶ï¼Œèƒ½å¤Ÿæé«˜å¼€å‘çš„æ•ˆç‡ï¼›</li></ul><ul><li>æé«˜å¼€å‘æ•ˆç‡çš„å‘å±•å†ç¨‹ï¼šåŸç”ŸJS -&gt; Jqueryä¹‹ç±»çš„ç±»åº“ -&gt; å‰ç«¯æ¨¡æ¿å¼•æ“ -&gt; Angular.js / Vue.jsï¼ˆèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬å‡å°‘ä¸å¿…è¦çš„DOMæ“ä½œï¼›æé«˜æ¸²æŸ“æ•ˆç‡ï¼›åŒå‘æ•°æ®ç»‘å®šçš„æ¦‚å¿µã€é€šè¿‡æ¡†æ¶æä¾›çš„æŒ‡ä»¤ï¼Œæˆ‘ä»¬å‰ç«¯ç¨‹åºå‘˜åªéœ€è¦å…³å¿ƒæ•°æ®çš„ä¸šåŠ¡é€»è¾‘ï¼Œä¸å†å…³å¿ƒDOMæ˜¯å¦‚ä½•æ¸²æŸ“çš„äº†ã€‘ï¼‰</li><li>åœ¨Vueä¸­ï¼Œä¸€ä¸ªæ ¸å¿ƒçš„æ¦‚å¿µï¼Œå°±æ˜¯è®©ç”¨æˆ·ä¸å†æ“ä½œDOMå…ƒç´ ï¼Œè§£æ”¾äº†ç”¨æˆ·çš„åŒæ‰‹ï¼Œè®©ç¨‹åºå‘˜å¯ä»¥æ›´å¤šçš„æ—¶é—´å»å…³æ³¨ä¸šåŠ¡é€»è¾‘ï¼›</li></ul><ul><li>å¢å¼ºè‡ªå·±å°±ä¸šæ—¶å€™çš„ç«äº‰åŠ›</li></ul><ul><li>äººæ— æˆ‘æœ‰ï¼Œäººæœ‰æˆ‘ä¼˜</li><li>ä½ å¹³æ—¶ä¸å¿™çš„æ—¶å€™ï¼Œéƒ½åœ¨å¹²å˜›ï¼Ÿ</li></ul><h2 id="æ¡†æ¶å’Œåº“çš„åŒºåˆ«"><a href="#æ¡†æ¶å’Œåº“çš„åŒºåˆ«" class="headerlink" title="æ¡†æ¶å’Œåº“çš„åŒºåˆ«"></a>æ¡†æ¶å’Œåº“çš„åŒºåˆ«</h2><ul><li>æ¡†æ¶ï¼šæ˜¯ä¸€å¥—å®Œæ•´çš„è§£å†³æ–¹æ¡ˆï¼›å¯¹é¡¹ç›®çš„ä¾µå…¥æ€§è¾ƒå¤§ï¼Œé¡¹ç›®å¦‚æœéœ€è¦æ›´æ¢æ¡†æ¶ï¼Œåˆ™éœ€è¦é‡æ–°æ¶æ„æ•´ä¸ªé¡¹ç›®ã€‚</li></ul><ul><li>node ä¸­çš„ expressï¼›</li></ul><ul><li>åº“ï¼ˆæ’ä»¶ï¼‰ï¼šæä¾›æŸä¸€ä¸ªå°åŠŸèƒ½ï¼Œå¯¹é¡¹ç›®çš„ä¾µå…¥æ€§è¾ƒå°ï¼Œå¦‚æœæŸä¸ªåº“æ— æ³•å®ŒæˆæŸäº›éœ€æ±‚ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åˆ‡æ¢åˆ°å…¶å®ƒåº“å®ç°éœ€æ±‚ã€‚</li></ul><ul><li><ol><li>ä»Jquery åˆ‡æ¢åˆ° Zepto</li></ol></li><li><ol start="2"><li>ä» EJS åˆ‡æ¢åˆ° art-template</li></ol></li></ul><h2 id="Nodeï¼ˆåç«¯ï¼‰ä¸­çš„-MVC-ä¸-å‰ç«¯ä¸­çš„-MVVM-ä¹‹é—´çš„åŒºåˆ«"><a href="#Nodeï¼ˆåç«¯ï¼‰ä¸­çš„-MVC-ä¸-å‰ç«¯ä¸­çš„-MVVM-ä¹‹é—´çš„åŒºåˆ«" class="headerlink" title="Nodeï¼ˆåç«¯ï¼‰ä¸­çš„ MVC ä¸ å‰ç«¯ä¸­çš„ MVVM ä¹‹é—´çš„åŒºåˆ«"></a>Nodeï¼ˆåç«¯ï¼‰ä¸­çš„ MVC ä¸ å‰ç«¯ä¸­çš„ MVVM ä¹‹é—´çš„åŒºåˆ«</h2><ul><li><p>MVC æ˜¯åç«¯çš„åˆ†å±‚å¼€å‘æ¦‚å¿µï¼›</p></li><li><p>MVVMæ˜¯å‰ç«¯è§†å›¾å±‚çš„æ¦‚å¿µï¼Œä¸»è¦å…³æ³¨äº è§†å›¾å±‚åˆ†ç¦»ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼šMVVMæŠŠå‰ç«¯çš„è§†å›¾å±‚ï¼Œåˆ†ä¸ºäº† ä¸‰éƒ¨åˆ† Model, View , VM ViewModel</p></li><li><p>ä¸ºä»€ä¹ˆæœ‰äº†MVCè¿˜è¦æœ‰MVVM</p></li></ul><p><img src="/2019/10/31/Vue-js-I/MVC%E5%92%8CMVVM%E7%9A%84%E5%85%B3%E7%B3%BB%E5%9B%BE%E8%A7%A3.png" alt="1"></p><h2 id="Vue-js-åŸºæœ¬ä»£ç -å’Œ-MVVM-ä¹‹é—´çš„å¯¹åº”å…³ç³»ï¼ˆåŒä¸Šå›¾ï¼‰"><a href="#Vue-js-åŸºæœ¬ä»£ç -å’Œ-MVVM-ä¹‹é—´çš„å¯¹åº”å…³ç³»ï¼ˆåŒä¸Šå›¾ï¼‰" class="headerlink" title="Vue.js åŸºæœ¬ä»£ç  å’Œ MVVM ä¹‹é—´çš„å¯¹åº”å…³ç³»ï¼ˆåŒä¸Šå›¾ï¼‰"></a>Vue.js åŸºæœ¬ä»£ç  å’Œ MVVM ä¹‹é—´çš„å¯¹åº”å…³ç³»ï¼ˆåŒä¸Šå›¾ï¼‰</h2><h2 id="Vueä¹‹-åŸºæœ¬çš„ä»£ç ç»“æ„å’Œæ’å€¼è¡¨è¾¾å¼"><a href="#Vueä¹‹-åŸºæœ¬çš„ä»£ç ç»“æ„å’Œæ’å€¼è¡¨è¾¾å¼" class="headerlink" title="Vueä¹‹ - åŸºæœ¬çš„ä»£ç ç»“æ„å’Œæ’å€¼è¡¨è¾¾å¼"></a>Vueä¹‹ - <code>åŸºæœ¬çš„ä»£ç ç»“æ„</code>å’Œ<code>æ’å€¼è¡¨è¾¾å¼</code></h2><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span></span><br><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></span><br><span class="xml">  <span class="hljs-comment">&lt;!-- 1. å¯¼å…¥Vueçš„åŒ… --&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./lib/vue-2.4.0.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></span><br><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="xml">  <span class="hljs-comment">&lt;!-- å°†æ¥ new çš„Vueå®ä¾‹ï¼Œä¼šæ§åˆ¶è¿™ä¸ª å…ƒç´ ä¸­çš„æ‰€æœ‰å†…å®¹ --&gt;</span></span><br><span class="xml">  <span class="hljs-comment">&lt;!-- Vue å®ä¾‹æ‰€æ§åˆ¶çš„è¿™ä¸ªå…ƒç´ åŒºåŸŸï¼Œå°±æ˜¯æˆ‘ä»¬çš„ V  --&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">msg</span> &#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><span class="hljs-comment">&lt;!--</span></span><span class="hljs-template-variable">&#123;&#123;&#125;&#125;</span><span class="xml"><span class="hljs-comment">æ’å€¼è¡¨è¾¾å¼--&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">    // 2. åˆ›å»ºä¸€ä¸ªVueçš„å®ä¾‹</span><br><span class="xml">    // å½“æˆ‘ä»¬å¯¼å…¥åŒ…ä¹‹åï¼Œåœ¨æµè§ˆå™¨çš„å†…å­˜ä¸­ï¼Œå°±å¤šäº†ä¸€ä¸ª Vue æ„é€ å‡½æ•°</span><br><span class="xml">    //  æ³¨æ„ï¼šæˆ‘ä»¬ new å‡ºæ¥çš„è¿™ä¸ª vm å¯¹è±¡ï¼Œå°±æ˜¯æˆ‘ä»¬ MVVMä¸­çš„ VMè°ƒåº¦è€…</span><br><span class="xml">    var vm = new Vue(&#123;</span><br><span class="xml">      el: &#x27;#app&#x27;,  // è¡¨ç¤ºï¼Œå½“å‰æˆ‘ä»¬ new çš„è¿™ä¸ª Vue å®ä¾‹ï¼Œè¦æ§åˆ¶é¡µé¢ä¸Šçš„å“ªä¸ªåŒºåŸŸ</span><br><span class="xml">      // è¿™é‡Œçš„ data å°±æ˜¯ MVVMä¸­çš„ Mï¼Œä¸“é—¨ç”¨æ¥ä¿å­˜ æ¯ä¸ªé¡µé¢çš„æ•°æ®çš„</span><br><span class="xml">      data: &#123; // data å±æ€§ä¸­ï¼Œå­˜æ”¾çš„æ˜¯ el ä¸­è¦ç”¨åˆ°çš„æ•°æ®</span><br><span class="xml">        msg: &#x27;æ¬¢è¿å­¦ä¹ Vue&#x27; // é€šè¿‡ Vue æä¾›çš„æŒ‡ä»¤ï¼Œå¾ˆæ–¹ä¾¿çš„å°±èƒ½æŠŠæ•°æ®æ¸²æŸ“åˆ°é¡µé¢ä¸Šï¼Œç¨‹åºå‘˜ä¸å†æ‰‹åŠ¨æ“ä½œDOMå…ƒç´ äº†ã€å‰ç«¯çš„Vueä¹‹ç±»çš„æ¡†æ¶ï¼Œä¸æå€¡æˆ‘ä»¬å»æ‰‹åŠ¨æ“ä½œDOMå…ƒç´ äº†ã€‘</span><br><span class="xml">      &#125;</span><br><span class="xml">    &#125;)</span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span><br><br><span class="xml"><span class="hljs-comment">&lt;!-- 1. å¦‚ä½•å®šä¹‰ä¸€ä¸ªåŸºæœ¬çš„Vueä»£ç ç»“æ„ --&gt;</span></span><br><span class="xml"><span class="hljs-comment">&lt;!-- 2. æ’å€¼è¡¨è¾¾å¼  --&gt;</span></span><br></code></pre></td></tr></table></figure><blockquote><p><strong>ä¹‹åçš„ä»£ç åŒºåŸŸä¼šçœç•¥bodyæ ‡ç­¾å¤–çš„å†…å®¹</strong></p></blockquote><h2 id="VueæŒ‡ä»¤ä¹‹v-cloak-v-textå’Œv-html"><a href="#VueæŒ‡ä»¤ä¹‹v-cloak-v-textå’Œv-html" class="headerlink" title="VueæŒ‡ä»¤ä¹‹v-cloak,v-textå’Œv-html"></a>VueæŒ‡ä»¤ä¹‹<code>v-cloak</code>,<code>v-text</code>å’Œ<code>v-html</code></h2><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span></span><br><span class="xml">    <span class="hljs-comment">&lt;!-- ä½¿ç”¨ v-cloak èƒ½å¤Ÿè§£å†³ æ’å€¼è¡¨è¾¾å¼é—ªçƒçš„é—®é¢˜ --&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">v-cloak</span>&gt;</span>++++++++ </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">msg</span> &#125;&#125;</span><span class="xml"> ----------<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><span class="hljs-comment">&lt;!-- æ’å€¼è¡¨è¾¾å¼é¢å¤–çš„å†…å®¹ä¸è¦†ç›– --&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">h4</span> <span class="hljs-attr">v-text</span>=<span class="hljs-string">&quot;msg&quot;</span>&gt;</span>==================<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span><span class="hljs-comment">&lt;!-- è§£æåˆ°æ­¤å¤„æ—¶=========è¢«msgå†…å®¹è¦†ç›–è¦†ç›– --&gt;</span></span><br><span class="xml">    <span class="hljs-comment">&lt;!-- é»˜è®¤ v-text æ˜¯æ²¡æœ‰é—ªçƒé—®é¢˜çš„ --&gt;</span></span><br><span class="xml">    <span class="hljs-comment">&lt;!-- v-textä¼šè¦†ç›–å…ƒç´ ä¸­åŸæœ¬çš„å†…å®¹ï¼Œä½†æ˜¯ æ’å€¼è¡¨è¾¾å¼ åªä¼šæ›¿æ¢è‡ªå·±çš„è¿™ä¸ªå ä½ç¬¦ï¼Œä¸ä¼šæŠŠ æ•´ä¸ªå…ƒç´ çš„å†…å®¹æ¸…ç©º --&gt;</span></span><br><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">msg2</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-comment">&lt;!--å½“ä½œæ™®é€šå­—ç¬¦ä¸²--&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-text</span>=<span class="hljs-string">&quot;msg2&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-comment">&lt;!--å½“ä½œæ™®é€šå­—ç¬¦ä¸²--&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-html</span>=<span class="hljs-string">&quot;msg2&quot;</span>&gt;</span>1212112<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-comment">&lt;!--å½“ä½œHTMLæ ‡ç­¾å†…å®¹--&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./lib/vue-2.4.0.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><span class="hljs-comment">&lt;!--ä¸ºä»€ä¹ˆæ”¾åˆ°è¿™é‡Œä¼šæœ‰æ›´å¥½çš„æ¼”ç¤ºæ•ˆæœï¼Œæ€è€ƒä¸€ä¸‹--&gt;</span></span><br><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">    var vm = new Vue(&#123;</span><br><span class="xml">      el: &#x27;#app&#x27;,</span><br><span class="xml">      data: &#123;</span><br><span class="xml">        msg: &#x27;123&#x27;,</span><br><span class="xml">        msg2: &#x27;<span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>å“ˆå“ˆï¼Œæˆ‘æ˜¯ä¸€ä¸ªå¤§å¤§çš„H1ï¼Œ æˆ‘å¤§ï¼Œæˆ‘éª„å‚²<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>&#x27;</span><br><span class="xml">      &#125;,</span><br><span class="xml">      methods: &#123; // è¿™ä¸ª methodså±æ€§ä¸­å®šä¹‰äº†å½“å‰Vueå®ä¾‹æ‰€æœ‰å¯ç”¨çš„æ–¹æ³•</span><br><span class="xml">      &#125;</span><br><span class="xml">    &#125;)</span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br><br><span class="xml"><span class="hljs-comment">&lt;!-- 1. v-cloak --&gt;</span></span><br><span class="xml"><span class="hljs-comment">&lt;!-- 2. v-text --&gt;</span></span><br><span class="xml"><span class="hljs-comment">&lt;!-- 3. v-html --&gt;</span></span><br></code></pre></td></tr></table></figure><h2 id="VueæŒ‡ä»¤ä¹‹v-bindçš„ä¸‰ç§ç”¨æ³•å’Œv-on"><a href="#VueæŒ‡ä»¤ä¹‹v-bindçš„ä¸‰ç§ç”¨æ³•å’Œv-on" class="headerlink" title="VueæŒ‡ä»¤ä¹‹v-bindçš„ä¸‰ç§ç”¨æ³•å’Œv-on"></a>VueæŒ‡ä»¤ä¹‹<code>v-bind</code>çš„ä¸‰ç§ç”¨æ³•å’Œ<code>v-on</code></h2><ol><li><p>ç›´æ¥ä½¿ç”¨æŒ‡ä»¤<code>v-bind</code></p></li><li><p>ä½¿ç”¨ç®€åŒ–æŒ‡ä»¤<code>:</code></p></li><li><p>åœ¨ç»‘å®šçš„æ—¶å€™ï¼Œæ‹¼æ¥ç»‘å®šå†…å®¹ï¼š<code>:title=&quot;btnTitle + &#39;, è¿™æ˜¯è¿½åŠ çš„å†…å®¹&#39;&quot;</code></p></li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- v-bind: æ˜¯ Vueä¸­ï¼Œæä¾›çš„ç”¨äºç»‘å®šå±æ€§çš„æŒ‡ä»¤ --&gt;</span><br>    <span class="hljs-comment">&lt;!-- &lt;input type=&quot;button&quot; value=&quot;æŒ‰é’®&quot; title=&quot;mytitle&quot;&gt; --&gt;</span><br>    <span class="hljs-comment">&lt;!-- &lt;input type=&quot;button&quot; value=&quot;æŒ‰é’®&quot; v-bind:title=&quot;mytitle&quot;&gt; --&gt;</span><br>    <br>    <span class="hljs-comment">&lt;!-- v-bind ä¸­ï¼Œå¯ä»¥å†™åˆæ³•çš„JSè¡¨è¾¾å¼ --&gt;</span><br>    <span class="hljs-comment">&lt;!-- &lt;input type=&quot;button&quot; value=&quot;æŒ‰é’®&quot; v-bind:title=&quot;mytitle + &#x27;123&#x27;&quot;&gt; --&gt;</span><br>    <br>    <span class="hljs-comment">&lt;!-- æ³¨æ„ï¼š v-bind: æŒ‡ä»¤å¯ä»¥è¢«ç®€å†™ä¸º :è¦ç»‘å®šçš„å±æ€§ --&gt;</span><br>    <span class="hljs-comment">&lt;!-- &lt;input type=&quot;button&quot; value=&quot;æŒ‰é’®&quot; :title=&quot;mytitle&quot;&gt; --&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- Vue ä¸­æä¾›äº† v-on: äº‹ä»¶ç»‘å®šæœºåˆ¶ --&gt;</span><br>    <span class="hljs-comment">&lt;!--Vueä¸æå€¡çš„DOMæ“ä½œ--&gt;</span><br>    <span class="hljs-comment">&lt;!-- &lt;input type=&quot;button&quot; value=&quot;æŒ‰é’®&quot; :title=&quot;mytitle + &#x27;123&#x27;&quot; id=&quot;btn&quot;&gt; --&gt;</span><br>    <br>    <span class="hljs-comment">&lt;!--Vueçš„v-onäº‹ä»¶ç»‘å®š--&gt;</span><br>    <span class="hljs-comment">&lt;!-- &lt;input type=&quot;button&quot; value=&quot;æŒ‰é’®&quot; :title=&quot;mytitle + &#x27;123&#x27;&quot; v-on:click=&quot;alert(&#x27;hello&#x27;)&quot;&gt; --&gt;</span><span class="hljs-comment">&lt;!--ä¸èƒ½è¿™æ ·å†™ä¼šæŠ¥alertæœªå®šä¹‰çš„é”™è¯¯--&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;æŒ‰é’®&quot;</span> <span class="hljs-attr">v-on:click</span>=<span class="hljs-string">&quot;show&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;æŒ‰é’®&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;show&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./lib/vue-2.4.0.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">    <span class="hljs-keyword">var</span> vm = <span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">      el: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br>      data: &#123;<br><span class="javascript">        mytitle: <span class="hljs-string">&#x27;è¿™æ˜¯ä¸€ä¸ªè‡ªå·±å®šä¹‰çš„title&#x27;</span></span><br>      &#125;,<br><span class="javascript">      methods: &#123; <span class="hljs-comment">// è¿™ä¸ª methodså±æ€§ä¸­å®šä¹‰äº†å½“å‰Vueå®ä¾‹æ‰€æœ‰å¯ç”¨çš„æ–¹æ³•</span></span><br><span class="javascript">        show: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">          alert(<span class="hljs-string">&#x27;Hello&#x27;</span>)</span><br>        &#125;<br>      &#125;<br>    &#125;)<br><br><br><span class="javascript">    <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;btn&#x27;</span>).onclick = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;</span><br><span class="javascript">      alert(<span class="hljs-string">&#x27;Hello&#x27;</span>)</span><br>    &#125; <br>  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- 1. v-bind   Vueæä¾›çš„å±æ€§ç»‘å®šæœºåˆ¶   ç¼©å†™æ˜¯ : --&gt;</span><br><span class="hljs-comment">&lt;!-- 2. v-on     Vueæä¾›çš„äº‹ä»¶ç»‘å®šæœºåˆ¶   ç¼©å†™æ˜¯ @ --&gt;</span><br></code></pre></td></tr></table></figure><p><img src="/2019/10/31/Vue-js-I/v-onError.png" alt="2"></p><h2 id="VueæŒ‡ä»¤ä¹‹v-onåšè·‘é©¬ç¯æ•ˆæœ"><a href="#VueæŒ‡ä»¤ä¹‹v-onåšè·‘é©¬ç¯æ•ˆæœ" class="headerlink" title="VueæŒ‡ä»¤ä¹‹v-onåšè·‘é©¬ç¯æ•ˆæœ"></a>VueæŒ‡ä»¤ä¹‹<code>v-on</code>åš<code>è·‘é©¬ç¯æ•ˆæœ</code></h2><h3 id="è·‘é©¬ç¯æ•ˆæœä»£ç å®ç°"><a href="#è·‘é©¬ç¯æ•ˆæœä»£ç å®ç°" class="headerlink" title="è·‘é©¬ç¯æ•ˆæœä»£ç å®ç°"></a>è·‘é©¬ç¯æ•ˆæœä»£ç å®ç°</h3><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="xml">  <span class="hljs-comment">&lt;!-- 2. åˆ›å»ºä¸€ä¸ªè¦æ§åˆ¶çš„åŒºåŸŸ --&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;æµªèµ·æ¥&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;lang&quot;</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;ä½è°ƒ&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;stop&quot;</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">msg</span> &#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">    // æ³¨æ„ï¼šåœ¨ VMå®ä¾‹ä¸­ï¼Œå¦‚æœæƒ³è¦è·å– data ä¸Šçš„æ•°æ®ï¼Œæˆ–è€… æƒ³è¦è°ƒç”¨ methods ä¸­çš„ æ–¹æ³•ï¼Œå¿…é¡»é€šè¿‡ this.æ•°æ®å±æ€§å  æˆ–  this.æ–¹æ³•å æ¥è¿›è¡Œè®¿é—®ï¼Œè¿™é‡Œçš„thisï¼Œå°±è¡¨ç¤º æˆ‘ä»¬ new å‡ºæ¥çš„  VM å®ä¾‹å¯¹è±¡</span><br><span class="xml">    var vm = new Vue(&#123;</span><br><span class="xml">      el: &#x27;#app&#x27;,</span><br><span class="xml">      data: &#123;</span><br><span class="xml">        msg: &#x27;çŒ¥çå‘è‚²ï¼Œåˆ«æµª~~ï¼&#x27;,</span><br><span class="xml">        intervalId: null // åœ¨dataä¸Šå®šä¹‰ å®šæ—¶å™¨Id</span><br><span class="xml">      &#125;,</span><br><span class="xml">      methods: &#123;</span><br><span class="xml">        lang() &#123;</span><br><span class="xml">          // console.log(this.msg)</span><br><span class="xml">          // è·å–åˆ°å¤´çš„ç¬¬ä¸€ä¸ªå­—ç¬¦</span><br><span class="xml">          // this</span><br><br><span class="xml">          if (this.intervalId != null) return;//éªŒè¯å½“å‰æ˜¯å¦å·²æœ‰å®šæ—¶å™¨è¿è¡Œ</span><br><br><span class="xml">          //åµŒå¥—å‡½æ•°thisæŒ‡å‘é—®é¢˜</span><br><span class="xml">          // var _this=this;</span><br><span class="xml">          // setInterval(function() &#123; </span><br><span class="xml">          //   var start = _this.msg.substring(0, 1)</span><br><span class="xml">          //   // è·å–åˆ° åé¢çš„æ‰€æœ‰å­—ç¬¦</span><br><span class="xml">          //   var end = _this.msg.substring(1)</span><br><span class="xml">          //   // é‡æ–°æ‹¼æ¥å¾—åˆ°æ–°çš„å­—ç¬¦ä¸²ï¼Œå¹¶èµ‹å€¼ç»™ this.msg</span><br><span class="xml">          //   _this.msg = end + start</span><br><span class="xml">          // &#125;, 400)</span><br><br><span class="xml">          this.intervalId = </span><br><span class="xml">          setInterval(() =&gt; &#123; //=&gt;å®ç°åµŒå¥—å‡½æ•°</span><br><span class="xml">            var start = this.msg.substring(0, 1)</span><br><span class="xml">            var end = this.msg.substring(1)</span><br><span class="xml">            this.msg = end + start</span><br><span class="xml">          &#125;, 400)</span><br><br><span class="xml">          // æ³¨æ„ï¼š VMå®ä¾‹ï¼Œä¼šç›‘å¬è‡ªå·±èº«ä¸Š data ä¸­æ‰€æœ‰æ•°æ®çš„æ”¹å˜ï¼Œåªè¦æ•°æ®ä¸€å‘ç”Ÿå˜åŒ–ï¼Œå°±ä¼šè‡ªåŠ¨æŠŠ æœ€æ–°çš„æ•°æ®ï¼Œä»data ä¸ŠåŒæ­¥åˆ°é¡µé¢ä¸­å»ï¼›ã€å¥½å¤„ï¼šç¨‹åºå‘˜åªéœ€è¦å…³å¿ƒæ•°æ®ï¼Œä¸éœ€è¦è€ƒè™‘å¦‚ä½•é‡æ–°æ¸²æŸ“DOMé¡µé¢ã€‘</span><br><span class="xml">        &#125;,</span><br><span class="xml">        stop() &#123; // åœæ­¢å®šæ—¶å™¨</span><br><span class="xml">          clearInterval(this.intervalId)</span><br><span class="xml">          // æ¯å½“æ¸…é™¤äº†å®šæ—¶å™¨ä¹‹åï¼Œéœ€è¦é‡æ–°æŠŠ intervalId ç½®ä¸º null</span><br><span class="xml">          this.intervalId = null;</span><br><span class="xml">        &#125;</span><br><span class="xml">      &#125;</span><br><span class="xml">    &#125;)</span><br><br><span class="xml">    // åˆ†æï¼š</span><br><span class="xml">    // 1. ç»™ ã€æµªèµ·æ¥ã€‘ æŒ‰é’®ï¼Œç»‘å®šä¸€ä¸ªç‚¹å‡»äº‹ä»¶   v-on   @</span><br><span class="xml">    // 2. åœ¨æŒ‰é’®çš„äº‹ä»¶å¤„ç†å‡½æ•°ä¸­ï¼Œå†™ç›¸å…³çš„ä¸šåŠ¡é€»è¾‘ä»£ç ï¼šæ‹¿åˆ° msg å­—ç¬¦ä¸²ï¼Œç„¶å è°ƒç”¨ å­—ç¬¦ä¸²çš„ substring æ¥è¿›è¡Œå­—ç¬¦ä¸²çš„æˆªå–æ“ä½œï¼ŒæŠŠ ç¬¬ä¸€ä¸ªå­—ç¬¦æˆªå–å‡ºæ¥ï¼Œæ”¾åˆ°æœ€åä¸€ä¸ªä½ç½®å³å¯ï¼›</span><br><span class="xml">    // 3. ä¸ºäº†å®ç°ç‚¹å‡»ä¸‹æŒ‰é’®ï¼Œè‡ªåŠ¨æˆªå–çš„åŠŸèƒ½ï¼Œéœ€è¦æŠŠ 2 æ­¥éª¤ä¸­çš„ä»£ç ï¼Œæ”¾åˆ°ä¸€ä¸ªå®šæ—¶å™¨ä¸­å»ï¼›</span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h2 id="VueæŒ‡ä»¤ä¹‹v-onçš„ç¼©å†™å’Œäº‹ä»¶ä¿®é¥°ç¬¦"><a href="#VueæŒ‡ä»¤ä¹‹v-onçš„ç¼©å†™å’Œäº‹ä»¶ä¿®é¥°ç¬¦" class="headerlink" title="VueæŒ‡ä»¤ä¹‹v-onçš„ç¼©å†™å’Œäº‹ä»¶ä¿®é¥°ç¬¦"></a>VueæŒ‡ä»¤ä¹‹<code>v-onçš„ç¼©å†™</code>å’Œ<code>äº‹ä»¶ä¿®é¥°ç¬¦</code></h2><h3 id="äº‹ä»¶ä¿®é¥°ç¬¦ï¼š"><a href="#äº‹ä»¶ä¿®é¥°ç¬¦ï¼š" class="headerlink" title="äº‹ä»¶ä¿®é¥°ç¬¦ï¼š"></a>äº‹ä»¶ä¿®é¥°ç¬¦ï¼š</h3><ul><li><p>.stop       é˜»æ­¢å†’æ³¡</p></li><li><p>.prevent    é˜»æ­¢é»˜è®¤äº‹ä»¶</p></li><li><p>.capture    æ·»åŠ äº‹ä»¶ä¾¦å¬å™¨æ—¶ä½¿ç”¨äº‹ä»¶æ•è·æ¨¡å¼</p></li><li><p>.self       åªå½“äº‹ä»¶åœ¨è¯¥å…ƒç´ æœ¬èº«ï¼ˆæ¯”å¦‚ä¸æ˜¯å­å…ƒç´ ï¼‰è§¦å‘æ—¶è§¦å‘å›è°ƒ</p></li><li><p>.once       äº‹ä»¶åªè§¦å‘ä¸€æ¬¡</p></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./lib/vue-2.4.0.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><br>    .inner &#123;<br><span class="css">      <span class="hljs-attribute">height</span>: <span class="hljs-number">150px</span>;</span><br><span class="css">      <span class="hljs-attribute">background-color</span>: darkcyan;</span><br>    &#125;<br>    .outer &#123;<br><span class="css">      <span class="hljs-attribute">padding</span>: <span class="hljs-number">40px</span>;</span><br><span class="css">      <span class="hljs-attribute">background-color</span>: red;</span><br>    &#125;<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- ä½¿ç”¨  .stop  é˜»æ­¢å†’æ³¡ --&gt;</span><br>    <span class="hljs-comment">&lt;!-- &lt;div class=&quot;inner&quot; @click=&quot;div1Handler&quot;&gt;</span><br><span class="hljs-comment">      &lt;input type=&quot;button&quot; value=&quot;æˆ³ä»–&quot; @click.stop=&quot;btnHandler&quot;&gt;</span><br><span class="hljs-comment">    &lt;/div&gt; --&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- ä½¿ç”¨ .prevent é˜»æ­¢é»˜è®¤è¡Œä¸º --&gt;</span><br>    <span class="hljs-comment">&lt;!-- &lt;a href=&quot;http://www.baidu.com&quot; @click.prevent=&quot;linkClick&quot;&gt;æœ‰é—®é¢˜ï¼Œå…ˆå»ç™¾åº¦&lt;/a&gt; --&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- ä½¿ç”¨  .capture å®ç°æ•è·è§¦å‘äº‹ä»¶çš„æœºåˆ¶ å…ˆè§¦å‘div1Handlerï¼Œåœ¨æ‰§è¡ŒbtnHandler --&gt;</span><br>    <span class="hljs-comment">&lt;!-- &lt;div class=&quot;inner&quot; @click.capture=&quot;div1Handler&quot;&gt;</span><br><span class="hljs-comment">      &lt;input type=&quot;button&quot; value=&quot;æˆ³ä»–&quot; @click=&quot;btnHandler&quot;&gt;</span><br><span class="hljs-comment">    &lt;/div&gt; --&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- ä½¿ç”¨ .self å®ç°åªæœ‰ç‚¹å‡»å½“å‰å…ƒç´ æ—¶å€™ï¼Œæ‰ä¼šè§¦å‘äº‹ä»¶å¤„ç†å‡½æ•° --&gt;</span><br>    <span class="hljs-comment">&lt;!-- &lt;div class=&quot;inner&quot; @click.self=&quot;div1Handler&quot;&gt;</span><br><span class="hljs-comment">      &lt;input type=&quot;button&quot; value=&quot;æˆ³ä»–&quot; @click=&quot;btnHandler&quot;&gt;</span><br><span class="hljs-comment">    &lt;/div&gt; --&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- ä½¿ç”¨ .once åªè§¦å‘ä¸€æ¬¡äº‹ä»¶å¤„ç†å‡½æ•° --&gt;</span><br>    <span class="hljs-comment">&lt;!-- &lt;a href=&quot;http://www.baidu.com&quot; @click.prevent.once=&quot;linkClick&quot;&gt;æœ‰é—®é¢˜ï¼Œå…ˆå»ç™¾åº¦&lt;/a&gt; --&gt;</span><br>    <span class="hljs-comment">&lt;!-- &lt;a href=&quot;http://www.baidu.com&quot; @click.once.prevent=&quot;linkClick&quot;&gt;æœ‰é—®é¢˜ï¼Œå…ˆå»ç™¾åº¦&lt;/a&gt; --&gt;</span><br><br><br>    <span class="hljs-comment">&lt;!-- æ¼”ç¤ºï¼š .stop å’Œ .self çš„åŒºåˆ« --&gt;</span><br>    <span class="hljs-comment">&lt;!-- &lt;div class=&quot;outer&quot; @click=&quot;div2Handler&quot;&gt;</span><br><span class="hljs-comment">      &lt;div class=&quot;inner&quot; @click=&quot;div1Handler&quot;&gt;</span><br><span class="hljs-comment">        &lt;input type=&quot;button&quot; value=&quot;æˆ³ä»–&quot; @click.stop=&quot;btnHandler&quot;&gt;</span><br><span class="hljs-comment">      &lt;/div&gt;</span><br><span class="hljs-comment">    &lt;/div&gt; --&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- .self åªä¼šé˜»æ­¢è‡ªå·±èº«ä¸Šå†’æ³¡è¡Œä¸ºçš„è§¦å‘ï¼Œå¹¶ä¸ä¼šçœŸæ­£é˜»æ­¢ å†’æ³¡çš„è¡Œä¸º --&gt;</span><br>    <span class="hljs-comment">&lt;!-- &lt;div class=&quot;outer&quot; @click=&quot;div2Handler&quot;&gt;</span><br><span class="hljs-comment">      &lt;div class=&quot;inner&quot; @click.self=&quot;div1Handler&quot;&gt;</span><br><span class="hljs-comment">        &lt;input type=&quot;button&quot; value=&quot;æˆ³ä»–&quot; @click=&quot;btnHandler&quot;&gt;</span><br><span class="hljs-comment">      &lt;/div&gt;</span><br><span class="hljs-comment">    &lt;/div&gt; --&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">    <span class="hljs-comment">// åˆ›å»º Vue å®ä¾‹ï¼Œå¾—åˆ° ViewModel</span></span><br><span class="javascript">    <span class="hljs-keyword">var</span> vm = <span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">      el: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br>      data: &#123;&#125;,<br>      methods: &#123;<br><span class="javascript">        <span class="hljs-function"><span class="hljs-title">div1Handler</span>(<span class="hljs-params"></span>)</span> &#123;</span><br><span class="javascript">          <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;è¿™æ˜¯è§¦å‘äº† inner div çš„ç‚¹å‡»äº‹ä»¶&#x27;</span>)</span><br>        &#125;,<br><span class="javascript">        <span class="hljs-function"><span class="hljs-title">btnHandler</span>(<span class="hljs-params"></span>)</span> &#123;</span><br><span class="javascript">          <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;è¿™æ˜¯è§¦å‘äº† btn æŒ‰é’® çš„ç‚¹å‡»äº‹ä»¶&#x27;</span>)</span><br>        &#125;,<br><span class="javascript">        <span class="hljs-function"><span class="hljs-title">linkClick</span>(<span class="hljs-params"></span>)</span> &#123;</span><br><span class="javascript">          <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;è§¦å‘äº†è¿æ¥çš„ç‚¹å‡»äº‹ä»¶&#x27;</span>)</span><br>        &#125;,<br><span class="javascript">        <span class="hljs-function"><span class="hljs-title">div2Handler</span>(<span class="hljs-params"></span>)</span> &#123;</span><br><span class="javascript">          <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;è¿™æ˜¯è§¦å‘äº† outer div çš„ç‚¹å‡»äº‹ä»¶&#x27;</span>)</span><br>        &#125;<br>      &#125;<br>    &#125;);<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="VueæŒ‡ä»¤ä¹‹v-modelå’ŒåŒå‘æ•°æ®ç»‘å®š"><a href="#VueæŒ‡ä»¤ä¹‹v-modelå’ŒåŒå‘æ•°æ®ç»‘å®š" class="headerlink" title="VueæŒ‡ä»¤ä¹‹v-modelå’ŒåŒå‘æ•°æ®ç»‘å®š"></a>VueæŒ‡ä»¤ä¹‹<code>v-model</code>å’Œ<code>åŒå‘æ•°æ®ç»‘å®š</code></h2><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">msg</span> &#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span></span><br><br><span class="xml">    <span class="hljs-comment">&lt;!-- v-bind åªèƒ½å®ç°æ•°æ®çš„å•å‘ç»‘å®šï¼Œä» M è‡ªåŠ¨ç»‘å®šåˆ° Vï¼Œ æ— æ³•å®ç°æ•°æ®çš„åŒå‘ç»‘å®š  --&gt;</span></span><br><span class="xml">    <span class="hljs-comment">&lt;!-- &lt;input type=&quot;text&quot; v-bind:value=&quot;msg&quot; style=&quot;width:100%;&quot;&gt; --&gt;</span></span><br><br><span class="xml">    <span class="hljs-comment">&lt;!-- ä½¿ç”¨  v-model æŒ‡ä»¤ï¼Œå¯ä»¥å®ç° è¡¨å•å…ƒç´ å’Œ Model ä¸­æ•°æ®çš„åŒå‘æ•°æ®ç»‘å®š --&gt;</span></span><br><span class="xml">    <span class="hljs-comment">&lt;!-- æ³¨æ„ï¼š v-model åªèƒ½è¿ç”¨åœ¨ è¡¨å•å…ƒç´ ä¸­ --&gt;</span></span><br><span class="xml">    <span class="hljs-comment">&lt;!-- input(radio, text, address, email....)   select    checkbox   textarea   --&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;width:100%;&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;msg&quot;</span>&gt;</span><span class="hljs-comment">&lt;!-- v-modelæ²¡æœ‰value --&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">    // åˆ›å»º Vue å®ä¾‹ï¼Œå¾—åˆ° ViewModel</span><br><span class="xml">    var vm = new Vue(&#123;</span><br><span class="xml">      el: &#x27;#app&#x27;,</span><br><span class="xml">      data: &#123;</span><br><span class="xml">        msg: &#x27;å¤§å®¶éƒ½æ˜¯å¥½å­¦ç”Ÿï¼Œçˆ±æ•²ä»£ç ï¼Œçˆ±å­¦ä¹ ï¼Œçˆ±æ€è€ƒï¼Œç®€ç›´æ˜¯å®Œç¾ï¼Œæ²¡ç‘•ç–µï¼&#x27;</span><br><span class="xml">      &#125;,</span><br><span class="xml">      methods: &#123;</span><br><span class="xml">      &#125;</span><br><span class="xml">    &#125;);</span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h2 id="ç®€æ˜“è®¡ç®—å™¨æ¡ˆä¾‹"><a href="#ç®€æ˜“è®¡ç®—å™¨æ¡ˆä¾‹" class="headerlink" title="ç®€æ˜“è®¡ç®—å™¨æ¡ˆä¾‹"></a>ç®€æ˜“è®¡ç®—å™¨æ¡ˆä¾‹</h2><p>Vueå®ä¾‹ä»£ç ï¼š</p><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs xquery"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="xml">  </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span></span><br><span class="xml">    </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;n1&quot;</span>&gt;</span></span><br><br><span class="xml">    </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;opt&quot;</span>&gt;</span></span><br><span class="xml">      </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;+&quot;</span>&gt;</span>+<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span></span><br><span class="xml">      </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;-&quot;</span>&gt;</span>-<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span></span><br><span class="xml">      </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;*&quot;</span>&gt;</span>*<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span></span><br><span class="xml">      </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;/&quot;</span>&gt;</span>/<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></span><br><br><span class="xml">    </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;n2&quot;</span>&gt;</span></span><br><span class="xml">    </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;=&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;calc&quot;</span>&gt;</span></span><br><span class="xml">    </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;result&quot;</span>&gt;</span></span><br><span class="xml">    </span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><br><span class="xml">  </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">    // åˆ›å»º Vue å®ä¾‹ï¼Œå¾—åˆ° ViewModel</span><br><span class="xml">    var vm = new Vue(</span><span class="xquery">&#123;</span><br><span class="xquery">      el: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="xquery">      data: &#123;</span><br><span class="xquery">        n1: <span class="hljs-number">0</span>,</span><br><span class="xquery">        n2: <span class="hljs-number">0</span>,</span><br><span class="xquery">        result: <span class="hljs-number">0</span>,</span><br><span class="xquery">        opt: <span class="hljs-string">&#x27;+&#x27;</span></span><br><span class="xquery">      &#125;</span><span class="xml">,</span><br><span class="xml">      methods: </span><span class="xquery">&#123;</span><br><span class="xquery">        calc() &#123; // è®¡ç®—å™¨ç®—æ•°çš„æ–¹æ³•  </span><br><span class="xquery">          // é€»è¾‘ï¼š</span><br><span class="xquery">          /* <span class="hljs-keyword">switch</span> (this.opt) &#123;</span><br><span class="xquery">            <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;+&#x27;</span>:</span><br><span class="xquery">              this.result = parseInt(this.n1) + parseInt(this.n2)</span><br><span class="xquery">              break;</span><br><span class="xquery">            <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;-&#x27;</span>:</span><br><span class="xquery">              this.result = parseInt(this.n1) - parseInt(this.n2)</span><br><span class="xquery">              break;</span><br><span class="xquery">            <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;*&#x27;</span>:</span><br><span class="xquery">              this.result = parseInt(this.n1) * parseInt(this.n2)</span><br><span class="xquery">              break;</span><br><span class="xquery">            <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;/&#x27;</span>:</span><br><span class="xquery">              this.result = parseInt(this.n1) / parseInt(this.n2)</span><br><span class="xquery">              break;</span><br><span class="xquery">          &#125;</span><span class="xml"> */</span><br><br><span class="xml">          // æ³¨æ„ï¼šè¿™æ˜¯æŠ•æœºå–å·§çš„æ–¹å¼ï¼Œæ­£å¼å¼€å‘ä¸­ï¼Œå°½é‡å°‘ç”¨</span><br><span class="xml">          var codeStr = &#x27;parseInt(this.n1) &#x27; + this.opt + &#x27; parseInt(this.n2)&#x27;</span><br><span class="xml">          this.result = eval(codeStr)</span><br><span class="xml">        &#125;</span><br><span class="xml">      &#125;</span><br><span class="xml">    &#125;);</span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h2 id="åœ¨Vueä¸­ä½¿ç”¨æ ·å¼"><a href="#åœ¨Vueä¸­ä½¿ç”¨æ ·å¼" class="headerlink" title="åœ¨Vueä¸­ä½¿ç”¨æ ·å¼"></a>åœ¨Vueä¸­ä½¿ç”¨æ ·å¼</h2><h3 id="ä½¿ç”¨classæ ·å¼"><a href="#ä½¿ç”¨classæ ·å¼" class="headerlink" title="ä½¿ç”¨classæ ·å¼"></a>ä½¿ç”¨classæ ·å¼</h3><ol><li>æ•°ç»„<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">&lt;h1 :<span class="hljs-keyword">class</span>=&quot;[&#x27;<span class="hljs-symbol">red</span>&#x27;, &#x27;<span class="hljs-symbol">thin</span>&#x27;]&quot;&gt;è¿™æ˜¯ä¸€ä¸ªé‚ªæ¶çš„<span class="hljs-symbol">H1</span>&lt;/<span class="hljs-symbol">h1</span>&gt;<br></code></pre></td></tr></table></figure></li><li>æ•°ç»„ä¸­ä½¿ç”¨ä¸‰å…ƒè¡¨è¾¾å¼<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">&lt;h1 :<span class="hljs-keyword">class</span>=&quot;[&#x27;<span class="hljs-symbol">red</span>&#x27;, &#x27;<span class="hljs-symbol">thin</span>&#x27;, <span class="hljs-symbol">isactive</span>?&#x27;<span class="hljs-symbol">active</span>&#x27;:&#x27;&#x27;]&quot;&gt;è¿™æ˜¯ä¸€ä¸ªé‚ªæ¶çš„<span class="hljs-symbol">H1</span>&lt;/<span class="hljs-symbol">h1</span>&gt;<br></code></pre></td></tr></table></figure></li><li>æ•°ç»„ä¸­åµŒå¥—å¯¹è±¡<figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;[&#x27;red&#x27;, &#x27;thin&#x27;, </span></span></span><span class="hljs-template-variable">&#123;&#x27;active&#x27;: isactive&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">]&quot;</span>&gt;</span>è¿™æ˜¯ä¸€ä¸ªé‚ªæ¶çš„H1<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br></code></pre></td></tr></table></figure></li><li>ç›´æ¥ä½¿ç”¨å¯¹è±¡<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs actionscript">&lt;h1 :<span class="hljs-class"><span class="hljs-keyword">class</span>=&quot;</span>&#123;red:<span class="hljs-literal">true</span>, italic:<span class="hljs-literal">true</span>, active:<span class="hljs-literal">true</span>, thin:<span class="hljs-literal">true</span>&#125;<span class="hljs-string">&quot;&gt;è¿™æ˜¯ä¸€ä¸ªé‚ªæ¶çš„H1&lt;/h1&gt;</span><br></code></pre></td></tr></table></figure><h5 id="classæ ·å¼å®Œæ•´ä»£ç "><a href="#classæ ·å¼å®Œæ•´ä»£ç " class="headerlink" title="classæ ·å¼å®Œæ•´ä»£ç "></a>classæ ·å¼å®Œæ•´ä»£ç </h5></li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./lib/vue-2.4.0.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><br>    .red &#123;<br><span class="css">      <span class="hljs-attribute">color</span>: red;</span><br>    &#125;<br>    .thin &#123;<br><span class="css">      <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">200</span>;</span><br>    &#125;<br>    .italic &#123;<br><span class="css">      <span class="hljs-attribute">font-style</span>: italic;</span><br>    &#125;<br>    .active &#123;<br><span class="css">      <span class="hljs-attribute">letter-spacing</span>: <span class="hljs-number">0.5em</span>;</span><br>    &#125;<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- &lt;h1 class=&quot;red thin&quot;&gt;è¿™æ˜¯ä¸€ä¸ªå¾ˆå¤§å¾ˆå¤§çš„H1ï¼Œå¤§åˆ°ä½ æ— æ³•æƒ³è±¡ï¼ï¼ï¼&lt;/h1&gt; --&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- ç¬¬ä¸€ç§ä½¿ç”¨æ–¹å¼ï¼Œç›´æ¥ä¼ é€’ä¸€ä¸ªæ•°ç»„ï¼Œæ³¨æ„ï¼š è¿™é‡Œçš„ class éœ€è¦ä½¿ç”¨  v-bind åšæ•°æ®ç»‘å®š å¼•å·æ³¨æ„--&gt;</span><br>    <span class="hljs-comment">&lt;!-- &lt;h1 :class=&quot;[&#x27;thin&#x27;, &#x27;italic&#x27;]&quot;&gt;è¿™æ˜¯ä¸€ä¸ªå¾ˆå¤§å¾ˆå¤§çš„H1ï¼Œå¤§åˆ°ä½ æ— æ³•æƒ³è±¡ï¼ï¼ï¼&lt;/h1&gt; --&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- åœ¨æ•°ç»„ä¸­ä½¿ç”¨ä¸‰å…ƒè¡¨è¾¾å¼ flagæ²¡æœ‰åŠ å¼•å·ï¼Œä½ æ¥åŒºåˆ«ä¸€ä¸‹--&gt;</span><br>    <span class="hljs-comment">&lt;!-- &lt;h1 :class=&quot;[&#x27;thin&#x27;, &#x27;italic&#x27;, flag?&#x27;active&#x27;:&#x27;&#x27;]&quot;&gt;è¿™æ˜¯ä¸€ä¸ªå¾ˆå¤§å¾ˆå¤§çš„H1ï¼Œå¤§åˆ°ä½ æ— æ³•æƒ³è±¡ï¼ï¼ï¼&lt;/h1&gt; --&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- åœ¨æ•°ç»„ä¸­ä½¿ç”¨ å¯¹è±¡æ¥ä»£æ›¿ä¸‰å…ƒè¡¨è¾¾å¼ï¼Œæé«˜ä»£ç çš„å¯è¯»æ€§ --&gt;</span><br>    <span class="hljs-comment">&lt;!-- &lt;h1 :class=&quot;[&#x27;thin&#x27;, &#x27;italic&#x27;, &#123;&#x27;active&#x27;:flag&#125; ]&quot;&gt;è¿™æ˜¯ä¸€ä¸ªå¾ˆå¤§å¾ˆå¤§çš„H1ï¼Œå¤§åˆ°ä½ æ— æ³•æƒ³è±¡ï¼ï¼ï¼&lt;/h1&gt; --&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- åœ¨ä¸º class ä½¿ç”¨ v-bind ç»‘å®š å¯¹è±¡çš„æ—¶å€™ï¼Œå¯¹è±¡çš„å±æ€§æ˜¯ç±»åï¼Œç”±äº å¯¹è±¡çš„å±æ€§å¯å¸¦å¼•å·ï¼Œä¹Ÿå¯ä¸å¸¦å¼•å·ï¼Œæ‰€ä»¥ è¿™é‡Œæˆ‘æ²¡å†™å¼•å·ï¼›  å±æ€§çš„å€¼ æ˜¯ä¸€ä¸ªæ ‡è¯†ç¬¦ --&gt;</span><br>    <span class="hljs-comment">&lt;!--&lt;h1 :class=&quot;&#123; red: true, thin: true, italic: false, active: false &#125;&quot;&gt;è¿™æ˜¯ä¸€ä¸ªå¾ˆå¤§å¾ˆå¤§çš„H1ï¼Œå¤§åˆ°ä½ æ— æ³•æƒ³è±¡ï¼ï¼ï¼&lt;/h1&gt;--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;classObj&quot;</span>&gt;</span>è¿™æ˜¯ä¸€ä¸ªå¾ˆå¤§å¾ˆå¤§çš„H1ï¼Œå¤§åˆ°ä½ æ— æ³•æƒ³è±¡ï¼ï¼ï¼<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">    <span class="hljs-comment">// åˆ›å»º Vue å®ä¾‹ï¼Œå¾—åˆ° ViewModel</span></span><br><span class="javascript">    <span class="hljs-keyword">var</span> vm = <span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">      el: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br>      data: &#123;<br><span class="javascript">        flag: <span class="hljs-literal">true</span>,</span><br><span class="javascript">        classObj: &#123; <span class="hljs-attr">red</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">thin</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">italic</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">active</span>: <span class="hljs-literal">false</span> &#125;</span><br>      &#125;,<br>      methods: &#123;&#125;<br>    &#125;);<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="ä½¿ç”¨å†…è”æ ·å¼"><a href="#ä½¿ç”¨å†…è”æ ·å¼" class="headerlink" title="ä½¿ç”¨å†…è”æ ·å¼"></a>ä½¿ç”¨å†…è”æ ·å¼</h3><ol><li>ç›´æ¥åœ¨å…ƒç´ ä¸Šé€šè¿‡ <code>:style</code> çš„å½¢å¼ï¼Œä¹¦å†™æ ·å¼å¯¹è±¡<figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;color: &#x27;red&#x27;, &#x27;font-size&#x27;: &#x27;40px&#x27;&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span>è¿™æ˜¯ä¸€ä¸ªå–„è‰¯çš„H1<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br></code></pre></td></tr></table></figure></li><li>å°†æ ·å¼å¯¹è±¡ï¼Œå®šä¹‰åˆ° <code>data</code> ä¸­ï¼Œå¹¶ç›´æ¥å¼•ç”¨åˆ° <code>:style</code> ä¸­</li></ol><ul><li>åœ¨dataä¸Šå®šä¹‰æ ·å¼ï¼š<figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xl"><span class="hljs-keyword">data</span>: &#123;<br>        h1StyleObj: &#123; <span class="hljs-built_in">color</span>: <span class="hljs-string">&#x27;red&#x27;</span>, <span class="hljs-string">&#x27;font-size&#x27;</span>: <span class="hljs-string">&#x27;40px&#x27;</span>, <span class="hljs-string">&#x27;font-weight&#x27;</span>: <span class="hljs-string">&#x27;200&#x27;</span> &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li>åœ¨å…ƒç´ ä¸­ï¼Œé€šè¿‡å±æ€§ç»‘å®šçš„å½¢å¼ï¼Œå°†æ ·å¼å¯¹è±¡åº”ç”¨åˆ°å…ƒç´ ä¸­ï¼š<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">&quot;h1StyleObj&quot;</span>&gt;</span>è¿™æ˜¯ä¸€ä¸ªå–„è‰¯çš„H1<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul><ol start="3"><li>åœ¨ <code>:style</code> ä¸­é€šè¿‡æ•°ç»„ï¼Œå¼•ç”¨å¤šä¸ª <code>data</code> ä¸Šçš„æ ·å¼å¯¹è±¡</li></ol><ul><li>åœ¨dataä¸Šå®šä¹‰æ ·å¼ï¼š<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css">data: &#123;<br>        h1StyleObj: &#123; color: <span class="hljs-string">&#x27;red&#x27;</span>, <span class="hljs-string">&#x27;font-size&#x27;</span>: <span class="hljs-string">&#x27;40px&#x27;</span>, <span class="hljs-string">&#x27;font-weight&#x27;</span>: <span class="hljs-string">&#x27;200&#x27;</span> &#125;,<br>        h1StyleObj2: &#123; fontStyle: <span class="hljs-string">&#x27;italic&#x27;</span> &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li>åœ¨å…ƒç´ ä¸­ï¼Œé€šè¿‡å±æ€§ç»‘å®šçš„å½¢å¼ï¼Œå°†æ ·å¼å¯¹è±¡åº”ç”¨åˆ°å…ƒç´ ä¸­ï¼š<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">&quot;[h1StyleObj, h1StyleObj2]&quot;</span>&gt;</span>è¿™æ˜¯ä¸€ä¸ªå–„è‰¯çš„H1<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="å†…è”æ ·å¼å®Œæ•´ä»£ç "><a href="#å†…è”æ ·å¼å®Œæ•´ä»£ç " class="headerlink" title="å†…è”æ ·å¼å®Œæ•´ä»£ç "></a>å†…è”æ ·å¼å®Œæ•´ä»£ç </h4></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- å¯¹è±¡å°±æ˜¯æ— åºé”®å€¼å¯¹çš„é›†åˆ --&gt;</span><br>    <span class="hljs-comment">&lt;!-- &lt;h1 :style=&quot;&#123; color: &#x27;red&#x27;, &#x27;font-weight&#x27;: 200 &#125;&quot;&gt;è¿™æ˜¯ä¸€ä¸ªh1&lt;/h1&gt; --&gt;</span><br>    <span class="hljs-comment">&lt;!-- &lt;h1 :style=&quot;styleObj1&quot;&gt;è¿™æ˜¯ä¸€ä¸ªh1&lt;/h1&gt; --&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">&quot;[ styleObj1, styleObj2 ]&quot;</span>&gt;</span>è¿™æ˜¯ä¸€ä¸ªh1<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">    <span class="hljs-comment">// åˆ›å»º Vue å®ä¾‹ï¼Œå¾—åˆ° ViewModel</span></span><br><span class="javascript">    <span class="hljs-keyword">var</span> vm = <span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">      el: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br>      data: &#123;<br><span class="javascript">        styleObj1: &#123; <span class="hljs-attr">color</span>: <span class="hljs-string">&#x27;red&#x27;</span>, <span class="hljs-string">&#x27;font-weight&#x27;</span>: <span class="hljs-number">200</span> &#125;,</span><br><span class="javascript">        styleObj2: &#123; <span class="hljs-string">&#x27;font-style&#x27;</span>: <span class="hljs-string">&#x27;italic&#x27;</span> &#125;</span><br>      &#125;,<br>      methods: &#123;&#125;<br>    &#125;);<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="VueæŒ‡ä»¤ä¹‹v-forå’Œkeyå±æ€§"><a href="#VueæŒ‡ä»¤ä¹‹v-forå’Œkeyå±æ€§" class="headerlink" title="VueæŒ‡ä»¤ä¹‹v-forå’Œkeyå±æ€§"></a>VueæŒ‡ä»¤ä¹‹<code>v-for</code>å’Œ<code>key</code>å±æ€§</h2><ol><li>è¿­ä»£æ•°ç»„</li></ol><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span></span><br><span class="xml">    <span class="hljs-comment">&lt;!-- &lt;p&gt;</span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">list</span>[0]&#125;&#125;</span><span class="xml"><span class="hljs-comment">&lt;/p&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">list</span>[1]&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">list</span>[2]&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">list</span>[3]&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">list</span>[4]&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span> --&gt;</span><br><span class="xml"></span><br><span class="xml"><span class="hljs-comment">&lt;!--æ™®é€šæ•°ç»„--&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;item in list&quot;</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(item, i) in list&quot;</span>&gt;</span>ç´¢å¼•å€¼ï¼š</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">i</span>&#125;&#125;</span><span class="xml"> --- æ¯ä¸€é¡¹ï¼š</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="xml">    </span><br><span class="xml">    <span class="hljs-comment">&lt;!--å¯¹è±¡æ•°ç»„--&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(user, i) in list2&quot;</span>&gt;</span>Idï¼š</span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">user.id</span> &#125;&#125;</span><span class="xml"> --- åå­—ï¼š</span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">user.name</span> &#125;&#125;</span><span class="xml"> --- ç´¢å¼•ï¼š</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">i</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">    // åˆ›å»º Vue å®ä¾‹ï¼Œå¾—åˆ° ViewModel</span><br><span class="xml">    var vm = new Vue(&#123;</span><br><span class="xml">      el: &#x27;#app&#x27;,</span><br><span class="xml">      data: &#123;</span><br><span class="xml">        list: [1, 2, 3, 4, 5, 6],</span><br><span class="xml">        list2: [</span><br><span class="xml">          &#123; id: 1, name: &#x27;zs1&#x27; &#125;,</span><br><span class="xml">          &#123; id: 2, name: &#x27;zs2&#x27; &#125;,</span><br><span class="xml">          &#123; id: 3, name: &#x27;zs3&#x27; &#125;,</span><br><span class="xml">          &#123; id: 4, name: &#x27;zs4&#x27; &#125;</span><br><span class="xml">        ]</span><br><span class="xml">      &#125;,</span><br><span class="xml">      methods: &#123;&#125;</span><br><span class="xml">    &#125;);</span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure><ol start="2"><li>è¿­ä»£å¯¹è±¡ä¸­çš„å±æ€§</li></ol><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span></span><br><span class="xml">    <span class="hljs-comment">&lt;!-- æ³¨æ„ï¼šåœ¨éå†å¯¹è±¡èº«ä¸Šçš„é”®å€¼å¯¹çš„æ—¶å€™ï¼Œ é™¤äº† æœ‰  val  key  ,åœ¨ç¬¬ä¸‰ä¸ªä½ç½®è¿˜æœ‰ ä¸€ä¸ª ç´¢å¼•  --&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(val, key, i) in user&quot;</span>&gt;</span>å€¼æ˜¯ï¼š </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">val</span> &#125;&#125;</span><span class="xml"> --- é”®æ˜¯ï¼š </span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">key</span>&#125;&#125;</span><span class="xml"> -- ç´¢å¼•ï¼š </span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">i</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">    // åˆ›å»º Vue å®ä¾‹ï¼Œå¾—åˆ° ViewModel</span><br><span class="xml">    var vm = new Vue(&#123;</span><br><span class="xml">      el: &#x27;#app&#x27;,</span><br><span class="xml">      data: &#123;</span><br><span class="xml">        user: &#123;</span><br><span class="xml">          id: 1,</span><br><span class="xml">          name: &#x27;æ‰˜å°¼Â·å±å¤§é¢—&#x27;,</span><br><span class="xml">          gender: &#x27;ç”·&#x27;</span><br><span class="xml">        &#125;</span><br><span class="xml">      &#125;,</span><br><span class="xml">      methods: &#123;&#125;</span><br><span class="xml">    &#125;);</span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br></code></pre></td></tr></table></figure><ol start="3"><li>è¿­ä»£æ•°å­—</li></ol><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-comment">&lt;!-- in åé¢æˆ‘ä»¬æ”¾è¿‡  æ™®é€šæ•°ç»„ï¼Œå¯¹è±¡æ•°ç»„ï¼Œå¯¹è±¡ï¼Œ è¿˜å¯ä»¥æ”¾æ•°å­— --&gt;</span></span><br><span class="xml"><span class="hljs-comment">&lt;!-- æ³¨æ„ï¼šå¦‚æœä½¿ç”¨ v-for è¿­ä»£æ•°å­—çš„è¯ï¼Œå‰é¢çš„ count å€¼ä» 1 å¼€å§‹ --&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;i in 10&quot;</span>&gt;</span>è¿™æ˜¯ç¬¬ </span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">i</span>&#125;&#125;</span><span class="xml"> ä¸ªPæ ‡ç­¾<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br></code></pre></td></tr></table></figure><blockquote><p>2.2.0+ çš„ç‰ˆæœ¬é‡Œï¼Œ<strong>å½“åœ¨ç»„ä»¶ä¸­ä½¿ç”¨</strong> v-for æ—¶ï¼Œkey ç°åœ¨æ˜¯å¿…é¡»çš„ã€‚</p></blockquote><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs xquery"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="xml">  </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span></span><br><span class="xml">    </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">      </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>Id:</span><br><span class="xml">        </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;id&quot;</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><br><br><span class="xml">      </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>Name:</span><br><span class="xml">        </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;name&quot;</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><br><br><span class="xml">      </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;æ·»åŠ &quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;add&quot;</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><br><span class="xml">    <span class="hljs-comment">&lt;!-- æ³¨æ„ï¼š v-for å¾ªç¯çš„æ—¶å€™ï¼Œkey å±æ€§åªèƒ½ä½¿ç”¨ numberæˆ–string --&gt;</span></span><br><span class="xml">    <span class="hljs-comment">&lt;!-- æ³¨æ„ï¼š key åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œå¿…é¡»ä½¿ç”¨ v-bind å±æ€§ç»‘å®šçš„å½¢å¼ï¼ŒæŒ‡å®š key çš„å€¼ --&gt;</span></span><br><span class="xml">    <span class="hljs-comment">&lt;!-- åœ¨ç»„ä»¶ä¸­ï¼Œä½¿ç”¨v-forå¾ªç¯çš„æ—¶å€™ï¼Œæˆ–è€…åœ¨ä¸€äº›ç‰¹æ®Šæƒ…å†µä¸­ï¼Œå¦‚æœ v-for æœ‰é—®é¢˜ï¼Œå¿…é¡» åœ¨ä½¿ç”¨ v-for çš„åŒæ—¶ï¼ŒæŒ‡å®š å”¯ä¸€çš„ å­—ç¬¦ä¸²/æ•°å­— ç±»å‹ :key å€¼ --&gt;</span></span><br><span class="xml">    <span class="hljs-comment">&lt;!--</span></span><span class="xml"><span class="hljs-comment">&lt;p v-for=&quot;item in list&quot;&gt;</span></span><br><span class="xml">      </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span>&gt;</span></span><span class="xquery">&#123;&#123;<span class="hljs-type">item</span><span class="hljs-built_in">.id</span>&#125;</span><span class="xml">&#125; --- </span><span class="xquery">&#123;&#123;<span class="hljs-type">item</span><span class="hljs-built_in">.name</span>&#125;</span><span class="xml">&#125;</span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><span class="xml">--&gt;</span><br><span class="xml">    </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;item in list&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;item.id&quot;</span>&gt;</span></span><br><span class="xml">      </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span>&gt;</span></span><span class="xquery">&#123;&#123;<span class="hljs-type">item</span><span class="hljs-built_in">.id</span>&#125;</span><span class="xml">&#125; --- </span><span class="xquery">&#123;&#123;<span class="hljs-type">item</span><span class="hljs-built_in">.name</span>&#125;</span><span class="xml">&#125;</span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><br><span class="xml">  </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">    // åˆ›å»º Vue å®ä¾‹ï¼Œå¾—åˆ° ViewModel</span><br><span class="xml">    var vm = new Vue(</span><span class="xquery">&#123;</span><br><span class="xquery">      el: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="xquery">      data: &#123;</span><br><span class="xquery">       <span class="hljs-built_in"> id</span>: <span class="hljs-string">&#x27;&#x27;</span>,</span><br><span class="xquery">       <span class="hljs-built_in"> name</span>: <span class="hljs-string">&#x27;&#x27;</span>,</span><br><span class="xquery">        list: [</span><br><span class="xquery">          &#123;<span class="hljs-built_in"> id</span>: <span class="hljs-number">1</span>,<span class="hljs-built_in"> name</span>: <span class="hljs-string">&#x27;ææ–¯&#x27;</span> &#125;</span><span class="xml">,</span><br><span class="xml">          </span><span class="xquery">&#123;<span class="hljs-built_in"> id</span>: <span class="hljs-number">2</span>,<span class="hljs-built_in"> name</span>: <span class="hljs-string">&#x27;å¬´æ”¿&#x27;</span> &#125;</span><span class="xml">,</span><br><span class="xml">          </span><span class="xquery">&#123;<span class="hljs-built_in"> id</span>: <span class="hljs-number">3</span>,<span class="hljs-built_in"> name</span>: <span class="hljs-string">&#x27;èµµé«˜&#x27;</span> &#125;</span><span class="xml">,</span><br><span class="xml">          </span><span class="xquery">&#123;<span class="hljs-built_in"> id</span>: <span class="hljs-number">4</span>,<span class="hljs-built_in"> name</span>: <span class="hljs-string">&#x27;éŸ©é&#x27;</span> &#125;</span><span class="xml">,</span><br><span class="xml">          </span><span class="xquery">&#123;<span class="hljs-built_in"> id</span>: <span class="hljs-number">5</span>,<span class="hljs-built_in"> name</span>: <span class="hljs-string">&#x27;è€å­&#x27;</span> &#125;</span><br><span class="xml">        ]</span><br><span class="xml">      &#125;,</span><br><span class="xml">      methods: </span><span class="xquery">&#123;</span><br><span class="xquery">        add() &#123; // æ·»åŠ æ–¹æ³•</span><br><span class="xquery">          //this.list.push(&#123;<span class="hljs-built_in"> id</span>: this<span class="hljs-built_in">.id</span>,<span class="hljs-built_in"> name</span>: this<span class="hljs-built_in">.name</span> &#125;</span><span class="xml">)</span><br><span class="xml">          this.list.unshift(</span><span class="xquery">&#123;<span class="hljs-built_in"> id</span>: this<span class="hljs-built_in">.id</span>,<span class="hljs-built_in"> name</span>: this<span class="hljs-built_in">.name</span> &#125;</span><span class="xml">)</span><br><span class="xml">        &#125;</span><br><span class="xml">      &#125;</span><br><span class="xml">    &#125;);</span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p>å½“ Vue.js ç”¨ v-for æ­£åœ¨æ›´æ–°å·²æ¸²æŸ“è¿‡çš„å…ƒç´ åˆ—è¡¨æ—¶ï¼Œå®ƒé»˜è®¤ç”¨ â€œ<strong>å°±åœ°å¤ç”¨</strong>â€ ç­–ç•¥ã€‚å¦‚æœæ•°æ®é¡¹çš„é¡ºåºè¢«æ”¹å˜ï¼ŒVueå°†<strong>ä¸æ˜¯ç§»åŠ¨ DOM å…ƒç´ æ¥åŒ¹é…æ•°æ®é¡¹çš„é¡ºåº</strong>ï¼Œ è€Œæ˜¯<strong>ç®€å•å¤ç”¨æ­¤å¤„æ¯ä¸ªå…ƒç´ </strong>ï¼Œå¹¶ä¸”ç¡®ä¿å®ƒåœ¨ç‰¹å®šç´¢å¼•ä¸‹æ˜¾ç¤ºå·²è¢«æ¸²æŸ“è¿‡çš„æ¯ä¸ªå…ƒç´ ã€‚</p><p>ä¸ºäº†ç»™ Vue ä¸€ä¸ªæç¤ºï¼Œ<strong>ä»¥ä¾¿å®ƒèƒ½è·Ÿè¸ªæ¯ä¸ªèŠ‚ç‚¹çš„èº«ä»½ï¼Œä»è€Œé‡ç”¨å’Œé‡æ–°æ’åºç°æœ‰å…ƒç´ </strong>ï¼Œä½ éœ€è¦ä¸ºæ¯é¡¹æä¾›ä¸€ä¸ªå”¯ä¸€ key å±æ€§ã€‚</p><h2 id="VueæŒ‡ä»¤ä¹‹v-ifå’Œv-show"><a href="#VueæŒ‡ä»¤ä¹‹v-ifå’Œv-show" class="headerlink" title="VueæŒ‡ä»¤ä¹‹v-ifå’Œv-show"></a>VueæŒ‡ä»¤ä¹‹<code>v-if</code>å’Œ<code>v-show</code></h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- &lt;input type=&quot;button&quot; value=&quot;toggle&quot; @click=&quot;toggle&quot;&gt; --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;toggle&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;flag=!flag&quot;</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- v-if çš„ç‰¹ç‚¹ï¼šæ¯æ¬¡éƒ½ä¼šé‡æ–°åˆ é™¤æˆ–åˆ›å»ºå…ƒç´  --&gt;</span><br>    <span class="hljs-comment">&lt;!-- v-show çš„ç‰¹ç‚¹ï¼š æ¯æ¬¡ä¸ä¼šé‡æ–°è¿›è¡ŒDOMçš„åˆ é™¤å’Œåˆ›å»ºæ“ä½œï¼Œåªæ˜¯åˆ‡æ¢äº†å…ƒç´ çš„ display:none æ ·å¼ --&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- v-if æœ‰è¾ƒé«˜çš„åˆ‡æ¢æ€§èƒ½æ¶ˆè€— --&gt;</span><br>    <span class="hljs-comment">&lt;!-- v-show æœ‰è¾ƒé«˜çš„åˆå§‹æ¸²æŸ“æ¶ˆè€— --&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- å¦‚æœå…ƒç´ æ¶‰åŠåˆ°é¢‘ç¹çš„åˆ‡æ¢ï¼Œæœ€å¥½ä¸è¦ä½¿ç”¨ v-if, è€Œæ˜¯æ¨èä½¿ç”¨ v-show --&gt;</span><br>    <span class="hljs-comment">&lt;!-- å¦‚æœå…ƒç´ å¯èƒ½æ°¸è¿œä¹Ÿä¸ä¼šè¢«æ˜¾ç¤ºå‡ºæ¥è¢«ç”¨æˆ·çœ‹åˆ°ï¼Œåˆ™æ¨èä½¿ç”¨ v-if --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;flag&quot;</span>&gt;</span>è¿™æ˜¯ç”¨v-ifæ§åˆ¶çš„å…ƒç´ <span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">v-show</span>=<span class="hljs-string">&quot;flag&quot;</span>&gt;</span>è¿™æ˜¯ç”¨v-showæ§åˆ¶çš„å…ƒç´ <span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">    <span class="hljs-comment">// åˆ›å»º Vue å®ä¾‹ï¼Œå¾—åˆ° ViewModel</span></span><br><span class="javascript">    <span class="hljs-keyword">var</span> vm = <span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">      el: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br>      data: &#123;<br><span class="javascript">        flag: <span class="hljs-literal">false</span></span><br>      &#125;,<br>      methods: &#123;<br>        /* toggle() &#123;<br><span class="javascript">          <span class="hljs-built_in">this</span>.flag = !<span class="hljs-built_in">this</span>.flag</span><br>        &#125; */<br>      &#125;<br>    &#125;);<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure><blockquote><p>ä¸€èˆ¬æ¥è¯´ï¼Œv-if æœ‰æ›´é«˜çš„åˆ‡æ¢æ¶ˆè€—è€Œ v-show æœ‰æ›´é«˜çš„åˆå§‹æ¸²æŸ“æ¶ˆè€—ã€‚å› æ­¤ï¼Œå¦‚æœéœ€è¦é¢‘ç¹åˆ‡æ¢ v-show è¾ƒå¥½ï¼Œå¦‚æœåœ¨è¿è¡Œæ—¶æ¡ä»¶ä¸å¤§å¯èƒ½æ”¹å˜ v-if è¾ƒå¥½ã€‚</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- 1. MVC å’Œ MVVM çš„åŒºåˆ« --&gt;</span><br><span class="hljs-comment">&lt;!-- 2. å­¦ä¹ äº†Vueä¸­æœ€åŸºæœ¬ä»£ç çš„ç»“æ„ --&gt;</span><br><span class="hljs-comment">&lt;!-- 3. æ’å€¼è¡¨è¾¾å¼   v-cloak   v-text   v-html   v-bindï¼ˆç¼©å†™æ˜¯:ï¼‰   v-onï¼ˆç¼©å†™æ˜¯@ï¼‰   v-model   v-for   v-if     v-show --&gt;</span><br><span class="hljs-comment">&lt;!-- 4. äº‹ä»¶ä¿®é¥°ç¬¦  ï¼š  .stop   .prevent   .capture   .self     .once --&gt;</span><br><span class="hljs-comment">&lt;!-- 5. el  æŒ‡å®šè¦æ§åˆ¶çš„åŒºåŸŸ    data æ˜¯ä¸ªå¯¹è±¡ï¼ŒæŒ‡å®šäº†æ§åˆ¶çš„åŒºåŸŸå†…è¦ç”¨åˆ°çš„æ•°æ®    methods è™½ç„¶å¸¦ä¸ªsåç¼€ï¼Œä½†æ˜¯æ˜¯ä¸ªå¯¹è±¡ï¼Œè¿™é‡Œå¯ä»¥è‡ªå®šä¹‰äº†æ–¹æ³• --&gt;</span><br><span class="hljs-comment">&lt;!-- 6. åœ¨ VM å®ä¾‹ä¸­ï¼Œå¦‚æœè¦è®¿é—® data ä¸Šçš„æ•°æ®ï¼Œæˆ–è€…è¦è®¿é—® methods ä¸­çš„æ–¹æ³•ï¼Œ å¿…é¡»å¸¦ this --&gt;</span><br><span class="hljs-comment">&lt;!-- 7. åœ¨ v-for è¦ä¼šä½¿ç”¨ key å±æ€§ ï¼ˆåªæ¥å— string / numberï¼‰ --&gt;</span><br><span class="hljs-comment">&lt;!-- 8. v-model åªèƒ½åº”ç”¨äºè¡¨å•å…ƒç´  --&gt;</span><br><span class="hljs-comment">&lt;!-- 9. åœ¨vueä¸­ç»‘å®šæ ·å¼ä¸¤ç§æ–¹å¼  v-bind:class   v-bind:style --&gt;</span><br></code></pre></td></tr></table></figure><h2 id="ç›¸å…³æ–‡ç« "><a href="#ç›¸å…³æ–‡ç« " class="headerlink" title="ç›¸å…³æ–‡ç« "></a>ç›¸å…³æ–‡ç« </h2><ol><li><a href="https://v1-cn.vuejs.org/">vue.js 1.x æ–‡æ¡£</a></li><li><a href="https://cn.vuejs.org/">vue.js 2.x æ–‡æ¡£</a></li><li><a href="http://www.css88.com/archives/7715">String.prototype.padStart(maxLength, fillString)</a></li><li><a href="http://www.cnblogs.com/wuhua1/p/6686237.html">js é‡Œé¢çš„é”®ç›˜äº‹ä»¶å¯¹åº”çš„é”®ç </a></li><li><a href="http://www.cnblogs.com/kidney/p/6052935.html">Vue.jsåŒå‘ç»‘å®šçš„å®ç°åŸç†</a></li></ol>]]></content>
    
    
    <categories>
      
      <category>Vue.js</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ¡†æ¶å’Œåº“</tag>
      
      <tag>MVCä¸MVVM</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Javaä¸­çš„åå°„æœºåˆ¶:å¯¹è±¡æ‹·è´</title>
    <link href="/2019/10/31/Java%E4%B8%AD%E7%9A%84%E5%8F%8D%E5%B0%84%E6%9C%BA%E5%88%B6-%E5%AF%B9%E8%B1%A1%E6%8B%B7%E8%B4%9D/"/>
    <url>/2019/10/31/Java%E4%B8%AD%E7%9A%84%E5%8F%8D%E5%B0%84%E6%9C%BA%E5%88%B6-%E5%AF%B9%E8%B1%A1%E6%8B%B7%E8%B4%9D/</url>
    
    <content type="html"><![CDATA[<h3 id="Javaä¸­çš„åå°„æœºåˆ¶ï¼šå®ç°å¯¹è±¡æ‹·è´"><a href="#Javaä¸­çš„åå°„æœºåˆ¶ï¼šå®ç°å¯¹è±¡æ‹·è´" class="headerlink" title="Javaä¸­çš„åå°„æœºåˆ¶ï¼šå®ç°å¯¹è±¡æ‹·è´"></a>Javaä¸­çš„åå°„æœºåˆ¶ï¼šå®ç°å¯¹è±¡æ‹·è´</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs typescript">package edu.zzu.stu.liao;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Student</span> </span>&#123;<br><span class="hljs-keyword">private</span> int id;<br><span class="hljs-keyword">private</span> <span class="hljs-built_in">String</span> nm;<br><span class="hljs-keyword">private</span> int age;<br><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-title">Student</span>(<span class="hljs-params"></span>)</span> &#123;<br><span class="hljs-built_in">this</span>.id=<span class="hljs-number">0</span>;<br><span class="hljs-built_in">this</span>.age=<span class="hljs-number">0</span>;<br><span class="hljs-built_in">this</span>.nm=<span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-title">Student</span>(<span class="hljs-params">int id,<span class="hljs-built_in">String</span> name,int age</span>)</span> &#123;<br><span class="hljs-built_in">this</span>.id=id;<br><span class="hljs-built_in">this</span>.age=age;<br><span class="hljs-built_in">this</span>.nm=name;<br>&#125;<br><span class="hljs-keyword">public</span> int <span class="hljs-function"><span class="hljs-title">getId</span>(<span class="hljs-params"></span>)</span> &#123;<br><span class="hljs-keyword">return</span> id;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">setId</span>(<span class="hljs-params">int id</span>)</span> &#123;<br><span class="hljs-built_in">this</span>.id=id;<br>&#125;<br><br><span class="hljs-keyword">public</span> int <span class="hljs-function"><span class="hljs-title">getAge</span>(<span class="hljs-params"></span>)</span> &#123;<br><span class="hljs-keyword">return</span> age;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">setAge</span>(<span class="hljs-params">int age</span>)</span> &#123;<br><span class="hljs-built_in">this</span>.age=age;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-built_in">String</span> <span class="hljs-function"><span class="hljs-title">getNm</span>(<span class="hljs-params"></span>)</span> &#123;<br><span class="hljs-keyword">return</span> nm;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">setNm</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> name</span>)</span> &#123;<br><span class="hljs-built_in">this</span>.nm=name;<br>&#125;<br><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-built_in">String</span> <span class="hljs-function"><span class="hljs-title">toString</span>(<span class="hljs-params"></span>)</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-string">&quot;[id=&quot;</span>+id+<span class="hljs-string">&quot;,name=&quot;</span>+nm+<span class="hljs-string">&quot;,age=&quot;</span>+age+<span class="hljs-string">&quot;getClass()=&quot;</span>+getClass()+<span class="hljs-string">&quot;,hashCode()=&quot;</span>+hashCode()+<span class="hljs-string">&quot;]&quot;</span>;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">package edu.zzu.stu.liao;<br><br><span class="hljs-keyword">import</span> java.lang.reflect.Constructor;<br><span class="hljs-keyword">import</span> java.lang.reflect.Field;<br><span class="hljs-keyword">import</span> java.lang.reflect.InvocationTargetException;<br><span class="hljs-keyword">import</span> java.lang.reflect.<span class="hljs-keyword">Method</span>;<br><br><span class="hljs-built_in">public</span> <span class="hljs-keyword">class</span> CopyStu &#123;<br><span class="hljs-built_in">public</span> <span class="hljs-keyword">Object</span> <span class="hljs-keyword">copy</span>(<span class="hljs-keyword">Object</span> <span class="hljs-keyword">object</span>) throws NoSuchMethodException, SecurityException, InstantiationException, IllegalAccessException, IllegalArgumentException, InvocationTargetException &#123;<br><br><span class="hljs-keyword">Class</span>&lt;?&gt; classType=<span class="hljs-keyword">object</span>.getClass();<br><br>// è·å¾—Constructorå¯¹è±¡,æ­¤å¤„è·å–ç¬¬ä¸€ä¸ªæ— å‚æ•°çš„æ„é€ æ–¹æ³•çš„ï¼Œéœ€è¦ç”¨æ— å‚æ„é€ æ–¹æ³•æ¥ç”Ÿæˆä¸€ä¸ªå¯¹è±¡<br>Constructor&lt;?&gt; cons=classType.getConstructor(<span class="hljs-built_in">new</span> <span class="hljs-keyword">Class</span>[] &#123;&#125;);<br>// é€šè¿‡æ— å‚æ„é€ æ–¹æ³•æ¥ç”Ÿæˆä¸€ä¸ªå¯¹è±¡<br><span class="hljs-keyword">Object</span> objectCopy=cons.newInstance(<span class="hljs-built_in">new</span> <span class="hljs-keyword">Object</span>[] &#123;&#125;);<br>// ä»¥ä¸Šä¸¤è¡Œä»£ç ç­‰ä»·äºï¼š<br>        // <span class="hljs-keyword">Object</span> objectCopy = classType.newInstance();  // è¿™è¡Œä»£ç æ— æ³•å¤„ç†æ„é€ å‡½æ•°æœ‰å‚æ•°çš„æƒ…å†µ<br><br>//ç”¨ç¬¬äºŒä¸ªå¸¦å‚æ•°çš„æ„é€ æ–¹æ³•ç”Ÿæˆå¯¹è±¡<br>//        Constructor cons = classType.getConstructor(<span class="hljs-built_in">new</span> <span class="hljs-keyword">Class</span>[] &#123;<span class="hljs-type">int</span>.<span class="hljs-keyword">class</span>, String.<span class="hljs-keyword">class</span>, <span class="hljs-type">int</span>.<span class="hljs-keyword">class</span>&#125;);<br>//        <span class="hljs-keyword">Object</span> objectCopy = cons.newInstance(<span class="hljs-built_in">new</span> <span class="hljs-keyword">Object</span>[] &#123;<span class="hljs-number">1</span>, &quot;ZhangSan&quot;,<span class="hljs-number">20</span>&#125;);<br>        <br>Field[] fields=classType.getDeclaredFields();<br><span class="hljs-keyword">for</span>(Field field:fields) &#123;<br>//è·å–æˆå‘˜å˜é‡çš„åå­—ï¼Œæ­¤å¤„ä¸ºidï¼Œ<span class="hljs-type">name</span>ï¼Œage<br>String fieldName=field.getName();<br><br>//å°†å±æ€§çš„é¦–å­—æ¯è½¬æ¢ä¸ºå¤§å†™,ç”¨æ¥æ‹¼æ¥<span class="hljs-keyword">set</span>å’Œ<span class="hljs-keyword">get</span>æ–¹æ³•å<br>String <span class="hljs-keyword">set</span>=&quot;set&quot;+fieldName.substring(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>).toUpperCase()+fieldName.substring(<span class="hljs-number">1</span>);<br>String <span class="hljs-keyword">get</span>=&quot;get&quot;+fieldName.substring(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>).toUpperCase()+fieldName.substring(<span class="hljs-number">1</span>);<br><br>//è·å–<span class="hljs-keyword">get</span>æ–¹æ³•å¯¹è±¡<br><span class="hljs-keyword">Method</span> method_get=classType.getMethod(<span class="hljs-keyword">get</span>,<span class="hljs-built_in">new</span> <span class="hljs-keyword">Class</span>[] &#123;&#125;);<br><br>//è·å–<span class="hljs-keyword">set</span>æ–¹æ³•å¯¹è±¡<br>//æ³¨æ„è½¬å…¥å±æ€§å‚æ•°ç±»å‹ï¼Œé€šè¿‡ <span class="hljs-built_in">new</span> <span class="hljs-keyword">Class</span>[] &#123;field.getType()&#125;<br><span class="hljs-keyword">Method</span> method_set=classType.getMethod(<span class="hljs-keyword">set</span>,<span class="hljs-built_in">new</span> <span class="hljs-keyword">Class</span>[] &#123;field.getType()&#125;);//æ³¨æ„è½¬å…¥å±æ€§å‚æ•°ç±»å‹<br><br>//è°ƒç”¨<span class="hljs-keyword">get</span>æ–¹æ³•è·å–æºå¯¹è±¡çš„å€¼<br><span class="hljs-keyword">Object</span> returnVal=method_get.invoke(<span class="hljs-keyword">object</span>,<span class="hljs-built_in">new</span> <span class="hljs-keyword">Object</span>[] &#123;&#125;);<br><br>//è°ƒç”¨<span class="hljs-keyword">set</span>æ–¹æ³•å°†è¿™ä¸ªå€¼å¤åˆ¶åˆ°ç›®çš„å¯¹è±¡ä¸­å»<br>method_set.invoke(objectCopy, <span class="hljs-built_in">new</span> <span class="hljs-keyword">Object</span>[] &#123;returnVal&#125;);<br>&#125;<br><span class="hljs-keyword">return</span> objectCopy;<br>&#125;<br><span class="hljs-built_in">public</span> static <span class="hljs-type">void</span> main(String[] args) throws NoSuchMethodException, SecurityException, InstantiationException, IllegalAccessException, IllegalArgumentException, InvocationTargetException &#123;<br><br>Student student1=<span class="hljs-built_in">new</span> Student(<span class="hljs-number">1</span>,&quot;xiaoming&quot;,<span class="hljs-number">18</span>);<br><br>CopyStu copyStu=<span class="hljs-built_in">new</span> CopyStu();<br>Student student2=(Student)copyStu.<span class="hljs-keyword">copy</span>(student1);<br><br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(&quot;student1:&quot;+student1.toString());<br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(&quot;student2:&quot;+student2.toString());<br><br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="/2019/10/31/Java%E4%B8%AD%E7%9A%84%E5%8F%8D%E5%B0%84%E6%9C%BA%E5%88%B6-%E5%AF%B9%E8%B1%A1%E6%8B%B7%E8%B4%9D/result.png" alt="111"></p>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>åå°„æœºåˆ¶</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>C++STLå®¹å™¨Arrayï¼ˆäºŒï¼‰</title>
    <link href="/2019/10/30/C-STL%E5%AE%B9%E5%99%A8Array/"/>
    <url>/2019/10/30/C-STL%E5%AE%B9%E5%99%A8Array/</url>
    
    <content type="html"><![CDATA[<p><img src="/2019/10/30/C-STL%E5%AE%B9%E5%99%A8Array/containerstruct.png" alt="1"></p><h3 id="ä¹‹åå®¹å™¨æµ‹è¯•ç”¨ä¾‹çš„-è¾…åŠ©å‡½æ•°ä»‹ç»"><a href="#ä¹‹åå®¹å™¨æµ‹è¯•ç”¨ä¾‹çš„-è¾…åŠ©å‡½æ•°ä»‹ç»" class="headerlink" title="ä¹‹åå®¹å™¨æµ‹è¯•ç”¨ä¾‹çš„ è¾…åŠ©å‡½æ•°ä»‹ç»"></a>ä¹‹åå®¹å™¨æµ‹è¯•ç”¨ä¾‹çš„ è¾…åŠ©å‡½æ•°ä»‹ç»</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">long</span> <span class="hljs-title">get_a_target_long</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-keyword">long</span> target=<span class="hljs-number">0</span>;<br>    <span class="hljs-built_in">cout</span>&lt;&lt;<span class="hljs-string">&quot;target (0~&quot;</span>&lt;&lt;RAND_MAX&lt;&lt;<span class="hljs-string">&quot;): &quot;</span>;<br>    <span class="hljs-built_in">cin</span>&gt;&gt;target;<br>    <span class="hljs-keyword">return</span> target;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-built_in">string</span> <span class="hljs-title">get_a_target_string</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-keyword">long</span> target=<span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">char</span> buf[<span class="hljs-number">10</span>];<br>    <span class="hljs-built_in">cout</span>&lt;&lt;<span class="hljs-string">&quot;target (0~&quot;</span>&lt;&lt;RAND_MAX&lt;&lt;<span class="hljs-string">&quot;): &quot;</span>;<br>    <span class="hljs-built_in">cin</span>&gt;&gt;target;<br>    <span class="hljs-built_in">snprintf</span>(buf,<span class="hljs-number">10</span>,<span class="hljs-string">&quot;%d&quot;</span>,target);<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">string</span>(buf);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">compareLongs</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span>* a,<span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span>* b)</span></span>&#123;<br>    <span class="hljs-keyword">return</span> (*(<span class="hljs-keyword">long</span>*)a - *(<span class="hljs-keyword">long</span>*)b );<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">compareStrings</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span>* a,<span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span>* b)</span></span>&#123;<br>    <span class="hljs-keyword">if</span>(*(<span class="hljs-built_in">string</span>*)a &gt; *(<span class="hljs-built_in">string</span>*)b )&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(*(<span class="hljs-built_in">string</span>*)a &lt; *(<span class="hljs-built_in">string</span>*)b )&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<span class="hljs-keyword">else</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Array"><a href="#Array" class="headerlink" title="Array"></a>Array</h3><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;array&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;ctime&gt; </span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdlib&gt; //qsort, bsearch, NULL</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> ASIZE 50000</span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><span class="hljs-keyword">namespace</span> jj01<br>&#123;<br><span class="hljs-function"><span class="hljs-keyword">long</span> <span class="hljs-title">get_a_target_long</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">long</span> target = <span class="hljs-number">0</span>;<br><br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;target (0~&quot;</span> &lt;&lt; RAND_MAX &lt;&lt; <span class="hljs-string">&quot;): &quot;</span>;<br><span class="hljs-built_in">cin</span> &gt;&gt; target;<br><span class="hljs-keyword">return</span> target;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">compareLongs</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span>* a, <span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span>* b)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">return</span> (*(<span class="hljs-keyword">long</span>*)a - *(<span class="hljs-keyword">long</span>*)b);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test_array</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;\ntest_array().......... \n&quot;</span>;<br><br><span class="hljs-built_in">array</span>&lt;<span class="hljs-keyword">long</span>, ASIZE&gt; c;<br><br><span class="hljs-keyword">clock_t</span> timeStart = clock();<br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">long</span> i = <span class="hljs-number">0</span>; i &lt; ASIZE; ++i) &#123;<br>c[i] = rand();<br>&#125;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;milli-seconds : &quot;</span> &lt;&lt; (clock() - timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<span class="hljs-comment">//</span><br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;array.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;array.front()= &quot;</span> &lt;&lt; c.front() &lt;&lt; <span class="hljs-string">&quot; = array[0]= &quot;</span> &lt;&lt; c[<span class="hljs-number">0</span>] &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;array.back()= &quot;</span> &lt;&lt; c.back() &lt;&lt; <span class="hljs-string">&quot; = array[length-1]= &quot;</span> &lt;&lt; c[<span class="hljs-number">49999</span>] &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;array.data()= &quot;</span> &lt;&lt; c.data() &lt;&lt; <span class="hljs-string">&quot; = &amp;array[0]= &quot;</span> &lt;&lt; &amp;c[<span class="hljs-number">0</span>] &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br><span class="hljs-keyword">long</span> target = get_a_target_long();<br><br>timeStart = clock();<br>::qsort(c.data(), ASIZE, <span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">long</span>), compareLongs);<br><span class="hljs-keyword">long</span>* pItem = (<span class="hljs-keyword">long</span>*)::bsearch(&amp;target, (c.data()), ASIZE, <span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">long</span>), compareLongs);<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;qsort()+bsearch(), milli-seconds : &quot;</span> &lt;&lt; (clock() - timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<span class="hljs-comment">//    </span><br><span class="hljs-keyword">if</span> (pItem != <span class="hljs-literal">NULL</span>)<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;found, &quot;</span> &lt;&lt; *pItem &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-keyword">else</span><br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;not found! &quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>&#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>jj01::test_array();<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="/2019/10/30/C-STL%E5%AE%B9%E5%99%A8Array/arrayresult.png" alt="as"></p><h3 id="Vector"><a href="#Vector" class="headerlink" title="Vector"></a>Vector</h3><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdexcept&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdlib&gt; //abort()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdio&gt;  //snprintf()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;ctime&gt; </span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;algorithm&gt; //sort()</span></span><br><span class="hljs-keyword">namespace</span> jj02<br>&#123;<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test_vector</span><span class="hljs-params">(<span class="hljs-keyword">long</span>&amp; value)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;\ntest_vector().......... \n&quot;</span>;<br>     <br><span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">string</span>&gt; c;  <br><span class="hljs-keyword">char</span> buf[<span class="hljs-number">10</span>];<br><br><span class="hljs-keyword">clock_t</span> timeStart = clock();<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> i=<span class="hljs-number">0</span>; i&lt; value; ++i)<br>    &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-built_in">snprintf</span>(buf, <span class="hljs-number">10</span>, <span class="hljs-string">&quot;%d&quot;</span>, rand());<br>        c.push_back(<span class="hljs-built_in">string</span>(buf));     <br>&#125;<br><span class="hljs-keyword">catch</span>(exception&amp; p) &#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;i=&quot;</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; p.what() &lt;&lt; <span class="hljs-built_in">endl</span>;<br>     <span class="hljs-comment">//æ›¾ç¶“æœ€é«˜ i=58389486 then std::bad_alloc</span><br><span class="hljs-built_in">abort</span>();<br>&#125;<br>&#125;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;vector.max_size()= &quot;</span> &lt;&lt; c.max_size() &lt;&lt; <span class="hljs-built_in">endl</span>;<span class="hljs-comment">//1073747823</span><br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;vector.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;vector.front()= &quot;</span> &lt;&lt; c.front() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;vector.back()= &quot;</span> &lt;&lt; c.back() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;vector.data()= &quot;</span> &lt;&lt; c.data() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;vector.capacity()= &quot;</span> &lt;&lt; c.capacity() &lt;&lt; <span class="hljs-built_in">endl</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br><br><span class="hljs-built_in">string</span> target = get_a_target_string();<br>    &#123;<br>timeStart = clock();<br><span class="hljs-keyword">auto</span> pItem = <span class="hljs-built_in">find</span>(c.<span class="hljs-built_in">begin</span>(), c.<span class="hljs-built_in">end</span>(), target);<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;std::find(), milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;  <br> <br>  <span class="hljs-keyword">if</span> (pItem != c.<span class="hljs-built_in">end</span>())<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;found, &quot;</span> &lt;&lt; *pItem &lt;&lt; <span class="hljs-built_in">endl</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>  <span class="hljs-keyword">else</span><br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;not found! &quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    &#125;<br><br>&#123;<br>timeStart = clock();<br>    sort(c.<span class="hljs-built_in">begin</span>(), c.<span class="hljs-built_in">end</span>());<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;sort(), milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>; <br><br>timeStart = clock();    <br><span class="hljs-built_in">string</span>* pItem = (<span class="hljs-built_in">string</span>*)::bsearch(&amp;target, (c.data()), <br>                                   c.<span class="hljs-built_in">size</span>(), <span class="hljs-keyword">sizeof</span>(<span class="hljs-built_in">string</span>), compareStrings); <br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;bsearch(), milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>; <br>   <br>  <span class="hljs-keyword">if</span> (pItem != <span class="hljs-literal">NULL</span>)<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;found, &quot;</span> &lt;&lt; *pItem &lt;&lt; <span class="hljs-built_in">endl</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>  <span class="hljs-keyword">else</span><br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;not found! &quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>&#125;<br><br>c.<span class="hljs-built_in">clear</span>();<br>test_moveable(<span class="hljs-built_in">vector</span>&lt;MyString&gt;(),<span class="hljs-built_in">vector</span>&lt;MyStrNoMove&gt;(), value);<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>C++STLæ ‡å‡†æ¨¡æ¿åº“</category>
      
    </categories>
    
    
    <tags>
      
      <tag>STL</tag>
      
      <tag>C++</tag>
      
      <tag>æ¨¡æ¿ç¼–ç¨‹</tag>
      
      <tag>ç®—æ³•</tag>
      
      <tag>æ•°æ®ç»“æ„</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>C++STLå®¹å™¨åˆ†ç±»ï¼ˆäºŒï¼‰</title>
    <link href="/2019/10/30/C-STL%E5%AE%B9%E5%99%A8Deque/"/>
    <url>/2019/10/30/C-STL%E5%AE%B9%E5%99%A8Deque/</url>
    
    <content type="html"><![CDATA[<p><img src="/2019/10/30/C-STL%E5%AE%B9%E5%99%A8Deque/containerstruct.png" alt="1"></p><p>ä¹‹åå®¹å™¨æµ‹è¯•ç”¨ä¾‹çš„ è¾…åŠ©å‡½æ•°</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">using</span> <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cin</span>;<br><span class="hljs-keyword">using</span> <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span>;<br><span class="hljs-keyword">using</span> <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>;<br><br><span class="hljs-function"><span class="hljs-keyword">long</span> <span class="hljs-title">get_a_target_long</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-keyword">long</span> target=<span class="hljs-number">0</span>;<br>    <span class="hljs-built_in">cout</span>&lt;&lt;<span class="hljs-string">&quot;target (0~&quot;</span>&lt;&lt;RAND_MAX&lt;&lt;<span class="hljs-string">&quot;): &quot;</span>;<br>    <span class="hljs-built_in">cin</span>&gt;&gt;target;<br>    <span class="hljs-keyword">return</span> target;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-built_in">string</span> <span class="hljs-title">get_a_target_string</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-keyword">long</span> target=<span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">char</span> buf[<span class="hljs-number">10</span>];<br>    <span class="hljs-built_in">cout</span>&lt;&lt;<span class="hljs-string">&quot;target (0~&quot;</span>&lt;&lt;RAND_MAX&lt;&lt;<span class="hljs-string">&quot;): &quot;</span>;<br>    <span class="hljs-built_in">cin</span>&gt;&gt;target;<br>    <span class="hljs-built_in">snprintf</span>(buf,<span class="hljs-number">10</span>,<span class="hljs-string">&quot;%d&quot;</span>,target);<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">string</span>(buf);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">compareLongs</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span>* a,<span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span>* b)</span></span>&#123;<br>    <span class="hljs-keyword">return</span> (*(<span class="hljs-keyword">long</span>*)a - *(<span class="hljs-keyword">long</span>*)b );<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">compareStrings</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span>* a,<span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span>* b)</span></span>&#123;<br>    <span class="hljs-keyword">if</span>(*(<span class="hljs-built_in">string</span>*)a &gt; *(<span class="hljs-built_in">string</span>*)b )&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(*(<span class="hljs-built_in">string</span>*)a &lt; *(<span class="hljs-built_in">string</span>*)b )&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<span class="hljs-keyword">else</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Array</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;array&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;ctime&gt; </span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdlib&gt; //qsort, bsearch, NULL</span></span><br><br><span class="hljs-keyword">namespace</span> jj01<br>&#123;<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test_array</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;\ntest_array().......... \n&quot;</span>;<br>     <br><span class="hljs-built_in">array</span>&lt;<span class="hljs-keyword">long</span>,ASIZE&gt; c;  <br><br><span class="hljs-keyword">clock_t</span> timeStart = clock();<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> i=<span class="hljs-number">0</span>; i&lt; ASIZE; ++i) &#123;<br>        c[i] = rand(); <br>    &#125;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<span class="hljs-comment">//</span><br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;array.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;array.front()= &quot;</span> &lt;&lt; c.front() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;array.back()= &quot;</span> &lt;&lt; c.back() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;array.data()= &quot;</span> &lt;&lt; c.data() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br><span class="hljs-keyword">long</span> target = get_a_target_long();<br><br>timeStart = clock();<br>    ::qsort(c.data(), ASIZE, <span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">long</span>), compareLongs);<br><span class="hljs-keyword">long</span>* pItem = (<span class="hljs-keyword">long</span>*)::bsearch(&amp;target, (c.data()), ASIZE, <span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">long</span>), compareLongs); <br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;qsort()+bsearch(), milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<span class="hljs-comment">//    </span><br>  <span class="hljs-keyword">if</span> (pItem != <span class="hljs-literal">NULL</span>)<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;found, &quot;</span> &lt;&lt; *pItem &lt;&lt; <span class="hljs-built_in">endl</span>;<br>  <span class="hljs-keyword">else</span><br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;not found! &quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Vector</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdexcept&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdlib&gt; //abort()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdio&gt;  //snprintf()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;ctime&gt; </span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;algorithm&gt; //sort()</span></span><br><span class="hljs-keyword">namespace</span> jj02<br>&#123;<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test_vector</span><span class="hljs-params">(<span class="hljs-keyword">long</span>&amp; value)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;\ntest_vector().......... \n&quot;</span>;<br>     <br><span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">string</span>&gt; c;  <br><span class="hljs-keyword">char</span> buf[<span class="hljs-number">10</span>];<br><br><span class="hljs-keyword">clock_t</span> timeStart = clock();<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> i=<span class="hljs-number">0</span>; i&lt; value; ++i)<br>    &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-built_in">snprintf</span>(buf, <span class="hljs-number">10</span>, <span class="hljs-string">&quot;%d&quot;</span>, rand());<br>        c.push_back(<span class="hljs-built_in">string</span>(buf));     <br>&#125;<br><span class="hljs-keyword">catch</span>(exception&amp; p) &#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;i=&quot;</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; p.what() &lt;&lt; <span class="hljs-built_in">endl</span>;<br>     <span class="hljs-comment">//æ›¾ç¶“æœ€é«˜ i=58389486 then std::bad_alloc</span><br><span class="hljs-built_in">abort</span>();<br>&#125;<br>&#125;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;vector.max_size()= &quot;</span> &lt;&lt; c.max_size() &lt;&lt; <span class="hljs-built_in">endl</span>;<span class="hljs-comment">//1073747823</span><br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;vector.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;vector.front()= &quot;</span> &lt;&lt; c.front() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;vector.back()= &quot;</span> &lt;&lt; c.back() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;vector.data()= &quot;</span> &lt;&lt; c.data() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;vector.capacity()= &quot;</span> &lt;&lt; c.capacity() &lt;&lt; <span class="hljs-built_in">endl</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br><br><span class="hljs-built_in">string</span> target = get_a_target_string();<br>    &#123;<br>timeStart = clock();<br><span class="hljs-keyword">auto</span> pItem = <span class="hljs-built_in">find</span>(c.<span class="hljs-built_in">begin</span>(), c.<span class="hljs-built_in">end</span>(), target);<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;std::find(), milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;  <br> <br>  <span class="hljs-keyword">if</span> (pItem != c.<span class="hljs-built_in">end</span>())<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;found, &quot;</span> &lt;&lt; *pItem &lt;&lt; <span class="hljs-built_in">endl</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>  <span class="hljs-keyword">else</span><br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;not found! &quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    &#125;<br><br>&#123;<br>timeStart = clock();<br>    sort(c.<span class="hljs-built_in">begin</span>(), c.<span class="hljs-built_in">end</span>());<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;sort(), milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>; <br><br>timeStart = clock();    <br><span class="hljs-built_in">string</span>* pItem = (<span class="hljs-built_in">string</span>*)::bsearch(&amp;target, (c.data()), <br>                                   c.<span class="hljs-built_in">size</span>(), <span class="hljs-keyword">sizeof</span>(<span class="hljs-built_in">string</span>), compareStrings); <br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;bsearch(), milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>; <br>   <br>  <span class="hljs-keyword">if</span> (pItem != <span class="hljs-literal">NULL</span>)<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;found, &quot;</span> &lt;&lt; *pItem &lt;&lt; <span class="hljs-built_in">endl</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>  <span class="hljs-keyword">else</span><br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;not found! &quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>&#125;<br><br>c.<span class="hljs-built_in">clear</span>();<br>test_moveable(<span class="hljs-built_in">vector</span>&lt;MyString&gt;(),<span class="hljs-built_in">vector</span>&lt;MyStrNoMove&gt;(), value);<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>List</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;list&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdexcept&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdlib&gt; //abort()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdio&gt;  //snprintf()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;algorithm&gt; //find()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;ctime&gt; </span></span><br><span class="hljs-keyword">namespace</span> jj03<br>&#123;<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test_list</span><span class="hljs-params">(<span class="hljs-keyword">long</span>&amp; value)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;\ntest_list().......... \n&quot;</span>;<br>     <br><span class="hljs-built_in">list</span>&lt;<span class="hljs-built_in">string</span>&gt; c;  <br><span class="hljs-keyword">char</span> buf[<span class="hljs-number">10</span>];<br><br><span class="hljs-keyword">clock_t</span> timeStart = clock();<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> i=<span class="hljs-number">0</span>; i&lt; value; ++i)<br>    &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-built_in">snprintf</span>(buf, <span class="hljs-number">10</span>, <span class="hljs-string">&quot;%d&quot;</span>, rand());<br>        c.push_back(<span class="hljs-built_in">string</span>(buf));    <br>&#125;<br><span class="hljs-keyword">catch</span>(exception&amp; p) &#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;i=&quot;</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; p.what() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">abort</span>();<br>&#125;<br>&#125;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;list.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;list.max_size()= &quot;</span> &lt;&lt; c.max_size() &lt;&lt; <span class="hljs-built_in">endl</span>;    <span class="hljs-comment">//357913941</span><br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;list.front()= &quot;</span> &lt;&lt; c.front() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;list.back()= &quot;</span> &lt;&lt; c.back() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br><span class="hljs-built_in">string</span> target = get_a_target_string();<br>    timeStart = clock();<br><span class="hljs-keyword">auto</span> pItem = <span class="hljs-built_in">find</span>(c.<span class="hljs-built_in">begin</span>(), c.<span class="hljs-built_in">end</span>(), target);<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;std::find(), milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br>  <span class="hljs-keyword">if</span> (pItem != c.<span class="hljs-built_in">end</span>())<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;found, &quot;</span> &lt;&lt; *pItem &lt;&lt; <span class="hljs-built_in">endl</span>;<br>  <span class="hljs-keyword">else</span><br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;not found! &quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    <br>    timeStart = clock();<br>c.sort();<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;c.sort(), milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;    <br>    <br>c.<span class="hljs-built_in">clear</span>();<br>test_moveable(<span class="hljs-built_in">list</span>&lt;MyString&gt;(),<span class="hljs-built_in">list</span>&lt;MyStrNoMove&gt;(), value);<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Forward-List</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;forward_list&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdexcept&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdlib&gt; //abort()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdio&gt;  //snprintf()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;ctime&gt; </span></span><br><span class="hljs-keyword">namespace</span> jj04<br>&#123;<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test_forward_list</span><span class="hljs-params">(<span class="hljs-keyword">long</span>&amp; value)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;\ntest_forward_list().......... \n&quot;</span>;<br>     <br>forward_list&lt;<span class="hljs-built_in">string</span>&gt; c;  <br><span class="hljs-keyword">char</span> buf[<span class="hljs-number">10</span>];<br><br><span class="hljs-keyword">clock_t</span> timeStart = clock();<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> i=<span class="hljs-number">0</span>; i&lt; value; ++i)<br>    &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-built_in">snprintf</span>(buf, <span class="hljs-number">10</span>, <span class="hljs-string">&quot;%d&quot;</span>, rand());<br>        c.push_front(<span class="hljs-built_in">string</span>(buf));     <br>&#125;<br><span class="hljs-keyword">catch</span>(exception&amp; p) &#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;i=&quot;</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; p.what() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">abort</span>();<br>&#125;<br>&#125;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;forward_list.max_size()= &quot;</span> &lt;&lt; c.max_size() &lt;&lt; <span class="hljs-built_in">endl</span>;  <span class="hljs-comment">//536870911</span><br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;forward_list.front()= &quot;</span> &lt;&lt; c.front() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br><br><span class="hljs-built_in">string</span> target = get_a_target_string();<br>    timeStart = clock();<br><span class="hljs-keyword">auto</span> pItem = <span class="hljs-built_in">find</span>(c.<span class="hljs-built_in">begin</span>(), c.<span class="hljs-built_in">end</span>(), target);<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;std::find(), milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br><span class="hljs-keyword">if</span> (pItem != c.<span class="hljs-built_in">end</span>())<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;found, &quot;</span> &lt;&lt; *pItem &lt;&lt; <span class="hljs-built_in">endl</span>;<br>  <span class="hljs-keyword">else</span><br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;not found! &quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    <br>    timeStart = clock();<br>c.sort();<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;c.sort(), milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br>c.<span class="hljs-built_in">clear</span>(); <br>&#125; <br>&#125;<br></code></pre></td></tr></table></figure><p>Deque</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;deque&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdexcept&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdlib&gt; //abort()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdio&gt;  //snprintf()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;ctime&gt; </span></span><br><span class="hljs-keyword">namespace</span> jj05<br>&#123;<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test_deque</span><span class="hljs-params">(<span class="hljs-keyword">long</span>&amp; value)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;\ntest_deque().......... \n&quot;</span>;<br>     <br><span class="hljs-built_in">deque</span>&lt;<span class="hljs-built_in">string</span>&gt; c;  <br><span class="hljs-keyword">char</span> buf[<span class="hljs-number">10</span>];<br><br><span class="hljs-keyword">clock_t</span> timeStart = clock();<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> i=<span class="hljs-number">0</span>; i&lt; value; ++i)<br>    &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-built_in">snprintf</span>(buf, <span class="hljs-number">10</span>, <span class="hljs-string">&quot;%d&quot;</span>, rand());<br>        c.push_back(<span class="hljs-built_in">string</span>(buf));     <br>&#125;<br><span class="hljs-keyword">catch</span>(exception&amp; p) &#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;i=&quot;</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; p.what() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">abort</span>();<br>&#125;<br>&#125;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;deque.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;deque.front()= &quot;</span> &lt;&lt; c.front() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;deque.back()= &quot;</span> &lt;&lt; c.back() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;deque.max_size()= &quot;</span> &lt;&lt; c.max_size() &lt;&lt; <span class="hljs-built_in">endl</span>;<span class="hljs-comment">//1073741821</span><br><br><span class="hljs-built_in">string</span> target = get_a_target_string();<br>    timeStart = clock();<br><span class="hljs-keyword">auto</span> pItem = <span class="hljs-built_in">find</span>(c.<span class="hljs-built_in">begin</span>(), c.<span class="hljs-built_in">end</span>(), target);<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;std::find(), milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br><span class="hljs-keyword">if</span> (pItem != c.<span class="hljs-built_in">end</span>())<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;found, &quot;</span> &lt;&lt; *pItem &lt;&lt; <span class="hljs-built_in">endl</span>;<br>  <span class="hljs-keyword">else</span><br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;not found! &quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    <br>    timeStart = clock();<br>sort(c.<span class="hljs-built_in">begin</span>(), c.<span class="hljs-built_in">end</span>());<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;sort(), milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br>c.<span class="hljs-built_in">clear</span>();<br>test_moveable(<span class="hljs-built_in">deque</span>&lt;MyString&gt;(),<span class="hljs-built_in">deque</span>&lt;MyStrNoMove&gt;(), value); <br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Stack</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stack&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdexcept&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdlib&gt; //abort()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdio&gt;  //snprintf()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;ctime&gt; </span></span><br><span class="hljs-keyword">namespace</span> jj17<br>&#123;<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test_stack</span><span class="hljs-params">(<span class="hljs-keyword">long</span>&amp; value)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;\ntest_stack().......... \n&quot;</span>;<br>     <br><span class="hljs-built_in">stack</span>&lt;<span class="hljs-built_in">string</span>&gt; c;  <br><span class="hljs-keyword">char</span> buf[<span class="hljs-number">10</span>];<br><br><span class="hljs-keyword">clock_t</span> timeStart = clock();<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> i=<span class="hljs-number">0</span>; i&lt; value; ++i)<br>    &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-built_in">snprintf</span>(buf, <span class="hljs-number">10</span>, <span class="hljs-string">&quot;%d&quot;</span>, rand());<br>        c.push(<span class="hljs-built_in">string</span>(buf));     <br>&#125;<br><span class="hljs-keyword">catch</span>(exception&amp; p) &#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;i=&quot;</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; p.what() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">abort</span>();<br>&#125;<br>&#125;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;stack.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;stack.top()= &quot;</span> &lt;&lt; c.top() &lt;&lt; <span class="hljs-built_in">endl</span>;<br>c.pop();<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;stack.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;stack.top()= &quot;</span> &lt;&lt; c.top() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br><br>&#123;<br><span class="hljs-built_in">stack</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">list</span>&lt;<span class="hljs-built_in">string</span>&gt;&gt; c;<span class="hljs-comment">//ä»¥ list ç‚ºåº•å±¤ </span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> i=<span class="hljs-number">0</span>; i&lt; <span class="hljs-number">10</span>; ++i) &#123;<br>    <span class="hljs-built_in">snprintf</span>(buf, <span class="hljs-number">10</span>, <span class="hljs-string">&quot;%d&quot;</span>, rand());<br>        c.push(<span class="hljs-built_in">string</span>(buf));     <br>&#125;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;stack.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;stack.top()= &quot;</span> &lt;&lt; c.top() &lt;&lt; <span class="hljs-built_in">endl</span>;<br>c.pop();<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;stack.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;stack.top()= &quot;</span> &lt;&lt; c.top() &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    &#125;<br><br>&#123;<br><span class="hljs-built_in">stack</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">string</span>&gt;&gt; c;<span class="hljs-comment">//ä»¥ vector ç‚ºåº•å±¤ </span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> i=<span class="hljs-number">0</span>; i&lt; <span class="hljs-number">10</span>; ++i) &#123;<br>    <span class="hljs-built_in">snprintf</span>(buf, <span class="hljs-number">10</span>, <span class="hljs-string">&quot;%d&quot;</span>, rand());<br>        c.push(<span class="hljs-built_in">string</span>(buf));     <br>&#125;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;stack.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;stack.top()= &quot;</span> &lt;&lt; c.top() &lt;&lt; <span class="hljs-built_in">endl</span>;<br>c.pop();<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;stack.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;stack.top()= &quot;</span> &lt;&lt; c.top() &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    &#125;<br><br>&#123;<br><span class="hljs-built_in">stack</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">set</span>&lt;<span class="hljs-built_in">string</span>&gt;&gt; c;<span class="hljs-comment">//ä»¥ set ç‚ºåº•å±¤ </span><br><span class="hljs-comment">/*!</span><br><span class="hljs-comment">    for(long i=0; i&lt; 10; ++i) &#123;</span><br><span class="hljs-comment">    snprintf(buf, 10, &quot;%d&quot;, rand());</span><br><span class="hljs-comment">        c.push(string(buf));     </span><br><span class="hljs-comment">&#125;</span><br><span class="hljs-comment">cout &lt;&lt; &quot;stack.size()= &quot; &lt;&lt; c.size() &lt;&lt; endl;</span><br><span class="hljs-comment">cout &lt;&lt; &quot;stack.top()= &quot; &lt;&lt; c.top() &lt;&lt; endl;</span><br><span class="hljs-comment">c.pop();</span><br><span class="hljs-comment">cout &lt;&lt; &quot;stack.size()= &quot; &lt;&lt; c.size() &lt;&lt; endl;</span><br><span class="hljs-comment">cout &lt;&lt; &quot;stack.top()= &quot; &lt;&lt; c.top() &lt;&lt; endl;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">//[Error] &#x27;class std::set&lt;std::basic_string&lt;char&gt; &gt;&#x27; has no member named &#x27;push_back&#x27;</span><br><span class="hljs-comment">//[Error] &#x27;class std::set&lt;std::basic_string&lt;char&gt; &gt;&#x27; has no member named &#x27;back&#x27;</span><br><span class="hljs-comment">//[Error] &#x27;class std::set&lt;std::basic_string&lt;char&gt; &gt;&#x27; has no member named &#x27;pop_back&#x27;</span><br><span class="hljs-comment">*/</span><br>    &#125;<br><br><span class="hljs-comment">//!stack&lt;string, map(string&gt;&gt; c5;////ä»¥ map ç‚ºåº•å±¤, [Error] template argument 2 is invalid</span><br><span class="hljs-comment">//!stack&lt;string&gt;::iterator ite1;  //[Error] &#x27;iterator&#x27; is not a member of &#x27;std::stack&lt;std::basic_string&lt;char&gt; &gt;&#x27;</span><br><br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Queue</p><blockquote><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;queue&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdexcept&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdlib&gt; //abort()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdio&gt;  //snprintf()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;ctime&gt; </span></span><br><span class="hljs-keyword">namespace</span> jj18<br>&#123;<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test_queue</span><span class="hljs-params">(<span class="hljs-keyword">long</span>&amp; value)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;\ntest_queue().......... \n&quot;</span>;<br>     <br><span class="hljs-built_in">queue</span>&lt;<span class="hljs-built_in">string</span>&gt; c;  <br><span class="hljs-keyword">char</span> buf[<span class="hljs-number">10</span>];<br><br><span class="hljs-keyword">clock_t</span> timeStart = clock();<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> i=<span class="hljs-number">0</span>; i&lt; value; ++i)<br>    &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-built_in">snprintf</span>(buf, <span class="hljs-number">10</span>, <span class="hljs-string">&quot;%d&quot;</span>, rand());<br>        c.push(<span class="hljs-built_in">string</span>(buf));     <br>&#125;<br><span class="hljs-keyword">catch</span>(exception&amp; p) &#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;i=&quot;</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; p.what() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">abort</span>();<br>&#125;<br>&#125;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.front()= &quot;</span> &lt;&lt; c.front() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.back()= &quot;</span> &lt;&lt; c.back() &lt;&lt; <span class="hljs-built_in">endl</span>;<br>c.pop();<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.front()= &quot;</span> &lt;&lt; c.front() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.back()= &quot;</span> &lt;&lt; c.back() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br><br>&#123;<br><span class="hljs-built_in">queue</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">list</span>&lt;<span class="hljs-built_in">string</span>&gt;&gt; c;<span class="hljs-comment">//ä»¥ list ç‚ºåº•å±¤ </span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> i=<span class="hljs-number">0</span>; i&lt; <span class="hljs-number">10</span>; ++i) &#123;<br>    <span class="hljs-built_in">snprintf</span>(buf, <span class="hljs-number">10</span>, <span class="hljs-string">&quot;%d&quot;</span>, rand());<br>        c.push(<span class="hljs-built_in">string</span>(buf));     <br>&#125;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.front()= &quot;</span> &lt;&lt; c.front() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.back()= &quot;</span> &lt;&lt; c.back() &lt;&lt; <span class="hljs-built_in">endl</span>;<br>c.pop();<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.front()= &quot;</span> &lt;&lt; c.front() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.back()= &quot;</span> &lt;&lt; c.back() &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    &#125;<br><br>&#123;<br><span class="hljs-built_in">queue</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">string</span>&gt;&gt; c;<span class="hljs-comment">//ä»¥ vector ç‚ºåº•å±¤ </span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> i=<span class="hljs-number">0</span>; i&lt; <span class="hljs-number">10</span>; ++i) &#123;<br>    <span class="hljs-built_in">snprintf</span>(buf, <span class="hljs-number">10</span>, <span class="hljs-string">&quot;%d&quot;</span>, rand());<br>        c.push(<span class="hljs-built_in">string</span>(buf));     <br>&#125;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.front()= &quot;</span> &lt;&lt; c.front() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.back()= &quot;</span> &lt;&lt; c.back() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-comment">//!c.pop();  //[Error] &#x27;class std::vector&lt;std::basic_string&lt;char&gt; &gt;&#x27; has no member named &#x27;pop_front&#x27;</span><br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.front()= &quot;</span> &lt;&lt; c.front() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.back()= &quot;</span> &lt;&lt; c.back() &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    &#125;<br><br>&#123;<br><span class="hljs-built_in">queue</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">set</span>&lt;<span class="hljs-built_in">string</span>&gt;&gt; c;<span class="hljs-comment">//ä»¥ set ç‚ºåº•å±¤ </span><br><span class="hljs-comment">/*!</span><br><span class="hljs-comment">    for(long i=0; i&lt; 10; ++i) &#123;</span><br><span class="hljs-comment">    snprintf(buf, 10, &quot;%d&quot;, rand());</span><br><span class="hljs-comment">        c.push(string(buf));     </span><br><span class="hljs-comment">&#125;</span><br><span class="hljs-comment">cout &lt;&lt; &quot;queue.size()= &quot; &lt;&lt; c.size() &lt;&lt; endl;</span><br><span class="hljs-comment">cout &lt;&lt; &quot;queue.front()= &quot; &lt;&lt; c.front() &lt;&lt; endl;</span><br><span class="hljs-comment">cout &lt;&lt; &quot;queue.back()= &quot; &lt;&lt; c.back() &lt;&lt; endl;</span><br><span class="hljs-comment">c.pop();</span><br><span class="hljs-comment">cout &lt;&lt; &quot;queue.size()= &quot; &lt;&lt; c.size() &lt;&lt; endl;</span><br><span class="hljs-comment">cout &lt;&lt; &quot;queue.front()= &quot; &lt;&lt; c.front() &lt;&lt; endl;</span><br><span class="hljs-comment">cout &lt;&lt; &quot;queue.back()= &quot; &lt;&lt; c.back() &lt;&lt; endl;</span><br><span class="hljs-comment">//[Error] &#x27;class std::set&lt;std::basic_string&lt;char&gt; &gt;&#x27; has no member named &#x27;push_back&#x27;</span><br><span class="hljs-comment">//[Error] &#x27;class std::set&lt;std::basic_string&lt;char&gt; &gt;&#x27; has no member named &#x27;front&#x27;</span><br><span class="hljs-comment">//[Error] &#x27;class std::set&lt;std::basic_string&lt;char&gt; &gt;&#x27; has no member named &#x27;pop_front&#x27;</span><br><span class="hljs-comment">*/</span><br>    &#125;<br>    <br><span class="hljs-comment">//! queue&lt;string, map&lt;string&gt;&gt; c5;//ä»¥ map ç‚ºåº•å±¤, [Error] template argument 2 is invalid</span><br><span class="hljs-comment">//! queue&lt;string&gt;::iterator ite1;  //[Error] &#x27;iterator&#x27; is not a member of &#x27;std::queue&lt;std::basic_string&lt;char&gt; &gt;&#x27;</span><br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Multiset</p></blockquote><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;set&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdexcept&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdlib&gt; //abort()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdio&gt;  //snprintf()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;ctime&gt; </span></span><br><span class="hljs-keyword">namespace</span> jj06<br>&#123;<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test_multiset</span><span class="hljs-params">(<span class="hljs-keyword">long</span>&amp; value)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;\ntest_multiset().......... \n&quot;</span>;<br><br><span class="hljs-built_in">multiset</span>&lt;<span class="hljs-built_in">string</span>&gt; c;  <br><span class="hljs-keyword">char</span> buf[<span class="hljs-number">10</span>];<br><span class="hljs-keyword">clock_t</span> timeStart = clock();<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> i=<span class="hljs-number">0</span>; i&lt; value; ++i)<br>    &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-built_in">snprintf</span>(buf, <span class="hljs-number">10</span>, <span class="hljs-string">&quot;%d&quot;</span>, rand());<br>        c.insert(<span class="hljs-built_in">string</span>(buf));     <br>&#125;<br><span class="hljs-keyword">catch</span>(exception&amp; p) &#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;i=&quot;</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; p.what() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">abort</span>();<br>&#125;<br>&#125;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;multiset.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;multiset.max_size()= &quot;</span> &lt;&lt; c.max_size() &lt;&lt; <span class="hljs-built_in">endl</span>;<span class="hljs-comment">//214748364</span><br><br><span class="hljs-built_in">string</span> target = get_a_target_string();<br>&#123;<br>    timeStart = clock();<br><span class="hljs-keyword">auto</span> pItem = <span class="hljs-built_in">find</span>(c.<span class="hljs-built_in">begin</span>(), c.<span class="hljs-built_in">end</span>(), target);<span class="hljs-comment">//æ¯” c.find(...) æ…¢å¾ˆå¤š</span><br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;std::find(), milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-keyword">if</span> (pItem != c.<span class="hljs-built_in">end</span>())<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;found, &quot;</span> &lt;&lt; *pItem &lt;&lt; <span class="hljs-built_in">endl</span>;<br>  <span class="hljs-keyword">else</span><br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;not found! &quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br> &#125;<br> <br> &#123;<br>    timeStart = clock();<br><span class="hljs-keyword">auto</span> pItem = c.<span class="hljs-built_in">find</span>(target);<span class="hljs-comment">//æ¯” std::find(...) å¿«å¾ˆå¤š</span><br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;c.find(), milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>; <br><span class="hljs-keyword">if</span> (pItem != c.<span class="hljs-built_in">end</span>())<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;found, &quot;</span> &lt;&lt; *pItem &lt;&lt; <span class="hljs-built_in">endl</span>;<br>  <span class="hljs-keyword">else</span><br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;not found! &quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br> &#125;<br> <br>c.<span class="hljs-built_in">clear</span>();<br>test_moveable(<span class="hljs-built_in">multiset</span>&lt;MyString&gt;(),<span class="hljs-built_in">multiset</span>&lt;MyStrNoMove&gt;(), value); <br>&#125; <br>&#125;<br></code></pre></td></tr></table></figure><p>Multimap</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;map&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdexcept&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdlib&gt; //abort()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdio&gt;  //snprintf()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;ctime&gt; </span></span><br><span class="hljs-keyword">namespace</span> jj07<br>&#123;<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test_multimap</span><span class="hljs-params">(<span class="hljs-keyword">long</span>&amp; value)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;\ntest_multimap().......... \n&quot;</span>;<br>     <br><span class="hljs-built_in">multimap</span>&lt;<span class="hljs-keyword">long</span>, <span class="hljs-built_in">string</span>&gt; c;  <br><span class="hljs-keyword">char</span> buf[<span class="hljs-number">10</span>];<br><br><span class="hljs-keyword">clock_t</span> timeStart = clock();<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> i=<span class="hljs-number">0</span>; i&lt; value; ++i)<br>    &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-built_in">snprintf</span>(buf, <span class="hljs-number">10</span>, <span class="hljs-string">&quot;%d&quot;</span>, rand());<br>    <span class="hljs-comment">//multimap ä¸å¯ä½¿ç”¨ [] åš insertion </span><br>        c.insert(<span class="hljs-built_in">pair</span>&lt;<span class="hljs-keyword">long</span>,<span class="hljs-built_in">string</span>&gt;(i,buf));   <br>&#125;<br><span class="hljs-keyword">catch</span>(exception&amp; p) &#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;i=&quot;</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; p.what() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">abort</span>();<br>&#125;<br>&#125;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;multimap.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;multimap.max_size()= &quot;</span> &lt;&lt; c.max_size() &lt;&lt; <span class="hljs-built_in">endl</span>;<span class="hljs-comment">//178956970</span><br><br><span class="hljs-keyword">long</span> target = get_a_target_long();<br>    timeStart = clock();<br><span class="hljs-keyword">auto</span> pItem = c.<span class="hljs-built_in">find</span>(target);<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;c.find(), milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>; <br><span class="hljs-keyword">if</span> (pItem != c.<span class="hljs-built_in">end</span>())<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;found, value=&quot;</span> &lt;&lt; (*pItem).second &lt;&lt; <span class="hljs-built_in">endl</span>;<br>  <span class="hljs-keyword">else</span><br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;not found! &quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;  <br><br>c.<span class="hljs-built_in">clear</span>();  <br>&#125; <br>&#125;<br></code></pre></td></tr></table></figure><p>Unordered_Multiset</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;unordered_set&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdexcept&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdlib&gt; //abort()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdio&gt;  //snprintf()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;ctime&gt; </span></span><br><span class="hljs-keyword">namespace</span> jj08<br>&#123;<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test_unordered_multiset</span><span class="hljs-params">(<span class="hljs-keyword">long</span>&amp; value)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;\ntest_unordered_multiset().......... \n&quot;</span>;<br>     <br><span class="hljs-built_in">unordered_multiset</span>&lt;<span class="hljs-built_in">string</span>&gt; c;  <br><span class="hljs-keyword">char</span> buf[<span class="hljs-number">10</span>];<br><br><span class="hljs-keyword">clock_t</span> timeStart = clock();<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> i=<span class="hljs-number">0</span>; i&lt; value; ++i)<br>    &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-built_in">snprintf</span>(buf, <span class="hljs-number">10</span>, <span class="hljs-string">&quot;%d&quot;</span>, rand());<br>        c.insert(<span class="hljs-built_in">string</span>(buf));     <br>&#125;<br><span class="hljs-keyword">catch</span>(exception&amp; p) &#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;i=&quot;</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; p.what() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">abort</span>();<br>&#125;<br>&#125;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;unordered_multiset.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;unordered_multiset.max_size()= &quot;</span> &lt;&lt; c.max_size() &lt;&lt; <span class="hljs-built_in">endl</span>;<span class="hljs-comment">//357913941</span><br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;unordered_multiset.bucket_count()= &quot;</span> &lt;&lt; c.bucket_count() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;unordered_multiset.load_factor()= &quot;</span> &lt;&lt; c.load_factor() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;unordered_multiset.max_load_factor()= &quot;</span> &lt;&lt; c.max_load_factor() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;unordered_multiset.max_bucket_count()= &quot;</span> &lt;&lt; c.max_bucket_count() &lt;&lt; <span class="hljs-built_in">endl</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">unsigned</span> i=<span class="hljs-number">0</span>; i&lt; <span class="hljs-number">20</span>; ++i) &#123;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;bucket #&quot;</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; has &quot;</span> &lt;&lt; c.bucket_size(i) &lt;&lt; <span class="hljs-string">&quot; elements.\n&quot;</span>;<br>  &#125;<br><br><span class="hljs-built_in">string</span> target = get_a_target_string();<br>&#123;<br>    timeStart = clock();<br><span class="hljs-keyword">auto</span> pItem = <span class="hljs-built_in">find</span>(c.<span class="hljs-built_in">begin</span>(), c.<span class="hljs-built_in">end</span>(), target);<span class="hljs-comment">//æ¯” c.find(...) æ…¢å¾ˆå¤š</span><br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;std::find(), milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-keyword">if</span> (pItem != c.<span class="hljs-built_in">end</span>())<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;found, &quot;</span> &lt;&lt; *pItem &lt;&lt; <span class="hljs-built_in">endl</span>;<br>  <span class="hljs-keyword">else</span><br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;not found! &quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br> &#125;<br> <br> &#123;<br>    timeStart = clock();<br><span class="hljs-keyword">auto</span> pItem = c.<span class="hljs-built_in">find</span>(target);<span class="hljs-comment">//æ¯” std::find(...) å¿«å¾ˆå¤š</span><br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;c.find(), milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>; <br><span class="hljs-keyword">if</span> (pItem != c.<span class="hljs-built_in">end</span>())<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;found, &quot;</span> &lt;&lt; *pItem &lt;&lt; <span class="hljs-built_in">endl</span>;<br>  <span class="hljs-keyword">else</span><br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;not found! &quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br> &#125;<br> <br>    c.<span class="hljs-built_in">clear</span>();<br>test_moveable(<span class="hljs-built_in">unordered_multiset</span>&lt;MyString&gt;(),<span class="hljs-built_in">unordered_multiset</span>&lt;MyStrNoMove&gt;(), value);  <br>&#125; <br>&#125;<br></code></pre></td></tr></table></figure><p>Unordered Multimap</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;unordered_map&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdexcept&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdlib&gt; //abort()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdio&gt;  //snprintf()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;ctime&gt; </span></span><br><span class="hljs-keyword">namespace</span> jj09<br>&#123;<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test_unordered_multimap</span><span class="hljs-params">(<span class="hljs-keyword">long</span>&amp; value)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;\ntest_unordered_multimap().......... \n&quot;</span>;<br>     <br><span class="hljs-built_in">unordered_multimap</span>&lt;<span class="hljs-keyword">long</span>, <span class="hljs-built_in">string</span>&gt; c;  <br><span class="hljs-keyword">char</span> buf[<span class="hljs-number">10</span>];<br><br><span class="hljs-keyword">clock_t</span> timeStart = clock();<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> i=<span class="hljs-number">0</span>; i&lt; value; ++i)<br>    &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-built_in">snprintf</span>(buf, <span class="hljs-number">10</span>, <span class="hljs-string">&quot;%d&quot;</span>, rand());<br><span class="hljs-comment">//multimap ä¸å¯ä½¿ç”¨ [] é€²è¡Œ insertion </span><br>c.insert(<span class="hljs-built_in">pair</span>&lt;<span class="hljs-keyword">long</span>,<span class="hljs-built_in">string</span>&gt;(i,buf));<br>&#125;<br><span class="hljs-keyword">catch</span>(exception&amp; p) &#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;i=&quot;</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; p.what() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">abort</span>();<br>&#125;<br>&#125;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;unordered_multimap.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;unordered_multimap.max_size()= &quot;</span> &lt;&lt; c.max_size() &lt;&lt; <span class="hljs-built_in">endl</span>;<span class="hljs-comment">//357913941</span><br><br><span class="hljs-keyword">long</span> target = get_a_target_long();<br>    timeStart = clock();<br><span class="hljs-keyword">auto</span> pItem = c.<span class="hljs-built_in">find</span>(target);<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;c.find(), milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>; <br><span class="hljs-keyword">if</span> (pItem != c.<span class="hljs-built_in">end</span>())<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;found, value=&quot;</span> &lt;&lt; (*pItem).second &lt;&lt; <span class="hljs-built_in">endl</span>;<br>  <span class="hljs-keyword">else</span><br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;not found! &quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>&#125; <br>&#125;<br></code></pre></td></tr></table></figure><p>Set</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain"><br></code></pre></td></tr></table></figure><p>Map</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain"><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>C++STLæ ‡å‡†æ¨¡æ¿åº“</category>
      
    </categories>
    
    
    <tags>
      
      <tag>STL</tag>
      
      <tag>C++</tag>
      
      <tag>æ¨¡æ¿ç¼–ç¨‹</tag>
      
      <tag>ç®—æ³•</tag>
      
      <tag>æ•°æ®ç»“æ„</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>C++STLå®¹å™¨åˆ†ç±»ï¼ˆäºŒï¼‰</title>
    <link href="/2019/10/30/C-STL%E5%AE%B9%E5%99%A8List/"/>
    <url>/2019/10/30/C-STL%E5%AE%B9%E5%99%A8List/</url>
    
    <content type="html"><![CDATA[<p><img src="/2019/10/30/C-STL%E5%AE%B9%E5%99%A8List/containerstruct.png" alt="1"></p><p>ä¹‹åå®¹å™¨æµ‹è¯•ç”¨ä¾‹çš„ è¾…åŠ©å‡½æ•°</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">using</span> <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cin</span>;<br><span class="hljs-keyword">using</span> <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span>;<br><span class="hljs-keyword">using</span> <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>;<br><br><span class="hljs-function"><span class="hljs-keyword">long</span> <span class="hljs-title">get_a_target_long</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-keyword">long</span> target=<span class="hljs-number">0</span>;<br>    <span class="hljs-built_in">cout</span>&lt;&lt;<span class="hljs-string">&quot;target (0~&quot;</span>&lt;&lt;RAND_MAX&lt;&lt;<span class="hljs-string">&quot;): &quot;</span>;<br>    <span class="hljs-built_in">cin</span>&gt;&gt;target;<br>    <span class="hljs-keyword">return</span> target;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-built_in">string</span> <span class="hljs-title">get_a_target_string</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-keyword">long</span> target=<span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">char</span> buf[<span class="hljs-number">10</span>];<br>    <span class="hljs-built_in">cout</span>&lt;&lt;<span class="hljs-string">&quot;target (0~&quot;</span>&lt;&lt;RAND_MAX&lt;&lt;<span class="hljs-string">&quot;): &quot;</span>;<br>    <span class="hljs-built_in">cin</span>&gt;&gt;target;<br>    <span class="hljs-built_in">snprintf</span>(buf,<span class="hljs-number">10</span>,<span class="hljs-string">&quot;%d&quot;</span>,target);<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">string</span>(buf);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">compareLongs</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span>* a,<span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span>* b)</span></span>&#123;<br>    <span class="hljs-keyword">return</span> (*(<span class="hljs-keyword">long</span>*)a - *(<span class="hljs-keyword">long</span>*)b );<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">compareStrings</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span>* a,<span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span>* b)</span></span>&#123;<br>    <span class="hljs-keyword">if</span>(*(<span class="hljs-built_in">string</span>*)a &gt; *(<span class="hljs-built_in">string</span>*)b )&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(*(<span class="hljs-built_in">string</span>*)a &lt; *(<span class="hljs-built_in">string</span>*)b )&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<span class="hljs-keyword">else</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Array</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;array&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;ctime&gt; </span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdlib&gt; //qsort, bsearch, NULL</span></span><br><br><span class="hljs-keyword">namespace</span> jj01<br>&#123;<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test_array</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;\ntest_array().......... \n&quot;</span>;<br>     <br><span class="hljs-built_in">array</span>&lt;<span class="hljs-keyword">long</span>,ASIZE&gt; c;  <br><br><span class="hljs-keyword">clock_t</span> timeStart = clock();<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> i=<span class="hljs-number">0</span>; i&lt; ASIZE; ++i) &#123;<br>        c[i] = rand(); <br>    &#125;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<span class="hljs-comment">//</span><br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;array.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;array.front()= &quot;</span> &lt;&lt; c.front() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;array.back()= &quot;</span> &lt;&lt; c.back() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;array.data()= &quot;</span> &lt;&lt; c.data() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br><span class="hljs-keyword">long</span> target = get_a_target_long();<br><br>timeStart = clock();<br>    ::qsort(c.data(), ASIZE, <span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">long</span>), compareLongs);<br><span class="hljs-keyword">long</span>* pItem = (<span class="hljs-keyword">long</span>*)::bsearch(&amp;target, (c.data()), ASIZE, <span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">long</span>), compareLongs); <br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;qsort()+bsearch(), milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<span class="hljs-comment">//    </span><br>  <span class="hljs-keyword">if</span> (pItem != <span class="hljs-literal">NULL</span>)<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;found, &quot;</span> &lt;&lt; *pItem &lt;&lt; <span class="hljs-built_in">endl</span>;<br>  <span class="hljs-keyword">else</span><br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;not found! &quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Vector</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdexcept&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdlib&gt; //abort()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdio&gt;  //snprintf()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;ctime&gt; </span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;algorithm&gt; //sort()</span></span><br><span class="hljs-keyword">namespace</span> jj02<br>&#123;<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test_vector</span><span class="hljs-params">(<span class="hljs-keyword">long</span>&amp; value)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;\ntest_vector().......... \n&quot;</span>;<br>     <br><span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">string</span>&gt; c;  <br><span class="hljs-keyword">char</span> buf[<span class="hljs-number">10</span>];<br><br><span class="hljs-keyword">clock_t</span> timeStart = clock();<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> i=<span class="hljs-number">0</span>; i&lt; value; ++i)<br>    &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-built_in">snprintf</span>(buf, <span class="hljs-number">10</span>, <span class="hljs-string">&quot;%d&quot;</span>, rand());<br>        c.push_back(<span class="hljs-built_in">string</span>(buf));     <br>&#125;<br><span class="hljs-keyword">catch</span>(exception&amp; p) &#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;i=&quot;</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; p.what() &lt;&lt; <span class="hljs-built_in">endl</span>;<br>     <span class="hljs-comment">//æ›¾ç¶“æœ€é«˜ i=58389486 then std::bad_alloc</span><br><span class="hljs-built_in">abort</span>();<br>&#125;<br>&#125;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;vector.max_size()= &quot;</span> &lt;&lt; c.max_size() &lt;&lt; <span class="hljs-built_in">endl</span>;<span class="hljs-comment">//1073747823</span><br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;vector.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;vector.front()= &quot;</span> &lt;&lt; c.front() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;vector.back()= &quot;</span> &lt;&lt; c.back() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;vector.data()= &quot;</span> &lt;&lt; c.data() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;vector.capacity()= &quot;</span> &lt;&lt; c.capacity() &lt;&lt; <span class="hljs-built_in">endl</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br><br><span class="hljs-built_in">string</span> target = get_a_target_string();<br>    &#123;<br>timeStart = clock();<br><span class="hljs-keyword">auto</span> pItem = <span class="hljs-built_in">find</span>(c.<span class="hljs-built_in">begin</span>(), c.<span class="hljs-built_in">end</span>(), target);<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;std::find(), milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;  <br> <br>  <span class="hljs-keyword">if</span> (pItem != c.<span class="hljs-built_in">end</span>())<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;found, &quot;</span> &lt;&lt; *pItem &lt;&lt; <span class="hljs-built_in">endl</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>  <span class="hljs-keyword">else</span><br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;not found! &quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    &#125;<br><br>&#123;<br>timeStart = clock();<br>    sort(c.<span class="hljs-built_in">begin</span>(), c.<span class="hljs-built_in">end</span>());<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;sort(), milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>; <br><br>timeStart = clock();    <br><span class="hljs-built_in">string</span>* pItem = (<span class="hljs-built_in">string</span>*)::bsearch(&amp;target, (c.data()), <br>                                   c.<span class="hljs-built_in">size</span>(), <span class="hljs-keyword">sizeof</span>(<span class="hljs-built_in">string</span>), compareStrings); <br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;bsearch(), milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>; <br>   <br>  <span class="hljs-keyword">if</span> (pItem != <span class="hljs-literal">NULL</span>)<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;found, &quot;</span> &lt;&lt; *pItem &lt;&lt; <span class="hljs-built_in">endl</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>  <span class="hljs-keyword">else</span><br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;not found! &quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>&#125;<br><br>c.<span class="hljs-built_in">clear</span>();<br>test_moveable(<span class="hljs-built_in">vector</span>&lt;MyString&gt;(),<span class="hljs-built_in">vector</span>&lt;MyStrNoMove&gt;(), value);<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>List</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;list&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdexcept&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdlib&gt; //abort()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdio&gt;  //snprintf()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;algorithm&gt; //find()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;ctime&gt; </span></span><br><span class="hljs-keyword">namespace</span> jj03<br>&#123;<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test_list</span><span class="hljs-params">(<span class="hljs-keyword">long</span>&amp; value)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;\ntest_list().......... \n&quot;</span>;<br>     <br><span class="hljs-built_in">list</span>&lt;<span class="hljs-built_in">string</span>&gt; c;  <br><span class="hljs-keyword">char</span> buf[<span class="hljs-number">10</span>];<br><br><span class="hljs-keyword">clock_t</span> timeStart = clock();<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> i=<span class="hljs-number">0</span>; i&lt; value; ++i)<br>    &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-built_in">snprintf</span>(buf, <span class="hljs-number">10</span>, <span class="hljs-string">&quot;%d&quot;</span>, rand());<br>        c.push_back(<span class="hljs-built_in">string</span>(buf));    <br>&#125;<br><span class="hljs-keyword">catch</span>(exception&amp; p) &#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;i=&quot;</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; p.what() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">abort</span>();<br>&#125;<br>&#125;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;list.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;list.max_size()= &quot;</span> &lt;&lt; c.max_size() &lt;&lt; <span class="hljs-built_in">endl</span>;    <span class="hljs-comment">//357913941</span><br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;list.front()= &quot;</span> &lt;&lt; c.front() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;list.back()= &quot;</span> &lt;&lt; c.back() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br><span class="hljs-built_in">string</span> target = get_a_target_string();<br>    timeStart = clock();<br><span class="hljs-keyword">auto</span> pItem = <span class="hljs-built_in">find</span>(c.<span class="hljs-built_in">begin</span>(), c.<span class="hljs-built_in">end</span>(), target);<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;std::find(), milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br>  <span class="hljs-keyword">if</span> (pItem != c.<span class="hljs-built_in">end</span>())<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;found, &quot;</span> &lt;&lt; *pItem &lt;&lt; <span class="hljs-built_in">endl</span>;<br>  <span class="hljs-keyword">else</span><br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;not found! &quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    <br>    timeStart = clock();<br>c.sort();<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;c.sort(), milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;    <br>    <br>c.<span class="hljs-built_in">clear</span>();<br>test_moveable(<span class="hljs-built_in">list</span>&lt;MyString&gt;(),<span class="hljs-built_in">list</span>&lt;MyStrNoMove&gt;(), value);<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Forward-List</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;forward_list&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdexcept&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdlib&gt; //abort()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdio&gt;  //snprintf()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;ctime&gt; </span></span><br><span class="hljs-keyword">namespace</span> jj04<br>&#123;<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test_forward_list</span><span class="hljs-params">(<span class="hljs-keyword">long</span>&amp; value)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;\ntest_forward_list().......... \n&quot;</span>;<br>     <br>forward_list&lt;<span class="hljs-built_in">string</span>&gt; c;  <br><span class="hljs-keyword">char</span> buf[<span class="hljs-number">10</span>];<br><br><span class="hljs-keyword">clock_t</span> timeStart = clock();<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> i=<span class="hljs-number">0</span>; i&lt; value; ++i)<br>    &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-built_in">snprintf</span>(buf, <span class="hljs-number">10</span>, <span class="hljs-string">&quot;%d&quot;</span>, rand());<br>        c.push_front(<span class="hljs-built_in">string</span>(buf));     <br>&#125;<br><span class="hljs-keyword">catch</span>(exception&amp; p) &#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;i=&quot;</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; p.what() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">abort</span>();<br>&#125;<br>&#125;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;forward_list.max_size()= &quot;</span> &lt;&lt; c.max_size() &lt;&lt; <span class="hljs-built_in">endl</span>;  <span class="hljs-comment">//536870911</span><br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;forward_list.front()= &quot;</span> &lt;&lt; c.front() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br><br><span class="hljs-built_in">string</span> target = get_a_target_string();<br>    timeStart = clock();<br><span class="hljs-keyword">auto</span> pItem = <span class="hljs-built_in">find</span>(c.<span class="hljs-built_in">begin</span>(), c.<span class="hljs-built_in">end</span>(), target);<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;std::find(), milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br><span class="hljs-keyword">if</span> (pItem != c.<span class="hljs-built_in">end</span>())<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;found, &quot;</span> &lt;&lt; *pItem &lt;&lt; <span class="hljs-built_in">endl</span>;<br>  <span class="hljs-keyword">else</span><br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;not found! &quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    <br>    timeStart = clock();<br>c.sort();<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;c.sort(), milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br>c.<span class="hljs-built_in">clear</span>(); <br>&#125; <br>&#125;<br></code></pre></td></tr></table></figure><p>Deque</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;deque&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdexcept&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdlib&gt; //abort()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdio&gt;  //snprintf()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;ctime&gt; </span></span><br><span class="hljs-keyword">namespace</span> jj05<br>&#123;<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test_deque</span><span class="hljs-params">(<span class="hljs-keyword">long</span>&amp; value)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;\ntest_deque().......... \n&quot;</span>;<br>     <br><span class="hljs-built_in">deque</span>&lt;<span class="hljs-built_in">string</span>&gt; c;  <br><span class="hljs-keyword">char</span> buf[<span class="hljs-number">10</span>];<br><br><span class="hljs-keyword">clock_t</span> timeStart = clock();<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> i=<span class="hljs-number">0</span>; i&lt; value; ++i)<br>    &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-built_in">snprintf</span>(buf, <span class="hljs-number">10</span>, <span class="hljs-string">&quot;%d&quot;</span>, rand());<br>        c.push_back(<span class="hljs-built_in">string</span>(buf));     <br>&#125;<br><span class="hljs-keyword">catch</span>(exception&amp; p) &#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;i=&quot;</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; p.what() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">abort</span>();<br>&#125;<br>&#125;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;deque.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;deque.front()= &quot;</span> &lt;&lt; c.front() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;deque.back()= &quot;</span> &lt;&lt; c.back() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;deque.max_size()= &quot;</span> &lt;&lt; c.max_size() &lt;&lt; <span class="hljs-built_in">endl</span>;<span class="hljs-comment">//1073741821</span><br><br><span class="hljs-built_in">string</span> target = get_a_target_string();<br>    timeStart = clock();<br><span class="hljs-keyword">auto</span> pItem = <span class="hljs-built_in">find</span>(c.<span class="hljs-built_in">begin</span>(), c.<span class="hljs-built_in">end</span>(), target);<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;std::find(), milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br><span class="hljs-keyword">if</span> (pItem != c.<span class="hljs-built_in">end</span>())<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;found, &quot;</span> &lt;&lt; *pItem &lt;&lt; <span class="hljs-built_in">endl</span>;<br>  <span class="hljs-keyword">else</span><br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;not found! &quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    <br>    timeStart = clock();<br>sort(c.<span class="hljs-built_in">begin</span>(), c.<span class="hljs-built_in">end</span>());<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;sort(), milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br>c.<span class="hljs-built_in">clear</span>();<br>test_moveable(<span class="hljs-built_in">deque</span>&lt;MyString&gt;(),<span class="hljs-built_in">deque</span>&lt;MyStrNoMove&gt;(), value); <br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Stack</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stack&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdexcept&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdlib&gt; //abort()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdio&gt;  //snprintf()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;ctime&gt; </span></span><br><span class="hljs-keyword">namespace</span> jj17<br>&#123;<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test_stack</span><span class="hljs-params">(<span class="hljs-keyword">long</span>&amp; value)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;\ntest_stack().......... \n&quot;</span>;<br>     <br><span class="hljs-built_in">stack</span>&lt;<span class="hljs-built_in">string</span>&gt; c;  <br><span class="hljs-keyword">char</span> buf[<span class="hljs-number">10</span>];<br><br><span class="hljs-keyword">clock_t</span> timeStart = clock();<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> i=<span class="hljs-number">0</span>; i&lt; value; ++i)<br>    &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-built_in">snprintf</span>(buf, <span class="hljs-number">10</span>, <span class="hljs-string">&quot;%d&quot;</span>, rand());<br>        c.push(<span class="hljs-built_in">string</span>(buf));     <br>&#125;<br><span class="hljs-keyword">catch</span>(exception&amp; p) &#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;i=&quot;</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; p.what() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">abort</span>();<br>&#125;<br>&#125;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;stack.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;stack.top()= &quot;</span> &lt;&lt; c.top() &lt;&lt; <span class="hljs-built_in">endl</span>;<br>c.pop();<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;stack.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;stack.top()= &quot;</span> &lt;&lt; c.top() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br><br>&#123;<br><span class="hljs-built_in">stack</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">list</span>&lt;<span class="hljs-built_in">string</span>&gt;&gt; c;<span class="hljs-comment">//ä»¥ list ç‚ºåº•å±¤ </span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> i=<span class="hljs-number">0</span>; i&lt; <span class="hljs-number">10</span>; ++i) &#123;<br>    <span class="hljs-built_in">snprintf</span>(buf, <span class="hljs-number">10</span>, <span class="hljs-string">&quot;%d&quot;</span>, rand());<br>        c.push(<span class="hljs-built_in">string</span>(buf));     <br>&#125;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;stack.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;stack.top()= &quot;</span> &lt;&lt; c.top() &lt;&lt; <span class="hljs-built_in">endl</span>;<br>c.pop();<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;stack.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;stack.top()= &quot;</span> &lt;&lt; c.top() &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    &#125;<br><br>&#123;<br><span class="hljs-built_in">stack</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">string</span>&gt;&gt; c;<span class="hljs-comment">//ä»¥ vector ç‚ºåº•å±¤ </span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> i=<span class="hljs-number">0</span>; i&lt; <span class="hljs-number">10</span>; ++i) &#123;<br>    <span class="hljs-built_in">snprintf</span>(buf, <span class="hljs-number">10</span>, <span class="hljs-string">&quot;%d&quot;</span>, rand());<br>        c.push(<span class="hljs-built_in">string</span>(buf));     <br>&#125;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;stack.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;stack.top()= &quot;</span> &lt;&lt; c.top() &lt;&lt; <span class="hljs-built_in">endl</span>;<br>c.pop();<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;stack.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;stack.top()= &quot;</span> &lt;&lt; c.top() &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    &#125;<br><br>&#123;<br><span class="hljs-built_in">stack</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">set</span>&lt;<span class="hljs-built_in">string</span>&gt;&gt; c;<span class="hljs-comment">//ä»¥ set ç‚ºåº•å±¤ </span><br><span class="hljs-comment">/*!</span><br><span class="hljs-comment">    for(long i=0; i&lt; 10; ++i) &#123;</span><br><span class="hljs-comment">    snprintf(buf, 10, &quot;%d&quot;, rand());</span><br><span class="hljs-comment">        c.push(string(buf));     </span><br><span class="hljs-comment">&#125;</span><br><span class="hljs-comment">cout &lt;&lt; &quot;stack.size()= &quot; &lt;&lt; c.size() &lt;&lt; endl;</span><br><span class="hljs-comment">cout &lt;&lt; &quot;stack.top()= &quot; &lt;&lt; c.top() &lt;&lt; endl;</span><br><span class="hljs-comment">c.pop();</span><br><span class="hljs-comment">cout &lt;&lt; &quot;stack.size()= &quot; &lt;&lt; c.size() &lt;&lt; endl;</span><br><span class="hljs-comment">cout &lt;&lt; &quot;stack.top()= &quot; &lt;&lt; c.top() &lt;&lt; endl;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">//[Error] &#x27;class std::set&lt;std::basic_string&lt;char&gt; &gt;&#x27; has no member named &#x27;push_back&#x27;</span><br><span class="hljs-comment">//[Error] &#x27;class std::set&lt;std::basic_string&lt;char&gt; &gt;&#x27; has no member named &#x27;back&#x27;</span><br><span class="hljs-comment">//[Error] &#x27;class std::set&lt;std::basic_string&lt;char&gt; &gt;&#x27; has no member named &#x27;pop_back&#x27;</span><br><span class="hljs-comment">*/</span><br>    &#125;<br><br><span class="hljs-comment">//!stack&lt;string, map(string&gt;&gt; c5;////ä»¥ map ç‚ºåº•å±¤, [Error] template argument 2 is invalid</span><br><span class="hljs-comment">//!stack&lt;string&gt;::iterator ite1;  //[Error] &#x27;iterator&#x27; is not a member of &#x27;std::stack&lt;std::basic_string&lt;char&gt; &gt;&#x27;</span><br><br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Queue</p><blockquote><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;queue&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdexcept&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdlib&gt; //abort()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdio&gt;  //snprintf()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;ctime&gt; </span></span><br><span class="hljs-keyword">namespace</span> jj18<br>&#123;<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test_queue</span><span class="hljs-params">(<span class="hljs-keyword">long</span>&amp; value)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;\ntest_queue().......... \n&quot;</span>;<br>     <br><span class="hljs-built_in">queue</span>&lt;<span class="hljs-built_in">string</span>&gt; c;  <br><span class="hljs-keyword">char</span> buf[<span class="hljs-number">10</span>];<br><br><span class="hljs-keyword">clock_t</span> timeStart = clock();<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> i=<span class="hljs-number">0</span>; i&lt; value; ++i)<br>    &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-built_in">snprintf</span>(buf, <span class="hljs-number">10</span>, <span class="hljs-string">&quot;%d&quot;</span>, rand());<br>        c.push(<span class="hljs-built_in">string</span>(buf));     <br>&#125;<br><span class="hljs-keyword">catch</span>(exception&amp; p) &#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;i=&quot;</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; p.what() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">abort</span>();<br>&#125;<br>&#125;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.front()= &quot;</span> &lt;&lt; c.front() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.back()= &quot;</span> &lt;&lt; c.back() &lt;&lt; <span class="hljs-built_in">endl</span>;<br>c.pop();<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.front()= &quot;</span> &lt;&lt; c.front() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.back()= &quot;</span> &lt;&lt; c.back() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br><br>&#123;<br><span class="hljs-built_in">queue</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">list</span>&lt;<span class="hljs-built_in">string</span>&gt;&gt; c;<span class="hljs-comment">//ä»¥ list ç‚ºåº•å±¤ </span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> i=<span class="hljs-number">0</span>; i&lt; <span class="hljs-number">10</span>; ++i) &#123;<br>    <span class="hljs-built_in">snprintf</span>(buf, <span class="hljs-number">10</span>, <span class="hljs-string">&quot;%d&quot;</span>, rand());<br>        c.push(<span class="hljs-built_in">string</span>(buf));     <br>&#125;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.front()= &quot;</span> &lt;&lt; c.front() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.back()= &quot;</span> &lt;&lt; c.back() &lt;&lt; <span class="hljs-built_in">endl</span>;<br>c.pop();<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.front()= &quot;</span> &lt;&lt; c.front() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.back()= &quot;</span> &lt;&lt; c.back() &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    &#125;<br><br>&#123;<br><span class="hljs-built_in">queue</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">string</span>&gt;&gt; c;<span class="hljs-comment">//ä»¥ vector ç‚ºåº•å±¤ </span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> i=<span class="hljs-number">0</span>; i&lt; <span class="hljs-number">10</span>; ++i) &#123;<br>    <span class="hljs-built_in">snprintf</span>(buf, <span class="hljs-number">10</span>, <span class="hljs-string">&quot;%d&quot;</span>, rand());<br>        c.push(<span class="hljs-built_in">string</span>(buf));     <br>&#125;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.front()= &quot;</span> &lt;&lt; c.front() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.back()= &quot;</span> &lt;&lt; c.back() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-comment">//!c.pop();  //[Error] &#x27;class std::vector&lt;std::basic_string&lt;char&gt; &gt;&#x27; has no member named &#x27;pop_front&#x27;</span><br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.front()= &quot;</span> &lt;&lt; c.front() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.back()= &quot;</span> &lt;&lt; c.back() &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    &#125;<br><br>&#123;<br><span class="hljs-built_in">queue</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">set</span>&lt;<span class="hljs-built_in">string</span>&gt;&gt; c;<span class="hljs-comment">//ä»¥ set ç‚ºåº•å±¤ </span><br><span class="hljs-comment">/*!</span><br><span class="hljs-comment">    for(long i=0; i&lt; 10; ++i) &#123;</span><br><span class="hljs-comment">    snprintf(buf, 10, &quot;%d&quot;, rand());</span><br><span class="hljs-comment">        c.push(string(buf));     </span><br><span class="hljs-comment">&#125;</span><br><span class="hljs-comment">cout &lt;&lt; &quot;queue.size()= &quot; &lt;&lt; c.size() &lt;&lt; endl;</span><br><span class="hljs-comment">cout &lt;&lt; &quot;queue.front()= &quot; &lt;&lt; c.front() &lt;&lt; endl;</span><br><span class="hljs-comment">cout &lt;&lt; &quot;queue.back()= &quot; &lt;&lt; c.back() &lt;&lt; endl;</span><br><span class="hljs-comment">c.pop();</span><br><span class="hljs-comment">cout &lt;&lt; &quot;queue.size()= &quot; &lt;&lt; c.size() &lt;&lt; endl;</span><br><span class="hljs-comment">cout &lt;&lt; &quot;queue.front()= &quot; &lt;&lt; c.front() &lt;&lt; endl;</span><br><span class="hljs-comment">cout &lt;&lt; &quot;queue.back()= &quot; &lt;&lt; c.back() &lt;&lt; endl;</span><br><span class="hljs-comment">//[Error] &#x27;class std::set&lt;std::basic_string&lt;char&gt; &gt;&#x27; has no member named &#x27;push_back&#x27;</span><br><span class="hljs-comment">//[Error] &#x27;class std::set&lt;std::basic_string&lt;char&gt; &gt;&#x27; has no member named &#x27;front&#x27;</span><br><span class="hljs-comment">//[Error] &#x27;class std::set&lt;std::basic_string&lt;char&gt; &gt;&#x27; has no member named &#x27;pop_front&#x27;</span><br><span class="hljs-comment">*/</span><br>    &#125;<br>    <br><span class="hljs-comment">//! queue&lt;string, map&lt;string&gt;&gt; c5;//ä»¥ map ç‚ºåº•å±¤, [Error] template argument 2 is invalid</span><br><span class="hljs-comment">//! queue&lt;string&gt;::iterator ite1;  //[Error] &#x27;iterator&#x27; is not a member of &#x27;std::queue&lt;std::basic_string&lt;char&gt; &gt;&#x27;</span><br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Multiset</p></blockquote><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;set&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdexcept&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdlib&gt; //abort()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdio&gt;  //snprintf()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;ctime&gt; </span></span><br><span class="hljs-keyword">namespace</span> jj06<br>&#123;<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test_multiset</span><span class="hljs-params">(<span class="hljs-keyword">long</span>&amp; value)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;\ntest_multiset().......... \n&quot;</span>;<br><br><span class="hljs-built_in">multiset</span>&lt;<span class="hljs-built_in">string</span>&gt; c;  <br><span class="hljs-keyword">char</span> buf[<span class="hljs-number">10</span>];<br><span class="hljs-keyword">clock_t</span> timeStart = clock();<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> i=<span class="hljs-number">0</span>; i&lt; value; ++i)<br>    &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-built_in">snprintf</span>(buf, <span class="hljs-number">10</span>, <span class="hljs-string">&quot;%d&quot;</span>, rand());<br>        c.insert(<span class="hljs-built_in">string</span>(buf));     <br>&#125;<br><span class="hljs-keyword">catch</span>(exception&amp; p) &#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;i=&quot;</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; p.what() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">abort</span>();<br>&#125;<br>&#125;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;multiset.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;multiset.max_size()= &quot;</span> &lt;&lt; c.max_size() &lt;&lt; <span class="hljs-built_in">endl</span>;<span class="hljs-comment">//214748364</span><br><br><span class="hljs-built_in">string</span> target = get_a_target_string();<br>&#123;<br>    timeStart = clock();<br><span class="hljs-keyword">auto</span> pItem = <span class="hljs-built_in">find</span>(c.<span class="hljs-built_in">begin</span>(), c.<span class="hljs-built_in">end</span>(), target);<span class="hljs-comment">//æ¯” c.find(...) æ…¢å¾ˆå¤š</span><br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;std::find(), milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-keyword">if</span> (pItem != c.<span class="hljs-built_in">end</span>())<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;found, &quot;</span> &lt;&lt; *pItem &lt;&lt; <span class="hljs-built_in">endl</span>;<br>  <span class="hljs-keyword">else</span><br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;not found! &quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br> &#125;<br> <br> &#123;<br>    timeStart = clock();<br><span class="hljs-keyword">auto</span> pItem = c.<span class="hljs-built_in">find</span>(target);<span class="hljs-comment">//æ¯” std::find(...) å¿«å¾ˆå¤š</span><br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;c.find(), milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>; <br><span class="hljs-keyword">if</span> (pItem != c.<span class="hljs-built_in">end</span>())<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;found, &quot;</span> &lt;&lt; *pItem &lt;&lt; <span class="hljs-built_in">endl</span>;<br>  <span class="hljs-keyword">else</span><br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;not found! &quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br> &#125;<br> <br>c.<span class="hljs-built_in">clear</span>();<br>test_moveable(<span class="hljs-built_in">multiset</span>&lt;MyString&gt;(),<span class="hljs-built_in">multiset</span>&lt;MyStrNoMove&gt;(), value); <br>&#125; <br>&#125;<br></code></pre></td></tr></table></figure><p>Multimap</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;map&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdexcept&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdlib&gt; //abort()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdio&gt;  //snprintf()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;ctime&gt; </span></span><br><span class="hljs-keyword">namespace</span> jj07<br>&#123;<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test_multimap</span><span class="hljs-params">(<span class="hljs-keyword">long</span>&amp; value)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;\ntest_multimap().......... \n&quot;</span>;<br>     <br><span class="hljs-built_in">multimap</span>&lt;<span class="hljs-keyword">long</span>, <span class="hljs-built_in">string</span>&gt; c;  <br><span class="hljs-keyword">char</span> buf[<span class="hljs-number">10</span>];<br><br><span class="hljs-keyword">clock_t</span> timeStart = clock();<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> i=<span class="hljs-number">0</span>; i&lt; value; ++i)<br>    &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-built_in">snprintf</span>(buf, <span class="hljs-number">10</span>, <span class="hljs-string">&quot;%d&quot;</span>, rand());<br>    <span class="hljs-comment">//multimap ä¸å¯ä½¿ç”¨ [] åš insertion </span><br>        c.insert(<span class="hljs-built_in">pair</span>&lt;<span class="hljs-keyword">long</span>,<span class="hljs-built_in">string</span>&gt;(i,buf));   <br>&#125;<br><span class="hljs-keyword">catch</span>(exception&amp; p) &#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;i=&quot;</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; p.what() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">abort</span>();<br>&#125;<br>&#125;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;multimap.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;multimap.max_size()= &quot;</span> &lt;&lt; c.max_size() &lt;&lt; <span class="hljs-built_in">endl</span>;<span class="hljs-comment">//178956970</span><br><br><span class="hljs-keyword">long</span> target = get_a_target_long();<br>    timeStart = clock();<br><span class="hljs-keyword">auto</span> pItem = c.<span class="hljs-built_in">find</span>(target);<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;c.find(), milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>; <br><span class="hljs-keyword">if</span> (pItem != c.<span class="hljs-built_in">end</span>())<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;found, value=&quot;</span> &lt;&lt; (*pItem).second &lt;&lt; <span class="hljs-built_in">endl</span>;<br>  <span class="hljs-keyword">else</span><br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;not found! &quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;  <br><br>c.<span class="hljs-built_in">clear</span>();  <br>&#125; <br>&#125;<br></code></pre></td></tr></table></figure><p>Unordered_Multiset</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;unordered_set&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdexcept&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdlib&gt; //abort()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdio&gt;  //snprintf()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;ctime&gt; </span></span><br><span class="hljs-keyword">namespace</span> jj08<br>&#123;<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test_unordered_multiset</span><span class="hljs-params">(<span class="hljs-keyword">long</span>&amp; value)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;\ntest_unordered_multiset().......... \n&quot;</span>;<br>     <br><span class="hljs-built_in">unordered_multiset</span>&lt;<span class="hljs-built_in">string</span>&gt; c;  <br><span class="hljs-keyword">char</span> buf[<span class="hljs-number">10</span>];<br><br><span class="hljs-keyword">clock_t</span> timeStart = clock();<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> i=<span class="hljs-number">0</span>; i&lt; value; ++i)<br>    &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-built_in">snprintf</span>(buf, <span class="hljs-number">10</span>, <span class="hljs-string">&quot;%d&quot;</span>, rand());<br>        c.insert(<span class="hljs-built_in">string</span>(buf));     <br>&#125;<br><span class="hljs-keyword">catch</span>(exception&amp; p) &#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;i=&quot;</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; p.what() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">abort</span>();<br>&#125;<br>&#125;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;unordered_multiset.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;unordered_multiset.max_size()= &quot;</span> &lt;&lt; c.max_size() &lt;&lt; <span class="hljs-built_in">endl</span>;<span class="hljs-comment">//357913941</span><br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;unordered_multiset.bucket_count()= &quot;</span> &lt;&lt; c.bucket_count() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;unordered_multiset.load_factor()= &quot;</span> &lt;&lt; c.load_factor() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;unordered_multiset.max_load_factor()= &quot;</span> &lt;&lt; c.max_load_factor() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;unordered_multiset.max_bucket_count()= &quot;</span> &lt;&lt; c.max_bucket_count() &lt;&lt; <span class="hljs-built_in">endl</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">unsigned</span> i=<span class="hljs-number">0</span>; i&lt; <span class="hljs-number">20</span>; ++i) &#123;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;bucket #&quot;</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; has &quot;</span> &lt;&lt; c.bucket_size(i) &lt;&lt; <span class="hljs-string">&quot; elements.\n&quot;</span>;<br>  &#125;<br><br><span class="hljs-built_in">string</span> target = get_a_target_string();<br>&#123;<br>    timeStart = clock();<br><span class="hljs-keyword">auto</span> pItem = <span class="hljs-built_in">find</span>(c.<span class="hljs-built_in">begin</span>(), c.<span class="hljs-built_in">end</span>(), target);<span class="hljs-comment">//æ¯” c.find(...) æ…¢å¾ˆå¤š</span><br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;std::find(), milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-keyword">if</span> (pItem != c.<span class="hljs-built_in">end</span>())<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;found, &quot;</span> &lt;&lt; *pItem &lt;&lt; <span class="hljs-built_in">endl</span>;<br>  <span class="hljs-keyword">else</span><br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;not found! &quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br> &#125;<br> <br> &#123;<br>    timeStart = clock();<br><span class="hljs-keyword">auto</span> pItem = c.<span class="hljs-built_in">find</span>(target);<span class="hljs-comment">//æ¯” std::find(...) å¿«å¾ˆå¤š</span><br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;c.find(), milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>; <br><span class="hljs-keyword">if</span> (pItem != c.<span class="hljs-built_in">end</span>())<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;found, &quot;</span> &lt;&lt; *pItem &lt;&lt; <span class="hljs-built_in">endl</span>;<br>  <span class="hljs-keyword">else</span><br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;not found! &quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br> &#125;<br> <br>    c.<span class="hljs-built_in">clear</span>();<br>test_moveable(<span class="hljs-built_in">unordered_multiset</span>&lt;MyString&gt;(),<span class="hljs-built_in">unordered_multiset</span>&lt;MyStrNoMove&gt;(), value);  <br>&#125; <br>&#125;<br></code></pre></td></tr></table></figure><p>Unordered Multimap</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;unordered_map&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdexcept&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdlib&gt; //abort()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdio&gt;  //snprintf()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;ctime&gt; </span></span><br><span class="hljs-keyword">namespace</span> jj09<br>&#123;<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test_unordered_multimap</span><span class="hljs-params">(<span class="hljs-keyword">long</span>&amp; value)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;\ntest_unordered_multimap().......... \n&quot;</span>;<br>     <br><span class="hljs-built_in">unordered_multimap</span>&lt;<span class="hljs-keyword">long</span>, <span class="hljs-built_in">string</span>&gt; c;  <br><span class="hljs-keyword">char</span> buf[<span class="hljs-number">10</span>];<br><br><span class="hljs-keyword">clock_t</span> timeStart = clock();<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> i=<span class="hljs-number">0</span>; i&lt; value; ++i)<br>    &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-built_in">snprintf</span>(buf, <span class="hljs-number">10</span>, <span class="hljs-string">&quot;%d&quot;</span>, rand());<br><span class="hljs-comment">//multimap ä¸å¯ä½¿ç”¨ [] é€²è¡Œ insertion </span><br>c.insert(<span class="hljs-built_in">pair</span>&lt;<span class="hljs-keyword">long</span>,<span class="hljs-built_in">string</span>&gt;(i,buf));<br>&#125;<br><span class="hljs-keyword">catch</span>(exception&amp; p) &#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;i=&quot;</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; p.what() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">abort</span>();<br>&#125;<br>&#125;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;unordered_multimap.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;unordered_multimap.max_size()= &quot;</span> &lt;&lt; c.max_size() &lt;&lt; <span class="hljs-built_in">endl</span>;<span class="hljs-comment">//357913941</span><br><br><span class="hljs-keyword">long</span> target = get_a_target_long();<br>    timeStart = clock();<br><span class="hljs-keyword">auto</span> pItem = c.<span class="hljs-built_in">find</span>(target);<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;c.find(), milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>; <br><span class="hljs-keyword">if</span> (pItem != c.<span class="hljs-built_in">end</span>())<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;found, value=&quot;</span> &lt;&lt; (*pItem).second &lt;&lt; <span class="hljs-built_in">endl</span>;<br>  <span class="hljs-keyword">else</span><br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;not found! &quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>&#125; <br>&#125;<br></code></pre></td></tr></table></figure><p>Set</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain"><br></code></pre></td></tr></table></figure><p>Map</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain"><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>C++STLæ ‡å‡†æ¨¡æ¿åº“</category>
      
    </categories>
    
    
    <tags>
      
      <tag>STL</tag>
      
      <tag>C++</tag>
      
      <tag>æ¨¡æ¿ç¼–ç¨‹</tag>
      
      <tag>ç®—æ³•</tag>
      
      <tag>æ•°æ®ç»“æ„</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>C++STLå®¹å™¨åˆ†ç±»ï¼ˆäºŒï¼‰</title>
    <link href="/2019/10/30/C-STL%E5%AE%B9%E5%99%A8Vector/"/>
    <url>/2019/10/30/C-STL%E5%AE%B9%E5%99%A8Vector/</url>
    
    <content type="html"><![CDATA[<p><img src="/2019/10/30/C-STL%E5%AE%B9%E5%99%A8Vector/containerstruct.png" alt="1"></p><p>ä¹‹åå®¹å™¨æµ‹è¯•ç”¨ä¾‹çš„ è¾…åŠ©å‡½æ•°</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">using</span> <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cin</span>;<br><span class="hljs-keyword">using</span> <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span>;<br><span class="hljs-keyword">using</span> <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>;<br><br><span class="hljs-function"><span class="hljs-keyword">long</span> <span class="hljs-title">get_a_target_long</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-keyword">long</span> target=<span class="hljs-number">0</span>;<br>    <span class="hljs-built_in">cout</span>&lt;&lt;<span class="hljs-string">&quot;target (0~&quot;</span>&lt;&lt;RAND_MAX&lt;&lt;<span class="hljs-string">&quot;): &quot;</span>;<br>    <span class="hljs-built_in">cin</span>&gt;&gt;target;<br>    <span class="hljs-keyword">return</span> target;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-built_in">string</span> <span class="hljs-title">get_a_target_string</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-keyword">long</span> target=<span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">char</span> buf[<span class="hljs-number">10</span>];<br>    <span class="hljs-built_in">cout</span>&lt;&lt;<span class="hljs-string">&quot;target (0~&quot;</span>&lt;&lt;RAND_MAX&lt;&lt;<span class="hljs-string">&quot;): &quot;</span>;<br>    <span class="hljs-built_in">cin</span>&gt;&gt;target;<br>    <span class="hljs-built_in">snprintf</span>(buf,<span class="hljs-number">10</span>,<span class="hljs-string">&quot;%d&quot;</span>,target);<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">string</span>(buf);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">compareLongs</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span>* a,<span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span>* b)</span></span>&#123;<br>    <span class="hljs-keyword">return</span> (*(<span class="hljs-keyword">long</span>*)a - *(<span class="hljs-keyword">long</span>*)b );<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">compareStrings</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span>* a,<span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span>* b)</span></span>&#123;<br>    <span class="hljs-keyword">if</span>(*(<span class="hljs-built_in">string</span>*)a &gt; *(<span class="hljs-built_in">string</span>*)b )&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(*(<span class="hljs-built_in">string</span>*)a &lt; *(<span class="hljs-built_in">string</span>*)b )&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<span class="hljs-keyword">else</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Array</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;array&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;ctime&gt; </span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdlib&gt; //qsort, bsearch, NULL</span></span><br><br><span class="hljs-keyword">namespace</span> jj01<br>&#123;<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test_array</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;\ntest_array().......... \n&quot;</span>;<br>     <br><span class="hljs-built_in">array</span>&lt;<span class="hljs-keyword">long</span>,ASIZE&gt; c;  <br><br><span class="hljs-keyword">clock_t</span> timeStart = clock();<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> i=<span class="hljs-number">0</span>; i&lt; ASIZE; ++i) &#123;<br>        c[i] = rand(); <br>    &#125;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<span class="hljs-comment">//</span><br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;array.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;array.front()= &quot;</span> &lt;&lt; c.front() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;array.back()= &quot;</span> &lt;&lt; c.back() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;array.data()= &quot;</span> &lt;&lt; c.data() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br><span class="hljs-keyword">long</span> target = get_a_target_long();<br><br>timeStart = clock();<br>    ::qsort(c.data(), ASIZE, <span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">long</span>), compareLongs);<br><span class="hljs-keyword">long</span>* pItem = (<span class="hljs-keyword">long</span>*)::bsearch(&amp;target, (c.data()), ASIZE, <span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">long</span>), compareLongs); <br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;qsort()+bsearch(), milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<span class="hljs-comment">//    </span><br>  <span class="hljs-keyword">if</span> (pItem != <span class="hljs-literal">NULL</span>)<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;found, &quot;</span> &lt;&lt; *pItem &lt;&lt; <span class="hljs-built_in">endl</span>;<br>  <span class="hljs-keyword">else</span><br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;not found! &quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Vector</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdexcept&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdlib&gt; //abort()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdio&gt;  //snprintf()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;ctime&gt; </span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;algorithm&gt; //sort()</span></span><br><span class="hljs-keyword">namespace</span> jj02<br>&#123;<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test_vector</span><span class="hljs-params">(<span class="hljs-keyword">long</span>&amp; value)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;\ntest_vector().......... \n&quot;</span>;<br>     <br><span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">string</span>&gt; c;  <br><span class="hljs-keyword">char</span> buf[<span class="hljs-number">10</span>];<br><br><span class="hljs-keyword">clock_t</span> timeStart = clock();<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> i=<span class="hljs-number">0</span>; i&lt; value; ++i)<br>    &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-built_in">snprintf</span>(buf, <span class="hljs-number">10</span>, <span class="hljs-string">&quot;%d&quot;</span>, rand());<br>        c.push_back(<span class="hljs-built_in">string</span>(buf));     <br>&#125;<br><span class="hljs-keyword">catch</span>(exception&amp; p) &#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;i=&quot;</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; p.what() &lt;&lt; <span class="hljs-built_in">endl</span>;<br>     <span class="hljs-comment">//æ›¾ç¶“æœ€é«˜ i=58389486 then std::bad_alloc</span><br><span class="hljs-built_in">abort</span>();<br>&#125;<br>&#125;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;vector.max_size()= &quot;</span> &lt;&lt; c.max_size() &lt;&lt; <span class="hljs-built_in">endl</span>;<span class="hljs-comment">//1073747823</span><br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;vector.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;vector.front()= &quot;</span> &lt;&lt; c.front() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;vector.back()= &quot;</span> &lt;&lt; c.back() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;vector.data()= &quot;</span> &lt;&lt; c.data() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;vector.capacity()= &quot;</span> &lt;&lt; c.capacity() &lt;&lt; <span class="hljs-built_in">endl</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br><br><span class="hljs-built_in">string</span> target = get_a_target_string();<br>    &#123;<br>timeStart = clock();<br><span class="hljs-keyword">auto</span> pItem = <span class="hljs-built_in">find</span>(c.<span class="hljs-built_in">begin</span>(), c.<span class="hljs-built_in">end</span>(), target);<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;std::find(), milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;  <br> <br>  <span class="hljs-keyword">if</span> (pItem != c.<span class="hljs-built_in">end</span>())<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;found, &quot;</span> &lt;&lt; *pItem &lt;&lt; <span class="hljs-built_in">endl</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>  <span class="hljs-keyword">else</span><br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;not found! &quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    &#125;<br><br>&#123;<br>timeStart = clock();<br>    sort(c.<span class="hljs-built_in">begin</span>(), c.<span class="hljs-built_in">end</span>());<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;sort(), milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>; <br><br>timeStart = clock();    <br><span class="hljs-built_in">string</span>* pItem = (<span class="hljs-built_in">string</span>*)::bsearch(&amp;target, (c.data()), <br>                                   c.<span class="hljs-built_in">size</span>(), <span class="hljs-keyword">sizeof</span>(<span class="hljs-built_in">string</span>), compareStrings); <br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;bsearch(), milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>; <br>   <br>  <span class="hljs-keyword">if</span> (pItem != <span class="hljs-literal">NULL</span>)<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;found, &quot;</span> &lt;&lt; *pItem &lt;&lt; <span class="hljs-built_in">endl</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>  <span class="hljs-keyword">else</span><br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;not found! &quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>&#125;<br><br>c.<span class="hljs-built_in">clear</span>();<br>test_moveable(<span class="hljs-built_in">vector</span>&lt;MyString&gt;(),<span class="hljs-built_in">vector</span>&lt;MyStrNoMove&gt;(), value);<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>List</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;list&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdexcept&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdlib&gt; //abort()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdio&gt;  //snprintf()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;algorithm&gt; //find()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;ctime&gt; </span></span><br><span class="hljs-keyword">namespace</span> jj03<br>&#123;<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test_list</span><span class="hljs-params">(<span class="hljs-keyword">long</span>&amp; value)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;\ntest_list().......... \n&quot;</span>;<br>     <br><span class="hljs-built_in">list</span>&lt;<span class="hljs-built_in">string</span>&gt; c;  <br><span class="hljs-keyword">char</span> buf[<span class="hljs-number">10</span>];<br><br><span class="hljs-keyword">clock_t</span> timeStart = clock();<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> i=<span class="hljs-number">0</span>; i&lt; value; ++i)<br>    &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-built_in">snprintf</span>(buf, <span class="hljs-number">10</span>, <span class="hljs-string">&quot;%d&quot;</span>, rand());<br>        c.push_back(<span class="hljs-built_in">string</span>(buf));    <br>&#125;<br><span class="hljs-keyword">catch</span>(exception&amp; p) &#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;i=&quot;</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; p.what() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">abort</span>();<br>&#125;<br>&#125;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;list.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;list.max_size()= &quot;</span> &lt;&lt; c.max_size() &lt;&lt; <span class="hljs-built_in">endl</span>;    <span class="hljs-comment">//357913941</span><br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;list.front()= &quot;</span> &lt;&lt; c.front() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;list.back()= &quot;</span> &lt;&lt; c.back() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br><span class="hljs-built_in">string</span> target = get_a_target_string();<br>    timeStart = clock();<br><span class="hljs-keyword">auto</span> pItem = <span class="hljs-built_in">find</span>(c.<span class="hljs-built_in">begin</span>(), c.<span class="hljs-built_in">end</span>(), target);<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;std::find(), milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br>  <span class="hljs-keyword">if</span> (pItem != c.<span class="hljs-built_in">end</span>())<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;found, &quot;</span> &lt;&lt; *pItem &lt;&lt; <span class="hljs-built_in">endl</span>;<br>  <span class="hljs-keyword">else</span><br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;not found! &quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    <br>    timeStart = clock();<br>c.sort();<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;c.sort(), milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;    <br>    <br>c.<span class="hljs-built_in">clear</span>();<br>test_moveable(<span class="hljs-built_in">list</span>&lt;MyString&gt;(),<span class="hljs-built_in">list</span>&lt;MyStrNoMove&gt;(), value);<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Forward-List</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;forward_list&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdexcept&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdlib&gt; //abort()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdio&gt;  //snprintf()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;ctime&gt; </span></span><br><span class="hljs-keyword">namespace</span> jj04<br>&#123;<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test_forward_list</span><span class="hljs-params">(<span class="hljs-keyword">long</span>&amp; value)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;\ntest_forward_list().......... \n&quot;</span>;<br>     <br>forward_list&lt;<span class="hljs-built_in">string</span>&gt; c;  <br><span class="hljs-keyword">char</span> buf[<span class="hljs-number">10</span>];<br><br><span class="hljs-keyword">clock_t</span> timeStart = clock();<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> i=<span class="hljs-number">0</span>; i&lt; value; ++i)<br>    &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-built_in">snprintf</span>(buf, <span class="hljs-number">10</span>, <span class="hljs-string">&quot;%d&quot;</span>, rand());<br>        c.push_front(<span class="hljs-built_in">string</span>(buf));     <br>&#125;<br><span class="hljs-keyword">catch</span>(exception&amp; p) &#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;i=&quot;</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; p.what() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">abort</span>();<br>&#125;<br>&#125;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;forward_list.max_size()= &quot;</span> &lt;&lt; c.max_size() &lt;&lt; <span class="hljs-built_in">endl</span>;  <span class="hljs-comment">//536870911</span><br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;forward_list.front()= &quot;</span> &lt;&lt; c.front() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br><br><span class="hljs-built_in">string</span> target = get_a_target_string();<br>    timeStart = clock();<br><span class="hljs-keyword">auto</span> pItem = <span class="hljs-built_in">find</span>(c.<span class="hljs-built_in">begin</span>(), c.<span class="hljs-built_in">end</span>(), target);<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;std::find(), milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br><span class="hljs-keyword">if</span> (pItem != c.<span class="hljs-built_in">end</span>())<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;found, &quot;</span> &lt;&lt; *pItem &lt;&lt; <span class="hljs-built_in">endl</span>;<br>  <span class="hljs-keyword">else</span><br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;not found! &quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    <br>    timeStart = clock();<br>c.sort();<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;c.sort(), milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br>c.<span class="hljs-built_in">clear</span>(); <br>&#125; <br>&#125;<br></code></pre></td></tr></table></figure><p>Deque</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;deque&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdexcept&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdlib&gt; //abort()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdio&gt;  //snprintf()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;ctime&gt; </span></span><br><span class="hljs-keyword">namespace</span> jj05<br>&#123;<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test_deque</span><span class="hljs-params">(<span class="hljs-keyword">long</span>&amp; value)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;\ntest_deque().......... \n&quot;</span>;<br>     <br><span class="hljs-built_in">deque</span>&lt;<span class="hljs-built_in">string</span>&gt; c;  <br><span class="hljs-keyword">char</span> buf[<span class="hljs-number">10</span>];<br><br><span class="hljs-keyword">clock_t</span> timeStart = clock();<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> i=<span class="hljs-number">0</span>; i&lt; value; ++i)<br>    &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-built_in">snprintf</span>(buf, <span class="hljs-number">10</span>, <span class="hljs-string">&quot;%d&quot;</span>, rand());<br>        c.push_back(<span class="hljs-built_in">string</span>(buf));     <br>&#125;<br><span class="hljs-keyword">catch</span>(exception&amp; p) &#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;i=&quot;</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; p.what() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">abort</span>();<br>&#125;<br>&#125;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;deque.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;deque.front()= &quot;</span> &lt;&lt; c.front() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;deque.back()= &quot;</span> &lt;&lt; c.back() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;deque.max_size()= &quot;</span> &lt;&lt; c.max_size() &lt;&lt; <span class="hljs-built_in">endl</span>;<span class="hljs-comment">//1073741821</span><br><br><span class="hljs-built_in">string</span> target = get_a_target_string();<br>    timeStart = clock();<br><span class="hljs-keyword">auto</span> pItem = <span class="hljs-built_in">find</span>(c.<span class="hljs-built_in">begin</span>(), c.<span class="hljs-built_in">end</span>(), target);<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;std::find(), milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br><span class="hljs-keyword">if</span> (pItem != c.<span class="hljs-built_in">end</span>())<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;found, &quot;</span> &lt;&lt; *pItem &lt;&lt; <span class="hljs-built_in">endl</span>;<br>  <span class="hljs-keyword">else</span><br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;not found! &quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    <br>    timeStart = clock();<br>sort(c.<span class="hljs-built_in">begin</span>(), c.<span class="hljs-built_in">end</span>());<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;sort(), milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br>c.<span class="hljs-built_in">clear</span>();<br>test_moveable(<span class="hljs-built_in">deque</span>&lt;MyString&gt;(),<span class="hljs-built_in">deque</span>&lt;MyStrNoMove&gt;(), value); <br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Stack</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stack&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdexcept&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdlib&gt; //abort()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdio&gt;  //snprintf()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;ctime&gt; </span></span><br><span class="hljs-keyword">namespace</span> jj17<br>&#123;<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test_stack</span><span class="hljs-params">(<span class="hljs-keyword">long</span>&amp; value)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;\ntest_stack().......... \n&quot;</span>;<br>     <br><span class="hljs-built_in">stack</span>&lt;<span class="hljs-built_in">string</span>&gt; c;  <br><span class="hljs-keyword">char</span> buf[<span class="hljs-number">10</span>];<br><br><span class="hljs-keyword">clock_t</span> timeStart = clock();<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> i=<span class="hljs-number">0</span>; i&lt; value; ++i)<br>    &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-built_in">snprintf</span>(buf, <span class="hljs-number">10</span>, <span class="hljs-string">&quot;%d&quot;</span>, rand());<br>        c.push(<span class="hljs-built_in">string</span>(buf));     <br>&#125;<br><span class="hljs-keyword">catch</span>(exception&amp; p) &#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;i=&quot;</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; p.what() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">abort</span>();<br>&#125;<br>&#125;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;stack.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;stack.top()= &quot;</span> &lt;&lt; c.top() &lt;&lt; <span class="hljs-built_in">endl</span>;<br>c.pop();<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;stack.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;stack.top()= &quot;</span> &lt;&lt; c.top() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br><br>&#123;<br><span class="hljs-built_in">stack</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">list</span>&lt;<span class="hljs-built_in">string</span>&gt;&gt; c;<span class="hljs-comment">//ä»¥ list ç‚ºåº•å±¤ </span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> i=<span class="hljs-number">0</span>; i&lt; <span class="hljs-number">10</span>; ++i) &#123;<br>    <span class="hljs-built_in">snprintf</span>(buf, <span class="hljs-number">10</span>, <span class="hljs-string">&quot;%d&quot;</span>, rand());<br>        c.push(<span class="hljs-built_in">string</span>(buf));     <br>&#125;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;stack.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;stack.top()= &quot;</span> &lt;&lt; c.top() &lt;&lt; <span class="hljs-built_in">endl</span>;<br>c.pop();<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;stack.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;stack.top()= &quot;</span> &lt;&lt; c.top() &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    &#125;<br><br>&#123;<br><span class="hljs-built_in">stack</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">string</span>&gt;&gt; c;<span class="hljs-comment">//ä»¥ vector ç‚ºåº•å±¤ </span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> i=<span class="hljs-number">0</span>; i&lt; <span class="hljs-number">10</span>; ++i) &#123;<br>    <span class="hljs-built_in">snprintf</span>(buf, <span class="hljs-number">10</span>, <span class="hljs-string">&quot;%d&quot;</span>, rand());<br>        c.push(<span class="hljs-built_in">string</span>(buf));     <br>&#125;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;stack.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;stack.top()= &quot;</span> &lt;&lt; c.top() &lt;&lt; <span class="hljs-built_in">endl</span>;<br>c.pop();<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;stack.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;stack.top()= &quot;</span> &lt;&lt; c.top() &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    &#125;<br><br>&#123;<br><span class="hljs-built_in">stack</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">set</span>&lt;<span class="hljs-built_in">string</span>&gt;&gt; c;<span class="hljs-comment">//ä»¥ set ç‚ºåº•å±¤ </span><br><span class="hljs-comment">/*!</span><br><span class="hljs-comment">    for(long i=0; i&lt; 10; ++i) &#123;</span><br><span class="hljs-comment">    snprintf(buf, 10, &quot;%d&quot;, rand());</span><br><span class="hljs-comment">        c.push(string(buf));     </span><br><span class="hljs-comment">&#125;</span><br><span class="hljs-comment">cout &lt;&lt; &quot;stack.size()= &quot; &lt;&lt; c.size() &lt;&lt; endl;</span><br><span class="hljs-comment">cout &lt;&lt; &quot;stack.top()= &quot; &lt;&lt; c.top() &lt;&lt; endl;</span><br><span class="hljs-comment">c.pop();</span><br><span class="hljs-comment">cout &lt;&lt; &quot;stack.size()= &quot; &lt;&lt; c.size() &lt;&lt; endl;</span><br><span class="hljs-comment">cout &lt;&lt; &quot;stack.top()= &quot; &lt;&lt; c.top() &lt;&lt; endl;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">//[Error] &#x27;class std::set&lt;std::basic_string&lt;char&gt; &gt;&#x27; has no member named &#x27;push_back&#x27;</span><br><span class="hljs-comment">//[Error] &#x27;class std::set&lt;std::basic_string&lt;char&gt; &gt;&#x27; has no member named &#x27;back&#x27;</span><br><span class="hljs-comment">//[Error] &#x27;class std::set&lt;std::basic_string&lt;char&gt; &gt;&#x27; has no member named &#x27;pop_back&#x27;</span><br><span class="hljs-comment">*/</span><br>    &#125;<br><br><span class="hljs-comment">//!stack&lt;string, map(string&gt;&gt; c5;////ä»¥ map ç‚ºåº•å±¤, [Error] template argument 2 is invalid</span><br><span class="hljs-comment">//!stack&lt;string&gt;::iterator ite1;  //[Error] &#x27;iterator&#x27; is not a member of &#x27;std::stack&lt;std::basic_string&lt;char&gt; &gt;&#x27;</span><br><br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Queue</p><blockquote><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;queue&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdexcept&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdlib&gt; //abort()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdio&gt;  //snprintf()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;ctime&gt; </span></span><br><span class="hljs-keyword">namespace</span> jj18<br>&#123;<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test_queue</span><span class="hljs-params">(<span class="hljs-keyword">long</span>&amp; value)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;\ntest_queue().......... \n&quot;</span>;<br>     <br><span class="hljs-built_in">queue</span>&lt;<span class="hljs-built_in">string</span>&gt; c;  <br><span class="hljs-keyword">char</span> buf[<span class="hljs-number">10</span>];<br><br><span class="hljs-keyword">clock_t</span> timeStart = clock();<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> i=<span class="hljs-number">0</span>; i&lt; value; ++i)<br>    &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-built_in">snprintf</span>(buf, <span class="hljs-number">10</span>, <span class="hljs-string">&quot;%d&quot;</span>, rand());<br>        c.push(<span class="hljs-built_in">string</span>(buf));     <br>&#125;<br><span class="hljs-keyword">catch</span>(exception&amp; p) &#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;i=&quot;</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; p.what() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">abort</span>();<br>&#125;<br>&#125;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.front()= &quot;</span> &lt;&lt; c.front() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.back()= &quot;</span> &lt;&lt; c.back() &lt;&lt; <span class="hljs-built_in">endl</span>;<br>c.pop();<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.front()= &quot;</span> &lt;&lt; c.front() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.back()= &quot;</span> &lt;&lt; c.back() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br><br>&#123;<br><span class="hljs-built_in">queue</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">list</span>&lt;<span class="hljs-built_in">string</span>&gt;&gt; c;<span class="hljs-comment">//ä»¥ list ç‚ºåº•å±¤ </span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> i=<span class="hljs-number">0</span>; i&lt; <span class="hljs-number">10</span>; ++i) &#123;<br>    <span class="hljs-built_in">snprintf</span>(buf, <span class="hljs-number">10</span>, <span class="hljs-string">&quot;%d&quot;</span>, rand());<br>        c.push(<span class="hljs-built_in">string</span>(buf));     <br>&#125;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.front()= &quot;</span> &lt;&lt; c.front() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.back()= &quot;</span> &lt;&lt; c.back() &lt;&lt; <span class="hljs-built_in">endl</span>;<br>c.pop();<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.front()= &quot;</span> &lt;&lt; c.front() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.back()= &quot;</span> &lt;&lt; c.back() &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    &#125;<br><br>&#123;<br><span class="hljs-built_in">queue</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">string</span>&gt;&gt; c;<span class="hljs-comment">//ä»¥ vector ç‚ºåº•å±¤ </span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> i=<span class="hljs-number">0</span>; i&lt; <span class="hljs-number">10</span>; ++i) &#123;<br>    <span class="hljs-built_in">snprintf</span>(buf, <span class="hljs-number">10</span>, <span class="hljs-string">&quot;%d&quot;</span>, rand());<br>        c.push(<span class="hljs-built_in">string</span>(buf));     <br>&#125;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.front()= &quot;</span> &lt;&lt; c.front() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.back()= &quot;</span> &lt;&lt; c.back() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-comment">//!c.pop();  //[Error] &#x27;class std::vector&lt;std::basic_string&lt;char&gt; &gt;&#x27; has no member named &#x27;pop_front&#x27;</span><br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.front()= &quot;</span> &lt;&lt; c.front() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;queue.back()= &quot;</span> &lt;&lt; c.back() &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    &#125;<br><br>&#123;<br><span class="hljs-built_in">queue</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">set</span>&lt;<span class="hljs-built_in">string</span>&gt;&gt; c;<span class="hljs-comment">//ä»¥ set ç‚ºåº•å±¤ </span><br><span class="hljs-comment">/*!</span><br><span class="hljs-comment">    for(long i=0; i&lt; 10; ++i) &#123;</span><br><span class="hljs-comment">    snprintf(buf, 10, &quot;%d&quot;, rand());</span><br><span class="hljs-comment">        c.push(string(buf));     </span><br><span class="hljs-comment">&#125;</span><br><span class="hljs-comment">cout &lt;&lt; &quot;queue.size()= &quot; &lt;&lt; c.size() &lt;&lt; endl;</span><br><span class="hljs-comment">cout &lt;&lt; &quot;queue.front()= &quot; &lt;&lt; c.front() &lt;&lt; endl;</span><br><span class="hljs-comment">cout &lt;&lt; &quot;queue.back()= &quot; &lt;&lt; c.back() &lt;&lt; endl;</span><br><span class="hljs-comment">c.pop();</span><br><span class="hljs-comment">cout &lt;&lt; &quot;queue.size()= &quot; &lt;&lt; c.size() &lt;&lt; endl;</span><br><span class="hljs-comment">cout &lt;&lt; &quot;queue.front()= &quot; &lt;&lt; c.front() &lt;&lt; endl;</span><br><span class="hljs-comment">cout &lt;&lt; &quot;queue.back()= &quot; &lt;&lt; c.back() &lt;&lt; endl;</span><br><span class="hljs-comment">//[Error] &#x27;class std::set&lt;std::basic_string&lt;char&gt; &gt;&#x27; has no member named &#x27;push_back&#x27;</span><br><span class="hljs-comment">//[Error] &#x27;class std::set&lt;std::basic_string&lt;char&gt; &gt;&#x27; has no member named &#x27;front&#x27;</span><br><span class="hljs-comment">//[Error] &#x27;class std::set&lt;std::basic_string&lt;char&gt; &gt;&#x27; has no member named &#x27;pop_front&#x27;</span><br><span class="hljs-comment">*/</span><br>    &#125;<br>    <br><span class="hljs-comment">//! queue&lt;string, map&lt;string&gt;&gt; c5;//ä»¥ map ç‚ºåº•å±¤, [Error] template argument 2 is invalid</span><br><span class="hljs-comment">//! queue&lt;string&gt;::iterator ite1;  //[Error] &#x27;iterator&#x27; is not a member of &#x27;std::queue&lt;std::basic_string&lt;char&gt; &gt;&#x27;</span><br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Multiset</p></blockquote><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;set&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdexcept&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdlib&gt; //abort()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdio&gt;  //snprintf()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;ctime&gt; </span></span><br><span class="hljs-keyword">namespace</span> jj06<br>&#123;<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test_multiset</span><span class="hljs-params">(<span class="hljs-keyword">long</span>&amp; value)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;\ntest_multiset().......... \n&quot;</span>;<br><br><span class="hljs-built_in">multiset</span>&lt;<span class="hljs-built_in">string</span>&gt; c;  <br><span class="hljs-keyword">char</span> buf[<span class="hljs-number">10</span>];<br><span class="hljs-keyword">clock_t</span> timeStart = clock();<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> i=<span class="hljs-number">0</span>; i&lt; value; ++i)<br>    &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-built_in">snprintf</span>(buf, <span class="hljs-number">10</span>, <span class="hljs-string">&quot;%d&quot;</span>, rand());<br>        c.insert(<span class="hljs-built_in">string</span>(buf));     <br>&#125;<br><span class="hljs-keyword">catch</span>(exception&amp; p) &#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;i=&quot;</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; p.what() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">abort</span>();<br>&#125;<br>&#125;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;multiset.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;multiset.max_size()= &quot;</span> &lt;&lt; c.max_size() &lt;&lt; <span class="hljs-built_in">endl</span>;<span class="hljs-comment">//214748364</span><br><br><span class="hljs-built_in">string</span> target = get_a_target_string();<br>&#123;<br>    timeStart = clock();<br><span class="hljs-keyword">auto</span> pItem = <span class="hljs-built_in">find</span>(c.<span class="hljs-built_in">begin</span>(), c.<span class="hljs-built_in">end</span>(), target);<span class="hljs-comment">//æ¯” c.find(...) æ…¢å¾ˆå¤š</span><br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;std::find(), milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-keyword">if</span> (pItem != c.<span class="hljs-built_in">end</span>())<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;found, &quot;</span> &lt;&lt; *pItem &lt;&lt; <span class="hljs-built_in">endl</span>;<br>  <span class="hljs-keyword">else</span><br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;not found! &quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br> &#125;<br> <br> &#123;<br>    timeStart = clock();<br><span class="hljs-keyword">auto</span> pItem = c.<span class="hljs-built_in">find</span>(target);<span class="hljs-comment">//æ¯” std::find(...) å¿«å¾ˆå¤š</span><br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;c.find(), milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>; <br><span class="hljs-keyword">if</span> (pItem != c.<span class="hljs-built_in">end</span>())<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;found, &quot;</span> &lt;&lt; *pItem &lt;&lt; <span class="hljs-built_in">endl</span>;<br>  <span class="hljs-keyword">else</span><br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;not found! &quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br> &#125;<br> <br>c.<span class="hljs-built_in">clear</span>();<br>test_moveable(<span class="hljs-built_in">multiset</span>&lt;MyString&gt;(),<span class="hljs-built_in">multiset</span>&lt;MyStrNoMove&gt;(), value); <br>&#125; <br>&#125;<br></code></pre></td></tr></table></figure><p>Multimap</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;map&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdexcept&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdlib&gt; //abort()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdio&gt;  //snprintf()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;ctime&gt; </span></span><br><span class="hljs-keyword">namespace</span> jj07<br>&#123;<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test_multimap</span><span class="hljs-params">(<span class="hljs-keyword">long</span>&amp; value)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;\ntest_multimap().......... \n&quot;</span>;<br>     <br><span class="hljs-built_in">multimap</span>&lt;<span class="hljs-keyword">long</span>, <span class="hljs-built_in">string</span>&gt; c;  <br><span class="hljs-keyword">char</span> buf[<span class="hljs-number">10</span>];<br><br><span class="hljs-keyword">clock_t</span> timeStart = clock();<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> i=<span class="hljs-number">0</span>; i&lt; value; ++i)<br>    &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-built_in">snprintf</span>(buf, <span class="hljs-number">10</span>, <span class="hljs-string">&quot;%d&quot;</span>, rand());<br>    <span class="hljs-comment">//multimap ä¸å¯ä½¿ç”¨ [] åš insertion </span><br>        c.insert(<span class="hljs-built_in">pair</span>&lt;<span class="hljs-keyword">long</span>,<span class="hljs-built_in">string</span>&gt;(i,buf));   <br>&#125;<br><span class="hljs-keyword">catch</span>(exception&amp; p) &#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;i=&quot;</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; p.what() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">abort</span>();<br>&#125;<br>&#125;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;multimap.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;multimap.max_size()= &quot;</span> &lt;&lt; c.max_size() &lt;&lt; <span class="hljs-built_in">endl</span>;<span class="hljs-comment">//178956970</span><br><br><span class="hljs-keyword">long</span> target = get_a_target_long();<br>    timeStart = clock();<br><span class="hljs-keyword">auto</span> pItem = c.<span class="hljs-built_in">find</span>(target);<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;c.find(), milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>; <br><span class="hljs-keyword">if</span> (pItem != c.<span class="hljs-built_in">end</span>())<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;found, value=&quot;</span> &lt;&lt; (*pItem).second &lt;&lt; <span class="hljs-built_in">endl</span>;<br>  <span class="hljs-keyword">else</span><br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;not found! &quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;  <br><br>c.<span class="hljs-built_in">clear</span>();  <br>&#125; <br>&#125;<br></code></pre></td></tr></table></figure><p>Unordered_Multiset</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;unordered_set&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdexcept&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdlib&gt; //abort()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdio&gt;  //snprintf()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;ctime&gt; </span></span><br><span class="hljs-keyword">namespace</span> jj08<br>&#123;<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test_unordered_multiset</span><span class="hljs-params">(<span class="hljs-keyword">long</span>&amp; value)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;\ntest_unordered_multiset().......... \n&quot;</span>;<br>     <br><span class="hljs-built_in">unordered_multiset</span>&lt;<span class="hljs-built_in">string</span>&gt; c;  <br><span class="hljs-keyword">char</span> buf[<span class="hljs-number">10</span>];<br><br><span class="hljs-keyword">clock_t</span> timeStart = clock();<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> i=<span class="hljs-number">0</span>; i&lt; value; ++i)<br>    &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-built_in">snprintf</span>(buf, <span class="hljs-number">10</span>, <span class="hljs-string">&quot;%d&quot;</span>, rand());<br>        c.insert(<span class="hljs-built_in">string</span>(buf));     <br>&#125;<br><span class="hljs-keyword">catch</span>(exception&amp; p) &#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;i=&quot;</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; p.what() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">abort</span>();<br>&#125;<br>&#125;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;unordered_multiset.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;unordered_multiset.max_size()= &quot;</span> &lt;&lt; c.max_size() &lt;&lt; <span class="hljs-built_in">endl</span>;<span class="hljs-comment">//357913941</span><br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;unordered_multiset.bucket_count()= &quot;</span> &lt;&lt; c.bucket_count() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;unordered_multiset.load_factor()= &quot;</span> &lt;&lt; c.load_factor() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;unordered_multiset.max_load_factor()= &quot;</span> &lt;&lt; c.max_load_factor() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;unordered_multiset.max_bucket_count()= &quot;</span> &lt;&lt; c.max_bucket_count() &lt;&lt; <span class="hljs-built_in">endl</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">unsigned</span> i=<span class="hljs-number">0</span>; i&lt; <span class="hljs-number">20</span>; ++i) &#123;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;bucket #&quot;</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; has &quot;</span> &lt;&lt; c.bucket_size(i) &lt;&lt; <span class="hljs-string">&quot; elements.\n&quot;</span>;<br>  &#125;<br><br><span class="hljs-built_in">string</span> target = get_a_target_string();<br>&#123;<br>    timeStart = clock();<br><span class="hljs-keyword">auto</span> pItem = <span class="hljs-built_in">find</span>(c.<span class="hljs-built_in">begin</span>(), c.<span class="hljs-built_in">end</span>(), target);<span class="hljs-comment">//æ¯” c.find(...) æ…¢å¾ˆå¤š</span><br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;std::find(), milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-keyword">if</span> (pItem != c.<span class="hljs-built_in">end</span>())<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;found, &quot;</span> &lt;&lt; *pItem &lt;&lt; <span class="hljs-built_in">endl</span>;<br>  <span class="hljs-keyword">else</span><br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;not found! &quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br> &#125;<br> <br> &#123;<br>    timeStart = clock();<br><span class="hljs-keyword">auto</span> pItem = c.<span class="hljs-built_in">find</span>(target);<span class="hljs-comment">//æ¯” std::find(...) å¿«å¾ˆå¤š</span><br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;c.find(), milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>; <br><span class="hljs-keyword">if</span> (pItem != c.<span class="hljs-built_in">end</span>())<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;found, &quot;</span> &lt;&lt; *pItem &lt;&lt; <span class="hljs-built_in">endl</span>;<br>  <span class="hljs-keyword">else</span><br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;not found! &quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br> &#125;<br> <br>    c.<span class="hljs-built_in">clear</span>();<br>test_moveable(<span class="hljs-built_in">unordered_multiset</span>&lt;MyString&gt;(),<span class="hljs-built_in">unordered_multiset</span>&lt;MyStrNoMove&gt;(), value);  <br>&#125; <br>&#125;<br></code></pre></td></tr></table></figure><p>Unordered Multimap</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;unordered_map&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdexcept&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdlib&gt; //abort()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdio&gt;  //snprintf()</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;ctime&gt; </span></span><br><span class="hljs-keyword">namespace</span> jj09<br>&#123;<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test_unordered_multimap</span><span class="hljs-params">(<span class="hljs-keyword">long</span>&amp; value)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;\ntest_unordered_multimap().......... \n&quot;</span>;<br>     <br><span class="hljs-built_in">unordered_multimap</span>&lt;<span class="hljs-keyword">long</span>, <span class="hljs-built_in">string</span>&gt; c;  <br><span class="hljs-keyword">char</span> buf[<span class="hljs-number">10</span>];<br><br><span class="hljs-keyword">clock_t</span> timeStart = clock();<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> i=<span class="hljs-number">0</span>; i&lt; value; ++i)<br>    &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-built_in">snprintf</span>(buf, <span class="hljs-number">10</span>, <span class="hljs-string">&quot;%d&quot;</span>, rand());<br><span class="hljs-comment">//multimap ä¸å¯ä½¿ç”¨ [] é€²è¡Œ insertion </span><br>c.insert(<span class="hljs-built_in">pair</span>&lt;<span class="hljs-keyword">long</span>,<span class="hljs-built_in">string</span>&gt;(i,buf));<br>&#125;<br><span class="hljs-keyword">catch</span>(exception&amp; p) &#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;i=&quot;</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; p.what() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">abort</span>();<br>&#125;<br>&#125;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;unordered_multimap.size()= &quot;</span> &lt;&lt; c.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;unordered_multimap.max_size()= &quot;</span> &lt;&lt; c.max_size() &lt;&lt; <span class="hljs-built_in">endl</span>;<span class="hljs-comment">//357913941</span><br><br><span class="hljs-keyword">long</span> target = get_a_target_long();<br>    timeStart = clock();<br><span class="hljs-keyword">auto</span> pItem = c.<span class="hljs-built_in">find</span>(target);<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;c.find(), milli-seconds : &quot;</span> &lt;&lt; (clock()-timeStart) &lt;&lt; <span class="hljs-built_in">endl</span>; <br><span class="hljs-keyword">if</span> (pItem != c.<span class="hljs-built_in">end</span>())<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;found, value=&quot;</span> &lt;&lt; (*pItem).second &lt;&lt; <span class="hljs-built_in">endl</span>;<br>  <span class="hljs-keyword">else</span><br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;not found! &quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>&#125; <br>&#125;<br></code></pre></td></tr></table></figure><p>Set</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain"><br></code></pre></td></tr></table></figure><p>Map</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain"><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>C++STLæ ‡å‡†æ¨¡æ¿åº“</category>
      
    </categories>
    
    
    <tags>
      
      <tag>STL</tag>
      
      <tag>C++</tag>
      
      <tag>æ¨¡æ¿ç¼–ç¨‹</tag>
      
      <tag>ç®—æ³•</tag>
      
      <tag>æ•°æ®ç»“æ„</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>C++STLæ ‡å‡†æ¨¡æ¿åº“ï¼ˆä¸€ï¼‰</title>
    <link href="/2019/10/29/C-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/"/>
    <url>/2019/10/29/C-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/</url>
    
    <content type="html"><![CDATA[<blockquote><p><strong>ä½¿ç”¨ä¸€ä¸ªä¸œè¥¿ï¼Œå´ä¸æ˜ç™½å®ƒçš„é“ç†ï¼Œä¸é«˜æ˜ï¼</strong></p></blockquote><p>æœ¬èŠ‚è¦æ±‚ï¼šC++åŸºæœ¬è¯­æ³•ï¼ˆåŒ…æ‹¬å¦‚ä½•æ­£ç¡®ä½¿ç”¨æ¨¡æ¿ï¼Œtemplatesï¼‰</p><p>æˆ‘ä»¬çš„ç›®æ ‡:</p><blockquote><ul><li>level 0: æµ…å°C++æ ‡å‡†åº“</li><li>level 1: æ·±å…¥è®¤è¯†C++æ ‡å‡†åº“ï¼ˆåšåˆ°èƒ¸ä¸­è‡ªæœ‰ä¸˜å£‘ï¼‰</li><li>level 2: è‰¯å¥½ä½¿ç”¨C++æ ‡å‡†åº“</li><li>level 3: æ‰©å……C++æ ‡å‡†åº“</li></ul></blockquote><p>æ¨èçš„å‡ ä¸ªç½‘ç«™å’Œä¹¦ç±ï¼š</p><blockquote><p>cplusplus.com</p><p>creference.com</p><p>gcc.gnu.org</p><p><img src="/2019/10/29/C-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/tuijian.png" alt="1"></p></blockquote><h3 id="C-Standard-Library"><a href="#C-Standard-Library" class="headerlink" title="C++ Standard Library"></a>C++ Standard Library</h3><h3 id="STL-Standard-Template-Library-æ ‡å‡†æ¨¡æ¿åº“"><a href="#STL-Standard-Template-Library-æ ‡å‡†æ¨¡æ¿åº“" class="headerlink" title="STL Standard Template Library,æ ‡å‡†æ¨¡æ¿åº“"></a>STL Standard Template Library,æ ‡å‡†æ¨¡æ¿åº“</h3><p>æ ‡å‡†åº“ä»¥header fileså½¢å¼å‘ˆç°:</p><blockquote><ul><li>C++æ ‡å‡†åº“çš„header filesä¸å¸¦å‰¯æ¡£å(.h)ï¼Œä¾‹å¦‚<code>#include&lt;vector&gt;</code></li><li>æ–°å¼C header filesä¸å¸¦å‰¯æ¡£å.hï¼Œä¾‹å¦‚<code>#include&lt;cstdio&gt;</code></li><li>æ—§å¼C header fileså¸¦å‰¯æ¡£å.hä»ç„¶å¯ç”¨ï¼Œä¾‹å¦‚<code>#include&lt;stdio.h&gt;</code></li><li>æ–°å¼headerså†…çš„ç»„ä»¶å°è£…äºnamespace â€œstdâ€</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><span class="hljs-keyword">using</span> <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span>; <span class="hljs-meta">#for example</span><br></code></pre></td></tr></table></figure><ul><li>æ—§å¼headerså†…çš„ç»„ä»¶ä¸å°è£…äºnamespace â€œstdâ€</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;functional&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br></code></pre></td></tr></table></figure></blockquote><h3 id="Test-STL-cpp-å¯¹C-æ ‡å‡†åº“çš„å„ç§æµ‹è¯•"><a href="#Test-STL-cpp-å¯¹C-æ ‡å‡†åº“çš„å„ç§æµ‹è¯•" class="headerlink" title="Test-STL.cpp   å¯¹C++æ ‡å‡†åº“çš„å„ç§æµ‹è¯•"></a>Test-STL.cpp   å¯¹C++æ ‡å‡†åº“çš„å„ç§æµ‹è¯•</h3><h4 id="STLå…­å¤§éƒ¨ä»¶-Components"><a href="#STLå…­å¤§éƒ¨ä»¶-Components" class="headerlink" title="STLå…­å¤§éƒ¨ä»¶(Components):"></a>STLå…­å¤§éƒ¨ä»¶(Components):</h4><blockquote><ul><li>å®¹å™¨(Containers)</li><li>åˆ†é…å™¨(Allocators)</li><li>ç®—æ³•(Algorithms)</li><li>è¿­ä»£å™¨(Iterators)</li><li>é€‚é…å™¨(Adapters)</li><li>ä»¿å‡½æ•°(Functors)</li></ul></blockquote><h4 id="å…­å¤§éƒ¨ä»¶ä¹‹é—´çš„å…³ç³»"><a href="#å…­å¤§éƒ¨ä»¶ä¹‹é—´çš„å…³ç³»" class="headerlink" title="å…­å¤§éƒ¨ä»¶ä¹‹é—´çš„å…³ç³»"></a>å…­å¤§éƒ¨ä»¶ä¹‹é—´çš„å…³ç³»</h4><p><img src="/2019/10/29/C-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/components.png" alt="compoenets"></p><p><img src="/2019/10/29/C-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/stl.png" alt="stl"></p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;functional&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-keyword">int</span> ia[<span class="hljs-number">6</span>]=&#123;<span class="hljs-number">27</span>,<span class="hljs-number">210</span>,<span class="hljs-number">12</span>,<span class="hljs-number">47</span>,<span class="hljs-number">109</span>,<span class="hljs-number">83</span>&#125;;<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>,allocator&lt;<span class="hljs-keyword">int</span>&gt;&gt;vi(ia,ia+<span class="hljs-number">6</span>);<span class="hljs-comment">//å°†æ•°ç»„å­˜å…¥vectorå®¹å™¨</span><br>    <span class="hljs-built_in">cout</span>&lt;&lt;count_if(vi.<span class="hljs-built_in">begin</span>(),vi.<span class="hljs-built_in">end</span>(),not1(bind2nd(less&lt;<span class="hljs-keyword">int</span>&gt;(),<span class="hljs-number">40</span>)));<span class="hljs-comment">//è¾“å‡ºæ•°ç»„ä¸­å¤§äºç­‰äº40çš„å…ƒç´ </span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="/2019/10/29/C-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/result.png" alt="result"></p><h4 id="å¤æ‚åº¦ï¼ŒComplexityï¼ŒBig-oh"><a href="#å¤æ‚åº¦ï¼ŒComplexityï¼ŒBig-oh" class="headerlink" title="å¤æ‚åº¦ï¼ŒComplexityï¼ŒBig-oh"></a>å¤æ‚åº¦ï¼ŒComplexityï¼ŒBig-oh</h4><p>ç›®å‰å¸¸ç”¨çš„Big-ohæœ‰ä¸‹åˆ—å‡ ç§æƒ…å†µï¼š</p><blockquote><p>O(1)æˆ–O(c)ï¼šç§°ä¸ºå¸¸æ•°æ—¶é—´(constant time)</p><p>O(n):ç§°ä¸ºçº¿æ€§æ—¶é—´(linear time)</p><p>O(logn ):ç§°ä¸ºæ¬¡çº¿æ€§æ—¶é—´(sub-linear time)</p><p>O(n2):ç§°ä¸ºå¹³æ–¹æ—¶é—´(quadratic time)</p><p>O(n3):ç§°ä¸ºç«‹æ–¹æ—¶é—´(cubic time)</p><p>O(2n):ç§°ä¸ºæŒ‡æ•°æ—¶é—´(expnnential time)</p><p>O(nlogn):ç§°ä¸ºä»‹äºçº¿æ€§åŠäºŒæ¬¡æ–¹æˆé•¿çš„ä¸­é—´æ—¶é—´</p></blockquote><h4 id="â€å‰å¼€åé—­â€œ-åŒºé—´"><a href="#â€å‰å¼€åé—­â€œ-åŒºé—´" class="headerlink" title="â€å‰å¼€åé—­â€œ åŒºé—´"></a>â€å‰å¼€åé—­â€œ åŒºé—´</h4><p><strong><code>c.end()</code>: off by one, pass the end</strong></p><p><img src="/2019/10/29/C-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/container.png" alt="container"></p><h4 id="C-11æ–°ç‰¹æ€§-æ–°è¿­ä»£æ ¼å¼"><a href="#C-11æ–°ç‰¹æ€§-æ–°è¿­ä»£æ ¼å¼" class="headerlink" title="C++11æ–°ç‰¹æ€§ æ–°è¿­ä»£æ ¼å¼"></a>C++11æ–°ç‰¹æ€§ æ–°è¿­ä»£æ ¼å¼</h4><p><img src="/2019/10/29/C-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/C11iter.png" alt="image-20191029222035691"></p><h4 id="C-11æ–°ç‰¹æ€§auto-keyword"><a href="#C-11æ–°ç‰¹æ€§auto-keyword" class="headerlink" title="C++11æ–°ç‰¹æ€§auto keyword"></a>C++11æ–°ç‰¹æ€§auto keyword</h4><p><img src="/2019/10/29/C-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/autokeyword.png" alt="autokeyword"></p><h4 id="å®¹å™¨çš„ç»“æ„å›¾"><a href="#å®¹å™¨çš„ç»“æ„å›¾" class="headerlink" title="å®¹å™¨çš„ç»“æ„å›¾"></a>å®¹å™¨çš„ç»“æ„å›¾</h4><p><img src="/2019/10/29/C-STL%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/containerstruct.png" alt="structconta"></p>]]></content>
    
    
    <categories>
      
      <category>C++STLæ ‡å‡†æ¨¡æ¿åº“</category>
      
    </categories>
    
    
    <tags>
      
      <tag>STL</tag>
      
      <tag>C++</tag>
      
      <tag>æ¨¡æ¿ç¼–ç¨‹</tag>
      
      <tag>ç®—æ³•</tag>
      
      <tag>æ•°æ®ç»“æ„</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hexoè¿ç§»</title>
    <link href="/2019/10/29/Hexo%E8%BF%81%E7%A7%BB/"/>
    <url>/2019/10/29/Hexo%E8%BF%81%E7%A7%BB/</url>
    
    <content type="html"><![CDATA[<h1 id="è¿ç§»"><a href="#è¿ç§»" class="headerlink" title="è¿ç§»"></a>è¿ç§»</h1><h2 id="RSS"><a href="#RSS" class="headerlink" title="RSS"></a>RSS</h2><p>é¦–å…ˆï¼Œå®‰è£… <code>hexo-migrator-rss</code> æ’ä»¶ã€‚</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">$ npm install hexo-migrator-rss <span class="hljs-comment">--save</span><br></code></pre></td></tr></table></figure><p>æ’ä»¶å®‰è£…å®Œæˆåï¼Œæ‰§è¡Œä¸‹åˆ—å‘½ä»¤ï¼Œä» RSS è¿ç§»æ‰€æœ‰æ–‡ç« ã€‚<code>source</code> å¯ä»¥æ˜¯æ–‡ä»¶è·¯å¾„æˆ–ç½‘å€ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> hexo migrate rss &lt;<span class="hljs-built_in">source</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="Jekyll"><a href="#Jekyll" class="headerlink" title="Jekyll"></a>Jekyll</h2><p>æŠŠ <code>_posts</code> æ–‡ä»¶å¤¹å†…çš„æ‰€æœ‰æ–‡ä»¶å¤åˆ¶åˆ° <code>source/_posts</code> æ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨ <code>_config.yml</code> ä¸­ä¿®æ”¹ <code>new_post_name</code> å‚æ•°ã€‚</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">new_post_name:</span> <span class="hljs-symbol">:year-</span><span class="hljs-symbol">:month-</span><span class="hljs-symbol">:day-</span><span class="hljs-symbol">:title</span>.md<br></code></pre></td></tr></table></figure><h2 id="Octopress"><a href="#Octopress" class="headerlink" title="Octopress"></a>Octopress</h2><p>æŠŠ Octopress <code>source/_posts</code> æ–‡ä»¶å¤¹å†…çš„æ‰€æœ‰æ–‡ä»¶è½¬ç§»åˆ° Hexo çš„ <code>source/_posts</code> æ–‡ä»¶å¤¹ï¼Œå¹¶ä¿®æ”¹ <code>_config.yml</code> ä¸­çš„ <code>new_post_name</code> å‚æ•°ã€‚</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">new_post_name:</span> <span class="hljs-symbol">:year-</span><span class="hljs-symbol">:month-</span><span class="hljs-symbol">:day-</span><span class="hljs-symbol">:title</span>.md<br></code></pre></td></tr></table></figure><h2 id="WordPress"><a href="#WordPress" class="headerlink" title="WordPress"></a>WordPress</h2><p>é¦–å…ˆï¼Œå®‰è£… <code>hexo-migrator-wordpress</code> æ’ä»¶ã€‚</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">$ npm install hexo-migrator-wordpress <span class="hljs-comment">--save</span><br></code></pre></td></tr></table></figure><p>åœ¨ WordPress ä»ªè¡¨ç›˜ä¸­å¯¼å‡ºæ•°æ®(â€œToolsâ€ â†’ â€œExportâ€ â†’ â€œWordPressâ€)ï¼ˆè¯¦æƒ…å‚è€ƒ<a href="http://en.support.wordpress.com/export/">WPæ”¯æŒé¡µé¢</a>ï¼‰ã€‚</p><p>æ’ä»¶å®‰è£…å®Œæˆåï¼Œæ‰§è¡Œä¸‹åˆ—å‘½ä»¤æ¥è¿ç§»æ‰€æœ‰æ–‡ç« ã€‚<code>source</code> å¯ä»¥æ˜¯ WordPress å¯¼å‡ºçš„æ–‡ä»¶è·¯å¾„æˆ–ç½‘å€ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> hexo migrate wordpress &lt;<span class="hljs-built_in">source</span>&gt;</span><br></code></pre></td></tr></table></figure><blockquote><p>æ³¨æ„</p><p>è¿™ä¸ªæ’ä»¶å¹¶ä¸èƒ½å®Œç¾åœ°å®ç°WordPress-&gt;Hexoçš„æ•°æ®è½¬æ¢ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†WordPressçš„åˆ†ç±»æ–¹é¢å­˜åœ¨é—®é¢˜ï¼ˆè§<a href="https://hexo.io/zh-cn/docs/front-matter">Front-matterä¸­çš„åˆ†ç±»ä¸æ ‡ç­¾</a>ï¼‰ã€‚å› æ­¤ï¼Œå»ºè®®æ‚¨åœ¨è¿ç§»å®Œæˆåï¼Œæ‰‹å·¥å®¡é˜…æ‰€æœ‰ç”Ÿæˆçš„markdownæ–‡ä»¶ï¼Œæ£€æŸ¥å…¶ä¸­æ˜¯å¦æœ‰é”™è¯¯ã€‚å¯¹äºæ–‡ç« æ•°é‡è¾ƒå¤§çš„WordPressç«™ç‚¹ï¼Œè¿™é¡¹å·¥ä½œå¯èƒ½è¦èŠ±å¾ˆé•¿çš„æ—¶é—´ã€‚</p></blockquote><h2 id="Joomla"><a href="#Joomla" class="headerlink" title="Joomla"></a>Joomla</h2><p>é¦–å…ˆï¼Œå®‰è£… <code>hexo-migrator-joomla</code> æ’ä»¶ã€‚</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">$ npm <span class="hljs-keyword">install </span>hexo-migrator-<span class="hljs-keyword">joomla </span>--save<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ <a href="http://extensions.joomla.org/extensions/migration-a-conversion/data-import-a-export/12816?qh=YToxOntpOjA7czo1OiJqMnhtbCI7fQ==">J2XML</a> ç»„ä»¶å¯¼å‡º Joomla æ–‡ç« ã€‚<br>æ’ä»¶å®‰è£…å®Œæˆåï¼Œæ‰§è¡Œä¸‹åˆ—å‘½ä»¤æ¥è¿ç§»æ‰€æœ‰æ–‡ç« ã€‚<code>source</code> å¯ä»¥æ˜¯ Joomla å¯¼å‡ºçš„æ–‡ä»¶è·¯å¾„æˆ–ç½‘å€ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> hexo migrate joomla &lt;<span class="hljs-built_in">source</span>&gt;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Hexoå¼€å§‹ä½¿ç”¨</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>HexoæŒ‡ä»¤</title>
    <link href="/2019/10/29/Hexo%E6%8C%87%E4%BB%A4/"/>
    <url>/2019/10/29/Hexo%E6%8C%87%E4%BB%A4/</url>
    
    <content type="html"><![CDATA[<h1 id="æŒ‡ä»¤"><a href="#æŒ‡ä»¤" class="headerlink" title="æŒ‡ä»¤"></a>æŒ‡ä»¤</h1><h2 id="init"><a href="#init" class="headerlink" title="init"></a>init</h2><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs csharp">$ hexo <span class="hljs-keyword">init</span> [folder]<br></code></pre></td></tr></table></figure><p>æ–°å»ºä¸€ä¸ªç½‘ç«™ã€‚å¦‚æœæ²¡æœ‰è®¾ç½® <code>folder</code> ï¼ŒHexo é»˜è®¤åœ¨ç›®å‰çš„æ–‡ä»¶å¤¹å»ºç«‹ç½‘ç«™ã€‚</p><h2 id="new"><a href="#new" class="headerlink" title="new"></a>new</h2><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gauss">$ hexo <span class="hljs-keyword">new</span> [layout] &lt;<span class="hljs-built_in">title</span>&gt;<br></code></pre></td></tr></table></figure><p>æ–°å»ºä¸€ç¯‡æ–‡ç« ã€‚å¦‚æœæ²¡æœ‰è®¾ç½® <code>layout</code> çš„è¯ï¼Œé»˜è®¤ä½¿ç”¨ <a href>_config.yml</a> ä¸­çš„ <code>default_layout</code> å‚æ•°ä»£æ›¿ã€‚å¦‚æœæ ‡é¢˜åŒ…å«ç©ºæ ¼çš„è¯ï¼Œè¯·ä½¿ç”¨å¼•å·æ‹¬èµ·æ¥ã€‚</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs actionscript">$ hexo <span class="hljs-keyword">new</span> <span class="hljs-string">&quot;post title with whitespace&quot;</span><br></code></pre></td></tr></table></figure><table><thead><tr><th>å‚æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>-p</code>, <code>--path</code></td><td>è‡ªå®šä¹‰æ–°æ–‡ç« çš„è·¯å¾„</td></tr><tr><td><code>-r</code>, <code>--replace</code></td><td>å¦‚æœå­˜åœ¨åŒåæ–‡ç« ï¼Œå°†å…¶æ›¿æ¢</td></tr><tr><td><code>-s</code>, <code>--slug</code></td><td>æ–‡ç« çš„ Slugï¼Œä½œä¸ºæ–°æ–‡ç« çš„æ–‡ä»¶åå’Œå‘å¸ƒåçš„ URL</td></tr></tbody></table><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒHexo ä¼šä½¿ç”¨æ–‡ç« çš„æ ‡é¢˜æ¥å†³å®šæ–‡ç« æ–‡ä»¶çš„è·¯å¾„ã€‚å¯¹äºç‹¬ç«‹é¡µé¢æ¥è¯´ï¼ŒHexo ä¼šåˆ›å»ºä¸€ä¸ªä»¥æ ‡é¢˜ä¸ºåå­—çš„ç›®å½•ï¼Œå¹¶åœ¨ç›®å½•ä¸­æ”¾ç½®ä¸€ä¸ª <code>index.md</code> æ–‡ä»¶ã€‚ä½ å¯ä»¥ä½¿ç”¨ <code>--path</code> å‚æ•°æ¥è¦†ç›–ä¸Šè¿°è¡Œä¸ºã€è‡ªè¡Œå†³å®šæ–‡ä»¶çš„ç›®å½•ï¼š</p><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs haxe">hexo <span class="hljs-keyword">new</span> <span class="hljs-type">page</span> --path about/me <span class="hljs-string">&quot;About me&quot;</span><br></code></pre></td></tr></table></figure><p>ä»¥ä¸Šå‘½ä»¤ä¼šåˆ›å»ºä¸€ä¸ª <code>source/about/me.md</code> æ–‡ä»¶ï¼ŒåŒæ—¶ Front Matter ä¸­çš„ title ä¸º <code>&quot;About me&quot;</code></p><p>æ³¨æ„ï¼title æ˜¯å¿…é¡»æŒ‡å®šçš„ï¼å¦‚æœä½ è¿™ä¹ˆåšå¹¶ä¸èƒ½è¾¾åˆ°ä½ çš„ç›®çš„ï¼š</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">hexo <span class="hljs-keyword">new</span> page <span class="hljs-comment">--path about/me</span><br></code></pre></td></tr></table></figure><p>æ­¤æ—¶ Hexo ä¼šåˆ›å»º <code>source/_posts/about/me.md</code>ï¼ŒåŒæ—¶ <code>me.md</code> çš„ Front Matter ä¸­çš„ title ä¸º <code>&quot;page&quot;</code>ã€‚è¿™æ˜¯å› ä¸ºåœ¨ä¸Šè¿°å‘½ä»¤ä¸­ï¼Œhexo-cli å°† <code>page</code> è§†ä¸ºæŒ‡å®šæ–‡ç« çš„æ ‡é¢˜ã€å¹¶é‡‡ç”¨é»˜è®¤çš„ <code>layout</code>ã€‚</p><h2 id="generate"><a href="#generate" class="headerlink" title="generate"></a>generate</h2><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs verilog">$ hexo <span class="hljs-keyword">generate</span><br></code></pre></td></tr></table></figure><p>ç”Ÿæˆé™æ€æ–‡ä»¶ã€‚</p><table><thead><tr><th>é€‰é¡¹</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>-d</code>, <code>--deploy</code></td><td>æ–‡ä»¶ç”Ÿæˆåç«‹å³éƒ¨ç½²ç½‘ç«™</td></tr><tr><td><code>-w</code>, <code>--watch</code></td><td>ç›‘è§†æ–‡ä»¶å˜åŠ¨</td></tr><tr><td><code>-b</code>, <code>--bail</code></td><td>ç”Ÿæˆè¿‡ç¨‹ä¸­å¦‚æœå‘ç”Ÿä»»ä½•æœªå¤„ç†çš„å¼‚å¸¸åˆ™æŠ›å‡ºå¼‚å¸¸</td></tr><tr><td><code>-f</code>, <code>--force</code></td><td>å¼ºåˆ¶é‡æ–°ç”Ÿæˆæ–‡ä»¶ Hexo å¼•å…¥äº†å·®åˆ†æœºåˆ¶ï¼Œå¦‚æœ <code>public</code> ç›®å½•å­˜åœ¨ï¼Œé‚£ä¹ˆ <code>hexo g</code> åªä¼šé‡æ–°ç”Ÿæˆæ”¹åŠ¨çš„æ–‡ä»¶ã€‚ ä½¿ç”¨è¯¥å‚æ•°çš„æ•ˆæœæ¥è¿‘ <code>hexo clean &amp;&amp; hexo generate</code></td></tr><tr><td><code>-c</code>, <code>--concurrency</code></td><td>æœ€å¤§åŒæ—¶ç”Ÿæˆæ–‡ä»¶çš„æ•°é‡ï¼Œé»˜è®¤æ— é™åˆ¶</td></tr></tbody></table><p>è¯¥å‘½ä»¤å¯ä»¥ç®€å†™ä¸º</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-variable">$ </span>hexo g<br></code></pre></td></tr></table></figure><h2 id="publish"><a href="#publish" class="headerlink" title="publish"></a>publish</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml">$ hexo publish [layout] <span class="hljs-tag">&lt;<span class="hljs-name">filename</span>&gt;</span><br></code></pre></td></tr></table></figure><p>å‘è¡¨è‰ç¨¿ã€‚</p><h2 id="server"><a href="#server" class="headerlink" title="server"></a>server</h2><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs axapta">$ hexo <span class="hljs-keyword">server</span><br></code></pre></td></tr></table></figure><p>å¯åŠ¨æœåŠ¡å™¨ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè®¿é—®ç½‘å€ä¸ºï¼š <code>http://localhost:4000/</code>ã€‚</p><table><thead><tr><th>é€‰é¡¹</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>-p</code>, <code>--port</code></td><td>é‡è®¾ç«¯å£</td></tr><tr><td><code>-s</code>, <code>--static</code></td><td>åªä½¿ç”¨é™æ€æ–‡ä»¶</td></tr><tr><td><code>-l</code>, <code>--log</code></td><td>å¯åŠ¨æ—¥è®°è®°å½•ï¼Œä½¿ç”¨è¦†ç›–è®°å½•æ ¼å¼</td></tr></tbody></table><h2 id="deploy"><a href="#deploy" class="headerlink" title="deploy"></a>deploy</h2><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-variable">$ </span>hexo deploy<br></code></pre></td></tr></table></figure><p>éƒ¨ç½²ç½‘ç«™ã€‚</p><table><thead><tr><th>å‚æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>-g</code>, <code>--generate</code></td><td>éƒ¨ç½²ä¹‹å‰é¢„å…ˆç”Ÿæˆé™æ€æ–‡ä»¶</td></tr></tbody></table><p>è¯¥å‘½ä»¤å¯ä»¥ç®€å†™ä¸ºï¼š</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-variable">$ </span>hexo d<br></code></pre></td></tr></table></figure><h2 id="render"><a href="#render" class="headerlink" title="render"></a>render</h2><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs prolog">$ hexo render &lt;file1&gt; [file2] ...<br></code></pre></td></tr></table></figure><p>æ¸²æŸ“æ–‡ä»¶ã€‚</p><table><thead><tr><th>å‚æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>-o</code>, <code>--output</code></td><td>è®¾ç½®è¾“å‡ºè·¯å¾„</td></tr></tbody></table><h2 id="migrate"><a href="#migrate" class="headerlink" title="migrate"></a>migrate</h2><figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elm">$ hexo migrate &lt;<span class="hljs-keyword">type</span>&gt;<br></code></pre></td></tr></table></figure><p>ä»å…¶ä»–åšå®¢ç³»ç»Ÿ <a href>è¿ç§»å†…å®¹</a>ã€‚</p><h2 id="clean"><a href="#clean" class="headerlink" title="clean"></a>clean</h2><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-variable">$ </span>hexo clean<br></code></pre></td></tr></table></figure><p>æ¸…é™¤ç¼“å­˜æ–‡ä»¶ (<code>db.json</code>) å’Œå·²ç”Ÿæˆçš„é™æ€æ–‡ä»¶ (<code>public</code>)ã€‚</p><p>åœ¨æŸäº›æƒ…å†µï¼ˆå°¤å…¶æ˜¯æ›´æ¢ä¸»é¢˜åï¼‰ï¼Œå¦‚æœå‘ç°æ‚¨å¯¹ç«™ç‚¹çš„æ›´æ”¹æ— è®ºå¦‚ä½•ä¹Ÿä¸ç”Ÿæ•ˆï¼Œæ‚¨å¯èƒ½éœ€è¦è¿è¡Œè¯¥å‘½ä»¤ã€‚</p><h2 id="list"><a href="#list" class="headerlink" title="list"></a>list</h2><figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elm">$ hexo list &lt;<span class="hljs-keyword">type</span>&gt;<br></code></pre></td></tr></table></figure><p>åˆ—å‡ºç½‘ç«™èµ„æ–™ã€‚</p><h2 id="version"><a href="#version" class="headerlink" title="version"></a>version</h2><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript">$ hexo <span class="hljs-built_in">version</span><br></code></pre></td></tr></table></figure><p>æ˜¾ç¤º Hexo ç‰ˆæœ¬ã€‚</p><h2 id="é€‰é¡¹"><a href="#é€‰é¡¹" class="headerlink" title="é€‰é¡¹"></a>é€‰é¡¹</h2><h3 id="å®‰å…¨æ¨¡å¼"><a href="#å®‰å…¨æ¨¡å¼" class="headerlink" title="å®‰å…¨æ¨¡å¼"></a>å®‰å…¨æ¨¡å¼</h3><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">$ hexo <span class="hljs-comment">--safe</span><br></code></pre></td></tr></table></figure><p>åœ¨å®‰å…¨æ¨¡å¼ä¸‹ï¼Œä¸ä¼šè½½å…¥æ’ä»¶å’Œè„šæœ¬ã€‚å½“æ‚¨åœ¨å®‰è£…æ–°æ’ä»¶é­é‡é—®é¢˜æ—¶ï¼Œå¯ä»¥å°è¯•ä»¥å®‰å…¨æ¨¡å¼é‡æ–°æ‰§è¡Œã€‚</p><h3 id="è°ƒè¯•æ¨¡å¼"><a href="#è°ƒè¯•æ¨¡å¼" class="headerlink" title="è°ƒè¯•æ¨¡å¼"></a>è°ƒè¯•æ¨¡å¼</h3><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">$ hexo <span class="hljs-comment">--debug</span><br></code></pre></td></tr></table></figure><p>åœ¨ç»ˆç«¯ä¸­æ˜¾ç¤ºè°ƒè¯•ä¿¡æ¯å¹¶è®°å½•åˆ° <code>debug.log</code>ã€‚å½“æ‚¨ç¢°åˆ°é—®é¢˜æ—¶ï¼Œå¯ä»¥å°è¯•ç”¨è°ƒè¯•æ¨¡å¼é‡æ–°æ‰§è¡Œä¸€æ¬¡ï¼Œå¹¶ <a href="https://github.com/hexojs/hexo/issues/new">æäº¤è°ƒè¯•ä¿¡æ¯åˆ° GitHub</a>ã€‚</p><h3 id="ç®€æ´æ¨¡å¼"><a href="#ç®€æ´æ¨¡å¼" class="headerlink" title="ç®€æ´æ¨¡å¼"></a>ç®€æ´æ¨¡å¼</h3><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">$ hexo <span class="hljs-comment">--silent</span><br></code></pre></td></tr></table></figure><p>éšè—ç»ˆç«¯ä¿¡æ¯ã€‚</p><h3 id="è‡ªå®šä¹‰é…ç½®æ–‡ä»¶çš„è·¯å¾„"><a href="#è‡ªå®šä¹‰é…ç½®æ–‡ä»¶çš„è·¯å¾„" class="headerlink" title="è‡ªå®šä¹‰é…ç½®æ–‡ä»¶çš„è·¯å¾„"></a>è‡ªå®šä¹‰é…ç½®æ–‡ä»¶çš„è·¯å¾„</h3><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs verilog"># ä½¿ç”¨ custom<span class="hljs-variable">.yml</span> ä»£æ›¿é»˜è®¤çš„ <span class="hljs-number">_</span><span class="hljs-keyword">config</span><span class="hljs-variable">.yml</span><br>$ hexo server --<span class="hljs-keyword">config</span> custom<span class="hljs-variable">.yml</span><br># ä½¿ç”¨ custom<span class="hljs-variable">.yml</span> å’Œ custom2<span class="hljs-variable">.json</span>ï¼Œå…¶ä¸­ custom2<span class="hljs-variable">.json</span> ä¼˜å…ˆçº§æ›´é«˜<br>$ hexo <span class="hljs-keyword">generate</span> --<span class="hljs-keyword">config</span> custom<span class="hljs-variable">.yml</span>,custom2<span class="hljs-variable">.json</span>,custom3<span class="hljs-variable">.yml</span><br></code></pre></td></tr></table></figure><p>è‡ªå®šä¹‰é…ç½®æ–‡ä»¶çš„è·¯å¾„ï¼ŒæŒ‡å®šè¿™ä¸ªå‚æ•°åå°†ä¸å†ä½¿ç”¨é»˜è®¤çš„ <code>_config.yml</code>ã€‚<br>ä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ª YAML æˆ– JSON æ–‡ä»¶çš„è·¯å¾„ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨é€—å·åˆ†éš”ï¼ˆæ— ç©ºæ ¼ï¼‰çš„å¤šä¸ª YAML æˆ– JSON æ–‡ä»¶çš„è·¯å¾„ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs verilog"># ä½¿ç”¨ custom<span class="hljs-variable">.yml</span> ä»£æ›¿é»˜è®¤çš„ <span class="hljs-number">_</span><span class="hljs-keyword">config</span><span class="hljs-variable">.yml</span><br>$ hexo server --<span class="hljs-keyword">config</span> custom<span class="hljs-variable">.yml</span><br># ä½¿ç”¨ custom<span class="hljs-variable">.yml</span>, custom2<span class="hljs-variable">.json</span> å’Œ custom3<span class="hljs-variable">.yml</span>ï¼Œå…¶ä¸­ custom3<span class="hljs-variable">.yml</span> ä¼˜å…ˆçº§æœ€é«˜ï¼Œå…¶æ¬¡æ˜¯ custom2<span class="hljs-variable">.json</span><br>$ hexo <span class="hljs-keyword">generate</span> --<span class="hljs-keyword">config</span> custom<span class="hljs-variable">.yml</span>,custom2<span class="hljs-variable">.json</span>,custom3<span class="hljs-variable">.yml</span><br></code></pre></td></tr></table></figure><p>å½“ä½ æŒ‡å®šäº†å¤šä¸ªé…ç½®æ–‡ä»¶ä»¥åï¼ŒHexo ä¼šæŒ‰é¡ºåºå°†è¿™éƒ¨åˆ†é…ç½®æ–‡ä»¶åˆå¹¶æˆä¸€ä¸ª <code>_multiconfig.yml</code>ã€‚å¦‚æœé‡åˆ°é‡å¤çš„é…ç½®ï¼Œæ’åœ¨åé¢çš„æ–‡ä»¶çš„é…ç½®ä¼šè¦†ç›–æ’åœ¨å‰é¢çš„æ–‡ä»¶çš„é…ç½®ã€‚è¿™ä¸ªåŸåˆ™é€‚ç”¨äºä»»æ„æ•°é‡ã€ä»»æ„æ·±åº¦çš„ YAML å’Œ JSON æ–‡ä»¶ã€‚</p><h3 id="æ˜¾ç¤ºè‰ç¨¿"><a href="#æ˜¾ç¤ºè‰ç¨¿" class="headerlink" title="æ˜¾ç¤ºè‰ç¨¿"></a>æ˜¾ç¤ºè‰ç¨¿</h3><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">$ hexo <span class="hljs-comment">--draft</span><br></code></pre></td></tr></table></figure><p>æ˜¾ç¤º <code>source/_drafts</code> æ–‡ä»¶å¤¹ä¸­çš„è‰ç¨¿æ–‡ç« ã€‚</p><h3 id="è‡ªå®šä¹‰-CWD"><a href="#è‡ªå®šä¹‰-CWD" class="headerlink" title="è‡ªå®šä¹‰ CWD"></a>è‡ªå®šä¹‰ CWD</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">$ hexo --cwd <span class="hljs-regexp">/path/</span>to/cwd<br></code></pre></td></tr></table></figure><p>è‡ªå®šä¹‰å½“å‰å·¥ä½œç›®å½•ï¼ˆCurrent working directoryï¼‰çš„è·¯å¾„ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Hexoå¼€å§‹ä½¿ç”¨</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Hexoé…ç½®</title>
    <link href="/2019/10/29/Hexo%E9%85%8D%E7%BD%AE/"/>
    <url>/2019/10/29/Hexo%E9%85%8D%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<h1 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h1><p>æ‚¨å¯ä»¥åœ¨ <code>_config.yml</code> ä¸­ä¿®æ”¹å¤§éƒ¨åˆ†çš„é…ç½®ã€‚</p><h2 id="ç½‘ç«™"><a href="#ç½‘ç«™" class="headerlink" title="ç½‘ç«™"></a>ç½‘ç«™</h2><table><thead><tr><th>å‚æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>title</code></td><td>ç½‘ç«™æ ‡é¢˜</td></tr><tr><td><code>subtitle</code></td><td>ç½‘ç«™å‰¯æ ‡é¢˜</td></tr><tr><td><code>description</code></td><td>ç½‘ç«™æè¿°</td></tr><tr><td><code>keywords</code></td><td>ç½‘ç«™çš„å…³é”®è¯ã€‚ä½¿ç”¨åŠè§’é€—å· <code>,</code> åˆ†éš”å¤šä¸ªå…³é”®è¯ã€‚</td></tr><tr><td><code>author</code></td><td>æ‚¨çš„åå­—</td></tr><tr><td><code>language</code></td><td>ç½‘ç«™ä½¿ç”¨çš„è¯­è¨€</td></tr><tr><td><code>timezone</code></td><td>ç½‘ç«™æ—¶åŒºã€‚Hexo é»˜è®¤ä½¿ç”¨æ‚¨ç”µè„‘çš„æ—¶åŒºã€‚<a href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones">æ—¶åŒºåˆ—è¡¨</a>ã€‚æ¯”å¦‚è¯´ï¼š<code>America/New_York</code>, <code>Japan</code>, å’Œ <code>UTC</code> ã€‚</td></tr></tbody></table><p>å…¶ä¸­ï¼Œ<code>description</code>ä¸»è¦ç”¨äºSEOï¼Œå‘Šè¯‰æœç´¢å¼•æ“ä¸€ä¸ªå…³äºæ‚¨ç«™ç‚¹çš„ç®€å•æè¿°ï¼Œé€šå¸¸å»ºè®®åœ¨å…¶ä¸­åŒ…å«æ‚¨ç½‘ç«™çš„å…³é”®è¯ã€‚<code>author</code>å‚æ•°ç”¨äºä¸»é¢˜æ˜¾ç¤ºæ–‡ç« çš„ä½œè€…ã€‚</p><h2 id="ç½‘å€"><a href="#ç½‘å€" class="headerlink" title="ç½‘å€"></a>ç½‘å€</h2><table><thead><tr><th>å‚æ•°</th><th>æè¿°</th><th>é»˜è®¤å€¼</th></tr></thead><tbody><tr><td><code>url</code></td><td>ç½‘å€</td><td></td></tr><tr><td><code>root</code></td><td>ç½‘ç«™æ ¹ç›®å½•</td><td></td></tr><tr><td><code>permalink</code></td><td>æ–‡ç« çš„ <a href>æ°¸ä¹…é“¾æ¥</a> æ ¼å¼</td><td><code>:year/:month/:day/:title/</code></td></tr><tr><td><code>permalink_defaults</code></td><td>æ°¸ä¹…é“¾æ¥ä¸­å„éƒ¨åˆ†çš„é»˜è®¤å€¼</td><td></td></tr><tr><td><code>pretty_urls</code></td><td>æ”¹å†™ <a href><code>permalink</code></a> çš„å€¼æ¥ç¾åŒ– URL</td><td></td></tr><tr><td><code>pretty_urls.trailing_index</code></td><td>æ˜¯å¦åœ¨æ°¸ä¹…é“¾æ¥ä¸­ä¿ç•™å°¾éƒ¨çš„ <code>index.html</code>ï¼Œè®¾ç½®ä¸º <code>false</code> æ—¶å»é™¤</td><td><code>true</code></td></tr></tbody></table><blockquote><p>ç½‘ç«™å­˜æ”¾åœ¨å­ç›®å½•</p><p>å¦‚æœæ‚¨çš„ç½‘ç«™å­˜æ”¾åœ¨å­ç›®å½•ä¸­ï¼Œä¾‹å¦‚ <code>http://yoursite.com/blog</code>ï¼Œåˆ™è¯·å°†æ‚¨çš„ <code>url</code> è®¾ä¸º <code>http://yoursite.com/blog</code> å¹¶æŠŠ <code>root</code> è®¾ä¸º <code>/blog/</code>ã€‚</p></blockquote><p>ä¾‹å¦‚ï¼š</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-meta"># æ¯”å¦‚ï¼Œä¸€ä¸ªé¡µé¢çš„æ°¸ä¹…é“¾æ¥æ˜¯ </span><br><span class="hljs-symbol">http:</span><span class="hljs-comment">//example.com/foo/bar/index.html</span><br><span class="hljs-symbol">pretty_urls:</span>  <br><span class="hljs-symbol">trailing_index:</span> false<br><span class="hljs-meta"># æ­¤æ—¶é¡µé¢çš„æ°¸ä¹…é“¾æ¥ä¼šå˜ä¸º http:<span class="hljs-comment">//example.com/foo/bar/</span></span><br></code></pre></td></tr></table></figure><h2 id="ç›®å½•"><a href="#ç›®å½•" class="headerlink" title="ç›®å½•"></a>ç›®å½•</h2><table><thead><tr><th>å‚æ•°</th><th>æè¿°</th><th>é»˜è®¤å€¼</th></tr></thead><tbody><tr><td><code>source_dir</code></td><td>èµ„æºæ–‡ä»¶å¤¹ï¼Œè¿™ä¸ªæ–‡ä»¶å¤¹ç”¨æ¥å­˜æ”¾å†…å®¹ã€‚</td><td><code>source</code></td></tr><tr><td><code>public_dir</code></td><td>å…¬å…±æ–‡ä»¶å¤¹ï¼Œè¿™ä¸ªæ–‡ä»¶å¤¹ç”¨äºå­˜æ”¾ç”Ÿæˆçš„ç«™ç‚¹æ–‡ä»¶ã€‚</td><td><code>public</code></td></tr><tr><td><code>tag_dir</code></td><td>æ ‡ç­¾æ–‡ä»¶å¤¹</td><td><code>tags</code></td></tr><tr><td><code>archive_dir</code></td><td>å½’æ¡£æ–‡ä»¶å¤¹</td><td><code>archives</code></td></tr><tr><td><code>category_dir</code></td><td>åˆ†ç±»æ–‡ä»¶å¤¹</td><td><code>categories</code></td></tr><tr><td><code>code_dir</code></td><td>Include code æ–‡ä»¶å¤¹ï¼Œ<code>source_dir</code> ä¸‹çš„å­ç›®å½•</td><td><code>downloads/code</code></td></tr><tr><td><code>i18n_dir</code></td><td>å›½é™…åŒ–ï¼ˆi18nï¼‰æ–‡ä»¶å¤¹</td><td><code>:lang</code></td></tr><tr><td><code>skip_render</code></td><td>è·³è¿‡æŒ‡å®šæ–‡ä»¶çš„æ¸²æŸ“ã€‚åŒ¹é…åˆ°çš„æ–‡ä»¶å°†ä¼šè¢«ä¸åšæ”¹åŠ¨åœ°å¤åˆ¶åˆ° <code>public</code> ç›®å½•ä¸­ã€‚æ‚¨å¯ä½¿ç”¨ <a href="https://github.com/micromatch/micromatch#extended-globbing">glob è¡¨è¾¾å¼</a>æ¥åŒ¹é…è·¯å¾„ã€‚</td><td></td></tr></tbody></table><p>ä¾‹å¦‚ï¼š</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs gradle">skip_render: <span class="hljs-string">&quot;mypage/**/*&quot;</span><br># å°†ä¼šç›´æ¥å°† `<span class="hljs-keyword">source</span><span class="hljs-regexp">/mypage/i</span>ndex.html` å’Œ `<span class="hljs-keyword">source</span><span class="hljs-regexp">/mypage/</span>code.js` ä¸åšæ”¹åŠ¨åœ°è¾“å‡ºåˆ° <span class="hljs-string">&#x27;public&#x27;</span> ç›®å½•<br># ä½ ä¹Ÿå¯ä»¥ç”¨è¿™ç§æ–¹æ³•æ¥è·³è¿‡å¯¹æŒ‡å®šæ–‡ç« æ–‡ä»¶çš„æ¸²æŸ“<br>skip_render: <span class="hljs-string">&quot;_posts/test-post.md&quot;</span><br># è¿™å°†ä¼šå¿½ç•¥å¯¹ <span class="hljs-string">&#x27;test-post.md&#x27;</span> çš„æ¸²æŸ“<br></code></pre></td></tr></table></figure><blockquote><p>æç¤º</p><p>å¦‚æœæ‚¨åˆšåˆšå¼€å§‹æ¥è§¦ Hexoï¼Œé€šå¸¸æ²¡æœ‰å¿…è¦ä¿®æ”¹è¿™ä¸€éƒ¨åˆ†çš„å€¼ã€‚</p></blockquote><h2 id="æ–‡ç« "><a href="#æ–‡ç« " class="headerlink" title="æ–‡ç« "></a>æ–‡ç« </h2><table><thead><tr><th>å‚æ•°</th><th>æè¿°</th><th>é»˜è®¤å€¼</th></tr></thead><tbody><tr><td><code>new_post_name</code></td><td>æ–°æ–‡ç« çš„æ–‡ä»¶åç§°</td><td>:title.md</td></tr><tr><td><code>default_layout</code></td><td>é¢„è®¾å¸ƒå±€</td><td>post</td></tr><tr><td><code>auto_spacing</code></td><td>åœ¨ä¸­æ–‡å’Œè‹±æ–‡ä¹‹é—´åŠ å…¥ç©ºæ ¼</td><td>false</td></tr><tr><td><code>titlecase</code></td><td>æŠŠæ ‡é¢˜è½¬æ¢ä¸º title case</td><td>false</td></tr><tr><td><code>external_link</code></td><td>åœ¨æ–°æ ‡ç­¾ä¸­æ‰“å¼€é“¾æ¥</td><td>true</td></tr><tr><td><code>external_link.enable</code></td><td>åœ¨æ–°æ ‡ç­¾ä¸­æ‰“å¼€é“¾æ¥</td><td><code>true</code></td></tr><tr><td><code>external_link.field</code></td><td>å¯¹æ•´ä¸ªç½‘ç«™ï¼ˆ<code>site</code>ï¼‰ç”Ÿæ•ˆæˆ–ä»…å¯¹æ–‡ç« ï¼ˆ<code>post</code>ï¼‰ç”Ÿæ•ˆ</td><td><code>site</code></td></tr><tr><td><code>external_link.exclude</code></td><td>Exclude hostname. Specify subdomain when applicable, including <code>www</code></td><td><code>[]</code></td></tr><tr><td><code>filename_case</code></td><td>æŠŠæ–‡ä»¶åç§°è½¬æ¢ä¸º (1) å°å†™æˆ– (2) å¤§å†™</td><td>0</td></tr><tr><td><code>render_drafts</code></td><td>æ˜¾ç¤ºè‰ç¨¿</td><td>false</td></tr><tr><td><code>post_asset_folder</code></td><td>å¯åŠ¨ <a href>Asset æ–‡ä»¶å¤¹</a></td><td>false</td></tr><tr><td><code>relative_link</code></td><td>æŠŠé“¾æ¥æ”¹ä¸ºä¸æ ¹ç›®å½•çš„ç›¸å¯¹ä½å€</td><td>false</td></tr><tr><td><code>future</code></td><td>æ˜¾ç¤ºæœªæ¥çš„æ–‡ç« </td><td>true</td></tr><tr><td><code>highlight</code></td><td>ä»£ç å—çš„è®¾ç½®</td><td></td></tr><tr><td><code>highlight.enable</code></td><td>å¼€å¯ä»£ç å—é«˜äº®</td><td><code>true</code></td></tr><tr><td><code>highlight.auto_detect</code></td><td>å¦‚æœæœªæŒ‡å®šè¯­è¨€ï¼Œåˆ™å¯ç”¨è‡ªåŠ¨æ£€æµ‹</td><td><code>false</code></td></tr><tr><td><code>highlight.line_number</code></td><td>æ˜¾ç¤ºè¡Œæ•°</td><td><code>true</code></td></tr><tr><td><code>highlight.tab_replace</code></td><td>ç”¨ n ä¸ªç©ºæ ¼æ›¿æ¢ tabsï¼›å¦‚æœå€¼ä¸ºç©ºï¼Œåˆ™ä¸ä¼šæ›¿æ¢ tabs</td><td><code>&#39;&#39;</code></td></tr></tbody></table><blockquote><p>ç›¸å¯¹åœ°å€</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒHexo ç”Ÿæˆçš„è¶…é“¾æ¥éƒ½æ˜¯ç»å¯¹åœ°å€ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨çš„ç½‘ç«™åŸŸåä¸º <code>example.com</code>,æ‚¨æœ‰ä¸€ç¯‡æ–‡ç« åä¸º <code>hello</code>ï¼Œé‚£ä¹ˆç»å¯¹é“¾æ¥å¯èƒ½åƒè¿™æ ·ï¼š<code>http://example.com/hello.html</code>ï¼Œå®ƒæ˜¯<strong>ç»å¯¹</strong>äºåŸŸåçš„ã€‚ç›¸å¯¹é“¾æ¥åƒè¿™æ ·ï¼š<code>/hello.html</code>ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ— è®ºç”¨ä»€ä¹ˆåŸŸåè®¿é—®è¯¥ç«™ç‚¹ï¼Œéƒ½æ²¡æœ‰å…³ç³»ï¼Œè¿™åœ¨è¿›è¡Œåå‘ä»£ç†æ—¶å¯èƒ½ç”¨åˆ°ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œå»ºè®®ä½¿ç”¨ç»å¯¹åœ°å€ã€‚</p></blockquote><h2 id="åˆ†ç±»-amp-æ ‡ç­¾"><a href="#åˆ†ç±»-amp-æ ‡ç­¾" class="headerlink" title="åˆ†ç±» &amp; æ ‡ç­¾"></a>åˆ†ç±» &amp; æ ‡ç­¾</h2><table><thead><tr><th>å‚æ•°</th><th>æè¿°</th><th>é»˜è®¤å€¼</th></tr></thead><tbody><tr><td><code>default_category</code></td><td>é»˜è®¤åˆ†ç±»</td><td><code>uncategorized</code></td></tr><tr><td><code>category_map</code></td><td>åˆ†ç±»åˆ«å</td><td></td></tr><tr><td><code>tag_map</code></td><td>æ ‡ç­¾åˆ«å</td><td></td></tr></tbody></table><h2 id="æ—¥æœŸ-æ—¶é—´æ ¼å¼"><a href="#æ—¥æœŸ-æ—¶é—´æ ¼å¼" class="headerlink" title="æ—¥æœŸ / æ—¶é—´æ ¼å¼"></a>æ—¥æœŸ / æ—¶é—´æ ¼å¼</h2><p>Hexo ä½¿ç”¨ <a href="http://momentjs.com/">Moment.js</a> æ¥è§£æå’Œæ˜¾ç¤ºæ—¶é—´ã€‚</p><table><thead><tr><th>å‚æ•°</th><th>æè¿°</th><th>é»˜è®¤å€¼</th></tr></thead><tbody><tr><td><code>date_format</code></td><td>æ—¥æœŸæ ¼å¼</td><td><code>YYYY-MM-DD</code></td></tr><tr><td><code>time_format</code></td><td>æ—¶é—´æ ¼å¼</td><td><code>HH:mm:ss</code></td></tr><tr><td><code>use_date_for_updated</code></td><td>Use the date of the post in <a href><code>post.updated</code></a> if no updated date is provided in the front-matter. Typically used with Git workflow</td><td><code>true</code></td></tr></tbody></table><h2 id="åˆ†é¡µ"><a href="#åˆ†é¡µ" class="headerlink" title="åˆ†é¡µ"></a>åˆ†é¡µ</h2><table><thead><tr><th>å‚æ•°</th><th>æè¿°</th><th>é»˜è®¤å€¼</th></tr></thead><tbody><tr><td><code>per_page</code></td><td>æ¯é¡µæ˜¾ç¤ºçš„æ–‡ç« é‡ (0 = å…³é—­åˆ†é¡µåŠŸèƒ½)</td><td><code>10</code></td></tr><tr><td><code>pagination_dir</code></td><td>åˆ†é¡µç›®å½•</td><td><code>page</code></td></tr></tbody></table><h2 id="æ‰©å±•"><a href="#æ‰©å±•" class="headerlink" title="æ‰©å±•"></a>æ‰©å±•</h2><table><thead><tr><th>å‚æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>theme</code></td><td>å½“å‰ä¸»é¢˜åç§°ã€‚å€¼ä¸º<code>false</code>æ—¶ç¦ç”¨ä¸»é¢˜</td></tr><tr><td><code>theme_config</code></td><td>ä¸»é¢˜çš„é…ç½®æ–‡ä»¶ã€‚åœ¨è¿™é‡Œæ”¾ç½®çš„é…ç½®ä¼šè¦†ç›–ä¸»é¢˜ç›®å½•ä¸‹çš„ <code>_config.yml</code> ä¸­çš„é…ç½®</td></tr><tr><td><code>deploy</code></td><td>éƒ¨ç½²éƒ¨åˆ†çš„è®¾ç½®</td></tr><tr><td><code>meta_generator</code></td><td><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/meta#%E5%B1%9E%E6%80%A7">Meta generator</a> æ ‡ç­¾ã€‚ å€¼ä¸º <code>false</code> æ—¶ Hexo ä¸ä¼šåœ¨å¤´éƒ¨æ’å…¥è¯¥æ ‡ç­¾</td></tr></tbody></table><h3 id="åŒ…æ‹¬æˆ–ä¸åŒ…æ‹¬ç›®å½•å’Œæ–‡ä»¶"><a href="#åŒ…æ‹¬æˆ–ä¸åŒ…æ‹¬ç›®å½•å’Œæ–‡ä»¶" class="headerlink" title="åŒ…æ‹¬æˆ–ä¸åŒ…æ‹¬ç›®å½•å’Œæ–‡ä»¶"></a>åŒ…æ‹¬æˆ–ä¸åŒ…æ‹¬ç›®å½•å’Œæ–‡ä»¶</h3><p>åœ¨ Hexo é…ç½®æ–‡ä»¶ä¸­ï¼Œé€šè¿‡è®¾ç½® include/exclude å¯ä»¥è®© Hexo è¿›è¡Œå¤„ç†æˆ–å¿½ç•¥æŸäº›ç›®å½•å’Œæ–‡ä»¶å¤¹ã€‚ä½ å¯ä»¥ä½¿ç”¨ <a href="https://github.com/isaacs/minimatch">glob è¡¨è¾¾å¼</a> å¯¹ç›®å½•å’Œæ–‡ä»¶è¿›è¡ŒåŒ¹é…ã€‚</p><table><thead><tr><th>å‚æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>include</code></td><td>Hexo é»˜è®¤ä¼šå¿½ç•¥éšè—æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ï¼ˆåŒ…æ‹¬åç§°ä»¥ä¸‹åˆ’çº¿å’Œ <code>.</code> å¼€å¤´çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ï¼ŒHexo çš„ <code>_posts</code> å’Œ <code>_data</code> ç­‰ç›®å½•é™¤å¤–ï¼‰ã€‚é€šè¿‡è®¾ç½®æ­¤å­—æ®µå°†ä½¿ Hexo å¤„ç†ä»–ä»¬å¹¶å°†å®ƒä»¬å¤åˆ¶åˆ° <code>source</code> ç›®å½•ä¸‹ã€‚</td></tr><tr><td><code>exclude</code></td><td>Hexo ä¼šå¿½ç•¥è¿™äº›æ–‡ä»¶å’Œç›®å½•</td></tr></tbody></table><p>ä¸¾ä¾‹ï¼š</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs autoit"><span class="hljs-meta"># <span class="hljs-meta-keyword">Include</span>/Exclude Files/Folders</span><br><br>include:  <br>    - <span class="hljs-string">&quot;.nojekyll&quot;</span>  <br>    <span class="hljs-meta"># åŒ…æ‹¬ <span class="hljs-string">&#x27;source/css/_typing.css&#x27;</span>  </span><br>    - <span class="hljs-string">&quot;css/_typing.css&quot;</span>  <br>    <span class="hljs-meta"># åŒ…æ‹¬ <span class="hljs-string">&#x27;source/_css/&#x27;</span> ä¸­çš„ä»»ä½•æ–‡ä»¶ï¼Œä½†ä¸åŒ…æ‹¬å­ç›®å½•åŠå…¶å…¶ä¸­çš„æ–‡ä»¶ã€‚  </span><br>    - <span class="hljs-string">&quot;_css/*&quot;</span>  <br>    <span class="hljs-meta"># åŒ…å« <span class="hljs-string">&#x27;source/_css/&#x27;</span> ä¸­çš„ä»»ä½•æ–‡ä»¶å’Œå­ç›®å½•ä¸‹çš„ä»»ä½•æ–‡ä»¶  </span><br>    - <span class="hljs-string">&quot;_css/**/*&quot;</span><br><br>exclude:  <br>    <span class="hljs-meta"># ä¸åŒ…æ‹¬ <span class="hljs-string">&#x27;source/js/test.js&#x27;</span>  </span><br>    - <span class="hljs-string">&quot;js/test.js&quot;</span>  <br>    <span class="hljs-meta"># ä¸åŒ…æ‹¬ <span class="hljs-string">&#x27;source/js/&#x27;</span> ä¸­çš„æ–‡ä»¶ã€ä½†åŒ…æ‹¬å­ç›®å½•ä¸‹çš„æ‰€æœ‰ç›®å½•å’Œæ–‡ä»¶  </span><br>    - <span class="hljs-string">&quot;js/*&quot;</span>  <br>    <span class="hljs-meta"># ä¸åŒ…æ‹¬ <span class="hljs-string">&#x27;source/js/&#x27;</span> ä¸­çš„æ–‡ä»¶å’Œå­ç›®å½•ä¸‹çš„ä»»ä½•æ–‡ä»¶ </span><br>    - <span class="hljs-string">&quot;js/**/*&quot;</span>  <br>    <span class="hljs-meta"># ä¸åŒ…æ‹¬ <span class="hljs-string">&#x27;source/js/&#x27;</span> ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶åä»¥ <span class="hljs-string">&#x27;test&#x27;</span> å¼€å¤´çš„æ–‡ä»¶ï¼Œä½†åŒ…æ‹¬å…¶å®ƒæ–‡ä»¶å’Œå­ç›®å½•ä¸‹çš„å•æ–‡ä»¶ </span><br>    - <span class="hljs-string">&quot;js/test*&quot;</span> <br>    <span class="hljs-meta"># ä¸åŒ…æ‹¬ <span class="hljs-string">&#x27;source/js/&#x27;</span> åŠå…¶å­ç›®å½•ä¸­ä»»ä½•ä»¥ <span class="hljs-string">&#x27;test&#x27;</span> å¼€å¤´çš„æ–‡ä»¶  </span><br>    - <span class="hljs-string">&quot;js/**/test*&quot;</span>  <br>    <span class="hljs-meta"># ä¸è¦ç”¨ exclude æ¥å¿½ç•¥ <span class="hljs-string">&#x27;source/_posts/&#x27;</span> ä¸­çš„æ–‡ä»¶ã€‚ä½ åº”è¯¥ä½¿ç”¨ <span class="hljs-string">&#x27;skip_render&#x27;</span>ï¼Œæˆ–è€…åœ¨è¦å¿½ç•¥çš„æ–‡ä»¶çš„æ–‡ä»¶åä¹‹å‰åŠ ä¸€ä¸ªä¸‹åˆ’çº¿ <span class="hljs-string">&#x27;_&#x27;</span>  # åœ¨è¿™é‡Œé…ç½®ä¸€ä¸ª </span><br>    - <span class="hljs-string">&quot;_posts/hello-world.md&quot;</span> æ˜¯æ²¡æœ‰ç”¨çš„ã€‚<br></code></pre></td></tr></table></figure><p>åˆ—è¡¨ä¸­çš„æ¯ä¸€é¡¹éƒ½å¿…é¡»ç”¨å•å¼•å·æˆ–åŒå¼•å·åŒ…è£¹èµ·æ¥ã€‚</p><p><code>include</code> å’Œ <code>exclude</code> å¹¶ä¸é€‚ç”¨äº <code>themes/</code> ç›®å½•ä¸‹çš„æ–‡ä»¶ã€‚å¦‚æœéœ€è¦å¿½ç•¥ <code>themes/</code> ç›®å½•ä¸‹çš„éƒ¨åˆ†æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ï¼Œå¯ä»¥åœ¨æ–‡ä»¶åä¹‹å‰æ·»åŠ ä¸‹åˆ’çº¿ <code>_</code>ã€‚</p><h3 id="ä½¿ç”¨ä»£æ›¿é…ç½®æ–‡ä»¶"><a href="#ä½¿ç”¨ä»£æ›¿é…ç½®æ–‡ä»¶" class="headerlink" title="ä½¿ç”¨ä»£æ›¿é…ç½®æ–‡ä»¶"></a>ä½¿ç”¨ä»£æ›¿é…ç½®æ–‡ä»¶</h3><p>å¯ä»¥åœ¨ hexo-cli ä¸­ä½¿ç”¨ <code>--config</code> å‚æ•°æ¥æŒ‡å®šè‡ªå®šä¹‰é…ç½®æ–‡ä»¶çš„è·¯å¾„ã€‚ä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ª YAML æˆ– JSON æ–‡ä»¶çš„è·¯å¾„ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨é€—å·åˆ†éš”ï¼ˆæ— ç©ºæ ¼ï¼‰çš„å¤šä¸ª YAML æˆ– JSON æ–‡ä»¶çš„è·¯å¾„ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight sml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sml"># use <span class="hljs-symbol">&#x27;custom</span>.yml&#x27; <span class="hljs-keyword">in</span> place <span class="hljs-keyword">of</span> <span class="hljs-symbol">&#x27;_config</span>.yml&#x27;<br>$ hexo server --config custom.yml<br><br># use <span class="hljs-symbol">&#x27;custom</span>.yml&#x27; &amp; <span class="hljs-symbol">&#x27;custom2</span>.json&#x27;, prioritizing&#x27;custom3.yml&#x27;, <span class="hljs-keyword">then</span> <span class="hljs-symbol">&#x27;custom2</span>.json&#x27;<br>$ hexo generate --config custom.yml,custom2.json,custom3.yml<br></code></pre></td></tr></table></figure><p>å½“ä½ æŒ‡å®šäº†å¤šä¸ªé…ç½®æ–‡ä»¶ä»¥åï¼ŒHexo ä¼šæŒ‰é¡ºåºå°†è¿™éƒ¨åˆ†é…ç½®æ–‡ä»¶åˆå¹¶æˆä¸€ä¸ª <code>_multiconfig.yml</code>ã€‚å¦‚æœé‡åˆ°é‡å¤çš„é…ç½®ï¼Œæ’åœ¨åé¢çš„æ–‡ä»¶çš„é…ç½®ä¼šè¦†ç›–æ’åœ¨å‰é¢çš„æ–‡ä»¶çš„é…ç½®ã€‚è¿™ä¸ªåŸåˆ™é€‚ç”¨äºä»»æ„æ•°é‡ã€ä»»æ„æ·±åº¦çš„ YAML å’Œ JSON æ–‡ä»¶ã€‚</p><p>ä¾‹å¦‚ï¼Œä½¿ç”¨ <code>--options</code> æŒ‡å®šäº†ä¸¤ä¸ªè‡ªå®šä¹‰é…ç½®æ–‡ä»¶ï¼š</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs verilog">$ hexo <span class="hljs-keyword">generate</span> --<span class="hljs-keyword">config</span> custom<span class="hljs-variable">.yml</span>,custom2<span class="hljs-variable">.json</span><br></code></pre></td></tr></table></figure><p>å¦‚æœ <code>custom.yml</code> ä¸­æŒ‡å®šäº† <code>foo: bar</code>ï¼Œåœ¨ custom2.json ä¸­æŒ‡å®šäº† <code>&quot;foo&quot;: &quot;dinosaur&quot;</code>ï¼Œé‚£ä¹ˆåœ¨ <code>_multiconfig.yml</code> ä¸­ä½ ä¼šå¾—åˆ° <code>foo: dinosaur</code>ã€‚</p><h3 id="è¦†ç›–ä¸»é¢˜é…ç½®"><a href="#è¦†ç›–ä¸»é¢˜é…ç½®" class="headerlink" title="è¦†ç›–ä¸»é¢˜é…ç½®"></a>è¦†ç›–ä¸»é¢˜é…ç½®</h3><p>é€šå¸¸æƒ…å†µä¸‹ï¼ŒHexo ä¸»é¢˜æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„é¡¹ç›®ï¼Œå¹¶æ‹¥æœ‰ä¸€ä¸ªç‹¬ç«‹çš„ <code>_config.yml</code> é…ç½®æ–‡ä»¶ã€‚<br>ä½ å¯ä»¥åœ¨ç«™ç‚¹çš„ <code>_config.yml</code> é…ç½®æ–‡ä»¶ä¸­é…ç½®ä½ çš„ä¸»é¢˜ï¼Œè¿™æ ·ä½ å°±ä¸éœ€è¦ fork ä¸€ä»½ä¸»é¢˜å¹¶ç»´æŠ¤ä¸»é¢˜ç‹¬ç«‹çš„é…ç½®æ–‡ä»¶ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªè¦†ç›–ä¸»é¢˜é…ç½®çš„ä¾‹å­ï¼š</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-meta"># _config.yml</span><br><span class="hljs-symbol">theme_config:</span>  <br><span class="hljs-symbol">bio:</span> <span class="hljs-string">&quot;My awesome bio&quot;</span><br><span class="hljs-meta"># themes/my-theme/_config.yml</span><br><span class="hljs-symbol">bio:</span> <span class="hljs-string">&quot;Some generic bio&quot;</span><br><span class="hljs-symbol">logo:</span> <span class="hljs-string">&quot;a-cool-image.png&quot;</span><br></code></pre></td></tr></table></figure><p>æœ€ç»ˆä¸»é¢˜é…ç½®çš„è¾“å‡ºæ˜¯ï¼š</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dts">&#123;  <br><span class="hljs-symbol">bio:</span> <span class="hljs-string">&quot;My awesome bio&quot;</span>,  <br><span class="hljs-symbol">logo:</span> <span class="hljs-string">&quot;a-cool-image.png&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Hexoå¼€å§‹ä½¿ç”¨</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hexo</title>
    <link href="/2019/10/29/Hexo/"/>
    <url>/2019/10/29/Hexo/</url>
    
    <content type="html"><![CDATA[<h3 id="ä»€ä¹ˆæ˜¯-Hexoï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-Hexoï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ Hexoï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ Hexoï¼Ÿ</h3><p>Hexo æ˜¯ä¸€ä¸ªå¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æ¶ã€‚Hexo ä½¿ç”¨ <a href="http://daringfireball.net/projects/markdown/">Markdown</a>ï¼ˆæˆ–å…¶ä»–æ¸²æŸ“å¼•æ“ï¼‰è§£ææ–‡ç« ï¼Œåœ¨å‡ ç§’å†…ï¼Œå³å¯åˆ©ç”¨é“ä¸½çš„ä¸»é¢˜ç”Ÿæˆé™æ€ç½‘é¡µã€‚</p><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>å®‰è£… Hexo ç›¸å½“ç®€å•ï¼Œåªéœ€è¦å…ˆå®‰è£…ä¸‹åˆ—åº”ç”¨ç¨‹åºå³å¯ï¼š</p><ul><li><a href="http://nodejs.org/">Node.js</a> (Node.js ç‰ˆæœ¬éœ€ä¸ä½äº 8.6ï¼Œå»ºè®®ä½¿ç”¨ Node.js 10.0 åŠä»¥ä¸Šç‰ˆæœ¬)</li><li><a href="http://git-scm.com/">Git</a></li></ul><p>å¦‚æœæ‚¨çš„ç”µè„‘ä¸­å·²ç»å®‰è£…ä¸Šè¿°å¿…å¤‡ç¨‹åºï¼Œé‚£ä¹ˆæ­å–œæ‚¨ï¼æ¥ä¸‹æ¥åªéœ€è¦ä½¿ç”¨ npm å³å¯å®Œæˆ Hexo çš„å®‰è£…ã€‚</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs avrasm">$ npm install -g hexo-<span class="hljs-keyword">cli</span><br></code></pre></td></tr></table></figure><p>å¦‚æœæ‚¨çš„ç”µè„‘ä¸­å°šæœªå®‰è£…æ‰€éœ€è¦çš„ç¨‹åºï¼Œè¯·æ ¹æ®ä»¥ä¸‹å®‰è£…æŒ‡ç¤ºå®Œæˆå®‰è£…ã€‚</p><blockquote><p>Mac ç”¨æˆ·</p><p>æ‚¨åœ¨ç¼–è¯‘æ—¶å¯èƒ½ä¼šé‡åˆ°é—®é¢˜ï¼Œè¯·å…ˆåˆ° App Store å®‰è£… Xcodeï¼ŒXcode å®Œæˆåï¼Œå¯åŠ¨å¹¶è¿›å…¥ <strong>Preferences -&gt; Download -&gt; Command Line Tools -&gt; Install</strong> å®‰è£…å‘½ä»¤è¡Œå·¥å…·ã€‚</p></blockquote><blockquote><p>For Mac / Linux ç”¨æˆ·</p><p>å¦‚æœä½ æ˜¯ macOS ç”¨æˆ·ï¼Œæˆ–è€…æ˜¯é€šè¿‡è½¯ä»¶ç®¡ç†å™¨ä»é»˜è®¤è½¯ä»¶ä»“åº“å®‰è£… Node.js çš„ Linux ç”¨æˆ·ï¼Œåœ¨ä½¿ç”¨ npm çš„ <code>-g</code> å‚æ•°æ—¶å¯èƒ½ä¼šé‡åˆ°ä¸€äº›æƒé™ç›¸å…³çš„é—®é¢˜ã€‚è¯·éµå¾ª <a href="https://docs.npmjs.com/resolving-eacces-permissions-errors-when-installing-packages-globally">ç”± npmjs å‘å¸ƒçš„æŒ‡å¯¼</a> ä¿®å¤è¯¥é—®é¢˜ï¼Œ<strong>å¹¶ä¸”ä¸è¦ä½¿ç”¨ rootã€sudo ç­‰æ–¹æ³•è¦†ç›–æƒé™</strong></p></blockquote><h4 id="å®‰è£…-Git"><a href="#å®‰è£…-Git" class="headerlink" title="å®‰è£… Git"></a>å®‰è£… Git</h4><ul><li><p>Windowsï¼šä¸‹è½½å¹¶å®‰è£… <a href="https://git-scm.com/download/win">git</a>.</p></li><li><p>Macï¼šä½¿ç”¨ <a href="http://mxcl.github.com/homebrew/">Homebrew</a>, <a href="http://www.macports.org/">MacPorts</a> ï¼š<code>brew install git</code>;æˆ–ä¸‹è½½ <a href="http://sourceforge.net/projects/git-osx-installer/">å®‰è£…ç¨‹åº</a> å®‰è£…ã€‚</p></li><li><p>Linux (Ubuntu, Debian)ï¼š<code>sudo apt-get install git-core</code></p></li><li><p>Linux (Fedora, Red Hat, CentOS)ï¼š<code>sudo yum install git-core</code></p></li></ul><blockquote><p>Windows ç”¨æˆ·</p><p>ç”±äºä¼—æ‰€å‘¨çŸ¥çš„åŸå› ï¼Œä»ä¸Šé¢çš„é“¾æ¥ä¸‹è½½git for windowsæœ€å¥½æŒ‚ä¸Šä¸€ä¸ªä»£ç†ï¼Œå¦åˆ™ä¸‹è½½é€Ÿåº¦ååˆ†ç¼“æ…¢ã€‚ä¹Ÿå¯ä»¥å‚è€ƒ<a href="https://github.com/waylau/git-for-win">è¿™ä¸ªé¡µé¢</a>ï¼Œæ”¶å½•äº†å­˜å‚¨äºç™¾åº¦äº‘çš„ä¸‹è½½åœ°å€ã€‚</p></blockquote><h4 id="å®‰è£…-Node-js"><a href="#å®‰è£…-Node-js" class="headerlink" title="å®‰è£… Node.js"></a>å®‰è£… Node.js</h4><p>å®‰è£… Node.js çš„æœ€ä½³æ–¹å¼æ˜¯ä½¿ç”¨ <a href="https://github.com/nvm-sh/nvm">nvm</a>ã€‚nvm çš„å¼€å‘è€…æä¾›äº†ä¸€ä¸ªè‡ªåŠ¨å®‰è£… nvm çš„ç®€å•è„šæœ¬ï¼š</p><p>cURL:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">$ curl -o- https:<span class="hljs-regexp">//</span>raw.githubusercontent.com<span class="hljs-regexp">/nvm-sh/</span>nvm<span class="hljs-regexp">/v0.34.0/i</span>nstall.sh | sh<br></code></pre></td></tr></table></figure><p>Wget:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">$ wget -qO- https:<span class="hljs-regexp">//</span>raw.githubusercontent.com<span class="hljs-regexp">/nvm-sh/</span>nvm<span class="hljs-regexp">/v0.34.0/i</span>nstall.sh | sh<br></code></pre></td></tr></table></figure><p>å®‰è£…å®Œæˆåï¼Œé‡å¯ç»ˆç«¯å¹¶æ‰§è¡Œä¸‹åˆ—å‘½ä»¤å³å¯å®‰è£… Node.jsã€‚</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">$ nvm install <span class="hljs-keyword">node</span><span class="hljs-title"></span><br></code></pre></td></tr></table></figure><blockquote><p>Windows ç”¨æˆ·</p><p>å¯¹äº Windows ç”¨æˆ·æˆ‘ä»¬æ¨èä½¿ç”¨ <a href="https://github.com/jasongin/nvs/">nvs</a> è€Œä¸æ˜¯ nvmã€‚nvs å…·æœ‰å’Œ nvm ç›¸ä¼¼çš„å‘½ä»¤è¡Œè¯­æ³•ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡ Windows Installer (MSI) å®‰è£…åŒ…è¿›è¡Œå®‰è£…ã€‚</p></blockquote><p>æˆ–è€…æ‚¨ä¹Ÿå¯ä»¥ä¸‹è½½ <a href="http://nodejs.org/">å®‰è£…ç¨‹åº</a> æ¥å®‰è£…ã€‚</p><blockquote><p>Windows ç”¨æˆ·</p><p>å¯¹äºwindowsç”¨æˆ·æ¥è¯´ï¼Œå»ºè®®ä½¿ç”¨å®‰è£…ç¨‹åºè¿›è¡Œå®‰è£…ã€‚å®‰è£…æ—¶ï¼Œè¯·å‹¾é€‰<strong>Add to PATH</strong>é€‰é¡¹ã€‚<br>å¦å¤–ï¼Œæ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨<strong>Git Bash</strong>ï¼Œè¿™æ˜¯git for windowsè‡ªå¸¦çš„ä¸€ç»„ç¨‹åºï¼Œæä¾›äº†Linuxé£æ ¼çš„shellï¼Œåœ¨è¯¥ç¯å¢ƒä¸‹ï¼Œæ‚¨å¯ä»¥ç›´æ¥ç”¨ä¸Šé¢æåˆ°çš„å‘½ä»¤æ¥å®‰è£…Node.jsã€‚æ‰“å¼€å®ƒçš„æ–¹æ³•å¾ˆç®€å•ï¼Œåœ¨ä»»æ„ä½ç½®å•å‡»å³é”®ï¼Œé€‰æ‹©â€œGit Bash Hereâ€å³å¯ã€‚ç”±äºHexoçš„å¾ˆå¤šæ“ä½œéƒ½æ¶‰åŠåˆ°å‘½ä»¤è¡Œï¼Œæ‚¨å¯ä»¥è€ƒè™‘å§‹ç»ˆä½¿ç”¨<strong>Git Bash</strong>æ¥è¿›è¡Œæ“ä½œã€‚</p></blockquote><blockquote><p>Linux ç”¨æˆ·</p><p>å¤§éƒ¨åˆ† Linux å‘è¡Œç‰ˆéƒ½ä¼šåœ¨å®ƒä»¬çš„é»˜è®¤è½¯ä»¶åŒ…ä»“åº“ä¸­åˆ†å‘ Node.jsã€‚ç¬¬ä¸‰æ–¹ä»“åº“ <a href="https://github.com/nodesource/distributions">NodeSource</a> é€šå¸¸èƒ½åˆ†å‘æœ€æ–°ç‰ˆæœ¬çš„ Node.jsã€‚</p></blockquote><h4 id="å®‰è£…-Hexo"><a href="#å®‰è£…-Hexo" class="headerlink" title="å®‰è£… Hexo"></a>å®‰è£… Hexo</h4><p>æ‰€æœ‰å¿…å¤‡çš„åº”ç”¨ç¨‹åºå®‰è£…å®Œæˆåï¼Œå³å¯ä½¿ç”¨ npm å®‰è£… Hexoã€‚</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs avrasm">$ npm install -g hexo-<span class="hljs-keyword">cli</span><br></code></pre></td></tr></table></figure><h4 id="å»ºç«™"><a href="#å»ºç«™" class="headerlink" title="å»ºç«™"></a>å»ºç«™</h4><p>å®‰è£… Hexo å®Œæˆåï¼Œè¯·æ‰§è¡Œä¸‹åˆ—å‘½ä»¤ï¼ŒHexo å°†ä¼šåœ¨æŒ‡å®šæ–‡ä»¶å¤¹ä¸­æ–°å»ºæ‰€éœ€è¦çš„æ–‡ä»¶ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-variable">$</span> hexo init &lt;folder&gt;<br><span class="hljs-variable">$</span> <span class="hljs-built_in">cd</span> &lt;folder&gt;<br><span class="hljs-variable">$</span> npm install<br></code></pre></td></tr></table></figure><p>æ–°å»ºå®Œæˆåï¼ŒæŒ‡å®šæ–‡ä»¶å¤¹çš„ç›®å½•å¦‚ä¸‹ï¼š</p><figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sqf">.<br>â”œâ”€â”€ <span class="hljs-variable">_config</span>.yml<br>â”œâ”€â”€ package.json<br>â”œâ”€â”€ scaffolds<br>â”œâ”€â”€ source<br>|   â”œâ”€â”€ <span class="hljs-variable">_drafts</span><br>|   â””â”€â”€ <span class="hljs-variable">_posts</span><br>â””â”€â”€ themes<br></code></pre></td></tr></table></figure><h5 id="config-yml"><a href="#config-yml" class="headerlink" title="_config.yml"></a>_config.yml</h5><p>ç½‘ç«™çš„ <a href="https://hexo.io/zh-cn/docs/configuration">é…ç½®</a> ä¿¡æ¯ï¼Œæ‚¨å¯ä»¥åœ¨æ­¤é…ç½®å¤§éƒ¨åˆ†çš„å‚æ•°ã€‚</p><h5 id="package-json"><a href="#package-json" class="headerlink" title="package.json"></a>package.json</h5><p>åº”ç”¨ç¨‹åºçš„ä¿¡æ¯ã€‚<a href="https://ejs.co/">EJS</a>, <a href="http://learnboost.github.io/stylus/">Stylus</a> å’Œ <a href="http://daringfireball.net/projects/markdown/">Markdown</a> renderer å·²é»˜è®¤å®‰è£…ï¼Œæ‚¨å¯ä»¥è‡ªç”±ç§»é™¤ã€‚</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs actionscript"><span class="hljs-keyword">package</span>.json<br>&#123;<br>    <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;hexo-site&quot;</span>,<br>    <span class="hljs-string">&quot;version&quot;</span>: <span class="hljs-string">&quot;0.0.0&quot;</span>,<br>    <span class="hljs-string">&quot;private&quot;</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-string">&quot;hexo&quot;</span>: &#123; <br>    <span class="hljs-string">&quot;version&quot;</span>: <span class="hljs-string">&quot;&quot;</span>  <br>    &#125;,  <br>    <span class="hljs-string">&quot;dependencies&quot;</span>: &#123; <br>        <span class="hljs-string">&quot;hexo&quot;</span>: <span class="hljs-string">&quot;^3.8.0&quot;</span>,<br>        <span class="hljs-string">&quot;hexo-generator-archive&quot;</span>: <span class="hljs-string">&quot;^0.1.5&quot;</span>, <br>        <span class="hljs-string">&quot;hexo-generator-category&quot;</span>: <span class="hljs-string">&quot;^0.1.3&quot;</span>, <br>        <span class="hljs-string">&quot;hexo-generator-index&quot;</span>: <span class="hljs-string">&quot;^0.2.1&quot;</span>,<br>        <span class="hljs-string">&quot;hexo-generator-tag&quot;</span>: <span class="hljs-string">&quot;^0.2.0&quot;</span>, <br>        <span class="hljs-string">&quot;hexo-renderer-ejs&quot;</span>: <span class="hljs-string">&quot;^0.3.1&quot;</span>, <br>        <span class="hljs-string">&quot;hexo-renderer-stylus&quot;</span>: <span class="hljs-string">&quot;^0.3.3&quot;</span>,<br>        <span class="hljs-string">&quot;hexo-renderer-marked&quot;</span>: <span class="hljs-string">&quot;^0.3.2&quot;</span>,<br>        <span class="hljs-string">&quot;hexo-server&quot;</span>: <span class="hljs-string">&quot;^0.3.3&quot;</span>  <br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="scaffolds"><a href="#scaffolds" class="headerlink" title="scaffolds"></a>scaffolds</h5><p><a href="https://hexo.io/zh-cn/docs/writing">æ¨¡ç‰ˆ</a> æ–‡ä»¶å¤¹ã€‚å½“æ‚¨æ–°å»ºæ–‡ç« æ—¶ï¼ŒHexo ä¼šæ ¹æ® scaffold æ¥å»ºç«‹æ–‡ä»¶ã€‚</p><p>Hexoçš„æ¨¡æ¿æ˜¯æŒ‡åœ¨æ–°å»ºçš„æ–‡ç« æ–‡ä»¶ä¸­é»˜è®¤å¡«å……çš„å†…å®¹ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨ä¿®æ”¹scaffold/post.mdä¸­çš„Front-matterå†…å®¹ï¼Œé‚£ä¹ˆæ¯æ¬¡æ–°å»ºä¸€ç¯‡æ–‡ç« æ—¶éƒ½ä¼šåŒ…å«è¿™ä¸ªä¿®æ”¹ã€‚</p><h5 id="source"><a href="#source" class="headerlink" title="source"></a>source</h5><p>èµ„æºæ–‡ä»¶å¤¹æ˜¯å­˜æ”¾ç”¨æˆ·èµ„æºçš„åœ°æ–¹ã€‚é™¤ <code>_posts</code> æ–‡ä»¶å¤¹ä¹‹å¤–ï¼Œå¼€å¤´å‘½åä¸º <code>_</code> (ä¸‹åˆ’çº¿)çš„æ–‡ä»¶ / æ–‡ä»¶å¤¹å’Œéšè—çš„æ–‡ä»¶å°†ä¼šè¢«å¿½ç•¥ã€‚Markdown å’Œ HTML æ–‡ä»¶ä¼šè¢«è§£æå¹¶æ”¾åˆ° <code>public</code> æ–‡ä»¶å¤¹ï¼Œè€Œå…¶ä»–æ–‡ä»¶ä¼šè¢«æ‹·è´è¿‡å»ã€‚</p><h5 id="themes"><a href="#themes" class="headerlink" title="themes"></a>themes</h5><p><a href="https://hexo.io/zh-cn/docs/themes">ä¸»é¢˜</a> æ–‡ä»¶å¤¹ã€‚Hexo ä¼šæ ¹æ®ä¸»é¢˜æ¥ç”Ÿæˆé™æ€é¡µé¢ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Hexoå¼€å§‹ä½¿ç”¨</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Markdownç¼–è¾‘hexoåª’ä½“èµ„æºé—®é¢˜</title>
    <link href="/2019/10/28/Markdown%E7%BC%96%E8%BE%91hexo%E5%AA%92%E4%BD%93%E8%B5%84%E6%BA%90%E9%97%AE%E9%A2%98/"/>
    <url>/2019/10/28/Markdown%E7%BC%96%E8%BE%91hexo%E5%AA%92%E4%BD%93%E8%B5%84%E6%BA%90%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<p>ä½¿ç”¨ <code>npm install https://github.com/CodeFalling/hexo-asset-image --save</code> å®‰è£…0.0.5ç‰ˆæœ¬çš„hexo-asset-imageæ’ä»¶ã€‚<br>ä½¿ç”¨ <code>npm install hexo-asset-image --save</code> å®‰è£…çš„æ˜¯1.0.0ç‰ˆæœ¬çš„hexo-asset-imageæ’ä»¶ã€‚<br>ä¸¤è€…æœ€ç›´æ¥çš„åŒºåˆ«æ˜¯æ˜ å°„å…³ç³»ä¸åŒã€‚</p><p>å‰è€…æ˜ å°„<code>/YYYY/MM/DD/* / * .xxx</code>å›¾ç‰‡èƒ½å¤Ÿæ˜¾ç¤ºå‡ºæ¥ï¼Œåè€…ä¸çŸ¥é“ä¸ºä»€ä¹ˆæ˜ å°„ä¸º<code>/.com//* * / * .xxx</code> å›¾ç‰‡èµ„æºä¸èƒ½æˆåŠŸè®¿é—®ã€‚</p><p>åè€…é—®é¢˜è§£å†³åŠæ³•ï¼š<br>ç¬¬ä¸€æ­¥ï¼šå®‰è£…æ’ä»¶ï¼Œåœ¨hexoæ ¹ç›®å½•æ‰“å¼€Git Bash,æ‰§è¡Œ<br>    <code>npm install hexo-asset-image --save</code><br>ç¬¬äºŒæ­¥ï¼šæ‰“å¼€hexoçš„é…ç½®æ–‡ä»¶<code>_config.yml</code><br>æ‰¾åˆ° <code>post_asset_folder</code>ï¼ŒæŠŠè¿™ä¸ªé€‰é¡¹ä»falseæ”¹æˆtrue<br>ç¬¬ä¸‰æ­¥ï¼šæ‰“å¼€<br><code>/node_modules/hexo-asset-image/index.js</code><br>å°†å†…å®¹æ›´æ¢ä¸ºä¸‹é¢çš„ä»£ç ï¼ˆåœ¨æ­¤æ„Ÿè°¢Ericam_ å¤§ç¥ï¼š<a href="https://blog.csdn.net/xjm850552586%EF%BC%89">https://blog.csdn.net/xjm850552586ï¼‰</a></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-meta">&#x27;use strict&#x27;</span>;<br><span class="hljs-keyword">var</span> cheerio = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;cheerio&#x27;</span>);<br><br><span class="hljs-comment">// http://stackoverflow.com/questions/14480345/how-to-get-the-nth-occurrence-in-a-string</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getPosition</span>(<span class="hljs-params">str, m, i</span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> str.split(m, i).join(m).length;<br>&#125;<br><br><span class="hljs-keyword">var</span> version = <span class="hljs-built_in">String</span>(hexo.version).split(<span class="hljs-string">&#x27;.&#x27;</span>);<br>hexo.extend.filter.register(<span class="hljs-string">&#x27;after_post_render&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>)</span>&#123;<br>  <span class="hljs-keyword">var</span> config = hexo.config;<br>  <span class="hljs-keyword">if</span>(config.post_asset_folder)&#123;<br>        <span class="hljs-keyword">var</span> link = data.permalink;<br>    <span class="hljs-keyword">if</span>(version.length &gt; <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-built_in">Number</span>(version[<span class="hljs-number">0</span>]) == <span class="hljs-number">3</span>)<br>       <span class="hljs-keyword">var</span> beginPos = getPosition(link, <span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-number">1</span>) + <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">else</span><br>       <span class="hljs-keyword">var</span> beginPos = getPosition(link, <span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-number">3</span>) + <span class="hljs-number">1</span>;<br>    <span class="hljs-comment">// In hexo 3.1.1, the permalink of &quot;about&quot; page is like &quot;.../about/index.html&quot;.</span><br>    <span class="hljs-keyword">var</span> endPos = link.lastIndexOf(<span class="hljs-string">&#x27;/&#x27;</span>) + <span class="hljs-number">1</span>;<br>    link = link.substring(beginPos, endPos);<br><br>    <span class="hljs-keyword">var</span> toprocess = [<span class="hljs-string">&#x27;excerpt&#x27;</span>, <span class="hljs-string">&#x27;more&#x27;</span>, <span class="hljs-string">&#x27;content&#x27;</span>];<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; toprocess.length; i++)&#123;<br>      <span class="hljs-keyword">var</span> key = toprocess[i];<br> <br>      <span class="hljs-keyword">var</span> $ = cheerio.load(data[key], &#123;<br>        ignoreWhitespace: <span class="hljs-literal">false</span>,<br>        xmlMode: <span class="hljs-literal">false</span>,<br>        lowerCaseTags: <span class="hljs-literal">false</span>,<br>        decodeEntities: <span class="hljs-literal">false</span><br>      &#125;);<br><br>      $(<span class="hljs-string">&#x27;img&#x27;</span>).each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;<br>        <span class="hljs-keyword">if</span> ($(<span class="hljs-built_in">this</span>).attr(<span class="hljs-string">&#x27;src&#x27;</span>))&#123;<br>            <span class="hljs-comment">// For windows style path, we replace &#x27;\&#x27; to &#x27;/&#x27;.</span><br>            <span class="hljs-keyword">var</span> src = $(<span class="hljs-built_in">this</span>).attr(<span class="hljs-string">&#x27;src&#x27;</span>).replace(<span class="hljs-string">&#x27;\\&#x27;</span>, <span class="hljs-string">&#x27;/&#x27;</span>);<br>            <span class="hljs-keyword">if</span>(!<span class="hljs-regexp">/http[s]*.*|\/\/.*/</span>.test(src) &amp;&amp;<br>               !<span class="hljs-regexp">/^\s*\//</span>.test(src)) &#123;<br>              <span class="hljs-comment">// For &quot;about&quot; page, the first part of &quot;src&quot; can&#x27;t be removed.</span><br>              <span class="hljs-comment">// In addition, to support multi-level local directory.</span><br>              <span class="hljs-keyword">var</span> linkArray = link.split(<span class="hljs-string">&#x27;/&#x27;</span>).filter(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">elem</span>)</span>&#123;<br>                <span class="hljs-keyword">return</span> elem != <span class="hljs-string">&#x27;&#x27;</span>;<br>              &#125;);<br>              <span class="hljs-keyword">var</span> srcArray = src.split(<span class="hljs-string">&#x27;/&#x27;</span>).filter(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">elem</span>)</span>&#123;<br>                <span class="hljs-keyword">return</span> elem != <span class="hljs-string">&#x27;&#x27;</span> &amp;&amp; elem != <span class="hljs-string">&#x27;.&#x27;</span>;<br>              &#125;);<br>              <span class="hljs-keyword">if</span>(srcArray.length &gt; <span class="hljs-number">1</span>)<br>                srcArray.shift();<br>              src = srcArray.join(<span class="hljs-string">&#x27;/&#x27;</span>);<br>              $(<span class="hljs-built_in">this</span>).attr(<span class="hljs-string">&#x27;src&#x27;</span>, config.root + link + src);<br>              <span class="hljs-built_in">console</span>.info&amp;&amp;<span class="hljs-built_in">console</span>.info(<span class="hljs-string">&quot;update link as:--&gt;&quot;</span>+config.root + link + src);<br>            &#125;<br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>            <span class="hljs-built_in">console</span>.info&amp;&amp;<span class="hljs-built_in">console</span>.info(<span class="hljs-string">&quot;no src attr, skipped...&quot;</span>);<br>            <span class="hljs-built_in">console</span>.info&amp;&amp;<span class="hljs-built_in">console</span>.info($(<span class="hljs-built_in">this</span>));<br>        &#125;<br>      &#125;);<br>      data[key] = $.html();<br>    &#125;<br>  &#125;<br>&#125;);<br></code></pre></td></tr></table></figure><p>ç¬¬å››æ­¥ï¼šç°åœ¨å°±å¯ä»¥æ’å…¥å›¾ç‰‡äº†ï¼Œæ¯”å¦‚hexo new post photoä¹‹å<br>å°±åœ¨source/_postsç”Ÿæˆphoto.mdæ–‡ä»¶å’Œphotoæ–‡ä»¶å¤¹ï¼Œæˆ‘ä»¬æŠŠè¦æ’å…¥çš„å›¾ç‰‡å¤åˆ¶åˆ°photoæ–‡ä»¶å¤¹å†…ï¼Œ<br>åœ¨photo.mdæ–‡ä»¶é‡Œé¢æŒ‰markdownçš„æ ‡å‡†å†™ã€‚</p><p>å‚è€ƒé“¾æ¥ï¼š<br><a href="https://blog.csdn.net/xjm850552586/article/details/84101345">https://blog.csdn.net/xjm850552586/article/details/84101345</a><br><a href="https://blog.csdn.net/qq_38148394/article/details/79997971">https://blog.csdn.net/qq_38148394/article/details/79997971</a></p><p>å‚è€ƒï¼šDCBXZ<br>é“¾æ¥ï¼š<a href="https://www.jianshu.com/p/f72aaad7b852">https://www.jianshu.com/p/f72aaad7b852</a><br>æ¥æºï¼šç®€ä¹¦</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Hexoé™æ€é¡µé¢è„šæ‰‹æ¶æ­å»º</title>
    <link href="/2019/10/28/scaffold/"/>
    <url>/2019/10/28/scaffold/</url>
    
    <content type="html"><![CDATA[<h2 id="Hexoä»é›¶å¼€å§‹åˆ°å®Œæ•´æ­å»º"><a href="#Hexoä»é›¶å¼€å§‹åˆ°å®Œæ•´æ­å»º" class="headerlink" title="Hexoä»é›¶å¼€å§‹åˆ°å®Œæ•´æ­å»º"></a>Hexoä»é›¶å¼€å§‹åˆ°å®Œæ•´æ­å»º</h2><h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>å¾ˆæ—©å°±æƒ³æ­å»ºè‡ªå·±çš„Blogäº†ï¼Œä½†æ˜¯ä»¥å‰ä»¥ä¸ºéœ€è¦æœ‰è‡ªå·±çš„åŸŸåã€æœåŠ¡å™¨ï¼ˆqiongï¼‰è¿˜è¦è‡ªå·±ç¼–å†™é¡µé¢ä»£ç ï¼ˆcaiï¼‰ï¼Œè§‰å¾—å¾ˆéº»çƒ¦ï¼ˆlanï¼‰æ‰€ä»¥è¿™ä¸ªæƒ³æ³•è¢«æç½®äº†å¾ˆä¹…ã€‚ä¹Ÿæ˜¯æœ€è¿‘é—²æ¥æ— äº‹ç¿»äº†ç¿»å¼€æºä¸­å›½ï¼Œäº†è§£äº†hexoè¿™ä¸ªç©æ„ï¼ŒèŠ±äº†ä¸€å¤©æ—¶é—´è‡ªå·±æ­äº†ä¸€ä¸‹ã€‚</p><ol><li>å®‰è£…Git</li><li>å®‰è£…Nodejs</li><li>å®‰è£…Hexo</li><li>ç”ŸæˆSSHå¹¶æ·»åŠ åˆ°Github</li><li>éƒ¨ç½²é¡¹ç›®å¹¶ä¸Šä¼ </li><li>ç»‘å®šä¸ªäººåŸŸå</li><li>ä¿®æ”¹å’Œé…ç½®ä¸»é¢˜</li></ol><h3 id="å¼€å§‹å§"><a href="#å¼€å§‹å§" class="headerlink" title="å¼€å§‹å§"></a>å¼€å§‹å§</h3><h4 id="1ã€å®‰è£…Git"><a href="#1ã€å®‰è£…Git" class="headerlink" title="1ã€å®‰è£…Git"></a>1ã€å®‰è£…Git</h4><ul><li><p>gitä¸‹è½½åœ°å€ï¼š<a href="https://git-for-windows.github.io/">https://git-for-windows.github.io/</a></p></li><li><p>å®‰è£…è¿‡ç¨‹ï¼šåŒå‡»Git-2.23.0-64-bit.exeï¼Œæ¥ç€ä¸€è·¯â€™ä¸‹ä¸€æ­¥â€˜å°±å¥½</p></li><li><p>å®‰è£…æ— è¯¯åï¼šcmdè¾“å…¥git â€“versionæŸ¥çœ‹Gitçš„ç‰ˆæœ¬</p></li></ul><p><img src="/2019/10/28/scaffold/git-v.png" alt="git-v"></p><h4 id="2ã€å®‰è£…nodejs"><a href="#2ã€å®‰è£…nodejs" class="headerlink" title="2ã€å®‰è£…nodejs"></a>2ã€å®‰è£…nodejs</h4><p>Hexoæ˜¯åŸºäºnodeJSç¯å¢ƒçš„é™æ€åšå®¢ï¼Œé‡Œé¢çš„npmå·¥å…·å¾ˆæœ‰ç”¨</p><ul><li><a href="https://nodejs.org/en/">ä¸‹è½½åœ°å€</a>(è¯´æ˜ï¼šLTSä¸ºé•¿æœŸæ”¯æŒç‰ˆï¼ŒCurrentä¸ºå½“å‰æœ€æ–°ç‰ˆ)</li><li>å®‰è£…æ­¥éª¤ï¼šåæ­£ä¸‹è½½å¥½msiæ–‡ä»¶åï¼ŒåŒå‡»æ‰“å¼€å®‰è£…ï¼Œä¹Ÿæ˜¯ä¸€è·¯nextï¼Œä¸è¿‡åœ¨Custom Setupè¿™ä¸€æ­¥è®°å¾—é€‰ <code>Add to PATH</code> ,è¿™æ ·ä½ å°±ä¸ç”¨è‡ªå·±å»é…ç½®ç”µè„‘ä¸Šç¯å¢ƒå˜é‡äº†ï¼Œè£…å®Œåœ¨æŒ‰ <code>win + r</code> å¿«æ·é”®è°ƒå‡ºè¿è¡Œï¼Œç„¶åè¾“å…¥cmdç¡®å®šï¼Œåœ¨cmdä¸­è¾“å…¥pathå¯ä»¥çœ‹åˆ°ä½ çš„nodeæ˜¯å¦é…ç½®åœ¨é‡Œé¢ï¼ˆç¯å¢ƒå˜é‡ï¼‰ï¼Œæ²¡æœ‰çš„è¯ä½ å°±è‡ªç”±å‘æŒ¥å§ã€‚</li><li>æŸ¥çœ‹ç‰ˆæœ¬ï¼šå‘½ä»¤<code>node -v</code></li></ul><p><img src="/2019/10/28/scaffold/node-v.png" alt="node-v"></p><h4 id="3ã€å®‰è£…Hexo"><a href="#3ã€å®‰è£…Hexo" class="headerlink" title="3ã€å®‰è£…Hexo"></a>3ã€å®‰è£…Hexo</h4><ul><li><p>å…ˆåˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå¦‚/Hexoï¼Œè¿™ä¸ªæ–‡ä»¶å¤¹å°±ç›¸å½“äºæˆ‘ä»¬Blogé¡¹ç›®ç›®å½•</p></li><li><p>æ‰§è¡ŒHexoå®‰è£…å‘½ä»¤ï¼š<code>npm i -g hexo</code></p></li><li><p>å®‰è£…å®Œæˆåï¼ŒæŸ¥çœ‹ç‰ˆæœ¬ï¼š<code>hexo -v</code></p><p><img src="/2019/10/28/scaffold/hexo-v.png" alt="1572250103953"></p></li><li><p><code>cd</code>åˆ°å…ˆå‰åˆ›å»ºç›®å½•ï¼Œå¦‚/Hexoï¼Œæ‰§è¡Œ<code>hexo init</code>åˆå§‹åŒ–å‘½ä»¤ï¼Œå®Œæˆåå³å¯çœ‹åˆ°è‡ªåŠ¨åˆ›å»ºçš„å¦‚ä¸‹å†…å®¹ï¼š</p><p><img src="/2019/10/28/scaffold/hexo-init.png" alt="hexo-init"></p></li><li><p>è§£é‡Šä¸€ä¸‹ï¼š</p><ul><li>node_modulesï¼šæ˜¯ä¾èµ–åŒ…</li><li>publicï¼šå­˜æ”¾çš„æ˜¯ç”Ÿæˆçš„é¡µé¢</li><li>scaffoldsï¼šå‘½ä»¤ç”Ÿæˆæ–‡ç« ç­‰çš„æ¨¡æ¿</li><li>sourceï¼šç”¨å‘½ä»¤åˆ›å»ºçš„å„ç§æ–‡ç« </li><li>themesï¼šä¸»é¢˜</li><li>_config.ymlï¼šæ•´ä¸ªåšå®¢çš„é…ç½®</li><li>db.jsonï¼šsourceè§£ææ‰€å¾—åˆ°çš„</li><li>package.jsonï¼šé¡¹ç›®æ‰€éœ€æ¨¡å—é¡¹ç›®çš„é…ç½®ä¿¡æ¯</li></ul></li></ul><h4 id="4ã€æ­æ¡¥åˆ°ä½ çš„GitHub"><a href="#4ã€æ­æ¡¥åˆ°ä½ çš„GitHub" class="headerlink" title="4ã€æ­æ¡¥åˆ°ä½ çš„GitHub"></a>4ã€æ­æ¡¥åˆ°ä½ çš„GitHub</h4><p>æ²¡è´¦å·çš„åˆ›å»ºè´¦å·ï¼Œæœ‰è´¦å·çš„çœ‹ä¸‹é¢ã€‚</p><ul><li>åˆ›å»ºä¸€ä¸ªrepoï¼Œåç§°ä¸º<code>yourname.github.io</code>, å…¶ä¸­<code>yourname</code>æ˜¯ä½ çš„githubåç§°ï¼ŒæŒ‰ç…§è¿™ä¸ªè§„åˆ™åˆ›å»ºæ‰æœ‰ç”¨å“¦ï¼Œå¦‚ä¸‹ï¼š<br><img src="/2019/10/28/scaffold/newrepo1.png" alt="newrepo1"></li></ul><p>  <img src="/2019/10/28/scaffold/newrepo2.png" alt="newrepo2"></p><ul><li>è¿›å…¥git bashä¸­å…¶å®è¿›å…¥cmdä¸€æ ·ï¼Œé…ç½®Githubè´¦æˆ·ä¿¡æ¯ï¼ˆYourNameå’ŒYourEailéƒ½æ›¿æ¢æˆä½ è‡ªå·±çš„ï¼‰ï¼š<br><img src="/2019/10/28/scaffold/gitbash.png" alt="gitbash"></li></ul><p>  <img src="/2019/10/28/scaffold/gitconfigname.png" alt="gitconfigname"></p><p>  <img src="/2019/10/28/scaffold/gitconfigemail.png" alt="gitconfigemail"></p><p>  <img src="/2019/10/28/scaffold/gitconfig.png" alt="gitconfig"></p><ul><li><p>åˆ›å»ºSSH</p><ul><li><p>åœ¨Git bashä¸­è¾“å…¥ï¼š<code>ssh-keygen -t rsa -C &quot;youremail@example.com&quot;</code>ï¼Œç”Ÿæˆsshã€‚ç„¶åæŒ‰ä¸‹å›¾çš„æ–¹å¼æ‰¾åˆ°<code>id_rsa.pub</code>æ–‡ä»¶çš„å†…å®¹ã€‚<br><img src="/2019/10/28/scaffold/sshdir.png" alt="sshdir"></p></li><li><p>å°†ä¸Šé¢è·å–çš„sshæ”¾åˆ°githubä¸­ï¼š<br><img src="/2019/10/28/scaffold/sshcontent.png" alt="sshcontent"></p></li><li><p>æ·»åŠ ä¸€ä¸ª New SSH key ï¼Œtitleéšä¾¿å–ï¼Œkeyå°±å¡«åˆšåˆšé‚£ä¸€æ®µã€‚</p></li></ul><p><img src="/2019/10/28/scaffold/githubssh.png" alt="githubssh"></p><ul><li>åœ¨gitbashä¸­éªŒè¯æ˜¯å¦æ·»åŠ æˆåŠŸï¼š<code>ssh -T git@github.com</code></li></ul><p><img src="/2019/10/28/scaffold/sshtest.png" alt="sshtest"></p></li></ul><h4 id="5ã€ä¸€æ­¥ä¹‹é¥äº†"><a href="#5ã€ä¸€æ­¥ä¹‹é¥äº†" class="headerlink" title="5ã€ä¸€æ­¥ä¹‹é¥äº†"></a>5ã€ä¸€æ­¥ä¹‹é¥äº†</h4><ul><li>ç”¨ç¼–è¾‘å™¨æ‰“å¼€ä½ çš„blogé¡¹ç›®ï¼Œä¿®æ”¹<code>_config.yml</code>æ–‡ä»¶çš„ä¸€äº›é…ç½®(å†’å·ä¹‹åéƒ½æ˜¯æœ‰ä¸€ä¸ªåŠè§’ç©ºæ ¼çš„)ï¼š</li></ul><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">deploy:</span><br><span class="hljs-symbol">  type:</span> git<br><span class="hljs-symbol">  repo:</span> https:<span class="hljs-comment">//github.com/YourGithubName/YourGithubName.github.io.git</span><br><span class="hljs-symbol">  branch:</span> master<br></code></pre></td></tr></table></figure><ul><li>å›åˆ°Git bashä¸­ï¼Œè¿›å…¥ä½ çš„blogç›®å½•ï¼Œåˆ†åˆ«æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</li></ul><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs verilog">hexo clean<br>hexo <span class="hljs-keyword">generate</span><br>hexo server<br></code></pre></td></tr></table></figure><p>æ³¨ï¼šhexo 3.0æŠŠæœåŠ¡å™¨ç‹¬ç«‹æˆä¸ªåˆ«æ¨¡å—ï¼Œéœ€è¦å•ç‹¬å®‰è£…ï¼š<code>npm i hexo-server</code>ã€‚</p><ul><li>æ‰“å¼€æµè§ˆå™¨è¾“å…¥ï¼š<code>http://localhost:4000</code></li></ul><h4 id="6ã€ä¸Šä¼ åˆ°GitHub"><a href="#6ã€ä¸Šä¼ åˆ°GitHub" class="headerlink" title="6ã€ä¸Šä¼ åˆ°GitHub"></a>6ã€ä¸Šä¼ åˆ°GitHub</h4><ul><li>å…ˆå®‰è£…ä¸€æ³¢ï¼š<code>npm install hexo-deployer-git --save</code>ï¼ˆè¿™æ ·æ‰èƒ½å°†ä½ å†™å¥½çš„æ–‡ç« éƒ¨ç½²åˆ°githubæœåŠ¡å™¨ä¸Šå¹¶è®©åˆ«äººæµè§ˆåˆ°ï¼‰</li><li>æ‰§è¡Œå‘½ä»¤(å»ºè®®æ¯æ¬¡éƒ½æŒ‰ç…§å¦‚ä¸‹æ­¥éª¤éƒ¨ç½²)ï¼š</li></ul><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs verilog">hexo clean<br>hexo <span class="hljs-keyword">generate</span><br>hexo deploy<br></code></pre></td></tr></table></figure><p>æ³¨æ„deployçš„è¿‡ç¨‹ä¸­è¦è¾“å…¥ä½ çš„usernameåŠpasswardã€‚å¦‚ä¸‹ï¼š</p><p>  <img src="/2019/10/28/scaffold/hexo-deploy.png" alt="hexo-deploy"></p><ul><li>åœ¨æµè§ˆå™¨ä¸­è¾“å…¥<code>http://YourGithubName.github.io</code>å°±å¯ä»¥çœ‹åˆ°ä½ çš„ä¸ªäººåšå®¢å•¦ï¼Œæ˜¯ä¸æ˜¯å¾ˆå…´å¥‹ï¼</li><li>æ„Ÿè§‰Git bashä¸­ä¸œè¥¿å¤ªå¤šçš„æ—¶å€™è¾“å…¥<code>clear</code>å‘½ä»¤æ¸…ç©ºä¸€ä¸‹ã€‚</li></ul><h4 id="7ã€ä¸ªäººåŸŸåç»‘å®š"><a href="#7ã€ä¸ªäººåŸŸåç»‘å®š" class="headerlink" title="7ã€ä¸ªäººåŸŸåç»‘å®š"></a>7ã€ä¸ªäººåŸŸåç»‘å®š</h4><ul><li><p>ç¬¬ä¸€æ­¥è´­ä¹°åŸŸåï¼šéšä¾¿åœ¨å“ªä¸ªç½‘ç«™ä¹°ä¸€ä¸ªå°±å¥½äº†ï¼Œé„™äººæ˜¯åœ¨Tencentè´­ä¹°çš„kongwei-liao.cn, DNSä¹Ÿæ˜¯é¡ºé“åœ¨é‚£ä¹°çš„ã€‚</p></li><li><p>ç¬¬äºŒæ­¥æ·»åŠ CNAMEï¼šåœ¨é¡¹ç›®çš„sourceæ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸€ä¸ªåä¸ºCNAMEçš„æ–‡ä»¶ï¼Œåœ¨é‡Œé¢æ·»åŠ ä½ è´­ä¹°çš„åŸŸåï¼Œæ¯”å¦‚æˆ‘æ·»åŠ çš„æ˜¯<code>kongwei-liao.cn</code>ï¼Œåªèƒ½æ·»åŠ ä¸€ä¸ªå“¦ã€‚</p><p><img src="/2019/10/28/scaffold/domainnamebind.png" alt="domainnamebind"></p></li><li><p>åˆ°DNSä¸­æ·»åŠ ä¸€æ¡è®°å½•</p></li></ul><p>å…¶ä¸­ipåœ°å€ä¸ºä½ çš„Githubçš„åœ°å€ï¼Œå¯åœ¨cmdä¸­pingä¸€ä¸‹å°±èƒ½çœ‹åˆ°(<code>ping yourname.github.io</code>)ï¼š</p><p>  <img src="/2019/10/28/scaffold/pinggithub.png" alt="pinggithub"></p><ul><li>æ¥ç€å†æ¬¡éƒ¨ç½²ä¸€ä¸‹ï¼Œç”¨ä½ è´­ä¹°çš„åŸŸåæ‰“å¼€ï¼Œå°±å¯ä»¥çœ‹åˆ°ä½ çš„åšå®¢å•¦~</li></ul><h4 id="8-ä¿®æ”¹åŠé…ç½®ä¸»é¢˜"><a href="#8-ä¿®æ”¹åŠé…ç½®ä¸»é¢˜" class="headerlink" title="8. ä¿®æ”¹åŠé…ç½®ä¸»é¢˜"></a>8. <strong>ä¿®æ”¹åŠé…ç½®ä¸»é¢˜</strong></h4><ul><li><p>hexoåˆå§‹åŒ–ä¹‹åé»˜è®¤çš„ä¸»é¢˜æ˜¯<code>landscape</code> , ç„¶åä½ å¯ä»¥å»<a href="https://hexo.io/themes/">è¿™ä¸ªåœ°å€</a>é‡Œé¢æ‰¾åˆ°ä½ æƒ³è¦çš„ä¸»é¢˜ã€‚åœ¨githubä¸­æœç´¢ä½ è¦çš„ä¸»é¢˜åç§°ï¼Œé‡Œé¢éƒ½ä¼šæœ‰è¯¥ä¸»é¢˜çš„å¦‚ä½•ä½¿ç”¨çš„ä»‹ç»ï¼ŒæŒ‰ç€æ¥å°±å¥½äº†ï¼Œåæ­£å°±æ˜¯æ”¹æ”¹æ”¹ï¼æˆ‘é€‰çš„æ˜¯<code>hueman</code>,çœ‹èµ·æ¥æŒºä¸é”™ï¼Œè‡³å°‘æ˜¯æˆ‘å–œæ¬¢çš„ç±»å‹ã€‚</p><p><img src="/2019/10/28/scaffold/theme1.png" alt="theme1"></p></li><li><p>è·Ÿè¯¥ä¸»é¢˜ç›¸å…³çš„é…ç½®åœ¨<code>themes/hueman/_config.yml</code>é‡Œé¢,ç„¶åæ ¹æ®ä½ çš„éœ€è¦åœ¨è¿™é…é…é…å°±è¡Œäº†ã€‚</p><p><img src="/2019/10/28/scaffold/theme2.png" alt="theme2"></p></li><li><p>æœ‰çš„ä¸œè¥¿æˆ‘ä¹Ÿä¸çŸ¥é“æ˜¯å•¥ç©æ„å„¿ï¼Œä½ è¦å¤šè¯•å¤šå€’è…¾å‡ æ¬¡ï¼Œå°±èƒ½æ„ä¼šå•¦</p></li><li><p>ä¸‹é¢æ˜¯é’ˆå¯¹æˆ‘æ‰€é€‰çš„ä¸»é¢˜çš„ä¸¤å°ç‚¹(åˆ«çš„ä¸»é¢˜æˆ‘æ²¡çœ‹ï¼Œå¯èƒ½ä¹Ÿæ˜¯ç±»ä¼¼):</p><p>åœ¨å¯¼èˆªæ æ·»åŠ ç‚¹ä¸œè¥¿</p><ul><li>ä¾‹å¦‚æˆ‘æ·»åŠ äº†ä¸€ä¸ªæ›´æ–°æ—¥å¿—çš„æ¨¡å—ã€‚</li><li>åœ¨ä¸»é¢˜çš„é…ç½®æ–‡ä»¶ä¸­ï¼Œmenuæ·»åŠ ä¸€æ ï¼š<code>Board: /board</code>ã€‚</li><li>ç„¶ååœ¨sourceä¸­æ·»åŠ ä¸€ä¸ªboardï¼Œå³å¯¹åº”ä¸Šé¢çš„åå­—ã€‚ç„¶åå†åˆ›å»ºä¸€ä¸ªindex.mdï¼Œé‡Œé¢å¯ä»¥å†™ä½ æƒ³å†™çš„å†…å®¹ã€‚</li><li>åœ¨ä¸»é¢˜çš„<code>hueman/langulages/zh-CN.yml</code>ä¸­çš„indexé€‚å½“çš„ä½ç½®åŠ ï¼š<code>board: &#39;æ›´æ–°æ—¥å¿—&#39;</code>ï¼Œä½ç½®å’Œåå­—æ˜¯ä½ è‡ªå·±è®¾å®šã€‚</li><li>é‡æ–°éƒ¨ç½²ï¼Œç„¶åå°±OKäº†</li></ul><p>åœ¨ä¾§è¾¹æ æ·»åŠ ç‚¹ä¸œè¥¿</p><ul><li>å›åˆ°ä½ çš„ä¸»é¢˜çš„é…ç½®æ–‡ä»¶ä¸­ï¼Œæ‰¾åˆ°<code>widgets</code>ä¸€æ ï¼Œåœ¨ä½ è¦æ·»åŠ çš„ä½ç½®å¤„æ·»åŠ ä¸€æ¡ä½ è‡ªå®šä¹‰çš„åç§°ã€‚ä¾‹å¦‚æˆ‘çš„å«<code>communiation</code>ä¸”æ”¾åœ¨äº†ç¬¬äºŒè¡Œã€‚</li><li>åœ¨ä¸Šé¢æ‰€æåˆ°çš„<code>zh-CN.yml</code>æ–‡ä»¶ä¸­æ‰¾åˆ°sidebarä¸€æ ï¼Œæ·»åŠ <code>communiation: &#39;ä½ è¦è®¾çš„åç§°&#39;</code>ã€‚</li><li>åœ¨<code>hueman/layout/widget</code>ä¸­æ·»åŠ ä¸€ä¸ª<code>communiation.ejs</code>,å¡«å…¥æ¨¡æ¿</li></ul><figure class="highlight erb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs erb"><span class="xml">&lt;%</span><span class="ruby"> <span class="hljs-keyword">if</span> (site.posts.length) &#123; </span><span class="xml">%&gt;</span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;widget-wrap widget-list&quot;</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;widget-title&quot;</span>&gt;</span>&lt;%=</span><span class="ruby"> __(<span class="hljs-string">&#x27;sidebar.communiation&#x27;</span>) </span><span class="xml">%&gt;<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;widget&quot;</span>&gt;</span></span><br><span class="xml">            <span class="hljs-comment">&lt;!--è¿™é‡Œæ·»åŠ ä½ è¦å†™çš„å†…å®¹--&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">&lt;%</span><span class="ruby"> &#125; </span><span class="xml">%&gt;</span><br></code></pre></td></tr></table></figure></li></ul>]]></content>
    
    
    <categories>
      
      <category>Hexoå¼€å§‹ä½¿ç”¨</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Hexo</tag>
      
      <tag>Node.js</tag>
      
      <tag>Git</tag>
      
      <tag>Github</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç¬¬ä¸€ç¯‡ç»ƒæ‰‹æ–‡ç« </title>
    <link href="/2019/10/28/%E6%96%87%E7%AB%A0%E5%90%8D/"/>
    <url>/2019/10/28/%E6%96%87%E7%AB%A0%E5%90%8D/</url>
    
    <content type="html"><![CDATA[<p>ä½ ä»¬å¥½å•Šï¼æˆ‘æ˜¯Kongwei Liaoï¼Œä»Šå¤©ç¬¬ä¸€æ¬¡æ­å»ºäº†è‡ªå·±çš„Blogï¼Œä»Šåä¼šå°†è‡ªå·±ç”Ÿæ´»å·¥ä½œçš„ç‚¹ç‚¹æ»´æ»´è®°å½•ä¸‹æ¥ä¸å¤§å®¶åˆ†äº«ã€‚</p><h2 id="markdownäºŒçº§æ ‡é¢˜"><a href="#markdownäºŒçº§æ ‡é¢˜" class="headerlink" title="markdownäºŒçº§æ ‡é¢˜"></a>markdownäºŒçº§æ ‡é¢˜</h2><h3 id="markdownä¸‰çº§æ ‡é¢˜"><a href="#markdownä¸‰çº§æ ‡é¢˜" class="headerlink" title="markdownä¸‰çº§æ ‡é¢˜"></a>markdownä¸‰çº§æ ‡é¢˜</h3><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">koukoudayou</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>first time</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
